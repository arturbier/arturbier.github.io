import "./../lodash.custom.min.js";
import "./../Tween.js";
// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__require=(t=>"undefined"!=typeof require?require:"undefined"!=typeof Proxy?new Proxy(t,{get:(t,e)=>("undefined"!=typeof require?require:t)[e]}):t)(function(t){if("undefined"!=typeof require)return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),__commonJS=(t,e)=>function(){return e||(0,t[__getOwnPropNames(t)[0]])((e={exports:{}}).exports,e),e.exports},__copyProps=(e,i,s,r)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let t of __getOwnPropNames(i))__hasOwnProp.call(e,t)||t===s||__defProp(e,t,{get:()=>i[t],enumerable:!(r=__getOwnPropDesc(i,t))||r.enumerable});return e},__toESM=(t,e,i)=>(i=null!=t?__create(__getProtoOf(t)):{},__copyProps(!e&&t&&t.__esModule?i:__defProp(i,"default",{value:t,enumerable:!0}),t)),require_c3runtime=__commonJS({"file-map:scripts/c3runtime.js"(exports,module){{let setMatrixArrayType2=function(t){ARRAY_TYPE=t},toRadian2=function(t){return t*degree},equals$92=function(t,e){return Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},create$82=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},clone$82=function(t){var e=new ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},copy$82=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},identity$52=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},fromValues$82=function(t,e,i,s){var r=new ARRAY_TYPE(4);return r[0]=t,r[1]=e,r[2]=i,r[3]=s,r},set$82=function(t,e,i,s,r){return t[0]=e,t[1]=i,t[2]=s,t[3]=r,t},transpose$22=function(t,e){var i;return t===e?(i=e[1],t[1]=e[2],t[2]=i):(t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3]),t},invert$52=function(t,e){var i=e[0],s=e[1],r=e[2],e=e[3],h=i*e-r*s;return h?(t[0]=e*(h=1/h),t[1]=-s*h,t[2]=-r*h,t[3]=i*h,t):null},adjoint$22=function(t,e){var i=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=i,t},determinant$32=function(t){return t[0]*t[3]-t[2]*t[1]},multiply$82=function(t,e,i){var s=e[0],r=e[1],h=e[2],e=e[3],n=i[0],a=i[1],o=i[2],i=i[3];return t[0]=s*n+h*a,t[1]=r*n+e*a,t[2]=s*o+h*i,t[3]=r*o+e*i,t},rotate$42=function(t,e,i){var s=e[0],r=e[1],h=e[2],e=e[3],n=Math.sin(i),i=Math.cos(i);return t[0]=s*i+h*n,t[1]=r*i+e*n,t[2]=s*-n+h*i,t[3]=r*-n+e*i,t},scale$82=function(t,e,i){var s=e[0],r=e[1],h=e[2],e=e[3],n=i[0],i=i[1];return t[0]=s*n,t[1]=r*n,t[2]=h*i,t[3]=e*i,t},fromRotation$42=function(t,e){var i=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t},fromScaling$32=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},str$82=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},frob$32=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},LDU2=function(t,e,i,s){return t[2]=s[2]/s[0],i[0]=s[0],i[1]=s[1],i[3]=s[3]-t[2]*i[1],[t,e,i]},add$82=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t},subtract$62=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t},exactEquals$82=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},equals$82=function(t,e){var i=t[0],s=t[1],r=t[2],t=t[3],h=e[0],n=e[1],a=e[2],e=e[3];return Math.abs(i-h)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(s-n)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(n))&&Math.abs(r-a)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},multiplyScalar$32=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},multiplyScalarAndAdd$32=function(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t},create$72=function(){var t=new ARRAY_TYPE(6);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},clone$72=function(t){var e=new ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},copy$72=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},identity$42=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},fromValues$72=function(t,e,i,s,r,h){var n=new ARRAY_TYPE(6);return n[0]=t,n[1]=e,n[2]=i,n[3]=s,n[4]=r,n[5]=h,n},set$72=function(t,e,i,s,r,h,n){return t[0]=e,t[1]=i,t[2]=s,t[3]=r,t[4]=h,t[5]=n,t},invert$42=function(t,e){var i=e[0],s=e[1],r=e[2],h=e[3],n=e[4],e=e[5],a=i*h-s*r;return a?(t[0]=h*(a=1/a),t[1]=-s*a,t[2]=-r*a,t[3]=i*a,t[4]=(r*e-h*n)*a,t[5]=(s*n-i*e)*a,t):null},determinant$22=function(t){return t[0]*t[3]-t[1]*t[2]},multiply$72=function(t,e,i){var s=e[0],r=e[1],h=e[2],n=e[3],a=e[4],e=e[5],o=i[0],l=i[1],u=i[2],c=i[3],f=i[4],i=i[5];return t[0]=s*o+h*l,t[1]=r*o+n*l,t[2]=s*u+h*c,t[3]=r*u+n*c,t[4]=s*f+h*i+a,t[5]=r*f+n*i+e,t},rotate$32=function(t,e,i){var s=e[0],r=e[1],h=e[2],n=e[3],a=e[4],e=e[5],o=Math.sin(i),i=Math.cos(i);return t[0]=s*i+h*o,t[1]=r*i+n*o,t[2]=s*-o+h*i,t[3]=r*-o+n*i,t[4]=a,t[5]=e,t},scale$72=function(t,e,i){var s=e[0],r=e[1],h=e[2],n=e[3],a=e[4],e=e[5],o=i[0],i=i[1];return t[0]=s*o,t[1]=r*o,t[2]=h*i,t[3]=n*i,t[4]=a,t[5]=e,t},translate$32=function(t,e,i){var s=e[0],r=e[1],h=e[2],n=e[3],a=e[4],e=e[5],o=i[0],i=i[1];return t[0]=s,t[1]=r,t[2]=h,t[3]=n,t[4]=s*o+h*i+a,t[5]=r*o+n*i+e,t},fromRotation$32=function(t,e){var i=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t[4]=0,t[5]=0,t},fromScaling$22=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},fromTranslation$32=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},str$72=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},frob$22=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},add$72=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t},subtract$52=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t},multiplyScalar$22=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t},multiplyScalarAndAdd$22=function(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t[4]=e[4]+i[4]*s,t[5]=e[5]+i[5]*s,t},exactEquals$72=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},equals$72=function(t,e){var i=t[0],s=t[1],r=t[2],h=t[3],n=t[4],t=t[5],a=e[0],o=e[1],l=e[2],u=e[3],c=e[4],e=e[5];return Math.abs(i-a)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(s-o)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(o))&&Math.abs(r-l)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(h-u)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(u))&&Math.abs(n-c)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},create$62=function(){var t=new ARRAY_TYPE(9);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},fromMat4$12=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},clone$62=function(t){var e=new ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},copy$62=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},fromValues$62=function(t,e,i,s,r,h,n,a,o){var l=new ARRAY_TYPE(9);return l[0]=t,l[1]=e,l[2]=i,l[3]=s,l[4]=r,l[5]=h,l[6]=n,l[7]=a,l[8]=o,l},set$62=function(t,e,i,s,r,h,n,a,o,l){return t[0]=e,t[1]=i,t[2]=s,t[3]=r,t[4]=h,t[5]=n,t[6]=a,t[7]=o,t[8]=l,t},identity$32=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},transpose$12=function(t,e){var i,s,r;return t===e?(i=e[1],s=e[2],r=e[5],t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=s,t[7]=r):(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8]),t},invert$32=function(t,e){var i=e[0],s=e[1],r=e[2],h=e[3],n=e[4],a=e[5],o=e[6],l=e[7],e=e[8],u=e*n-a*l,c=-e*h+a*o,f=l*h-n*o,d=i*u+s*c+r*f;return d?(t[0]=u*(d=1/d),t[1]=(-e*s+r*l)*d,t[2]=(a*s-r*n)*d,t[3]=c*d,t[4]=(e*i-r*o)*d,t[5]=(-a*i+r*h)*d,t[6]=f*d,t[7]=(-l*i+s*o)*d,t[8]=(n*i-s*h)*d,t):null},adjoint$12=function(t,e){var i=e[0],s=e[1],r=e[2],h=e[3],n=e[4],a=e[5],o=e[6],l=e[7],e=e[8];return t[0]=n*e-a*l,t[1]=r*l-s*e,t[2]=s*a-r*n,t[3]=a*o-h*e,t[4]=i*e-r*o,t[5]=r*h-i*a,t[6]=h*l-n*o,t[7]=s*o-i*l,t[8]=i*n-s*h,t},determinant$12=function(t){var e=t[0],i=t[3],s=t[4],r=t[5],h=t[6],n=t[7],a=t[8];return e*(a*s-r*n)+t[1]*(-a*i+r*h)+t[2]*(n*i-s*h)},multiply$62=function(t,e,i){var s=e[0],r=e[1],h=e[2],n=e[3],a=e[4],o=e[5],l=e[6],u=e[7],e=e[8],c=i[0],f=i[1],d=i[2],C=i[3],p=i[4],m=i[5],v=i[6],S=i[7],i=i[8];return t[0]=c*s+f*n+d*l,t[1]=c*r+f*a+d*u,t[2]=c*h+f*o+d*e,t[3]=C*s+p*n+m*l,t[4]=C*r+p*a+m*u,t[5]=C*h+p*o+m*e,t[6]=v*s+S*n+i*l,t[7]=v*r+S*a+i*u,t[8]=v*h+S*o+i*e,t},translate$22=function(t,e,i){var s=e[0],r=e[1],h=e[2],n=e[3],a=e[4],o=e[5],l=e[6],u=e[7],e=e[8],c=i[0],i=i[1];return t[0]=s,t[1]=r,t[2]=h,t[3]=n,t[4]=a,t[5]=o,t[6]=c*s+i*n+l,t[7]=c*r+i*a+u,t[8]=c*h+i*o+e,t},rotate$22=function(t,e,i){var s=e[0],r=e[1],h=e[2],n=e[3],a=e[4],o=e[5],l=e[6],u=e[7],e=e[8],c=Math.sin(i),i=Math.cos(i);return t[0]=i*s+c*n,t[1]=i*r+c*a,t[2]=i*h+c*o,t[3]=i*n-c*s,t[4]=i*a-c*r,t[5]=i*o-c*h,t[6]=l,t[7]=u,t[8]=e,t},scale$62=function(t,e,i){var s=i[0],i=i[1];return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},fromTranslation$22=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},fromRotation$22=function(t,e){var i=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=i,t[2]=0,t[3]=-i,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromScaling$12=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromMat2d2=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},fromQuat$12=function(t,e){var i=e[0],s=e[1],r=e[2],e=e[3],h=i+i,n=s+s,a=r+r,i=i*h,o=s*h,s=s*n,l=r*h,u=r*n,r=r*a,h=e*h,n=e*n,e=e*a;return t[0]=1-s-r,t[3]=o-e,t[6]=l+n,t[1]=o+e,t[4]=1-i-r,t[7]=u-h,t[2]=l-n,t[5]=u+h,t[8]=1-i-s,t},normalFromMat42=function(t,e){var i=e[0],s=e[1],r=e[2],h=e[3],n=e[4],a=e[5],o=e[6],l=e[7],u=e[8],c=e[9],f=e[10],d=e[11],C=e[12],p=e[13],m=e[14],e=e[15],v=i*a-s*n,S=i*o-r*n,g=i*l-h*n,T=s*o-r*a,_=s*l-h*a,E=r*l-h*o,y=u*p-c*C,A=u*m-f*C,u=u*e-d*C,I=c*m-f*p,c=c*e-d*p,f=f*e-d*m,d=v*f-S*c+g*I+T*u-_*A+E*y;return d?(t[0]=(a*f-o*c+l*I)*(d=1/d),t[1]=(o*u-n*f-l*A)*d,t[2]=(n*c-a*u+l*y)*d,t[3]=(r*c-s*f-h*I)*d,t[4]=(i*f-r*u+h*A)*d,t[5]=(s*u-i*c-h*y)*d,t[6]=(p*E-m*_+e*T)*d,t[7]=(m*g-C*E-e*S)*d,t[8]=(C*_-p*g+e*v)*d,t):null},projection2=function(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},str$62=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},frob$12=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},add$62=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t},subtract$42=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t},multiplyScalar$12=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t},multiplyScalarAndAdd$12=function(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t[4]=e[4]+i[4]*s,t[5]=e[5]+i[5]*s,t[6]=e[6]+i[6]*s,t[7]=e[7]+i[7]*s,t[8]=e[8]+i[8]*s,t},exactEquals$62=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},equals$62=function(t,e){var i=t[0],s=t[1],r=t[2],h=t[3],n=t[4],a=t[5],o=t[6],l=t[7],t=t[8],u=e[0],c=e[1],f=e[2],d=e[3],C=e[4],p=e[5],m=e[6],v=e[7],e=e[8];return Math.abs(i-u)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(s-c)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(r-f)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(h-d)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(d))&&Math.abs(n-C)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(C))&&Math.abs(a-p)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(o-m)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(l-v)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},create$52=function(){var t=new ARRAY_TYPE(16);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},clone$52=function(t){var e=new ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},copy$52=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},fromValues$52=function(t,e,i,s,r,h,n,a,o,l,u,c,f,d,C,p){var m=new ARRAY_TYPE(16);return m[0]=t,m[1]=e,m[2]=i,m[3]=s,m[4]=r,m[5]=h,m[6]=n,m[7]=a,m[8]=o,m[9]=l,m[10]=u,m[11]=c,m[12]=f,m[13]=d,m[14]=C,m[15]=p,m},set$52=function(t,e,i,s,r,h,n,a,o,l,u,c,f,d,C,p,m){return t[0]=e,t[1]=i,t[2]=s,t[3]=r,t[4]=h,t[5]=n,t[6]=a,t[7]=o,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=C,t[14]=p,t[15]=m,t},identity$22=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},transpose2=function(t,e){var i,s,r,h,n,a;return t===e?(i=e[1],s=e[2],r=e[3],h=e[6],n=e[7],a=e[11],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=s,t[9]=h,t[11]=e[14],t[12]=r,t[13]=n,t[14]=a):(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]),t},invert$22=function(t,e){var i=e[0],s=e[1],r=e[2],h=e[3],n=e[4],a=e[5],o=e[6],l=e[7],u=e[8],c=e[9],f=e[10],d=e[11],C=e[12],p=e[13],m=e[14],e=e[15],v=i*a-s*n,S=i*o-r*n,g=i*l-h*n,T=s*o-r*a,_=s*l-h*a,E=r*l-h*o,y=u*p-c*C,A=u*m-f*C,I=u*e-d*C,R=c*m-f*p,M=c*e-d*p,w=f*e-d*m,b=v*w-S*M+g*R+T*I-_*A+E*y;return b?(t[0]=(a*w-o*M+l*R)*(b=1/b),t[1]=(r*M-s*w-h*R)*b,t[2]=(p*E-m*_+e*T)*b,t[3]=(f*_-c*E-d*T)*b,t[4]=(o*I-n*w-l*A)*b,t[5]=(i*w-r*I+h*A)*b,t[6]=(m*g-C*E-e*S)*b,t[7]=(u*E-f*g+d*S)*b,t[8]=(n*M-a*I+l*y)*b,t[9]=(s*I-i*M-h*y)*b,t[10]=(C*_-p*g+e*v)*b,t[11]=(c*g-u*_-d*v)*b,t[12]=(a*A-n*R-o*y)*b,t[13]=(i*R-s*A+r*y)*b,t[14]=(p*S-C*T-m*v)*b,t[15]=(u*T-c*S+f*v)*b,t):null},adjoint2=function(t,e){var i=e[0],s=e[1],r=e[2],h=e[3],n=e[4],a=e[5],o=e[6],l=e[7],u=e[8],c=e[9],f=e[10],d=e[11],C=e[12],p=e[13],m=e[14],e=e[15],v=i*a-s*n,S=i*o-r*n,g=i*l-h*n,T=s*o-r*a,_=s*l-h*a,E=r*l-h*o,y=u*p-c*C,A=u*m-f*C,I=u*e-d*C,R=c*m-f*p,M=c*e-d*p,w=f*e-d*m;return t[0]=a*w-o*M+l*R,t[1]=r*M-s*w-h*R,t[2]=p*E-m*_+e*T,t[3]=f*_-c*E-d*T,t[4]=o*I-n*w-l*A,t[5]=i*w-r*I+h*A,t[6]=m*g-C*E-e*S,t[7]=u*E-f*g+d*S,t[8]=n*M-a*I+l*y,t[9]=s*I-i*M-h*y,t[10]=C*_-p*g+e*v,t[11]=c*g-u*_-d*v,t[12]=a*A-n*R-o*y,t[13]=i*R-s*A+r*y,t[14]=p*S-C*T-m*v,t[15]=u*T-c*S+f*v,t},determinant2=function(t){var e=t[0],i=t[1],s=t[2],r=t[4],h=t[5],n=t[6],a=t[8],o=t[9],l=t[10],u=t[12],c=t[13],f=t[14],d=e*h-i*r,C=e*n-s*r,p=i*n-s*h,m=a*c-o*u,v=a*f-l*u,S=o*f-l*c;return t[7]*(e*S-i*v+s*m)-t[3]*(r*S-h*v+n*m)+t[15]*(a*p-o*C+l*d)-t[11]*(u*p-c*C+f*d)},multiply$52=function(t,e,i){var s=e[0],r=e[1],h=e[2],n=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],f=e[9],d=e[10],C=e[11],p=e[12],m=e[13],v=e[14],e=e[15],S=i[0],g=i[1],T=i[2],_=i[3];return t[0]=S*s+g*a+T*c+_*p,t[1]=S*r+g*o+T*f+_*m,t[2]=S*h+g*l+T*d+_*v,t[3]=S*n+g*u+T*C+_*e,t[4]=(S=i[4])*s+(g=i[5])*a+(T=i[6])*c+(_=i[7])*p,t[5]=S*r+g*o+T*f+_*m,t[6]=S*h+g*l+T*d+_*v,t[7]=S*n+g*u+T*C+_*e,t[8]=(S=i[8])*s+(g=i[9])*a+(T=i[10])*c+(_=i[11])*p,t[9]=S*r+g*o+T*f+_*m,t[10]=S*h+g*l+T*d+_*v,t[11]=S*n+g*u+T*C+_*e,t[12]=(S=i[12])*s+(g=i[13])*a+(T=i[14])*c+(_=i[15])*p,t[13]=S*r+g*o+T*f+_*m,t[14]=S*h+g*l+T*d+_*v,t[15]=S*n+g*u+T*C+_*e,t},translate$12=function(t,e,i){var s,r,h,n,a,o,l,u,c,f,d,C,p=i[0],m=i[1],i=i[2];return e===t?(t[12]=e[0]*p+e[4]*m+e[8]*i+e[12],t[13]=e[1]*p+e[5]*m+e[9]*i+e[13],t[14]=e[2]*p+e[6]*m+e[10]*i+e[14],t[15]=e[3]*p+e[7]*m+e[11]*i+e[15]):(s=e[0],r=e[1],h=e[2],n=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],f=e[9],d=e[10],C=e[11],t[0]=s,t[1]=r,t[2]=h,t[3]=n,t[4]=a,t[5]=o,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=C,t[12]=s*p+a*m+c*i+e[12],t[13]=r*p+o*m+f*i+e[13],t[14]=h*p+l*m+d*i+e[14],t[15]=n*p+u*m+C*i+e[15]),t},scale$52=function(t,e,i){var s=i[0],r=i[1],i=i[2];return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},rotate$12=function(t,e,i,s){var r,h,n,a,o,l,u,c,f,d,C,p,m,v,S,g,T,_,E,y,A=s[0],I=s[1],s=s[2],R=Math.hypot(A,I,s);return R<EPSILON?null:(A*=R=1/R,I*=R,s*=R,R=Math.sin(i),i=Math.cos(i),h=e[0],n=e[1],a=e[2],o=e[3],u=e[5],c=e[6],f=e[7],C=e[9],p=e[10],m=e[11],S=A*I*(r=1-i)-s*R,g=I*I*r+i,T=s*I*r+A*R,_=A*s*r+I*R,E=I*s*r-A*R,y=s*s*r+i,t[0]=h*(i=A*A*r+i)+(l=e[4])*(v=I*A*r+s*R)+(d=e[8])*(s=s*A*r-I*R),t[1]=n*i+u*v+C*s,t[2]=a*i+c*v+p*s,t[3]=o*i+f*v+m*s,t[4]=h*S+l*g+d*T,t[5]=n*S+u*g+C*T,t[6]=a*S+c*g+p*T,t[7]=o*S+f*g+m*T,t[8]=h*_+l*E+d*y,t[9]=n*_+u*E+C*y,t[10]=a*_+c*E+p*y,t[11]=o*_+f*E+m*y,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},rotateX$32=function(t,e,i){var s=Math.sin(i),i=Math.cos(i),r=e[4],h=e[5],n=e[6],a=e[7],o=e[8],l=e[9],u=e[10],c=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=r*i+o*s,t[5]=h*i+l*s,t[6]=n*i+u*s,t[7]=a*i+c*s,t[8]=o*i-r*s,t[9]=l*i-h*s,t[10]=u*i-n*s,t[11]=c*i-a*s,t},rotateY$32=function(t,e,i){var s=Math.sin(i),i=Math.cos(i),r=e[0],h=e[1],n=e[2],a=e[3],o=e[8],l=e[9],u=e[10],c=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*i-o*s,t[1]=h*i-l*s,t[2]=n*i-u*s,t[3]=a*i-c*s,t[8]=r*s+o*i,t[9]=h*s+l*i,t[10]=n*s+u*i,t[11]=a*s+c*i,t},rotateZ$32=function(t,e,i){var s=Math.sin(i),i=Math.cos(i),r=e[0],h=e[1],n=e[2],a=e[3],o=e[4],l=e[5],u=e[6],c=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*i+o*s,t[1]=h*i+l*s,t[2]=n*i+u*s,t[3]=a*i+c*s,t[4]=o*i-r*s,t[5]=l*i-h*s,t[6]=u*i-n*s,t[7]=c*i-a*s,t},fromTranslation$12=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},fromScaling2=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotation$12=function(t,e,i){var s,r=i[0],h=i[1],i=i[2],n=Math.hypot(r,h,i);return n<EPSILON?null:(r*=n=1/n,h*=n,i*=n,n=Math.sin(e),e=Math.cos(e),t[0]=r*r*(s=1-e)+e,t[1]=h*r*s+i*n,t[2]=i*r*s-h*n,t[3]=0,t[4]=r*h*s-i*n,t[5]=h*h*s+e,t[6]=i*h*s+r*n,t[7]=0,t[8]=r*i*s+h*n,t[9]=h*i*s-r*n,t[10]=i*i*s+e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},fromXRotation2=function(t,e){var i=Math.sin(e),e=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromYRotation2=function(t,e){var i=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation2=function(t,e){var i=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotationTranslation$12=function(t,e,i){var s=e[0],r=e[1],h=e[2],e=e[3],n=s+s,a=r+r,o=h+h,l=s*n,u=s*a,s=s*o,c=r*a,r=r*o,h=h*o,n=e*n,a=e*a,e=e*o;return t[0]=1-(c+h),t[1]=u+e,t[2]=s-a,t[3]=0,t[4]=u-e,t[5]=1-(l+h),t[6]=r+n,t[7]=0,t[8]=s+a,t[9]=r-n,t[10]=1-(l+c),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},fromQuat22=function(t,e){var i=new ARRAY_TYPE(3),s=-e[0],r=-e[1],h=-e[2],n=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=s*s+r*r+h*h+n*n;return 0<c?(i[0]=2*(a*n+u*s+o*h-l*r)/c,i[1]=2*(o*n+u*r+l*s-a*h)/c,i[2]=2*(l*n+u*h+a*r-o*s)/c):(i[0]=2*(a*n+u*s+o*h-l*r),i[1]=2*(o*n+u*r+l*s-a*h),i[2]=2*(l*n+u*h+a*r-o*s)),fromRotationTranslation$12(t,e,i),t},getTranslation$12=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},getScaling2=function(t,e){var i=e[0],s=e[4],r=e[5],h=e[6],n=e[8],a=e[9],o=e[10];return t[0]=Math.hypot(i,e[1],e[2]),t[1]=Math.hypot(s,r,h),t[2]=Math.hypot(n,a,o),t},getRotation2=function(t,e){var i=new ARRAY_TYPE(3),s=(getScaling2(i,e),1/i[0]),r=1/i[1],i=1/i[2],h=e[0]*s,n=e[1]*r,a=e[2]*i,o=e[4]*s,l=e[5]*r,u=e[6]*i,s=e[8]*s,r=e[9]*r,e=e[10]*i,i=h+l+e,c=0;return 0<i?(c=2*Math.sqrt(1+i),t[3]=.25*c,t[0]=(u-r)/c,t[1]=(s-a)/c,t[2]=(n-o)/c):l<h&&e<h?(c=2*Math.sqrt(1+h-l-e),t[3]=(u-r)/c,t[0]=.25*c,t[1]=(n+o)/c,t[2]=(s+a)/c):e<l?(c=2*Math.sqrt(1+l-h-e),t[3]=(s-a)/c,t[0]=(n+o)/c,t[1]=.25*c,t[2]=(u+r)/c):(c=2*Math.sqrt(1+e-h-l),t[3]=(n-o)/c,t[0]=(s+a)/c,t[1]=(u+r)/c,t[2]=.25*c),t},decompose2=function(t,e,i,s){e[0]=s[12],e[1]=s[13],e[2]=s[14];var e=s[0],r=s[1],h=s[2],n=s[4],a=s[5],o=s[6],l=s[8],u=s[9],s=s[10],c=(i[0]=Math.hypot(e,r,h),i[1]=Math.hypot(n,a,o),i[2]=Math.hypot(l,u,s),1/i[0]),f=1/i[1],i=1/i[2],e=e*c,r=r*f,h=h*i,n=n*c,a=a*f,o=o*i,l=l*c,c=u*f,u=s*i,f=e+a+u,s=0;return 0<f?(s=2*Math.sqrt(1+f),t[3]=.25*s,t[0]=(o-c)/s,t[1]=(l-h)/s,t[2]=(r-n)/s):a<e&&u<e?(s=2*Math.sqrt(1+e-a-u),t[3]=(o-c)/s,t[0]=.25*s,t[1]=(r+n)/s,t[2]=(l+h)/s):u<a?(s=2*Math.sqrt(1+a-e-u),t[3]=(l-h)/s,t[0]=(r+n)/s,t[1]=.25*s,t[2]=(o+c)/s):(s=2*Math.sqrt(1+u-e-a),t[3]=(r-n)/s,t[0]=(l+h)/s,t[1]=(o+c)/s,t[2]=.25*s),t},fromRotationTranslationScale2=function(t,e,i,s){var r=e[0],h=e[1],n=e[2],e=e[3],a=r+r,o=h+h,l=n+n,u=r*a,c=r*o,r=r*l,f=h*o,h=h*l,n=n*l,a=e*a,o=e*o,e=e*l,l=s[0],d=s[1],s=s[2];return t[0]=(1-(f+n))*l,t[1]=(c+e)*l,t[2]=(r-o)*l,t[3]=0,t[4]=(c-e)*d,t[5]=(1-(u+n))*d,t[6]=(h+a)*d,t[7]=0,t[8]=(r+o)*s,t[9]=(h-a)*s,t[10]=(1-(u+f))*s,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},fromRotationTranslationScaleOrigin2=function(t,e,i,s,r){var h=e[0],n=e[1],a=e[2],e=e[3],o=h+h,l=n+n,u=a+a,c=h*o,f=h*l,h=h*u,d=n*l,n=n*u,a=a*u,o=e*o,l=e*l,e=e*u,u=s[0],C=s[1],s=s[2],p=r[0],m=r[1],r=r[2],v=(1-(d+a))*u,S=(f+e)*u,u=(h-l)*u,f=(f-e)*C,e=(1-(c+a))*C,a=(n+o)*C,C=(h+l)*s,h=(n-o)*s,l=(1-(c+d))*s;return t[0]=v,t[1]=S,t[2]=u,t[3]=0,t[4]=f,t[5]=e,t[6]=a,t[7]=0,t[8]=C,t[9]=h,t[10]=l,t[11]=0,t[12]=i[0]+p-(v*p+f*m+C*r),t[13]=i[1]+m-(S*p+e*m+h*r),t[14]=i[2]+r-(u*p+a*m+l*r),t[15]=1,t},fromQuat3=function(t,e){var i=e[0],s=e[1],r=e[2],e=e[3],h=i+i,n=s+s,a=r+r,i=i*h,o=s*h,s=s*n,l=r*h,u=r*n,r=r*a,h=e*h,n=e*n,e=e*a;return t[0]=1-s-r,t[1]=o+e,t[2]=l-n,t[3]=0,t[4]=o-e,t[5]=1-i-r,t[6]=u+h,t[7]=0,t[8]=l+n,t[9]=u-h,t[10]=1-i-s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},frustum2=function(t,e,i,s,r,h,n){var a=1/(i-e),o=1/(r-s),l=1/(h-n);return t[0]=2*h*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*h*o,t[6]=0,t[7]=0,t[8]=(i+e)*a,t[9]=(r+s)*o,t[10]=(n+h)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=n*h*2*l,t[15]=0,t},perspectiveNO2=function(t,e,i,s,r){e=1/Math.tan(e/2);return t[0]=e/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=(r+s)*(i=1/(s-r)),t[14]=2*r*s*i):(t[10]=-1,t[14]=-2*s),t},perspectiveZO2=function(t,e,i,s,r){e=1/Math.tan(e/2);return t[0]=e/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=r*(i=1/(s-r)),t[14]=r*s*i):(t[10]=-1,t[14]=-s),t},perspectiveFromFieldOfView2=function(t,e,i,s){var r=Math.tan(e.upDegrees*Math.PI/180),h=Math.tan(e.downDegrees*Math.PI/180),n=Math.tan(e.leftDegrees*Math.PI/180),e=Math.tan(e.rightDegrees*Math.PI/180),a=2/(n+e),o=2/(r+h);return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=-(n-e)*a*.5,t[9]=(r-h)*o*.5,t[10]=s/(i-s),t[11]=-1,t[12]=0,t[13]=0,t[14]=s*i/(i-s),t[15]=0,t},orthoNO2=function(t,e,i,s,r,h,n){var a=1/(e-i),o=1/(s-r),l=1/(h-n);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+i)*a,t[13]=(r+s)*o,t[14]=(n+h)*l,t[15]=1,t},orthoZO2=function(t,e,i,s,r,h,n){var a=1/(e-i),o=1/(s-r),n=1/(h-n);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n,t[11]=0,t[12]=(e+i)*a,t[13]=(r+s)*o,t[14]=h*n,t[15]=1,t},lookAt2=function(t,e,i,s){var r,h,n,a,o=e[0],l=e[1],e=e[2],u=s[0],c=s[1],s=s[2],f=i[0],d=i[1],i=i[2];return Math.abs(o-f)<EPSILON&&Math.abs(l-d)<EPSILON&&Math.abs(e-i)<EPSILON?identity$22(t):(f=o-f,d=l-d,i=e-i,r=c*(i*=a=1/Math.hypot(f,d,i))-s*(d*=a),s=s*(f*=a)-u*i,u=u*d-c*f,(a=Math.hypot(r,s,u))?(r*=a=1/a,s*=a,u*=a):u=s=r=0,c=d*u-i*s,h=i*r-f*u,n=f*s-d*r,(a=Math.hypot(c,h,n))?(c*=a=1/a,h*=a,n*=a):n=h=c=0,t[0]=r,t[1]=c,t[2]=f,t[3]=0,t[4]=s,t[5]=h,t[6]=d,t[7]=0,t[8]=u,t[9]=n,t[10]=i,t[11]=0,t[12]=-(r*o+s*l+u*e),t[13]=-(c*o+h*l+n*e),t[14]=-(f*o+d*l+i*e),t[15]=1,t)},targetTo2=function(t,e,i,s){var r=e[0],h=e[1],e=e[2],n=s[0],a=s[1],s=s[2],o=r-i[0],l=h-i[1],i=e-i[2],u=o*o+l*l+i*i,c=(0<u&&(o*=u=1/Math.sqrt(u),l*=u,i*=u),a*i-s*l),s=s*o-n*i,n=n*l-a*o;return 0<(u=c*c+s*s+n*n)&&(c*=u=1/Math.sqrt(u),s*=u,n*=u),t[0]=c,t[1]=s,t[2]=n,t[3]=0,t[4]=l*n-i*s,t[5]=i*c-o*n,t[6]=o*s-l*c,t[7]=0,t[8]=o,t[9]=l,t[10]=i,t[11]=0,t[12]=r,t[13]=h,t[14]=e,t[15]=1,t},str$52=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},frob2=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},add$52=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t},subtract$32=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t},multiplyScalar2=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t},multiplyScalarAndAdd2=function(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t[4]=e[4]+i[4]*s,t[5]=e[5]+i[5]*s,t[6]=e[6]+i[6]*s,t[7]=e[7]+i[7]*s,t[8]=e[8]+i[8]*s,t[9]=e[9]+i[9]*s,t[10]=e[10]+i[10]*s,t[11]=e[11]+i[11]*s,t[12]=e[12]+i[12]*s,t[13]=e[13]+i[13]*s,t[14]=e[14]+i[14]*s,t[15]=e[15]+i[15]*s,t},exactEquals$52=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},equals$52=function(t,e){var i=t[0],s=t[1],r=t[2],h=t[3],n=t[4],a=t[5],o=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],C=t[12],p=t[13],m=t[14],t=t[15],v=e[0],S=e[1],g=e[2],T=e[3],_=e[4],E=e[5],y=e[6],A=e[7],I=e[8],R=e[9],M=e[10],w=e[11],b=e[12],O=e[13],G=e[14],e=e[15];return Math.abs(i-v)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(s-S)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(r-g)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(h-T)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(n-_)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(a-E)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(o-y)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(l-A)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(u-I)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(c-R)<=EPSILON*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(f-M)<=EPSILON*Math.max(1,Math.abs(f),Math.abs(M))&&Math.abs(d-w)<=EPSILON*Math.max(1,Math.abs(d),Math.abs(w))&&Math.abs(C-b)<=EPSILON*Math.max(1,Math.abs(C),Math.abs(b))&&Math.abs(p-O)<=EPSILON*Math.max(1,Math.abs(p),Math.abs(O))&&Math.abs(m-G)<=EPSILON*Math.max(1,Math.abs(m),Math.abs(G))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},create$42=function(){var t=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},clone$42=function(t){var e=new ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},length$42=function(t){var e=t[0];return Math.hypot(e,t[1],t[2])},fromValues$42=function(t,e,i){var s=new ARRAY_TYPE(3);return s[0]=t,s[1]=e,s[2]=i,s},copy$42=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},set$42=function(t,e,i,s){return t[0]=e,t[1]=i,t[2]=s,t},add$42=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t},subtract$22=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t},multiply$42=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t},divide$22=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t},ceil$22=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},floor$22=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},min$22=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t},max$22=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t},round$22=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},scale$42=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t},scaleAndAdd$22=function(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t},distance$22=function(t,e){var i=e[0]-t[0];return Math.hypot(i,e[1]-t[1],e[2]-t[2])},squaredDistance$22=function(t,e){var i=e[0]-t[0],s=e[1]-t[1],e=e[2]-t[2];return i*i+s*s+e*e},squaredLength$42=function(t){var e=t[0],i=t[1],t=t[2];return e*e+i*i+t*t},negate$22=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},inverse$22=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},normalize$42=function(t,e){var i=e[0],s=e[1],r=e[2],i=i*i+s*s+r*r;return 0<i&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t},dot$42=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},cross$22=function(t,e,i){var s=e[0],r=e[1],e=e[2],h=i[0],n=i[1],i=i[2];return t[0]=r*i-e*n,t[1]=e*h-s*i,t[2]=s*n-r*h,t},lerp$42=function(t,e,i,s){var r=e[0],h=e[1],e=e[2];return t[0]=r+s*(i[0]-r),t[1]=h+s*(i[1]-h),t[2]=e+s*(i[2]-e),t},slerp$12=function(t,e,i,s){var r=Math.acos(Math.min(Math.max(dot$42(e,i),-1),1)),h=Math.sin(r),n=Math.sin((1-s)*r)/h,s=Math.sin(s*r)/h;return t[0]=n*e[0]+s*i[0],t[1]=n*e[1]+s*i[1],t[2]=n*e[2]+s*i[2],t},hermite2=function(t,e,i,s,r,h){var n=h*h,a=n*(2*h-3)+1,o=n*(h-2)+h,l=n*(h-1),n=n*(3-2*h);return t[0]=e[0]*a+i[0]*o+s[0]*l+r[0]*n,t[1]=e[1]*a+i[1]*o+s[1]*l+r[1]*n,t[2]=e[2]*a+i[2]*o+s[2]*l+r[2]*n,t},bezier2=function(t,e,i,s,r,h){var n=1-h,a=n*n,o=h*h,l=a*n,a=3*h*a,n=3*o*n,o=o*h;return t[0]=e[0]*l+i[0]*a+s[0]*n+r[0]*o,t[1]=e[1]*l+i[1]*a+s[1]*n+r[1]*o,t[2]=e[2]*l+i[2]*a+s[2]*n+r[2]*o,t},random$32=function(t,e){e=e||1;var i=2*RANDOM()*Math.PI,s=2*RANDOM()-1,r=Math.sqrt(1-s*s)*e;return t[0]=Math.cos(i)*r,t[1]=Math.sin(i)*r,t[2]=s*e,t},transformMat4$22=function(t,e,i){var s=e[0],r=e[1],e=e[2],h=i[3]*s+i[7]*r+i[11]*e+i[15];return t[0]=(i[0]*s+i[4]*r+i[8]*e+i[12])/(h=h||1),t[1]=(i[1]*s+i[5]*r+i[9]*e+i[13])/h,t[2]=(i[2]*s+i[6]*r+i[10]*e+i[14])/h,t},transformMat3$12=function(t,e,i){var s=e[0],r=e[1],e=e[2];return t[0]=s*i[0]+r*i[3]+e*i[6],t[1]=s*i[1]+r*i[4]+e*i[7],t[2]=s*i[2]+r*i[5]+e*i[8],t},transformQuat$12=function(t,e,i){var s=i[0],r=i[1],h=i[2],n=e[0],a=e[1],e=e[2],o=r*e-h*a,l=h*n-s*e,u=s*a-r*n,c=r*u-h*l,h=h*o-s*u,s=s*l-r*o,r=2*i[3];return l*=r,u*=r,h*=2,s*=2,t[0]=n+(o*=r)+(c*=2),t[1]=a+l+h,t[2]=e+u+s,t},rotateX$22=function(t,e,i,s){var r=[],h=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],h[0]=r[0],h[1]=r[1]*Math.cos(s)-r[2]*Math.sin(s),h[2]=r[1]*Math.sin(s)+r[2]*Math.cos(s),t[0]=h[0]+i[0],t[1]=h[1]+i[1],t[2]=h[2]+i[2],t},rotateY$22=function(t,e,i,s){var r=[],h=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],h[0]=r[2]*Math.sin(s)+r[0]*Math.cos(s),h[1]=r[1],h[2]=r[2]*Math.cos(s)-r[0]*Math.sin(s),t[0]=h[0]+i[0],t[1]=h[1]+i[1],t[2]=h[2]+i[2],t},rotateZ$22=function(t,e,i,s){var r=[],h=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],h[0]=r[0]*Math.cos(s)-r[1]*Math.sin(s),h[1]=r[0]*Math.sin(s)+r[1]*Math.cos(s),h[2]=r[2],t[0]=h[0]+i[0],t[1]=h[1]+i[1],t[2]=h[2]+i[2],t},angle$12=function(t,e){var i=t[0],s=t[1],r=t[2],h=e[0],n=e[1],a=e[2],i=Math.sqrt((i*i+s*s+r*r)*(h*h+n*n+a*a)),s=i&&dot$42(t,e)/i;return Math.acos(Math.min(Math.max(s,-1),1))},zero$22=function(t){return t[0]=0,t[1]=0,t[2]=0,t},str$42=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},exactEquals$42=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},equals$42=function(t,e){var i=t[0],s=t[1],t=t[2],r=e[0],h=e[1],e=e[2];return Math.abs(i-r)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(s-h)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},create$32=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},clone$32=function(t){var e=new ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},fromValues$32=function(t,e,i,s){var r=new ARRAY_TYPE(4);return r[0]=t,r[1]=e,r[2]=i,r[3]=s,r},copy$32=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},set$32=function(t,e,i,s,r){return t[0]=e,t[1]=i,t[2]=s,t[3]=r,t},add$32=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t},subtract$12=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t},multiply$32=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t},divide$12=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t},ceil$12=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},floor$12=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},min$12=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t},max$12=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t},round$12=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},scale$32=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},scaleAndAdd$12=function(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t},distance$12=function(t,e){var i=e[0]-t[0];return Math.hypot(i,e[1]-t[1],e[2]-t[2],e[3]-t[3])},squaredDistance$12=function(t,e){var i=e[0]-t[0],s=e[1]-t[1],r=e[2]-t[2],e=e[3]-t[3];return i*i+s*s+r*r+e*e},length$32=function(t){var e=t[0];return Math.hypot(e,t[1],t[2],t[3])},squaredLength$32=function(t){var e=t[0],i=t[1],s=t[2],t=t[3];return e*e+i*i+s*s+t*t},negate$12=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},inverse$12=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},normalize$32=function(t,e){var i=e[0],s=e[1],r=e[2],e=e[3],h=i*i+s*s+r*r+e*e;return 0<h&&(h=1/Math.sqrt(h)),t[0]=i*h,t[1]=s*h,t[2]=r*h,t[3]=e*h,t},dot$32=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},cross$12=function(t,e,i,s){var r=i[0]*s[1]-i[1]*s[0],h=i[0]*s[2]-i[2]*s[0],n=i[0]*s[3]-i[3]*s[0],a=i[1]*s[2]-i[2]*s[1],o=i[1]*s[3]-i[3]*s[1],i=i[2]*s[3]-i[3]*s[2],s=e[0],l=e[1],u=e[2],e=e[3];return t[0]=l*i-u*o+e*a,t[1]=-s*i+u*n-e*h,t[2]=s*o-l*n+e*r,t[3]=-s*a+l*h-u*r,t},lerp$32=function(t,e,i,s){var r=e[0],h=e[1],n=e[2],e=e[3];return t[0]=r+s*(i[0]-r),t[1]=h+s*(i[1]-h),t[2]=n+s*(i[2]-n),t[3]=e+s*(i[3]-e),t},random$22=function(t,e){var i,s,r,h,n,a;for(e=e||1;1<=(n=(i=2*RANDOM()-1)*i+(s=2*RANDOM()-1)*s););for(;1<=(a=(r=2*RANDOM()-1)*r+(h=2*RANDOM()-1)*h););var o=Math.sqrt((1-n)/a);return t[0]=e*i,t[1]=e*s,t[2]=e*r*o,t[3]=e*h*o,t},transformMat4$12=function(t,e,i){var s=e[0],r=e[1],h=e[2],e=e[3];return t[0]=i[0]*s+i[4]*r+i[8]*h+i[12]*e,t[1]=i[1]*s+i[5]*r+i[9]*h+i[13]*e,t[2]=i[2]*s+i[6]*r+i[10]*h+i[14]*e,t[3]=i[3]*s+i[7]*r+i[11]*h+i[15]*e,t},transformQuat2=function(t,e,i){var s=e[0],r=e[1],h=e[2],n=i[0],a=i[1],o=i[2],i=i[3],l=i*s+a*h-o*r,u=i*r+o*s-n*h,c=i*h+n*r-a*s,s=-n*s-a*r-o*h;return t[0]=l*i+s*-n+u*-o-c*-a,t[1]=u*i+s*-a+c*-n-l*-o,t[2]=c*i+s*-o+l*-a-u*-n,t[3]=e[3],t},zero$12=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},str$32=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},exactEquals$32=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},equals$32=function(t,e){var i=t[0],s=t[1],r=t[2],t=t[3],h=e[0],n=e[1],a=e[2],e=e[3];return Math.abs(i-h)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(s-n)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(n))&&Math.abs(r-a)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},create$22=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},identity$12=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},setAxisAngle2=function(t,e,i){i*=.5;var s=Math.sin(i);return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=Math.cos(i),t},getAxisAngle2=function(t,e){var i=2*Math.acos(e[3]),s=Math.sin(i/2);return EPSILON<s?(t[0]=e[0]/s,t[1]=e[1]/s,t[2]=e[2]/s):(t[0]=1,t[1]=0,t[2]=0),i},getAngle2=function(t,e){t=dot$2(t,e);return Math.acos(2*t*t-1)},multiply$22=function(t,e,i){var s=e[0],r=e[1],h=e[2],e=e[3],n=i[0],a=i[1],o=i[2],i=i[3];return t[0]=s*i+e*n+r*o-h*a,t[1]=r*i+e*a+h*n-s*o,t[2]=h*i+e*o+s*a-r*n,t[3]=e*i-s*n-r*a-h*o,t},rotateX$12=function(t,e,i){i*=.5;var s=e[0],r=e[1],h=e[2],e=e[3],n=Math.sin(i),i=Math.cos(i);return t[0]=s*i+e*n,t[1]=r*i+h*n,t[2]=h*i-r*n,t[3]=e*i-s*n,t},rotateY$12=function(t,e,i){i*=.5;var s=e[0],r=e[1],h=e[2],e=e[3],n=Math.sin(i),i=Math.cos(i);return t[0]=s*i-h*n,t[1]=r*i+e*n,t[2]=h*i+s*n,t[3]=e*i-r*n,t},rotateZ$12=function(t,e,i){i*=.5;var s=e[0],r=e[1],h=e[2],e=e[3],n=Math.sin(i),i=Math.cos(i);return t[0]=s*i+r*n,t[1]=r*i-s*n,t[2]=h*i+e*n,t[3]=e*i-h*n,t},calculateW2=function(t,e){var i=e[0],s=e[1],e=e[2];return t[0]=i,t[1]=s,t[2]=e,t[3]=Math.sqrt(Math.abs(1-i*i-s*s-e*e)),t},exp2=function(t,e){var i=e[0],s=e[1],r=e[2],e=e[3],h=Math.sqrt(i*i+s*s+r*r),e=Math.exp(e),n=0<h?e*Math.sin(h)/h:0;return t[0]=i*n,t[1]=s*n,t[2]=r*n,t[3]=e*Math.cos(h),t},ln2=function(t,e){var i=e[0],s=e[1],r=e[2],e=e[3],h=Math.sqrt(i*i+s*s+r*r),h=0<h?Math.atan2(h,e)/h:0;return t[0]=i*h,t[1]=s*h,t[2]=r*h,t[3]=.5*Math.log(i*i+s*s+r*r+e*e),t},pow2=function(t,e,i){return ln2(t,e),scale$2(t,t,i),exp2(t,t),t},slerp2=function(t,e,i,s){var r,h,n=e[0],a=e[1],o=e[2],e=e[3],l=i[0],u=i[1],c=i[2],i=i[3],f=n*l+a*u+o*c+e*i;return f<0&&(f=-f,l=-l,u=-u,c=-c,i=-i),f=EPSILON<1-f?(f=Math.acos(f),r=Math.sin(f),h=Math.sin((1-s)*f)/r,Math.sin(s*f)/r):(h=1-s,s),t[0]=h*n+f*l,t[1]=h*a+f*u,t[2]=h*o+f*c,t[3]=h*e+f*i,t},random$12=function(t){var e=RANDOM(),i=RANDOM(),s=RANDOM(),r=Math.sqrt(1-e),e=Math.sqrt(e);return t[0]=r*Math.sin(2*Math.PI*i),t[1]=r*Math.cos(2*Math.PI*i),t[2]=e*Math.sin(2*Math.PI*s),t[3]=e*Math.cos(2*Math.PI*s),t},invert$12=function(t,e){var i=e[0],s=e[1],r=e[2],e=e[3],h=i*i+s*s+r*r+e*e,h=h?1/h:0;return t[0]=-i*h,t[1]=-s*h,t[2]=-r*h,t[3]=e*h,t},conjugate$12=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},fromMat32=function(t,e){var i,s,r,h=e[0]+e[4]+e[8];return 0<h?(r=Math.sqrt(h+1),t[3]=.5*r,t[0]=(e[5]-e[7])*(r=.5/r),t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r):(i=((h=e[3*(h=e[4]>e[h=0]?1:h)+h]<e[8]?2:h)+1)%3,s=(h+2)%3,r=Math.sqrt(e[3*h+h]-e[3*i+i]-e[3*s+s]+1),t[h]=.5*r,t[3]=(e[3*i+s]-e[3*s+i])*(r=.5/r),t[i]=(e[3*i+h]+e[3*h+i])*r,t[s]=(e[3*s+h]+e[3*h+s])*r),t},fromEuler2=function(t,e,i,s){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:ANGLE_ORDER,h=Math.PI/360,n=(s*=h,i*=h,Math.sin(e*=h)),a=Math.cos(e),o=Math.sin(i),l=Math.cos(i),u=Math.sin(s),c=Math.cos(s);switch(r){case"xyz":t[0]=n*l*c+a*o*u,t[1]=a*o*c-n*l*u,t[2]=a*l*u+n*o*c,t[3]=a*l*c-n*o*u;break;case"xzy":t[0]=n*l*c-a*o*u,t[1]=a*o*c-n*l*u,t[2]=a*l*u+n*o*c,t[3]=a*l*c+n*o*u;break;case"yxz":t[0]=n*l*c+a*o*u,t[1]=a*o*c-n*l*u,t[2]=a*l*u-n*o*c,t[3]=a*l*c+n*o*u;break;case"yzx":t[0]=n*l*c+a*o*u,t[1]=a*o*c+n*l*u,t[2]=a*l*u-n*o*c,t[3]=a*l*c-n*o*u;break;case"zxy":t[0]=n*l*c-a*o*u,t[1]=a*o*c+n*l*u,t[2]=a*l*u+n*o*c,t[3]=a*l*c-n*o*u;break;case"zyx":t[0]=n*l*c-a*o*u,t[1]=a*o*c+n*l*u,t[2]=a*l*u-n*o*c,t[3]=a*l*c+n*o*u;break;default:throw new Error("Unknown angle order "+r)}return t},str$22=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},equals$22=function(t,e){return Math.abs(dot$32(t,e))>=1-EPSILON},create$12=function(){var t=new ARRAY_TYPE(8);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},clone$12=function(t){var e=new ARRAY_TYPE(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e},fromValues$12=function(t,e,i,s,r,h,n,a){var o=new ARRAY_TYPE(8);return o[0]=t,o[1]=e,o[2]=i,o[3]=s,o[4]=r,o[5]=h,o[6]=n,o[7]=a,o},fromRotationTranslationValues2=function(t,e,i,s,r,h,n){var a=new ARRAY_TYPE(8),r=(a[0]=t,a[1]=e,a[2]=i,a[3]=s,.5*r),h=.5*h,n=.5*n;return a[4]=r*s+h*i-n*e,a[5]=h*s+n*t-r*i,a[6]=n*s+r*e-h*t,a[7]=-r*t-h*e-n*i,a},fromRotationTranslation2=function(t,e,i){var s=.5*i[0],r=.5*i[1],i=.5*i[2],h=e[0],n=e[1],a=e[2],e=e[3];return t[0]=h,t[1]=n,t[2]=a,t[3]=e,t[4]=s*e+r*a-i*n,t[5]=r*e+i*h-s*a,t[6]=i*e+s*n-r*h,t[7]=-s*h-r*n-i*a,t},fromTranslation2=function(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t},fromRotation2=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},fromMat42=function(t,e){var i=create$22(),s=(getRotation2(i,e),new ARRAY_TYPE(3));return getTranslation$12(s,e),fromRotationTranslation2(t,i,s),t},copy$12=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t},identity2=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},set$12=function(t,e,i,s,r,h,n,a,o){return t[0]=e,t[1]=i,t[2]=s,t[3]=r,t[4]=h,t[5]=n,t[6]=a,t[7]=o,t},getDual2=function(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t},setDual2=function(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t},getTranslation2=function(t,e){var i=e[4],s=e[5],r=e[6],h=e[7],n=-e[0],a=-e[1],o=-e[2],e=e[3];return t[0]=2*(i*e+h*n+s*o-r*a),t[1]=2*(s*e+h*a+r*n-i*o),t[2]=2*(r*e+h*o+i*a-s*n),t},translate2=function(t,e,i){var s=e[0],r=e[1],h=e[2],n=e[3],a=.5*i[0],o=.5*i[1],i=.5*i[2],l=e[4],u=e[5],c=e[6],e=e[7];return t[0]=s,t[1]=r,t[2]=h,t[3]=n,t[4]=n*a+r*i-h*o+l,t[5]=n*o+h*a-s*i+u,t[6]=n*i+s*o-r*a+c,t[7]=-s*a-r*o-h*i+e,t},rotateX2=function(t,e,i){var s=-e[0],r=-e[1],h=-e[2],n=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=a*n+u*s+o*h-l*r,f=o*n+u*r+l*s-a*h,d=l*n+u*h+a*r-o*s,u=u*n-a*s-o*r-l*h;return rotateX$12(t,e,i),s=t[0],t[4]=c*(n=t[3])+u*s+f*(h=t[2])-d*(r=t[1]),t[5]=f*n+u*r+d*s-c*h,t[6]=d*n+u*h+c*r-f*s,t[7]=u*n-c*s-f*r-d*h,t},rotateY2=function(t,e,i){var s=-e[0],r=-e[1],h=-e[2],n=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=a*n+u*s+o*h-l*r,f=o*n+u*r+l*s-a*h,d=l*n+u*h+a*r-o*s,u=u*n-a*s-o*r-l*h;return rotateY$12(t,e,i),s=t[0],t[4]=c*(n=t[3])+u*s+f*(h=t[2])-d*(r=t[1]),t[5]=f*n+u*r+d*s-c*h,t[6]=d*n+u*h+c*r-f*s,t[7]=u*n-c*s-f*r-d*h,t},rotateZ2=function(t,e,i){var s=-e[0],r=-e[1],h=-e[2],n=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=a*n+u*s+o*h-l*r,f=o*n+u*r+l*s-a*h,d=l*n+u*h+a*r-o*s,u=u*n-a*s-o*r-l*h;return rotateZ$12(t,e,i),s=t[0],t[4]=c*(n=t[3])+u*s+f*(h=t[2])-d*(r=t[1]),t[5]=f*n+u*r+d*s-c*h,t[6]=d*n+u*h+c*r-f*s,t[7]=u*n-c*s-f*r-d*h,t},rotateByQuatAppend2=function(t,e,i){var s=i[0],r=i[1],h=i[2],i=i[3],n=e[0],a=e[1],o=e[2],l=e[3];return t[0]=n*i+l*s+a*h-o*r,t[1]=a*i+l*r+o*s-n*h,t[2]=o*i+l*h+n*r-a*s,t[3]=l*i-n*s-a*r-o*h,t[4]=(n=e[4])*i+(l=e[7])*s+(a=e[5])*h-(o=e[6])*r,t[5]=a*i+l*r+o*s-n*h,t[6]=o*i+l*h+n*r-a*s,t[7]=l*i-n*s-a*r-o*h,t},rotateByQuatPrepend2=function(t,e,i){var s=e[0],r=e[1],h=e[2],e=e[3],n=i[0],a=i[1],o=i[2],l=i[3];return t[0]=s*l+e*n+r*o-h*a,t[1]=r*l+e*a+h*n-s*o,t[2]=h*l+e*o+s*a-r*n,t[3]=e*l-s*n-r*a-h*o,t[4]=s*(l=i[7])+e*(n=i[4])+r*(o=i[6])-h*(a=i[5]),t[5]=r*l+e*a+h*n-s*o,t[6]=h*l+e*o+s*a-r*n,t[7]=e*l-s*n-r*a-h*o,t},rotateAroundAxis2=function(t,e,i,s){var r,h,n,a,o,l;return Math.abs(s)<EPSILON?copy$12(t,e):(l=Math.hypot(i[0],i[1],i[2]),s*=.5,r=(n=Math.sin(s))*i[0]/l,h=n*i[1]/l,n=n*i[2]/l,i=Math.cos(s),l=e[0],t[0]=l*i+(s=e[3])*r+(a=e[1])*n-(o=e[2])*h,t[1]=a*i+s*h+o*r-l*n,t[2]=o*i+s*n+l*h-a*r,t[3]=s*i-l*r-a*h-o*n,t[4]=(s=e[4])*i+(l=e[7])*r+(a=e[5])*n-(o=e[6])*h,t[5]=a*i+l*h+o*r-s*n,t[6]=o*i+l*n+s*h-a*r,t[7]=l*i-s*r-a*h-o*n,t)},add$12=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t},multiply$12=function(t,e,i){var s=e[0],r=e[1],h=e[2],n=e[3],a=i[4],o=i[5],l=i[6],u=i[7],c=e[4],f=e[5],d=e[6],e=e[7],C=i[0],p=i[1],m=i[2],i=i[3];return t[0]=s*i+n*C+r*m-h*p,t[1]=r*i+n*p+h*C-s*m,t[2]=h*i+n*m+s*p-r*C,t[3]=n*i-s*C-r*p-h*m,t[4]=s*u+n*a+r*l-h*o+c*i+e*C+f*m-d*p,t[5]=r*u+n*o+h*a-s*l+f*i+e*p+d*C-c*m,t[6]=h*u+n*l+s*o-r*a+d*i+e*m+c*p-f*C,t[7]=n*u-s*a-r*o-h*l+e*i-c*C-f*p-d*m,t},scale$12=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t},lerp$12=function(t,e,i,s){var r=1-s;return dot$1(e,i)<0&&(s=-s),t[0]=e[0]*r+i[0]*s,t[1]=e[1]*r+i[1]*s,t[2]=e[2]*r+i[2]*s,t[3]=e[3]*r+i[3]*s,t[4]=e[4]*r+i[4]*s,t[5]=e[5]*r+i[5]*s,t[6]=e[6]*r+i[6]*s,t[7]=e[7]*r+i[7]*s,t},invert2=function(t,e){var i=squaredLength$1(e);return t[0]=-e[0]/i,t[1]=-e[1]/i,t[2]=-e[2]/i,t[3]=e[3]/i,t[4]=-e[4]/i,t[5]=-e[5]/i,t[6]=-e[6]/i,t[7]=e[7]/i,t},conjugate2=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t},normalize$12=function(t,e){var i,s,r,h,n,a,o,l,u=squaredLength$1(e);return 0<u&&(u=Math.sqrt(u),l=(i=e[0]/u)*(n=e[4])+(s=e[1]/u)*(a=e[5])+(r=e[2]/u)*(o=e[6])+(h=e[3]/u)*(e=e[7]),t[0]=i,t[1]=s,t[2]=r,t[3]=h,t[4]=(n-i*l)/u,t[5]=(a-s*l)/u,t[6]=(o-r*l)/u,t[7]=(e-h*l)/u),t},str$12=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},exactEquals$12=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]},equals$12=function(t,e){var i=t[0],s=t[1],r=t[2],h=t[3],n=t[4],a=t[5],o=t[6],t=t[7],l=e[0],u=e[1],c=e[2],f=e[3],d=e[4],C=e[5],p=e[6],e=e[7];return Math.abs(i-l)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-u)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(u))&&Math.abs(r-c)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(h-f)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(n-d)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(a-C)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(C))&&Math.abs(o-p)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},create2=function(){var t=new ARRAY_TYPE(2);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t},clone2=function(t){var e=new ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},fromValues2=function(t,e){var i=new ARRAY_TYPE(2);return i[0]=t,i[1]=e,i},copy2=function(t,e){return t[0]=e[0],t[1]=e[1],t},set2=function(t,e,i){return t[0]=e,t[1]=i,t},add2=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t},subtract2=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t},multiply2=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t},divide2=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t},ceil2=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},floor2=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},min2=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t},max2=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t},round2=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},scale2=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t},scaleAndAdd2=function(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t},distance2=function(t,e){var i=e[0]-t[0];return Math.hypot(i,e[1]-t[1])},squaredDistance2=function(t,e){var i=e[0]-t[0],e=e[1]-t[1];return i*i+e*e},length2=function(t){var e=t[0];return Math.hypot(e,t[1])},squaredLength2=function(t){var e=t[0],t=t[1];return e*e+t*t},negate2=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},inverse2=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},normalize2=function(t,e){var i=e[0],s=e[1],i=i*i+s*s;return 0<i&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t},dot2=function(t,e){return t[0]*e[0]+t[1]*e[1]},cross2=function(t,e,i){e=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=e,t},lerp2=function(t,e,i,s){var r=e[0],e=e[1];return t[0]=r+s*(i[0]-r),t[1]=e+s*(i[1]-e),t},random2=function(t,e){e=e||1;var i=2*RANDOM()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t},transformMat22=function(t,e,i){var s=e[0],e=e[1];return t[0]=i[0]*s+i[2]*e,t[1]=i[1]*s+i[3]*e,t},transformMat2d2=function(t,e,i){var s=e[0],e=e[1];return t[0]=i[0]*s+i[2]*e+i[4],t[1]=i[1]*s+i[3]*e+i[5],t},transformMat32=function(t,e,i){var s=e[0],e=e[1];return t[0]=i[0]*s+i[3]*e+i[6],t[1]=i[1]*s+i[4]*e+i[7],t},transformMat42=function(t,e,i){var s=e[0],e=e[1];return t[0]=i[0]*s+i[4]*e+i[12],t[1]=i[1]*s+i[5]*e+i[13],t},rotate2=function(t,e,i,s){var r=e[0]-i[0],e=e[1]-i[1],h=Math.sin(s),s=Math.cos(s);return t[0]=r*s-e*h+i[0],t[1]=r*h+e*s+i[1],t},angle2=function(t,e){var i=t[0],t=t[1],s=e[0],e=e[1],r=Math.sqrt((i*i+t*t)*(s*s+e*e));return Math.acos(Math.min(Math.max(r&&(i*s+t*e)/r,-1),1))},zero2=function(t){return t[0]=0,t[1]=0,t},str2=function(t){return"vec2("+t[0]+", "+t[1]+")"},exactEquals2=function(t,e){return t[0]===e[0]&&t[1]===e[1]},equals2=function(t,e){var i=t[0],t=t[1],s=e[0],e=e[1];return Math.abs(i-s)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))};setMatrixArrayType=setMatrixArrayType2,toRadian=toRadian2,equals$9=equals$92,create$8=create$82,clone$8=clone$82,copy$8=copy$82,identity$5=identity$52,fromValues$8=fromValues$82,set$8=set$82,transpose$2=transpose$22,invert$5=invert$52,adjoint$2=adjoint$22,determinant$3=determinant$32,multiply$8=multiply$82,rotate$4=rotate$42,scale$8=scale$82,fromRotation$4=fromRotation$42,fromScaling$3=fromScaling$32,str$8=str$82,frob$3=frob$32,LDU=LDU2,add$8=add$82,subtract$6=subtract$62,exactEquals$8=exactEquals$82,equals$8=equals$82,multiplyScalar$3=multiplyScalar$32,multiplyScalarAndAdd$3=multiplyScalarAndAdd$32,create$7=create$72,clone$7=clone$72,copy$7=copy$72,identity$4=identity$42,fromValues$7=fromValues$72,set$7=set$72,invert$4=invert$42,determinant$2=determinant$22,multiply$7=multiply$72,rotate$3=rotate$32,scale$7=scale$72,translate$3=translate$32,fromRotation$3=fromRotation$32,fromScaling$2=fromScaling$22,fromTranslation$3=fromTranslation$32,str$7=str$72,frob$2=frob$22,add$7=add$72,subtract$5=subtract$52,multiplyScalar$2=multiplyScalar$22,multiplyScalarAndAdd$2=multiplyScalarAndAdd$22,exactEquals$7=exactEquals$72,equals$7=equals$72,create$6=create$62,fromMat4$1=fromMat4$12,clone$6=clone$62,copy$6=copy$62,fromValues$6=fromValues$62,set$6=set$62,identity$3=identity$32,transpose$1=transpose$12,invert$3=invert$32,adjoint$1=adjoint$12,determinant$1=determinant$12,multiply$6=multiply$62,translate$2=translate$22,rotate$2=rotate$22,scale$6=scale$62,fromTranslation$2=fromTranslation$22,fromRotation$2=fromRotation$22,fromScaling$1=fromScaling$12,fromMat2d=fromMat2d2,fromQuat$1=fromQuat$12,normalFromMat4=normalFromMat42,projection=projection2,str$6=str$62,frob$1=frob$12,add$6=add$62,subtract$4=subtract$42,multiplyScalar$1=multiplyScalar$12,multiplyScalarAndAdd$1=multiplyScalarAndAdd$12,exactEquals$6=exactEquals$62,equals$6=equals$62,create$5=create$52,clone$5=clone$52,copy$5=copy$52,fromValues$5=fromValues$52,set$5=set$52,identity$2=identity$22,transpose=transpose2,invert$2=invert$22,adjoint=adjoint2,determinant=determinant2,multiply$5=multiply$52,translate$1=translate$12,scale$5=scale$52,rotate$1=rotate$12,rotateX$3=rotateX$32,rotateY$3=rotateY$32,rotateZ$3=rotateZ$32,fromTranslation$1=fromTranslation$12,fromScaling=fromScaling2,fromRotation$1=fromRotation$12,fromXRotation=fromXRotation2,fromYRotation=fromYRotation2,fromZRotation=fromZRotation2,fromRotationTranslation$1=fromRotationTranslation$12,fromQuat2=fromQuat22,getTranslation$1=getTranslation$12,getScaling=getScaling2,getRotation=getRotation2,decompose=decompose2,fromRotationTranslationScale=fromRotationTranslationScale2,fromRotationTranslationScaleOrigin=fromRotationTranslationScaleOrigin2,fromQuat=fromQuat3,frustum=frustum2,perspectiveNO=perspectiveNO2,perspectiveZO=perspectiveZO2,perspectiveFromFieldOfView=perspectiveFromFieldOfView2,orthoNO=orthoNO2,orthoZO=orthoZO2,lookAt=lookAt2,targetTo=targetTo2,str$5=str$52,frob=frob2,add$5=add$52,subtract$3=subtract$32,multiplyScalar=multiplyScalar2,multiplyScalarAndAdd=multiplyScalarAndAdd2,exactEquals$5=exactEquals$52,equals$5=equals$52,create$4=create$42,clone$4=clone$42,length$4=length$42,fromValues$4=fromValues$42,copy$4=copy$42,set$4=set$42,add$4=add$42,subtract$2=subtract$22,multiply$4=multiply$42,divide$2=divide$22,ceil$2=ceil$22,floor$2=floor$22,min$2=min$22,max$2=max$22,round$2=round$22,scale$4=scale$42,scaleAndAdd$2=scaleAndAdd$22,distance$2=distance$22,squaredDistance$2=squaredDistance$22,squaredLength$4=squaredLength$42,negate$2=negate$22,inverse$2=inverse$22,normalize$4=normalize$42,dot$4=dot$42,cross$2=cross$22,lerp$4=lerp$42,slerp$1=slerp$12,hermite=hermite2,bezier=bezier2,random$3=random$32,transformMat4$2=transformMat4$22,transformMat3$1=transformMat3$12,transformQuat$1=transformQuat$12,rotateX$2=rotateX$22,rotateY$2=rotateY$22,rotateZ$2=rotateZ$22,angle$1=angle$12,zero$2=zero$22,str$4=str$42,exactEquals$4=exactEquals$42,equals$4=equals$42,create$3=create$32,clone$3=clone$32,fromValues$3=fromValues$32,copy$3=copy$32,set$3=set$32,add$3=add$32,subtract$1=subtract$12,multiply$3=multiply$32,divide$1=divide$12,ceil$1=ceil$12,floor$1=floor$12,min$1=min$12,max$1=max$12,round$1=round$12,scale$3=scale$32,scaleAndAdd$1=scaleAndAdd$12,distance$1=distance$12,squaredDistance$1=squaredDistance$12,length$3=length$32,squaredLength$3=squaredLength$32,negate$1=negate$12,inverse$1=inverse$12,normalize$3=normalize$32,dot$3=dot$32,cross$1=cross$12,lerp$3=lerp$32,random$2=random$22,transformMat4$1=transformMat4$12,transformQuat=transformQuat2,zero$1=zero$12,str$3=str$32,exactEquals$3=exactEquals$32,equals$3=equals$32,create$2=create$22,identity$1=identity$12,setAxisAngle=setAxisAngle2,getAxisAngle=getAxisAngle2,getAngle=getAngle2,multiply$2=multiply$22,rotateX$1=rotateX$12,rotateY$1=rotateY$12,rotateZ$1=rotateZ$12,calculateW=calculateW2,exp=exp2,ln=ln2,pow=pow2,slerp=slerp2,random$1=random$12,invert$1=invert$12,conjugate$1=conjugate$12,fromMat3=fromMat32,fromEuler=fromEuler2,str$2=str$22,equals$2=equals$22,create$1=create$12,clone$1=clone$12,fromValues$1=fromValues$12,fromRotationTranslationValues=fromRotationTranslationValues2,fromRotationTranslation=fromRotationTranslation2,fromTranslation=fromTranslation2,fromRotation=fromRotation2,fromMat4=fromMat42,copy$1=copy$12,identity=identity2,set$1=set$12,getDual=getDual2,setDual=setDual2,getTranslation=getTranslation2,translate=translate2,rotateX=rotateX2,rotateY=rotateY2,rotateZ=rotateZ2,rotateByQuatAppend=rotateByQuatAppend2,rotateByQuatPrepend=rotateByQuatPrepend2,rotateAroundAxis=rotateAroundAxis2,add$1=add$12,multiply$1=multiply$12,scale$1=scale$12,lerp$1=lerp$12,invert=invert2,conjugate=conjugate2,normalize$1=normalize$12,str$1=str$12,exactEquals$1=exactEquals$12,equals$1=equals$12,create=create2,clone=clone2,fromValues=fromValues2,copy=copy2,set=set2,add=add2,subtract=subtract2,multiply=multiply2,divide=divide2,ceil=ceil2,floor=floor2,min=min2,max=max2,round=round2,scale=scale2,scaleAndAdd=scaleAndAdd2,distance=distance2,squaredDistance=squaredDistance2,length=length2,squaredLength=squaredLength2,negate=negate2,inverse=inverse2,normalize=normalize2,dot=dot2,cross=cross2,lerp=lerp2,random=random2,transformMat2=transformMat22,transformMat2d=transformMat2d2,transformMat3=transformMat32,transformMat4=transformMat42,rotate=rotate2,angle=angle2,zero=zero2,str=str2,exactEquals=exactEquals2,equals=equals2,EPSILON=1e-6,ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,RANDOM=Math.random,ANGLE_ORDER="zyx",degree=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)}),common={__proto__:null,EPSILON:EPSILON,get C(){return ARRAY_TYPE},m:RANDOM,S:ANGLE_ORDER,g:setMatrixArrayType2,T:toRadian2,equals:equals$92},mul$8=multiply$82,sub$6=subtract$62,mat2=Object.freeze({__proto__:null,create:create$82,clone:clone$82,_:copy$82,identity:identity$52,A:fromValues$82,set:set$82,I:transpose$22,R:invert$52,M:adjoint$22,O:determinant$32,multiply:multiply$82,rotate:rotate$42,scale:scale$82,G:fromRotation$42,P:fromScaling$32,L:str$82,N:frob$32,D:LDU2,add:add$82,F:subtract$62,B:exactEquals$82,equals:equals$82,$:multiplyScalar$32,W:multiplyScalarAndAdd$32,mul:mul$8,sub:sub$6}),mul$7=multiply$72,sub$5=subtract$52,mat2d=Object.freeze({__proto__:null,create:create$72,clone:clone$72,_:copy$72,identity:identity$42,A:fromValues$72,set:set$72,R:invert$42,O:determinant$22,multiply:multiply$72,rotate:rotate$32,scale:scale$72,translate:translate$32,G:fromRotation$32,P:fromScaling$22,V:fromTranslation$32,L:str$72,N:frob$22,add:add$72,F:subtract$52,$:multiplyScalar$22,W:multiplyScalarAndAdd$22,B:exactEquals$72,equals:equals$72,mul:mul$7,sub:sub$5}),mul$6=multiply$62,sub$4=subtract$42,mat3=Object.freeze({__proto__:null,create:create$62,H:fromMat4$12,clone:clone$62,_:copy$62,A:fromValues$62,set:set$62,identity:identity$32,I:transpose$12,R:invert$32,M:adjoint$12,O:determinant$12,multiply:multiply$62,translate:translate$22,rotate:rotate$22,scale:scale$62,V:fromTranslation$22,G:fromRotation$22,P:fromScaling$12,U:fromMat2d2,j:fromQuat$12,X:normalFromMat42,Y:projection2,L:str$62,N:frob$12,add:add$62,F:subtract$42,$:multiplyScalar$12,W:multiplyScalarAndAdd$12,B:exactEquals$62,equals:equals$62,mul:mul$6,sub:sub$4}),perspective=perspectiveNO2,ortho=orthoNO2,mul$5=multiply$52,sub$3=subtract$32,mat4=Object.freeze({__proto__:null,create:create$52,clone:clone$52,_:copy$52,A:fromValues$52,set:set$52,identity:identity$22,I:transpose2,R:invert$22,M:adjoint2,O:determinant2,multiply:multiply$52,translate:translate$12,scale:scale$52,rotate:rotate$12,J:rotateX$32,K:rotateY$32,Z:rotateZ$32,V:fromTranslation$12,P:fromScaling2,G:fromRotation$12,tt:fromXRotation2,et:fromYRotation2,it:fromZRotation2,ht:fromRotationTranslation$12,nt:fromQuat22,ot:getTranslation$12,lt:getScaling2,ut:getRotation2,ct:decompose2,Ct:fromRotationTranslationScale2,vt:fromRotationTranslationScaleOrigin2,j:fromQuat3,St:frustum2,gt:perspectiveNO2,perspective:perspective,Tt:perspectiveZO2,_t:perspectiveFromFieldOfView2,Et:orthoNO2,ortho:ortho,At:orthoZO2,It:lookAt2,Rt:targetTo2,L:str$52,N:frob2,add:add$52,F:subtract$32,$:multiplyScalar2,W:multiplyScalarAndAdd2,B:exactEquals$52,equals:equals$52,mul:mul$5,sub:sub$3}),sub$2=subtract$22,mul$4=multiply$42,div$2=divide$22,dist$2=distance$22,sqrDist$2=squaredDistance$22,len$4=length$42,sqrLen$4=squaredLength$42,forEach$2=(()=>{var o=create$42();return function(t,e,i,s,r,h){var n,a;for(e=e||3,i=i||0,a=s?Math.min(s*e+i,t.length):t.length,n=i;n<a;n+=e)o[0]=t[n],o[1]=t[n+1],o[2]=t[n+2],r(o,o,h),t[n]=o[0],t[n+1]=o[1],t[n+2]=o[2];return t}})(),vec3=Object.freeze({__proto__:null,create:create$42,clone:clone$42,length:length$42,A:fromValues$42,_:copy$42,set:set$42,add:add$42,F:subtract$22,multiply:multiply$42,Mt:divide$22,ceil:ceil$22,floor:floor$22,min:min$22,max:max$22,round:round$22,scale:scale$42,bt:scaleAndAdd$22,Ot:distance$22,Gt:squaredDistance$22,Pt:squaredLength$42,Lt:negate$22,inverse:inverse$22,normalize:normalize$42,xt:dot$42,Nt:cross$22,Dt:lerp$42,Ft:slerp$12,Bt:hermite2,$t:bezier2,random:random$32,kt:transformMat4$22,Wt:transformMat3$12,Vt:transformQuat$12,J:rotateX$22,K:rotateY$22,Z:rotateZ$22,angle:angle$12,Ht:zero$22,L:str$42,B:exactEquals$42,equals:equals$42,sub:sub$2,mul:mul$4,div:div$2,Ut:dist$2,jt:sqrDist$2,Xt:len$4,Yt:sqrLen$4,forEach:forEach$2}),sub$1=subtract$12,mul$3=multiply$32,div$1=divide$12,dist$1=distance$12,sqrDist$1=squaredDistance$12,len$3=length$32,sqrLen$3=squaredLength$32,forEach$1=(()=>{var o=create$32();return function(t,e,i,s,r,h){var n,a;for(e=e||4,i=i||0,a=s?Math.min(s*e+i,t.length):t.length,n=i;n<a;n+=e)o[0]=t[n],o[1]=t[n+1],o[2]=t[n+2],o[3]=t[n+3],r(o,o,h),t[n]=o[0],t[n+1]=o[1],t[n+2]=o[2],t[n+3]=o[3];return t}})(),vec4=Object.freeze({__proto__:null,create:create$32,clone:clone$32,A:fromValues$32,_:copy$32,set:set$32,add:add$32,F:subtract$12,multiply:multiply$32,Mt:divide$12,ceil:ceil$12,floor:floor$12,min:min$12,max:max$12,round:round$12,scale:scale$32,bt:scaleAndAdd$12,Ot:distance$12,Gt:squaredDistance$12,length:length$32,Pt:squaredLength$32,Lt:negate$12,inverse:inverse$12,normalize:normalize$32,xt:dot$32,Nt:cross$12,Dt:lerp$32,random:random$22,kt:transformMat4$12,Vt:transformQuat2,Ht:zero$12,L:str$32,B:exactEquals$32,equals:equals$32,sub:sub$1,mul:mul$3,div:div$1,Ut:dist$1,jt:sqrDist$1,Xt:len$3,Yt:sqrLen$3,forEach:forEach$1}),clone$2=clone$32,fromValues$2=fromValues$32,copy$2=copy$32,set$2=set$32,add$2=add$32,mul$2=multiply$22,scale$2=scale$32,dot$2=dot$32,lerp$2=lerp$32,length$2=length$32,len$2=length$2,squaredLength$2=squaredLength$32,sqrLen$2=squaredLength$2,normalize$2=normalize$32,exactEquals$2=exactEquals$32,rotationTo=(()=>{var r=create$42(),h=fromValues$42(1,0,0),n=fromValues$42(0,1,0);return function(t,e,i){var s=dot$42(e,i);return s<-.999999?(cross$22(r,h,e),len$4(r)<1e-6&&cross$22(r,n,e),normalize$42(r,r),setAxisAngle2(t,r,Math.PI),t):.999999<s?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(cross$22(r,e,i),t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=1+s,normalize$2(t,t))}})(),sqlerp=(()=>{var n=create$22(),a=create$22();return function(t,e,i,s,r,h){return slerp2(n,e,r,h),slerp2(a,i,s,h),slerp2(t,n,a,2*h*(1-h)),t}})(),setAxes=(()=>{var r=create$62();return function(t,e,i,s){return r[0]=i[0],r[3]=i[1],r[6]=i[2],r[1]=s[0],r[4]=s[1],r[7]=s[2],r[2]=-e[0],r[5]=-e[1],r[8]=-e[2],normalize$2(t,fromMat32(t,r))}})(),quat=Object.freeze({__proto__:null,create:create$22,identity:identity$12,qt:setAxisAngle2,zt:getAxisAngle2,Jt:getAngle2,multiply:multiply$22,J:rotateX$12,K:rotateY$12,Z:rotateZ$12,Kt:calculateW2,exp:exp2,Zt:ln2,pow:pow2,Ft:slerp2,random:random$12,R:invert$12,Qt:conjugate$12,te:fromMat32,ie:fromEuler2,L:str$22,clone:clone$2,A:fromValues$2,_:copy$2,set:set$2,add:add$2,mul:mul$2,scale:scale$2,xt:dot$2,Dt:lerp$2,length:length$2,Xt:len$2,Pt:squaredLength$2,Yt:sqrLen$2,normalize:normalize$2,B:exactEquals$2,equals:equals$22,re:rotationTo,he:sqlerp,ne:setAxes}),getReal=copy$2,setReal=copy$2,mul$1=multiply$12,dot$1=dot$2,length$1=length$2,len$1=length$1,squaredLength$1=squaredLength$2,sqrLen$1=squaredLength$1,quat2=Object.freeze({__proto__:null,create:create$12,clone:clone$12,A:fromValues$12,ae:fromRotationTranslationValues2,ht:fromRotationTranslation2,V:fromTranslation2,G:fromRotation2,H:fromMat42,_:copy$12,identity:identity2,set:set$12,oe:getReal,le:getDual2,ue:setReal,fe:setDual2,ot:getTranslation2,translate:translate2,J:rotateX2,K:rotateY2,Z:rotateZ2,de:rotateByQuatAppend2,Ce:rotateByQuatPrepend2,pe:rotateAroundAxis2,add:add$12,multiply:multiply$12,mul:mul$1,scale:scale$12,xt:dot$1,Dt:lerp$12,R:invert2,Qt:conjugate2,length:length$1,Xt:len$1,Pt:squaredLength$1,Yt:sqrLen$1,normalize:normalize$12,L:str$12,B:exactEquals$12,equals:equals$12}),len=length2,sub=subtract2,mul=multiply2,div=divide2,dist=distance2,sqrDist=squaredDistance2,sqrLen=squaredLength2,forEach=(()=>{var o=create2();return function(t,e,i,s,r,h){var n,a;for(e=e||2,i=i||0,a=s?Math.min(s*e+i,t.length):t.length,n=i;n<a;n+=e)o[0]=t[n],o[1]=t[n+1],r(o,o,h),t[n]=o[0],t[n+1]=o[1];return t}})(),vec2=Object.freeze({__proto__:null,create:create2,clone:clone2,A:fromValues2,_:copy2,set:set2,add:add2,F:subtract2,multiply:multiply2,Mt:divide2,ceil:ceil2,floor:floor2,min:min2,max:max2,round:round2,scale:scale2,bt:scaleAndAdd2,Ot:distance2,Gt:squaredDistance2,length:length2,Pt:squaredLength2,Lt:negate2,inverse:inverse2,normalize:normalize2,xt:dot2,Nt:cross2,Dt:lerp2,random:random2,me:transformMat22,ve:transformMat2d2,Wt:transformMat32,kt:transformMat42,rotate:rotate2,angle:angle2,Ht:zero2,L:str2,B:exactEquals2,equals:equals2,Xt:len,sub:sub,mul:mul,div:div,Ut:dist,jt:sqrDist,Yt:sqrLen,forEach:forEach}),globalThis.Se=common,globalThis.Se.ge=mat2,globalThis.Se.Te=mat2d,globalThis.Se._e=mat3,globalThis.Se.Ee=mat4,globalThis.Se.ye=quat,globalThis.Se.Ae=quat2,globalThis.Se.Ie=vec2,globalThis.Se.Re=vec3,globalThis.Se.Me=vec4}var EPSILON,ARRAY_TYPE,RANDOM,ANGLE_ORDER,degree,common,mul$8,sub$6,mat2,mul$7,sub$5,mat2d,mul$6,sub$4,mat3,perspective,ortho,mul$5,sub$3,mat4,sub$2,mul$4,div$2,dist$2,sqrDist$2,len$4,sqrLen$4,forEach$2,vec3,sub$1,mul$3,div$1,dist$1,sqrDist$1,len$3,sqrLen$3,forEach$1,vec4,clone$2,fromValues$2,copy$2,set$2,add$2,mul$2,scale$2,dot$2,lerp$2,length$2,len$2,squaredLength$2,sqrLen$2,normalize$2,exactEquals$2,rotationTo,sqlerp,setAxes,quat,getReal,setReal,mul$1,dot$1,length$1,len$1,squaredLength$1,sqrLen$1,quat2,len,sub,mul,div,dist,sqrDist,sqrLen,forEach,vec2,setMatrixArrayType,toRadian,equals$9,create$8,clone$8,copy$8,identity$5,fromValues$8,set$8,transpose$2,invert$5,adjoint$2,determinant$3,multiply$8,rotate$4,scale$8,fromRotation$4,fromScaling$3,str$8,frob$3,LDU,add$8,subtract$6,exactEquals$8,equals$8,multiplyScalar$3,multiplyScalarAndAdd$3,create$7,clone$7,copy$7,identity$4,fromValues$7,set$7,invert$4,determinant$2,multiply$7,rotate$3,scale$7,translate$3,fromRotation$3,fromScaling$2,fromTranslation$3,str$7,frob$2,add$7,subtract$5,multiplyScalar$2,multiplyScalarAndAdd$2,exactEquals$7,equals$7,create$6,fromMat4$1,clone$6,copy$6,fromValues$6,set$6,identity$3,transpose$1,invert$3,adjoint$1,determinant$1,multiply$6,translate$2,rotate$2,scale$6,fromTranslation$2,fromRotation$2,fromScaling$1,fromMat2d,fromQuat$1,normalFromMat4,projection,str$6,frob$1,add$6,subtract$4,multiplyScalar$1,multiplyScalarAndAdd$1,exactEquals$6,equals$6,create$5,clone$5,copy$5,fromValues$5,set$5,identity$2,transpose,invert$2,adjoint,determinant,multiply$5,translate$1,scale$5,rotate$1,rotateX$3,rotateY$3,rotateZ$3,fromTranslation$1,fromScaling,fromRotation$1,fromXRotation,fromYRotation,fromZRotation,fromRotationTranslation$1,fromQuat2,getTranslation$1,getScaling,getRotation,decompose,fromRotationTranslationScale,fromRotationTranslationScaleOrigin,fromQuat,frustum,perspectiveNO,perspectiveZO,perspectiveFromFieldOfView,orthoNO,orthoZO,lookAt,targetTo,str$5,frob,add$5,subtract$3,multiplyScalar,multiplyScalarAndAdd,exactEquals$5,equals$5,create$4,clone$4,length$4,fromValues$4,copy$4,set$4,add$4,subtract$2,multiply$4,divide$2,ceil$2,floor$2,min$2,max$2,round$2,scale$4,scaleAndAdd$2,distance$2,squaredDistance$2,squaredLength$4,negate$2,inverse$2,normalize$4,dot$4,cross$2,lerp$4,slerp$1,hermite,bezier,random$3,transformMat4$2,transformMat3$1,transformQuat$1,rotateX$2,rotateY$2,rotateZ$2,angle$1,zero$2,str$4,exactEquals$4,equals$4,create$3,clone$3,fromValues$3,copy$3,set$3,add$3,subtract$1,multiply$3,divide$1,ceil$1,floor$1,min$1,max$1,round$1,scale$3,scaleAndAdd$1,distance$1,squaredDistance$1,length$3,squaredLength$3,negate$1,inverse$1,normalize$3,dot$3,cross$1,lerp$3,random$2,transformMat4$1,transformQuat,zero$1,str$3,exactEquals$3,equals$3,create$2,identity$1,setAxisAngle,getAxisAngle,getAngle,multiply$2,rotateX$1,rotateY$1,rotateZ$1,calculateW,exp,ln,pow,slerp,random$1,invert$1,conjugate$1,fromMat3,fromEuler,str$2,equals$2,create$1,clone$1,fromValues$1,fromRotationTranslationValues,fromRotationTranslation,fromTranslation,fromRotation,fromMat4,copy$1,identity,set$1,getDual,setDual,getTranslation,translate,rotateX,rotateY,rotateZ,rotateByQuatAppend,rotateByQuatPrepend,rotateAroundAxis,add$1,multiply$1,scale$1,lerp$1,invert,conjugate,normalize$1,str$1,exactEquals$1,equals$1,create,clone,fromValues,copy,set,add,subtract,multiply,divide,ceil,floor,min,max,round,scale,scaleAndAdd,distance,squaredDistance,length,squaredLength,negate,inverse,normalize,dot,cross,lerp,random,transformMat2,transformMat2d,transformMat3,transformMat4,rotate,angle,zero,str,exactEquals,equals,GraphemeSplitter,tmpPoint1,tmpPoint2,tmpLine1,tmpLine2,lineInt,lineSegmentsIntersect,triangleArea,isLeft,isLeftOn,isRight,isRightOn,collinear,sqdist,polygonAt,polygonClear,polygonAppend,polygonMakeCCW,polygonReverse,polygonIsReflex,polygonCanSee,polygonCanSee2,polygonCopy,polygonGetCutEdges,polygonDecomp,polygonSlice,polygonIsSimple,getIntersectionPoint,polygonQuickDecomp,polygonRemoveCollinearPoints,polygonRemoveDuplicatePoints,scalar_eq,points_eq,ReadBrandList,RunTest,GetWindowsNTVersionName,asyncifyRequest,asyncifyTransaction,openReadOnlyTransaction,openWriteTransaction,lazyOpenDatabase,RequireString,getEntriesFromCursor,NOT_IMPLEMENTED,DISALLOW_CALLBACK,StructuredClone,arrayFlat,assertFail,isValidTypeChange,logDefendedObjectWarning,CheckDefendedObjectsUsedCorrectly,getObjectPropertySet,VerifyObjectPropertiesConsistent,isNegativeZero,padTwoDigits,hueToRGB,RequireStringOrNumber,SetNewCallback,DoAsyncifiedWork,DoNextAsyncifiedJob,ClearTimeCache,CheckActiveIdleTimeouts,lookupHtmlEntity,bbToHtmlReplacerFunc,IsWordBreakWhiteSpace,IsOpeningCJKPunctiationChar,IsContinuingCJKPunctuationChar,WordBreakTrimEnd,IsNewline,PlaneFromPoints,IsInFrontOfPlane,IsPointInFrontOfPlane,interpolateQuad,GetFormatSpecifiers,fillOrStrokeRect,ptToPx,getOffsetParam,CheckPendingPolls,SortZOrderList,GetDispatcher,MakeIWorldInstanceClass,GetDispatcher,GetTimelineState,GetTimelineState,GetTweenState,getActual,GetTypeFromFileExtension,AddScript,SortByInstLastCachedZIndex,SortByInstLastCachedZIndex,SortByInstZElevation,vec3EqualsXYZ,MaybePrepareLayerDraw,SortSolArray,IsSolArrayIdentical,NoActions,WrapIndex,GetExpressionFunc,EvalParams,EvalParams,GetInst,GetWorldInfo,CompareX,CompareY,IsOnScreen,IsOutsideLayout,PickDistance,SetX,SetY,SetPos,SetPosToObject,MoveForward,MoveAtAngle,GetX,GetY,GetDt,CompareWidth,CompareHeight,SetWidth,SetHeight,SetSize,GetWidth,GetHeight,GetBboxLeft,GetBboxTop,GetBboxRight,GetBboxBottom,GetBboxMidX,GetBboxMidY,IsAngleWithin,IsAngleClockwiseFrom,IsBetweenAngles,SetAngle,RotateClockwise,RotateCounterclockwise,RotateTowardAngle,RotateTowardPosition,SetTowardPosition,GetAngle,CompareOpacity,IsVisible,SetVisible,SetOpacity,SetDefaultColor,GetColor,GetOpacity,IsOnLayer,PickTopBottom,CompareZElevation,MoveToTop,MoveToBottom,MoveToLayer,ZMoveToObject,SetZElevation,LayerNumber,LayerName,ZIndex,ZElevation,TotalZElevation,IsEffectEnabled,SetEffectEnabled,SetEffectParam,CollMemory_Add,CollMemory_Remove,CollMemory_RemoveInstance,CollMemory_Get,DoOverlapCondition,FinishCollisionConditionPicking,FinishCollisionCondition,OnCollision,IsOverlapping,IsOverlappingOffset,HasParent,HasChildren,PickParent,PickChildren,PickNthChild,CompareChildCount,AddChild,RemoveChild,RemoveFromParent,ChildCount,AllChildCount,SetMeshSize,SetMeshPoint,MeshColumns,MeshRows,SetElementVisible,SetElementCSSStyle,SetElementAttribute,RemoveElementAttribute,SetElementFocus,SetElementBlur,IsElementFocused,SetElementEnabled,IsElementEnabled,CompareInstanceVar,IsBoolInstanceVarSet,PickInstVarHiLow,PickByUID,PickByUID_Normal,PickByUID_Inverted,HasTags,Tags,TagsCount,TagAt,ChangeTags,Destroy,OnCreated,OnDestroyed,SetInstanceVar,AddInstanceVar,SubInstanceVar,SetBoolInstanceVar,ToggleBoolInstanceVar,LoadFromJsonString,AsJSON,ObjectTypeName,Count,PickedCount,GetIID,GetUID,OnInstanceSignal,InstanceSignal,InstanceWaitForSignal,TemplateName,GetNextParamMap,ValidateInternalAPIToken,ForEachOrdered_SortInstances,SortZOrderList,SortInstancesByValue,GetTouchSdkInstance,ResizeArray,DoForEachTrigger,CompareValues,isCloudSaveOverwrite,getIndexForEase,ValidateTags,unaryminus,bothNumbers,add,subtract,multiply,divide,mod,pow,and,or;{let GraphemeSplitter2=function(){function c(t,e){var i,s=t.charCodeAt(e=void 0===e?0:e);return 55296<=s&&s<=56319&&e<t.length-1?(i=s,56320<=(t=t.charCodeAt(e+1))&&t<=57343?1024*(i-55296)+(t-56320)+65536:i):56320<=s&&s<=57343&&1<=e?(i=t.charCodeAt(e-1),t=s,55296<=i&&i<=56319?1024*(i-55296)+(t-56320)+65536:t):s}function f(t){return 1536<=t&&t<=1541||1757==t||1807==t||2274==t||3406==t||69821==t||70082<=t&&t<=70083||72250==t||72326<=t&&t<=72329||73030==t?12:13==t?0:10==t?1:0<=t&&t<=9||11<=t&&t<=12||14<=t&&t<=31||127<=t&&t<=159||173==t||1564==t||6158==t||8203==t||8206<=t&&t<=8207||8232==t||8233==t||8234<=t&&t<=8238||8288<=t&&t<=8292||8293==t||8294<=t&&t<=8303||55296<=t&&t<=57343||65279==t||65520<=t&&t<=65528||65529<=t&&t<=65531||113824<=t&&t<=113827||119155<=t&&t<=119162||917504==t||917505==t||917506<=t&&t<=917535||917632<=t&&t<=917759||918e3<=t&&t<=921599?2:768<=t&&t<=879||1155<=t&&t<=1159||1160<=t&&t<=1161||1425<=t&&t<=1469||1471==t||1473<=t&&t<=1474||1476<=t&&t<=1477||1479==t||1552<=t&&t<=1562||1611<=t&&t<=1631||1648==t||1750<=t&&t<=1756||1759<=t&&t<=1764||1767<=t&&t<=1768||1770<=t&&t<=1773||1809==t||1840<=t&&t<=1866||1958<=t&&t<=1968||2027<=t&&t<=2035||2070<=t&&t<=2073||2075<=t&&t<=2083||2085<=t&&t<=2087||2089<=t&&t<=2093||2137<=t&&t<=2139||2260<=t&&t<=2273||2275<=t&&t<=2306||2362==t||2364==t||2369<=t&&t<=2376||2381==t||2385<=t&&t<=2391||2402<=t&&t<=2403||2433==t||2492==t||2494==t||2497<=t&&t<=2500||2509==t||2519==t||2530<=t&&t<=2531||2561<=t&&t<=2562||2620==t||2625<=t&&t<=2626||2631<=t&&t<=2632||2635<=t&&t<=2637||2641==t||2672<=t&&t<=2673||2677==t||2689<=t&&t<=2690||2748==t||2753<=t&&t<=2757||2759<=t&&t<=2760||2765==t||2786<=t&&t<=2787||2810<=t&&t<=2815||2817==t||2876==t||2878==t||2879==t||2881<=t&&t<=2884||2893==t||2902==t||2903==t||2914<=t&&t<=2915||2946==t||3006==t||3008==t||3021==t||3031==t||3072==t||3134<=t&&t<=3136||3142<=t&&t<=3144||3146<=t&&t<=3149||3157<=t&&t<=3158||3170<=t&&t<=3171||3201==t||3260==t||3263==t||3266==t||3270==t||3276<=t&&t<=3277||3285<=t&&t<=3286||3298<=t&&t<=3299||3328<=t&&t<=3329||3387<=t&&t<=3388||3390==t||3393<=t&&t<=3396||3405==t||3415==t||3426<=t&&t<=3427||3530==t||3535==t||3538<=t&&t<=3540||3542==t||3551==t||3633==t||3636<=t&&t<=3642||3655<=t&&t<=3662||3761==t||3764<=t&&t<=3769||3771<=t&&t<=3772||3784<=t&&t<=3789||3864<=t&&t<=3865||3893==t||3895==t||3897==t||3953<=t&&t<=3966||3968<=t&&t<=3972||3974<=t&&t<=3975||3981<=t&&t<=3991||3993<=t&&t<=4028||4038==t||4141<=t&&t<=4144||4146<=t&&t<=4151||4153<=t&&t<=4154||4157<=t&&t<=4158||4184<=t&&t<=4185||4190<=t&&t<=4192||4209<=t&&t<=4212||4226==t||4229<=t&&t<=4230||4237==t||4253==t||4957<=t&&t<=4959||5906<=t&&t<=5908||5938<=t&&t<=5940||5970<=t&&t<=5971||6002<=t&&t<=6003||6068<=t&&t<=6069||6071<=t&&t<=6077||6086==t||6089<=t&&t<=6099||6109==t||6155<=t&&t<=6157||6277<=t&&t<=6278||6313==t||6432<=t&&t<=6434||6439<=t&&t<=6440||6450==t||6457<=t&&t<=6459||6679<=t&&t<=6680||6683==t||6742==t||6744<=t&&t<=6750||6752==t||6754==t||6757<=t&&t<=6764||6771<=t&&t<=6780||6783==t||6832<=t&&t<=6845||6846==t||6912<=t&&t<=6915||6964==t||6966<=t&&t<=6970||6972==t||6978==t||7019<=t&&t<=7027||7040<=t&&t<=7041||7074<=t&&t<=7077||7080<=t&&t<=7081||7083<=t&&t<=7085||7142==t||7144<=t&&t<=7145||7149==t||7151<=t&&t<=7153||7212<=t&&t<=7219||7222<=t&&t<=7223||7376<=t&&t<=7378||7380<=t&&t<=7392||7394<=t&&t<=7400||7405==t||7412==t||7416<=t&&t<=7417||7616<=t&&t<=7673||7675<=t&&t<=7679||8204==t||8400<=t&&t<=8412||8413<=t&&t<=8416||8417==t||8418<=t&&t<=8420||8421<=t&&t<=8432||11503<=t&&t<=11505||11647==t||11744<=t&&t<=11775||12330<=t&&t<=12333||12334<=t&&t<=12335||12441<=t&&t<=12442||42607==t||42608<=t&&t<=42610||42612<=t&&t<=42621||42654<=t&&t<=42655||42736<=t&&t<=42737||43010==t||43014==t||43019==t||43045<=t&&t<=43046||43204<=t&&t<=43205||43232<=t&&t<=43249||43302<=t&&t<=43309||43335<=t&&t<=43345||43392<=t&&t<=43394||43443==t||43446<=t&&t<=43449||43452==t||43493==t||43561<=t&&t<=43566||43569<=t&&t<=43570||43573<=t&&t<=43574||43587==t||43596==t||43644==t||43696==t||43698<=t&&t<=43700||43703<=t&&t<=43704||43710<=t&&t<=43711||43713==t||43756<=t&&t<=43757||43766==t||44005==t||44008==t||44013==t||64286==t||65024<=t&&t<=65039||65056<=t&&t<=65071||65438<=t&&t<=65439||66045==t||66272==t||66422<=t&&t<=66426||68097<=t&&t<=68099||68101<=t&&t<=68102||68108<=t&&t<=68111||68152<=t&&t<=68154||68159==t||68325<=t&&t<=68326||69633==t||69688<=t&&t<=69702||69759<=t&&t<=69761||69811<=t&&t<=69814||69817<=t&&t<=69818||69888<=t&&t<=69890||69927<=t&&t<=69931||69933<=t&&t<=69940||70003==t||70016<=t&&t<=70017||70070<=t&&t<=70078||70090<=t&&t<=70092||70191<=t&&t<=70193||70196==t||70198<=t&&t<=70199||70206==t||70367==t||70371<=t&&t<=70378||70400<=t&&t<=70401||70460==t||70462==t||70464==t||70487==t||70502<=t&&t<=70508||70512<=t&&t<=70516||70712<=t&&t<=70719||70722<=t&&t<=70724||70726==t||70832==t||70835<=t&&t<=70840||70842==t||70845==t||70847<=t&&t<=70848||70850<=t&&t<=70851||71087==t||71090<=t&&t<=71093||71100<=t&&t<=71101||71103<=t&&t<=71104||71132<=t&&t<=71133||71219<=t&&t<=71226||71229==t||71231<=t&&t<=71232||71339==t||71341==t||71344<=t&&t<=71349||71351==t||71453<=t&&t<=71455||71458<=t&&t<=71461||71463<=t&&t<=71467||72193<=t&&t<=72198||72201<=t&&t<=72202||72243<=t&&t<=72248||72251<=t&&t<=72254||72263==t||72273<=t&&t<=72278||72281<=t&&t<=72283||72330<=t&&t<=72342||72344<=t&&t<=72345||72752<=t&&t<=72758||72760<=t&&t<=72765||72767==t||72850<=t&&t<=72871||72874<=t&&t<=72880||72882<=t&&t<=72883||72885<=t&&t<=72886||73009<=t&&t<=73014||73018==t||73020<=t&&t<=73021||73023<=t&&t<=73029||73031==t||92912<=t&&t<=92916||92976<=t&&t<=92982||94095<=t&&t<=94098||113821<=t&&t<=113822||119141==t||119143<=t&&t<=119145||119150<=t&&t<=119154||119163<=t&&t<=119170||119173<=t&&t<=119179||119210<=t&&t<=119213||119362<=t&&t<=119364||121344<=t&&t<=121398||121403<=t&&t<=121452||121461==t||121476==t||121499<=t&&t<=121503||121505<=t&&t<=121519||122880<=t&&t<=122886||122888<=t&&t<=122904||122907<=t&&t<=122913||122915<=t&&t<=122916||122918<=t&&t<=122922||125136<=t&&t<=125142||125252<=t&&t<=125258||917536<=t&&t<=917631||917760<=t&&t<=917999?3:127462<=t&&t<=127487?4:2307==t||2363==t||2366<=t&&t<=2368||2377<=t&&t<=2380||2382<=t&&t<=2383||2434<=t&&t<=2435||2495<=t&&t<=2496||2503<=t&&t<=2504||2507<=t&&t<=2508||2563==t||2622<=t&&t<=2624||2691==t||2750<=t&&t<=2752||2761==t||2763<=t&&t<=2764||2818<=t&&t<=2819||2880==t||2887<=t&&t<=2888||2891<=t&&t<=2892||3007==t||3009<=t&&t<=3010||3014<=t&&t<=3016||3018<=t&&t<=3020||3073<=t&&t<=3075||3137<=t&&t<=3140||3202<=t&&t<=3203||3262==t||3264<=t&&t<=3265||3267<=t&&t<=3268||3271<=t&&t<=3272||3274<=t&&t<=3275||3330<=t&&t<=3331||3391<=t&&t<=3392||3398<=t&&t<=3400||3402<=t&&t<=3404||3458<=t&&t<=3459||3536<=t&&t<=3537||3544<=t&&t<=3550||3570<=t&&t<=3571||3635==t||3763==t||3902<=t&&t<=3903||3967==t||4145==t||4155<=t&&t<=4156||4182<=t&&t<=4183||4228==t||6070==t||6078<=t&&t<=6085||6087<=t&&t<=6088||6435<=t&&t<=6438||6441<=t&&t<=6443||6448<=t&&t<=6449||6451<=t&&t<=6456||6681<=t&&t<=6682||6741==t||6743==t||6765<=t&&t<=6770||6916==t||6965==t||6971==t||6973<=t&&t<=6977||6979<=t&&t<=6980||7042==t||7073==t||7078<=t&&t<=7079||7082==t||7143==t||7146<=t&&t<=7148||7150==t||7154<=t&&t<=7155||7204<=t&&t<=7211||7220<=t&&t<=7221||7393==t||7410<=t&&t<=7411||7415==t||43043<=t&&t<=43044||43047==t||43136<=t&&t<=43137||43188<=t&&t<=43203||43346<=t&&t<=43347||43395==t||43444<=t&&t<=43445||43450<=t&&t<=43451||43453<=t&&t<=43456||43567<=t&&t<=43568||43571<=t&&t<=43572||43597==t||43755==t||43758<=t&&t<=43759||43765==t||44003<=t&&t<=44004||44006<=t&&t<=44007||44009<=t&&t<=44010||44012==t||69632==t||69634==t||69762==t||69808<=t&&t<=69810||69815<=t&&t<=69816||69932==t||70018==t||70067<=t&&t<=70069||70079<=t&&t<=70080||70188<=t&&t<=70190||70194<=t&&t<=70195||70197==t||70368<=t&&t<=70370||70402<=t&&t<=70403||70463==t||70465<=t&&t<=70468||70471<=t&&t<=70472||70475<=t&&t<=70477||70498<=t&&t<=70499||70709<=t&&t<=70711||70720<=t&&t<=70721||70725==t||70833<=t&&t<=70834||70841==t||70843<=t&&t<=70844||70846==t||70849==t||71088<=t&&t<=71089||71096<=t&&t<=71099||71102==t||71216<=t&&t<=71218||71227<=t&&t<=71228||71230==t||71340==t||71342<=t&&t<=71343||71350==t||71456<=t&&t<=71457||71462==t||72199<=t&&t<=72200||72249==t||72279<=t&&t<=72280||72343==t||72751==t||72766==t||72873==t||72881==t||72884==t||94033<=t&&t<=94078||119142==t||119149==t?5:4352<=t&&t<=4447||43360<=t&&t<=43388?6:4448<=t&&t<=4519||55216<=t&&t<=55238?7:4520<=t&&t<=4607||55243<=t&&t<=55291?8:44032==t||44060==t||44088==t||44116==t||44144==t||44172==t||44200==t||44228==t||44256==t||44284==t||44312==t||44340==t||44368==t||44396==t||44424==t||44452==t||44480==t||44508==t||44536==t||44564==t||44592==t||44620==t||44648==t||44676==t||44704==t||44732==t||44760==t||44788==t||44816==t||44844==t||44872==t||44900==t||44928==t||44956==t||44984==t||45012==t||45040==t||45068==t||45096==t||45124==t||45152==t||45180==t||45208==t||45236==t||45264==t||45292==t||45320==t||45348==t||45376==t||45404==t||45432==t||45460==t||45488==t||45516==t||45544==t||45572==t||45600==t||45628==t||45656==t||45684==t||45712==t||45740==t||45768==t||45796==t||45824==t||45852==t||45880==t||45908==t||45936==t||45964==t||45992==t||46020==t||46048==t||46076==t||46104==t||46132==t||46160==t||46188==t||46216==t||46244==t||46272==t||46300==t||46328==t||46356==t||46384==t||46412==t||46440==t||46468==t||46496==t||46524==t||46552==t||46580==t||46608==t||46636==t||46664==t||46692==t||46720==t||46748==t||46776==t||46804==t||46832==t||46860==t||46888==t||46916==t||46944==t||46972==t||47e3==t||47028==t||47056==t||47084==t||47112==t||47140==t||47168==t||47196==t||47224==t||47252==t||47280==t||47308==t||47336==t||47364==t||47392==t||47420==t||47448==t||47476==t||47504==t||47532==t||47560==t||47588==t||47616==t||47644==t||47672==t||47700==t||47728==t||47756==t||47784==t||47812==t||47840==t||47868==t||47896==t||47924==t||47952==t||47980==t||48008==t||48036==t||48064==t||48092==t||48120==t||48148==t||48176==t||48204==t||48232==t||48260==t||48288==t||48316==t||48344==t||48372==t||48400==t||48428==t||48456==t||48484==t||48512==t||48540==t||48568==t||48596==t||48624==t||48652==t||48680==t||48708==t||48736==t||48764==t||48792==t||48820==t||48848==t||48876==t||48904==t||48932==t||48960==t||48988==t||49016==t||49044==t||49072==t||49100==t||49128==t||49156==t||49184==t||49212==t||49240==t||49268==t||49296==t||49324==t||49352==t||49380==t||49408==t||49436==t||49464==t||49492==t||49520==t||49548==t||49576==t||49604==t||49632==t||49660==t||49688==t||49716==t||49744==t||49772==t||49800==t||49828==t||49856==t||49884==t||49912==t||49940==t||49968==t||49996==t||50024==t||50052==t||50080==t||50108==t||50136==t||50164==t||50192==t||50220==t||50248==t||50276==t||50304==t||50332==t||50360==t||50388==t||50416==t||50444==t||50472==t||50500==t||50528==t||50556==t||50584==t||50612==t||50640==t||50668==t||50696==t||50724==t||50752==t||50780==t||50808==t||50836==t||50864==t||50892==t||50920==t||50948==t||50976==t||51004==t||51032==t||51060==t||51088==t||51116==t||51144==t||51172==t||51200==t||51228==t||51256==t||51284==t||51312==t||51340==t||51368==t||51396==t||51424==t||51452==t||51480==t||51508==t||51536==t||51564==t||51592==t||51620==t||51648==t||51676==t||51704==t||51732==t||51760==t||51788==t||51816==t||51844==t||51872==t||51900==t||51928==t||51956==t||51984==t||52012==t||52040==t||52068==t||52096==t||52124==t||52152==t||52180==t||52208==t||52236==t||52264==t||52292==t||52320==t||52348==t||52376==t||52404==t||52432==t||52460==t||52488==t||52516==t||52544==t||52572==t||52600==t||52628==t||52656==t||52684==t||52712==t||52740==t||52768==t||52796==t||52824==t||52852==t||52880==t||52908==t||52936==t||52964==t||52992==t||53020==t||53048==t||53076==t||53104==t||53132==t||53160==t||53188==t||53216==t||53244==t||53272==t||53300==t||53328==t||53356==t||53384==t||53412==t||53440==t||53468==t||53496==t||53524==t||53552==t||53580==t||53608==t||53636==t||53664==t||53692==t||53720==t||53748==t||53776==t||53804==t||53832==t||53860==t||53888==t||53916==t||53944==t||53972==t||54e3==t||54028==t||54056==t||54084==t||54112==t||54140==t||54168==t||54196==t||54224==t||54252==t||54280==t||54308==t||54336==t||54364==t||54392==t||54420==t||54448==t||54476==t||54504==t||54532==t||54560==t||54588==t||54616==t||54644==t||54672==t||54700==t||54728==t||54756==t||54784==t||54812==t||54840==t||54868==t||54896==t||54924==t||54952==t||54980==t||55008==t||55036==t||55064==t||55092==t||55120==t||55148==t||55176==t?9:44033<=t&&t<=44059||44061<=t&&t<=44087||44089<=t&&t<=44115||44117<=t&&t<=44143||44145<=t&&t<=44171||44173<=t&&t<=44199||44201<=t&&t<=44227||44229<=t&&t<=44255||44257<=t&&t<=44283||44285<=t&&t<=44311||44313<=t&&t<=44339||44341<=t&&t<=44367||44369<=t&&t<=44395||44397<=t&&t<=44423||44425<=t&&t<=44451||44453<=t&&t<=44479||44481<=t&&t<=44507||44509<=t&&t<=44535||44537<=t&&t<=44563||44565<=t&&t<=44591||44593<=t&&t<=44619||44621<=t&&t<=44647||44649<=t&&t<=44675||44677<=t&&t<=44703||44705<=t&&t<=44731||44733<=t&&t<=44759||44761<=t&&t<=44787||44789<=t&&t<=44815||44817<=t&&t<=44843||44845<=t&&t<=44871||44873<=t&&t<=44899||44901<=t&&t<=44927||44929<=t&&t<=44955||44957<=t&&t<=44983||44985<=t&&t<=45011||45013<=t&&t<=45039||45041<=t&&t<=45067||45069<=t&&t<=45095||45097<=t&&t<=45123||45125<=t&&t<=45151||45153<=t&&t<=45179||45181<=t&&t<=45207||45209<=t&&t<=45235||45237<=t&&t<=45263||45265<=t&&t<=45291||45293<=t&&t<=45319||45321<=t&&t<=45347||45349<=t&&t<=45375||45377<=t&&t<=45403||45405<=t&&t<=45431||45433<=t&&t<=45459||45461<=t&&t<=45487||45489<=t&&t<=45515||45517<=t&&t<=45543||45545<=t&&t<=45571||45573<=t&&t<=45599||45601<=t&&t<=45627||45629<=t&&t<=45655||45657<=t&&t<=45683||45685<=t&&t<=45711||45713<=t&&t<=45739||45741<=t&&t<=45767||45769<=t&&t<=45795||45797<=t&&t<=45823||45825<=t&&t<=45851||45853<=t&&t<=45879||45881<=t&&t<=45907||45909<=t&&t<=45935||45937<=t&&t<=45963||45965<=t&&t<=45991||45993<=t&&t<=46019||46021<=t&&t<=46047||46049<=t&&t<=46075||46077<=t&&t<=46103||46105<=t&&t<=46131||46133<=t&&t<=46159||46161<=t&&t<=46187||46189<=t&&t<=46215||46217<=t&&t<=46243||46245<=t&&t<=46271||46273<=t&&t<=46299||46301<=t&&t<=46327||46329<=t&&t<=46355||46357<=t&&t<=46383||46385<=t&&t<=46411||46413<=t&&t<=46439||46441<=t&&t<=46467||46469<=t&&t<=46495||46497<=t&&t<=46523||46525<=t&&t<=46551||46553<=t&&t<=46579||46581<=t&&t<=46607||46609<=t&&t<=46635||46637<=t&&t<=46663||46665<=t&&t<=46691||46693<=t&&t<=46719||46721<=t&&t<=46747||46749<=t&&t<=46775||46777<=t&&t<=46803||46805<=t&&t<=46831||46833<=t&&t<=46859||46861<=t&&t<=46887||46889<=t&&t<=46915||46917<=t&&t<=46943||46945<=t&&t<=46971||46973<=t&&t<=46999||47001<=t&&t<=47027||47029<=t&&t<=47055||47057<=t&&t<=47083||47085<=t&&t<=47111||47113<=t&&t<=47139||47141<=t&&t<=47167||47169<=t&&t<=47195||47197<=t&&t<=47223||47225<=t&&t<=47251||47253<=t&&t<=47279||47281<=t&&t<=47307||47309<=t&&t<=47335||47337<=t&&t<=47363||47365<=t&&t<=47391||47393<=t&&t<=47419||47421<=t&&t<=47447||47449<=t&&t<=47475||47477<=t&&t<=47503||47505<=t&&t<=47531||47533<=t&&t<=47559||47561<=t&&t<=47587||47589<=t&&t<=47615||47617<=t&&t<=47643||47645<=t&&t<=47671||47673<=t&&t<=47699||47701<=t&&t<=47727||47729<=t&&t<=47755||47757<=t&&t<=47783||47785<=t&&t<=47811||47813<=t&&t<=47839||47841<=t&&t<=47867||47869<=t&&t<=47895||47897<=t&&t<=47923||47925<=t&&t<=47951||47953<=t&&t<=47979||47981<=t&&t<=48007||48009<=t&&t<=48035||48037<=t&&t<=48063||48065<=t&&t<=48091||48093<=t&&t<=48119||48121<=t&&t<=48147||48149<=t&&t<=48175||48177<=t&&t<=48203||48205<=t&&t<=48231||48233<=t&&t<=48259||48261<=t&&t<=48287||48289<=t&&t<=48315||48317<=t&&t<=48343||48345<=t&&t<=48371||48373<=t&&t<=48399||48401<=t&&t<=48427||48429<=t&&t<=48455||48457<=t&&t<=48483||48485<=t&&t<=48511||48513<=t&&t<=48539||48541<=t&&t<=48567||48569<=t&&t<=48595||48597<=t&&t<=48623||48625<=t&&t<=48651||48653<=t&&t<=48679||48681<=t&&t<=48707||48709<=t&&t<=48735||48737<=t&&t<=48763||48765<=t&&t<=48791||48793<=t&&t<=48819||48821<=t&&t<=48847||48849<=t&&t<=48875||48877<=t&&t<=48903||48905<=t&&t<=48931||48933<=t&&t<=48959||48961<=t&&t<=48987||48989<=t&&t<=49015||49017<=t&&t<=49043||49045<=t&&t<=49071||49073<=t&&t<=49099||49101<=t&&t<=49127||49129<=t&&t<=49155||49157<=t&&t<=49183||49185<=t&&t<=49211||49213<=t&&t<=49239||49241<=t&&t<=49267||49269<=t&&t<=49295||49297<=t&&t<=49323||49325<=t&&t<=49351||49353<=t&&t<=49379||49381<=t&&t<=49407||49409<=t&&t<=49435||49437<=t&&t<=49463||49465<=t&&t<=49491||49493<=t&&t<=49519||49521<=t&&t<=49547||49549<=t&&t<=49575||49577<=t&&t<=49603||49605<=t&&t<=49631||49633<=t&&t<=49659||49661<=t&&t<=49687||49689<=t&&t<=49715||49717<=t&&t<=49743||49745<=t&&t<=49771||49773<=t&&t<=49799||49801<=t&&t<=49827||49829<=t&&t<=49855||49857<=t&&t<=49883||49885<=t&&t<=49911||49913<=t&&t<=49939||49941<=t&&t<=49967||49969<=t&&t<=49995||49997<=t&&t<=50023||50025<=t&&t<=50051||50053<=t&&t<=50079||50081<=t&&t<=50107||50109<=t&&t<=50135||50137<=t&&t<=50163||50165<=t&&t<=50191||50193<=t&&t<=50219||50221<=t&&t<=50247||50249<=t&&t<=50275||50277<=t&&t<=50303||50305<=t&&t<=50331||50333<=t&&t<=50359||50361<=t&&t<=50387||50389<=t&&t<=50415||50417<=t&&t<=50443||50445<=t&&t<=50471||50473<=t&&t<=50499||50501<=t&&t<=50527||50529<=t&&t<=50555||50557<=t&&t<=50583||50585<=t&&t<=50611||50613<=t&&t<=50639||50641<=t&&t<=50667||50669<=t&&t<=50695||50697<=t&&t<=50723||50725<=t&&t<=50751||50753<=t&&t<=50779||50781<=t&&t<=50807||50809<=t&&t<=50835||50837<=t&&t<=50863||50865<=t&&t<=50891||50893<=t&&t<=50919||50921<=t&&t<=50947||50949<=t&&t<=50975||50977<=t&&t<=51003||51005<=t&&t<=51031||51033<=t&&t<=51059||51061<=t&&t<=51087||51089<=t&&t<=51115||51117<=t&&t<=51143||51145<=t&&t<=51171||51173<=t&&t<=51199||51201<=t&&t<=51227||51229<=t&&t<=51255||51257<=t&&t<=51283||51285<=t&&t<=51311||51313<=t&&t<=51339||51341<=t&&t<=51367||51369<=t&&t<=51395||51397<=t&&t<=51423||51425<=t&&t<=51451||51453<=t&&t<=51479||51481<=t&&t<=51507||51509<=t&&t<=51535||51537<=t&&t<=51563||51565<=t&&t<=51591||51593<=t&&t<=51619||51621<=t&&t<=51647||51649<=t&&t<=51675||51677<=t&&t<=51703||51705<=t&&t<=51731||51733<=t&&t<=51759||51761<=t&&t<=51787||51789<=t&&t<=51815||51817<=t&&t<=51843||51845<=t&&t<=51871||51873<=t&&t<=51899||51901<=t&&t<=51927||51929<=t&&t<=51955||51957<=t&&t<=51983||51985<=t&&t<=52011||52013<=t&&t<=52039||52041<=t&&t<=52067||52069<=t&&t<=52095||52097<=t&&t<=52123||52125<=t&&t<=52151||52153<=t&&t<=52179||52181<=t&&t<=52207||52209<=t&&t<=52235||52237<=t&&t<=52263||52265<=t&&t<=52291||52293<=t&&t<=52319||52321<=t&&t<=52347||52349<=t&&t<=52375||52377<=t&&t<=52403||52405<=t&&t<=52431||52433<=t&&t<=52459||52461<=t&&t<=52487||52489<=t&&t<=52515||52517<=t&&t<=52543||52545<=t&&t<=52571||52573<=t&&t<=52599||52601<=t&&t<=52627||52629<=t&&t<=52655||52657<=t&&t<=52683||52685<=t&&t<=52711||52713<=t&&t<=52739||52741<=t&&t<=52767||52769<=t&&t<=52795||52797<=t&&t<=52823||52825<=t&&t<=52851||52853<=t&&t<=52879||52881<=t&&t<=52907||52909<=t&&t<=52935||52937<=t&&t<=52963||52965<=t&&t<=52991||52993<=t&&t<=53019||53021<=t&&t<=53047||53049<=t&&t<=53075||53077<=t&&t<=53103||53105<=t&&t<=53131||53133<=t&&t<=53159||53161<=t&&t<=53187||53189<=t&&t<=53215||53217<=t&&t<=53243||53245<=t&&t<=53271||53273<=t&&t<=53299||53301<=t&&t<=53327||53329<=t&&t<=53355||53357<=t&&t<=53383||53385<=t&&t<=53411||53413<=t&&t<=53439||53441<=t&&t<=53467||53469<=t&&t<=53495||53497<=t&&t<=53523||53525<=t&&t<=53551||53553<=t&&t<=53579||53581<=t&&t<=53607||53609<=t&&t<=53635||53637<=t&&t<=53663||53665<=t&&t<=53691||53693<=t&&t<=53719||53721<=t&&t<=53747||53749<=t&&t<=53775||53777<=t&&t<=53803||53805<=t&&t<=53831||53833<=t&&t<=53859||53861<=t&&t<=53887||53889<=t&&t<=53915||53917<=t&&t<=53943||53945<=t&&t<=53971||53973<=t&&t<=53999||54001<=t&&t<=54027||54029<=t&&t<=54055||54057<=t&&t<=54083||54085<=t&&t<=54111||54113<=t&&t<=54139||54141<=t&&t<=54167||54169<=t&&t<=54195||54197<=t&&t<=54223||54225<=t&&t<=54251||54253<=t&&t<=54279||54281<=t&&t<=54307||54309<=t&&t<=54335||54337<=t&&t<=54363||54365<=t&&t<=54391||54393<=t&&t<=54419||54421<=t&&t<=54447||54449<=t&&t<=54475||54477<=t&&t<=54503||54505<=t&&t<=54531||54533<=t&&t<=54559||54561<=t&&t<=54587||54589<=t&&t<=54615||54617<=t&&t<=54643||54645<=t&&t<=54671||54673<=t&&t<=54699||54701<=t&&t<=54727||54729<=t&&t<=54755||54757<=t&&t<=54783||54785<=t&&t<=54811||54813<=t&&t<=54839||54841<=t&&t<=54867||54869<=t&&t<=54895||54897<=t&&t<=54923||54925<=t&&t<=54951||54953<=t&&t<=54979||54981<=t&&t<=55007||55009<=t&&t<=55035||55037<=t&&t<=55063||55065<=t&&t<=55091||55093<=t&&t<=55119||55121<=t&&t<=55147||55149<=t&&t<=55175||55177<=t&&t<=55203?10:9757==t||9977==t||9994<=t&&t<=9997||127877==t||127938<=t&&t<=127940||127943==t||127946<=t&&t<=127948||128066<=t&&t<=128067||128070<=t&&t<=128080||128110==t||128112<=t&&t<=128120||128124==t||128129<=t&&t<=128131||128133<=t&&t<=128135||128170==t||128372<=t&&t<=128373||128378==t||128400==t||128405<=t&&t<=128406||128581<=t&&t<=128583||128587<=t&&t<=128591||128675==t||128692<=t&&t<=128694||128704==t||128716==t||129304<=t&&t<=129308||129310<=t&&t<=129311||129318==t||129328<=t&&t<=129337||129341<=t&&t<=129342||129489<=t&&t<=129501?13:127995<=t&&t<=127999?14:8205==t?15:9792==t||9794==t||9877<=t&&t<=9878||9992==t||10084==t||127752==t||127806==t||127859==t||127891==t||127908==t||127912==t||127979==t||127981==t||128139==t||128187<=t&&t<=128188||128295==t||128300==t||128488==t||128640==t||128658==t?16:128102<=t&&t<=128105?17:11}return this.we=function(t,e){if((e=void 0===e?0:e)<0)return 0;if(!(e>=t.length-1)){var i,s,r,h,n,a=f(c(t,e)),o=[];for(e+=1;e<t.length;e++){var l=t,u=e-1;if(!(55296<=l.charCodeAt(u)&&l.charCodeAt(u)<=56319&&56320<=l.charCodeAt(1+u)&&l.charCodeAt(1+u)<=57343)){if(l=f(c(t,e)),u=l,n=h=r=void 0,r=[i=a].concat(s=o).concat([u]),h=r[r.length-2],1<(n=r.lastIndexOf(14))&&r.slice(1,n).every(function(t){return 3==t})&&-1==[3,13,17].indexOf(i)||(0<(i=r.lastIndexOf(4))&&r.slice(1,i).every(function(t){return 4==t})&&-1==[12,4].indexOf(h)?(r.filter(function(t){return 4==t}).length,1):(0!=h||1!=u)&&(2==h||0==h||1==h?(14==u&&s.every(function(t){return 3==t}),1):2==u||0==u||1==u||(6!=h||6!=u&&7!=u&&9!=u&&10!=u)&&(9!=h&&7!=h||7!=u&&8!=u)&&(10!=h&&8!=h||8!=u)&&3!=u&&15!=u&&5!=u&&12!=h&&(i=-1!=r.indexOf(3)?r.lastIndexOf(3)-1:r.length-2,!(-1!=[13,17].indexOf(r[i])&&r.slice(i+1,-1).every(function(t){return 3==t})&&14==u||15==h&&-1!=[16,17].indexOf(u)||-1==s.indexOf(4)&&4==h&&4==u)))))return e;o.push(l)}}}return t.length},this.Oe=function(t){for(var e,i=[],s=0;(e=this.we(t,s))<t.length;)i.push(t.slice(s,e)),s=e;return s<t.length&&i.push(t.slice(s)),i},this.Ge=function(i){var s=0,t={next:function(){var t,e;return(t=this.we(i,s))<i.length?(e=i.slice(s,t),s=t,{value:e,done:!1}):s<i.length?(e=i.slice(s),s=i.length,{value:e,done:!1}):{value:void 0,done:!0}}.bind(this)};return"undefined"!=typeof Symbol&&Symbol.iterator&&(t[Symbol.iterator]=function(){return t}),t},this.Pe=function(t){for(var e,i=0,s=0;(e=this.we(t,s))<t.length;)s=e,i++;return s<t.length&&i++,i},this};GraphemeSplitter=GraphemeSplitter2,self.Le=GraphemeSplitter2}{let lineInt2=function(t,e,i){i=i||0;var s=[0,0],r=t[1][1]-t[0][1],h=t[0][0]-t[1][0],t=r*t[0][0]+h*t[0][1],n=e[1][1]-e[0][1],a=e[0][0]-e[1][0],e=n*e[0][0]+a*e[0][1],o=r*a-n*h;return scalar_eq2(o,0,i)||(s[0]=(a*t-h*e)/o,s[1]=(r*e-n*t)/o),s},lineSegmentsIntersect2=function(t,e,i,s){var r,h=e[0]-t[0],e=e[1]-t[1],n=s[0]-i[0],s=s[1]-i[1];return n*e-s*h!=0&&(r=(n*(t[1]-i[1])+s*(i[0]-t[0]))/(s*h-n*e),0<=(t=(h*(i[1]-t[1])+e*(t[0]-i[0]))/(n*e-s*h)))&&t<=1&&0<=r&&r<=1},triangleArea2=function(t,e,i){return(e[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(e[1]-t[1])},isLeft2=function(t,e,i){return 0<triangleArea2(t,e,i)},isLeftOn2=function(t,e,i){return 0<=triangleArea2(t,e,i)},isRight2=function(t,e,i){return triangleArea2(t,e,i)<0},isRightOn2=function(t,e,i){return triangleArea2(t,e,i)<=0},collinear2=function(t,e,i,s){var r,h,n;return s?(n=tmpPoint2,(h=tmpPoint1)[0]=e[0]-t[0],h[1]=e[1]-t[1],n[0]=i[0]-e[0],n[1]=i[1]-e[1],r=h[0]*n[0]+h[1]*n[1],h=Math.sqrt(h[0]*h[0]+h[1]*h[1]),n=Math.sqrt(n[0]*n[0]+n[1]*n[1]),Math.acos(r/(h*n))<s):0===triangleArea2(t,e,i)},sqdist2=function(t,e){var i=e[0]-t[0],e=e[1]-t[1];return i*i+e*e},polygonAt2=function(t,e){var i=t.length;return t[e<0?e%i+i:e%i]},polygonClear2=function(t){t.length=0},polygonAppend2=function(t,e,i,s){for(var r=i;r<s;r++)t.push(e[r])},polygonMakeCCW2=function(t){for(var e=0,i=t,s=1;s<t.length;++s)(i[s][1]<i[e][1]||i[s][1]===i[e][1]&&i[s][0]>i[e][0])&&(e=s);return!isLeft2(polygonAt2(t,e-1),polygonAt2(t,e),polygonAt2(t,e+1))&&(polygonReverse2(t),!0)},polygonReverse2=function(t){for(var e=[],i=t.length,s=0;s!==i;s++)e.push(t.pop());for(s=0;s!==i;s++)t[s]=e[s]},polygonIsReflex2=function(t,e){return isRight2(polygonAt2(t,e-1),polygonAt2(t,e),polygonAt2(t,e+1))},polygonCanSee3=function(t,e,i){var s,r=tmpLine1,h=tmpLine2;if(isLeftOn2(polygonAt2(t,e+1),polygonAt2(t,e),polygonAt2(t,i))&&isRightOn2(polygonAt2(t,e-1),polygonAt2(t,e),polygonAt2(t,i)))return!1;for(var n=sqdist2(polygonAt2(t,e),polygonAt2(t,i)),a=0;a!==t.length;++a)if((a+1)%t.length!==e&&a!==e&&isLeftOn2(polygonAt2(t,e),polygonAt2(t,i),polygonAt2(t,a+1))&&isRightOn2(polygonAt2(t,e),polygonAt2(t,i),polygonAt2(t,a))&&(r[0]=polygonAt2(t,e),r[1]=polygonAt2(t,i),h[0]=polygonAt2(t,a),h[1]=polygonAt2(t,a+1),s=lineInt2(r,h),sqdist2(polygonAt2(t,e),s)<n))return!1;return!0},polygonCanSee22=function(t,e,i){for(var s=0;s!==t.length;++s)if(s!==e&&s!==i&&(s+1)%t.length!==e&&(s+1)%t.length!==i&&lineSegmentsIntersect2(polygonAt2(t,e),polygonAt2(t,i),polygonAt2(t,s),polygonAt2(t,s+1)))return!1;return!0},polygonCopy2=function(t,e,i,s){var r=s||[];if(polygonClear2(r),e<i)for(var h=e;h<=i;h++)r.push(t[h]);else{for(h=0;h<=i;h++)r.push(t[h]);for(h=e;h<t.length;h++)r.push(t[h])}return r},polygonGetCutEdges2=function(t){for(var e=[],i=[],s=[],r=Number.MAX_VALUE,h=0;h<t.length;++h)if(polygonIsReflex2(t,h))for(var n=0;n<t.length;++n)if(polygonCanSee3(t,h,n)){for(var i=polygonGetCutEdges2(polygonCopy2(t,h,n,s)),a=polygonGetCutEdges2(polygonCopy2(t,n,h,s)),o=0;o<a.length;o++)i.push(a[o]);i.length<r&&(r=(e=i).length,e.push([polygonAt2(t,h),polygonAt2(t,n)]))}return e},polygonDecomp2=function(t){var e=polygonGetCutEdges2(t);return 0<e.length?polygonSlice2(t,e):[t]},polygonSlice2=function(t,e){if(0===e.length)return[t];if(e instanceof Array&&e.length&&e[0]instanceof Array&&2===e[0].length&&e[0][0]instanceof Array){for(var i=[t],s=0;s<e.length;s++)for(var r=e[s],h=0;h<i.length;h++){var n=i[h],n=polygonSlice2(n,r);if(n){i.splice(h,1),i.push(n[0],n[1]);break}}return i}return s=t.indexOf((r=e)[0]),h=t.indexOf(r[1]),-1!==s&&-1!==h&&[polygonCopy2(t,s,h),polygonCopy2(t,h,s)]},polygonIsSimple2=function(t){for(var e=t,i=0;i<e.length-1;i++)for(var s=0;s<i-1;s++)if(lineSegmentsIntersect2(e[i],e[i+1],e[s],e[s+1]))return!1;for(i=1;i<e.length-2;i++)if(lineSegmentsIntersect2(e[0],e[e.length-1],e[i],e[i+1]))return!1;return!0},getIntersectionPoint2=function(t,e,i,s,r){r=r||0;var h=e[1]-t[1],e=t[0]-e[0],t=h*t[0]+e*t[1],n=s[1]-i[1],s=i[0]-s[0],i=n*i[0]+s*i[1],a=h*s-n*e;return scalar_eq2(a,0,r)?[0,0]:[(s*t-e*i)/a,(h*i-n*t)/a]},polygonQuickDecomp2=function(t,e,i,s,r,h,n){h=h||100,n=n||0,r=r||25,e=void 0!==e?e:[],i=i||[],s=s||[];var a=[0,0],o=[0,0],l=[0,0],u=0,c=0,f=0,d=0,C=0,p=0,m=0,v=[],S=[],g=t,T=t;if(!(T.length<3))if(h<++n)console.warn("quickDecomp: max level ("+h+") reached.");else{for(var _=0;_<t.length;++_)if(polygonIsReflex2(g,_)){i.push(g[_]);for(var u=c=Number.MAX_VALUE,E=0;E<t.length;++E)isLeft2(polygonAt2(g,_-1),polygonAt2(g,_),polygonAt2(g,E))&&isRightOn2(polygonAt2(g,_-1),polygonAt2(g,_),polygonAt2(g,E-1))&&(l=getIntersectionPoint2(polygonAt2(g,_-1),polygonAt2(g,_),polygonAt2(g,E),polygonAt2(g,E-1)),isRight2(polygonAt2(g,_+1),polygonAt2(g,_),l))&&(f=sqdist2(g[_],l))<c&&(c=f,o=l,p=E),isLeft2(polygonAt2(g,_+1),polygonAt2(g,_),polygonAt2(g,E+1))&&isRightOn2(polygonAt2(g,_+1),polygonAt2(g,_),polygonAt2(g,E))&&(l=getIntersectionPoint2(polygonAt2(g,_+1),polygonAt2(g,_),polygonAt2(g,E),polygonAt2(g,E+1)),isLeft2(polygonAt2(g,_-1),polygonAt2(g,_),l))&&(f=sqdist2(g[_],l))<u&&(u=f,a=l,C=E);if(p===(C+1)%t.length)l[0]=(o[0]+a[0])/2,l[1]=(o[1]+a[1])/2,s.push(l),_<C?(polygonAppend2(v,g,_,C+1),v.push(l),S.push(l),0!==p&&polygonAppend2(S,g,p,g.length),polygonAppend2(S,g,0,_+1)):(0!==_&&polygonAppend2(v,g,_,g.length),polygonAppend2(v,g,0,C+1),v.push(l),S.push(l),polygonAppend2(S,g,p,_+1));else{if(C<p&&(C+=t.length),d=Number.MAX_VALUE,C<p)return e;for(E=p;E<=C;++E)isLeftOn2(polygonAt2(g,_-1),polygonAt2(g,_),polygonAt2(g,E))&&isRightOn2(polygonAt2(g,_+1),polygonAt2(g,_),polygonAt2(g,E))&&(f=sqdist2(polygonAt2(g,_),polygonAt2(g,E)))<d&&polygonCanSee22(g,_,E)&&(d=f,m=E%t.length);_<m?(polygonAppend2(v,g,_,m+1),0!==m&&polygonAppend2(S,g,m,T.length),polygonAppend2(S,g,0,_+1)):(0!==_&&polygonAppend2(v,g,_,T.length),polygonAppend2(v,g,0,m+1),polygonAppend2(S,g,m,_+1))}return v.length<S.length?(polygonQuickDecomp2(v,e,i,s,r,h,n),polygonQuickDecomp2(S,e,i,s,r,h,n)):(polygonQuickDecomp2(S,e,i,s,r,h,n),polygonQuickDecomp2(v,e,i,s,r,h,n)),e}e.push(t)}return e},polygonRemoveCollinearPoints2=function(t,e){for(var i=0,s=t.length-1;3<t.length&&0<=s;--s)collinear2(polygonAt2(t,s-1),polygonAt2(t,s),polygonAt2(t,s+1),e)&&(t.splice(s%t.length,1),i++);return i},polygonRemoveDuplicatePoints2=function(t,e){for(var i=t.length-1;1<=i;--i)for(var s=t[i],r=i-1;0<=r;--r)if(points_eq2(s,t[r],e)){t.splice(i,1);continue}},scalar_eq2=function(t,e,i){return i=i||0,Math.abs(t-e)<=i},points_eq2=function(t,e,i){return scalar_eq2(t[0],e[0],i)&&scalar_eq2(t[1],e[1],i)};lineInt=lineInt2,lineSegmentsIntersect=lineSegmentsIntersect2,triangleArea=triangleArea2,isLeft=isLeft2,isLeftOn=isLeftOn2,isRight=isRight2,isRightOn=isRightOn2,collinear=collinear2,sqdist=sqdist2,polygonAt=polygonAt2,polygonClear=polygonClear2,polygonAppend=polygonAppend2,polygonMakeCCW=polygonMakeCCW2,polygonReverse=polygonReverse2,polygonIsReflex=polygonIsReflex2,polygonCanSee=polygonCanSee3,polygonCanSee2=polygonCanSee22,polygonCopy=polygonCopy2,polygonGetCutEdges=polygonGetCutEdges2,polygonDecomp=polygonDecomp2,polygonSlice=polygonSlice2,polygonIsSimple=polygonIsSimple2,getIntersectionPoint=getIntersectionPoint2,polygonQuickDecomp=polygonQuickDecomp2,polygonRemoveCollinearPoints=polygonRemoveCollinearPoints2,polygonRemoveDuplicatePoints=polygonRemoveDuplicatePoints2,scalar_eq=scalar_eq2,points_eq=points_eq2,tmpPoint1=[],tmpPoint2=[],tmpLine1=[],tmpLine2=[],self.xe={Ne:polygonDecomp2,De:polygonQuickDecomp2,Fe:polygonIsSimple2,Be:polygonRemoveCollinearPoints2,$e:polygonRemoveDuplicatePoints2,ke:polygonMakeCCW2}}{let isReady=!1,hasAppStarted=!1,buildMode="dev",internalApiToken=Symbol("Construct internal API token"),internalApiTokenAccessesRemaining=14,C33=self.We=class C3{constructor(){throw TypeError("static class can't be instantiated")}static Ve(){if(internalApiTokenAccessesRemaining<=0)throw new Error("cannot obtain internal API token");return--internalApiTokenAccessesRemaining,internalApiToken}static He(){isReady=!0}static Ue(){return isReady}static je(){hasAppStarted=!0}static Xe(){return hasAppStarted}static Ye(t){buildMode=t}static qe(){return buildMode}static Je(){return"final"===buildMode}};C33.isDebug=!1,C33.Ke=!1,C33.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Ze={}}{let C33=self.We;C33.Qe=class QueryParser{constructor(t){this.ti=t,this.ei=new Map,this.ii()}ii(){let t=this.ti;var e;for(e of(t=t.startsWith("?")||t.startsWith("#")?t.substr(1):t).split("&"))this.si(e)}si(t){var e,i;t&&(t.includes("=")?(i=t.indexOf("="),e=decodeURIComponent(t.substring(0,i)),i=decodeURIComponent(t.substring(i+1)),this.ei.set(e,i)):this.ei.set(t,null))}ri(){for(var t of this.ei)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}hi(t){return this.ei.has(t)}ni(t){t=this.ei.get(t);return void 0===t?null:t}ai(){history.replaceState("",document.title,location.pathname+location.search)}oi(t){this.ti=t,this.ei.clear(),this.ii()}},C33.li=new C33.Qe(location.search),C33.ci=new C33.Qe(location.hash),C33.li.hi("perf")&&(C33.fi=!0),"dev"!==C33.li.ni("mode")&&C33.Ye("final")}{let GetWindowsNTVersionName2=function(t){var e=parseFloat(t),i=windowsNTVerMap.get(e);return i||(13<=e?"11":"NT "+t)},C33=(GetWindowsNTVersionName=GetWindowsNTVersionName2,self.We),UNKNOWN="(unknown)",windowsNTVerMap=(C33.di={Ci:UNKNOWN,mi:UNKNOWN,vi:UNKNOWN,Si:UNKNOWN,gi:NaN,Ti:UNKNOWN,_i:"browser",Ei:!0,yi:!1,Ai:!1,Ii:!1,Ri:async()=>{}},new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]])),uaStr=navigator.userAgent,uaData=navigator.userAgentData;if(uaData&&0<uaData.brands.length){let ReadBrandList2=function(t){let e="",i="",s="",r="";for(var h of t){var n=RECOGNIZED_BROWSERS.get(h.brand),n=(!e&&n&&(e=n,i=h.version),RECOGNIZED_ENGINES.get(h.brand));!s&&n&&(s=n,r=h.version)}e||"Chromium"!==s||(C33.di.vi="Chromium",C33.di.Si=r),C33.di.vi=e||UNKNOWN,C33.di.Si=i||UNKNOWN,C33.di.Ti=s||UNKNOWN},RECOGNIZED_BROWSERS=(ReadBrandList=ReadBrandList2,C33.di.Ci=uaData.platform,C33.di.yi=uaData.mobile,C33.di.Ei=!C33.di.yi,new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]])),RECOGNIZED_ENGINES=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]),didGetDetailedInfo=(ReadBrandList2(uaData.brands),!1);C33.di.Ri=async()=>{if(!didGetDetailedInfo)try{var t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);ReadBrandList2(t.fullVersionList),"Windows"===C33.di.Ci?C33.di.mi=GetWindowsNTVersionName2(t.platformVersion):C33.di.mi=t.platformVersion,didGetDetailedInfo=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let RunTest2=function(t,e){var i;for(i of Array.isArray(t)?t:[t]){var s=i.exec(uaStr);if(s){e(s);break}}},hasChrome=(RunTest=RunTest2,RunTest2(/windows\s+nt\s+([\d\.]+)/i,t=>{C33.di.Ci="Windows";t=t[1];C33.di.mi=GetWindowsNTVersionName2(t)}),RunTest2(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{C33.di.Ci="macOS",C33.di.mi=t[1].replace(/_/g,".")}),RunTest2(/CrOS/,()=>{C33.di.Ci="Chrome OS"}),RunTest2(/linux|openbsd|freebsd|netbsd/i,()=>{C33.di.Ci="Linux"}),RunTest2(/android/i,()=>{C33.di.Ci="Android"}),RunTest2(/android\s+([\d\.]+)/i,t=>{C33.di.Ci="Android",C33.di.mi=t[1]}),C33.di.Ci===UNKNOWN&&(RunTest2(/(iphone|ipod|ipad)/i,t=>{C33.di.Ci="iOS"}),RunTest2([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{C33.di.Ci="iOS",C33.di.mi=t[1].replace(/_/g,".")})),/chrome\//i.test(uaStr)),hasChromium=/chromium\//i.test(uaStr),hasEdge=/edg\//i.test(uaStr),hasOpera=/OPR\//.test(uaStr),hasNWjs=/nwjs/i.test(uaStr),hasSafari=/safari\//i.test(uaStr),hasWebKit=/webkit/i.test(uaStr),desktopOSs=(hasEdge||hasOpera||RunTest2(/chrome\/([\d\.]+)/i,t=>{C33.di.vi="Chrome",C33.di.Si=t[1],C33.di.Ti="Chromium"}),RunTest2(/edg\/([\d\.]+)/i,t=>{C33.di.vi="Edge",C33.di.Si=t[1],C33.di.Ti="Chromium"}),RunTest2(/OPR\/([\d\.]+)/,t=>{C33.di.vi="Opera",C33.di.Si=t[1],C33.di.Ti="Chromium"}),RunTest2(/chromium\/([\d\.]+)/i,t=>{C33.di.vi="Chromium",C33.di.Si=t[1],C33.di.Ti="Chromium"}),RunTest2(/nwjs\/[0-9.]+/i,t=>{C33.di.vi="NW.js",C33.di.Si=t[1],C33.di.Ti="Chromium",C33.di._i="nwjs"}),RunTest2(/firefox\/([\d\.]+)/i,t=>{C33.di.vi="Firefox",C33.di.Si=t[1],C33.di.Ti="Gecko"}),!hasSafari||hasChrome||hasChromium||hasEdge||hasOpera||hasNWjs||(C33.di.vi="Safari",C33.di.Ti="WebKit",RunTest2(/version\/([\d\.]+)/i,t=>{C33.di.Si=t[1]}),RunTest2(/crios\/([\d\.]+)/i,t=>{C33.di.vi="Chrome for iOS",C33.di.Si=t[1]}),RunTest2(/fxios\/([\d\.]+)/i,t=>{C33.di.vi="Firefox for iOS",C33.di.Si=t[1]}),RunTest2(/edgios\/([\d\.]+)/i,t=>{C33.di.vi="Edge for iOS",C33.di.Si=t[1]})),C33.di.Ti===UNKNOWN&&hasWebKit&&(C33.di.Ti="WebKit"),"Android"===C33.di.Ci&&"Safari"===C33.di.vi&&(C33.di.vi="Stock"),new Set(["Windows","macOS","Linux","Chrome OS"])),isDesktop=desktopOSs.has(C33.di.Ci)||"nwjs"===C33.di._i;C33.di.Ei=isDesktop,C33.di.yi=!isDesktop}"Chrome"===C33.di.vi&&"browser"===C33.di._i&&/wv\)/.test(uaStr)&&(C33.di._i="webview"),"nwjs"!==C33.di._i&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(C33.di._i="webapp"),C33.di.gi=parseFloat(C33.di.Si);let looksLikeIPadOS="macOS"===C33.di.Ci&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints;looksLikeIPadOS&&(C33.di.Ci="iOS",C33.di.mi=C33.di.Si,C33.di.Ei=!1,C33.di.yi=!0,C33.di.Ii=!0),C33.di.Ai="macOS"===C33.di.Ci||"iOS"===C33.di.Ci}{let asyncifyRequest2=function(i){return new Promise((t,e)=>{i.onsuccess=()=>t(i.result),i.onerror=()=>e(i.error)})},asyncifyTransaction2=function(i){return new Promise((t,e)=>{i.oncomplete=()=>t(),i.onerror=()=>e(i.error),i.onabort=()=>e(i.error)})},openReadOnlyTransaction2=function(t,e){return openTransaction(t,e)},openWriteTransaction2=function(t,e){return openTransaction(t,e,!0)},lazyOpenDatabase2=function(e){RequireString2(e);let t=DATABASE_PROMISE_MAP.get(e);return t instanceof Promise||(t=openDatabase(e),DATABASE_PROMISE_MAP.set(e,t),t.catch(t=>DATABASE_PROMISE_MAP.delete(e))),t},RequireString2=function(t){if("string"!=typeof t)throw new TypeError("expected string")},getEntriesFromCursor2=function(t,r){let e=t.objectStore(STORE_NAME).openCursor();return new Promise(i=>{let s=[];e.onsuccess=t=>{var e=t.target.result;if(e){switch(r){case"entries":s.push([e.key,e.value]);break;case"keys":s.push(e.key);break;case"values":s.push(e.value)}e.continue()}else i(s)}})},VERSION=(asyncifyRequest=asyncifyRequest2,asyncifyTransaction=asyncifyTransaction2,openReadOnlyTransaction=openReadOnlyTransaction2,openWriteTransaction=openWriteTransaction2,lazyOpenDatabase=lazyOpenDatabase2,RequireString=RequireString2,getEntriesFromCursor=getEntriesFromCursor2,2),STORE_NAME="keyvaluepairs",DATABASE_PROMISE_MAP=new Map,SUPPORTS_GETALL="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,SUPPORTS_GETALLKEYS="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function openTransaction(e,i,s=!1,r=!0){var t=await lazyOpenDatabase2(e);try{return i(t.transaction([STORE_NAME],s?"readwrite":"readonly"))}catch(t){if(r&&"InvalidStateError"===t.name)return DATABASE_PROMISE_MAP.delete(e),openTransaction(e,i,s,!1);throw t}}async function openDatabase(e){RequireString2(e);var t=indexedDB.open(e,VERSION);return t.addEventListener("upgradeneeded",t=>{try{t.target.result.createObjectStore(STORE_NAME)}catch(t){console.error("Failed to create objectstore for database "+e,t)}}),asyncifyRequest2(t)}class KVStorageContainer{constructor(t){RequireString2(t),this.name=t}async ready(){await lazyOpenDatabase2(this.name)}set(i,s){return RequireString2(i),openWriteTransaction2(this.name,async t=>{var e=t.objectStore(STORE_NAME).put(s,i),e=asyncifyRequest2(e),t=asyncifyTransaction2(t);await Promise.all([t,e])})}get(i){return RequireString2(i),openReadOnlyTransaction2(this.name,async t=>{var e=t.objectStore(STORE_NAME).get(i),e=asyncifyRequest2(e),t=asyncifyTransaction2(t),[,t]=await Promise.all([t,e]);return t})}delete(i){return RequireString2(i),openWriteTransaction2(this.name,async t=>{var e=t.objectStore(STORE_NAME).delete(i),e=asyncifyRequest2(e),t=asyncifyTransaction2(t);await Promise.all([t,e])})}clear(){return openWriteTransaction2(this.name,async t=>{var e=t.objectStore(STORE_NAME).clear(),e=asyncifyRequest2(e),t=asyncifyTransaction2(t);await Promise.all([t,e])})}keys(){return openReadOnlyTransaction2(this.name,async t=>{let e;e=SUPPORTS_GETALLKEYS?(i=t.objectStore(STORE_NAME).getAllKeys(),asyncifyRequest2(i)):getEntriesFromCursor2(t,"keys");var i=asyncifyTransaction2(t),[,t]=await Promise.all([i,e]);return t})}values(){return openReadOnlyTransaction2(this.name,async t=>{let e;e=SUPPORTS_GETALL?(i=t.objectStore(STORE_NAME).getAll(),asyncifyRequest2(i)):getEntriesFromCursor2(t,"values");var i=asyncifyTransaction2(t),[,t]=await Promise.all([i,e]);return t})}entries(){return openReadOnlyTransaction2(this.name,async t=>{var e=getEntriesFromCursor2(t,"entries"),t=asyncifyTransaction2(t),[,t]=await Promise.all([t,e]);return t})}}self.Mi=KVStorageContainer}{let NOT_IMPLEMENTED2=function(t){throw new Error(`"${t}" is not implemented`)},DISALLOW_CALLBACK2=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},StructuredClone2=function(s){return"object"==typeof s?new Promise(e=>{var{port1:t,port2:i}=new MessageChannel;i.onmessage=t=>e(t.data),t.postMessage(s)}):Promise.resolve(s)},KVStorageContainer=(NOT_IMPLEMENTED=NOT_IMPLEMENTED2,DISALLOW_CALLBACK=DISALLOW_CALLBACK2,StructuredClone=StructuredClone2,self.Mi),CRITICAL_ERRORS=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i],memoryStorage=new WeakMap,isInMemory=!1;"undefined"==typeof indexedDB&&(isInMemory=!0,console.warn("Unable to use local storage because indexedDB is not defined"));class ForageAdaptor{constructor(t){this.wi=t,memoryStorage.set(this,new Map)}bi(t){if(!isInMemory)for(var e of CRITICAL_ERRORS)if(t&&e.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),isInMemory=!0;break}}async Oi(t){t=memoryStorage.get(this).get(t),t=await StructuredClone2(t);return void 0===t?null:t}async Gi(t,e){e=await StructuredClone2(e),memoryStorage.get(this).set(t,e)}Pi(t){memoryStorage.get(this).delete(t)}Li(){memoryStorage.get(this).clear()}xi(){return Array.from(memoryStorage.get(this).keys())}Ni(){return isInMemory}async getItem(e,t){if(DISALLOW_CALLBACK2(t),isInMemory)return this.Oi(e);let i;try{i=await this.wi.get(e)}catch(t){return this.bi(t),isInMemory?this.Oi(e):(console.error(`Error reading '${e}' from storage, returning null: `,t),null)}return void 0===i?null:i}async setItem(e,i,t){if(DISALLOW_CALLBACK2(t),void 0===i&&(i=null),isInMemory)await this.Gi(e,i);else try{await this.wi.set(e,i)}catch(t){if(this.bi(t),!isInMemory)throw t;await this.Gi(e,i)}}async removeItem(e,t){if(DISALLOW_CALLBACK2(t),isInMemory)this.Pi(e);else try{await this.wi.delete(e)}catch(t){this.bi(t),isInMemory?this.Pi(e):console.error(`Error removing '${e}' from storage: `,t)}}async clear(t){if(DISALLOW_CALLBACK2(t),isInMemory)this.Li();else try{await this.wi.clear()}catch(t){this.bi(t),isInMemory?this.Li():console.error("Error clearing storage: ",t)}}async keys(t){if(DISALLOW_CALLBACK2(t),isInMemory)return this.xi();let e=[];try{e=await this.wi.keys()}catch(t){if(this.bi(t),isInMemory)return this.xi();console.error("Error getting storage keys: ",t)}return e}ready(t){return DISALLOW_CALLBACK2(t),isInMemory?Promise.resolve(!0):this.wi.ready()}Di(t){if("object"!=typeof t)throw new TypeError("invalid options object");t=t.name;if("string"!=typeof t)throw new TypeError("invalid store name");t=new KVStorageContainer(t);return new ForageAdaptor(t)}length(t){NOT_IMPLEMENTED2("localforage.length()")}key(t,e){NOT_IMPLEMENTED2("localforage.key()")}iterate(t,e){NOT_IMPLEMENTED2("localforage.iterate()")}Fi(t){NOT_IMPLEMENTED2("localforage.setDriver()")}config(t){NOT_IMPLEMENTED2("localforage.config()")}Bi(t){NOT_IMPLEMENTED2("localforage.defineDriver()")}$i(){NOT_IMPLEMENTED2("localforage.driver()")}supports(t){NOT_IMPLEMENTED2("localforage.supports()")}dropInstance(){NOT_IMPLEMENTED2("localforage.dropInstance()")}ki(){isInMemory=!1}}self.localforage=new ForageAdaptor(new KVStorageContainer("localforage"))}{let C33=self.We;if(C33.Wi={},C33.Wi.Vi=(()=>{try{var t;return"undefined"==typeof document?!1:void 0!==(t=document.createElement("div")).animate&&void 0!==t.animate([{opacity:"0"},{opacity:"1"}],1e3).reverse}catch(t){return!1}})(),C33.Wi.Hi="undefined"!=typeof HTMLDialogElement,C33.Wi.Ui=!!self.requestIdleCallback,C33.Wi.ImageBitmap=!!self.createImageBitmap,C33.Wi.ImageBitmapOptions=!1,C33.Wi.ji=!1,C33.Wi.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{C33.Wi.ImageBitmapOptions=!0}).catch(()=>{C33.Wi.ImageBitmapOptions=!1})}catch(err){C33.Wi.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{C33.Wi.ji=10===t.width&&10===t.height}).catch(()=>{C33.Wi.ji=!1})}catch(err){C33.Wi.ji=!1}}if(C33.Wi.Xi=!(!navigator.clipboard||!navigator.clipboard.readText),C33.Wi.Yi=!(!navigator.permissions||!navigator.permissions.query),C33.Wi.Ji=!1,C33.Wi.Yi){let permission={name:"clipboard-read"};navigator.permissions.query(permission).then(()=>{C33.Wi.Ji=!0}).catch(()=>{C33.Wi.Ji=!1})}C33.Wi.Ki=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),C33.Wi.Zi="undefined"!=typeof Proxy,C33.Wi.Qi="undefined"!=typeof document&&void 0!==document.createElement("a").download,C33.Wi.ts="function"==typeof fetch,C33.Wi.es=!!(self.isSecureContext&&"Opera"!==C33.di.vi&&navigator.storage&&navigator.storage.persist),C33.Wi.ss=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),C33.Wi.rs=(()=>{var t;return"undefined"!=typeof document&&"iOS"!==C33.di.Ci&&!!((t=document.documentElement).requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),C33.Wi.ImageDecoder=void 0!==self.ImageDecoder,C33.Wi.hs=!!self.VideoEncoder,C33.Wi.ns=!!self.showOpenFilePicker,C33.Wi.os=!!self.queryLocalFonts,C33.Wi.UserActivation=!!navigator.userActivation,C33.Wi.ls=!1,(async()=>{let e;"undefined"==typeof document?e=new OffscreenCanvas(32,32):((e=document.createElement("canvas")).width=32,e.height=32);var t=e.getContext("2d");t.fillStyle="blue",t.fillRect(0,0,32,32);let i=null;try{e.convertToBlob?i=await e.convertToBlob({type:"image/webp",quality:1}):e.toBlob&&(i=await new Promise(t=>e.toBlob(t,"image/webp",1))),C33.Wi.ls=i&&"image/webp"===i.type}catch(t){C33.Wi.ls=!1}})()}{let C33=self.We;if(!String.prototype.trimStart){let startWhitespace=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(startWhitespace,"")}}if(!String.prototype.trimEnd){let endWhitespace=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(endWhitespace,"")}}if(String.prototype.replaceAll||(String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(C33.us(t),"g"),e)}),Array.prototype.values||(Array.prototype.values=function*(){for(var t of this)yield t}),!Array.prototype.flat){let arrayFlat2=function(t,i){return t.reduce((t,e)=>(0<i&&Array.isArray(e)?Array.prototype.push.apply(t,arrayFlat2(e,i-1)):t.push(e),t),[])};arrayFlat=arrayFlat2,Array.prototype.flat=function(t=1){return arrayFlat2(this,t)}}Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.cs||(Set.prototype.cs=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(var e of this)if(!t.has(e))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((i,t)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((t,e)=>i({usage:t,quota:e}),t))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let assertFail2=function(t){var e=C33.ds();console.error("Assertion failure: "+t+"\n\nStack trace:\n"+e)},C33=(assertFail=assertFail2,self.We);self.assert=function(t,e){t||assertFail2(e)}}{let C33=self.We,C3X=self.Ze,TypedArray=(C33.Cs=function(t){return"number"==typeof t},C33.vs=function(t){return C33.Cs(t)&&isFinite(t)},C33.Ss=function(t){if(!C33.Cs(t))throw new TypeError("expected number")},C33.gs=function(t){C33.Ts(t)},C33._s=function(t,e,i){if(!C33.Cs(t)||isNaN(t)||t<e||i<t)throw new RangeError("number outside of range")},C33.Es=function(...t){for(var e of t);},C33.ys=function(t){if(!C33.vs(t))throw new TypeError("expected finite number")},C33.As=function(t){C33.Ts(t)},C33.Is=function(...t){for(var e of t);},C33.Rs=function(t){return"string"==typeof t},C33.Ms=function(t){if(!C33.Rs(t))throw new TypeError("expected string")},C33.ws=function(t){C33.Ts(t)},C33.bs=function(...t){for(var e of t);},C33.Os=function(t){return"object"==typeof t&&null!==t&&((t=Object.getPrototypeOf(t))?t.constructor===Object:null===t)},C33.Gs=function(t){if(!C33.Os(t))throw new TypeError("expected simple object")},C33.Ps=function(t){if(!C33.Ts(t)&&!C33.Os(t))throw new TypeError("expected simple object")},C33.Ls=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},C33.xs=function(t){if(!C33.Ls(t))throw new TypeError("expected object")},C33.Ns=function(t){C33.Ts(t)},C33.Ds=function(...t){for(var e of t);},C33.Fs=function(t){return C33.Bs(t,Blob)&&"string"==typeof t.name},C33.$s=function(t){if(!C33.Fs(t))throw new TypeError("expected file")},C33.ks=function(t){C33.Ts(t)},C33.Ws=function(t){return Array.isArray(t)},C33.Vs=function(t){if(!C33.Ws(t))throw new TypeError("expected array")},C33.Hs=function(t){C33.Ts(t)},C33.Us=function(...t){for(var e of t);},C33.js=function(t){return!(!C33.Ws(t)||t.length&&!C33.Ws(t[0]))},C33.Xs=function(t){if(!C33.js(t))throw new TypeError("expected 2d array");for(var e of t)if(!C33.Ws(e))throw new TypeError("expected 2d array")},C33.Ys=function(t){C33.Ts(t)},C33.qs=function(t){return"function"==typeof t},C33.zs=function(t,e){if(!C33.qs(t))throw new TypeError("expected function");if(!C33.Ts(e)&&t!==e)throw new TypeError("expected same function reference")},C33.Js=function(t){C33.Ts(t)},C33.Ks=function(...t){for(var e of t);},C33.Zs=function(t,...e){if(!C33.qs(t))throw new TypeError("expected function");if(!e.length)throw new Error("missing comparison functions");for(var i of e)if(!C33.Ts(i)&&t===i)return;throw new TypeError("expected same function reference")},C33.Qs=function(...t){if(!C33.Ts(t))for(var e of t);},C33.tr=function(t,e){return t instanceof e},C33.er=function(t,...e){for(var i of e)if(C33.tr(t,i))return!0;return!1},C33.ir=function(t,e){if(!C33.tr(t,e))throw new TypeError("unexpected type")},C33.rr=function(t,e){C33.Ts(t)},C33.hr=function(t,...e){for(var i of e);},C33.nr=function(t,...e){if(!C33.er(t,...e))throw new TypeError("unexpected type")},C33.lr=function(t,...e){if(!C33.Ts(t)&&!C33.er(t,...e))throw new TypeError("unexpected type")},C33.ur=function(t,e){for(var i of t)if(!C33.tr(i,e))return!1;return!0},C33.cr=function(t){for(var e of t)if(!C33.vs(e))return!1;return!0},C33.dr=function(t,e){for(var i of t);},C33.Cr=function(t,e){if(!C33.Ts(t))for(var i of t);},C33.pr=function(t,e){if(!C33.Ts(t))for(var i of t);},C33.mr=function(t){for(var e of t);},C33.vr=function(t){if(!C33.Ts(t))for(var e of t);},C33.Sr=function(t,e){return!(C33.Ts(t)||!C33.Rs(t.nodeName))&&(!e||C33.gr(t.nodeName,e))},C33.Tr=function(t,e){if(C33.Ts(t)||!C33.Rs(t.nodeName))throw new TypeError("expected DOM node");if(e&&!C33.gr(t.nodeName,e))throw new TypeError(`expected DOM '${e}' node`)},C33._r=function(t,e){C33.Ts(t)},C33.Er=function(t,e){return!(C33.Ts(t)||!C33.Rs(t.tagName))&&(!e||C33.gr(t.tagName,e))},C33.yr=function(t,e){if(C33.Ts(t)||!C33.Rs(t.tagName))throw new TypeError("expected HTML element");if(e&&!C33.gr(t.tagName,e))throw new TypeError(`expected HTML '${e}' element`)},C33.Ar=function(t,e){C33.Ts(t)},C33.Ir=function(t){return C33.Er(t,"img")||C33.Er(t,"canvas")||C33.Er(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},C33.Rr=function(t){if(!C33.Ir(t))throw new TypeError("expected drawable")},C33.Mr=function(t){C33.Ts(t)},C33.br=function(t){return t instanceof ImageData||C33.Ir(t)},C33.Or=function(t){if(!C33.br(t))throw new TypeError("expected drawable or image data")},C33.Gr=function(t){if(!C33.Ts(t)&&!C33.br(t))throw new TypeError("expected drawable or image data")},C33.Pr=function(t){return"string"==typeof t||C33.HtmlString&&t instanceof C33.HtmlString||t instanceof C33.Lr},C33.Nr=function(t){if(!C33.Pr(t))throw new TypeError("expected string-like")},C33.Dr=function(t){C33.Ts(t)},C33.Fr=function(...t){for(var e of t);},C33.Br=function(){throw new Error("must be overridden")},C33.$r=function(){throw new Error("not yet implemented")},C33.kr=function(t,...e){let i=t;if(void 0===i)return!1;for(var s of e){if(void 0===i[s])return!1;i=i[s]}return!0},C33.Ts=function(t){return null==t},C33.Wr=function(t){var e,i=t[0].constructor;for(e of t)if(e.constructor!==i)return!1;return i},C33.Vr=function(t,e){for(var i of t)if(!(i instanceof e))return!1;return!0},Object.getPrototypeOf(Uint8Array));C33.Hr=function(t){return C33.tr(t,TypedArray)},C33.Ur=function(t){},C33.jr=function(t){C33.Xr(t,TypedArray)},C33.Yr=function(t,...e){if(!C33.qr(t,...e))throw new TypeError("unexpected type")},C33.qr=function(t,...e){for(var i of e)if(C33.Bs(t,i))return!0;return!1},C33.Xr=function(t,e){if(!C33.Bs(t,e))throw new TypeError("unexpected type")},C33.Bs=function(t,e){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===e.name)return!0;return!1},C3X.Ss=C33.Ss,C3X.gs=C33.gs,C3X.ys=C33.ys,C3X.As=C33.As,C3X.Ms=C33.Ms,C3X.ws=C33.ws,C3X.xs=C33.xs,C3X.Ns=C33.Ns,C3X.Vs=C33.Vs,C3X.Hs=C33.Hs,C3X.zs=C33.zs,C3X.Js=C33.Js,C3X.ir=C33.ir,C3X.rr=C33.rr,C3X.Ts=C33.Ts}{let isValidTypeChange2=function(t,e){t=C33.getType(t),e=C33.getType(e);return"null"===t||"null"===e||"undefined"!==t&&"undefined"!==e&&t===e},logDefendedObjectWarning2=function(t){console.warn("[Defence] "+t+" @",C33.ds())},CheckDefendedObjectsUsedCorrectly2=function(){var t;checkRafId=-1,(0<ctorObjectToProxy.size||0<ctorProxyToObject.size)&&(t=[...new Set([...ctorObjectToProxy.keys()].map(t=>C33.zr(t)))].join(","),console.warn("An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: "+t),ctorObjectToProxy.clear(),ctorProxyToObject.clear())},getObjectPropertySet2=function(t){var e,i=new Set;for(e in t)i.add(e);return i},VerifyObjectPropertiesConsistent2=function(t,e){var i=getObjectPropertySet2(e),e=typeProperties.get(t);if(e){var s,r=[];for(s of e.values())i.has(s)?i.delete(s):r.push(s);C33.Jr(r,[...i]),r.length&&console.warn(`[Defence] '${C33.zr(t)}' constructor creates inconsistent properties: `+r.join(", "))}else typeProperties.set(t,i)},C33=(isValidTypeChange=isValidTypeChange2,logDefendedObjectWarning=logDefendedObjectWarning2,CheckDefendedObjectsUsedCorrectly=CheckDefendedObjectsUsedCorrectly2,getObjectPropertySet=getObjectPropertySet2,VerifyObjectPropertiesConsistent=VerifyObjectPropertiesConsistent2,self.We),logRafIds=new Map;C33.Kr=function(t,e){console.log("%c"+t,"font-weight: bold; color:"+e)},C33.Zr=function(t,...e){logRafIds.has(t)||logRafIds.set(t,-1),-1===logRafIds.get(t)&&logRafIds.set(t,requestAnimationFrame(()=>{console.log("%c"+t,"font-weight: bold",...e),logRafIds.set(t,-1)}))};let measures,ctorObjectToProxy=(C33.Qr=function(t){performance.mark(t),(measures=measures||new Map).has(t)||measures.set(t,{current:0,total:0,th:0,eh:1,toString:function(){return`${t} :: current => ${this.current.toPrecision(3)} :: average => ${this.th.toPrecision(3)} :: calls => `+this.eh}})},C33.ih=function(t){performance.measure("measure-"+t,t);var e=performance.getEntriesByName("measure-"+t)[0],i=measures.get(t);i.current=e.duration,i.total+=i.current,i.th=i.total/i.eh,console.log(i.toString()),i.eh++,performance.clearMarks(t),performance.clearMeasures("measure-"+t)},C33.ds=function(){return(new Error).stack},C33.rh=function(){debugger},C33.cast=function(t,e){return t&&t instanceof e?t:null},C33.zr=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":C33.Cs(t)?"<number>":C33.Rs(t)?"<string>":C33.Ws(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":C33.qs(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},C33.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},C33.range=function*(e,i){if(!isFinite(Math.abs(e-i)))throw new Error("Invalid parameters");if(i<e)for(let t=e-1;t>=i;t--)yield t;else for(let t=e;t<i;t++)yield t},new Map),ctorProxyToObject=new Map,proxyToObject=new WeakMap,releasedObjects=new WeakMap,VALID_GET_MISSING_KEYS=(C33.hh={},new Set(["then","splice"])),checkRafId=(C33.hh.get=function(t,e){return e in t||"symbol"==typeof e||VALID_GET_MISSING_KEYS.has(e)||logDefendedObjectWarning2(`Accessed missing property '${e}' from defended object '${C33.zr(t)}', returning undefined`),releasedObjects.has(t)&&"symbol"!=typeof e&&!VALID_GET_MISSING_KEYS.has(e)&&logDefendedObjectWarning2(`Accessed property '${e}' on a released object '${C33.zr(t)}'
Object was originally released at: ${releasedObjects.get(t)})
Call stack at access: `),t[e]},C33.hh.set=function(t,e,i){return e in t||ctorObjectToProxy.has(t)||logDefendedObjectWarning2(`Set non-existent property '${e}' to '${i}' on defended object '${C33.zr(t)}'`),isValidTypeChange2(t[e],i)||ctorObjectToProxy.has(t)||logDefendedObjectWarning2(`Set '${C33.getType(t[e])}' property '${e}' to type '${C33.getType(i)}' on defended object '${C33.zr(t)}'`),releasedObjects.has(t)&&logDefendedObjectWarning2(`Set property '${e}' on a released object '${C33.zr(t)}'
Object was originally released at: ${releasedObjects.get(t)})
Call stack at access: `),t[e]=i,!0},C33.hh.deleteProperty=function(t,e){throw new ReferenceError(`Cannot delete property '${e}' from defended object '${C33.zr(t)}'`)},C33.hh.defineProperty=function(t,e,i){throw new ReferenceError(`Cannot define property '${e}' on defended object '${C33.zr(t)}'`)},C33.hh.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${C33.zr(t)}'`)},-1),typeProperties=(C33.nh=class DefendedBase{constructor(){var t,e;if(C33.Ke&&C33.Wi.Zi)return t=Object.create(new.target.prototype),e=new Proxy(t,C33.hh),ctorObjectToProxy.set(t,e),ctorProxyToObject.set(e,t),proxyToObject.set(e,t),-1===checkRafId&&(checkRafId=requestAnimationFrame(CheckDefendedObjectsUsedCorrectly2)),e}},C33.ah=function(t){var e;return C33.Ke&&C33.Wi.Zi&&t instanceof C33.nh?(ctorProxyToObject.has(t)&&(e=ctorProxyToObject.get(t),ctorProxyToObject.delete(t),ctorObjectToProxy.delete(e)),t):C33.isDebug?Object.seal(t):t},C33.oh=function(t,...e){let i;try{i=new t(...e)}catch(t){throw ctorProxyToObject.clear(),ctorObjectToProxy.clear(),t}return C33.Ke&&VerifyObjectPropertiesConsistent2(t,i),C33.ah(i)},C33.lh=function(t){t=proxyToObject.get(t);t&&releasedObjects.set(t,C33.ds())},C33.uh=function(t){t=proxyToObject.get(t);return!!t&&!!releasedObjects.get(t)},new Map);C33.fh=class PerfMark{constructor(t){this.dh="",t&&this.start(t)}start(t){C33.fi&&(this.dh=t,performance.mark(this.dh+"-Start"))}end(){C33.fi&&(performance.mark(this.dh+"-End"),performance.measure(this.dh,this.dh+"-Start",this.dh+"-End"))}next(t){C33.fi&&(this.end(),this.dh=t,performance.mark(this.dh+"-Start"))}}}{let isNegativeZero2=function(t){return 0===t&&1/t<0},C33=(isNegativeZero=isNegativeZero2,self.We),TWO_PI=2*Math.PI,D_TO_R=Math.PI/180,R_TO_D=180/Math.PI,ALPHAEX_SHIFT=(C33.wrap=function(t,e,i){t=Math.floor(t),e=Math.floor(e);var s,r=(i=Math.floor(i))-e;return 0==r?i:t<e?(s=i-(e-t)%r)===i?0:s:e+(t-e)%r},C33.Ch=function(t,e,i,s,r){i-=e;return 0==i&&0===s?t:(t-e)*(r-s)/i+s},C33.normalize=function(t,e,i){return e-i==0?1:(t-e)/(i-e)},C33.ph=function(t,e,i){return t<e?e:i<t?i:t},C33.mh=function(t){return(t%=TWO_PI)<0&&(t+=TWO_PI),t},C33.Sh=function(t){return t*D_TO_R},C33.gh=function(t){return t*R_TO_D},C33.Th=function(t,e,i,s){return Math.hypot(i-t,s-e)},C33._h=function(t,e,i,s){i-=t,t=s-e;return i*i+t*t},C33.Eh=function(t,e,i,s){return Math.atan2(s-e,i-t)},C33.yh=function(t,e){var i;return t===e||(i=Math.sin(t),t=Math.cos(t),1<=(i=i*Math.sin(e)+t*Math.cos(e)))?0:i<=-1?Math.PI:Math.acos(i)},C33.Ah=function(t,e,i){var s=Math.sin(t),r=Math.cos(t),h=Math.sin(e),n=Math.cos(e);return Math.acos(s*h+r*n)>i?0<r*h-s*n?C33.mh(t+i):C33.mh(t-i):C33.mh(e)},C33.Ih=function(t,e){var i=Math.sin(t);return Math.cos(t)*Math.sin(e)-i*Math.cos(e)<=0},C33.Rh=function(t,e,i,s=0){var r=C33.yh(t,e),s=TWO_PI*s;return C33.Ih(e,t)?C33.mh(t+(r+s)*i):C33.mh(t-(r+s)*i)},C33.Mh=function(t,e,i,s=0){var r=C33.yh(t,e),s=TWO_PI*s;return C33.Ih(e,t)?C33.mh(t+(r+s)*i):C33.mh(t+(TWO_PI-r+s)*i)},C33.wh=function(t,e,i,s=0){var r=C33.yh(t,e),s=TWO_PI*s;return C33.Ih(e,t)?C33.mh(t-(-TWO_PI+r-s)*i):C33.mh(t-(r+s)*i)},C33.bh=function(t,e){var i=C33.yh(t,e);return C33.Ih(t,e)?C33.mh(e-i):C33.mh(e+i)},C33.Dt=function(t,e,i){return t+i*(e-t)},C33.Oh=function(t,e,i){return t===e?0:(i-t)/(e-t)},C33.Gh=function(t,e,i,s,r){return C33.Dt(s,r,C33.Oh(t,e,i))},C33.Ph=function(t,e,i,s){return C33.Dt(C33.Dt(t,e,s),C33.Dt(e,i,s),s)},C33.Lh=function(t,e,i,s,r){return C33.Dt(C33.Ph(t,e,i,r),C33.Ph(e,i,s,r),r)},C33.xh=function(t,e,i){return(t+e+(t-e)*Math.cos(i*Math.PI))/2},C33.Nh=function(t){return 0<t&&0==(t-1&t)},C33.Dh=function(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1},C33.Fh=function(t,e){return Math.round(t*e)/e},C33.Bh=function(t,e){return Math.floor(t*e)/e},C33.$h=function(t,e){e=Math.max(Math.floor(e),0);e=Math.pow(10,e);return Math.round(t*e)/e},C33.kh=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},C33.toFixed=function(t,e){var i=t.toFixed(e);let s=i.length-1;for(;0<=s&&"0"===i.charAt(s);--s);return 0<=s&&"."===i.charAt(s)&&--s,s<0?i:i.substr(0,s+1)},C33.Wh=function(t,e,i){return C33.ph(t,0,255)|C33.ph(e,0,255)<<8|C33.ph(i,0,255)<<16},1024),ALPHAEX_MAX=1023,RGBEX_SHIFT=16384,RGBEX_MAX=8191,RGBEX_MIN=-8192,COMMON_ASPECT_RATIOS=(C33.Vh=function(t,e,i,s){return t=C33.ph(Math.floor(1024*t),RGBEX_MIN,RGBEX_MAX),e=C33.ph(Math.floor(1024*e),RGBEX_MIN,RGBEX_MAX),i=C33.ph(Math.floor(1024*i),RGBEX_MIN,RGBEX_MAX),s=C33.ph(Math.floor(s*ALPHAEX_MAX),0,ALPHAEX_MAX),t<0&&(t+=RGBEX_SHIFT),e<0&&(e+=RGBEX_SHIFT),i<0&&(i+=RGBEX_SHIFT),-(t*RGBEX_SHIFT*RGBEX_SHIFT*ALPHAEX_SHIFT+e*RGBEX_SHIFT*ALPHAEX_SHIFT+i*ALPHAEX_SHIFT+s)},C33.Hh=function(t,e,i){return C33.Vh(t,e,i,1)},C33.Uh=function(e){if(0<=e)return(255&e)/255;{let t=Math.floor(-e/(RGBEX_SHIFT*RGBEX_SHIFT*ALPHAEX_SHIFT));return t>RGBEX_MAX&&(t-=RGBEX_SHIFT),t/1024}},C33.jh=function(e){if(0<=e)return((65280&e)>>8)/255;{let t=Math.floor(-e%(RGBEX_SHIFT*RGBEX_SHIFT*ALPHAEX_SHIFT)/(RGBEX_SHIFT*ALPHAEX_SHIFT));return t>RGBEX_MAX&&(t-=RGBEX_SHIFT),t/1024}},C33.Xh=function(e){if(0<=e)return((16711680&e)>>16)/255;{let t=Math.floor(-e%(RGBEX_SHIFT*ALPHAEX_SHIFT)/ALPHAEX_SHIFT);return t>RGBEX_MAX&&(t-=RGBEX_SHIFT),t/1024}},C33.Yh=function(t){return isNegativeZero2(t)?0:0<=t?1:Math.floor(-t%ALPHAEX_SHIFT)/ALPHAEX_MAX},C33.qh=function(t,e){for(t=Math.floor(t),e=Math.floor(e);0!==e;){var i=e;e=t%e,t=i}return t},[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]]),NO_HIT=(C33.zh=function(t,e){if((t=Math.floor(t))===(e=Math.floor(e)))return[1,1];for(var i of COMMON_ASPECT_RATIOS){var s=t/i[0]*i[1];if(Math.abs(e-s)<1)return i.slice(0);if(s=t/i[1]*i[0],Math.abs(e-s)<1)return[i[1],i[0]]}var r=C33.qh(t,e);return[t/r,e/r]},C33.Jh=function(t,e,i,s,r,h,n,a){var o,l,u,c,f,d=Math.min(t,i),C=Math.max(t,i),p=Math.min(r,n),m=Math.max(r,n);return!(C<p||m<d||(C=Math.min(e,s),p=Math.max(e,s),m=Math.min(h,a),d=Math.max(h,a),p<m)||d<C||(o=r-t+n-i,l=h-e+a-s,u=i-t,c=s-e,p=n-r,m=a-h,f=Math.abs(c*p-m*u),Math.abs(p*l-m*o)>f))&&Math.abs(u*l-c*o)<=f},C33.Kh=function(t,e,i,s,r,h,n,a,o,l,u,c){var f,d,C,p,m,v=Math.min(o,u),S=Math.max(o,u);return!(h<v||S<r||(h=Math.min(l,c),v=Math.max(l,c),a<h)||v<n||(f=o-t+u-i,d=l-e+c-s,C=i-t,p=s-e,S=u-o,r=c-l,m=Math.abs(p*S-r*C),Math.abs(S*d-r*f)>m))&&Math.abs(C*d-p*f)<=m},C33.Zh=function(t,e,i,s,r){var h=Math.min(t,i),n=Math.max(t,i),a=Math.min(e,s),o=Math.max(e,s),l=r.Qh(),u=r.tn(),c=r.sn(),f=r.rn(),d=r.hn(),C=r.nn(),p=r.an(),r=r.ln();return C33.Kh(t,e,i,s,h,n,a,o,l,u,c,f)||C33.Kh(t,e,i,s,h,n,a,o,c,f,d,C)||C33.Kh(t,e,i,s,h,n,a,o,d,C,p,r)||C33.Kh(t,e,i,s,h,n,a,o,p,r,l,u)},C33.un=function(t,e,i,s,r){var h=Math.min(t,i),n=Math.max(t,i),a=Math.min(e,s),o=Math.max(e,s);let l=0;for(var u=r.length-4;l<=u;l+=2)if(C33.Kh(t,e,i,s,h,n,a,o,r[l],r[l+1],r[l+2],r[l+3]))return!0;return C33.Kh(t,e,i,s,h,n,a,o,r[l],r[l+1],r[0],r[1])},2),PADDING=1e-6;C33.cn=function(t,e,i,s,r,h,n,a){var i=i-t,h=a-h,o=i*h-(s-e)*(n-r);return 0!=o&&0<(s=((e-s)*(n-t)+i*(a-e))/o)&&s<1+PADDING?(h*(n-t)+(r-n)*(a-e))/o:NO_HIT},C33.dn=function(t,e,i,s,r,h,n,a,o){var l=(n-r)*o,o=(a-h)*o;return C33.cn(t,e,i,s,r-l,h-o,n+l,a+o)},C33.Cn=function(t,e,i,s,r,h,n,a){r-=i,h-=s,n-=i,a-=s,t-=i,i=e-s,e=r*r+h*h,s=r*n+h*a,r=r*t+h*i,h=n*n+a*a,n=n*t+a*i,t=1/(e*h-s*s),a=(h*r-s*n)*t,i=(e*n-s*r)*t;return 0<=a&&0<=i&&a+i<=1},C33.pn=function(t,e,i,s,r,h,n,a){var r=r-i,h=h-s,n=n-i,a=a-s,t=t-i,i=e-s,e=r*r+h*h,s=r*n+h*a,o=n*n+a*a,r=t*r+i*h,h=t*n+i*a,t=e*o-s*s,n=(o*r-s*h)/t,i=(e*h-s*r)/t;return[1-n-i,n,i]},C33.mn=function(t,e,i,s,r,h,n,a,o,l,u,c){return[t*s+e*n+i*l,t*r+e*a+i*u,t*h+e*o+i*c]}}{let C33=self.We,mainDocument=null,baseHref="";if("undefined"!=typeof document){mainDocument=document;let baseElem=document.querySelector("base");baseHref=baseElem&&baseElem.hasAttribute("href")?baseElem.getAttribute("href"):"",baseHref&&(baseHref.startsWith("/")&&(baseHref=baseHref.substr(1)),baseHref.endsWith("/")||(baseHref+="/"))}C33.vn=function(){return baseHref},C33.Sn=function(){var t;return mainDocument?(t=mainDocument.location,C33.gn(t.origin+t.pathname)+baseHref):""},C33.gn=function(t){var e;return!t.length||t.endsWith("/")||t.endsWith("\\")?t:-1===(e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\")))?"":t.substr(0,e+1)},C33.Tn=function(t){var e;return t.length?t.endsWith("/")||t.endsWith("\\")?"":-1===(e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\")))?t:t.substr(e+1):t},C33._n=function(t){var e=t.lastIndexOf(".");return e<1?"":t.substr(e)},C33.En=function(t,e){var i=t.lastIndexOf(".");return-1===i?t+"."+e:t.substr(0,i+1)+e},C33.yn=function(t){var e=t.lastIndexOf(".");return e<1?t:t.substr(0,e)},C33.An=function(t){return t.replace(/\\/g,"/")},C33.In=function(t,e){return e===(t?C33._n(t).slice(1):"")},C33.Rn=function(t,e){let i,s;return C33.Fs(t)&&(i=C33.yn(t.name)),C33.Rs(t)&&(i=C33.yn(t)),C33.Fs(e)&&(s=C33.yn(e.name)),C33.Rs(e)&&(s=C33.yn(e)),i===s},C33.Mn=function(t){t=C33.An(t);let e=/^\w:\//.exec(t);e?(e=e[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):e="";var i=(t=1<(t=t.replace(/\/{2,}/g,"/")).length&&"/"===t.slice(-1)?t.slice(0,-1):t).lastIndexOf("/")+1;let s="",r=t,h,n="";0<i&&(s=t.slice(0,i),r=t.slice(i));t=(h=r).lastIndexOf("."),0<t&&(n=r.slice(t),h=r.slice(0,-n.length)),i=e+s+r;return{dir:s,wn:r,name:h,root:e,ext:n,bn:i}},C33.On=function(i,s){return new Promise((t,e)=>{self.setTimeout(t,i,s)})},C33.Gn=function(t){try{t()}catch(t){C33.isDebug&&console.warn("Swallowed exception: ",t)}},C33.Pn=function(){},C33.gr=function(t,e){return"string"==typeof t&&"string"==typeof e&&(t===e||t.normalize().toLowerCase()===e.normalize().toLowerCase())},C33.Ln=function(t,e){return"string"==typeof t&&"string"==typeof e&&(t===e||t.normalize()===e.normalize())},C33.xn=function(t,e,i){t[i++]=e[0],t[i++]=e[1],t[i++]=e[2],t[i++]=e[3],t[i++]=e[4],t[i++]=e[5],t[i++]=e[6],t[i++]=e[7],t[i++]=e[8],t[i++]=e[9],t[i++]=e[10],t[i++]=e[11],t[i++]=e[12],t[i++]=e[13],t[i++]=e[14],t[i]=e[15]},C33.Nn=function(t,e){t.length=e},C33.Dn=function(t){t&&0!==t.length&&C33.Nn(t,0)},C33.Fn=function(e){if(e){for(let t=0;t<e.length;t++){var i=e[t];C33.Nn(i,0)}C33.Nn(e,0)}},C33.Bn=function(e,i,s){i|=0;var r=e.length;if(!(i<=r))for(let t=r;t<i;++t)e.push(s)},C33.$n=function(t,e,i){var s=t.length;(e|=0)<s?C33.Nn(t,e):s<e&&C33.Bn(t,e,i)},C33.kn=function(t,e){C33.Dn(t),C33.Jr(t,e)},C33.Jr=function(i,s){if(s.length<1e4)i.push(...s);else for(let t=0,e=s.length;t<e;++t)i.push(s[t])},C33.Wn=function(e,i){if(!((i=Math.floor(i))<0||i>=e.length)){var s=e.length-1;for(let t=i;t<s;++t)e[t]=e[t+1];C33.Nn(e,s)}},C33.Vn=function(t,e){e=t.indexOf(e);0<=e&&t.splice(e,1)},C33.Hn=function(e,i){var s=e.length;if(i.length!==s)return!1;for(let t=0;t<s;++t)if(e[t]!==i[t])return!1;return!0},C33.Un=function(i,s){var r=[];let h=0;for(let t=0,e=i.length;t<e;++t){var n=i[t];s(n)?r.push(n):(i[h]=n,++h)}return C33.Nn(i,h),r},C33.jn=function(i,s){var t=i.length;let r=0;for(let t=0,e=i.length;t<e;++t){var h=i[t];s.has(h)||(i[r++]=h)}return C33.Nn(i,r),t-r},C33.Xn=function(t,e){return t===Math.floor(t)&&0<=t&&t<e.length},C33.Yn=function(t,e){if(!C33.Xn(t,e))throw new RangeError("array index out of bounds")},C33.qn=function(t){return t.slice()},C33.zn=function(t,e){var i,s=[];for(i of t)if(C33.Ls(i)){var r=e(i);if(!r)throw new Error("missing clone");if(r.constructor!==i.constructor)throw new Error("object is not a clone");s.push(r)}else C33.Ws(i)?s.push(C33.zn(i,e)):s.push(i);return s},C33.Jn=function(t){var e,i=[];for(e of t)i.push(e.slice());return i},C33.Kn=function(t,e=" "){return t?t.split(e).map(t=>t.trim()).filter(t=>!!t):[]},C33.Zn=function(t,e,i){var s,r=new Set;for(s of t.values())e(s)&&(i?r.add(i(s)):r.add(s));return r},C33.Qn=function(t,e){return t.union?t.union(e):new Set([...t,...e])},C33.ta=function(t,e){for(var i of e)t.add(i);return t},C33.first=function(t){for(var e of t)return e;return null},C33.xor=function(t,e){return!t!=!e},C33.compare=function(t,e,i){switch(e){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return i<t;case 5:return i<=t;default:return!1}},C33.ea=function(t){for(var e in t)if(t.hasOwnProperty(e))return!0;return!1},C33.ia=function(a,o){return a.length?new Promise((i,s)=>{let r=[],h=0,n=!1;for(let e=0,t=a.length;e<t;++e)r.push(void 0),a[e].then(t=>{n||(r[e]=t,++h===a.length?i(r):o(h,a.length))}).catch(t=>{n=!0,s(t)})}):Promise.resolve([])};let memoryCallbacks=[],nextTaskId=(C33.ra=function(t){memoryCallbacks.push(t)},C33.na=function(){let t=0;for(var e of memoryCallbacks){e=e();t+=e}return Math.floor(t)},1),activeTaskIds=new Map,taskMessageChannel=new MessageChannel,activeRPAFids=(taskMessageChannel.port2.onmessage=function(t){var t=t.data,e=activeTaskIds.get(t);activeTaskIds.delete(t),e&&e(performance.now())},C33.aa=function(t){var e=nextTaskId++;return activeTaskIds.set(e,t),taskMessageChannel.port1.postMessage(e),e},C33.oa=function(t){activeTaskIds.delete(t)},C33.la=C33.aa,C33.ua=function(){return new Promise(t=>C33.la(t))},new Set);C33.ca=function(e){let i=self.requestAnimationFrame(async t=>{await C33.ua(),activeRPAFids.has(i)&&(activeRPAFids.delete(i),e(t))});return activeRPAFids.add(i),i},C33.fa=function(t){activeRPAFids.has(t)&&(self.cancelAnimationFrame(t),activeRPAFids.delete(t))}}{let C33=self.We;C33.da=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},C33.Ca=function(t){return!C33.da(t)},C33.pa=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} `+t.statusText)},C33.ma=function(t,e){return fetch(t,e).then(t=>(C33.pa(t),t))},C33.Sa=function(t){return C33.ma(t).then(t=>t.text())},C33.ga=function(t){return C33.ma(t).then(t=>t.json())},C33.Ta=function(t){return C33.ma(t).then(t=>t.blob())},C33._a=function(t){return C33.ma(t).then(t=>t.arrayBuffer())},C33.Ea=function(s){return new Promise((t,e)=>{let i=new Image;i.onload=()=>t(i),i.onerror=t=>e(t),i.src=s})},C33.ya=function(s){return"function"==typeof s.arrayBuffer?s.arrayBuffer():new Promise((t,e)=>{let i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>e(i.error),i.readAsArrayBuffer(s)})},C33.Aa=function(s){return"function"==typeof s.text?s.text():new Promise((t,e)=>{let i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>e(i.error),i.readAsText(s)})},C33.Ia=function(t){return C33.Aa(t).then(t=>JSON.parse(t))},C33.Ra=async function(t,e){let i=URL.createObjectURL(t);try{var s=await C33.Ea(i);return URL.revokeObjectURL(i),i="",e&&"function"==typeof s.decode&&await s.decode(),s}finally{i&&URL.revokeObjectURL(i)}},C33.Ma=function(t,e){var i;return"undefined"!=typeof document&&"function"==typeof document.createElement?((i=document.createElement("canvas")).width=t,i.height=e,i):new OffscreenCanvas(t,e)},C33.wa=function(e,i,s){if("number"!=typeof s&&(s=1),i=i||"image/png",s=C33.ph(s,0,1),e.convertToBlob)return e.convertToBlob({type:i,quality:s});if(e.toBlob)return new Promise(t=>e.toBlob(t,i,s));throw new Error("could not convert canvas to blob")},C33.ba=function(t,e,i){var s=C33.Ma(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),C33.wa(s,e,i)},C33.Oa=function(t,e,i){var s;return C33.Wi.ImageBitmapOptions?createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>C33.ba(t,e,i)):C33.Wi.ImageBitmap?createImageBitmap(t).then(t=>C33.ba(t,e,i)):((s=C33.Ma(t.width,t.height)).getContext("2d").putImageData(t,0,0),C33.wa(s,e,i))},C33.Ga=function(t,e){t.clear();for(var i of e)t.add(i)},C33.Pa=function(t){var e,i,s=Object.create(null);for([e,i]of t.entries())s[e]=i;return s},C33.La=function(t,e){e.clear();for(var[i,s]of Object.entries(t))e.set(i,s)},C33.xa=function e(t){if("object"!=typeof t||null===t)return t;if(t instanceof Set)return{_c3type_:"set",data:[...t].map(t=>e(t))};if(t instanceof Map)return{_c3type_:"map",data:[...t].map(t=>[t[0],e(t[1])])};var i,s,r=Object.create(null);for([i,s]of Object.entries(t))r[i]=e(s);return r},C33.Na=function e(t){if("object"==typeof t&null!==t){if("set"===t._c3type_)return new Set(t.data.map(t=>e(t)));if("map"===t._c3type_)return new Map(t.data.map(t=>[t[0],e(t[1])]));var i,s,r=Object.create(null);for([i,s]of Object.entries(t))r[i]=e(s);return r}return t},C33.Da=function(t){if(t.startsWith("--"))return t;let e="",i=!1,s=0;for(var r of t)"-"===r?0<s&&(i=!0):i?(e+=r.toUpperCase(),i=!1):e+=r,++s;return e},C33.Fa=function(t){return"object"==typeof t&&"function"==typeof t.next},C33.Ba=function(e,i){var s=[];if("function"==typeof i)for(let t=0;t<e;++t)s.push(i());else for(let t=0;t<e;++t)s.push(i);return s}}{let padTwoDigits2=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},hueToRGB2=function(t,e,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},C33=(padTwoDigits=padTwoDigits2,hueToRGB=hueToRGB2,self.We),HSL_TEST=/([0-9.]+),([0-9.]+)%?,([0-9.]+)%?/i,HSLA_TEST=/([0-9.]+),([0-9.]+)%?,([0-9.]+)%?,([0-9.])/i;C33.$a=class Color{constructor(t,e,i,s){this.ka=NaN,this.Wa=NaN,this.Va=NaN,this.Ha=NaN,this.ka=0,this.Wa=0,this.Va=0,this.Ha=0,t instanceof C33.$a?this.set(t):this.Ua(t||0,e||0,i||0,s||0)}ja(t,e,i){return this.ka=+t,this.Wa=+e,this.Va=+i,this.ph(),this}Ua(t,e,i,s){return this.ka=+t,this.Wa=+e,this.Va=+i,this.Ha=+s,this.ph(),this}set(t){return this.ka=t.ka,this.Wa=t.Wa,this.Va=t.Va,this.Ha=t.Ha,this}_(t){return this.set(t)}add(t){this.ka+=t.ka,this.Wa+=t.Wa,this.Va+=t.Va,this.Ha+=t.Ha,this.ph()}Xa(t,e,i,s=0){this.ka+=+t,this.Wa+=+e,this.Va+=+i,this.Ha+=+s,this.ph()}Ya(t){this.qa(Math.max(this.ka,t.ka)-Math.min(this.ka,t.ka)),this.za(Math.max(this.Wa,t.Wa)-Math.min(this.Wa,t.Wa)),this.Ja(Math.max(this.Va,t.Va)-Math.min(this.Va,t.Va)),this.Ka(Math.max(this.Ha,t.Ha)-Math.min(this.Ha,t.Ha)),this.ph()}Za(t){this.ka=t.ka,this.Wa=t.Wa,this.Va=t.Va}qa(t){this.ka=C33.ph(+t,0,1)}Qa(){return this.ka}za(t){this.Wa=C33.ph(+t,0,1)}eo(){return this.Wa}Ja(t){this.Va=C33.ph(+t,0,1)}io(){return this.Va}Ka(t){this.Ha=C33.ph(+t,0,1)}ro(){return this.Ha}clone(){return C33.oh(C33.$a,this.ka,this.Wa,this.Va,this.Ha)}toArray(){return[this.ka,this.Wa,this.Va,this.Ha]}ho(){return new Float64Array(this.toArray())}no(t,e){t[e++]=this.ka,t[e++]=this.Wa,t[e++]=this.Va,t[e]=this.Ha}ao(t,e){t[e++]=this.ka,t[e++]=this.Wa,t[e]=this.Va}equals(t){return this.ka===t.ka&&this.Wa===t.Wa&&this.Va===t.Va&&this.Ha===t.Ha}lo(t){return this.ka===t.ka&&this.Wa===t.Wa&&this.Va===t.Va}uo(t,e,i){return this.ka===t&&this.Wa===e&&this.Va===i}co(t,e,i,s){return this.ka===t&&this.Wa===e&&this.Va===i&&this.Ha===s}fo(t,e){return t[e]===Math.fround(this.ka)&&t[e+1]===Math.fround(this.Wa)&&t[e+2]===Math.fround(this.Va)&&t[e+3]===Math.fround(this.Ha)}do(t,e){return t[e]===Math.fround(this.ka)&&t[e+1]===Math.fround(this.Wa)&&t[e+2]===Math.fround(this.Va)}multiply(t){this.ka*=t.ka,this.Wa*=t.Wa,this.Va*=t.Va,this.Ha*=t.Ha}Co(t){this.ka*=t,this.Wa*=t,this.Va*=t,this.Ha*=t}po(){return this.ka*=this.Ha,this.Wa*=this.Ha,this.Va*=this.Ha,this}mo(){return this.ka/=this.Ha,this.Wa/=this.Ha,this.Va/=this.Ha,this}ph(){return this.ka=C33.ph(this.ka,0,1),this.Wa=C33.ph(this.Wa,0,1),this.Va=C33.ph(this.Va,0,1),this.Ha=C33.ph(this.Ha,0,1),this}vo(t){this.ka=C33.Uh(t),this.Wa=C33.jh(t),this.Va=C33.Xh(t),this.Ha=C33.Yh(t)}So(t,e,i){return`rgb(${100*(C33.vs(t)?t:this.Qa())}%, ${100*(C33.vs(e)?e:this.eo())}%, ${100*(C33.vs(i)?i:this.io())}%)`}To(t,e,i,s){return`rgba(${100*(C33.vs(t)?t:this.Qa())}%, ${100*(C33.vs(e)?e:this.eo())}%, ${100*(C33.vs(i)?i:this.io())}%, ${C33.vs(s)?s:this.ro()})`}_o(){var t=Math.round(255*this.Qa()),e=Math.round(255*this.eo()),i=Math.round(255*this.io());return"#"+padTwoDigits2(t.toString(16))+padTwoDigits2(e.toString(16))+padTwoDigits2(i.toString(16))}Eo(t){if("string"!=typeof t)return!1;let e,i,s;if(3===(t="#"===(t=t.trim()).charAt(0)?t.substr(1):t).length)e=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,s=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;e=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,s=parseInt(t.substr(4,2),16)/255}return isFinite(e)&&this.qa(e),isFinite(i)&&this.za(i),isFinite(s)&&this.Ja(s),this.Ka(1),!0}yo(){return Math.round(255*this.Qa())+`, ${Math.round(255*this.eo())}, `+Math.round(255*this.io())}Ao(){return[Math.round(255*this.Qa()),Math.round(255*this.eo()),Math.round(255*this.io())]}Io(t){var e,i;return"string"==typeof t&&!((t=(t=t.replace(/^rgb\(|\)|%/,"")).split(",")).length<3||(e=parseInt(t[0].trim(),10)/255,i=parseInt(t[1].trim(),10)/255,t=parseInt(t[2].trim(),10)/255,isFinite(e)&&this.qa(e),isFinite(i)&&this.za(i),isFinite(t)&&this.Ja(t),this.Ka(1),0))}Ro(t){var e,i;return"string"==typeof t&&!((t=(t=t.replace(/^rgb\(|\)|%/,"")).split(",")).length<3||(e=parseInt(t[0].trim(),10)/100,i=parseInt(t[1].trim(),10)/100,t=parseInt(t[2].trim(),10)/100,isFinite(e)&&this.qa(e),isFinite(i)&&this.za(i),isFinite(t)&&this.Ja(t),this.Ka(1),0))}Mo(t){var e,i,s;return"string"==typeof t&&!((t=(t=t.replace(/^rgba\(|\)|%/,"")).split(",")).length<4||(e=parseInt(t[0].trim(),10)/255,i=parseInt(t[1].trim(),10)/255,s=parseInt(t[2].trim(),10)/255,t=parseFloat(t[3].trim()),isFinite(e)&&this.qa(e),isFinite(i)&&this.za(i),isFinite(s)&&this.Ja(s),isFinite(t)&&this.Ka(t),0))}wo(t){var e,i,s;return"string"==typeof t&&!((t=(t=t.replace(/^rgba\(|\)|%/,"")).split(",")).length<4||(e=parseInt(t[0].trim(),10)/100,i=parseInt(t[1].trim(),10)/100,s=parseInt(t[2].trim(),10)/100,t=parseFloat(t[3].trim()),isFinite(e)&&this.qa(e),isFinite(i)&&this.za(i),isFinite(s)&&this.Ja(s),isFinite(t)&&this.Ka(t),0))}bo(t){var e;return"string"==typeof t&&((t=t.replace(/\s+/,"")).includes(",")?t.startsWith("rgb(")?t.includes("%")?this.Ro(t):this.Io(t):t.startsWith("rgba(")?t.includes("%")?this.wo(t):this.Mo(t):t.startsWith("hsl(")||t.startsWith("hsla(")?this.Oo(t):(e=t.split(","),t.includes("%")?3===e.length?this.Ro(t):4===e.length&&this.wo(t):3===e.length?this.Io(t):4===e.length&&this.Mo(t)):this.Eo(t))}toJSON(){return[this.ka,this.Wa,this.Va,this.Ha]}Go(t,e,i,s){let r,h,n;return t%=360,e=C33.ph(e,0,100),i=C33.ph(i,0,100),s=C33.ph(s,0,1),t/=360,i/=100,0===(e/=100)?r=h=n=i:(e=2*i-(i=i<.5?i*(1+e):i+e-i*e),r=hueToRGB2(e,i,t+1/3),h=hueToRGB2(e,i,t),n=hueToRGB2(e,i,t-1/3)),this.qa(r),this.za(h),this.Ja(n),this.Ka(s),this}Oo(t){var t=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),e=HSL_TEST.exec(t),t=HSLA_TEST.exec(t);return e&&4===e.length?(this.Go(+e[1],+e[2],+e[3],1),!0):!(!t||5!==t.length||(this.Go(+e[1],+e[2],+e[3],+e[4]),0))}Po(){var t=this.ka,e=this.Wa,i=this.Va,s=this.Ha;return`hsla(${C33.$a.Lo(t,e,i)}, ${C33.$a.xo(t,e,i)}%, ${C33.$a.No(t,e,i)}%, ${s})`}Do(){var t=this.ka,e=this.Wa,i=this.Va;return[C33.$a.Lo(t,e,i),C33.$a.xo(t,e,i),C33.$a.No(t,e,i),this.Ha]}Fo(t){!Array.isArray(t)||t.length<3||(this.ka=t[0],this.Wa=t[1],this.Va=t[2],this.Ha=4<=t.length?t[3]:1)}set r(t){this.qa(t)}get r(){return this.Qa()}set Bo(t){this.za(t)}get Bo(){return this.eo()}set b(t){this.Ja(t)}get b(){return this.io()}set a(t){this.Ka(t)}get a(){return this.ro()}$o(t,e){switch(t){case 0:this.qa(e);break;case 1:this.za(e);break;case 2:this.Ja(e);break;case 3:this.Ka(e);break;default:throw new RangeError("invalid color index")}}ko(t){switch(t){case 0:return this.Qa();case 1:return this.eo();case 2:return this.io();case 3:return this.ro();default:throw new RangeError("invalid color index")}}static Wo(t,e){let i,s;if(Array.isArray(t))(i=new C33.$a).Fo(t);else{if(!(t instanceof C33.$a))throw new Error("unexpected type");i=t}if(Array.isArray(e))(s=new C33.$a).Fo(e);else{if(!(e instanceof C33.$a))throw new Error("unexpected type");s=e}return i.equals(s)}static Vo(t,e){return C33.ph(Math.max(t,e)-Math.min(t,e),0,1)}static Ho(t,e){var i=new C33.$a;return i.qa(Math.max(t.ka,e.ka)-Math.min(t.ka,e.ka)),i.za(Math.max(t.Wa,e.Wa)-Math.min(t.Wa,e.Wa)),i.Ja(Math.max(t.Va,e.Va)-Math.min(t.Va,e.Va)),i.Ka(Math.max(t.Ha,e.Ha)-Math.min(t.Ha,e.Ha)),i}static Uo(t,e){var i=new C33.$a(0,0,0,1);return i.qa(Math.max(t.ka,e.ka)-Math.min(t.ka,e.ka)),i.za(Math.max(t.Wa,e.Wa)-Math.min(t.Wa,e.Wa)),i.Ja(Math.max(t.Va,e.Va)-Math.min(t.Va,e.Va)),i}static Lo(t,e,i){var s=Math.max(t,e,i),r=Math.min(t,e,i);if(s===r)return 0;let h=0;switch(s){case t:h=(e-i)/(s-r)+(e<i?6:0);break;case e:h=(i-t)/(s-r)+2;break;case i:h=(t-e)/(s-r)+4}return Math.round(h/6*360)}static xo(t,e,i){var s=Math.max(t,e,i),t=Math.min(t,e,i);return s===t?0:(e=s-t,Math.round(100*(.5<(s+t)/2?e/(2-s-t):e/(s+t))))}static No(t,e,i){var s=Math.max(t,e,i),t=Math.min(t,e,i);return s?Math.round(100*((s+t)/2)):0}},C33.$a.jo=Object.freeze(C33.oh(C33.$a,1,1,1,1)),C33.$a.Xo=Object.freeze(C33.oh(C33.$a,0,0,0,1)),C33.$a.Yo=Object.freeze(C33.oh(C33.$a,0,0,0,0))}{let C33=self.We;C33.qo=class Vector2{constructor(t,e){this.zo=0,this.Jo=0,t instanceof C33.qo?this._(t):this.set(t||0,e||0)}set(t,e){this.zo=+t,this.Jo=+e}_(t){this.zo=t.zo,this.Jo=t.Jo}equals(t){return this.zo===t.zo&&this.Jo===t.Jo}Ko(t,e){return this.zo===t&&this.Jo===e}fo(t,e){return t[e]===Math.fround(this.zo)&&t[e+1]===Math.fround(this.Jo)}Zo(t){this.zo=+t}Qo(){return this.zo}tl(t){this.Jo=+t}el(){return this.Jo}toArray(){return[this.zo,this.Jo]}ho(){return new Float64Array(this.toArray())}no(t,e){t[e++]=this.zo,t[e]=this.Jo}offset(t,e){this.zo+=+t,this.Jo+=+e}scale(t,e){this.zo*=t,this.Jo*=e}Mt(t,e){this.zo/=t,this.Jo/=e}round(){this.zo=Math.round(this.zo),this.Jo=Math.round(this.Jo)}floor(){this.zo=Math.floor(this.zo),this.Jo=Math.floor(this.Jo)}ceil(){this.zo=Math.ceil(this.zo),this.Jo=Math.ceil(this.Jo)}angle(){return C33.Eh(0,0,this.zo,this.Jo)}il(){return this.zo*this.zo+this.Jo*this.Jo}length(){return Math.hypot(this.zo,this.Jo)}sl(t,e){var i=this.zo*e-this.Jo*t;this.Jo=this.Jo*e+this.zo*t,this.zo=i}rotate(t){0!==t&&this.sl(Math.sin(t),Math.cos(t))}rl(t,e,i){0===t||e===this.zo&&i===this.Jo||(this.zo-=e,this.Jo-=i,this.sl(Math.sin(t),Math.cos(t)),this.zo+=+e,this.Jo+=+i)}move(t,e){0!==e&&(this.zo+=Math.cos(t)*e,this.Jo+=Math.sin(t)*e)}normalize(){var t=this.length();0!==t&&1!==t&&(this.zo/=t,this.Jo/=t)}ph(t,e){this.zo=C33.ph(this.zo,t,e),this.Jo=C33.ph(this.Jo,t,e)}xt(t){return this.zo*t.zo+this.Jo*t.Jo}reverse(){this.zo=-this.zo,this.Jo=-this.Jo}hl(){var t=this.zo;return this.zo=this.Jo,this.Jo=-t,this}}}{let C33=self.We;C33.Rect=class Rect{constructor(t,e,i,s){this.nl=NaN,this.ol=NaN,this.ll=NaN,this.ul=NaN,this.nl=0,this.ol=0,this.ll=0,this.ul=0,t instanceof C33.Rect?this._(t):this.set(t||0,e||0,i||0,s||0)}set(t,e,i,s){this.nl=+t,this.ol=+e,this.ll=+i,this.ul=+s}cl(t,e,i,s){e=+e,this.nl=t=+t,this.ol=e,this.ll=t+ +i,this.ul=e+ +s}_(t){this.nl=+t.nl,this.ol=+t.ol,this.ll=+t.ll,this.ul=+t.ul}clone(){return new C33.Rect(this.nl,this.ol,this.ll,this.ul)}static fl(t,e){var i=new C33.Rect;return i.dl(Math.min(t.nl,e.nl)),i.Cl(Math.min(t.ol,e.ol)),i.pl(Math.max(t.ll,e.ll)),i.ml(Math.max(t.ul,e.ul)),i}static vl(t){return new C33.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.nl===t.nl&&this.ol===t.ol&&this.ll===t.ll&&this.ul===t.ul}Sl(t,e,i,s){return this.nl===t&&this.ol===e&&this.width()===i&&this.height()===s}fo(t,e){return t[e]===Math.fround(this.nl)&&t[e+1]===Math.fround(this.ol)&&t[e+2]===Math.fround(this.ll)&&t[e+3]===Math.fround(this.ul)}dl(t){this.nl=+t}gl(){return this.nl}Cl(t){this.ol=+t}Tl(){return this.ol}pl(t){this.ll=+t}_l(){return this.ll}ml(t){this.ul=+t}El(){return this.ul}toArray(){return[this.nl,this.ol,this.ll,this.ul]}ho(){return new Float64Array(this.toArray())}yl(){return new DOMRect(this.nl,this.ol,this.width(),this.height())}static Al(t){return C33.oh(C33.Rect,t.left,t.top,t.right,t.bottom)}no(t,e){t[e++]=this.nl,t[e++]=this.ol,t[e++]=this.ll,t[e]=this.ul}Il(t,e){t[e++]=this.nl,t[e++]=this.ol,t[e++]=this.ll,t[e++]=this.ol,t[e++]=this.ll,t[e++]=this.ul,t[e++]=this.nl,t[e]=this.ul}Rl(t,e,i){t[e++]=this.nl,t[e++]=this.ol,t[e++]=i,t[e++]=this.ll,t[e++]=this.ol,t[e++]=i,t[e++]=this.ll,t[e++]=this.ul,t[e++]=i,t[e++]=this.nl,t[e++]=this.ul,t[e]=i}width(){return this.ll-this.nl}height(){return this.ul-this.ol}Ml(){return(this.nl+this.ll)/2}wl(){return(this.ol+this.ul)/2}offset(t,e){e=+e,this.nl+=t=+t,this.ol+=e,this.ll+=t,this.ul+=e}offsetLeft(t){this.nl+=+t}offsetTop(t){this.ol+=+t}bl(t){this.ll+=+t}Ol(t){this.ul+=+t}Gl(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.ol<this.ul?this.nl<this.ll?this.ul=this.ol+this.width():this.ul=this.ol-this.width():this.nl<this.ll?this.ul=this.ol-this.width():this.ul=this.ol+this.width()}Pl(t,e){e=+e,this.nl-=t=+t,this.ol-=e,this.ll+=t,this.ul+=e}Ll(t,e){e=+e,this.nl+=t=+t,this.ol+=e,this.ll-=t,this.ul-=e}multiply(t,e){this.nl*=t,this.ol*=e,this.ll*=t,this.ul*=e}Mt(t,e){this.nl/=t,this.ol/=e,this.ll/=t,this.ul/=e}Nl(t){this.nl=+t-this.nl,this.ll=+t-this.ll}Dl(t){this.ol=+t-this.ol,this.ul=+t-this.ul}Fl(t,e){var i=this.width(),s=this.height(),r=this.gl()+i*t,h=this.Tl()+s*e;this.cl(r-s*e,h-i*t,s,i)}Bl(){var t=this.nl;this.nl=this.ll,this.ll=t}$l(){var t=this.ol;this.ol=this.ul,this.ul=t}kl(t){var e=this.ol;this.ol=+t-this.ul,this.ul=+t-e}round(){this.nl=Math.round(this.nl),this.ol=Math.round(this.ol),this.ll=Math.round(this.ll),this.ul=Math.round(this.ul)}Wl(){this.nl=Math.ceil(this.nl),this.ol=Math.ceil(this.ol),this.ll=Math.floor(this.ll),this.ul=Math.floor(this.ul)}Vl(){this.nl=Math.floor(this.nl),this.ol=Math.floor(this.ol),this.ll=Math.ceil(this.ll),this.ul=Math.ceil(this.ul)}floor(){this.nl=Math.floor(this.nl),this.ol=Math.floor(this.ol),this.ll=Math.floor(this.ll),this.ul=Math.floor(this.ul)}ceil(){this.nl=Math.ceil(this.nl),this.ol=Math.ceil(this.ol),this.ll=Math.ceil(this.ll),this.ul=Math.ceil(this.ul)}ph(t,e,i,s){this.nl=Math.max(this.nl,+t),this.ol=Math.max(this.ol,+e),this.ll=Math.min(this.ll,+i),this.ul=Math.min(this.ul,+s)}Hl(t,e,i,s){t=+t,e=+e,i=+i,s=+s,this.nl=C33.ph(this.nl,t,i),this.ol=C33.ph(this.ol,e,s),this.ll=C33.ph(this.ll,t,i),this.ul=C33.ph(this.ul,e,s)}normalize(){this.nl>this.ll&&this.Bl(),this.ol>this.ul&&this.$l()}Ul(t){return!(t.ll<this.nl||t.ul<this.ol||t.nl>this.ll||t.ol>this.ul)}jl(t,e,i){return!(t.ll+e<this.nl||t.ul+i<this.ol||t.nl+e>this.ll||t.ol+i>this.ul)}Xl(t,e){return t>=this.nl&&t<=this.ll&&e>=this.ol&&e<=this.ul}Yl(t){return t.nl>=this.nl&&t.ol>=this.ol&&t.ll<=this.ll&&t.ul<=this.ul}ql(t){t.nl<this.nl&&(this.nl=+t.nl),t.ol<this.ol&&(this.ol=+t.ol),t.ll>this.ll&&(this.ll=+t.ll),t.ul>this.ul&&(this.ul=+t.ul)}zl(t){this.nl=C33.Dt(t.nl,t.ll,this.nl),this.ol=C33.Dt(t.ol,t.ul,this.ol),this.ll=C33.Dt(t.nl,t.ll,this.ll),this.ul=C33.Dt(t.ol,t.ul,this.ul)}}}{let C33=self.We;C33.Jl=class Quad{constructor(t,e,i,s,r,h,n,a){this.Kl=NaN,this.Zl=NaN,this.Ql=NaN,this.tu=NaN,this.eu=NaN,this.iu=NaN,this.su=NaN,this.ru=NaN,this.Kl=0,this.Zl=0,this.Ql=0,this.tu=0,this.eu=0,this.iu=0,this.su=0,this.ru=0,t instanceof C33.Jl?this._(t):this.set(t||0,e||0,i||0,s||0,r||0,h||0,n||0,a||0)}set(t,e,i,s,r,h,n,a){this.Kl=+t,this.Zl=+e,this.Ql=+i,this.tu=+s,this.eu=+r,this.iu=+h,this.su=+n,this.ru=+a}hu(t,e,i,s){this.set(t,e,i,e,i,s,t,s)}_(t){this.Kl=t.Kl,this.Zl=t.Zl,this.Ql=t.Ql,this.tu=t.tu,this.eu=t.eu,this.iu=t.iu,this.su=t.su,this.ru=t.ru}equals(t){return this.Kl===t.Kl&&this.Zl===t.Zl&&this.Ql===t.Ql&&this.tu===t.tu&&this.eu===t.eu&&this.iu===t.iu&&this.su===t.su&&this.ru===t.ru}nu(t){this.Kl=+t}Qh(){return this.Kl}au(t){this.Zl=+t}tn(){return this.Zl}ou(t){this.Ql=+t}sn(){return this.Ql}lu(t){this.tu=+t}rn(){return this.tu}uu(t){this.eu=+t}hn(){return this.eu}cu(t){this.iu=+t}nn(){return this.iu}fu(t){this.su=+t}an(){return this.su}du(t){this.ru=+t}ln(){return this.ru}Cu(){return new DOMQuad(new DOMPoint(this.Kl,this.Zl),new DOMPoint(this.Ql,this.tu),new DOMPoint(this.eu,this.iu),new DOMPoint(this.su,this.ru))}static pu(t){return C33.oh(C33.Jl,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.Kl,this.Zl,this.Ql,this.tu,this.eu,this.iu,this.su,this.ru]}ho(){return new Float64Array(this.toArray())}no(t,e){t[e++]=this.Kl,t[e++]=this.Zl,t[e++]=this.Ql,t[e++]=this.tu,t[e++]=this.eu,t[e++]=this.iu,t[e++]=this.su,t[e]=this.ru}mu(t,e,i){t[e++]=this.Kl,t[e++]=this.Zl,t[e++]=i,t[e++]=this.Ql,t[e++]=this.tu,t[e++]=i,t[e++]=this.eu,t[e++]=this.iu,t[e++]=i,t[e++]=this.su,t[e++]=this.ru,t[e]=i}offset(t,e){e=+e,this.Kl+=t=+t,this.Zl+=e,this.Ql+=t,this.tu+=e,this.eu+=t,this.iu+=e,this.su+=t,this.ru+=e}round(){this.Kl=Math.round(this.Kl),this.Zl=Math.round(this.Zl),this.Ql=Math.round(this.Ql),this.tu=Math.round(this.tu),this.eu=Math.round(this.eu),this.iu=Math.round(this.iu),this.su=Math.round(this.su),this.ru=Math.round(this.ru)}floor(){this.Kl=Math.floor(this.Kl),this.Zl=Math.floor(this.Zl),this.Ql=Math.floor(this.Ql),this.tu=Math.floor(this.tu),this.eu=Math.floor(this.eu),this.iu=Math.floor(this.iu),this.su=Math.floor(this.su),this.ru=Math.floor(this.ru)}ceil(){this.Kl=Math.ceil(this.Kl),this.Zl=Math.ceil(this.Zl),this.Ql=Math.ceil(this.Ql),this.tu=Math.ceil(this.tu),this.eu=Math.ceil(this.eu),this.iu=Math.ceil(this.iu),this.su=Math.ceil(this.su),this.ru=Math.ceil(this.ru)}vu(t){this.Kl=t.nl,this.Zl=t.ol,this.Ql=t.ll,this.tu=t.ol,this.eu=t.ll,this.iu=t.ul,this.su=t.nl,this.ru=t.ul}Su(t,e){0===e?this.vu(t):this.gu(t,Math.sin(e),Math.cos(e))}gu(t,e,i){var s=t.nl*e,r=t.ol*e,h=t.ll*e,e=t.ul*e,n=t.nl*i,a=t.ol*i,o=t.ll*i,t=t.ul*i;this.Kl=n-r,this.Zl=a+s,this.Ql=o-r,this.tu=a+h,this.eu=o-e,this.iu=t+h,this.su=n-e,this.ru=t+s}Tu(t){t.set(Math.min(this.Kl,this.Ql,this.eu,this.su),Math.min(this.Zl,this.tu,this.iu,this.ru),Math.max(this.Kl,this.Ql,this.eu,this.su),Math.max(this.Zl,this.tu,this.iu,this.ru))}Xl(t,e){var i=this.Ql-this.Kl,s=this.tu-this.Zl,r=this.eu-this.Kl,h=this.iu-this.Zl,t=t-this.Kl,e=e-this.Zl,n=i*i+s*s,a=i*r+s*h,o=i*t+s*e,l=r*r+h*h,u=r*t+h*e,c=1/(n*l-a*a),f=(l*o-a*u)*c,d=(n*u-a*o)*c;return 0<=f&&0<d&&f+d<1||(d=((n=(i=this.su-this.Kl)*i+(s=this.ru-this.Zl)*s)*u-(a=i*r+s*h)*(o=i*t+s*e))*(c=1/(n*l-a*a)),0<=(f=(l*o-a*u)*c)&&0<d&&f+d<1)}Ml(){return(this.Kl+this.Ql+this.eu+this.su)/4}wl(){return(this.Zl+this.tu+this.iu+this.ru)/4}_u(t,e,i,s){return!(!this.Xl(t,e)&&!this.Xl(i,s))||C33.Zh(t,e,i,s,this)}Eu(t){var e,i,s,r,h,n,a=t.Ml(),o=t.wl();return!!this.Xl(a,o)||(a=this.Ml(),o=this.wl(),!!t.Xl(a,o))||(a=this.Kl,o=this.Zl,e=this.Ql,i=this.tu,s=this.eu,r=this.iu,h=this.su,n=this.ru,C33.Zh(a,o,e,i,t))||C33.Zh(e,i,s,r,t)||C33.Zh(s,r,h,n,t)||C33.Zh(h,n,a,o,t)}yu(){var t=this.Kl,e=this.Zl;this.Kl=this.Ql,this.Zl=this.tu,this.Ql=this.eu,this.tu=this.iu,this.eu=this.su,this.iu=this.ru,this.su=t,this.ru=e}Au(){this.Iu(0,2),this.Iu(1,3),this.Iu(6,4),this.Iu(7,5)}Ru(){this.Iu(0,6),this.Iu(1,7),this.Iu(2,4),this.Iu(3,5)}Mu(){this.Iu(2,6),this.Iu(3,7)}Iu(t,e){var i=this.wu(t);this.bu(t,this.wu(e)),this.bu(e,i)}wu(t){switch(t){case 0:return this.Kl;case 1:return this.Zl;case 2:return this.Ql;case 3:return this.tu;case 4:return this.eu;case 5:return this.iu;case 6:return this.su;case 7:return this.ru;default:throw new RangeError("invalid quad point index")}}bu(t,e){switch(e=+e,t){case 0:this.Kl=e;break;case 1:this.Zl=e;break;case 2:this.Ql=e;break;case 3:this.tu=e;break;case 4:this.eu=e;break;case 5:this.iu=e;break;case 6:this.su=e;break;case 7:this.ru=e;break;default:throw new RangeError("invalid quad point index")}}}}{let C33=self.We,assert=self.assert,DEFAULT_POLY_POINTS=[0,0,1,0,1,1,0,1],tempQuad=C33.oh(C33.Jl);C33.Ou=class CollisionPoly extends C33.nh{constructor(t,e=!0){super(),t=t||DEFAULT_POLY_POINTS,this.Gu=Float64Array.from(t),this.Pu=new C33.Rect,this.Lu=!0,this.xu=e}lh(){}Nu(){return this.Gu}Du(){return this.Gu.length/2}Fu(t){this.Gu.length===t.length?this.Gu.set(t):this.Gu=Float64Array.from(t),this.Lu=!0}Bu(){this.Fu(DEFAULT_POLY_POINTS)}_(t){this.Fu(t.Gu)}$u(){this.Lu=!0}ku(){if(this.Lu){var n=this.Gu;let i=n[0],s=n[1],r=i,h=s;for(let t=0,e=n.length;t<e;t+=2){var a=n[t],o=n[t+1];a<i&&(i=a),a>r&&(r=a),o<s&&(s=o),o>h&&(h=o)}this.Pu.set(i,s,r,h),this.Lu=!1}}vu(t,e,i){let s=this.Gu;8!==s.length&&(s=new Float64Array(8),this.Gu=s),s[0]=t.gl()-e,s[1]=t.Tl()-i,s[2]=t._l()-e,s[3]=t.Tl()-i,s[4]=t._l()-e,s[5]=t.El()-i,s[6]=t.gl()-e,s[7]=t.El()-i,this.Pu._(t),0===e&&0===i||this.Pu.offset(-e,-i),this.Lu=!1}Wu(t,e,i){tempQuad._(t),tempQuad.offset(e,i),this.Fu(tempQuad.toArray()),this.Lu=!0}transform(t,e,i){let s=0,r=1;0!==i&&(s=Math.sin(i),r=Math.cos(i)),this.Vu(t,e,s,r)}Vu(i,s,r,h){var n=this.Gu;for(let t=0,e=n.length;t<e;t+=2){var a=t+1,o=n[t]*i,l=n[a]*s;n[t]=o*h-l*r,n[a]=l*h+o*r}this.Lu=!0}offset(i,s){var r=this.Gu;for(let t=0,e=r.length;t<e;t+=2)r[t]+=i,r[t+1]+=s}Xl(i,s){var r=this.Gu;if(i===r[0]&&s===r[1])return!0;this.ku();var t=this.Pu,h=t.gl()-110,n=t.Tl()-101,a=t._l()+131,o=t.El()+120;let l=0,u=0,c=0,f=0,d=0,C=0,p=0,m=0,v=(c=h<i?(l=h,i):(l=i,h),f=n<s?(u=n,s):(u=s,n),p=a<i?(d=a,i):(d=i,a),m=o<s?(C=o,s):(C=s,o),0),S=0;for(let t=0,e=r.length;t<e;t+=2){var g=(t+2)%e,T=r[t],_=r[t+1],E=r[g],g=r[1+g];C33.Kh(h,n,i,s,l,c,u,f,T,_,E,g)&&++v,C33.Kh(a,o,i,s,d,p,C,m,T,_,E,g)&&++S}return v%2==1||S%2==1}Hu(t,n,a){var o=t.Gu,l=this.Gu;if(this.Xl(o[0]+n,o[1]+a))return!0;if(t.Xl(l[0]-n,l[1]-a))return!0;for(let t=0,e=l.length;t<e;t+=2){var u=(t+2)%e,c=l[t],f=l[t+1],d=l[u],C=l[1+u];let i=0,s=0,r=0,h=0;r=c<d?(i=c,d):(i=d,c),h=f<C?(s=f,C):(s=C,f);for(let t=0,e=o.length;t<e;t+=2){var p=(t+2)%e,m=o[t]+n,v=o[t+1]+a,S=o[p]+n,p=o[1+p]+a;if(C33.Kh(c,f,d,C,i,r,s,h,m,v,S,p))return!0}}return!1}_u(i,s,r,h,n,a){if(this.Xl(r-i,h-s))return!0;if(this.Xl(n-i,a-s))return!0;let o=0,l=0,u=0,c=0;u=r<n?(o=r,n):(o=n,r),c=h<a?(l=h,a):(l=a,h);var f=this.Gu;for(let t=0,e=f.length;t<e;t+=2){var d=(t+2)%e,C=f[t]+i,p=f[t+1]+s,m=f[d]+i,d=f[1+d]+s;if(C33.Kh(r,h,n,a,o,u,l,c,C,p,m,d))return!0}return!1}Au(i){var s=this.Gu;for(let t=0,e=s.length;t<e;t+=2)s[t]=2*i-s[t];this.Lu=!0}Ru(i){var s=this.Gu;for(let t=0,e=s.length;t<e;t+=2){var r=t+1;s[r]=2*i-s[r]}this.Lu=!0}Mu(){var i=this.Gu;for(let t=0,e=i.length;t<e;t+=2){var s=t+1,r=i[t];i[t]=i[s],i[s]=r}this.Lu=!0}Uu(){var i=this.Gu;let s=0;for(let t=0,e=i.length;t<e;t+=2)s+=i[t];return s/this.Du()}ju(){var i=this.Gu;let s=0;for(let t=0,e=i.length;t<e;t+=2)s+=i[t+1];return s/this.Du()}Xu(){return this.Gu}Yu(){return this.Du()}qu(){return this.xu}}}{let C33=self.We;C33.zu=class PairMap extends C33.nh{constructor(t){if(super(),this.Ju=new Map,t)for(var[e,i,s]of t)this.Set(e,i,s)}lh(){this.Ku(),this.Ju=null}Zu(){return 0===this.Ju.size}Ku(){var t,e=this.Ju;for(t of e.values())t.clear();e.clear()}Set(t,e,i){var s=this.Ju;let r=s.get(t);r||(r=new Map,s.set(t,r)),r.set(e,i)}ni(t,e){t=this.Ju.get(t);return t&&t.get(e)}hi(t,e){t=this.Ju.get(t);return!!t&&t.has(e)}Qu(t,e){var i=this.Ju,s=i.get(t);return!!s&&((e=s.delete(e))&&0===s.size&&i.delete(t),e)}tc(t){var e,i,s=this.Ju,r=s.get(t);r&&(r.clear(),s.delete(t));for([e,i]of s.entries())i.delete(t)&&0===i.size&&s.delete(e)}ec(){let t=0;for(var e of this.Ju.values())t+=e.size;return t}*values(){for(var t of this.Ju.values())yield*t.values()}*ic(){for(var[t,e]of this.Ju.entries())for(var i of e.keys())yield[t,i]}*entries(){for(var[t,e]of this.Ju.entries())for(var[i,s]of e.entries())yield[t,i,s]}}}{let C33=self.We;C33.sc=class ArraySet extends C33.nh{constructor(){super(),this.rc=new Set,this.hc=[],this.nc=!1}lh(){this.Ku()}Ku(){this.rc.clear(),C33.Dn(this.hc),this.nc=!1}ac(t){this.rc.has(t)||(this.rc.add(t),this.nc)||this.hc.push(t)}hi(t){return this.rc.has(t)}Qu(t){this.rc.delete(t)&&(this.nc=!0)}ec(){return this.rc.size}Zu(){return 0===this.rc.size}oc(){return this.nc&&(this.lc(),this.nc=!1),this.hc}lc(){var t,e=this.hc;C33.Dn(e);for(t of this.rc)e.push(t)}}}{let C33=self.We,EASE_MAP=new Map,PREDEFINED_EASE_MAP=new Map,CUSTOM_EASE_EDITOR_MAP=new Map,CUSTOM_EASE_DATA_EDITOR_MAP=new Map,CUSTOM_EASE_RUNTIME_MAP=new Map,CUSTOM_EASE_DATA_RUNTIME_MAP=new Map,PRIVATE_EASE_MAP=new Map,BUILT_IN_TRANSITION_MAP=new Map,ALIAS_MAP=new Map,EASE_TRANSLATION_KEYS=(ALIAS_MAP.set("linear","noease"),ALIAS_MAP.set("default","noease"),["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"]),SHORT_EASE_TRANSLATION_KEYS=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],EASE_API2INTERNAL_NAMES=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]),SAMPLE_COUNT=(self.uc=class Ease{constructor(){}static cc(){return"default"}static fc(){return"noease"}static dc(t){return EASE_API2INTERNAL_NAMES.get(t)}static Cc(e,...i){this.mc();let t,s;var r=(s=e?(CUSTOM_EASE_EDITOR_MAP.has(e)||CUSTOM_EASE_EDITOR_MAP.set(e,new Map),[...(t=CUSTOM_EASE_EDITOR_MAP.get(e)).keys()].filter(t=>!Ease.vc(t,e)||Ease.vc(t,e).transition.IsForAnyPurpose())):[...(t=CUSTOM_EASE_RUNTIME_MAP).keys()]).sort();return[...PREDEFINED_EASE_MAP.keys()].concat(r).filter(t=>!i.includes(t))}static Sc(){this.mc();var t=[...CUSTOM_EASE_RUNTIME_MAP.keys()];return t.sort(),[...PREDEFINED_EASE_MAP.keys()].concat(t)}static Tc(){this.mc();var t=[...CUSTOM_EASE_RUNTIME_MAP.keys()];return t.sort(),t}static _c(t){for(var e of EASE_TRANSLATION_KEYS)if(self.lang("ui.bars.timeline.eases."+e)===t)return!0;for(var i of SHORT_EASE_TRANSLATION_KEYS)if(self.lang("ui.bars.timeline.short-eases."+i)===t)return!0}static Ec(t){return this.mc(),[...PREDEFINED_EASE_MAP.keys()].includes(t)}static yc(t){var e=ALIAS_MAP.get(t);return e?EASE_MAP.get(e):Ease.Ec(t)?EASE_MAP.get(t):PRIVATE_EASE_MAP.has(t)?PRIVATE_EASE_MAP.get(t):void 0}static Ac(t){return this.mc(),BUILT_IN_TRANSITION_MAP.get(t)}static Ic(t,e){this.mc();var i=Ease.yc(t);if(i)return i;if(e)return CUSTOM_EASE_EDITOR_MAP.get(e).get(t);throw new Error("missing ease function")}static vc(t,e){this.mc();e=CUSTOM_EASE_DATA_EDITOR_MAP.get(e);if(e)return e.get(t)}static Rc(t,e){return this.mc(),!!Ease.yc(t)||!!CUSTOM_EASE_EDITOR_MAP.get(e).get(t)}static Mc(t){this.mc();var e=Ease.yc(t);return e||CUSTOM_EASE_RUNTIME_MAP.get(t)}static wc(t){return this.mc(),CUSTOM_EASE_DATA_RUNTIME_MAP.get(t)}static Oc(t){return this.mc(),this.Sc()[t]}static Gc(t,e){return this.mc(),this.Cc(e).indexOf(t)}static Pc(t){return this.Gc(t)}static mc(){0===EASE_MAP.size&&(this.Lc("default",()=>{}),this.Lc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.Lc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.Lc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.Lc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.Lc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.Lc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.Lc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.Lc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.Lc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.Lc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.Lc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.Lc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.Lc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.Lc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.Lc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.Lc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.Lc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.Lc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.Lc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Lc("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.Lc("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.Lc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.Lc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.Lc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.Lc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Lc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.Lc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Lc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.Lc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.Lc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.Lc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.xc("cubicbezier",this.Nc),this.xc("spline",this.Dc))}static Lc(t,e,i=!1){if("function"==typeof e)Ease.Fc(t,e,"predefined");else{if(!C33.Ws(e))throw new Error("unexpected arguments");if(self.BuiltInTransition){let r=C33.oh(self.BuiltInTransition,t,i);r.SetFromJson(e),Ease.Fc(t,(t,e,i,s)=>r.Bc(t,e,i,s),"predefined"),BUILT_IN_TRANSITION_MAP.set(t,r)}else{let r=C33.oh(C33.$c,[t,e.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);r.kc(i),Ease.Fc(t,(t,e,i,s)=>r.Bc(t,e,i,s),"predefined")}}}static xc(t,e){Ease.Fc(t,e,"private")}static Wc(t,e,i,s){this.mc(),Ease.Fc(t,e,"custom",i,s)}static Vc(t,e){var i;this.Ec(t)||![...PRIVATE_EASE_MAP.keys()].includes(t)&&((i=CUSTOM_EASE_EDITOR_MAP.get(e))&&i.delete(t),i=CUSTOM_EASE_DATA_EDITOR_MAP.get(e))&&i.delete(t)}static Fc(t,e,i,s,r){switch(i){case"predefined":EASE_MAP.set(t,e),PREDEFINED_EASE_MAP.set(t,e);break;case"custom":(s?(CUSTOM_EASE_EDITOR_MAP.has(s)||CUSTOM_EASE_EDITOR_MAP.set(s,new Map),CUSTOM_EASE_DATA_EDITOR_MAP.has(s)||CUSTOM_EASE_DATA_EDITOR_MAP.set(s,new Map),CUSTOM_EASE_EDITOR_MAP.get(s).set(t,e),CUSTOM_EASE_DATA_EDITOR_MAP.get(s)):(CUSTOM_EASE_RUNTIME_MAP.set(t,e),CUSTOM_EASE_DATA_RUNTIME_MAP)).set(t,r);break;case"private":EASE_MAP.set(t,e),PRIVATE_EASE_MAP.set(t,e);break;default:throw new Error("unexpected ease mode")}}static Hc(t,e,i,s){return 0===s?e:i*t/s+e}static Nc(t,e,i,s,r){return e+3*t*(i-e)+3*t**2*(e+s-2*i)+t**3*(r-e+3*i-3*s)}static Dc(t,e,i,s,r,h,n,o,l,u){return s===r&&h===n?t:(t=get_t_for_x(t,e,s,h,o,u),e=a(i,r,n,l),s=b(i,r,n,l),h=c(i,r,n,l),calc_bezier(t,e,s,h))}static Uc(t,e,i,s){var r=[],h=a(t,e,i,s),n=b(t,e,i,s),o=c(t,e,i,s);for(let t=0;t<SAMPLE_COUNT;++t){var l=calc_bezier(t*SAMPLE_STEP,h,n,o);r.push(l)}return r}},11),SAMPLE_STEP=1/(SAMPLE_COUNT-1),NEWTON_RAPHSON_ITERATIONS=4,NEWTON_RAPHSON_MIN_SLOPE=.01,SUBDIVISION_PRECISION=1e-7,SUBDIVISION_MAX_ITERATIONS=10,a=(t,e,i,s)=>s-3*i+3*e-t,b=(t,e,i,s)=>3*i-6*e+3*t,c=(t,e,i,s)=>3*(e-t),calc_bezier=(t,e,i,s)=>((e*t+i)*t+s)*t,get_slope=(t,e,i,s)=>3*e*t*t+2*i*t+s,get_t_for_x=(s,t,e,i,r,h)=>{if(1==s)return 1;let n=0,o=1,l=h[o];var u=SAMPLE_COUNT-1;for(SAMPLE_COUNT;o!=u&&l<=s;)o++,l=h[o],n+=SAMPLE_STEP;o--;var f=(s-(l=h[o]))/(h[o+1]-l);let d=n+f*SAMPLE_STEP;var C,p=a(t,e,i,r),m=b(t,e,i,r),v=c(t,e,i,r),f=get_slope(d,p,m,v);if(0===f)return d;if(f>=NEWTON_RAPHSON_MIN_SLOPE){for(let t=0;t<NEWTON_RAPHSON_ITERATIONS;++t){var S=calc_bezier(d,p,m,v)-s,g=get_slope(d,p,m,v);d-=S/g}return d}{let t=n,e=n+SAMPLE_STEP,i=0;do{d=t+(e-t)/2;var T=calc_bezier(d,p,m,v)-s;0<T?e=d:t=d,T=Math.abs(T)>SUBDIVISION_PRECISION,C=++i<SUBDIVISION_MAX_ITERATIONS}while(T&&C);return d}}}{let RequireStringOrNumber2=function(t){C33.Rs(t)},C33=(RequireStringOrNumber=RequireStringOrNumber2,self.We);C33.jc=class ProbabilityTable{constructor(t){this.Xc=[],this.dh=t||"",this.Yc=0}lh(){this.Ku(),this.Xc=null}qc(){return this.dh}Ku(){C33.Fn(this.Xc),this.Yc=0}zc(){return this.Yc}Jc(t=Math.random()*this.zc()){let e=0;for(var[i,s]of this.Xc)if(t<(e+=i))return s;return 0}Kc(t,e){RequireStringOrNumber2(e),this.Yc+=t,this.Xc.push([t,e])}Zc(e,i){RequireStringOrNumber2(i);var s=0===e;for(let t=0;t<this.Xc.length;t++){var r=this.Xc[t],h=s||r[0]===e,n=r[1]===i;if(h&&n){this.Xc.splice(t,1),this.Yc-=r[0];break}}}Qc(){return JSON.stringify(this.Xc)}static t3(t,e){var i,s=new C33.jc(e);for(i of JSON.parse(t)){var r=i[0],h=i[1];s.Kc(r,h)}return s}}}{let C33=self.We,nextId=0;C33.e3=class ScreenReaderText{constructor(t,e){this.i3=t,this.s3=e,this.r3=nextId++,this.i3.h3("runtime","screen-reader-text",{type:"create",id:this.r3,text:this.s3})}lh(){this.i3.h3("runtime","screen-reader-text",{type:"release",id:this.r3}),this.i3=null,this.s3="",this.r3=-1}n3(t){this.s3!==t&&(this.s3=t,this.i3.h3("runtime","screen-reader-text",{type:"update",id:this.r3,text:this.s3}))}}}{let C33=self.We;C33.Event=class Event{constructor(t,e){this.type=t,this.cancelable=!!e,this.defaultPrevented=!1,this.a3=!1,this.o3=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.o3)throw new Error(`cannot stop async event '${this.type}' propagation`);this.a3=!0}}}{let C33=self.We,assert=self.assert;C33.Event.l3=class EventHandler extends C33.nh{constructor(t){super(),this.u3=t,this.f3=[],this.d3=new Set,this.C3=[],this.m3=new Set,this.v3=0,this.S3=[]}lh(){0<this.v3||(C33.Dn(this.f3),this.d3.clear(),C33.Dn(this.C3),this.m3.clear(),C33.Dn(this.S3),C33.lh(this))}g3(t,e){this.T3()?this.S3.push({_3:"add",E3:t,capture:e}):e?this.d3.has(t)||(this.f3.push(t),this.d3.add(t)):this.m3.has(t)||(this.C3.push(t),this.m3.add(t))}y3(t,e){this.T3()?this.S3.push({_3:"remove",E3:t,capture:e}):e?this.d3.has(t)&&(this.d3.delete(t),C33.Vn(this.f3,t)):this.m3.has(t)&&(this.m3.delete(t),C33.Vn(this.C3,t))}A3(){return!this.f3.length&&!this.C3.length}T3(){return 0<this.v3}I3(){var t,e=new Set,i=new Set;for(t of this.S3)if("add"===t._3)this.g3(t.E3,t.capture),(t.capture?i:e).delete(t.E3);else{if("remove"!==t._3)throw new Error("invalid op");(t.capture?(this.d3.delete(t.E3),i):(this.m3.delete(t.E3),e)).add(t.E3)}C33.jn(this.C3,e),C33.jn(this.f3,i),C33.Dn(this.S3)}R3(i){this.M3();let s=!1;for(let t=0,e=this.f3.length;t<e;++t)if(this.f3[t](i),i.a3){s=!0;break}if(!s)for(let t=0,e=this.C3.length;t<e&&(this.C3[t](i),!i.a3);++t);return this.w3(),!i.defaultPrevented}b3(i){this.M3();for(let t=0,e=this.f3.length;t<e;++t)this.f3[t](i);for(let t=0,e=this.C3.length;t<e;++t)this.C3[t](i);return this.w3(),!0}M3(){this.v3++}w3(){this.v3--,0===this.v3&&0<this.S3.length&&this.I3()}O3(t){t?this.M3():this.w3()}G3(i){var s=[];for(let e=0,t=this.f3.length;e<t;++e){let t=this.f3[e];s.push(C33.P3(()=>t(i)))}for(let e=0,t=this.C3.length;e<t;++e){let t=this.C3[e];s.push(C33.P3(()=>t(i)))}return Promise.all(s).then(()=>!i.defaultPrevented)}L3(i){var s=[];this.M3();for(let t=0,e=this.f3.length;t<e;++t){var r=this.f3[t](i);r instanceof Promise&&s.push(r)}for(let t=0,e=this.C3.length;t<e;++t){var h=this.C3[t](i);h instanceof Promise&&s.push(h)}return this.w3(),s.length?Promise.all(s).then(()=>!i.defaultPrevented):!i.defaultPrevented}async x3(t){return this.L3(t)}async N3(i){this.M3();for(let t=0,e=this.f3.length;t<e;++t){var s=this.f3[t](i);s instanceof Promise&&await s}for(let t=0,e=this.C3.length;t<e;++t){var r=this.C3[t](i);r instanceof Promise&&await r}return this.w3(),!i.defaultPrevented}*D3(i){this.M3();for(let t=0,e=this.f3.length;t<e;++t){var s=this.f3[t](i);C33.Fa(s)&&(yield*s)}for(let t=0,e=this.C3.length;t<e;++t){var r=this.C3[t](i);C33.Fa(r)&&(yield*r)}this.w3()}}}{let C33=self.We;C33.Event.F3=class EventDispatcher extends C33.nh{constructor(){super(),this.B3=new Map,this.W3=!1}lh(){if(this.W3)throw new Error("already released");this.V3(),this.W3=!0,C33.lh(this)}uh(){return this.W3}V3(){if(this.B3){for(var t of this.B3.values())t.lh();this.B3.clear()}}H3(t,e){var i=this.B3.get(t);return i||(e?(i=C33.oh(C33.Event.l3,t),this.B3.set(t,i),i):null)}U3(t){return this.B3.has(t)}addEventListener(t,e,i){this.H3(t,!0).g3(e,!!i)}removeEventListener(t,e,i){var s=this.H3(t,!1);s&&(s.y3(e,!!i),s.A3())&&this.B3.delete(t)}dispatchEvent(t){var e=this.H3(t.type,!1);return!e||(t.cancelable?e.R3(t):e.b3(t))}j3(t){var e=this.H3(t.type,!1);return e?(t.o3=!0,e.G3(t)):Promise.resolve(!0)}async X3(t){var e=this.H3(t.type,!1);if(!e)return!0;this.B3.delete(t.type),t.o3=!0;t=await e.G3(t);return e.lh(),t}async Y3(t){var e=this.H3(t.type,!1);return!e||e.x3(t)}q3(t){var e=this.H3(t.type,!1);return!e||e.L3(t)}async z3(t){var e=this.H3(t.type,!1);return!e||e.N3(t)}J3(t){var e=this.H3(t.type,!1);if(!e)return null;if(t.cancelable)throw new Error("not supported");return e.D3(t)}O3(t){for(var e of this.B3.values())e.O3(t)}}}{let SetNewCallback2=function(t){callbackId=SUPPORTS_RIC&&0===highThroughputMode?requestIdleCallback(DoAsyncifiedWork2,{timeout:IDLECALLBACK_TIMEOUT}):setTimeout(DoAsyncifiedWork2,0<highThroughputMode?1:t)},DoAsyncifiedWork2=function(i){if(callbackId=-1,workQueue.length){var s=performance.now();let t=s,e=0;for(var r,h;DoNextAsyncifiedJob2(workQueue.shift()),t=performance.now(),++e,r=(t-s)/e*1.1,workQueue.length&&(SUPPORTS_RIC&&0===highThroughputMode&&void 0!==i?r<i.timeRemaining():t-s+r<SETTIMEOUT_WORK_DURATION););-1===callbackId&&workQueue.length&&(h=t-s,h=Math.max(SETTIMEOUT_INTERVAL-h,4),SetNewCallback2(h))}},DoNextAsyncifiedJob2=function(e){let t;try{t=e.E3()}catch(t){return void e.reject(t)}e.resolve(t)},C33=(SetNewCallback=SetNewCallback2,DoAsyncifiedWork=DoAsyncifiedWork2,DoNextAsyncifiedJob=DoNextAsyncifiedJob2,self.We),SETTIMEOUT_WORK_DURATION=12,SETTIMEOUT_INTERVAL=16,IDLECALLBACK_TIMEOUT=35,SUPPORTS_RIC="undefined"!=typeof requestIdleCallback,workQueue=[],callbackId=-1,highThroughputMode=0,asyncifyDisabled=C33.li.hi("disable-asyncify");asyncifyDisabled&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),C33.P3=function(i){let s=null;return C33.isDebug&&(s=C33.ds()),new Promise((t,e)=>{workQueue.push({E3:i,resolve:t,reject:e,stack:s}),asyncifyDisabled?DoNextAsyncifiedJob2(workQueue.pop()):-1===callbackId&&SetNewCallback2(SETTIMEOUT_INTERVAL)})},C33.P3.K3=function(t){if(t)++highThroughputMode;else if(--highThroughputMode<0)throw new Error("already turned off high throughput mode")}}{let ClearTimeCache2=function(){cachedNowTime=-1},CheckActiveIdleTimeouts2=function(){timerId=-1,nextDeadline=-1;var t,e,i,s=Date.now();for(t of activeIdleTimeouts)t.Z3(s)?(e=t.Q3(),(-1===nextDeadline||e<nextDeadline)&&(nextDeadline=e)):activeIdleTimeouts.delete(t);-1!==nextDeadline&&(i=Math.max(nextDeadline-s+IDLE_CHECK_TIMER_OVERSHOOT,IDLE_CHECK_MIN_INTERVAL),timerId=self.setTimeout(CheckActiveIdleTimeouts2,i))},C33=(ClearTimeCache=ClearTimeCache2,CheckActiveIdleTimeouts=CheckActiveIdleTimeouts2,self.We),IDLE_CHECK_MIN_INTERVAL=1e3,IDLE_CHECK_TIMER_OVERSHOOT=100,cachedNowTime=-1,timerId=(C33.tf=function(){return-1===cachedNowTime&&(cachedNowTime=Date.now(),self.setTimeout(ClearTimeCache2,16)),cachedNowTime},-1),nextDeadline=-1,activeIdleTimeouts=new Set;C33.ef=class IdleTimeout{constructor(t,e){this.if=t,this.rf=1e3*e,this.hf=0,this.nf=!1}lf(){var t=C33.tf();this.hf=t+this.rf,this.nf||(activeIdleTimeouts.add(this),this.nf=!0),-1===timerId?(nextDeadline=this.hf,timerId=self.setTimeout(CheckActiveIdleTimeouts2,this.rf+IDLE_CHECK_TIMER_OVERSHOOT)):this.hf<nextDeadline&&nextDeadline>t+IDLE_CHECK_MIN_INTERVAL&&(self.clearTimeout(timerId),nextDeadline=this.hf,timerId=self.setTimeout(CheckActiveIdleTimeouts2,this.rf+IDLE_CHECK_TIMER_OVERSHOOT))}Z3(t){return!(t>=this.hf)||(this.if()?(this.hf=t+this.rf,!0):this.nf=!1)}Q3(){return this.hf}uf(){this.nf&&(activeIdleTimeouts.delete(this),this.nf=!1,0===activeIdleTimeouts.size)&&-1!==timerId&&(self.clearTimeout(timerId),timerId=-1,nextDeadline=-1)}lh(){this.uf(),this.if=null}}}{let C33=self.We;C33.cf=class Disposable{constructor(t){this.ff=!1,this.df=t}Cf(){this.ff||(this.ff=!0,this.df&&(this.df(),this.df=null))}pf(){return this.ff}lh(){this.Cf()}static lh(t){return new Disposable(()=>t.lh())}static mf(e,i,s,r,t){if(null==r)r=!1;else if("boolean"!=typeof r&&"object"!=typeof r)throw new TypeError("invalid event listener options");if(t&&(s=s.bind(t)),i.includes(" ")){i=i.split(" ");var h=new C33.vf;for(let t of i)e.addEventListener(t,s,r),h.ac(C33.oh(C33.cf,()=>e.removeEventListener(t,s,r)));return h}return e.addEventListener(i,s,r),C33.oh(C33.cf,()=>e.removeEventListener(i,s,r))}},C33.Sf=class StubDisposable extends C33.cf{gf(t){this.df=t}},C33.vf=class CompositeDisposable extends C33.cf{constructor(...t){super(),this.Tf=new Set;for(var e of t)this.ac(e)}ac(...t){if(this.ff)throw new Error("already disposed");for(var e of t)this.Tf.add(e)}_f(t){if(this.ff)throw new Error("already disposed");this.Tf.delete(t)}Ef(){if(this.ff)throw new Error("already disposed");if(this.Tf){for(var t of this.Tf)t.Cf();this.Tf.clear()}}pf(){return this.ff}Cf(){if(this.ff)throw new Error("already disposed");this.ff=!0;for(var t of this.Tf)t.Cf();this.Tf.clear(),this.Tf=null}lh(){this.Cf()}}}{let C33=self.We;C33.yf=class KahanSum extends C33.nh{constructor(){super(),this.Af=0,this.Jo=0,this.If=0,this.Rf=0}ac(t){this.Jo=(t=+t)-this.Af,this.If=this.Rf+this.Jo,this.Af=this.If-this.Rf-this.Jo,this.Rf=this.If}Mf(t){this.Rf-=+t}ni(){return this.Rf}lf(){this.Af=0,this.Jo=0,this.If=0,this.Rf=0}Set(t){this.Af=0,this.Jo=0,this.If=0,this.Rf=+t}wf(t){this.Af=t.Af,this.Jo=t.Jo,this.If=t.If,this.Rf=t.Rf}lh(){}}}{let C33=self.We,js_cols={},RED=!0,BLACK=!1;js_cols.bf=function(t){this.Of=t,this.right=this.Of.Gf,this.left=this.Of.Gf,this.parent=null,this.color=!1,this.key=null},js_cols.Pf=function(t){this.size=0,this.Gf=new js_cols.bf(this),this.Gf.color=BLACK,this.root=this.Gf,this.root.parent=this.Gf,this.compare=t||this.Lf},js_cols.Pf.prototype.Lf=function(t,e){return t<e?-1:e<t?1:0},js_cols.Pf.prototype.clone=function(){var t=new js_cols.Pf(this.compare);return t.xf(this),t},js_cols.Pf.prototype.clear=function(){this.size=0,this.Gf=new js_cols.bf(this),this.Gf.color=BLACK,this.root=this.Gf,this.root.parent=this.Gf},js_cols.Pf.prototype.Nf=function(t){var e=t.right;t.right=e.left,e.left!=this.Gf&&(e.left.parent=t),e.parent=t.parent,t.parent==this.Gf?this.root=e:t==t.parent.left?t.parent.left=e:t.parent.right=e,(e.left=t).parent=e},js_cols.Pf.prototype.Df=function(t){var e=t.left;t.left=e.right,e.right!=this.Gf&&(e.right.parent=t),e.parent=t.parent,t.parent==this.Gf?this.root=e:t==t.parent.right?t.parent.right=e:t.parent.left=e,(e.right=t).parent=e},js_cols.Pf.prototype.Ff=function(t){if(this.contains(t))this.Bf(t).key=t;else{for(var e=new js_cols.bf(this),i=(e.key=t,this.Gf),s=this.root;s!=this.Gf;)i=s,s=this.compare(e.key,s.key)<0?s.left:s.right;(e.parent=i)==this.Gf?this.root=e:this.compare(e.key,i.key)<0?i.left=e:i.right=e,e.left=this.Gf,e.right=this.Gf,e.color=RED,this.$f(e),this.size++}},js_cols.Pf.prototype.$f=function(t){for(;t!=this.Gf&&t!=this.root&&t.parent.color==RED;){var e;t.parent==t.parent.parent.left?(e=t.parent.parent.right).color==RED?(t.parent.color=BLACK,e.color=BLACK,t.parent.parent.color=RED,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.Nf(t)),t.parent.color=BLACK,t.parent.parent.color=RED,t.parent.parent!=this.Gf&&this.Df(t.parent.parent)):(e=t.parent.parent.left).color==RED?(t.parent.color=BLACK,e.color=BLACK,t.parent.parent.color=RED,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.Df(t)),t.parent.color=BLACK,t.parent.parent.color=RED,t.parent.parent!=this.Gf&&this.Nf(t.parent.parent))}this.root.color=BLACK},js_cols.Pf.prototype.kf=function(t){var e=t.left==this.Gf||t.right==this.Gf?t:this.Wf(t),i=e.left!=this.Gf?e.left:e.right;i.parent=e.parent,e.parent==this.Gf?this.root=i:e==e.parent.left?e.parent.left=i:e.parent.right=i,e!=t&&(t.key=e.key),e.color==BLACK&&this.Vf(i),this.size--},js_cols.Pf.prototype.Vf=function(t){for(;t!=this.root&&t.color==BLACK;){var e;t=t==t.parent.left?((e=t.parent.right).color==RED&&(e.color=BLACK,t.parent.color=RED,this.Nf(t.parent),e=t.parent.right),e.left.color==BLACK&&e.right.color==BLACK?(e.color=RED,t.parent):(e.right.color==BLACK&&(e.left.color=BLACK,e.color=RED,this.Df(e),e=t.parent.right),e.color=t.parent.color,t.parent.color=BLACK,e.right.color=BLACK,this.Nf(t.parent),this.root)):((e=t.parent.left).color==RED&&(e.color=BLACK,t.parent.color=RED,this.Df(t.parent),e=t.parent.left),e.right.color==BLACK&&e.left.color==BLACK?(e.color=RED,t.parent):(e.left.color==BLACK&&(e.right.color=BLACK,e.color=RED,this.Nf(e),e=t.parent.left),e.color=t.parent.color,t.parent.color=BLACK,e.left.color=BLACK,this.Df(t.parent),this.root))}t.color=BLACK},js_cols.Pf.prototype.remove=function(t){var e,t=this.Bf(t);return t!=this.Gf?(e=t.key,this.kf(t),e):null},js_cols.Pf.prototype.Hf=function(t,e){this.remove(e)},js_cols.Pf.prototype.min=function(t){for(;t.left!=this.Gf;)t=t.left;return t},js_cols.Pf.prototype.max=function(t){for(;t.right!=this.Gf;)t=t.right;return t},js_cols.Pf.prototype.Wf=function(t){if(t.right!=this.Gf)return this.min(t.right);for(var e=t.parent;e!=this.Gf&&t==e.right;)e=(t=e).parent;return e},js_cols.Pf.prototype.Uf=function(t){if(t.left!=this.Gf)return this.max(t.left);for(var e=t.parent;e!=this.Gf&&t==e.left;)e=(t=e).parent;return e},js_cols.Pf.prototype.jf=function(t){if(0<this.size){var e=this.Bf(t);if(e==this.Gf)return null;if(e.right!=this.Gf)return this.min(e.right).key;for(var i=e.parent;i!=this.Gf&&e==i.right;)i=(e=i).parent;return i!=this.Gf?i.key:null}return null},js_cols.Pf.prototype.Xf=function(t){if(0<this.size){var e=this.Bf(t);if(e==this.Gf)return null;if(e.left!=this.Gf)return this.max(e.left).key;for(var i=e.parent;i!=this.Gf&&e==i.left;)i=(e=i).parent;return i!=this.Gf?i.key:null}return null},js_cols.Pf.prototype.Yf=function(){return this.min(this.root).key},js_cols.Pf.prototype.qf=function(){return this.max(this.root).key},js_cols.Pf.prototype.Bf=function(t){for(var e=this.root;e!=this.Gf&&0!=this.compare(e.key,t);)e=this.compare(t,e.key)<0?e.left:e.right;return e},js_cols.Pf.prototype.contains=function(t){return null!=this.Bf(t).key},js_cols.Pf.prototype.getValues=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},js_cols.Pf.prototype.xf=function(t){if("array"==js_cols.typeOf(t))for(var e=0;e<t.length;e++)this.Ff(t[e]);else if("function"==js_cols.typeOf(t.forEach))t.forEach(this.Ff,this);else if("function"==js_cols.typeOf(t.getValues))for(var i=t.getValues(),e=0;e<i.length;e++)this.Ff(i[e]);else if("object"==js_cols.typeOf(t))for(var s in t)this.Ff(t[s])},js_cols.Pf.prototype.zf=function(t){if("array"==js_cols.typeOf(t))for(var e=0;e<t.length;e++)this.remove(t[e]);else if("function"==js_cols.typeOf(t.forEach))t.forEach(this.Hf,this);else if("function"==js_cols.typeOf(t.getValues))for(var i=t.getValues(),e=0;e<i.length;e++)this.remove(i[e]);else if("object"==js_cols.typeOf(t))for(var s in t)this.remove(t[s])},js_cols.Pf.prototype.Jf=function(t){if("array"==js_cols.typeOf(t)){for(var e=0;e<t.length;e++)if(!this.contains(t[e]))return!1;return!0}if("function"==js_cols.typeOf(t.forEach))return t.every(this.contains,this);if("function"==js_cols.typeOf(t.getValues)){for(var i=t.getValues(),e=0;e<i.length;e++)if(!this.contains(i[e]))return!1;return!0}if("object"==js_cols.typeOf(t)){for(var s in t)if(!this.contains(t[s]))return!1;return!0}},js_cols.Pf.prototype.range=function(t,e){var i=[];return this.Kf(function(t){i.push(t)},t,e),i},js_cols.Pf.prototype.Zf=function(t,e){if(!this.Qf())for(var i=this.min(this.root);i!=this.Gf;){if(t.call(e,i.key,this))return;i=this.Wf(i)}},js_cols.Pf.prototype.t0=function(t,e,i){if(!this.Qf())for(var s=this.Bf(e);s!=this.Gf;){if(t.call(i,s.key,this))return;s=this.Wf(s)}},js_cols.Pf.prototype.e0=function(t,e,i){if(!this.Qf())for(var s=this.min(this.root),r=this.Bf(e);s!=r;){if(t.call(i,s.key,this))return;s=this.Wf(s)}},js_cols.Pf.prototype.Kf=function(t,e,i,s){if(!this.Qf())for(var r=this.Bf(e),h=this.Bf(i);r!=h;){if(t.call(s,r.key,this))return;r=this.Wf(r)}},js_cols.Pf.prototype.i0=function(t,e){if(!this.Qf())for(var i=this.max(this.root);i!=this.Gf;){if(t.call(e,i.key,this))return;i=this.Uf(i)}},js_cols.Pf.prototype.forEach=function(t,e){if(!this.Qf())for(var i=this.min(this.root);i!=this.Gf;i=this.Wf(i))t.call(e,i.key,i.key,this)},js_cols.Pf.prototype.some=function(t,e){if(!this.Qf())for(var i=this.min(this.root);i!=this.Gf;i=this.Wf(i))if(t.call(e,i.key,i.key,this))return!0;return!1},js_cols.Pf.prototype.every=function(t,e){if(this.Qf())return!1;for(var i=this.min(this.root);i!=this.Gf;i=this.Wf(i))if(!t.call(e,i.key,i.key,this))return!1;return!0},js_cols.Pf.prototype.map=function(t,e){var i=[];if(!this.Qf())for(var s=this.min(this.root);s!=this.Gf;s=this.Wf(s))i.push(t.call(e,s.key,s.key,this));return i},js_cols.Pf.prototype.filter=function(t,e){var i=[];if(!this.Qf())for(var s=this.min(this.root);s!=this.Gf;s=this.Wf(s))t.call(e,s.key,s.key,this)&&i.push(s.key);return i},js_cols.Pf.prototype.getCount=function(){return this.size},js_cols.Pf.prototype.Qf=function(){return 0==this.size},js_cols.Pf.prototype.cs=function(t){var e=js_cols.getCount(t);if(this.getCount()>e)return!1;var i=0;if(this.Qf())return!0;for(var s=this.min(this.root);s!=this.Gf;s=this.Wf(s))js_cols.contains.call(t,t,s.key)&&i++;return i==this.getCount()},js_cols.Pf.prototype.s0=function(t){var e=new js_cols.Pf(this.compare);if(!this.Qf())for(var i=this.min(this.root);i!=this.Gf;i=this.Wf(i))t.contains.call(t,i.key,i.key,this)&&e.Ff(i.key);return e},C33.Pf=class RedBlackSet extends C33.nh{constructor(t){super(),this.r0=new js_cols.Pf(t),this.h0=!1,this.n0=new Set,this.a0=new Set}ac(t){this.h0?this.r0.contains(t)?this.a0.delete(t):this.n0.add(t):this.r0.Ff(t)}_f(t){this.h0?this.r0.contains(t)?this.a0.add(t):this.n0.delete(t):this.r0.remove(t)}hi(t){return this.h0?!!this.n0.has(t)||!this.a0.has(t)&&this.r0.contains(t):this.r0.contains(t)}Ku(){this.r0.clear(),this.n0.clear(),this.a0.clear()}toArray(){if(this.h0)throw new Error("cannot be used in queueing mode");return this.r0.getValues()}ec(){return this.r0.getCount()+this.n0.size-this.a0.size}Zu(){return 0===this.ec()}o0(){if(this.Zu())throw new Error("empty set");if(this.h0)throw new Error("cannot be used in queueing mode");var t=this.r0;return t.min(t.root).key}l0(){if(this.Zu())throw new Error("empty set");if(this.h0)throw new Error("cannot be used in queueing mode");var t=this.o0();return this._f(t),t}u0(t){if(this.h0!==(t=!!t)&&!(this.h0=t)){for(var e of this.a0)this.r0.remove(e);this.a0.clear();for(var i of this.n0)this.r0.Ff(i);this.n0.clear()}}c0(t){this.r0.forEach(t)}*values(){if(!this.Zu()){var e=this.r0;for(let t=e.min(e.root);t!=e.Gf;t=e.Wf(t))yield t.key}}[Symbol.iterator](){return this.values()}}}{let C33=self.We;C33.f0=class PromiseThrottle{constructor(t=C33.hardwareConcurrency){this.d0=t,this.C0=[],this.p0=0}ac(i){return new Promise((t,e)=>{this.C0.push({E3:i,resolve:t,reject:e}),this.m0()})}v0(i){for(let t=0,e=this.C0.length;t<e;++t)if(this.C0[t].E3===i)return t;return-1}S0(t,e){t=this.v0(t);if(-1===t)throw new Error("cannot find promise to resolve");this.C0[t].resolve(e),this.C0.splice(t,1)}g0(t,e){t=this.v0(t);if(-1===t)throw new Error("cannot find promise to reject");this.C0[t].reject(e),this.C0.splice(t,1)}async m0(){if(this.C0.length&&!(this.p0>=this.d0)){this.p0++;var e=this.C0.shift();try{var t=await e.E3();e.resolve(t)}catch(t){e.reject(t)}this.p0--,this.m0()}}static async T0(t,e){let i=[],s=!1;for(var r=[];t--;)r.push((async()=>{for(var t;t=e.pop();){if(s)return;try{i.push(await t())}catch(t){throw s=!0,t}}})());return await Promise.all(r),i}}}{let C33=self.We;C33._0=class RateLimiter{constructor(t,e,i){this.if=t,this.E0=e,this.y0=i||2*e,this.A0=-1,this.I0=-1/0,this.R0=()=>this.M0(),this.w0=!1,this.b0=!1,this.O0=null}G0(t){this.b0=!!t}P0(){return void 0!==C33.Battery&&C33.Battery.IsOnBatteryPower()?this.y0:this.E0}L0(...t){var e,i;-1===this.A0&&(this.O0=t,e=(t=C33.tf())-this.I0,(i=this.P0())<=e&&this.b0?(this.I0=t,this.x0()):this.A0=self.setTimeout(this.R0,Math.max(i-e,4)))}x0(){this.w0=!0;var t=this.O0;this.O0=null,t?this.if(...t):this.if(),this.w0=!1}lf(){this.w0||(this.N0(),this.O0=null,this.I0=C33.tf())}M0(){this.A0=-1,this.I0=C33.tf(),this.x0()}N0(){-1!==this.A0&&(self.clearTimeout(this.A0),this.A0=-1)}lh(){this.N0(),this.if=null,this.O0=null,this.R0=null}}}{let C33=self.We;C33.D0=class SVGRasterManager{constructor(){this.F0=new Map,this.B0=!1,this.$0=null,this.k0=null,this.W0=null,this.V0=null}H0(t){this.B0=!!t}U0(){return this.B0}j0(t){this.$0=t}X0(t){if(this.$0)return this.$0(t);throw new Error("no get base size callback set")}Y0(t){this.k0=t}q0(t,e,i,s,r,h){if(this.k0)return this.k0(t,e,i,s,r,h);throw new Error("no raster at size callback set")}z0(t){this.W0=t}J0(t){if(!this.W0)throw new Error("no release result callback set");this.W0(t)}K0(t){this.V0=t}Z0(){if(!this.V0)throw new Error("no redraw callback set");this.V0()}Q0(t){let e=this.F0.get(t);return e||(e=C33.oh(C33.td,this,t),this.F0.set(t,e)),e.ed(),e}sd(t){this.F0.delete(t.hd())}nd(){for(var t of this.F0.values())t.ad(),t.od()}}}{let C33=self.We,MAX_SURFACE_SIZE=4096;C33.td=class SVGRasterImage{constructor(t,e){this.ld=t,this.ud=e,this.fd=0,this.dd=0,this.Cd=0,this.pd=this.ld.X0(e).then(t=>{this.ld&&(this.dd=t[0],this.Cd=t[1],this.ld.Z0())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.md=!0,this.ld&&this.ld.Z0()}),this.vd=0,this.Sd=0,this.gd=0,this.Td=0,this._d=!1,this.Ed=null,this.yd=!1,this.md=!1}lh(){if(this.fd<=0)throw new Error("already released");this.fd--,0===this.fd&&this.Ad()}ad(){this.Ed&&(this.ld.J0(this.Ed),this.Ed=null)}Ad(){this.ad(),this.ld.sd(this),this.ld=null}hd(){return this.ud}ed(){this.fd++}Id(){return 0<this.fd}Rd(){return this.Ed}od(){this.yd=!0}async Md(i,s,r){if(0!==s&&0!==r&&!this.md&&!this._d){let t=C33.Dh(Math.ceil(s)),e=C33.Dh(Math.ceil(r));var h=Math.max(t,e);h>MAX_SURFACE_SIZE&&(s*=h=MAX_SURFACE_SIZE/h,r*=h,t=Math.min(Math.ceil(t*h),MAX_SURFACE_SIZE),e=Math.min(Math.ceil(e*h),MAX_SURFACE_SIZE)),s<t&&r<e&&(r=(h=s/r)<t/e?(s=e*h,e):(s=t)/h),this.ld.U0()&&(t=Math.ceil(s),e=Math.ceil(r)),t<=this.vd&&e<=this.Sd&&!this.yd||(this._d=!0,this.vd=t,this.Sd=e,h=await this.ld.q0(this.ud,i,this.vd,this.Sd,s,r),this.ld&&(this.ad(),this.Ed=h,this.gd=s,this.Td=r,this._d=!1,this.yd=!1,this.ld.Z0()))}}wd(){return this.pd}Od(){return this.dd}Gd(){return this.Cd}Pd(){return this.gd}Ld(){return this.Td}xd(){return this.md}}}{let lookupHtmlEntity2=function(t){return HTML_ENTITY_MAP.get(t)},C33=(lookupHtmlEntity=lookupHtmlEntity2,self.We),NUMERIC_CHARS=(C33.Nd="\ufeff",new Set("0123456789")),WHITESPACE_CHARS=(C33.Dd=function(t){return NUMERIC_CHARS.has(t)},new Set(" \t\n\r            ​\u2028\u2029  　")),cjkPunctuationRegex=(C33.Fd=function(t){return WHITESPACE_CHARS.has(t)},C33.Bd=function(t){return[...t].filter(t=>!C33.Fd(t)).join("")},C33.$d=function(t){for(var e of t)if(!C33.Fd(e))return!1;return!0},C33.kd=function(t){for(var e of t)if(!C33.Fd(e))return!1;return!0},C33.Wd=function(t){return 1===t.length&&t.charCodeAt(0)<32},C33.Vd=function(t){return[...t].filter(t=>!C33.Wd(t)).join("")},null);try{cjkPunctuationRegex=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(err){console.warn("Unable to detect CJK punctuation: ",err)}C33.Hd=function(t){return!C33.Fd(t)&&cjkPunctuationRegex&&cjkPunctuationRegex.test(t)};let NUMERIC_STRING_CHARS=new Set("0123456789.+-e"),HTML_ENTITY_MAP=(C33.Ud=function(t){if(!(t=t.trim()).length)return!1;var e,i=t.charAt(0);if("-"!==i&&!NUMERIC_CHARS.has(i))return!1;for(e of t)if(!NUMERIC_STRING_CHARS.has(e))return!1;return!0},C33.jd=function(t){let e=t.length;for(;0<e;){var i=t.charAt(e-1);if(!C33.Dd(i))break;--e}return t.substr(0,e)},C33.Xd=function(t){var e=C33.jd(t);let i=t.substr(e.length);return e+(i=i?(parseInt(i,10)+1).toString():"2")},new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]])),HTML_ENTITY_REGEX=/[&<>"']/g,ESCAPE_REGEX=(C33.Yd=function(t){return t.replace(HTML_ENTITY_REGEX,lookupHtmlEntity2)},C33.qd=function(t){t=C33.zd(t,"\\","\\\\"),t=C33.zd(t,'"','\\"');return t=C33.zd(t,"\t","\\t"),t=C33.zd(t,"\r",""),C33.zd(t,"\n","\\n")},C33.Jd=function(t){t=C33.zd(t,"&","&amp;"),t=C33.zd(t,"<","&lt;");return t=C33.zd(t,">","&gt;"),C33.zd(t,'"',"&quot;")},/[-[\]{}()*+?.,\\^$|#\s]/g),intlSegmenter=(C33.us=function(t){return t.replace(ESCAPE_REGEX,"\\$&")},C33.Kd=function(t,e){let i=0;for(var s of t)s===e&&++i;return i},C33.Zd=function(t,e,i=!1){if(!e)return[];i||(t=t.toLowerCase(),e=e.toLowerCase());var s=e.length;let r=0;for(var h,n=[];-1<(h=t.indexOf(e,r));)n.push(h),r=h+s;return n},C33.zd=function(t,e,i){return t.replaceAll(e,()=>i)},C33.Qd=function(t,e,i){return t.replace(new RegExp(C33.us(e),"gi"),()=>i)},C33.tC=function(t,e){"string"==typeof e?t.textContent=e:e.eC()?t.textContent=e.toString():(t.innerHTML=e.iC(),e instanceof C33.Lr&&e.sC(t))},C33.rC=function(t,e){return t instanceof C33.HtmlString||t instanceof C33.Lr?t.equals(e):e instanceof C33.HtmlString||e instanceof C33.Lr?e.equals(t):t===e},C33.hC=function(i,...s){let r=i;for(let t=0,e=s.length;t<e;++t){var h=`{${t}}`;if(!i.includes(h))throw new Error(`missing placeholder '${h}' in string substitution`);r=r.replace(h,s[t].toString())}return r},C33.nC=function(i,...s){let r=i,h=-1,n=-1;for(let t=0,e=s.length;t<e;++t){var a=`{${t}}`;i.includes(a)?(n=t,r=r.replace(a,s[t].toString())):-1===h&&(h=t)}if(0<=h&&0<=n&&h<n)throw new Error(`missing placeholder '${h}' in string substitution`);return r},C33.aC=function(t,e){let i=t;for(var[s,r]of Object.entries(e))i=i.replaceAll(s,r.toString());return i},C33.oC=function(t,e){return e<t?1:t<e?-1:0},C33.lC=function(t,e){t=t.toLowerCase(),e=e.toLowerCase();return e<t?1:t<e?-1:0},null),graphemeSplitter=null,KILOBYTE=(self.Intl&&self.Intl.Segmenter?intlSegmenter=new self.Intl.Segmenter:graphemeSplitter=new self.Le,C33.uC=function(t){if(intlSegmenter){var e,i=[];for(e of intlSegmenter.segment(t))i.push(e.segment);return i}return graphemeSplitter.Oe(t)},C33.cC=function*(t){if(intlSegmenter)for(var e of intlSegmenter.segment(t))yield e.segment;else yield*graphemeSplitter.Ge(t)},C33.fC=function(e){if(intlSegmenter){let t=0;for(var i of intlSegmenter.segment(e))++t;return t}return graphemeSplitter.Pe(e)},1024),MEGABYTE=1024*KILOBYTE,GIGABYTE=1024*MEGABYTE,TERABYTE=1024*GIGABYTE,DEFAULT_FORMATTIME_OPTS=(C33.dC=function(e,i){var i="common."+(i?"dataRates":"dataSizes")+".",s=self.langSub;if(e<KILOBYTE)return s(i+"bytes",e);if(e<MEGABYTE){let t=e/KILOBYTE;return s(i+"kilobytes",t=t<10?Math.round(10*t)/10:Math.round(t))}if(e<GIGABYTE){let t=e/MEGABYTE;return s(i+"megabytes",t=t<10?Math.round(10*t)/10:Math.round(t))}if(e<TERABYTE){let t=e/GIGABYTE;return s(i+"gigabytes",t=t<10?Math.round(10*t)/10:Math.round(t))}{let t=e/TERABYTE;return s(i+"terabytes",t=t<10?Math.round(10*t)/10:Math.round(t))}},{CC:!1,pC:!0,mC:!0,vC:!0,SC:!0});C33.gC=function(t,e){e=Object.assign({},DEFAULT_FORMATTIME_OPTS,e),C33.Lang.PushContext("common.time");var i,s=[],r=self.lang,h=self.langPluralSub,t=(e.pC&&0<(i=Math.floor(t/86400))&&(t-=24*i*3600,s.push(h(".days",null,i))),e.mC&&(0<(i=Math.floor(t/3600))||s.length)&&(t-=3600*i,s.push(h(".hours",null,i))),e.vC&&(0<(i=Math.floor(t/60))||s.length||!e.SC)&&(t-=60*i,s.push(h(".minutes",null,i))),e.SC&&(i=Math.floor(t%60),s.push(h(".seconds",null,i))),(e.CC?r(".approx-prefix"):"")+s.join(r(".separator")));return C33.Lang.PopContext(),t},C33.TC=function(t,e){let i=t<0?"-":"";var t=(t=Math.abs(t)).toString(),s=e-t.length;for(let t=0;t<s;++t)i+="0";return i+t},C33._C=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},C33.EC=function(t,e){let i=t.split(".").map(t=>t.trim()),s=e.split(".").map(t=>t.trim());C33.$n(i,4,"0"),C33.$n(s,4,"0"),i=i.map(t=>parseInt(t,10)),s=s.map(t=>parseInt(t,10));for(let t=0;t<4;++t){var r=i[t]-s[t];if(0!=r)return r<0?-1:1}return 0},C33.yC=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{var e=Math.floor(16*Math.random());return("x"===t?e:3&e|8).toString(16)})},C33.AC=function(i,s){if(i.length!==s.length)throw new Error("strings must be same length");let r=0;for(let t=0,e=i.length;t<e;++t)i.charAt(t)!==s.charAt(t)&&++r;return r},C33.IC=function(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;let i,s,r,h,n,a;for(e.length<t.length&&(i=t,t=e,e=i),a=Array(t.length+1),s=0;s<=t.length;s++)a[s]=s;for(s=1;s<=e.length;s++){for(h=s,r=1;r<=t.length;r++)n=e[s-1]===t[r-1]?a[r-1]:Math.min(a[r-1]+1,Math.min(h+1,a[r]+1)),a[r-1]=h,h=n;a[t.length]=h}return a[t.length]}}{let bbToHtmlReplacerFunc2=function(t,e,i){var s=BB_CODE_MAP.get(i);if(!s)return"class"===i?e?"</span>":`<span class="bbclass${classIndex++}">`:t;if("string"!=typeof s)return Array.isArray(s)?(r=s[0],h=s[1],e?"</"+r+">":`<${r} class="${h}">`):void 0;if("a"===s&&0===linkActions.length||"abbr"===s&&0===tipList.length)return t;if("a"!==s||e){if("abbr"!==s||e)return"<"+e+s+">";{var r=parseInt(i.substring(3),10)-1;if(r<0||r>=tipList.length)throw new Error("invalid bbcode tip substitution");var h=tipList[r];let t="";if("string"==typeof h?t=h:"function"==typeof h&&(t=h()),"string"!=typeof t)throw new TypeError("invalid bbcode tip");return`<abbr title="${C33.zd(t,'"',"&quot;")}">`}}t=parseInt(i.substring(1),10)-1;if(t<0||t>=linkActions.length)throw new Error("invalid bbcode link substitution");e=linkActions[t];if("string"==typeof e)return`<a href="${linkActions[t]}">`;if("function"==typeof e)return`<a class="bblink${t}">`;throw new TypeError("invalid bbcode link action")},C33=(bbToHtmlReplacerFunc=bbToHtmlReplacerFunc2,self.We),assert=self.assert,BB_CODE_MAP=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),SELF_CLOSING_TAGS=new Set(["icon"]),BBREGEX=/\[(\/?)([a-zA-Z0-9]+)\]/g,CUSTOM_BBREGEX=/\[(\/?)([^\[\n]*?)\]/g,linkActions=null,tipList=null,classIndex=0,LINEBREAK_REGEX=/\n/g;C33.Lr=class BBString{constructor(t,e){if(this.RC=e&&e.MC?t:C33.Yd(t),this.wC="",this.bC=!1,this.OC=[],this.GC=[],e){if(this.bC=!!e.convertLineBreaks,e.links){if(9<e.links.length)throw new Error("too many links");this.OC=e.links}if(e.tips){if(9<e.tips.length)throw new Error("too many tips");this.GC=e.tips}}this.PC=this.RC.includes("["),this.LC=this.bC&&this.RC.includes("\n"),this.xC=!this.PC&&!this.LC&&!this.RC.includes("&"),this.NC=!1,this.DC=[]}toString(){return this.RC}valueOf(){return this.RC}eC(){return this.xC}FC(){return this.PC?this.RC.replace(BBREGEX,""):this.RC}iC(){if(this.xC)return this.RC;if(!this.wC&&this.RC){let t=this.RC;this.PC&&(classIndex=0,linkActions=this.OC,tipList=this.GC,t=t.replace(BBREGEX,bbToHtmlReplacerFunc2),linkActions=null,tipList=null),this.LC&&(t=t.replace(LINEBREAK_REGEX,"<br>")),this.wC=t}return this.wC}sC(i){if(this.OC.length)for(let t=0,e=this.OC.length;t<e;++t){var s=this.OC[t];if("function"==typeof s){var r=i.querySelector(".bblink"+t);if(!r)throw new Error("unable to attach BBString link handler");r.onclick=s}}}equals(t){return t instanceof C33.HtmlString?this.iC()===t.iC():t instanceof C33.Lr?this.RC===t.RC:this.RC===t}BC(){if(!this.NC){var i=[],e=this.RC,s=[];let t=CUSTOM_BBREGEX.lastIndex=0;for(var r;null!==(o=CUSTOM_BBREGEX.exec(e));){var h=o.index;if(!(0<h&&"\\"===e.charAt(h-1))){var n=o[0],a=o[1],o=o[2],l=e.substring(t,h);if(t=h+n.length,l&&i.push({text:l,$C:s.slice(0)}),o)if(a){var u=o.toLowerCase();for(let t=s.length-1;0<=t;--t)if(s[t].tag===u){s.splice(t,1);break}}else{let t=o,e=null;h=o.indexOf("=");if(-1!==h?(t=o.substring(0,h).toLowerCase(),e=o.substring(h+1)):t=t.toLowerCase(),SELF_CLOSING_TAGS.has(t)){if("icon"!==t)throw new Error("unknown self-closing tag "+t);i.push({icon:e,$C:s.slice(0)})}else s.push({tag:t,kC:e})}}}t<e.length&&i.push({text:e.substring(t),$C:s.slice(0)});for(r of i)r.text&&(r.text=this.WC(r.text));this.DC=i.map(t=>t.icon?C33.oh(C33.VC,{icon:t.icon,$C:t.$C}):C33.oh(C33.HC,{UC:C33.uC(t.text),$C:t.$C})),this.NC=!0}return this.DC}WC(t){return t=C33.zd(t,"\\[","["),C33.zd(t,"\\\\","\\")}static jC(t){return C33.oh(C33.Lr,t,{MC:!0}).FC()}static XC(t){return t.replace(CUSTOM_BBREGEX,"")}}}{let IsWordBreakWhiteSpace2=function(t){return" "!==t&&" "!==t&&C33.Fd(t)},IsOpeningCJKPunctiationChar2=function(t){return CJK_OPEN_PUNCTUATION.has(t)},IsContinuingCJKPunctuationChar2=function(t){return C33.Hd(t)&&!IsOpeningCJKPunctiationChar2(t)},WordBreakTrimEnd2=function(t){for(;0<t.length&&IsWordBreakWhiteSpace2(t.at(-1));)t.pop()},IsNewline2=function(t){return"\n"===t||"\r\n"===t},C33=(IsWordBreakWhiteSpace=IsWordBreakWhiteSpace2,IsOpeningCJKPunctiationChar=IsOpeningCJKPunctiationChar2,IsContinuingCJKPunctuationChar=IsContinuingCJKPunctuationChar2,WordBreakTrimEnd=WordBreakTrimEnd2,IsNewline=IsNewline2,self.We),CJK_OPEN_PUNCTUATION=new Set("〈《「『【〔〖〘〚〝");C33.YC=class WordWrap{constructor(){this.qC=[],this.zC=null}JC(){return this.qC}KC(){return this.qC.length}ZC(t){this.zC=t}QC(t,e){let i=0,s=0,r=0,h=0,n=0;for(var a of t){var o;-1===a.tp()&&(o=e(a),a.ep(o.height),a.ip(o.fontBoundingBoxAscent||0),a.sp(o.fontBoundingBoxDescent||0),a.rp(o.hp||0),a.np()?a.op(o.width):a.lp()&&a.up(this.zC)),i+=a.tp(),s=Math.max(s,a.cp()),r=Math.max(r,a.fp()),h=Math.max(h,a.Cp()),n=Math.max(n,a.pp())}return{width:i,height:s,fontBoundingBoxAscent:r,fontBoundingBoxDescent:h,hp:n}}mp(t,e,i,s,r,h){this.qC.push(C33.oh(C33.YC.vp,{Sp:t,width:e,height:i,fontBoundingBoxAscent:s,fontBoundingBoxDescent:r,hp:h}))}YC(e,i,s,r,h){if("string"==typeof e&&(e=[C33.oh(C33.HC,{UC:C33.uC(e)})]),C33.Dn(this.qC),!(!e.length||1===e.length&&e[0].np()&&e[0].Zu()||s<2)){if(1===e.length){var n=e[0];if(n.np()&&n.gp()<=100&&!n.Tp()){var{width:a,height:o,fontBoundingBoxAscent:l,fontBoundingBoxDescent:u,hp:c}=i(n);if(n.op(a+=h),n.ep(o),n.ip(l||0),n.sp(u||0),n.rp(c||0),a<=s)return void this.mp([n],a,o,l,u,c)}}let t;t="word"===r?this._p(e):"cjk"===r?this.Ep(e):this.yp(e),this.Ap(t,i,s,h)}}_p(t){var e,i=[];let s=[],r=!1;for(e of t){var h,n,a=e.Ip();if(e.lp())0<s.length&&i.push(s),i.push([e]),s=[];else for(var o of e.Rp())IsNewline2(o)?(0<s.length&&i.push(s),i.push([C33.oh(C33.HC,{UC:["\n"],$C:a})]),s=[]):0===s.length?(s.push(C33.oh(C33.HC,{UC:[o],$C:a})),r=IsWordBreakWhiteSpace2(o)):(h=IsWordBreakWhiteSpace2(o))===r?(n=s.at(-1)).Ip()===a?n.Mp(o):s.push(C33.oh(C33.HC,{UC:[o],$C:a})):(i.push(s),s=[C33.oh(C33.HC,{UC:[o],$C:a})],r=h)}return 0<s.length&&i.push(s),i}Ep(t){var e,i=[];let s=[],r=!1;for(e of t){var h,n=e.Ip();if(e.lp())0<s.length&&i.push(s),i.push([e]),s=[];else for(var a of e.Rp())IsNewline2(a)?(0<s.length&&i.push(s),i.push([C33.oh(C33.HC,{UC:["\n"],$C:n})]),s=[]):r=(0===s.length?s.push(C33.oh(C33.HC,{UC:[a],$C:n})):r||IsContinuingCJKPunctuationChar2(a)?(h=s.at(-1)).Ip()===n?h.Mp(a):s.push(C33.oh(C33.HC,{UC:[a],$C:n})):(i.push(s),s=[C33.oh(C33.HC,{UC:[a],$C:n})]),IsOpeningCJKPunctiationChar2(a))}return 0<s.length&&i.push(s),i}yp(t){var i,s=[];for(let e of t)e.np()?(i=e.Rp(),C33.Jr(s,i.map(t=>[C33.oh(C33.HC,{UC:[t],$C:e.Ip()})]))):s.push([e]);return s}wp(t){return t.map(t=>t.bp())}Op(t,e){var i=t.length?t.at(-1):null;let s=0;i&&i.np()&&e[0].np()&&e[0].Ip()===i.Ip()&&(i.Gp(e[0].Rp()),s=1);for(var r=e.length;s<r;++s){var h=e[s];t.push(h.bp())}}Ap(t,e,i,s){let r=[],h=0,n=0,a=0,o=0,l=0;for(var u of t){var c,f,d;1===u.length&&u[0].np()&&1===u[0].gp()&&IsNewline2(u[0].Rp()[0])?(0===n&&(c=e(C33.oh(C33.HC,{UC:[" "],$C:u[0].Ip()})),n=c.height,a=c.fontBoundingBoxAscent||0,o=c.fontBoundingBoxDescent||0,l=c.hp||0),this.mp(r,h,n,a,o,l),r=[],h=0,n=0,a=0,o=0,l=0):(c=this.wp(r),this.Op(c,u),d=(f=this.QC(c,e)).width,l=i<=d?(0<r.length&&this.mp(r,h,n,a,o,l),r=[],u[0].np()&&C33.kd(u[0].Rp())?(h=0,n=0,a=0,o=0):(this.Op(r,u),u=this.QC(r,e),h=u.width,n=u.height,a=u.fontBoundingBoxAscent,o=u.fontBoundingBoxDescent,u.hp)):(r=c,h=d,n=f.height,a=f.fontBoundingBoxAscent,o=f.fontBoundingBoxDescent,f.hp))}0<r.length&&this.mp(r,h,n,a,o,l),this.Pp(e,s)}Pp(e,i){for(var s of this.qC){var r,h,n=s.Lp();if(n.length){let t=n.at(-1);t.np()&&(h=(r=t.Rp()).slice(0),WordBreakTrimEnd2(h),0===h.length?(s.xp(-t.tp()),n.pop()):h.length<r.length&&(t.Np(h),r=e(t).width,h=t.tp()-r,t.op(r),s.xp(-h)),0!==i)&&0<n.length&&((t=n.at(-1)).xp(i),s.xp(i))}}}Ku(){C33.Dn(this.qC)}Dp(){return this.qC.reduce((t,e)=>Math.max(t,e.tp()),0)}Fp(){return this.qC.reduce((t,e)=>t+e.cp(),0)}}}{let C33=self.We;C33.YC.vp=class WordWrapLine{constructor(t){this.DC=t.Sp||[],this.Bp=t.width||-1,this.$p=t.height||-1,this.kp=t.fontBoundingBoxAscent||-1,this.Wp=t.fontBoundingBoxDescent||-1,this.Vp=t.hp||-1,this.Hp=0,this.Up=0}Sp(){return this.DC.values()}*jp(){var e=this.DC;for(let t=e.length-1;0<=t;--t)yield e[t]}Lp(){return this.DC}xp(t){this.Bp+=t}tp(){return this.Bp}cp(){return this.$p}Xp(){return this.kp}Cp(){return this.Wp}pp(){return this.Vp}Yp(t){this.Hp=t}qp(){return this.Hp}zp(t){this.Up=t}Jp(){return this.Up}}}{let C33=self.We;C33.Kp=class FragmentBase{constructor(t){this.Zp=t.$C||[],this.Bp=t.width||-1,this.$p=t.height||-1,this.kp=t.fontBoundingBoxAscent||-1,this.Wp=t.fontBoundingBoxDescent||-1,this.Vp=t.hp||-1,this.Hp=0,this.Up=0}np(){return!1}lp(){return!1}Ip(){return this.Zp}Qp(e){var i=this.Zp;for(let t=i.length-1;0<=t;--t){var s=i[t];if(s.tag===e)return s}return null}t1(t){return!!this.Qp(t)}e1(){var t,e=new Map;for(t of this.Zp)e.set(t.tag,t.kC);return e}xp(t){this.Bp+=t}op(t){this.Bp=t}tp(){return this.Bp}ep(t){this.$p=t}cp(){return this.$p}ip(t){this.kp=t}fp(){return this.kp}sp(t){this.Wp=t}Cp(){return this.Wp}rp(t){this.Vp=t}pp(){return this.Vp}Yp(t){this.Hp=t}qp(){return this.Hp}zp(t){this.Up=t}Jp(){return this.Up}}}{let C33=self.We;C33.HC=class TextFragment extends C33.Kp{constructor(t){super(t),this.i1=t.UC}np(){return!0}Gp(t){C33.Jr(this.i1,t),this.Bp=-1,this.$p=-1,this.kp=-1,this.Wp=-1,this.Vp=-1}Mp(t){this.i1.push(t)}bp(){return C33.oh(C33.HC,{UC:this.i1.slice(0),$C:this.Zp,width:this.Bp,height:this.$p,fontBoundingBoxAscent:this.kp,fontBoundingBoxDescent:this.Wp,hp:this.Vp})}Rp(){return this.i1}Np(t){this.i1=t}gp(){return this.i1.length}Zu(){return 0===this.i1.length}Tp(){return this.i1.includes("\n")}}}{let C33=self.We;C33.VC=class IconFragment extends C33.Kp{constructor(t){super(t),this.s1=t.icon}lp(){return!0}h1(){return this.s1}bp(){return C33.oh(C33.VC,{icon:this.s1,$C:this.Zp,width:this.Bp,height:this.$p,fontBoundingBoxAscent:this.kp,fontBoundingBoxDescent:this.Wp,hp:this.Vp})}n1(t){var e;return t?(e=Number(this.s1),String(e)===this.s1?(e=Math.floor(e),t.a1(e)):t.o1(this.s1)):null}up(t){t=this.n1(t);this.Bp=t?this.$p*t.tp()/t.cp():0}l1(t){t=this.n1(t);return t?t.l1():null}gp(){return 1}}}{let C33=self.We;C33.u1=class TextIconManager{constructor(t){this.c1=new Map,this.f1=t.d1,this.C1=t.m1}lh(){for(var t of this.c1.values())t.lh();this.c1.clear()}v1(t){var e,i=this.c1.get(t);return i||(e=this.f1(t),i=C33.oh(C33.S1,this,{source:t,g1:e}),this.c1.set(t,i)),i}T1(t){return this.c1.has(t)}_1(t){var e=this.c1.get(t);e&&e.lh(),this.c1.delete(t)}async E1(t){return this.C1(t)}}}{let C33=self.We;C33.S1=class TextIconSet{constructor(t,e){this.A1=t,this.I1=e.source,this.R1=[],this.M1=new Map,this.w1=!1,this.b1=!1,this.O1=null;var i=e.g1.G1;for(let t=0,e=i.length;t<e;++t){var s=i[t],r=C33.oh(C33.P1,this,{index:t,tag:s.tag,source:s.source,width:s.width,height:s.height});this.R1.push(r),s.tag&&this.M1.set(s.tag.toLowerCase(),r)}}lh(){for(var t of this.R1)t.lh();C33.Dn(this.R1),this.M1.clear(),this.A1=null,this.I1=null}L1(){return this.w1}N1(){return this.b1}D1(){return this.O1||(this.O1=this.F1()),this.O1}async F1(){if(!this.w1){this.w1=!0,this.b1=!0;var t=await this.A1.E1(this.I1);if(this.A1){var i=t.G1;for(let t=0,e=Math.min(i.length,this.R1.length);t<e;++t){var s=i[t].B1;this.R1[t].W1(s)}this.b1=!1}}}a1(t){return(t=Math.floor(t))<0||t>=this.R1.length?null:this.R1[t]}o1(t){return this.M1.get(t.toLowerCase())||null}}}{let C33=self.We;C33.P1=class TextIcon{constructor(t,e){this.V1=t,this.I1=e.source||null,this.H1=e.index,this.U1=e.tag,this.Bp=e.width,this.$p=e.height,this.j1=null}lh(){this.Bp=0,this.$p=0,this.V1=null}X1(){return this.I1}tp(){return this.Bp}cp(){return this.$p}W1(t){this.j1=t}l1(){return this.j1}}}{let PlaneFromPoints2=function(t,e,i,s){var r=tempVec3c;vec32.F(tempVec3a,i,e),vec32.F(tempVec3b,t,e),vec32.Nt(r,tempVec3a,tempVec3b),vec32.normalize(r,r),s.set(r[0],r[1],r[2],vec32.xt(t,r))},IsInFrontOfPlane2=function(t,e,i,s,r,h,n){var a=n.x,o=n.y,l=n.z,u=n.w,c=n.Y1,f=n.q1,n=n.z1,d=1-c,C=1-f,p=1-n;return u<=a*t*c+a*s*d+o*e*f+o*r*C+l*i*n+l*h*p||u<a*s*c+a*t*d+o*r*f+o*e*C+l*h*n+l*i*p},IsPointInFrontOfPlane2=function(t,e,i,s){var r=s.x;return s.w<=r*t+s.y*e+s.z*i},C33=(PlaneFromPoints=PlaneFromPoints2,IsInFrontOfPlane=IsInFrontOfPlane2,IsPointInFrontOfPlane=IsPointInFrontOfPlane2,self.We),glMatrix=self.Se,vec32=glMatrix.Re,vec42=glMatrix.Me,mat42=glMatrix.Ee,tempVec3a=vec32.create(),tempVec3b=vec32.create(),tempVec3c=vec32.create(),tempVec4=vec42.create(),tempMat4=mat42.create(),neartl=vec32.create(),neartr=vec32.create(),nearbl=vec32.create(),nearbr=vec32.create(),fartl=vec32.create(),fartr=vec32.create(),farbl=vec32.create(),farbr=vec32.create(),unitViewport=vec42.A(0,0,1,1);C33.J1={K1(t,e,i,s,r,h,n){var a=s[0]*t+s[4]*e+s[8]*i+s[12],o=s[1]*t+s[5]*e+s[9]*i+s[13],l=s[2]*t+s[6]*e+s[10]*i+s[14],t=s[3]*t+s[7]*e+s[11]*i+s[15],e=r[0]*a+r[4]*o+r[8]*l+r[12]*t,i=r[1]*a+r[5]*o+r[9]*l+r[13]*t,s=r[2]*a+r[6]*o+r[10]*l+r[14]*t,a=r[3]*a+r[7]*o+r[11]*l+r[15]*t;return 0!=a&&(i*=a=1/a,s*=a,n[0]=(.5*(e*=a)+.5)*h[2]+h[0],n[1]=(.5*i+.5)*h[3]+h[1],n[2]=.5*(1+s),!0)},Z1(t,e,i,s,r,h,n){var a=tempMat4,o=tempVec4;return mat42.multiply(a,r,s),null!==mat42.R(a,a)&&(o[0]=(t-h[0])/h[2]*2-1,o[1]=(e-h[1])/h[3]*2-1,o[2]=2*i-1,o[3]=1,vec42.kt(o,o,a),0!==o[3])&&(o[3]=1/o[3],n[0]=o[0]*o[3],n[1]=o[1]*o[3],n[2]=o[2]*o[3],!0)},Q1(t,e,i,s,r,h,n){var a=tempVec3a,o=tempVec3b;if(!C33.J1.Z1(t,e,0,s,r,h,a))return!1;if(!C33.J1.Z1(t,e,1,s,r,h,o))return!1;t=tempVec3b,vec32.F(t,o,a),e=tempVec3c,vec32.set(e,0,0,1),s=-i,r=vec32.xt(e,t);let l=0;if(0===r){if(0!==vec32.xt(e,a)+s)return!1}else if((l=-(vec32.xt(a,e)+s)/r)<0)return!1;return vec32.bt(n,a,t,l),!0}};class Plane{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.Y1=NaN,this.q1=NaN,this.z1=NaN}set(t,e,i,s){this.x=t,this.y=e,this.z=i,this.w=s,this.Y1=0<t?1:0,this.q1=0<e?1:0,this.z1=0<i?1:0}}C33.J1.tm=class ViewFrustum{constructor(){this.im=new Plane,this.rm=new Plane,this.hm=new Plane,this.nm=new Plane,this.am=new Plane,this.om=new Plane}lm(t,e){var i=unitViewport;C33.J1.Z1(0,1,0,t,e,i,neartl),C33.J1.Z1(1,1,0,t,e,i,neartr),C33.J1.Z1(0,0,0,t,e,i,nearbl),C33.J1.Z1(1,0,0,t,e,i,nearbr),C33.J1.Z1(0,1,1,t,e,i,fartl),C33.J1.Z1(1,1,1,t,e,i,fartr),C33.J1.Z1(0,0,1,t,e,i,farbl),C33.J1.Z1(1,0,1,t,e,i,farbr),PlaneFromPoints2(nearbl,neartl,fartl,this.im),PlaneFromPoints2(neartl,neartr,fartr,this.rm),PlaneFromPoints2(neartr,nearbr,farbr,this.hm),PlaneFromPoints2(nearbr,nearbl,farbl,this.nm),PlaneFromPoints2(farbl,fartl,fartr,this.om),PlaneFromPoints2(nearbr,neartr,neartl,this.am)}um(t,e,i,s,r,h){return IsInFrontOfPlane2(t,e,i,s,r,h,this.im)&&IsInFrontOfPlane2(t,e,i,s,r,h,this.rm)&&IsInFrontOfPlane2(t,e,i,s,r,h,this.hm)&&IsInFrontOfPlane2(t,e,i,s,r,h,this.nm)&&IsInFrontOfPlane2(t,e,i,s,r,h,this.am)&&IsInFrontOfPlane2(t,e,i,s,r,h,this.om)}fm(t,e,i){return!IsPointInFrontOfPlane2(t,e,i,this.am)}}}{let C33=self.We,glMatrix=self.Se,vec32=glMatrix.Re,vec42=glMatrix.Me,mat42=glMatrix.Ee,tempMat4=mat42.create(),tmpVec3a=vec32.A(0,0,0),tmpVec3b=vec32.A(0,0,0),tmpVec3c=vec32.A(0,0,0),defaultUpVector=vec32.A(0,1,0),tmpVec4=vec42.A(0,0,0,0),tmpQuad=new C33.Jl,tmpRect=new C33.Rect,defaultTexCoordsQuad=new C33.Jl(0,0,1,0,1,1,0,1),DEFAULT_RENDERERBASE_OPTS={dm:1,Cm:1e4},matWebGLtoWebGPU=mat42.A(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);C33.J1.pm=class RendererBase{constructor(t){t=Object.assign({},DEFAULT_RENDERERBASE_OPTS,t),this.Bp=0,this.$p=0,this.vm=C33.Sh(45),this.Sm=Math.tan(this.vm/2),this.gm=mat42.create(),this.Tm=mat42.create(),this._m=!1,this.Em=t.dm,this.ym=t.Cm,this.Am=[],this.Im=new Map,this.Rm=null,this.Mm=null,this.wm=null,this.Om=null,this.Gm=null,this.Pm=null,this.Lm=null,this.xm=null,this.Nm=null,this.Dm=null,this.Fm=null,this.Bm=null,this.$m=new Map,this.km=null,this.Wm=[],this.Vm=new Map,this.Hm=0,this.Um=0,this.jm=1,this.Xm=[this.jm],this.Ym=1,this.qm=[this.Ym],this.zm=.5,this.Jm=[this.zm],this.Km=0,this.Zm=!0,this.Qm=!1}t2(t){let e=0,i=t.length,s=0;for(;e<i;)t[e++]=s,t[e++]=s+1,t[e++]=s+2,t[e++]=s,t[e++]=s+2,t[e++]=s+3,s+=4}e2(){this.Hm=0,this.Um=0,this.Rm=null,this.Mm=null,this.wm=null,this.Om=null,this.Gm=null,this.Pm=null,this.Lm=null,this.xm=null,this.Nm=null,this.Dm=null,this.Fm=null,this.Bm=null,this.i2()}s2(){this.e2(),this.km=null}h2(){for(var t of this.Am)t.lh();this.e2()}tp(){return this.Bp}cp(){return this.$p}n2(t){return this.a2()?100:t/(2*this.o2())}l2(t){return this.a2()?t/(2*this.o2())/this.n2(t):1}u2(t){this.Em=t}c2(){return this.Em}f2(t){this.ym=t}d2(){return this.ym}C2(t){this.vm=t,this.Sm=Math.tan(this.vm/2)}m2(){return this.vm}o2(){return this.Sm}v2(){this._m=!1}S2(){this._m=!0}a2(){return!this._m}g2(){return this._m}T2(t,e,i=.5,s=.5){var r,h,n=this.c2(),a=this.d2(),o=this.m2();.5===i&&.5===s?this._2()?mat42.Tt(t,o,e,n,a):mat42.perspective(t,o,e,n,a):(o=2*(i=1-i)-2,i=2*i,r=2*s-2,s=2*s,e=(h=this.o2()*n)*e,mat42.St(t,o*e,i*e,r*h,s*h,n,a),this._2()&&mat42.mul(t,matWebGLtoWebGPU,t))}E2(t,e,i,s=1){var r=self.devicePixelRatio,h=2*this.n2(i)*r*this.o2()/i,e=e*h/(2*r*s),i=i*h/(2*r*s),h=-e,r=e,s=-i,e=i;this._2()?mat42.At(t,h,r,s,e,this.c2(),this.d2()):mat42.ortho(t,h,r,s,e,this.c2(),this.d2())}A2(t,e,i,s,r,h=1){let n=1;this.a2()&&(n=200*this.o2()/r);var r=tmpVec3c,a=(vec32.set(r,n,-n,1),tmpVec3a),o=tmpVec3b;vec32.multiply(a,e,r),vec32.multiply(o,i,r),mat42.It(t,a,o,s||defaultUpVector),r[2]=h,mat42.scale(t,t,r)}I2(t,e,i,s,r,h,n,a){return vec32.set(tmpVec3a,t,e,i),vec32.set(tmpVec3b,s,r,h),this.A2(tempMat4,tmpVec3a,tmpVec3b,defaultUpVector,n,a),tempMat4}R2(t){this.Am.push(t),this.Im.set(t.qc(),t)}M2(t){var e=this.Am.indexOf(t);-1!==e&&this.Am.splice(e,1),this.Im.delete(t.qc())}i2(){C33.Dn(this.Am),this.Im.clear()}w2(t){return this.Im.get(t)||null}b2(){return this.Rm}O2(){this.G2(this.Rm)}P2(){return this.Mm}L2(){this.G2(this.Mm)}N2(){this.G2(this.wm)}D2(){this.G2(this.Om)}F2(){this.G2(this.Gm)}B2(){this.G2(this.Pm)}W2(){this.G2(this.Lm)}V2(){this.G2(this.xm)}H2(){this.G2(this.Nm)}U2(){this.G2(this.Dm)}j2(){this.G2(this.Fm)}X2(){this.G2(this.Bm)}Y2(t){this.km=t}q2(){return this.km}z2(t,e,i,s){var r=C33.J1.K2.J2(t,e,i,s);let h=this.$m.get(r);return h||(h=C33.oh(C33.J1.K2,this,t,e,i,s),this.$m.set(r,h)),h.Z2(),h}Q2(t){t.tv(),0===t.sv()&&(this.km===t&&(this.km=null),this.$m.delete(t.rv()),t.lh())}hv(t){C33.Dn(this.Wm),this.Vm.clear();let e=0;for(var i of t){var s=i[0],r=i[1],i=i[2];this.Wm.push([r,i]),this.Vm.set(s,{number:e,nv:r,av:i}),e++}}ov(t){return this.Wm[t]}lv(t){return this.ov(t)[0]}uv(t){return this.ov(t)[1]}cv(t){t=this.Vm.get(t);if(void 0===t)throw new Error("invalid blend name");return t}dv(t){t=this.Vm.get(t);if(void 0===t)throw new Error("invalid blend name");return t.number}Cv(t){this.Hm=t}pv(){return this.Hm}mv(t){this.Um=t,this.km=null}vv(){return this.Um}vp(t,e,i,s){var r=C33.Eh(t,e,i,s),h=Math.sin(r),r=Math.cos(r),n=.5*this.jm,h=h*n,r=r*n,n=this.Ym;2===n?this.Sv(t,e,0,i,s,0,h,r):1===n?this.gv(t,e,0,i,s,0,h,r):this.Tv(t,e,0,i,s,0,h,r)}_v(t,e,i,s,r,h){var n=C33.Eh(t,e,s,r),a=Math.sin(n),n=Math.cos(n),o=.5*this.jm,a=a*o,n=n*o,o=this.Ym;2===o?this.Sv(t,e,i,s,r,h,a,n):1===o?this.gv(t,e,i,s,r,h,a,n):this.Tv(t,e,i,s,r,h,a,n)}Sv(t,e,i,s,r,h,n,a){var o=this.zm,t=t+o-a,e=e+o-n,s=s+o+a,r=r+o+n,o=2*a,l=2*n;this.Ev(t+n,e-a,i,s+n,r-a,h,s-n-o,r+a-l,h,t-n+o,e+a+l,i,defaultTexCoordsQuad)}gv(t,e,i,s,r,h,n,a){var o=this.zm,t=t+o-a,e=e+o-n,s=s+o+a,r=r+o+n;this.Ev(t+n,e-a,i,s+n,r-a,h,s-n,r+a,h,t-n,e+a,i,defaultTexCoordsQuad)}Tv(t,e,i,s,r,h,n,a){var o=this.zm,t=t+o,e=e+o,s=s+o,r=r+o;this.Ev(t+n,e-a,i,s+n,r-a,h,s-n,r+a,h,t-n,e+a,i,defaultTexCoordsQuad)}yv(t,e,i,s,r,h){var n=C33.Eh(t,e,i,s),a=Math.sin(n),n=Math.cos(n),o=.5*this.jm,a=a*o,n=n*o,o=this.Ym;2===o?this.Av(t,e,i,s,a,n,r,h):1===o?this.Iv(t,e,i,s,a,n,r,h):this.Rv(t,e,i,s,a,n,r,h)}Av(t,e,i,s,r,h,n,a){var o=this.zm,t=t+o-h,e=e+o-r,i=i+o+h,s=s+o+r,o=2*h,l=2*r,u=t+r,c=e-h,t=t-r+o,e=e+h+l,f=i+r,d=s-h,i=i-r-o,r=s+h-l;tmpQuad.set(u,c,f,d,i,r,t,e),tmpRect.set(n,0,a,0),this.Mv(tmpQuad,tmpRect)}Iv(t,e,i,s,r,h,n,a){var o=this.zm,t=t+o-h,e=e+o-r,i=i+o+h,s=s+o+r,o=t+r,l=e-h,t=t-r,e=e+h,u=i+r,c=s-h,i=i-r,r=s+h;tmpQuad.set(o,l,u,c,i,r,t,e),tmpRect.set(n,0,a,0),this.Mv(tmpQuad,tmpRect)}Rv(t,e,i,s,r,h,n,a){var o=this.zm,t=t+o,e=e+o,i=i+o,s=s+o,o=t+r,l=e-h,t=t-r,e=e+h,u=i+r,c=s-h,i=i-r,r=s+h;tmpQuad.set(o,l,u,c,i,r,t,e),tmpRect.set(n,0,a,0),this.Mv(tmpQuad,tmpRect)}wv(t,e,i,s){var r=.5*this.jm,h=this.Ym;2===h?this.bv(t,e,i,s,r):1===h?this.Ov(t,e,i,s,r):this.Gv(t,e,i,s,r)}bv(t,e,i,s,r){this.Sv(t,e,0,i,e,0,0,r),this.Sv(i,e,0,i,s,0,r,0),this.Sv(i,s,0,t,s,0,0,-r),this.Sv(t,s,0,t,e,0,-r,0)}Ov(t,e,i,s,r){this.gv(t,e,0,i,e,0,0,r),this.gv(i,e,0,i,s,0,r,0),this.gv(i,s,0,t,s,0,0,-r),this.gv(t,s,0,t,e,0,-r,0)}Gv(t,e,i,s,r){this.Tv(t,e,0,i,e,0,0,r),this.Tv(i,e,0,i,s,0,r,0),this.Tv(i,s,0,t,s,0,0,-r),this.Tv(t,s,0,t,e,0,-r,0)}Pv(t){this.wv(t.gl(),t.Tl(),t._l(),t.El())}Lv(t){var e=C33.Eh(t.Qh(),t.tn(),t.sn(),t.rn()),i=Math.sin(e),e=Math.cos(e),s=.5*this.jm,i=i*s,e=e*s,s=this.Ym;2===s?this.xv(t,i,e):1===s?this.Nv(t,i,e):this.Dv(t,i,e)}xv(t,e,i){this.Sv(t.Qh(),t.tn(),0,t.sn(),t.rn(),0,e,i),this.Sv(t.sn(),t.rn(),0,t.hn(),t.nn(),0,i,-e),this.Sv(t.hn(),t.nn(),0,t.an(),t.ln(),0,-e,-i),this.Sv(t.an(),t.ln(),0,t.Qh(),t.tn(),0,-i,e)}Nv(t,e,i){this.gv(t.Qh(),t.tn(),0,t.sn(),t.rn(),0,e,i),this.gv(t.sn(),t.rn(),0,t.hn(),t.nn(),0,i,-e),this.gv(t.hn(),t.nn(),0,t.an(),t.ln(),0,-e,-i),this.gv(t.an(),t.ln(),0,t.Qh(),t.tn(),0,-i,e)}Dv(t,e,i){this.Tv(t.Qh(),t.tn(),0,t.sn(),t.rn(),0,e,i),this.Tv(t.sn(),t.rn(),0,t.hn(),t.nn(),0,i,-e),this.Tv(t.hn(),t.nn(),0,t.an(),t.ln(),0,-e,-i),this.Tv(t.an(),t.ln(),0,t.Qh(),t.tn(),0,-i,e)}Fv(t){this.jm=t,this.Xm[this.Xm.length-1]=t}Bv(){return this.jm}$v(t){if(100<=this.Xm.length)throw new Error("pushed too many line widths - check push/pop pairs");this.Xm.push(t),this.jm=t}kv(){if(this.Xm.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.Xm.pop(),this.jm=this.Xm.at(-1)}Wv(){this.Ym=0,this.qm[this.qm.length-1]=0}Vv(){this.Ym=1,this.qm[this.qm.length-1]=0}Hv(){this.Ym=2,this.qm[this.qm.length-1]=0}Uv(t){if("butt"===t)this.jv();else if("square"===t)this.Xv();else{if("zag"!==t)throw new Error("invalid line cap");this.Yv()}}jv(){if(100<=this.qm.length)throw new Error("pushed too many line caps - check push/pop pairs");this.qm.push(0),this.Ym=0}Xv(){if(100<=this.qm.length)throw new Error("pushed too many line caps - check push/pop pairs");this.qm.push(1),this.Ym=1}Yv(){if(100<=this.qm.length)throw new Error("pushed too many line caps - check push/pop pairs");this.qm.push(2),this.Ym=2}qv(){if(this.qm.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.qm.pop(),this.Ym=this.qm.at(-1)}zv(t){this.zm=t,this.Jm[this.Jm.length-1]=t}Jv(){return this.zm}Kv(t){if(100<=this.Jm.length)throw new Error("pushed too many line offsets - check push/pop pairs");this.Jm.push(t),this.zm=t}Zv(){if(this.Jm.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.Jm.pop(),this.zm=this.Jm.at(-1)}Qv(e){var t=e.length/2;if(t<3)throw new Error("need at least 3 points");var i=t-2,s=i-1,r=e[0],h=e[1];for(let t=0;t<i;t+=2){var n,a=2*t,o=e[2+a],l=e[3+a],u=e[4+a],c=e[5+a];t===s?this.tS(r,h,o,l,u,c,u,c):(n=e[6+a],this.tS(r,h,o,l,u,c,n,e[7+a]))}}eS(){return 3}iS(){this.sS(!0),this.Km++}rS(){return this.Km}hS(){this.Km++}nS(t){this.Zm=!!t}aS(){return this.Zm}oS(t){this.Qm=!!t}lS(){return this.Qm}uS(){return!1}_2(){return!1}cS(){}fS(){}dS(){}CS(){return this.cS()+this.fS()+this.dS()}pS(){return C33.oh(C33.J1.mS,this)}}}{let C33=self.We;C33.J1.vS=class ShaderProgramBase{constructor(t,e){this.dh=e.name,this.SS=t,this.gS=e.extendBoxHorizontal||0,this.TS=e.extendBoxVertical||0,this._S=!!e.crossSampling,this.ES=!!e.mustPreDraw,this.yS=!!e.preservesOpaqueness,this.AS=!!e.supports3dDirectRendering,this.IS=!!e.animated,this.RS=!!e.blendsBackground,this.MS=!!e.usesDepth,this.wS=!1,this.bS=this._S||this.RS||0!==this.gS||0!==this.TS}lh(){this.SS=null}OS(){return this.SS}qc(){return this.dh}GS(){return 0!==this.gS||0!==this.TS}PS(){return this.gS}LS(){return this.TS}xS(){return this._S}NS(){return this.ES}DS(){return this.yS}FS(){return this.AS}BS(){return this.IS}$S(){return this.RS}kS(){return this.MS}WS(){return this.wS}VS(){return this.bS}HS(){return!1}}}{let C33=self.We;C33.J1.K2=class StateGroup{constructor(t,e,i,s,r){this.SS=t,this.fd=0,this.US=null,this.jS="",this.XS=i,this.YS=C33.oh(C33.$a),this.YS.set(s),this.qS=r,"string"==typeof e?this.jS=e:(this.US=e,this.jS=this.US.qc())}lh(){if(0<this.fd)throw new Error("releasing state group still in use");this.SS=null,this.US=null,this.jS=""}zS(){var t=this.SS;t.G2(this.US),t.JS(this.XS),t.KS(this.YS),t.mv(this.qS),t.Y2(this)}rv(){return C33.J1.K2.J2(this.jS,this.XS,this.YS,this.qS)}Z2(){++this.fd}tv(){--this.fd}sv(){return this.fd}ZS(){this.US=null}QS(t){if(this.US=t.w2(this.jS),!this.US)throw new Error("failed to restore shader program")}static J2(t,e,i,s){return("string"==typeof t?t:t.qc())+","+e+","+i.Qa()+","+i.eo()+","+i.io()+","+i.ro()+","+s}}}{let interpolateQuad2=function(t,e,i){var s=i.Qh(),r=i.tn(),h=i.sn()-s,n=i.rn()-r;return[s+h*t+(i.an()-s)*e,r+n*t+(i.ln()-r)*e]},C33=(interpolateQuad=interpolateQuad2,self.We),tempQuadTex=C33.oh(C33.Jl);C33.J1.tg=class MeshPoint{constructor(t,e,i){this.eg=t,this.ig=e,this.sg=i,this.zo=NaN,this.Jo=NaN,this.qS=NaN,this.rg=NaN,this.hg=NaN,this.zo=0,this.Jo=0,this.qS=0,this.rg=0,this.hg=0}ng(t,e,i,s){this.zo=t,this.Jo=e,this.rg=i,this.hg=s}ag(){return this.zo}og(t){this.zo!==t&&(this.zo=t,this.eg.lg())}ug(){return this.Jo}fg(t){this.Jo!==t&&(this.Jo=t,this.eg.lg())}dg(){return this.qS}Cg(t){this.qS!==t&&(this.qS=Math.max(t,0),this.eg.lg())}pg(){return this.rg}mg(t){this.rg=t}vg(){return this.hg}Sg(t){this.hg=t}gg(t,e,i){[this.zo,this.Jo]=interpolateQuad2(t.zo,t.Jo,e),this.qS=t.qS,this.rg=C33.Dt(i.gl(),i._l(),t.rg),this.hg=C33.Dt(i.Tl(),i.El(),t.hg)}Tg(t,e,i){[this.zo,this.Jo]=interpolateQuad2(t.zo,t.Jo,e),this.qS=t.qS,[this.rg,this.hg]=interpolateQuad2(t.rg,t.hg,i)}_g(){return{x:this.ag(),y:this.ug(),z:this.dg(),u:this.pg(),v:this.vg()}}Eg(t){this.og(t.x),this.fg(t.y),t.hasOwnProperty("z")&&this.Cg(t.z),this.mg(t.u),this.Sg(t.v)}yg(){return this.eg}Ag(){return this.ig}Ig(){return this.sg}},C33.J1.Rg=class Mesh{constructor(i,t,e){if(i<2||t<2)throw new Error("invalid mesh size");this.Mg=i,this.wg=t,this.bg=e||null,this.Og=[],this.Gg=0,this.Pg=0,this.Lg=1,this.xg=1,this.Ng=0,this.Dg=!1;var s=i-1,r=t-1;for(let e=0;e<t;++e){var h=[];for(let t=0;t<i;++t){var n=C33.oh(C33.J1.tg,this,t,e),a=t/s,o=e/r;n.ng(a,o,a,o),h.push(n)}this.Og.push(h)}}lh(){C33.Dn(this.Og)}Fg(){return this.Mg}Bg(){return this.wg}$g(){return this.bg}kg(){return this.Og}lg(){this.Dg=!0}Wg(){if(this.Dg){let t=1/0,e=1/0,i=-1/0,s=-1/0,r=0;for(var h of this.Og)for(var n of h){var a=n.ag(),o=n.ug();t=Math.min(t,a),e=Math.min(e,o),i=Math.max(i,a),s=Math.max(s,o),r=Math.max(r,n.dg())}this.Gg=t,this.Pg=e,this.Lg=i,this.xg=s,this.Ng=r,this.Dg=!1}}Vg(){return this.Wg(),this.Gg}Hg(){return this.Wg(),this.Pg}Ug(){return this.Wg(),this.Lg}jg(){return this.Wg(),this.xg}Xg(){return this.Wg(),this.Ng}Yg(){return 0<this.Xg()}qg(t,e){return t=Math.floor(t),e=Math.floor(e),t<0||t>=this.Mg||e<0||e>=this.wg?null:this.Og[e][t]}zg(t,i,s){var r=s instanceof C33.Rect;if(t.Fg()!==this.Fg()||t.Bg()!==this.Bg())throw new Error("source mesh wrong size");var h=t.Og,n=this.Og;for(let t=0,e=n.length;t<e;++t){var a=h[t],o=n[t];for(let t=0,e=o.length;t<e;++t){var l=a[t],u=o[t];r?u.gg(l,i,s):u.Tg(l,i,s)}}}Jg(r){var h=this.Og;let n=h[0];for(let t=1,e=h.length;t<e;++t){var a=h[t];let i=n[0],s=a[0];for(let t=1,e=a.length;t<e;++t){var o=n[t],l=a[t];tempQuadTex.set(i.pg(),i.vg(),o.pg(),o.vg(),l.pg(),l.vg(),s.pg(),s.vg()),r.Ev(i.ag(),i.ug(),i.dg(),o.ag(),o.ug(),o.dg(),l.ag(),l.ug(),l.dg(),s.ag(),s.ug(),s.dg(),tempQuadTex),i=o,s=l}n=a}}Kg(n,a){a=a||((t,e,i)=>[t,e,i]);var t=this.Og;let o=t[0];for(let r=1,h=t.length;r<h;++r){var l=t[r];let i=o[0],s=l[0];for(let t=1,e=l.length;t<e;++t){var u=o[t],c=l[t],[f,d,C]=a(i.ag(),i.ug(),i.dg()),[p,m,v]=a(u.ag(),u.ug(),u.dg()),[S,g,T]=a(c.ag(),c.ug(),c.dg()),[_,E,y]=a(s.ag(),s.ug(),s.dg());n._v(f,d,C,p,m,v),n._v(f,d,C,S,g,T),n._v(f,d,C,_,E,y),t===e-1&&n._v(p,m,v,S,g,T),r===h-1&&n._v(_,E,y,S,g,T),i=u,s=c}o=l}}Zg(t){var i=.99999999,s=t.Nu();let r=[];var h=this.Fg()-1,n=this.Bg()-1,a=1/h,o=1/n,l=h-1,u=n-1;let c=s[0],f=s[1],d=C33.ph(Math.floor(c*h),0,l),C=C33.ph(Math.floor(f*n),0,u),p=!0,m=0,v=0,S=0;let g=-1;var T=()=>{c=C33.ph(C33.Dt(c,m,S),0,1),f=C33.ph(C33.Dt(f,v,S),0,1),r.push(c,f)};for(let t=0,e=s.length;t<e;t+=2){c=s[t],f=s[t+1],r.push(c,f),d=C33.ph(Math.floor(c*h),0,l),C=C33.ph(Math.floor(f*n),0,u);var _=(t+2)%e;for(m=s[_],v=s[1+_],g=-1;;){if(1e6<r.length)throw new Error("Too many mesh poly points");var E=d*a,y=C*o,A=(d+1)*a,I=(C+1)*o;if(p=C33.Cn(c,f,E,y,A,y,A,I),0!==g&&0<=(S=C33.dn(c,f,m,v,E,y,A,I,-.001))&&S<=i)T(),p=!p,g=0;else if(0<C&&2!==g&&0<=(S=C33.dn(c,f,m,v,E,y,A,y,.001))&&S<=i)T(),C--,p=!1,g=4;else if(d<l&&3!==g&&0<=(S=C33.dn(c,f,m,v,A,y,A,I,.001))&&S<=i)T(),d++,p=!1,g=1;else if(0<d&&1!==g&&0<=(S=C33.dn(c,f,m,v,E,y,E,I,.001))&&S<=i)T(),d--,p=!0,g=3;else{if(!(C<u&&4!==g&&0<=(S=C33.dn(c,f,m,v,E,I,A,I,.001))&&S<=i))break;T(),C++,p=!0,g=2}}}return C33.oh(C33.Ou,r)}Qg(t,e){t=this.tT(t);this.eT(t),e.Fu(t)}tT(t){var i=[],s=t.Nu();for(let t=0,e=s.length;t<e;t+=2){var r=s[t],h=s[t+1],[r,h]=this.iT(r,h);i.push(r,h)}return i}iT(t,e){var i=this.Fg()-1,s=this.Bg()-1,r=1/i,h=1/s,i=C33.ph(Math.floor(t*i),0,i-1),s=C33.ph(Math.floor(e*s),0,s-1),n=i*r,a=s*h,o=(i+1)*r,l=(s+1)*h,u=this.qg(i,s),c=this.qg(i+1,s+1),f=C33.Cn(t,e,n,a,o,a,o,l),r=f?n+r:n,h=f?a:a+h,i=this.qg(i+(f?1:0),s+(f?0:1)),[s,f,t]=C33.pn(t,e,n,a,r,h,o,l);return C33.mn(s,f,t,u.ag(),u.ug(),u.dg(),i.ag(),i.ug(),i.dg(),c.ag(),c.ug(),c.dg())}eT(i){var s=[];let r=i[0],h=i[1],n=r-i.at(-2),a=h-i.at(-1);for(let t=0,e=i.length;t<e;t+=2){var o=(t+2)%e,l=i[o],o=i[1+o],u=l-r,c=o-h,f=Math.abs(u)<1e-7&&Math.abs(n)<1e-7&&Math.sign(c)===Math.sign(a),d=Math.abs(c)<1e-7&&Math.abs(a)<1e-7&&Math.sign(u)===Math.sign(n);(!f&&!d&&.001<Math.abs(u/n-c/a)||0==u&&0==c)&&s.push(r,h),r=l,h=o,n=u,a=c}6<=s.length&&s.length<i.length&&C33.kn(i,s)}_g(){return{cols:this.Fg(),rows:this.Bg(),points:this.Og.map(t=>t.map(t=>t._g()))}}Eg(t){var i=this.Fg(),s=this.Bg();if(t.cols!==i||t.rows!==s)throw new Error("mesh data wrong size");var r=t.points;for(let e=0;e<s;++e){var h=r[e];for(let t=0;t<i;++t)this.qg(t,e).Eg(h[t])}}}}{let GetFormatSpecifiers2=function(t,e){let i,s,r,h;switch(t){case"rgba8":i=e.RGBA8,s=e.RGBA,r=e.RGBA,h=e.UNSIGNED_BYTE;break;case"rgb8":i=e.RGB8,s=e.RGB,r=e.RGB,h=e.UNSIGNED_BYTE;break;case"rgba4":i=e.RGBA4,s=e.RGBA,r=e.RGBA,h=e.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=e.RGB5_A1,s=e.RGBA,r=e.RGBA,h=e.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=e.RGB565,s=e.RGB,r=e.RGB,h=e.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{sT:i,rT:s,format:r,type:h}},C33=(GetFormatSpecifiers=GetFormatSpecifiers2,self.We),VALID_PIXEL_FORMATS=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),VALID_SAMPLINGS=new Set(["nearest","bilinear","trilinear"]),VALID_MIPMAP_QUALITIES=new Set(["default","low","high"]),VALID_WRAP_MODES=new Set(["clamp-to-edge","repeat","mirror-repeat"]),CREATEFROM_DEFAULT_OPTIONS={hT:"clamp-to-edge",nT:"clamp-to-edge",aT:"trilinear",oT:0,lT:"rgba8",uT:!0,cT:"default",premultiplyAlpha:!0,fT:!1,width:-1,height:-1},UPDATE_DEFAULT_OPTIONS={premultiplyAlpha:!0,flipY:!1},allTextures=new Set;C33.J1.dT=class WebGLRendererTexture{constructor(t){this.SS=t,this.CT=null,this.Bp=0,this.$p=0,this.pT=!0,this.mT="clamp-to-edge",this.vT="clamp-to-edge",this.ST="trilinear",this.gT=0,this.TT="rgba8",this._T=!1,this.ET="default",this.fd=0}yT(e,i){if(!("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas||e instanceof ImageData||e instanceof ArrayBuffer||null===e))throw new Error("invalid texture source");if(i=Object.assign({},CREATEFROM_DEFAULT_OPTIONS,i),this.CT)throw new Error("already created texture");if(this.mT=i.hT,this.vT=i.nT,this.ST=i.aT,this.gT=i.oT,this.TT=i.lT,this._T=!!i.uT&&this.SS.aS(),this.ET=i.cT,!VALID_WRAP_MODES.has(this.mT)||!VALID_WRAP_MODES.has(this.vT))throw new Error("invalid wrap mode");if(!VALID_SAMPLINGS.has(this.ST))throw new Error("invalid sampling");if(!VALID_PIXEL_FORMATS.has(this.TT))throw new Error("invalid pixel format");if(!VALID_MIPMAP_QUALITIES.has(this.ET))throw new Error("invalid mipmap quality");if(this.pT=!0,e instanceof ArrayBuffer||null===e||i.fT){if(this.Bp=i.width,this.$p=i.height,e instanceof ArrayBuffer&&e.byteLength!==this.Bp*this.$p*4)throw new Error("ArrayBuffer wrong size")}else this.Bp=e.width,this.$p=e.height;if(this.Bp<=0||this.$p<=0)throw new Error("invalid texture data size");i.fT&&((t=C33.Ma(this.Bp,this.$p)).getContext("2d").drawImage(e,0,0,this.Bp,this.$p),e=t);var t=C33.Nh(this.Bp)&&C33.Nh(this.$p),s=this.SS.AT();if(this.Bp>s||this.$p>s)throw new Error("texture data exceeds maximum texture size");var s=this.SS.IT(),r=this.SS.RT(),i=(this.CT=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.CT),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,!1),GetFormatSpecifiers2(this.TT,s));if(this.SS.MT()||t||!this.wT())if(2<=r){let t;t=this._T?Math.floor(Math.log2(Math.max(this.Bp,this.$p))+1):1,s.texStorage2D(s.TEXTURE_2D,t,i.sT,this.Bp,this.$p),e instanceof ArrayBuffer?s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.Bp,this.$p,i.format,i.type,new Uint8Array(e)):null!==e&&s.texSubImage2D(s.TEXTURE_2D,0,0,0,i.format,i.type,e)}else e instanceof ArrayBuffer?s.texImage2D(s.TEXTURE_2D,0,i.rT,this.Bp,this.$p,0,i.format,i.type,new Uint8Array(e)):null===e?s.texImage2D(s.TEXTURE_2D,0,i.rT,this.Bp,this.$p,0,i.format,i.type,null):s.texImage2D(s.TEXTURE_2D,0,i.rT,i.format,i.type,e);else{if(null===e)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");(e=e instanceof ArrayBuffer?new ImageData(new Uint8ClampedArray(e),this.Bp,this.$p):e)instanceof ImageData&&((t=C33.Ma(this.Bp,this.$p)).getContext("2d").putImageData(e,0,0),e=t);r=C33.Ma(C33.Dh(this.Bp),C33.Dh(this.$p)),t=r.getContext("2d");t.imageSmoothingEnabled="nearest"!==this.ST,t.drawImage(e,0,0,this.Bp,this.$p,0,0,r.width,r.height),s.texImage2D(s.TEXTURE_2D,0,i.rT,i.format,i.type,r)}null!==e&&this.bT(s),s.bindTexture(s.TEXTURE_2D,null),this.SS.OT(),this.fd=1,allTextures.add(this)}GT(t,e,i){if(i=Object.assign({},CREATEFROM_DEFAULT_OPTIONS,i),this.CT)throw new Error("already created texture");if(this.mT=i.hT,this.vT=i.nT,this.ST=i.aT,this.TT=i.lT,this._T=!!i.uT&&this.SS.aS(),this.ET=i.cT,!VALID_WRAP_MODES.has(this.mT)||!VALID_WRAP_MODES.has(this.vT))throw new Error("invalid wrap mode");if(!VALID_SAMPLINGS.has(this.ST))throw new Error("invalid sampling");if(!VALID_PIXEL_FORMATS.has(this.TT))throw new Error("invalid pixel format");if(!VALID_MIPMAP_QUALITIES.has(this.ET))throw new Error("invalid mipmap quality");this.pT=!1,this.Bp=Math.floor(t),this.$p=Math.floor(e);t=C33.Nh(this.Bp)&&C33.Nh(this.$p),e=this.SS.AT();if(this.Bp<=0||this.$p<=0)throw new Error("invalid texture size");if(this.Bp>e||this.$p>e)throw new Error("texture exceeds maximum texture size");if(!this.SS.MT()&&this.wT()&&!t)throw new Error("non-power-of-two tiled textures not supported");e=this.SS.IT(),t=this.SS.RT(),this.CT=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.CT),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),i=GetFormatSpecifiers2(this.TT,e),t=2<=t?i.sT:i.rT;e.texImage2D(e.TEXTURE_2D,0,t,this.Bp,this.$p,0,i.format,i.type,null),this.bT(e),e.bindTexture(e.TEXTURE_2D,null),this.SS.OT(),this.fd=1,allTextures.add(this)}PT(t){if("default"===this.ET)return this.pT?t.NICEST:t.FASTEST;if("low"===this.ET)return t.FASTEST;if("high"===this.ET)return t.NICEST;throw new Error("invalid mipmap quality")}wT(){return"clamp-to-edge"!==this.mT||"clamp-to-edge"!==this.vT}LT(t,e){if("clamp-to-edge"===e)return t.CLAMP_TO_EDGE;if("repeat"===e)return t.REPEAT;if("mirror-repeat"===e)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}bT(t){var e=C33.Nh(this.Bp)&&C33.Nh(this.$p),e=(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.LT(t,this.mT)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.LT(t,this.vT)),"nearest"===this.ST?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this._T=!1):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(e||this.SS.MT())&&this._T?(t.hint(t.GENERATE_MIPMAP_HINT,this.PT(t)),t.generateMipmap(t.TEXTURE_2D),e="trilinear"===this.ST&&!this.SS.lS(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this._T=!1)),this.SS.xT());e&&0<this.gT&&"nearest"!==this.ST&&t.texParameterf(t.TEXTURE_2D,e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.gT,this.SS.NT()))}DT(t,e){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.CT||this.fd<=0)throw new Error("texture not created");if(this.pT)throw new Error("cannot update static texture");e=Object.assign({},UPDATE_DEFAULT_OPTIONS,e);var i=t.width||t.videoWidth,s=t.height||t.videoHeight,r=this.SS.RT(),h=this.SS.IT(),e=(h.bindTexture(h.TEXTURE_2D,this.CT),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!!e.flipY),GetFormatSpecifiers2(this.TT,h)),r=2<=r?e.sT:e.rT;try{if(this.Bp===i&&this.$p===s){var n=C33.Nh(this.Bp)&&C33.Nh(this.$p);h.texSubImage2D(h.TEXTURE_2D,0,0,0,e.format,e.type,t),(n||this.SS.MT())&&this._T&&(h.hint(h.GENERATE_MIPMAP_HINT,this.PT(h)),h.generateMipmap(h.TEXTURE_2D))}else{this.Bp=i,this.$p=s;var a=C33.Nh(this.Bp)&&C33.Nh(this.$p);if(!this.SS.MT()&&this.wT()&&!a)throw new Error("non-power-of-two tiled textures not supported");h.texImage2D(h.TEXTURE_2D,0,r,e.format,e.type,t),(a||this.SS.MT())&&this._T&&(h.hint(h.GENERATE_MIPMAP_HINT,this.PT(h)),h.generateMipmap(h.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}h.bindTexture(h.TEXTURE_2D,null),this.SS.OT()}FT(){if(0<this.fd)throw new Error("texture still has references");if(!this.CT)throw new Error("already deleted texture");allTextures.delete(this),this.SS.IT().deleteTexture(this.CT),this.CT=null}BT(){return!!this.CT}$T(){return this.CT}OS(){return this.SS}kT(){this.fd++}WT(){if(this.fd<=0)throw new Error("no more references");this.fd--}VT(){return this.fd}tp(){return this.Bp}cp(){return this.$p}HT(){return this.pT}UT(){let t=this.Bp*this.$p;switch(this.TT){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this._T&&(t+=Math.floor(t/3)),t}static ZS(){allTextures.clear()}static jT(){return allTextures.values()}}}{let C33=self.We,assert=self.assert,glMatrix=self.Se,vec32=glMatrix.Re,mat42=glMatrix.Ee,VALID_SAMPLINGS=new Set(["nearest","bilinear","trilinear"]),DEFAULT_RENDERTARGET_OPTIONS={aT:"trilinear",alpha:!0,depth:!1,XT:!0,YT:!0,qT:0},allRenderTargets=new Set;C33.J1.zT=class WebGLRenderTarget{constructor(t){this.SS=t,this.JT=null,this.KT=null,this.CT=null,this.ZT=null,this.Bp=0,this.$p=0,this.QT=!0,this.ST="trilinear",this.t_=!0,this.e_=!1,this.i_=!0,this.s_=0,this.r_=mat42.create(),this.h_=0,this.n_=0,this.a_=0}o_(t,e,i){i=Object.assign({},DEFAULT_RENDERTARGET_OPTIONS,i);var s=this.SS.RT();if(this.CT||this.ZT)throw new Error("already created render target");if(this.ST=i.aT,this.t_=!!i.alpha,this.e_=!!i.depth,this.i_=!!i.XT,this.QT=!!i.YT,this.s_=i.qT,!VALID_SAMPLINGS.has(this.ST))throw new Error("invalid sampling");if(0<this.s_&&(s<2||this.i_))throw new Error("invalid use of multisampling");if(s<2&&(this.i_=!0),this.Bp=t,this.$p=e,this.Bp<=0||this.$p<=0)throw new Error("invalid render target size");this.l_();i=this.SS.IT(),this.JT=i.createFramebuffer(),this.e_&&(this.KT=i.createFramebuffer()),this.i_?(this.CT=this.SS.u_(this.Bp,this.$p,{aT:this.ST,lT:this.t_?"rgba8":"rgb8",uT:!1}),s=this.CT.$T(),i.bindFramebuffer(i.FRAMEBUFFER,this.JT),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,s,0),this.e_&&(i.bindFramebuffer(i.FRAMEBUFFER,this.KT),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,s,0))):(this.ZT=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.ZT),t=this.t_?i.RGBA8:i.RGB8,0<this.s_&&((e=i.getInternalformatParameter(i.RENDERBUFFER,t,i.SAMPLES))&&e[0]?(s=e[0],this.s_>s&&(this.s_=s)):this.s_=0),0===this.s_?i.renderbufferStorage(i.RENDERBUFFER,t,this.Bp,this.$p):i.renderbufferStorageMultisample(i.RENDERBUFFER,this.s_,t,this.Bp,this.$p),i.bindFramebuffer(i.FRAMEBUFFER,this.JT),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,this.ZT),this.e_&&(i.bindFramebuffer(i.FRAMEBUFFER,this.KT),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,this.ZT)),i.bindRenderbuffer(i.RENDERBUFFER,null)),e=this.SS.c_();this.e_&&e&&(i.bindFramebuffer(i.FRAMEBUFFER,this.JT),this.SS.f_()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null),allRenderTargets.add(this)}d_(t,e){this.Bp===t&&this.$p===e||(this.Bp=t,this.$p=e,this.l_(),(t=this.SS.IT()).bindFramebuffer(t.FRAMEBUFFER,this.JT),this.CT?this.CT.DT(new ImageData(this.Bp,this.$p)):(t.bindRenderbuffer(t.RENDERBUFFER,this.ZT),t.renderbufferStorage(t.RENDERBUFFER,this.t_?t.RGBA8:t.RGB8,this.Bp,this.$p),t.bindRenderbuffer(t.RENDERBUFFER,null)),e=this.SS.c_(),this.e_&&e&&(this.SS.f_()?t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,e,0):t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)),t.bindFramebuffer(t.FRAMEBUFFER,null))}FT(){if(!this.CT&&!this.ZT)throw new Error("already deleted render target");allRenderTargets.delete(this);var t=this.SS.IT(),t=(this.CT?(t.bindFramebuffer(t.FRAMEBUFFER,this.JT),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.e_&&(t.bindFramebuffer(t.FRAMEBUFFER,this.KT),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.SS.C_(this.CT),this.CT=null):this.ZT&&(t.bindFramebuffer(t.FRAMEBUFFER,this.JT),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.e_&&(t.bindFramebuffer(t.FRAMEBUFFER,this.KT),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.ZT),this.ZT=null),t.bindFramebuffer(t.FRAMEBUFFER,null),2<=this.SS.RT()&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.JT),this.e_&&t.deleteFramebuffer(this.KT),this.SS.p_());t.m_=null,this.JT=t.v_=null}l_(){this.SS.T2(this.r_,this.Bp/this.$p),this.h_=this.SS.m2(),this.n_=this.SS.c2(),this.a_=this.SS.d2()}S_(){return this.JT}g_(){return this.KT}OS(){return this.SS}T_(){return this.CT}__(){return this.SS.m2()===this.h_&&this.SS.c2()===this.n_&&this.SS.d2()===this.a_||this.l_(),this.r_}E_(){return"nearest"!==this.ST}y_(){return this.t_}A_(){return this.i_}I_(){return this.e_}tp(){return this.Bp}cp(){return this.$p}R_(){return this.QT}M_(){return this.s_}w_(){var t={aT:this.ST,alpha:this.t_,XT:this.i_};return this.QT||(t.width=this.Bp,t.height=this.$p),t}b_(t){return"nearest"!==(t=Object.assign({},DEFAULT_RENDERTARGET_OPTIONS,t)).aT===this.E_()&&!!t.alpha===this.y_()&&!!t.depth===this.I_()&&!(2<=this.SS.RT()&&!!t.XT!==this.A_())&&("number"==typeof t.width||"number"==typeof t.height?!this.R_()&&this.tp()===Math.floor(t.width)&&this.cp()===Math.floor(t.height):this.R_())}O_(){return this.CT?this.CT.$T():null}UT(){return this.CT?this.CT.UT():this.Bp*this.$p*(this.t_?4:3)}static async G_(t,e){t=await t.P_(e,!0);return C33.Oa(t)}static ZS(){allRenderTargets.clear()}static L_(){return allRenderTargets.values()}static x_(t,e){for(var i of allRenderTargets)i.R_()&&i.d_(t,e)}}}{let C33=self.We,glMatrix=self.Se,vec32=glMatrix.Re,mat42=glMatrix.Ee,RESERVED_UNIFORM_NAMES=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);C33.J1.N_=class WebGLShaderProgram extends C33.J1.vS{static async D_(t,e){let i=t.IT();var s=e.src,r=e.F_,e=e.name,h=i.createShader(i.FRAGMENT_SHADER),s=(i.shaderSource(h,s),i.compileShader(h),i.createShader(i.VERTEX_SHADER));i.shaderSource(s,r),i.compileShader(s);let n=i.createProgram(),a=(i.attachShader(n,h),i.attachShader(n,s),i.bindAttribLocation(n,0,"aPos"),i.bindAttribLocation(n,1,"aTex"),i.bindAttribLocation(n,2,"aPoints"),i.linkProgram(n),t.B_());if(a?await t.k_(()=>i.getProgramParameter(n,a.COMPLETION_STATUS_KHR)):await C33.On(5),!i.getShaderParameter(h,i.COMPILE_STATUS))throw r=i.getShaderInfoLog(h),i.deleteShader(h),i.deleteShader(s),i.deleteProgram(n),new Error("Error compiling fragment shader: "+r);if(!i.getShaderParameter(s,i.COMPILE_STATUS))throw t=i.getShaderInfoLog(s),i.deleteShader(h),i.deleteShader(s),i.deleteProgram(n),new Error("Error compiling vertex shader: "+t);if(i.getProgramParameter(n,i.LINK_STATUS))return(r=C33.Vd(i.getProgramInfoLog(n)||"").trim())&&!C33.$d(r)&&console.info(`[WebGL] Shader program '${e}' compilation log: `,r),i.deleteShader(h),i.deleteShader(s),n;throw t=i.getProgramInfoLog(n),i.deleteShader(h),i.deleteShader(s),i.deleteProgram(n),new Error("Error linking shader program: "+t)}static async W_(t,e){var i=await C33.J1.N_.D_(t,e);return new C33.J1.N_(t,i,e)}constructor(t,e,i){super(t,i);var s,r=t.IT(),h=t.p_(),n=(t.sS(),r.useProgram(e),this.V_=r,this.US=e,this.H_="<default-device-transform>"===i.name,r.getAttribLocation(e,"aPos")),a=r.getAttribLocation(e,"aTex"),e=(this.U_=r.getAttribLocation(e,"aPoints"),-1!==n&&(r.bindBuffer(r.ARRAY_BUFFER,t.j_),r.vertexAttribPointer(n,t.eS(),r.FLOAT,!1,0,0),r.enableVertexAttribArray(n)),-1!==a&&(r.bindBuffer(r.ARRAY_BUFFER,t.X_),r.vertexAttribPointer(a,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(a)),-1!==this.U_&&(r.bindBuffer(r.ARRAY_BUFFER,t.Y_),r.vertexAttribPointer(this.U_,4,r.FLOAT,!1,0,0),r.enableVertexAttribArray(this.U_)),r.bindBuffer(r.ARRAY_BUFFER,null),this.q_=new C33.J1.z_(this,"matP","mat4"),this.J_=new C33.J1.z_(this,"matMV","mat4"),this.K_=new C33.J1.z_(this,"color","vec4"),this.Z_=new C33.J1.z_(this,"samplerFront","sampler"),this.Q_=new C33.J1.z_(this,"pointTexStart","vec2"),this.tE=new C33.J1.z_(this,"pointTexEnd","vec2"),this.eE=new C33.J1.z_(this,"zElevation","float"),this.iE=new C33.J1.z_(this,"tileSize","vec2"),this.sE=new C33.J1.z_(this,"tileSpacing","vec2"),this.rE=new C33.J1.z_(this,"color2_","vec4"),this.hE=new C33.J1.z_(this,"outlineThickness","float"),this.nE=new C33.J1.z_(this,"samplerBack","sampler"),this.aE=new C33.J1.z_(this,"samplerDepth","sampler"),this.oE=new C33.J1.z_(this,"destStart","vec2"),this.lE=new C33.J1.z_(this,"destEnd","vec2"),this.uE=new C33.J1.z_(this,"srcStart","vec2"),this.cE=new C33.J1.z_(this,"srcEnd","vec2"),this.fE=new C33.J1.z_(this,"srcOriginStart","vec2"),this.dE=new C33.J1.z_(this,"srcOriginEnd","vec2"),this.CE=new C33.J1.z_(this,"pixelSize","vec2"),this.pE=new C33.J1.z_(this,"seconds","float"),this.mE=new C33.J1.z_(this,"devicePixelRatio","float"),this.vE=new C33.J1.z_(this,"layerScale","float"),this.SE=new C33.J1.z_(this,"layerAngle","float"),this.gE=new C33.J1.z_(this,"layoutStart","vec2"),this.TE=new C33.J1.z_(this,"layoutEnd","vec2"),this._E=new C33.J1.z_(this,"zNear","float"),this.EE=new C33.J1.z_(this,"zFar","float"),this.yE=!!(this.CE.AE()||this.pE.AE()||this.nE.AE()||this.oE.AE()||this.lE.AE()||this.uE.AE()||this.cE.AE()||this.fE.AE()||this.dE.AE()||this.mE.AE()||this.vE.AE()||this.SE.AE()||this.gE.AE()||this.TE.AE()),i.parameters||[]);this.IE=[],this.wS=this.CE.AE()||this.uE.AE()||this.cE.AE()||this.fE.AE()||this.dE.AE(),this.RE=!1,this.ME=!1,this.K_.wE(1,1,1,1),this.rE.wE(1,1,1,1),this.Z_.bE(0),this.nE.bE(1),this.aE.bE(2),this.Q_.OE(0,0),this.tE.OE(1,1),this.eE.GE(0),this.iE.OE(0,0),this.sE.OE(0,0),this.oE.OE(0,0),this.lE.OE(1,1),this.uE.OE(0,0),this.cE.OE(0,0),this.fE.OE(0,0),this.dE.OE(0,0),this.CE.OE(0,0),this.mE.GE(1),this._E.GE(t.c2()),this.EE.GE(t.d2()),this.vE.GE(1),this.SE.GE(0),this.pE.GE(0),this.gE.OE(0,0),this.TE.OE(0,0),this.hE.GE(1);for(s of e){var o=s[0],l=s[2],o=new C33.J1.z_(this,o,l);"color"===l?o.PE(0,0,0):o.GE(0),this.IE.push(o)}this.H_?this.LE(h.xE):(this.NE(h.xE,!0),this.DE(h.FE,!0));n=h.BE;r.useProgram(n?n.US:null)}lh(){this.V_.deleteProgram(this.US),this.US=null,this.SS.M2(this),this.V_=null,super.lh()}$E(){return this.V_}kE(){return this.US}WE(){return this.IE.length}VE(t){return t<0||t>=this.IE.length?null:this.IE[t].HE()}UE(i){for(let t=0,e=i.length;t<e;++t)if(!this.IE[t].jE(i[t]))return!1;return!0}XE(i){for(let t=0,e=i.length;t<e;++t)this.IE[t].YE(i[t])}qE(t,e,i,s,r,h,n,a,o,l){return!this.nE.AE()&&!(this.CE.AE()&&!this.CE.zE(r,h)||this.oE.AE()&&!this.oE.zE(t.gl(),t.Tl())||this.lE.AE()&&!this.lE.zE(t._l(),t.El())||this.mE.AE()&&!this.mE.JE(n)||this.vE.AE()&&!this.vE.JE(a)||this.SE.AE()&&!this.SE.JE(o)||this.uE.AE()&&!this.uE.zE(e.gl(),e.Tl())||this.cE.AE()&&!this.cE.zE(e._l(),e.El())||this.fE.AE()&&!this.fE.zE(i.gl(),i.Tl())||this.dE.AE()&&!this.dE.zE(i._l(),i.El())||this.gE.AE()&&!this.gE.zE(s.gl(),s.Tl())||this.TE.AE()&&!this.TE.zE(s.Tl(),s.El())||this.pE.AE()&&!this.pE.JE(l))}KE(t,e,i,s,r,h,n,a,o,l){this.nE.AE()||(this.CE.AE()&&this.CE.ZE(r,h),this.oE.AE()&&this.oE.ZE(t.gl(),t.Tl()),this.lE.AE()&&this.lE.ZE(t._l(),t.El()),this.mE.AE()&&this.mE.QE(n),this.vE.AE()&&this.vE.QE(a),this.SE.AE()&&this.SE.QE(o),this.uE.AE()&&this.uE.ZE(e.gl(),e.Tl()),this.cE.AE()&&this.cE.ZE(e._l(),e.El()),this.fE.AE()&&this.fE.ZE(i.gl(),i.Tl()),this.dE.AE()&&this.dE.ZE(i._l(),i.El()),this.gE.AE()&&this.gE.ZE(s.gl(),s.Tl()),this.TE.AE()&&this.TE.ZE(s.Tl(),s.El()),this.pE.AE()&&this.pE.QE(l))}NE(t,e){this.RE&&!e||this.H_||(this.q_.AE()&&this.q_.ty(t),this.RE=!0)}ey(){this.RE=!1}DE(t,e){this.ME&&!e||this.H_||(this.J_.AE()&&this.J_.ty(t),this.ME=!0)}iy(){this.ME=!1}LE(t){if(!this.H_)throw new Error("not device transform shader");this.q_.ty(t);var t=this.SS,e=t.tp()/2,i=t.cp()/2,e=t.I2(e,i,t.n2(t.cp()),e,i,0,t.cp());this.J_.ty(e)}hy(t){this.K_.AE()&&this.K_.ny(t[0],t[1],t[2],t[3])}static oy(){return RESERVED_UNIFORM_NAMES}static ly(t){t=t?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","attribute highp vec3 aPos;",`attribute ${t} vec2 aTex;`,`varying ${t} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static uy(t){t=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${t} vec2 aTex;`,`out ${t} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static Cy(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static my(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static vy(){return["#version 300 es","in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Sy(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static gy(){return["#extension GL_EXT_frag_depth : enable","#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Ty(){return["#version 300 es","in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static _y(t,e,i){let s="";return 2<=t?s="#version 300 es\n":(e&&(s="#extension GL_EXT_frag_depth : enable\n"),i&&(s+="#extension GL_EXT_shader_texture_lod : enable\n#extension GL_OES_standard_derivatives : enable\n")),s+`
#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
${2<=t?"in":"varying"} vec2 vTex;
${2<=t?"out lowp vec4 outColor;":""}
uniform lowp vec4 color;
uniform lowp sampler2D samplerFront;
uniform vec2 pixelSize;

uniform vec2 tileSize;
uniform vec2 tileSpacing;
uniform float outlineThickness;

const float PI = 3.1415926;

lowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)
{
	return (a + b + (a - b) * cos(x * PI)) / 2.0;
}

vec3 randVec3(vec2 seed)
{
	return vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),
				fract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),
				fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));
}

lowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)
{
	vec2 posRandom = tileSize;
	float angleRandom = outlineThickness;
	
	vec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;
	
	float angle = angleRandom * rand.z * PI;
	float sin_a = sin(angle);
	float cos_a = cos(angle);
	float aspect = pixelSize.x / pixelSize.y;

	vec2 mid = tile + vec2(0.5, 0.5);
	vec2 dp = uv - mid;
	dp.x /= aspect;
	vec2 r = vec2(dp.x * cos_a - dp.y * sin_a,
				  dp.y * cos_a + dp.x * sin_a);
	r.x *= aspect;

	vec2 p = mid + r + (posRandom * rand.xy / 2.0);
	
	${2<=t?"return textureGrad(samplerFront, p, ddx, ddy);":""}
	${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}
	${t<2&&!i?"return texture2D(samplerFront, p);":""}
}

void main(void) {
	
	${t<2?"lowp vec4 outColor;":""}
	
	float blendMarginX = tileSpacing.x;
	float blendMarginY = tileSpacing.y;
	
	vec2 tile = floor(vTex);
	vec2 tex = fract(vTex);
	vec2 ddx = ${2<=t||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};
	vec2 ddy = ${2<=t||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};
	
	vec4 curTile = sampleTile(tile, vTex, ddx, ddy);
	
	bool inLeftMargin = (tex.x < blendMarginX);
	bool inRightMargin = (tex.x > 1.0 - blendMarginX);
	bool inTopMargin = (tex.y < blendMarginY);
	bool inBottomMargin = (tex.y > 1.0 - blendMarginY);
	
	if (inLeftMargin)
	{
		lowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);
		float leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;
		lowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);
			
			outColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);
			
			outColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = leftMixedTile;
		}
	}
	else if (inRightMargin)
	{
		lowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);
		float rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);
		lowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);
			
			outColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);
			
			outColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = rightMixedTile;
		}
	}
	else if (inTopMargin)
	{
		lowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
		outColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
	}
	else if (inBottomMargin)
	{
		lowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
		outColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
	}
	else
	{
		outColor = curTile;
	}
	
	outColor *= color;
	${t<2?"gl_FragColor = outColor;":""}
	${2<=t?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
	${t<2&&e?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
}
`}static Ey(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static yy(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static Ay(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static Iy(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Ry(){return["#version 300 es","uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static My(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static wy(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static by(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","precision lowp float;","varying highmedp vec2 vTex;","uniform vec4 color;","void main(void) {",`	highmedp float grad = vTex.x / (1.0 - vTex.y);`,`	gl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);`,"}"].join("\n")}static Oy(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static Gy(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static Py(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static Ly(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static xy(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{let C33=self.We,glMatrix=self.Se,mat42=glMatrix.Ee,TYPE_SIZES=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);C33.J1.z_=class WebGLShaderUniform{constructor(t,e,i){if(!TYPE_SIZES.has(i))throw new Error("invalid uniform type");this.bg=t,this.V_=this.bg.$E(),this.dh=e,this.u3=i,this.Ny="color"===this.u3,this.Dy=this.V_.getUniformLocation(this.bg.kE(),e),this.Fy=!!this.Dy;t=TYPE_SIZES.get(i);this.By=new Float32Array(t),this.$y=new Float32Array(t)}lh(){this.bg=null,this.V_=null,this.Dy=null}AE(){return this.Fy}HE(){return this.u3}ky(){return this.Ny}GE(t){this.AE()&&(this.By[0]=t,this.$y.set(this.By),this.V_.uniform1f(this.Dy,t))}bE(t){this.AE()&&(this.By[0]=t,this.$y.set(this.By),this.V_.uniform1i(this.Dy,t))}OE(t,e){this.AE()&&(this.By[0]=t,this.By[1]=e,this.$y.set(this.By),this.V_.uniform2f(this.Dy,t,e))}PE(t,e,i){this.AE()&&(this.By[0]=t,this.By[1]=e,this.By[2]=i,this.$y.set(this.By),this.V_.uniform3f(this.Dy,t,e,i))}wE(t,e,i,s){this.AE()&&(this.By[0]=t,this.By[1]=e,this.By[2]=i,this.By[3]=s,this.$y.set(this.By),this.V_.uniform4f(this.Dy,t,e,i,s))}Wy(t){t=Math.fround(t);var e=this.By;e[0]!==t&&(e[0]=t,this.V_.uniform1f(this.Dy,t))}Vy(t){var e=this.By;e[0]!==t&&this.V_.uniform1i(this.Dy,e[0]=t)}Hy(t,e){t=Math.fround(t),e=Math.fround(e);var i=this.By;i[0]===t&&i[1]===e||(i[0]=t,i[1]=e,this.V_.uniform2f(this.Dy,t,e))}Uy(t,e,i){t=Math.fround(t),e=Math.fround(e),i=Math.fround(i);var s=this.By;s[0]===t&&s[1]===e&&s[2]===i||(s[0]=t,s[1]=e,s[2]=i,this.V_.uniform3f(this.Dy,t,e,i))}ny(t,e,i,s){t=Math.fround(t),e=Math.fround(e),i=Math.fround(i),s=Math.fround(s);var r=this.By;r[0]===t&&r[1]===e&&r[2]===i&&r[3]===s||(r[0]=t,r[1]=e,r[2]=i,r[3]=s,this.V_.uniform4f(this.Dy,t,e,i,s))}ty(t){var e=this.By;mat42.B(e,t)||(C33.xn(e,t,0),this.V_.uniformMatrix4fv(this.Dy,!1,t))}jE(t){var e=this.$y;return this.ky()?e[0]===Math.fround(t.Qa())&&e[1]===Math.fround(t.eo())&&e[2]===Math.fround(t.io()):e[0]===Math.fround(t)}YE(t){var e=this.$y;this.ky()?(e[0]=t.Qa(),e[1]=t.eo(),e[2]=t.io()):e[0]=t}JE(t){return this.$y[0]===Math.fround(t)}zE(t,e){var i=this.$y;return i[0]===Math.fround(t)&&i[1]===Math.fround(e)}QE(t){this.$y[0]=t}ZE(t,e){var i=this.$y;i[0]=t,i[1]=e}}}{let C33=self.We,glMatrix=self.Se,vec42=glMatrix.Me,mat42=glMatrix.Ee,BATCH_NULL=0,BATCH_QUAD=1,BATCH_SETTEXTURE=2,BATCH_SETCOLOR=3,BATCH_SETBLEND=4,BATCH_SETVIEWPORT=5,BATCH_SETPROJECTION=6,BATCH_SETMODELVIEW=7,BATCH_SETRENDERTARGET=8,BATCH_CLEARSURFACE=9,BATCH_POINTS=10,BATCH_SETPROGRAM=11,BATCH_SETPROGRAMPARAMETERS=12,BATCH_SETPROGRAMCUSTOMPARAMETERS=13,BATCH_INVALIDATEFRAMEBUFFER=14,BATCH_SETPOINTTEXCOORDS=15,BATCH_SETTILEMAPINFO=16,BATCH_BLITFRAMEBUFFER=17,BATCH_STARTQUERY=18,BATCH_ENDQUERY=19,BATCH_SETELLIPSEPARAMS=20,BATCH_SETGRADIENTCOLOR=21,BATCH_CLEARDEPTH=22,BATCH_SETDEPTHENABLED=23,BATCH_SETDEPTHSAMPLINGENABLED=24,BATCH_COPLANAR_STARTSTENCILPASS=25,BATCH_COPLANAR_STARTCOLORPASS=26,BATCH_COPLANAR_RESTORE=27,BATCH_SET_SCISSOR=28,BATCH_SETTILERANDOMIZATIONINFO=29;C33.J1.jy=class BatchState{constructor(t){this.renderer=t,this.FE=mat42.create(),this.xE=mat42.create(),this.m_=null,this.v_=null,this.Xy=!1,this.Yy=vec42.A(1,1,1,1),this.BE=null,this.qy=new C33.Rect,this.clearColor=C33.oh(C33.$a,0,0,0,0)}},C33.J1.zy=class WebGLBatchJob{constructor(t){var e=new ArrayBuffer(96);this.u3=0,this.Jy=t,this.V_=t.renderer.IT(),this.Ky=0,this.Zy=0,this.Qy=null,this.tA=new Float32Array(e,0,16),this.eA=new Float32Array(e,64,4),this.iA=new Float32Array(e,80,4),this.sA=[]}rA(t,e){this.u3=BATCH_QUAD,this.Ky=t,this.Zy=e}hA(){var t=this.V_;t.drawElements(t.TRIANGLES,this.Zy,t.UNSIGNED_SHORT,this.Ky)}nA(t){this.u3=BATCH_SETTEXTURE,this.Qy=t}aA(){var t=this.V_,e=this.Qy;t.bindTexture(t.TEXTURE_2D,e?e.$T():null)}oA(t){this.u3=BATCH_SETCOLOR,t.no(this.eA,0)}lA(){var t=this.eA,e=this.Jy;vec42._(e.Yy,t),e.BE.hy(t)}uA(t){this.u3=BATCH_SETGRADIENTCOLOR,t.no(this.eA,0)}cA(){var t=this.eA,e=this.Jy.BE;e.rE.AE()&&e.rE.ny(t[0],t[1],t[2],t[3])}fA(t,e){this.u3=BATCH_SETBLEND,this.Ky=t,this.Zy=e}dA(){this.V_.blendFunc(this.Ky,this.Zy)}CA(t,e,i,s){this.u3=BATCH_SETVIEWPORT;var r=this.eA;r[0]=t,r[1]=e,r[2]=i,r[3]=s}pA(){var t=this.eA;this.V_.viewport(t[0],t[1],t[2],t[3])}mA(t){this.u3=BATCH_SETPROJECTION,mat42._(this.tA,t)}vA(){var t=this.Jy,i=t.renderer.Am,s=t.BE,r=this.tA;for(let t=0,e=i.length;t<e;++t){var h=i[t];h===s?h.NE(r,!0):h.ey()}mat42._(t.xE,r)}SA(t){this.u3=BATCH_SETMODELVIEW,mat42._(this.tA,t)}gA(){var t=this.Jy,i=t.renderer.Am,s=t.BE,r=this.tA;for(let t=0,e=i.length;t<e;++t){var h=i[t];h===s?h.DE(r,!0):h.iy()}mat42._(t.FE,r)}TA(t){this.u3=BATCH_SETRENDERTARGET,this.Qy=t}_A(){var t=this.V_,e=this.Qy,i=this.Jy;e?(i.m_=e.S_(),i.v_=e.g_(),i.Xy&&i.v_?t.bindFramebuffer(t.FRAMEBUFFER,i.v_):t.bindFramebuffer(t.FRAMEBUFFER,i.m_)):(i.m_=null,i.v_=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}EA(t){this.u3=BATCH_CLEARSURFACE,t.no(this.tA,0)}yA(t,e,i,s){this.u3=BATCH_CLEARSURFACE;var r=this.tA;r[0]=t,r[1]=e,r[2]=i,r[3]=s}AA(){var t=this.V_,e=this.tA,i=this.Jy.clearColor,s=e[0],r=e[1],h=e[2],e=e[3];i.co(s,r,h,e)||(t.clearColor(s,r,h,e),i.Ua(s,r,h,e)),t.clear(t.COLOR_BUFFER_BIT)}IA(t){this.u3=BATCH_SETPOINTTEXCOORDS,t.no(this.tA,0)}RA(){var t=this.tA;this.Jy.qy.set(t[0],t[1],t[2],t[3])}MA(t,e){this.u3=BATCH_POINTS,this.Ky=t,this.Zy=1,this.tA[0]=e}wA(){var t=this.V_,e=this.Jy,i=e.renderer.Mm,s=(t.useProgram(i.US),i.NE(e.xE,!1),i.DE(e.FE,!1),e.qy),s=(i.Q_.AE()&&i.Q_.Hy(s.gl(),s.Tl()),i.tE.AE()&&i.tE.Hy(s._l(),s.El()),this.tA[0]);i.eE.AE()&&i.eE.Wy(s),i.K_.AE()&&(s=e.Yy,i.K_.ny(s[0],s[1],s[2],s[3])),t.drawArrays(t.POINTS,this.Ky/4,this.Zy),t.useProgram(e.BE.US)}bA(t){this.u3=BATCH_SETPROGRAM,this.Qy=t}OA(){var t=this.V_,e=this.Jy,i=this.Qy;e.BE=i,t.useProgram(i.US),i.NE(e.xE,!1),i.DE(e.FE,!1),i.K_.AE()&&(t=e.Yy,i.K_.ny(t[0],t[1],t[2],t[3]))}GA(){this.u3=BATCH_SETPROGRAMPARAMETERS}PA(){var t,e,i=this.Jy.BE,s=this.V_,r=this.tA,h=this.eA,n=this.iA;i.nE.AE()&&(t=this.Jy.renderer,e=this.Qy,t.LA!==e)&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,e?e.$T():null),t.LA=e,s.activeTexture(s.TEXTURE0)),i.CE.AE()&&i.CE.Hy(r[0],r[1]),i.oE.AE()&&i.oE.Hy(r[2],r[3]),i.lE.AE()&&i.lE.Hy(r[4],r[5]),i.mE.AE()&&i.mE.Wy(this.Zy),i.vE.AE()&&i.vE.Wy(r[6]),i.SE.AE()&&i.SE.Wy(r[7]),i.uE.AE()&&i.uE.Hy(r[12],r[13]),i.cE.AE()&&i.cE.Hy(r[14],r[15]),i.fE.AE()&&i.fE.Hy(n[0],n[1]),i.dE.AE()&&i.dE.Hy(n[2],n[3]),i.gE.AE()&&i.gE.Hy(h[0],h[1]),i.TE.AE()&&i.TE.Hy(h[2],h[3]),i.pE.AE()&&i.pE.Wy(this.Ky)}xA(){this.u3=BATCH_SETPROGRAMCUSTOMPARAMETERS}NA(){var i=this.Jy.BE.IE,s=this.sA;for(let t=0,e=i.length;t<e;++t){var r=i[t],h=s[t];r.ky()?r.Uy(h.Qa(),h.eo(),h.io()):r.Wy(h)}}DA(t){this.u3=BATCH_INVALIDATEFRAMEBUFFER,this.Qy=t}FA(){var t=this.V_,e=this.Qy,i=this.Jy.m_;e!==i&&t.bindFramebuffer(t.FRAMEBUFFER,e),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),e!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}BA(t,e,i){this.u3=BATCH_BLITFRAMEBUFFER;var s=this.tA,r=this.Jy.renderer,r=(s[0]=t.tp(),s[1]=t.cp(),s[2]=(e||r).tp(),s[3]=(e||r).cp(),s[4]=t.E_()?1:0,s[5]="stretch"===i,this.sA);C33.Dn(r),r.push(t.S_()),r.push(e?e.S_():null)}$A(){var t=this.tA,e=this.sA,i=this.V_,s=t[0],r=t[1],h=t[2],n=t[3],a=0!==t[4],t=0!==t[5],o=e[0],e=e[1];i.bindFramebuffer(i.READ_FRAMEBUFFER,o),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,e),t?i.blitFramebuffer(0,0,s,r,0,0,h,n,i.COLOR_BUFFER_BIT,a?i.LINEAR:i.NEAREST):(o=Math.min(s,h),e=Math.min(r,n),t=Math.max(r-n,0),a=Math.max(n-r,0),i.blitFramebuffer(0,t,o,e+t,0,a,o,e+a,i.COLOR_BUFFER_BIT,i.NEAREST))}kA(t){this.u3=BATCH_STARTQUERY,this.Qy=t}WA(){this.Qy.VA(),this.Qy=null}HA(t){this.u3=BATCH_ENDQUERY,this.Qy=t}UA(){this.Qy.jA(),this.Qy=null}XA(t,e,i){this.u3=BATCH_SETELLIPSEPARAMS;var s=this.tA;s[0]=t,s[1]=e,s[2]=i}YA(){var t=this.Jy.BE,e=this.tA;t.CE.AE()&&t.CE.Hy(e[0],e[1]),t.hE.AE()&&t.hE.Wy(e[2])}qA(t,e,i,s,r,h,n){this.u3=BATCH_SETTILEMAPINFO;var a=this.tA;t.no(a,0),a[4]=1/e,a[5]=1/i,a[6]=s/e,a[7]=r/i,a[8]=h/e,a[9]=n/i}zA(){var t=this.Jy.BE,e=this.tA;t.uE.AE()&&t.uE.Hy(e[0],e[1]),t.CE.AE()&&t.CE.Hy(e[4],e[5]),t.iE.AE()&&t.iE.Hy(e[6],e[7]),t.sE.AE()&&t.sE.Hy(e[8],e[9])}JA(t,e,i,s,r,h,n){this.u3=BATCH_SETTILERANDOMIZATIONINFO;var a=this.tA;a[0]=1/t,a[1]=1/e,a[2]=i,a[3]=s,a[4]=r,a[5]=h,a[6]=n}KA(){var t=this.Jy.BE,e=this.tA;t.CE.AE()&&t.CE.Hy(e[0],e[1]),t.iE.AE()&&t.iE.Hy(e[2],e[3]),t.hE.AE()&&t.hE.Wy(e[4]),t.sE.AE()&&t.sE.Hy(e[5],e[6])}ZA(t){this.u3=BATCH_CLEARDEPTH,this.Ky=t?1:0}QA(){var t=this.V_,e=0!==this.Ky;e||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),e||t.depthMask(!1)}tI(t){this.u3=BATCH_SETDEPTHENABLED,this.Ky=t?1:0}eI(){var t=this.V_;0===this.Ky?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}iI(t){this.u3=BATCH_SETDEPTHSAMPLINGENABLED,this.Ky=t?1:0}sI(){var t=this.V_,e=this.Jy,i=e.renderer,s=0!==this.Ky;e.Xy=s,t.activeTexture(t.TEXTURE2),s?(e.v_&&t.bindFramebuffer(t.FRAMEBUFFER,e.v_),t.bindTexture(t.TEXTURE_2D,i.c_())):(t.bindTexture(t.TEXTURE_2D,null),e.v_&&t.bindFramebuffer(t.FRAMEBUFFER,e.m_)),t.activeTexture(t.TEXTURE0)}rI(){this.u3=BATCH_COPLANAR_STARTSTENCILPASS}hI(){var t=this.V_;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}nI(){this.u3=BATCH_COPLANAR_STARTCOLORPASS}aI(){var t=this.V_;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}oI(){this.u3=BATCH_COPLANAR_RESTORE}lI(){var t=this.V_;t.disable(t.STENCIL_TEST)}uI(t,e,i,s,r){this.u3=BATCH_SET_SCISSOR,this.Ky=t?1:0;t=this.tA;t[0]=e,t[1]=i,t[2]=s,t[3]=r}cI(){var t=this.V_,e=this.tA;1===this.Ky?(t.enable(t.SCISSOR_TEST),t.scissor(e[0],e[1],e[2],e[3])):t.disable(t.SCISSOR_TEST)}fI(){switch(this.u3){case 1:return void this.hA();case 2:return void this.aA();case 3:return void this.lA();case 4:return void this.dA();case 5:return void this.pA();case 6:return void this.vA();case 7:return void this.gA();case 8:return void this._A();case 9:return void this.AA();case 10:return void this.wA();case 11:return void this.OA();case 12:return void this.PA();case 13:return void this.NA();case 14:return void this.FA();case 15:return void this.RA();case 16:return void this.zA();case 17:return void this.$A();case 18:return void this.WA();case 19:return void this.UA();case 20:return void this.YA();case 21:return void this.cA();case 22:return void this.QA();case 23:return void this.eI();case 24:return void this.sI();case 25:return void this.hI();case 26:return void this.aI();case 27:return void this.lI();case 28:return void this.cI();case 29:return void this.KA()}}}}{let fillOrStrokeRect2=function(t,e,i,s,r,h){e?t.strokeRect(i,s,r,h):t.fillRect(i,s,r,h)},ptToPx2=function(t){return t*(4/3)},getOffsetParam2=function(t,e){t=t.trim();var i=parseFloat(t);return isFinite(i)?t.endsWith("%")?e*i/100:i:0},C33=(fillOrStrokeRect=fillOrStrokeRect2,ptToPx=ptToPx2,getOffsetParam=getOffsetParam2,self.We),MAX_TEXTURE_SIZE=4096,EXTRA_LINE_HEIGHT=4,GENERIC_FONT_FAMILIES=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),DEFAULT_OPTS={timeout:60},tempColor=new C33.$a(0,0,0,1),VALID_HORIZ_ALIGNMENTS=new Set(["left","center","right"]),VALID_VERT_ALIGNMENTS=new Set(["top","center","bottom"]),VALID_WORD_WRAP_MODES=new Set(["word","cjk","character"]),VALID_TEXT_DIRECTIONS=new Set(["ltr","rtl"]),allRendererTexts=new Set,didCheckFoundBoundingBoxSupport=(C33.FontManager&&C33.FontManager.addEventListener("fontload",t=>{var e,i=t.font.qc();for(e of allRendererTexts)(e.dI()||C33.gr(e.CI(),i))&&e.pI()}),!1),supportsFontBoundingBoxMeasurements=!1;C33.J1.mS=class RendererText{constructor(t,e){e=Object.assign({},DEFAULT_OPTS,e),this.SS=t,this.mI="Arial",this.vI=16,this.SI=1,this.gI=0,this.TI=!1,this._I=!1,this.EI="black",this.yI=!1,this.zC=null,this.AI=!0,this.II=null,this.RI=new Set,this.MI="left",this.wI="top",this.s3="",this.bI=null,this.OI=C33.oh(C33.YC),this.GI="word",this.LI="ltr",this.xI=!1,this.NI=!1,this.DI=!1,this.FI=-1,this.BI=0,this.$I=0,this.kI=0,this.Bp=0,this.$p=0,this.WI=1,this.VI=null,this.HI=null,this.UI=null,this.jI=null,this.XI=-1,this.YI=-1,this.qI="",this.zI="",this.JI="",this.KI=1,this.ZI=1,this.QI=t=>this.tR(t),this.CT=null,this.eR=new C33.Rect,this.iR=1,this.sR=new C33.ef(()=>{this.rR(),this.hR(8,8)},e.timeout),this.nR=null,this.aR=!1,allRendererTexts.add(this)}lh(){this.II=null,this.RI.clear(),this.zC=null,this.bI=null,this.VI=null,this.HI=null,this.UI=null,this.jI=null,this.QI=null,this.sR.lh(),this.nR=null,this.rR(),this.OI.Ku(),this.OI=null,this.SS=null,this.aR=!0,allRendererTexts.delete(this)}oR(){this.DI=!0}lR(){this.oR(),this.NI=!0}pI(){this.lR(),this.xI=!0}uR(t){this.yI!==(t=!!t)&&(this.yI=t,t=this.yI?"alphabetic":"top",this.HI&&(this.HI.textBaseline=t),this.UI&&(this.UI.textBaseline=t),this.pI())}dI(){return this.yI}ZC(t){this.zC!==t&&(this.zC=t,this.OI.ZC(t),this.zC&&this.zC.N1()&&this.zC.D1().then(()=>this.oR()),this.pI())}cR(t){this.AI!==(t=!!t)&&(this.AI=t,this.oR())}fR(t){this.mI!==(t=t||"serif")&&(this.mI=t,this.pI())}CI(){return this.mI}dR(t){this.vI!==(t=t<.1?.1:t)&&(this.vI=t,this.pI())}CR(){return this.vI}pR(t){this.SI!==t&&(this.SI=t,this.pI())}mR(t){this.gI!==t&&(this.gI=t,this.lR())}vR(){return this.gI}SR(t){this.TI!==(t=!!t)&&(this.TI=t,this.pI())}gR(){return this.TI}TR(t){this._I!==(t=!!t)&&(this._I=t,this.pI())}_R(){return this._I}ER(t){t=Math.floor(t),this.FI!==t&&(this.FI=t,this.oR())}yR(){return this.FI}AR(t,e){var i=[],s=((this.TI||e.t1("b"))&&i.push("bold"),(this._I||e.t1("i"))&&i.push("italic"),e.Qp("size")),s=(s?parseFloat(s.kC):this.vI)*this.SI;i.push(t?s+"pt":s*this.IR()+"pt");let r=this.mI;t=e.Qp("font");return t&&t.kC&&(r=t.kC,this.II)&&!this.RI.has(r)&&(this.II(r),this.RI.add(r)),r&&(GENERIC_FONT_FAMILIES.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}KS(t){t instanceof C33.$a&&(t=t.So()),this.EI!==t&&(this.EI=t,this.oR())}RR(t,e,i){tempColor.ja(t,e,i),this.KS(tempColor)}MR(t){if(!VALID_HORIZ_ALIGNMENTS.has(t))throw new Error("invalid horizontal alignment");this.MI!==t&&(this.MI=t,this.lR())}wR(){return this.MI}bR(t){if(!VALID_VERT_ALIGNMENTS.has(t))throw new Error("invalid vertical alignment");this.wI!==t&&(this.wI=t,this.lR())}OR(){return this.wI}GR(t){if(!VALID_WORD_WRAP_MODES.has(t))throw new Error("invalid word wrap mode");this.GI!==t&&(this.GI=t,this.pI())}PR(){return this.GI}LR(t){if(!VALID_TEXT_DIRECTIONS.has(t))throw new Error("invalid text direction");this.LI!==t&&(this.LI=t,this.HI&&(this.HI.direction=this.LI),this.UI&&(this.UI.direction=this.LI),this.pI())}xR(){return this.LI}n3(t){this.s3!==t&&(this.s3=t,this.pI())}NR(){return this.s3}IR(){return this.iR*this.WI*self.devicePixelRatio}DR(e,i,s){if(void 0===s&&(s=1),!(e<=0||this.$I===e&&this.kI===i&&this.WI===s)){var r=this.$I,e=(this.$I=e,this.kI=i,this.WI=s,self.devicePixelRatio),i=(this.Bp=this.$I*this.WI*e,this.$p=this.kI*this.WI*e,Math.max(this.Bp,this.$p)),s=Math.min(this.SS.AT(),MAX_TEXTURE_SIZE);let t=1;s<i&&(t=s/i,this.Bp=Math.min(this.Bp*t,s),this.$p=Math.min(this.$p*t,s)),this.iR=t,this.$I!==r?this.pI():this.lR()}}tp(){return this.Bp}cp(){return this.$p}FR(){return this.WI}BR(){return this.$R(),this.OI.Dp()}kR(){return this.$R(),this.OI.Fp()+this.OI.KC()*(this.gI+EXTRA_LINE_HEIGHT)-this.gI}WR(){this.$R();let t=0;for(var e of this.OI.JC())for(var i of e.Sp())t+=i.gp();return t}T_(){return this.sR.lf(),this.VR(),this.CT}HR(t,e){this.$R();var i,s=this.IR();for(i of this.OI.JC()){var r=i.Cp()*s;if(e>=i.Jp()-i.cp()*s+r&&e<i.Jp()+r)for(var h of i.Sp())if(t>=h.qp()&&t<h.qp()+h.tp()*s)return h}return null}*UR(t){var e;this.$R();for(e of this.OI.JC())for(var i of e.Sp()){var s=i.Qp("tag");s&&C33.gr(s.kC,t)&&(yield i)}}jR(t,e){for(var i of this.UR(t)){if(0===e)return i;--e}return null}YR(t){let e=0;for(var i of this.UR(t))++e;return e}VR(){this.CT&&!this.DI&&!this.NI&&!this.xI||this.aR||this.Bp<=0||this.$p<=0||(this.DI=!1,this.qR())}qR(){this.aR||(this.$R(),this.hR(Math.max(C33.Dh(Math.ceil(this.Bp)),128),Math.max(C33.Dh(Math.ceil(this.$p)),64)),this.zR(),this.JR(),this.sR.lf())}hR(t,e){this.VI||(this.VI=C33.Ma(16,16));let i=!1;this.XI===t&&this.YI===e||(this.XI=t,this.YI=e,this.VI.width=t,this.VI.height=e,i=!0),this.HI||(this.HI=this.VI.getContext("2d"),i=!0),i?(this.HI.textBaseline=this.yI?"alphabetic":"top",this.HI.direction=this.LI,this.HI.font=this.qI,this.HI.fillStyle=this.JI,this.HI.strokeStyle=this.JI,this.HI.globalAlpha=this.KI,this.HI.lineWidth=this.ZI):this.HI.clearRect(0,0,t,e)}KR(){this.UI||(this.UI=C33.Ma(16,16).getContext("2d"),this.jI=C33.Ma(16,16).getContext("2d"),this.UI.textBaseline=this.yI?"alphabetic":"top",this.jI.textBaseline="top",this.UI.direction=this.LI,this.jI.direction=this.LI)}ZR(t){this.zI!==t&&(this.zI=t,this.UI.font=t,this.jI.font=t)}QR(){var t;return didCheckFoundBoundingBoxSupport||(didCheckFoundBoundingBoxSupport=!0,this.KR(),t=this.UI.measureText("test"),supportsFontBoundingBoxMeasurements="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent),supportsFontBoundingBoxMeasurements}$R(){this.tM(),this.eM()}tM(){this.xI&&(this.KR(),!this.yI||this.bI&&this.bI.toString()===this.s3||(this.bI=new C33.Lr(this.s3,{MC:!0})),this.OI.YC(this.yI?this.bI.BC():this.s3,this.QI,this.$I,this.GI,0),this.xI=!1)}eM(){this.NI&&(this.iM(),this.NI=!1)}tR(t){var e=t.np()?t.Rp().join(""):" ",t=(this.ZR(this.AR(!0,t)),t.Qp("size")),t=(t?parseFloat(t.kC):this.vI)*this.SI,i=this.UI.measureText(e);let s=0;return this.yI&&this.QR()&&(e=this.jI.measureText(e),s=i.fontBoundingBoxAscent-e.fontBoundingBoxAscent),{width:i.width,height:ptToPx2(t),fontBoundingBoxAscent:i.fontBoundingBoxAscent||0,fontBoundingBoxDescent:i.fontBoundingBoxDescent||0,hp:s}}sM(t){this.qI!==t&&(this.qI=t,this.HI.font=t)}rM(t){this.JI!==t&&(this.JI=t,this.HI.fillStyle=t,this.HI.strokeStyle=t)}hM(t){this.KI!==t&&(this.KI=t,this.HI.globalAlpha=t)}nM(t){this.ZI!==t&&(this.ZI=t,this.HI.lineWidth=t)}iM(){let s=this.IR(),r=(EXTRA_LINE_HEIGHT+this.gI)*s,h=0;var n=this.OI.JC();if(0!==n.length){for(var t of n){t.Yp(NaN),t.zp(NaN);for(var e of t.Sp())e.Yp(NaN),e.zp(NaN)}var a,o=this.yI&&this.QR();let i=n[0].cp()*s;"center"===this.wI?(a=n.reduce((t,e)=>t+e.cp()*s+r,0)-r,h=Math.max(this.$p/2-a/2,0),o&&(i=n[0].pp()*s)):"bottom"===this.wI&&(a=n.reduce((t,e)=>t+e.cp()*s+r,0)-this.gI*s,o=o?n.at(-1).Cp()*s:0,h=this.$p-a-o-2);for(let t=0,e=n.length;t<e;++t){var l=n[t],u=l.cp()*s,c=h;if(this.yI){if(h+=0===t?i:u,0<t&&h>this.$p-EXTRA_LINE_HEIGHT*s)break}else if(0<t&&h>=this.$p-u)break;0<=c&&this.aM(l,h,s),this.yI||(h+=u),h+=r}}}aM(t,e,i){let s=0;"center"===this.MI?s=(this.Bp-t.tp()*i)/2:"right"===this.MI&&(s=this.Bp-t.tp()*i),t.Yp(s),t.zp(e);for(var r of"ltr"===this.LI?t.Sp():t.jp())this.oM(r,s,e,i),s+=r.tp()*i}oM(t,e,i,s){var r=t.Qp("offsetx"),r=(e+=r?getOffsetParam2(r.kC,t.cp())*s:0,t.Qp("offsety"));i+=r?getOffsetParam2(r.kC,t.cp())*s:0,t.lp()&&(i+=(r=t.Qp("iconoffsety"))?getOffsetParam2(r.kC,t.cp())*s:.2*t.cp()*s),t.Yp(e),t.zp(i)}zR(){this.HI.imageSmoothingEnabled=this.AI,this.HI.imageSmoothingQuality="high",this.BI=0;var t,e=this.IR();for(t of this.OI.JC())this.lM(t,e)}lM(t,e){var i=t.qp(),s=t.Jp();if(Number.isFinite(i)&&Number.isFinite(s))for(var r of"ltr"===this.LI?t.Sp():t.jp())this.uM(r,e,t.cp())}uM(i,s,r){var h=this.HI,n=i.qp(),a=i.Jp();if(Number.isFinite(n)&&Number.isFinite(a)){r=r/16;let t=i.tp()*s;var o=i.cp()*s,l=i.cp()/16,u=(EXTRA_LINE_HEIGHT+this.gI)*s;let e=i.np()?i.Rp():null;if(-1!==this.FI){if(this.BI>=this.FI)return;i.np()&&this.BI+e.length>this.FI&&(e=e.slice(0,this.FI-this.BI),t=this.tR(i).width*s),this.BI+=i.gp()}var c,f,d,C=i.Qp("background"),p=i.t1("u"),m=i.t1("s");i.np()&&C33.kd(e)&&!C&&!p&&!m||i.t1("hide")||(c=i.Qp("color"),d=i.Qp("opacity"),this.hM(d?parseFloat(d.kC)/100:1),C&&(this.rM(C.kC),h.fillRect(n,a-o,t,o+u)),C=(d=i.Qp("linethickness"))?parseFloat(d.kC):1,(u=i.t1("stroke"))&&this.nM(.5*l*C*this.IR()),i.np()?(d=e.join(""),this.sM(this.AR(!1,i)),!u&&(this.nM(.5*l*C*this.IR()),f=i.Qp("outlineback"))&&(this.rM(f.kC),this.cM(!0,d,n,a,t)),this.rM(c?c.kC:this.EI),this.cM(u,d,n,a,t),!u&&(this.nM(.5*l*C*this.IR()),f=i.Qp("outline"))&&(this.rM(f.kC),this.cM(!0,d,n,a,t))):i.lp()&&0<i.tp()&&(f=i.l1(this.zC))&&h.drawImage(f,n,a-o,t,o),this.rM(c?c.kC:this.EI),p&&fillOrStrokeRect2(h,u,n,a+s*r,t,s*r*C),m&&h.fillRect(n,a-o/4+(d=s*l)/2-d*C/2,t,d*C))}}cM(t,e,i,s,r){"rtl"===this.LI&&(i+=r),t?"Gecko"===C33.di.Ti?this.HI.strokeText(e,i,s,r):this.HI.strokeText(e,i,s):"Gecko"===C33.di.Ti?this.HI.fillText(e,i,s,r):this.HI.fillText(e,i,s)}JR(){this.SS.fM()||(this.CT||(this.CT=this.SS.u_(this.VI.width,this.VI.height,{uT:!0,cT:"high"})),this.SS.dM(this.VI,this.CT),this.eR.set(0,0,this.Bp/this.CT.tp(),this.$p/this.CT.cp()),this.nR&&this.nR())}CM(){return this.eR}rR(){this.CT&&(this.SS.fM()||this.SS.C_(this.CT),this.CT=null)}static ZS(){for(var t of allRendererTexts)t.rR()}static pM(){return allRendererTexts.values()}}}{let C33=self.We;class WebGLRealTimeElapsedQuery{constructor(t){this.V_=t.IT(),this.mM=t.RT(),this.vM=t.SM(),this.gM=null,this.nf=!1,this.TM=!1,this._M=0,1===this.mM?this.gM=this.vM.createQueryEXT():this.gM=this.V_.createQuery()}lh(){this.EM(),this.V_=null,this.vM=null,this.TM=!1}EM(){this.gM&&(1===this.mM?this.vM.deleteQueryEXT(this.gM):this.V_.deleteQuery(this.gM),this.gM=null)}VA(){if(this.nf)throw new Error("query already active");1===this.mM?this.vM.beginQueryEXT(this.vM.TIME_ELAPSED_EXT,this.gM):this.V_.beginQuery(this.vM.TIME_ELAPSED_EXT,this.gM),this.nf=!0}jA(){if(!this.nf)throw new Error("query not active");1===this.mM?this.vM.endQueryEXT(this.vM.TIME_ELAPSED_EXT):this.V_.endQuery(this.vM.TIME_ELAPSED_EXT),this.nf=!1}yM(){if(this.gM&&!this.TM&&!this.nf){let t=!1;t=1===this.mM?this.vM.getQueryObjectEXT(this.gM,this.vM.QUERY_RESULT_AVAILABLE_EXT):this.V_.getQueryParameter(this.gM,this.V_.QUERY_RESULT_AVAILABLE);var e=this.V_.getParameter(this.vM.GPU_DISJOINT_EXT);t&&!e&&(1===this.mM?this._M=this.vM.getQueryObjectEXT(this.gM,this.vM.QUERY_RESULT_EXT):this._M=this.V_.getQueryParameter(this.gM,this.V_.QUERY_RESULT),this._M/=1e9,this.TM=!0),(t||e)&&this.EM()}}AM(){return this.TM}IM(){if(this.TM)return this._M;throw new Error("no result available")}}C33.J1.RM=class WebGLTimeElapsedQuery{constructor(t){this.SS=t,this.Km=t.rS(),this.nf=!1,this.MM=null,this.wM=!1,this.bM=null,this.OM=[]}lh(){for(var t of this.OM)t instanceof WebGLRealTimeElapsedQuery&&t.lh();C33.Dn(this.OM),this.MM=null,this.bM=null,this.SS=null}VA(){if(this.nf)throw new Error("query already active");var t=this.SS.GM();0<t.length?(this.wM=!0,this.MM=t.at(-1),this.MM.PM(),this.MM.OM.push(this)):(this.wM=!1,this.MM=null),this.nf=!0,t.push(this),this.LM()}jA(){if(!this.nf)throw new Error("query not active");if(this.SS.GM().pop()!==this)throw new Error("can only end most nested query");this.nf=!1,this.PM(),this.MM&&(this.MM.LM(),this.MM=null)}LM(){this.bM=C33.oh(WebGLRealTimeElapsedQuery,this.SS),this.OM.push(this.bM),this.bM.VA()}PM(){this.bM.jA(),this.bM=null}yM(){for(var t of this.OM)t.yM()}xM(){return this.wM}AM(){return this.OM.every(t=>t.AM())}IM(){return this.OM.reduce((t,e)=>t+e.IM(),0)}rS(){return this.Km}}}{let C33=self.We;C33.J1.NM=class WebGLQueryResultBuffer{constructor(t,e=1e3){this.SS=t,this.DM=e,this.FM=[],this.SS.BM(this)}lh(){this.Ku(),this.SS.$M(this),this.SS=null}Ku(){for(var t of this.FM)t.lh();C33.Dn(this.FM)}kM(){var t=new C33.J1.RM(this.SS);return this.FM.push(t),this.FM.length>this.DM&&this.FM.shift().lh(),t}WM(t){for(var e of this.FM){if(e.rS()>=t)return;if(e.xM())return;e.yM()}}VM(t,e){if(e<=t)return NaN;let i=0;for(var s of this.FM){if(s.rS()>=e)break;if(!(s.rS()<t)){if(!s.AM())return NaN;i+=s.IM()}}return i}HM(i){for(let t=0,e=this.FM.length;t<e;++t){var s=this.FM[t];if(!(s.rS()<i))return void(0<t&&this.FM.splice(0,t));s.lh()}}}}{let CheckPendingPolls2=function(){pollRafId=-1;for(var t of pendingPolls)t.UM()&&(t.resolve(),pendingPolls.delete(t));0<pendingPolls.size&&(pollRafId=self.requestAnimationFrame(CheckPendingPolls2))},C33=(CheckPendingPolls=CheckPendingPolls2,self.We),assert=self.assert,glMatrix=self.Se,vec32=glMatrix.Re,vec42=glMatrix.Me,mat42=glMatrix.Ee,DEFAULT_WEBGLRENDERER_OPTS={powerPreference:"default",jM:!0,alpha:!1,depth:!1,XM:!1,YM:2,failIfMajorPerformanceCaveat:!1},VALID_POWER_PREFERENCES=new Set(["default","low-power","high-performance"]),MAX_VERTICES=8e3,MAX_INDICES=MAX_VERTICES/2*3,MAX_POINTS=8e3,LAST_POINT=MAX_POINTS-4,PARTIAL_TEXTURE_UPLOAD_CHUNK_SIZE=262144,defaultTexCoordsQuad=new C33.Jl(0,0,1,0,1,1,0,1),tmpProjection=mat42.create(),tmpModelView=mat42.create(),tmpQuad=new C33.Jl,tmpRect=new C33.Rect,loseContextExtension=null,pendingPolls=(C33.isDebug&&(self.qM=function(){loseContextExtension?loseContextExtension.loseContext():console.warn("WEBGL_lose_context not supported")},self.zM=function(){loseContextExtension?loseContextExtension.restoreContext():console.warn("WEBGL_lose_context not supported")}),new Set),pollRafId=-1;C33.J1.JM=class WebGLRenderer extends C33.J1.pm{constructor(t,e){if(super(e),e=Object.assign({},DEFAULT_WEBGLRENDERER_OPTS,e),!VALID_POWER_PREFERENCES.has(e.powerPreference))throw new Error("invalid power preference");var i={alpha:!!e.alpha,depth:!1,antialias:!1,powerPreference:e.powerPreference,failIfMajorPerformanceCaveat:!!e.failIfMajorPerformanceCaveat};let s=null,r=0;if(2<=e.YM&&(s=t.getContext("webgl2",i),r=2),s||(s=t.getContext("webgl",i),r=1),!s)throw new Error("renderer-unavailable (could not get WebGL context)");this.V_=s,this.KM=s.getContextAttributes(),this.ZM=s.getParameter(s.VERSION),this.mM=r,this.QM=vec42.create(),this.ew=!1,this.iw=mat42.create(),this.rw=!!e.depth,this.hw=!(!e.depth||!e.XM),this.aw=this.rw,this.ow=!1,this.lw=null,this.uw=!0,this.cw=0,this.fw=0,this.j_=null,this.X_=null,this.dw=null,this.Y_=null,this.Cw=new Float32Array(MAX_VERTICES*this.eS()),this.pw=new Uint16Array(MAX_INDICES),this.mw=new Float32Array(2*MAX_VERTICES),this.Sw=new Float32Array(4*MAX_POINTS),this.gw=0,this.Tw=0,this._w=0,this.Ew=0,this.yw=null,this.Aw=null,this.Iw=[],this.Rw=0,this.Mw=0,this.ww=null,this.bw=0,this.Jy=C33.oh(C33.J1.jy,this),this.Ow=C33.oh(C33.$a,1,1,1,1),this.Gw=null,this.LA=null,this.Pw=0,this.Lw=0,this.xw=new C33.Rect,this.Nw=C33.oh(C33.Rect,0,0,-1,-1),this.Dw=0,this.Fw=-1,this.Bw=0,this.$w=0,this.kw=0,this.Ww="(unavailable)",this.Vw="(unavailable)",this.Hw=[],this.Uw=!1,this.jw=null,this.Xw=null,this.Yw=null,this.qw=null,this.zw=null,this.Jw=null,this.Kw=0,this.Zw=!!e.jM,this.vM=null,this.Qw=new Set,this.tb=[],this.t2(this.pw)}uS(){return!0}async s2(){super.s2();var t=this.V_,e=this.eS(),e=(this.Ow.Ua(1,1,1,1),this.Gw=null,this.LA=null,this.gw=0,this._w=0,this.Ew=MAX_VERTICES*e-4*e,C33.Dn(this.Iw),this.Rw=0,this.Mw=0,this.yw=null,this.ww=null,this.xw.set(0,0,1,1),this.bw=0,this.Jy),e=(e.BE=null,e.m_=null,e.v_=null,vec42.set(e.Yy,1,1,1,1),e.clearColor.Ua(0,0,0,0),e.qy.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.Pw=t.ONE,this.Lw=t.ONE_MINUS_SRC_ALPHA,this.eb(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.rw?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.aw=this.rw,this.ow=!1,this.Y_=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Y_),t.bufferData(t.ARRAY_BUFFER,this.Sw.byteLength,t.DYNAMIC_DRAW),this.j_=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.j_),t.bufferData(t.ARRAY_BUFFER,this.Cw.byteLength,t.DYNAMIC_DRAW),this.X_=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.X_),t.bufferData(t.ARRAY_BUFFER,this.mw.byteLength,t.DYNAMIC_DRAW),this.dw=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.dw),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.pw,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.Fw=t.getParameter(t.MAX_TEXTURE_SIZE),t.getParameter(t.ALIASED_POINT_SIZE_RANGE)),e=(this.Bw=e[0],this.$w=e[1],t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT)),i=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),e=(this.kw=e&&i?Math.min(e.precision,i.precision):0,2048<this.$w&&(this.$w=2048),this.Hw=t.getSupportedExtensions(),t.getExtension("WEBGL_debug_renderer_info"));if(e&&(this.Ww=t.getParameter(e.UNMASKED_VENDOR_WEBGL),this.Vw=t.getParameter(e.UNMASKED_RENDERER_WEBGL)),this.jw=t.getExtension("KHR_parallel_shader_compile"),C33.isDebug&&(loseContextExtension=t.getExtension("WEBGL_lose_context")),this.Zw&&(1===this.RT()?this.vM=t.getExtension("EXT_disjoint_timer_query"):this.vM=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.Xw=t.getExtension("EXT_texture_filter_anisotropic"),this.Xw?this.Kw=t.getParameter(this.Xw.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.Kw=0,this.RT()<2&&this.rw&&this.hw&&(this.Yw=t.getExtension("WEBGL_depth_texture"),!this.Yw))throw new Error("no depth texture support");this.RT()<2&&(this.qw=t.getExtension("EXT_frag_depth"),this.zw=t.getExtension("OES_standard_derivatives"),this.Jw=t.getExtension("EXT_shader_texture_lod"));i=C33.J1.N_,e=i.ly(!1);let s=i.Cy(),r=e,h=i.Ay(),n=i.Ey(),a=i.Sy(),o=i.ly(!0),l=!1;this.rw&&(this.RT()<2?this.qw&&(s=i.my(),h=i.Iy(),a=i.gy(),l=!0):(r=i.uy(),s=i.vy(),h=i.Ry(),n=i.yy(),a=i.Ty(),o=i.uy(!0)));var t=i._y(this.RT(),l,this.zw&&this.Jw),u=2<=this.RT()?i.uy():e,i=[[s,r,"<default>"],[s,r,"<default-device-transform>"],[h,n,"<point>"],[i.My(),e,"<fill>"],[i.wy(),e,"<lineargradient>"],[i.by(),e,"<penumbra>"],[i.Gy(),e,"<hardellipse>"],[i.Py(),e,"<hardellipseoutline>"],[i.Ly(),e,"<smoothellipse>"],[i.xy(),e,"<smoothellipseoutline>"],[i.Oy(),e,"<smoothline>"],[a,o,"<tilemap>"],[t,u,"<tilerandomization>"]],e=await Promise.all(i.map(t=>this.ib({src:t[0],F_:t[1],name:t[2]})));this.Rm=e[0],this.Aw=e[1],this.Mm=e[2],this.Gm=e[3],this.Pm=e[4],this.Lm=e[5],this.xm=e[6],this.Nm=e[7],this.Dm=e[8],this.Fm=e[9],this.Bm=e[10],this.wm=e[11],this.Om=e[12],this.O2()}async ib(t){t=await C33.J1.N_.W_(this,t);return this.R2(t),t}sb(){this.yw=null}DR(t,e,i){var s;this.Bp===t&&this.$p===e&&!i||(this.sS(),i=this.V_,s=this.Jy,this.Bp=t,this.$p=e,this.rb(0,0,t,e),this.T2(this.iw,t/e),this.hb(this.iw),this.Aw&&(i.useProgram(this.Aw.kE()),this.Aw.LE(this.gm),this.yw=this.Aw,this.Jy.BE=this.Aw),i.bindTexture(i.TEXTURE_2D,null),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,null),i.activeTexture(i.TEXTURE0),this.Gw=null,this.LA=null,this.rw&&this.uw&&this.nb(this.Bp,this.$p),this.ww&&this.ww.d_(this.Bp,this.$p),i.bindFramebuffer(i.FRAMEBUFFER,null),this.ww=null,s.m_=null,s.v_=null)}nb(t,e){var i=this.V_;this.lw&&this.cw===t&&this.fw===e||(this.hw?(this.lw&&i.deleteTexture(this.lw),this.lw=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.lw),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),2<=this.RT()?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,e,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.Yw&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,e,0,i.DEPTH_STENCIL,this.Yw.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.lw&&i.deleteRenderbuffer(this.lw),this.lw=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.lw),i.renderbufferStorage(i.RENDERBUFFER,2<=this.mM?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,e),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.cw=t,this.fw=e)}ob(t,e){this.rw&&(this.uw=!1,this.nb(t,e))}lb(){this.rw&&(this.uw=!0,this.nb(this.Bp,this.$p))}rb(t,e,i,s){var r=this.QM;r[0]===t&&r[1]===e&&r[2]===i&&r[3]===s||(this.ub().CA(t,e,i,s),vec42.set(r,t,e,i,s),this.Mw=0)}C2(t){super.C2(t),this.T2(this.iw,this.Bp/this.$p)}u2(t){super.u2(t),this.T2(this.iw,this.Bp/this.$p)}f2(t){super.f2(t),this.T2(this.iw,this.Bp/this.$p)}hb(t){mat42.B(this.gm,t)||(this.ub().mA(t),mat42._(this.gm,t),this.Mw=0,this.ew=!0)}cb(){let t,e,i;var s=this.ww;i=(null===s?(t=this.iw,e=this.tp(),this):(t=s.__(),e=s.tp(),s)).cp(),this.hb(t),this.rb(0,0,e,i)}fb(t){mat42.B(this.Tm,t)||(this.ub().SA(t),mat42._(this.Tm,t),this.Mw=0,this.ew=!0)}Cb(){this.ew=!1}pb(){return this.ew}p_(){return this.Jy}ub(){var t=this.Iw;return this.Rw===t.length&&t.push(new C33.J1.zy(this.Jy)),t[this.Rw++]}sS(){0===this.Rw||this.fM()||(this.mb(),this.vb(),this.Rw=0,this.gw=0,this.Tw=0,this._w=0,this.Mw=0)}mb(){var t=this.V_;0<this._w&&(t.bindBuffer(t.ARRAY_BUFFER,this.Y_),t.bufferSubData(t.ARRAY_BUFFER,0,this.Sw.subarray(0,this._w))),0<this.gw&&(t.bindBuffer(t.ARRAY_BUFFER,this.j_),t.bufferSubData(t.ARRAY_BUFFER,0,this.Cw.subarray(0,this.gw)),t.bindBuffer(t.ARRAY_BUFFER,this.X_),t.bufferSubData(t.ARRAY_BUFFER,0,this.mw.subarray(0,this.Tw)))}vb(){var i=this.Iw;for(let t=0,e=this.Rw;t<e;++t)i[t].fI()}Sb(){return this.Ow.ro()}gb(t,e,i,s){var r=this.Ow;r.co(t,e,i,s)||(r.Ua(t,e,i,s),this.ub().oA(r),this.Mw=0,this.km=null)}Tb(t){var e=this.Ow;e.ro()!==t&&(e.Ka(t),this.ub().oA(e),this.Mw=0,this.km=null)}KS(t){var e=this.Ow;e.equals(t)||(e.set(t),this.ub().oA(e),this.Mw=0,this.km=null)}_b(){this.gb(1,1,1,1)}Eb(){return this.Ow}Ab(t){t!==this.Gw&&(this.ub().nA(t),this.Gw=t,this.Mw=0)}OT(){this.Gw=null}JS(t){t=this.ov(t);this.Ib(t[0],t[1])}Rb(t){t=this.cv(t);this.Ib(t.nv,t.av)}Ib(t,e){t===this.Pw&&e===this.Lw||(this.ub().fA(t,e),this.Pw=t,this.Lw=e,this.Mw=0,this.km=null)}Mb(){return this.Pw===this.V_.ONE&&this.Lw===this.V_.ONE_MINUS_SRC_ALPHA}wb(){this.Ib(this.V_.ONE,this.V_.ONE_MINUS_SRC_ALPHA)}bb(){this.Ib(this.V_.SRC_ALPHA,this.V_.ONE_MINUS_SRC_ALPHA)}Ob(){this.Ib(this.V_.ONE,this.V_.ZERO)}Rect(t){this.Gb(t.gl(),t.Tl(),t._l(),t.El())}Gb(t,e,i,s){this.tS(t,e,i,e,i,s,t,s)}Pb(){let t=this.gw;t>=this.Ew&&(this.sS(),t=0),1===this.Mw?this.Iw[this.Rw-1].Zy+=6:(this.ub().rA(t,6),this.Mw=1)}Lb(t){t.mu(this.Cw,this.gw,this.Hm+this.Um),this.gw+=12}Jl(t){this.Pb(),this.Lb(t),defaultTexCoordsQuad.no(this.mw,this.Tw),this.Tw+=8}tS(t,e,i,s,r,h,n,a){this.Pb();var o=this.Cw,l=this.gw,u=this.Hm+this.Um;o[l++]=t,o[l++]=e,o[l++]=u,o[l++]=i,o[l++]=s,o[l++]=u,o[l++]=r,o[l++]=h,o[l++]=u,o[l++]=n,o[l++]=a,o[l++]=u,this.gw=l,defaultTexCoordsQuad.no(this.mw,this.Tw),this.Tw+=8}Mv(t,e){this.Pb(),this.Lb(t),e.Il(this.mw,this.Tw),this.Tw+=8}xb(t,e){this.Pb(),this.Lb(t),e.no(this.mw,this.Tw),this.Tw+=8}Nb(t,e,i,s,r,h,n,a,o,l,u,c,f){this.Pb();var d=this.Cw,C=this.gw,p=this.Hm+this.Um;d[C++]=t,d[C++]=e,d[C++]=p+i,d[C++]=s,d[C++]=r,d[C++]=p+h,d[C++]=n,d[C++]=a,d[C++]=p+o,d[C++]=l,d[C++]=u,d[C++]=p+c,this.gw=C,f.Il(this.mw,this.Tw),this.Tw+=8}Ev(t,e,i,s,r,h,n,a,o,l,u,c,f){this.Pb();var d=this.Cw,C=this.gw,p=this.Hm+this.Um;d[C++]=t,d[C++]=e,d[C++]=p+i,d[C++]=s,d[C++]=r,d[C++]=p+h,d[C++]=n,d[C++]=a,d[C++]=p+o,d[C++]=l,d[C++]=u,d[C++]=p+c,this.gw=C,f.no(this.mw,this.Tw),this.Tw+=8}Db(i,s,r){var h=this.Cw,n=this.mw;if(r.length%3!=0)throw new Error("invalid index buffer length");for(let t=0,e=r.length;t<e;){var a=r[t++],o=r[t++],l=r[t++],u=3*a,c=3*o,f=3*l,a=2*a,o=2*o,l=2*l,d=(this.Pb(),this.gw),C=this.Tw;h[d++]=i[0+u],h[d++]=i[1+u],h[d++]=i[2+u],h[d++]=i[0+c],h[d++]=i[1+c],h[d++]=i[2+c],h[d++]=i[0+f],h[d++]=i[1+f],h[d++]=i[2+f],h[d++]=i[0+f],h[d++]=i[1+f],h[d++]=i[2+f],n[C++]=s[0+a],n[C++]=s[1+a],n[C++]=s[0+o],n[C++]=s[1+o],n[C++]=s[0+l],n[C++]=s[1+l],n[C++]=s[0+l],n[C++]=s[1+l],this.gw=d,this.Tw=C}}Fb(t,e){this.mv(0),mat42._(tmpProjection,this.gm),mat42._(tmpModelView,this.Tm),this.cb();var i,s,r,h,n,[a,o]=this.Bb(this.ww),l=this.I2(0,0,this.n2(o),0,0,0,o);this.fb(l),"crop"===t&&this.ww&&e?(l=this.Bp/2,t=this.$p/2,i=e.tp(),e=e.cp(),s=this.ww.tp(),n=this.ww.cp(),s=Math.min(s,i),r=Math.min(n,e),h=Math.max(e-n,0),n=Math.max(n-e,0),tmpRect.set(-l,t-n,-l+s,t-r-n),tmpQuad.vu(tmpRect),tmpRect.set(0,h,s,r+h),tmpRect.Mt(i,e),this.Mv(tmpQuad,tmpRect)):this.Gb(-(l=a/2),t=o/2,l,-t),this.hb(tmpProjection),this.fb(tmpModelView)}$b(t){this.xw.equals(t)||(this.xw._(t),this.ub().IA(t),this.Mw=0)}kb(){}Wb(t,e,i,s){this._w>=LAST_POINT&&this.sS();var r=this._w,h=this.Hm+this.Um,h=(2===this.Mw&&this.bw===h?this.Iw[this.Rw-1].Zy++:(this.ub().MA(r,h),this.Mw=2,this.bw=h),this.Sw);h[r++]=t,h[r++]=e,h[r++]=i,h[r++]=s,this._w=r}G2(t){this.yw!==t&&(this.ub().bA(t),this.yw=t,this.Mw=0,this.km=null)}Vb(){return this.yw}Hb(){this.G2(this.Aw)}Ub(t){this.ub().uA(t),this.Mw=0}jb(t,e,i=1){this.ub().XA(t,e,i),this.Mw=0}Xb(t,e,i,s,r,h,n){if(this.yw!==this.wm)throw new Error("must set tilemap fill mode first");this.ub().qA(t,e,i,s,r,h,n),this.Mw=0}Yb(t,e,i,s,r,h,n){if(this.yw!==this.Om)throw new Error("must set tile randomization mode first");this.ub().JA(t,e,i,s,r,h,n),this.Mw=0}qb(t,e,i,s,r,h,n,a,o,l,u){var c,f,d=this.yw;u%=10800,d.yE&&!d.qE(e,i,s,r,h,n,a,o,l,u)&&((c=this.ub()).GA(),d.KE(e,i,s,r,h,n,a,o,l,u),(f=c.tA)[0]=h,f[1]=n,e.no(f,2),f[6]=o,f[7]=l,i.no(f,12),h=c.eA,r.no(h,0),n=h[1],h[1]=h[3],h[3]=n,s.no(c.iA,0),c.Ky=u,c.Zy=a,d.nE.AE()?c.Qy=t?t.T_():null:c.Qy=null,this.Mw=0)}zb(t){var e,i=this.yw;0===t.length||i.UE(t)||((e=this.ub()).xA(),i.XE(t),C33.kn(e.sA,t),this.Mw=0)}Jb(t,e,i,s){this.ub().yA(t,e,i,s),this.Mw=0}Ku(t){this.ub().EA(t),this.Mw=0}Kb(){}iS(){super.iS(),this.V_.flush()}Zb(){this.rw&&this.ww&&this.ww.I_()&&(this.ub().ZA(this.aw),this.Mw=0)}Qb(t){this.aw!==(t=!!t)&&this.rw&&(this.aw=t,this.ub().tI(t),this.Mw=0)}tO(){return this.aw}c_(){return this.lw}f_(){return this.hw}eO(t){if(t=!!t,this.hw&&this.ow!==t){if(t&&this.tO())throw new Error("depth still enabled");this.ow=t,this.ub().iI(t),this.Mw=0}}iO(t,e,i,s,r=0){t=Math.floor(t),e=Math.floor(e),i=Math.floor(i),s=Math.floor(s),this.Nw.Sl(t,e,i,s)||(this.Nw.cl(t,e,i,s),e=(r||this.Bb(this.sO())[1])-e-s,this.ub().uI(!0,t,e,i,s),this.Mw=0)}rO(){-1!==this.Nw._l()&&(this.Nw.set(0,0,-1,-1),this.ub().uI(!1,0,0,0,0),this.Mw=0)}hO(){for(var t of this.Qw)t.WM(this.Km)}fM(){return!this.V_||this.V_.isContextLost()||this.Uw}ZS(){super.h2(),C33.J1.dT.ZS(),C33.J1.zT.ZS(),C33.J1.mS.ZS();for(var t of this.Qw)t.Ku();this.Hw=[],this.vM=null,this.jw=null,this.Xw=null,this.Yw=null,this.qw=null,this.zw=null,this.Jw=null,this.Kw=0,this.Ww="(unavailable)",this.Vw="(unavailable)",this.yw=null,this.Aw=null,this.lw=null;for(var e of this.$m.values())e.ZS()}async QS(){this.Uw=!0,await this.s2(),this.Uw=!1;for(var t of this.$m.values())t.QS(this);this.DR(this.Bp,this.$p,!0)}nO(t,e){if(this.fM())throw new Error("context lost");this.sS();var i=C33.oh(C33.J1.dT,this);return i.yT(t,e),i}async aO(e,i){if(this.fM())throw new Error("context lost");if(i=Object.assign({},i),C33.Wi.ImageBitmapOptions){let t=await createImageBitmap(e,{premultiplyAlpha:"premultiply"});var s=i.hT&&"clamp-to-edge"!==i.hT||i.nT&&"clamp-to-edge"!==i.nT,r=C33.Nh(t.width)&&C33.Nh(t.height);return this.MT()||r||!s?i.premultiplyAlpha=!1:C33.Wi.ji?(t=await createImageBitmap(e,{premultiplyAlpha:"premultiply",resizeWidth:C33.Dh(t.width),resizeHeight:C33.Dh(t.height)}),i.premultiplyAlpha=!1):t=await createImageBitmap(e,{premultiplyAlpha:"none"}),C33.P3(()=>this.nO(t,i))}if(e instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");r=await C33.Ra(e);e=r}return C33.P3(()=>this.nO(e,i))}u_(t,e,i){this.sS();var s=C33.oh(C33.J1.dT,this);return s.GT(t,e,i),s}dM(t,e,i){this.sS(),e.DT(t,i)}C_(t){t&&(t.WT(),0<t.VT()||(this.sS(),t===this.Gw&&(this.V_.bindTexture(this.V_.TEXTURE_2D,null),this.Gw=null),t===this.LA&&(this.V_.activeTexture(this.V_.TEXTURE1),this.V_.bindTexture(this.V_.TEXTURE_2D,null),this.V_.activeTexture(this.V_.TEXTURE0),this.LA=null),t.FT()))}oO(t){let e=this.Bp,i=this.$p,s=!0;if(t&&("number"==typeof t.width&&(e=Math.floor(t.width),s=!1),"number"==typeof t.height)&&(i=Math.floor(t.height),s=!1),e<=0||i<=0)throw new Error("invalid size");this.sS();var r=C33.oh(C33.J1.zT,this);return r.o_(e,i,Object.assign({YT:s},t)),this.ww=null,this.Jy.m_=null,this.Jy.v_=null,r}lO(t,e=!0){t!==this.ww&&(t&&t.R_()&&t.d_(this.Bp,this.$p),this.ub().TA(t),this.ww=t,this.Mw=0,e)&&this.cb()}sO(){return this.ww}Bb(t){return t?[t.tp(),t.cp()]:[this.Bp,this.$p]}uO(t,e="stretch"){this.mM<2||this.ww&&0<this.ww.M_()?(this.Ob(),this._b(),this.cO(t,e)):(this.ub().BA(t,this.ww,e),this.Mw=0)}cO(t,e="stretch"){t=t.T_();if(!t)throw new Error("not a texture-backed render target");this.Ab(t),this.Fb(e,t)}fO(t){this.mM<2||(this.ub().DA(t.S_()),this.Mw=0)}dO(t){this.lO(null),this.sS();var e=t.T_();e===this.Gw&&(this.V_.bindTexture(this.V_.TEXTURE_2D,null),this.Gw=null),e===this.LA&&(this.V_.activeTexture(this.V_.TEXTURE1),this.V_.bindTexture(this.V_.TEXTURE_2D,null),this.V_.activeTexture(this.V_.TEXTURE0),this.LA=null),t.FT()}async P_(e,i,s){this.sS();let t=this.ww,r,h,n,a=(n=e?(r=e.tp(),h=e.cp(),e.S_()):(r=this.tp(),h=this.cp(),null),0),o=0,l=r,u=h;if(s){a=C33.ph(Math.floor(s.gl()),0,r-1),o=C33.ph(Math.floor(s.Tl()),0,h-1);let t=s.width(),e=(t=0===t?r-a:C33.ph(Math.floor(t),0,r-a),s.height());e=0===e?h-o:C33.ph(Math.floor(e),0,h-o),l=t,u=e,o=h-(o+u)}let c=this.V_;c.bindFramebuffer(c.FRAMEBUFFER,n);e=()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.ww=null,this.Jy.m_=null,this.Jy.v_=null,this.lO(t)};let f;if(!i&&2<=this.RT()){c.bindFramebuffer(c.READ_FRAMEBUFFER,n);var s=c.createBuffer(),i=l*u*4,d=c.PIXEL_PACK_BUFFER;c.bindBuffer(d,s),c.bufferData(d,i,c.STREAM_READ),c.readPixels(a,o,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(d,null),e();let t=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);await this.k_(()=>c.getSyncParameter(t,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(t),f=new ImageData(l,u),c.bindBuffer(d,s),c.getBufferSubData(d,0,new Uint8Array(f.data.buffer),0,i),c.bindBuffer(d,null),c.deleteBuffer(s)}else f=new ImageData(l,u),c.readPixels(a,o,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(f.data.buffer)),e();return f}CO(){this.Qb(!0),this.ub().rI(),this.Mw=0,this.Dw=1}pO(){this.Qb(!1),this.ub().nI(),this.Mw=0,this.Dw=2}mO(){return 2===this.Dw}vO(){this.Qb(!0),this.ub().oI(),this.Mw=0,this.Dw=0}SO(t){this.gO()&&(this.ub().kA(t),this.Mw=0)}TO(t){this.gO()&&(this.ub().HA(t),this.Mw=0)}k_(e){var t=new Promise(t=>pendingPolls.add({resolve:t,UM:e}));return-1===pollRafId&&(pollRafId=self.requestAnimationFrame(CheckPendingPolls2)),t}cS(){return this.Bp*this.$p*(this.KM.alpha?4:3)}fS(){let t=0;for(var e of C33.J1.zT.L_())e.T_()||(t+=e.UT());return t}dS(){let t=0;for(var e of C33.J1.dT.jT())t+=e.UT();return t}_O(){return this.ZM}RT(){return this.mM}EO(){return"webgl"+this.RT()}MT(){return 2<=this.RT()}AT(){return this.Fw}yO(){return this.Bw}AO(){return this.$w}IO(){return 0!==this.kw}RO(){return this.kw}MO(){return this.Ww}wO(){return this.Vw}bO(){var t;return 2<=this.RT()?"webgl2":(t=[],this.qw&&t.push("EXT_frag_depth"),this.zw&&t.push("OES_standard_derivatives"),this.Jw&&t.push("EXT_shader_texture_lod"),0<t.length?"webgl1:"+t.join(","):"webgl1:none")}OO(){return this.Hw}gO(){return!!this.vM}SM(){return this.vM}B_(){return this.jw}xT(){return this.Xw}NT(){return this.Kw}BM(t){this.Qw.add(t)}$M(t){this.Qw.delete(t)}GM(){return this.tb}IT(){return this.V_}eb(t){this.hv([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}GO(){return this.pS()}}}{let C33=self.We,DEFAULT_CTOR_OPTS={PO:null,LO:null,xO:null,getTime:null,NO:null};C33.J1.DO=class EffectChainManager{constructor(t){t=Object.assign({},DEFAULT_CTOR_OPTS,t),this.FO=t.PO,this.BO=t.LO,this.$O=t.xO,this.kO=t.getTime,this.WO=t.NO,this.VO=null,this.HO=new Set}UO(t){this.HO.add(t)}jO(t){this.HO.delete(t)}ZS(){this.VO=null;for(var t of this.HO)t.ZS()}XO(t){return this.FO?this.FO(t):[t.tp(),t.cp()]}sO(t){return this.BO(t)}YO(t,e){this.$O(t,e)}qO(){return this.kO()}Z0(t){this.WO(t)}zO(t,e,i){return e=Math.floor(e),i=Math.floor(i),!this.VO||this.VO.tp()===e&&this.VO.cp()===i||(t.C_(this.VO),this.VO=null),null===this.VO&&(this.VO=t.nO(null,{width:e,height:i,aT:"nearest",uT:!1})),this.VO}}}{let C33=self.We,assert=self.assert,glMatrix=self.Se,mat42=glMatrix.Ee,tempRect=C33.oh(C33.Rect),tempRect2=C33.oh(C33.Rect),tempRect3=C33.oh(C33.Rect),tempRect4=C33.oh(C33.Rect),tempMat4a=mat42.create(),tempMat4b=mat42.create(),DEFAULT_CTOR_OPTS={JO:null,KO:null,ZO:null,QO:!1},DEFAULT_BUILDSTEPS_OPTS={tG:null,eG:!1,iG:!1,sG:!1,rG:!1,hG:!1,nG:!1};C33.J1.aG=class EffectChain{constructor(t,e){e=Object.assign({},DEFAULT_CTOR_OPTS,e),this.ld=t,this.oG=e.JO,this.lG=e.KO,this.uG=e.ZO,this.cG=null,this.fG=[],this.dG=[],this.CG=[],this.pG=!1,this.XS=0,this.mG=!1,this.vG=!1,this.SG=!1,this.gG=!1,this.TG=!1,this._G=!1,this.ew=!1,this.EG=!1,this.yG=!1,this.AG=!1,this.IG=!1,this.MG=!1,this.wG=0,this.bG=[null,null,null],this.OG=!!e.QO,this.GG=0,this.PG=0,this.LG=0,this.xG=0,this.NG=null,this.DG=null,this.FG=C33.oh(C33.Rect),this.BG=C33.oh(C33.Rect),this.$G=C33.oh(C33.Rect),this.kG=C33.oh(C33.Rect),this.WG=C33.oh(C33.Rect),this.VG=1,this.HG=1,this.UG=0,this.jG=0,this.XG=null,this.YG=null,this.qG=0,this.zG=0,this.JG=!1,this.r_=mat42.create(),this.KG=mat42.create(),this.ld.UO(this)}lh(){this.ld.jO(this),C33.Dn(this.CG),C33.Dn(this.fG),C33.Dn(this.dG),this.NG=null,this.DG=null,this.oG=null,this.lG=null,this.uG=null}ZS(){this.pG=!0,C33.Dn(this.CG),C33.Dn(this.fG),C33.Dn(this.dG)}ZG(){return this.pG}QG(r,t){if(t=Object.assign({},DEFAULT_BUILDSTEPS_OPTS,t),C33.Dn(this.CG),this.GG=0,this.PG=0,this.mG=!1,this.vG=!1,this.SG=!1,this.gG=!1,this.TG=!1,this._G=!1,this.wG=0,this.MG=!!t.rG,this.IG=!!t.nG,this.pG=!1,C33.kn(this.fG,r),0!==r.length){if(t.tG){if(t.tG.length!==r.length)throw new Error("incorrect indexMap length");C33.kn(this.dG,t.tG)}else{C33.Dn(this.dG);for(let t=0,e=r.length;t<e;++t)this.dG.push(t)}for(var e of r)this.GG+=e.PS(),this.PG+=e.LS(),e.BS()&&(this.mG=!0),e.kS()&&(this.vG=!0),e.$S()&&(this.SG=!0),e.xS()&&(this.gG=!0),e.HS()&&(this.TG=!0);this._G=this.tP(r[0].OS());var h=this.eP(r[0],t),n=this.iP(r.at(-1),t);if(1!==r.length||h||n){this.AG=!1;let s=0;h&&(this.wG=1,this.CG.push(C33.oh(C33.J1.aG.rP.sP,this,-1,1)),s=1);for(let e=0,i=r.length;e<i;++e)if(0!==e||h){let t=1===s?2:1;e!==i-1||n||(t=0),this.wG=Math.max(this.wG,t),this.CG.push(C33.oh(C33.J1.aG.rP.hP,this,s,t,e)),s=t}else this.wG=1,this.CG.push(C33.oh(C33.J1.aG.rP.nP,this,-1,1,e)),s=1;n&&this.CG.push(C33.oh(C33.J1.aG.rP.aP,this,s,0))}else this.AG=!0}}eP(t,e){return!!(e.eG||t.NS()||e.sG&&!t.FS()||t.kS()&&!this.IG||0!==this.GG||0!==this.PG)||(t.OS().uS()?t.$S()&&(e.hG||e.rG)||t.WS()&&e.rG:t.$S()&&!this._G&&e.hG)}iP(t,e){return!!e.iG||(t.OS().uS()?t.$S()||t.xS():(t.$S()||t.xS())&&this.oP())}tP(t){return t._2()&&this.SG&&!this.gG}lP(t,e,i){t._2()&&null===e&&(e=t.GetBackbufferRenderTarget()),this.XG=e,this.NG=i.uP||null,this.DG=i.contextObject||null,this.XS=i.cP||0,this.VG=i.devicePixelRatio||1,this.HG=i.fP||1,this.UG=i.dP||0,this.jG="number"==typeof i.time?i.time:this.ld.qO(),this.ew=!1,t.Cb(),this.mG&&this.CP();let s=!1;if(this.pP()&&(this.mP(t,i),s=!0,this.YG=this.ld.zO(t,this.LG,this.xG),tempRect._(this.BG),tempRect.Vl(),t._2()&&t._MaybeDoPendingClearRenderPass(this.XG),t.CopyTextureToTexture(this.XG.T_(),this.YG,tempRect.gl(),tempRect.Tl(),tempRect.width(),tempRect.height())),this.AG)this.vP(t,i);else if(s||this.mP(t,i),0!==this.$G.width()||0!==this.$G.height()){t.wb(),t._b(),t.Cv(0),t.mv(0),this.cG=i.SP||null,this.qG=i.gP||0,this.zG=i.TP||0,this.JG=!!i._P,this.EP(t),this.bG[0]=e,this.bG[1]=1<=this.wG?this.yP():null,this.bG[2]=2===this.wG?this.yP():null;for(var r of this.CG){var h=this.AP(r.IP()),n=this.AP(r.RP());t._2()?r.MP(t,h,n):r.wP(t,h,n)}t.Ab(null),this.bG[1]&&this.bP(this.bG[1]),this.bG[2]&&this.bP(this.bG[2]),this.bG.fill(null),this.OP(t),this.XG=null,this.YG=null,this.NG=null,this.DG=null,this.cG=null}}mP(t,e){var[i,s]=this.ld.XO(t);this.GP(t,i,s),this.PP(e)}GP(t,e,i){if(e<=0||i<=0)throw new Error("invalid draw size");this.LG===e&&this.xG===i||this.LP(t,e,i,0,0,this.r_,this.KG),this.LG=e,this.xG=i}LP(t,e,i,s,r,h,n){s=e/2+s,r=i/2+r,t.T2(h,e/i),h=t.I2(s,r,t.n2(i),s,r,0,i);mat42._(n,h)}PP(t){this.FG._(t.xP),t.NP?this.BG._(t.NP):this.BG.set(0,0,this.LG,this.xG),this.$G._(this.BG),this.$G.Mt(this.LG,this.xG);t=this.HG*this.VG;this.BG.Pl(this.GG*t,this.PG*t),this.WG._(this.BG),this.WG.Mt(this.LG,this.xG),this.BG.Hl(0,0,this.LG,this.xG),this.kG._(this.BG),this.kG.Mt(this.LG,this.xG)}EP(t){var e;this.EG=t.tO(),this.yG=t.mO(),this.IG?(t.Qb(!1),this.vG&&t.eO(!0)):(tempRect._(this.BG),t.uS()?(e=this.HG*this.VG,tempRect.Pl(Math.max(this.GG,1)*e,Math.max(this.PG,1)*e),tempRect.Vl(),tempRect.ph(0,0,this.LG,this.xG)):tempRect.Vl(),t.iO(tempRect.gl(),tempRect.Tl(),tempRect.width(),tempRect.height(),this.xG))}DP(t){t._b(),this.IG||(this.yG&&t.vO(),t.Qb(!1),this.vG&&t.eO(!0)),t._2()&&t.SetNormalizedCoordsProgramVariant(!0)}OP(t){t.eO(!1),this.yG&&t.pO(),t.Qb(this.EG),this.IG||t.rO(),t._2()&&t.SetNormalizedCoordsProgramVariant(!1),this.ew=t.pb()}FP(){this.WG.ph(0,0,1,1)}AP(t){return t<0?null:this.bG[t]}yP(){return this.ld.sO(this)}BP(){return this.XG}bP(t){this.ld.YO(t,this)}$P(t){return this.fG[t]}kP(t){this.cG?this.cG(this,t,()=>this.oG(t,this)):this.oG(t,this),this.AG||this.DP(t)}WP(t){var e;return!!this.IG||0===this.qG&&0===this.zG&&([t,e]=t.Bb(t.sO()),t===this.LG)&&e===this.xG}VP(t,e){let i=this.r_,s=this.KG;var r;e&&!this.WP(t)&&(i=tempMat4a,s=tempMat4b,[e,r]=t.Bb(t.sO()),this.LP(t,e,r,this.qG,this.zG,i,s),this.IG||t.rO()),t.hb(i),t.fb(s)}CP(){this.ld.Z0(this)}HP(t,e){return this.uG(this.dG[t],e)}UP(t,e){let i=this.WG,s=this.kG,r=this.$G;t.uS()&&(tempRect2._(i),tempRect2.Dl(1),i=tempRect2,tempRect3._(s),tempRect3.Dl(1),s=tempRect3,tempRect4._(r),tempRect4.Dl(1),r=tempRect4),this.jP(t,e,s,r,i,1/this.LG,1/this.xG)}XP(t,e){let s=this.kG,r=this.$G,h=1/this.LG,n=1/this.xG;if(this.lG){let{YP:t,qP:e,zP:i}=this.lG(this.NG);t||(tempRect.set(0,0,0,0),t=tempRect),e=e||this.LG,i=i||this.xG,s=t,r=t,h=1/e,n=1/i}else t.uS()&&(tempRect3._(s),tempRect3.Dl(1),s=tempRect3,tempRect4._(r),tempRect4.Dl(1),r=tempRect4);let i=this.WG;t.uS()&&((i=tempRect2)._(this.WG),i.Dl(1)),this.jP(t,e,s,r,i,h,n),t._2()&&this.TG&&t.SetProgramParameter_IsSrcTexRotated(this.MG)}JP(t){return this.SG?t._2()?this.pP()?this.YG:this.XG.T_():this.XG:null}jP(t,e,i,s,r,h,n){t.qb(this.JP(t),r,i,s,this.FG,h,n,this.VG,this.HG,this.UG,this.jG),t.zb(this.HP(e,t))}vP(t,e){var i,s,r=this.fG[0],h=t.tO(),n=r.kS();n&&(t.Qb(!1),t.eO(!0),this.WG.set(0,0,1,1),this.$G.set(0,0,1,1)),t.G2(r),t.JS(this.XS),t.lO(this.XG);let a=0,o=1;this.$G.set(0,0,1,1),o=r.WS()&&this.lG?({YP:r,qP:s,zP:i}=this.lG(this.NG),r&&this.$G._(r),a=Number.isFinite(s)?1/s:0,Number.isFinite(i)?1/i:0):([r,s]=this.ld.XO(t),a=1/r,1/s),e.xP?this.FG._(e.xP):this.FG.set(0,0,0,0),t.qb(this.JP(t),this.WG,this.$G,this.$G,this.FG,a,o,this.VG,this.HG,this.UG,this.jG),t.zb(this.HP(0,t)),t._2()&&this.TG&&t.SetProgramParameter_IsSrcTexRotated(this.MG),t.Cv(0),this.kP(t),n&&(t.eO(!1),t.Qb(h))}pP(){return this._G}oP(){return!this._G}KP(){return this.SG}ZP(){return!!this.AG&&!this.pP()}QP(){return this.IG}t4(){return this.NG}e4(){return this.DG}i4(){return this.XS}s4(){return this.JG}pb(){return this.ew}r4(){return this.BG}h4(){return this.kG}n4(){return this.OG}async a4(t,e,i){}}}{let C33=self.We;C33.J1.aG.rP=class EffectChainStep{constructor(t,e,i,s=-1){this.o4=t,this.l4=e,this.u4=i,this.H1=s}c4(){return this.o4}IP(){return this.l4}RP(){return this.u4}f4(){return this.H1}kE(){return this.c4().$P(this.f4())}wP(t,e,i){}MP(t,e,i){}}}{let C33=self.We;C33.J1.aG.rP.sP=class PreDrawStep extends C33.J1.aG.rP{constructor(t,e,i,s){super(t,e,i,s)}wP(t,e,i){var s=this.c4();t.wb(),t.O2(),t.lO(i,s.s4()),t.Jb(0,0,0,0),s.kP(t),s.FP()}MP(t,e,i){var s=this.c4();t.wb(),t.O2(),t.lO(i,!1),t.Jb(0,0,0,0),s.kP(t),s.FP()}}}{let C33=self.We,tempRect=C33.oh(C33.Rect),tempQuad=C33.oh(C33.Jl);C33.J1.aG.rP.aP=class PostDrawStep extends C33.J1.aG.rP{constructor(t,e,i,s){super(t,e,i,s)}wP(t,e,i){var s=this.c4();t.O2(),t.lO(i),s.VP(t,!0),t.JS(s.i4()),t.Ab(e.T_()),tempQuad.vu(s.r4()),tempRect._(s.h4()),tempRect.Dl(1),t.Mv(tempQuad,tempRect),s.n4()&&t.fO(e)}MP(t,e,i){var s=this.c4();t.O2(),t.lO(i,!1),s.WP(t)?tempQuad.vu(s.h4()):(t.SetNormalizedCoordsProgramVariant(!1),s.VP(t,!0),tempQuad.vu(s.r4())),t.SetBackTexture(null),t.JS(s.i4()),t.Ab(e.T_()),s.QP()?t.Fb():t.Mv(tempQuad,s.h4())}}}{let C33=self.We;C33.J1.aG.rP.nP=class FirstBounceStep extends C33.J1.aG.rP{constructor(t,e,i,s){super(t,e,i,s)}wP(t,e,i){var s=this.c4();t.lO(i,s.s4()),t.Jb(0,0,0,0),t.Ob(),t.G2(this.kE()),s.XP(t,this.f4()),s.kP(t),s.FP()}MP(t,e,i){var s=this.c4();t.lO(i,!1),t.Jb(0,0,0,0),t.Ob(),t.G2(this.kE()),s.XP(t,this.f4()),s.kP(t),s.FP()}}}{let C33=self.We,tempRect=C33.oh(C33.Rect),tempQuad=C33.oh(C33.Jl);C33.J1.aG.rP.hP=class BounceStep extends C33.J1.aG.rP{constructor(t,e,i,s){super(t,e,i,s)}wP(t,e,i){var s=this.c4(),i=(t.lO(i),0===this.RP());i?t.JS(s.i4()):(t.Jb(0,0,0,0),t.Ob()),t.G2(this.kE()),s.UP(t,this.f4()),t.Ab(e.T_()),s.VP(t,i),tempQuad.vu(s.r4()),tempRect._(s.h4()),tempRect.Dl(1),t.Mv(tempQuad,tempRect),s.n4()&&t.fO(e)}MP(t,e,i){var s=this.c4(),i=(t.lO(i,!1),0===this.RP());i?(t.JS(s.i4()),t.SetBackTexture(null),s.WP(t)?tempQuad.vu(s.h4()):(t.SetNormalizedCoordsProgramVariant(!1),s.VP(t,!0),tempQuad.vu(s.r4()))):(t.Jb(0,0,0,0),t.Ob(),tempQuad.vu(s.h4())),t.G2(this.kE()),s.UP(t,this.f4()),t.Ab(e.T_()),s.QP()?t.Fb():t.Mv(tempQuad,s.h4())}}}{let SortZOrderList2=function(t,e){var i=t[0]-e[0];return 0!=i?i:t[1]-e[1]},C33=(SortZOrderList=SortZOrderList2,self.We),C3X=self.Ze,runtime=null,keysDownByKey=new Set,tempZOrderList=[],tempInstances=[],didWarnInAlertPolyfill=!1,didWarnFpsDeprecated=!1,VALID_FRAMERATE_MODES=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.d4=class IRuntime{constructor(t){runtime=t,Object.defineProperties(this,{C4:{value:runtime.v4().m4(),writable:!1},S4:{value:runtime.T4().g4(),writable:!1},_4:{value:{},writable:!1},E4:{value:{},writable:!1},y4:{value:runtime.A4(),writable:!1},I4:{value:runtime.R4(),writable:!1},storage:{value:new self.M4(runtime),writable:!1},isInWorker:{value:runtime.w4(),writable:!1},b4:{value:runtime.O4(),writable:!1},G4:{value:runtime.P4(),writable:!1},aT:{value:runtime.L4(),writable:!1},x4:{value:runtime.N4(),writable:!1},D4:{value:new self.F4(t),writable:!1}}),runtime.B4().addEventListener("keydown",t=>{keysDownByKey.has(t.key)?t.stopPropagation():keysDownByKey.add(t.key)}),runtime.B4().addEventListener("keyup",t=>keysDownByKey.delete(t.key)),runtime.F3().addEventListener("window-blur",()=>keysDownByKey.clear()),runtime.w4()&&(self.alert=t=>(didWarnInAlertPolyfill||(didWarnInAlertPolyfill=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}W4(t){Object.defineProperties(this._4,t)}V4(t){Object.defineProperties(this.E4,t)}addEventListener(t,e){runtime.B4().addEventListener(t,e)}removeEventListener(t,e){runtime.B4().removeEventListener(t,e)}H4(t,...e){C3X.Ms(t);var i=runtime.U4(),s=i.j4(t);if(!s)throw new Error(`cannot find function name '${t}'`);if(!s.qu())return s.X4();if(e.length<s.Y4())throw new Error(`not enough function parameters passed for '${t}' (${e.length} passed, ${s.Y4()} expected)`);t=s.q4();let r=t.z4();var h=i.J4();if(h){r=r.slice(0);var n,a,o=new Set(r);for(n of h.z4())o.has(n)||(r.push(n),o.add(n));for(a of i.K4())o.has(a)||(r.push(a),o.add(a))}return t.Z4(r,s.Q4(),s.tL(),s.X4(),...e)}eL(t){var e=runtime.sL().iL();if(!e)throw new Error("not in a function which returns a value");switch(e.rL()){case 1:"number"==typeof t&&e.hL(t);break;case 2:"string"==typeof t&&e.hL(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||e.hL(t)}}signal(t){C3X.Ms(t),runtime.U4().nL(t)}aL(t){return C3X.Ms(t),runtime.U4().oL(t)}lL(){return[runtime.O4(),runtime.P4()]}get isSuspended(){return runtime.uL()}get dt(){return runtime.cL()}get fL(){return runtime.dL()}get CL(){return runtime.pL()}get mL(){return runtime.vL()}get SL(){return runtime.gL()}set SL(t){C3X.ys(t),runtime.TL(t)}get fps(){return didWarnFpsDeprecated||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),didWarnFpsDeprecated=!0),runtime._L()}get framesPerSecond(){return runtime._L()}get EL(){return runtime.yL()}get AL(){return runtime.IL()}get RL(){return runtime.ML()}get wL(){return runtime.bL()}set wL(t){if(!VALID_FRAMERATE_MODES.has(t))throw new Error("invalid framerate mode");runtime.OL(t)}get GL(){return runtime.PL()}set GL(t){C3X.ys(t),runtime.LL(t)}get xL(){return runtime.NL()}set xL(t){runtime.DL(t)}random(){return runtime.FL()}get layout(){var t=runtime.BL();if(t)return t.$L();throw new Error("no layout is running - make sure a layout is loaded before accessing")}kL(t){var e=runtime.WL();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=e.VL(t))return i.$L();throw new Error("invalid layout")}HL(){return runtime.WL().UL().map(t=>t.$L())}jL(t){var e=runtime.WL();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(!(i=e.VL(t)))throw new Error("invalid layout");e.XL()||e.YL(i)}get keyboard(){var t=runtime.qL().keyboard;if(t)return t;throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first")}get zL(){var t=runtime.qL().zL;if(t)return t;throw new Error("runtime.mouse used but Mouse object missing - add it to your project first")}get JL(){var t=runtime.qL().JL;if(t)return t;throw new Error("runtime.touch used but Touch object missing - add it to your project first")}get KL(){var t=runtime.qL().KL;if(t)return t;throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first")}get ZL(){var t=runtime.qL().ZL;if(t)return t;throw new Error("runtime.platformInfo used but Platform Info object missing - add it to your project first")}QL(t,e){C3X.Ms(t),C3X.Ms(e),runtime.tx(t,e)}ix(t){C3X.ys(t);t=runtime.hx(t);return t?t.nx():null}ox(t,s){C3X.zs(s);var e,r=runtime.lx();for(e of t){var i=runtime.ux(e),h=i.Cx();tempZOrderList.push([h.mx().f4(),h.vx()]),tempInstances.push(i)}if(0!==tempZOrderList.length){tempZOrderList.sort(SortZOrderList2),tempInstances.sort((t,e)=>s(t.nx(),e.nx()));let i=!1;for(let t=0,e=tempZOrderList.length;t<e;++t){var n=tempInstances[t],a=r.Sx(tempZOrderList[t][0]),o=tempZOrderList[t][1],l=a.gx();l[o]!==n&&((l[o]=n).Cx().Tx(a,!0),a._x(n),i=!0)}i&&runtime.Ex(),C33.Dn(tempZOrderList),C33.Dn(tempInstances)}}async yx(t,e){var i=new MessageChannel,s=i.port1,i=i.port2;return await runtime.Ax("runtime","script-create-worker",{url:t,opts:e,port2:i},[i]),s}alert(t){return runtime.Ax("runtime","alert",{message:t+(runtime.w4()?" [via Web Worker]":"")})}Ix(t){return C3X.ys(t),runtime.Rx(t)}Mx(t){runtime.wx(t)}}}{let C33=self.We,C3X=self.Ze,assetManager=null;self.bx=class IAssetManager{constructor(t){assetManager=t,Object.defineProperties(this,{Ox:{value:assetManager.Gx("audio/webm; codecs=opus"),writable:!1}})}Px(t){t=self.xx.Lx(t);if(!t)throw new Error("invalid IImageInfo");t.Nx(assetManager.Dx())}Fx(t){return assetManager.Sa(t)}Bx(t){return assetManager.ga(t)}$x(t){return assetManager.Ta(t)}kx(t){return assetManager._a(t)}Wx(t){return assetManager.Vx(t)}Hx(t){return"flat"===assetManager.Ux()&&C33.Ca(t)&&(t=t.toLowerCase()),assetManager.jx(t)}get Xx(){return assetManager.Yx()}async qx(t,e){if(this.Ox)throw new Error("decodeWebMOpus(): not supported because WebM Opus is supported by the platform");e=await assetManager.Dx().zx(e),e=new Float32Array(e),t=t.createBuffer(1,e.length,48e3);return t.getChannelData(0).set(e),t}Jx(...t){return assetManager.Kx(...t)}Zx(t){return assetManager.Qx(t)}tN(t){return assetManager.eN(t)}}}{let C33=self.We,C3X=self.Ze,collisionEngine=null;self.iN=class ICollisionEngine{constructor(t){collisionEngine=t,Object.defineProperties(this,{runtime:{value:collisionEngine.Dx(),writable:!1}})}sN(t,e){var i=collisionEngine.Dx(),t=i.ux(t),i=i.ux(e);return collisionEngine.rN(t,i)}hN(t,e){var i,s=collisionEngine.Dx(),r=s.ux(t);for(i of e){var h=s.ux(i);if(collisionEngine.rN(r,h))return i}return null}nN(t){t=collisionEngine.Dx().ux(t),t=collisionEngine.aN(t);return t?t.nx():null}oN(t,e){if(C3X.ys(t),C3X.ys(e),t=Math.floor(t),e=Math.floor(e),t<=0||e<=0)throw new Error("invalid cell size");collisionEngine.lN(t,e)}uN(){return collisionEngine.cN()}fN(t,e){let i=collisionEngine.Dx(),s;s=Array.isArray(t)?t.map(t=>i.dN(t)):[i.dN(t)];t=C33.Rect.vl(e),e=[];return collisionEngine.CN(null,s,t,e),e.map(t=>t.nx())}}}{let C33=self.We,C3X=self.Ze;self.M4=class IStorage{constructor(t){this.pN=t.mN()}getItem(t){return C3X.Ms(t),this.pN.getItem(t)}setItem(t,e){return C3X.Ms(t),this.pN.setItem(t,e)}removeItem(t){return C3X.Ms(t),this.pN.removeItem(t)}clear(){return this.pN.clear()}keys(){return this.pN.keys()}}}{let C33=self.We,C3X=self.Ze,map=new WeakMap,internalApiToken=C33.Ve();self.vN=class IPlugin{constructor(){var t=C33.gN.SN(internalApiToken);map.set(this,t),Object.defineProperties(this,{runtime:{value:t.Dx().TN(),writable:!1},_N:{value:t.EN(),writable:!1},yN:{value:t.AN(),writable:!1},IN:{value:t.RN(),writable:!1},MN:{value:t.wN(),writable:!1},bN:{value:t.ON(),writable:!1},GN:{value:t.PN(),writable:!1},LN:{value:t.xN(),writable:!1},NN:{value:t.DN(),writable:!1}})}static FN(t){return(t=t&&C33.gN.BN(t))?t.$N():null}kN(){return map.get(this).VN().WN()}HN(){return map.get(this).UN().nx()}}}{let C33=self.We,C3X=self.Ze,map=new WeakMap,internalApiToken=C33.Ve();self.jN=class IObjectClass{constructor(){var t=C33.gN.SN(internalApiToken);map.set(this,t),Object.defineProperties(this,{name:{value:t.qc(),writable:!1},runtime:{value:t.Dx().TN(),writable:!1},XN:{value:t.YN().$N(),writable:!1}}),t.Dx().qN(this,t)}addEventListener(t,e){C3X.Ms(t),C3X.zs(e),map.get(this).B4().addEventListener(t,e)}removeEventListener(t,e){C3X.Ms(t),C3X.zs(e),map.get(this).B4().removeEventListener(t,e)}zN(){return[...this.instances()]}JN(){return C33.first(this.instances())}KN(){return[...this.ZN()]}QN(){return C33.first(this.ZN())}t5(t){var e=map.get(this),t=e.Dx().e5(t),e=e.i5(t);return e?e.nx():null}*instances(){for(var t of map.get(this).s5())yield t.nx()}*ZN(){for(var t of map.get(this).h5().r5())yield t.nx()}n5(t){if(C3X.zs(t),0<map.get(this).a5())throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");map.get(this).o5(t)}Di(t,e,i,s,r){if(C3X.Ss(e),C3X.Ss(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");var h=map.get(this),n=h.Dx(),t=n.BL().mx(t);if(t)return h=n.l5(h,t,e,i,s,r),s&&t.u5(h),(e=n.U4()).c5(!0),h.f5(),e.c5(!1),e.d5()||n.WL().C5()||n.p5(),h.nx();throw new Error("invalid layer")}}}{let C33=self.We,C3X=self.Ze,map=new WeakMap,VALID_WHERE_STRINGS=["above","below","top-sublayer","bottom-sublayer"];self.m5=class ILayout{constructor(t){map.set(this,t);var e=[],i=t.v5(),s=i.S5().length;for(let t=0;t<s;++t)e.push(new self.g5(i,t));Object.defineProperties(this,{name:{value:t.qc(),writable:!1},index:{value:t.f4(),writable:!1},T5:{value:e,writable:!1}})}addEventListener(t,e){C3X.Ms(t),C3X.zs(e),map.get(this).B4().addEventListener(t,e)}removeEventListener(t,e){C3X.Ms(t),C3X.zs(e),map.get(this).B4().removeEventListener(t,e)}get width(){return map.get(this).tp()}set width(t){C3X.ys(t),map.get(this).op(t)}get height(){return map.get(this).cp()}set height(t){C3X.ys(t),map.get(this).ep(t)}_5(t,e){C3X.ys(t),C3X.ys(e);var i=map.get(this);i.op(t),i.ep(e)}getSize(){var t=map.get(this);return[t.tp(),t.cp()]}set scale(t){C3X.ys(t),map.get(this).E5(t)}get scale(){return map.get(this).y5()}set angle(t){C3X.ys(t),map.get(this).A5(t)}get angle(){return map.get(this).I5()}set scrollX(t){C3X.Ss(t),map.get(this).R5(t)}get scrollX(){return map.get(this).M5()}set scrollY(t){C3X.Ss(t),map.get(this).w5(t)}get scrollY(){return map.get(this).b5()}scrollTo(t,e){C3X.Ss(t),C3X.Ss(e);var i=map.get(this);i.R5(t),i.w5(e)}O5(){var t=map.get(this);return[t.M5(),t.b5()]}G5(t){var e=map.get(this);let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return(i=e.mx(t))?i.P5():null}L5(){return map.get(this).x5().map(t=>t.P5())}*N5(){for(var t of map.get(this).N5())yield t.P5()}D5(t,e,i){var s=map.get(this),r=self.F5,r=(C3X.Ms(t),C3X.rr(e,r),e?s.Dx().B5(e):null),e=VALID_WHERE_STRINGS.indexOf(i);if(e<0)throw new Error("invalid location");s.k5(t,r,e)}W5(t,e,i){var s=map.get(this),r=s.Dx(),h=self.F5,t=(C3X.ir(t,h),r.B5(t));if(!t)throw new Error("invalid layer");C3X.rr(e,h);h=e?r.B5(e):null,r=VALID_WHERE_STRINGS.indexOf(i);if(r<0)throw new Error("invalid location");s.V5(t,h,r)}H5(t){var e=map.get(this),i=self.F5,i=(C3X.ir(t,i),e.Dx().B5(t));if(!i)throw new Error("invalid layer");t=i.Dx();e.U5(i),t.U4().d5()||t.p5()}j5(){var t=map.get(this),e=t.Dx();t.X5(),e.U4().d5()||e.p5()}Y5(t,e){C3X.ys(t),C3X.ys(e),map.get(this).q5(t,e)}z5(){return map.get(this).J5()}set Y(t){C3X.Ms(t);var e=map.get(this);if("perspective"===t)e.K5();else{if("orthographic"!==t)throw new Error("invalid projection");e.Z5()}}get Y(){return map.get(this).Q5()?"orthographic":"perspective"}}}{let C33=self.We,C3X=self.Ze,map=new WeakMap,BLEND_MODE_TO_INDEX=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),INDEX_TO_BLEND_MODE=new Map([...BLEND_MODE_TO_INDEX.entries()].map(t=>[t[1],t[0]])),tempColor=C33.oh(C33.$a);self.F5=class ILayer{constructor(t){map.set(this,t);var e=[],i=t.v5(),s=i.S5().length;for(let t=0;t<s;++t)e.push(new self.g5(i,t));Object.defineProperties(this,{name:{value:t.qc(),writable:!1},layout:{value:t.VL().$L(),writable:!1},T5:{value:e,writable:!1}}),t.Dx().qN(this,t)}get tD(){var t=map.get(this).eD();return t?t.P5():null}*iD(){for(var t of map.get(this).iD())yield t.P5()}*sD(){for(var t of map.get(this).rD())yield t.P5()}*hD(){for(var t of map.get(this).rD())for(var e of t.nD())yield e.P5()}get index(){return map.get(this).f4()}get isVisible(){return map.get(this).aD()}set isVisible(t){map.get(this).oD(t)}get lD(){return map.get(this).uD()}get cD(){return map.get(this).fD()}set cD(t){map.get(this).dD(t)}get CD(){return map.get(this).pD()}set CD(t){map.get(this).mD(!!t)}get vD(){return map.get(this).SD()}get opacity(){return map.get(this).Sb()}set opacity(t){t=C33.ph(+t,0,1),isNaN(t)||map.get(this).Tb(t)}set scale(t){C3X.ys(t),map.get(this).gD(t)}get scale(){return map.get(this).TD()}set scaleRate(t){C3X.ys(t),map.get(this)._D(t)}get scaleRate(){return map.get(this).ED()}set angle(t){C3X.ys(t),map.get(this).A5(t)}get angle(){return map.get(this).yD()}set parallaxX(t){C3X.ys(t),map.get(this).AD(t)}get parallaxX(){return map.get(this).ID()}set parallaxY(t){C3X.ys(t),map.get(this).RD(t)}get parallaxY(){return map.get(this).MD()}set wD(t){C3X.ys(t),map.get(this).Cg(t)}get wD(){return map.get(this).dg()}set bD(t){map.get(this).OD(t)}get bD(){return map.get(this).GD()}set PD(t){map.get(this).LD(t)}get PD(){return map.get(this).xD()}set cP(t){C3X.Ms(t);t=BLEND_MODE_TO_INDEX.get(t);if("number"!=typeof t)throw new Error("invalid blend mode");map.get(this).JS(t)}get cP(){return INDEX_TO_BLEND_MODE.get(map.get(this).ND())}set backgroundColor(t){if(C3X.Vs(t),t.length<3)throw new Error("expected 3 elements");tempColor.ja(t[0],t[1],t[2]);var t=map.get(this),e=t.DD();e.lo(tempColor)||(e.Za(tempColor),t.Dx().Ex())}get backgroundColor(){var t=map.get(this).DD();return[t.Qa(),t.eo(),t.io()]}set scrollX(t){C3X.Ss(t);var e=map.get(this);e.FD(!0),e.R5(t)}get scrollX(){return map.get(this).M5()}set scrollY(t){C3X.Ss(t);var e=map.get(this);e.FD(!0),e.w5(t)}get scrollY(){return map.get(this).b5()}scrollTo(t,e){C3X.Ss(t),C3X.Ss(e);var i=map.get(this);i.FD(!0),i.R5(t),i.w5(e)}O5(){var t=map.get(this);return[t.M5(),t.b5()]}BD(){map.get(this).FD(!1)}getViewport(){return map.get(this).$D().yl()}kD(t,e,i=0){C3X.Ss(t),C3X.Ss(e),C3X.Ss(i);var s=map.get(this),r=s.Dx();return s.WD(t-r.VD(),e-r.HD(),i)}UD(t,e,i=0){C3X.Ss(t),C3X.Ss(e),C3X.Ss(i);var s=map.get(this),r=s.Dx(),[s,t]=s.jD(t,e,i);return[s+r.VD(),t+r.HD()]}XD(t,e,i=0){return C3X.Ss(t),C3X.Ss(e),C3X.Ss(i),map.get(this).YD(t,e,i)}qD(t,e,i=0){return C3X.Ss(t),C3X.Ss(e),C3X.Ss(i),map.get(this).zD(t,e,i)}get JD(){return map.get(this).KD()}}}{let GetDispatcher2=function(t){var e=dispatchers.get(t);return e||(e=C33.oh(C33.Event.F3),dispatchers.set(t,e)),e},C33=(GetDispatcher=GetDispatcher2,self.We),C3X=self.Ze,map=new WeakMap,dispatchers=new WeakMap,internalApiToken=C33.Ve();self.ZD=class IInstance{constructor(){var t=C33.gN.SN(internalApiToken),e=(map.set(this,t),{runtime:{value:t.Dx().TN(),writable:!1},QD:{value:t.tF().WN(),writable:!1},XN:{value:t.YN().$N(),writable:!1}});t.eF(e),t.iF(e),Object.defineProperties(this,e),t.Dx().qN(this,t)}static sF(){return C33.gN.rF()}hF(){var t=dispatchers.get(this);t&&(t.lh(),dispatchers.delete(this)),map.delete(this)}addEventListener(t,e,i){C3X.Ms(t),C3X.zs(e),GetDispatcher2(this).addEventListener(t,e,i)}removeEventListener(t,e,i){C3X.Ms(t),C3X.zs(e),GetDispatcher2(this).removeEventListener(t,e,i)}dispatchEvent(t){GetDispatcher2(this).dispatchEvent(t)}nF(){var t=map.get(this),e=t.Dx();e.aF(t),e.U4().d5()||e.WL().C5()||e.U4().oF()||e.p5()}lF(){var t=map.get(this).uF();return t?t.map(t=>t.nx()):[]}*cF(){var t=map.get(this);if(t.fF())for(var e of t.dF())yield e.nx()}get uid(){return map.get(this).CF()}get pF(){return map.get(this).mF()}set SL(t){C3X.ys(t),map.get(this).TL(t)}get SL(){return map.get(this).vF()}SF(){map.get(this).gF()}get dt(){var t=map.get(this);return t.Dx().cL(t)}TF(...t){C3X.Vs(t);var t=new Set(t),e=map.get(this)._F();return t.cs(e)}EF(t){C3X.ir(t,Set),map.get(this).yF(t)}AF(){return new Set(map.get(this)._F())}signal(t){C3X.Ms(t);var e=map.get(this);e.Dx().U4().IF(e,t)}aL(t){C3X.Ms(t);var e=map.get(this);return e.Dx().U4().RF(e,t)}}}{let C33=self.We,C3X=self.Ze,map=new WeakMap,internalApiToken=C33.Ve();self.MF=class ISDKInstanceBase extends self.ZD{constructor(t){super(),map.set(this,C33.gN.SN(internalApiToken)),this.wF=!1,this.bF=null,this.OF=!1,this.GF=null,this.PF=t?.domComponentId,this.LF=t?.wrapperComponentId}hF(){super.hF(),map.delete(this)}xF(){return C33.gN.NF()}DF(t){var e=map.get(this);e.Dx().FF(t,e)}BF(t){var e=map.get(this);return e.Dx().$F(t,e)}kF(t,e){if(C3X.Ms(t),C3X.zs(e),!this.PF)throw new Error("no DOM component id set");map.get(this).Dx().WF(this.PF,t,e)}VF(t){C3X.Vs(t);for(var[e,i]of t)this.kF(e,i)}HF(t,e){if(C3X.Ms(t),!this.PF)throw new Error("no DOM component id set");map.get(this).Dx().h3(this.PF,t,e)}UF(t,e){if(C3X.Ms(t),this.PF)return map.get(this).Dx().Ax(this.PF,t,e);throw new Error("no DOM component id set")}jF(t,e){if(!map.get(this).Dx().w4())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.PF,handler:t,data:e,responseId:null});this.HF(t,e)}XF(t){var e;this.wF!==(t=!!t)&&(this.wF=t,e=map.get(this).Dx(),t?(this.bF||(this.bF=()=>this.YF()),e.F3().addEventListener("tick",this.bF)):e.F3().removeEventListener("tick",this.bF))}qF(){return this.wF}YF(){}zF(t){var e;this.OF!==(t=!!t)&&(this.OF=t,e=map.get(this).Dx(),t?(this.GF||(this.GF=()=>this.JF()),e.F3().addEventListener("tick2",this.GF)):e.F3().removeEventListener("tick2",this.GF))}KF(){return this.OF}JF(){}ZF(){return[]}QF(){return null}t7(t){}e7(){if(this.LF)return map.get(this).Dx().i7(this.LF);throw new Error("no wrapper component id set")}s7(t,e){if(C3X.Ms(t),C3X.zs(e),!this.LF)throw new Error("no wrapper component id set");map.get(this).Dx().r7(this.LF,t,e)}h7(t){C3X.Vs(t);for(var[e,i]of t)this.s7(e,i)}n7(t,e){if(!this.LF)throw new Error("no wrapper component id set");this.runtime.D4.a7(this.LF,t,e)}o7(t,e){if(this.LF)return this.runtime.D4.l7(this.LF,t,e);throw new Error("no wrapper component id set")}}}{let MakeIWorldInstanceClass2=function(t){return class s extends t{constructor(t){super(t);var t=C33.gN.SN(internalApiToken),e=(map.set(this,t),[]),t=t.Cx(),i=t.u7();if(i){var s=t.tF().v5().S5().length;for(let t=0;t<s;++t)e.push(new self.g5(i,t))}Object.defineProperties(this,{T5:{value:e,writable:!1}})}get layout(){return map.get(this).Cx().VL().$L()}get c7(){return map.get(this).Cx().mx().P5()}get x(){return map.get(this).Cx().ag()}set x(t){t=+t;var e=map.get(this).Cx();isNaN(t)||e.ag()===t||(e.og(t),e.f7())}get y(){return map.get(this).Cx().ug()}set y(t){t=+t;var e=map.get(this).Cx();isNaN(t)||e.ug()===t||(e.fg(t),e.f7())}setPosition(t,e){t=+t,e=+e;var i=map.get(this).Cx();isNaN(t)||isNaN(e)||i.ag()===t&&i.ug()===e||(i.d7(t,e),i.f7())}C7(){var t=map.get(this).Cx();return[t.ag(),t.ug()]}p7(t,e){var i;t=+t,e=+e,isNaN(t)||isNaN(e)||0===t&&0===e||((i=map.get(this).Cx()).m7(t,e),i.f7())}get wD(){return map.get(this).Cx().dg()}set wD(t){t=+t;var e=map.get(this),i=e.Cx();isNaN(t)||i.dg()===t||(i.Cg(t),e.Dx().Ex())}get v7(){return map.get(this).Cx().S7()}get width(){return map.get(this).Cx().tp()}set width(t){t=+t;var e=map.get(this).Cx();isNaN(t)||e.tp()===t||(e.op(t),e.f7())}get height(){return map.get(this).Cx().cp()}set height(t){t=+t;var e=map.get(this).Cx();isNaN(t)||e.cp()===t||(e.ep(t),e.f7())}_5(t,e){t=+t,e=+e;var i=map.get(this).Cx();isNaN(t)||isNaN(e)||i.tp()===t&&i.cp()===e||(i.DR(t,e),i.f7())}getSize(){var t=map.get(this).Cx();return[t.tp(),t.cp()]}get angle(){return map.get(this).Cx().I5()}set angle(t){t=C33.mh(+t);var e=map.get(this).Cx();isNaN(t)||e.I5()===t||(e.A5(t),e.f7())}get g7(){return C33.gh(this.angle)}set g7(t){this.angle=C33.Sh(t)}Tu(){return map.get(this).Cx().T7().yl()}_7(){return map.get(this).Cx().E7().Cu()}y7(){return map.get(this).Cx().A7()}get isVisible(){return map.get(this).Cx().uD()}set isVisible(t){t=!!t;var e=map.get(this),i=e.Cx();i.uD()!==t&&(i.oD(t),e.Dx().Ex())}get opacity(){return map.get(this).Cx().Sb()}set opacity(t){t=C33.ph(+t,0,1);var e=map.get(this),i=e.Cx();isNaN(t)||i.Sb()===t||(i.Tb(t),e.Dx().Ex())}set I7(t){if(C3X.Vs(t),t.length<3)throw new Error("expected 3 elements");tempColor.ja(t[0],t[1],t[2]);var t=map.get(this),e=t.Cx();e.R7().lo(tempColor)||(e.M7(tempColor),t.Dx().Ex())}get I7(){var t=map.get(this).Cx().R7();return[t.Qa(),t.eo(),t.io()]}set cP(t){C3X.Ms(t);t=BLEND_MODE_TO_INDEX.get(t);if("number"!=typeof t)throw new Error("invalid blend mode");var e=map.get(this);e.Cx().JS(t),e.Dx().Ex()}get cP(){return INDEX_TO_BLEND_MODE.get(map.get(this).Cx().ND())}w7(){map.get(this).Cx().b7()}O7(){map.get(this).Cx().G7()}P7(t){C3X.ir(t,ILayer);var e=map.get(this),t=e.Dx().B5(t);if(!t)throw new Error("invalid layer");e.Cx().L7(t)}x7(t,e){C3X.ir(t,s),map.get(this).Cx().N7(map.get(t),e)}get zIndex(){return map.get(this).Cx().vx()}get D7(){return map.get(this).Cx().F7()}set D7(t){map.get(this).Cx().B7(!!t)}Xl(t,e){return C3X.Ss(t),C3X.Ss(e),map.get(this).Cx().k7(+t,+e)}sN(t){C3X.ir(t,s);var e=map.get(this),t=map.get(t);return e.Dx().T4().rN(e,t)}nN(){var t=map.get(this),t=t.Dx().T4().aN(t);return t?t.nx():null}getParent(){var t=map.get(this).W7();return t?t.nx():null}V7(){var t=map.get(this).H7();return t?t.nx():null}*U7(){for(var t of map.get(this).U7())yield t.nx()}j7(){return map.get(this).X7()}Y7(t){t=map.get(this).q7(t);return t?t.nx():null}*children(){for(var t of map.get(this).children())yield t.nx()}*z7(){for(var t of map.get(this).z7())yield t.nx()}J7(t,e){C3X.ir(t,s),C3X.Ns(e),e=e||{};var i=map.get(this),t=map.get(t);i.K7(t,e)}removeChild(t){C3X.ir(t,s);var e=map.get(this),t=map.get(t);e.Z7(t)}Q7(){var t=map.get(this);t.tB()&&t.W7().Z7(t)}eB(){var t=map.get(this).Cx();return{iB:t.sB(),rB:t.hB(),nB:t.aB(),oB:t.lB(),uB:t.cB(),fB:t.dB(),CB:t.pB(),mB:t.vB(),SB:t.gB()}}TB(t,e){C3X.ys(t),C3X.ys(e),map.get(this).Cx()._B(t,e)}EB(){var t=map.get(this).Cx();t.yB(),t.f7()}AB(t,e,i){C3X.ys(t),C3X.ys(e),C3X.xs(i);var s=map.get(this).Cx();s.IB(t,e,i)&&s.f7()}RB(t,e){let i=NaN,s=NaN,r=NaN,h=NaN,n=NaN;var a=map.get(this).Cx();return a.MB()&&null!==(a=a.wB().qg(t,e))&&(i=a.ag(),s=a.ug(),r=a.dg(),h=a.pg(),n=a.vg()),{x:i,y:s,wD:r,u:h,v:n}}bB(){var t=map.get(this).Cx();return t.MB()?[(t=t.wB()).Fg(),t.Bg()]:[0,0]}}},C33=(MakeIWorldInstanceClass=MakeIWorldInstanceClass2,self.We),C3X=self.Ze,IInstance=self.ZD,ILayer=self.F5,map=new WeakMap,internalApiToken=C33.Ve(),BLEND_MODE_TO_INDEX=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),INDEX_TO_BLEND_MODE=new Map([...BLEND_MODE_TO_INDEX.entries()].map(t=>[t[1],t[0]])),tempColor=C33.oh(C33.$a);self.OB=MakeIWorldInstanceClass2(self.ZD),self.GB=MakeIWorldInstanceClass2(self.MF)}{let C33=self.We,C3X=self.Ze,map=new WeakMap;self.PB=class IDOMInstance extends self.OB{constructor(){super(),map.set(this,self.ZD.sF())}LB(){return map.get(this).NB().xB()}focus(){map.get(this).NB().DB()}blur(){map.get(this).NB().BB()}$B(t,e){C3X.Ms(t),map.get(this).NB().kB(t,e)}}}{let GetDispatcher2=function(t){var e=dispatchers.get(t);return e||(e=C33.oh(C33.Event.F3),dispatchers.set(t,e)),e},C33=(GetDispatcher=GetDispatcher2,self.We),C3X=self.Ze,map=new WeakMap,dispatchers=new WeakMap,internalApiToken=C33.Ve();self.WB=class IBehaviorInstance{constructor(){var t=C33.gN.SN(internalApiToken),e=(map.set(this,t),{runtime:{value:t.Dx().TN(),writable:!1},behavior:{value:t.HB().VB(),writable:!1},UB:{value:t.XB().jB(),writable:!1}});Object.defineProperties(this,e),t.Dx().qN(this,t)}static sF(){return C33.gN.rF()}get YB(){return map.get(this).qB().nx()}hF(){var t=dispatchers.get(this);t&&(t.lh(),dispatchers.delete(this)),map.delete(this)}addEventListener(t,e,i){C3X.Ms(t),C3X.zs(e),GetDispatcher2(this).addEventListener(t,e,i)}removeEventListener(t,e,i){C3X.Ms(t),C3X.zs(e),GetDispatcher2(this).removeEventListener(t,e,i)}dispatchEvent(t){GetDispatcher2(this).dispatchEvent(t)}}}{let C33=self.We,C3X=self.Ze,internalApiToken=C33.Ve();self.zB=class IBehaviorType{constructor(){var t=C33.gN.SN(internalApiToken),t={runtime:{value:t.Dx().TN(),writable:!1},behavior:{value:t.HB().VB(),writable:!1},name:{value:t.qc(),writable:!1}};Object.defineProperties(this,t)}}}{let C33=self.We,C3X=self.Ze,map=new WeakMap,internalApiToken=C33.Ve();self.JB=class IBehavior{constructor(){var t=C33.gN.SN(internalApiToken),t=(map.set(this,t),{runtime:{value:t.Dx().TN(),writable:!1}});Object.defineProperties(this,t)}zN(){return map.get(this).r5().map(t=>t.nx())}static FN(t){return(t=t&&C33.gN.KB(t))?t.VB():null}}}{let C33=self.We,C3X=self.Ze,map=new WeakMap,tempColor=C33.oh(C33.$a);self.g5=class IEffectInstance{constructor(t,e){map.set(this,t),Object.defineProperties(this,{index:{value:e,writable:!1}})}get name(){return map.get(this).S5()[this.index].qc()}get isActive(){return map.get(this).ZB(this.index)}set isActive(t){t=!!t;var e=map.get(this);e.ZB(this.index)!==t&&(e.QB(this.index,t),e.t$(),e.Dx().Ex())}setParameter(t,e){C3X.ys(t),t=Math.floor(+t);var i=map.get(this),s=i.e$(this.index,t);if(null===s)throw new RangeError("invalid index");if(s instanceof C33.$a){if(!Array.isArray(e)||e.length<3)throw new TypeError("expected array with 3 elements");tempColor.ja(e[0],e[1],e[2]),e=tempColor}else if("number"!=typeof e)throw new TypeError("expected number");i.i$(this.index,t,e)&&i.ZB(this.index)&&i.Dx().Ex()}getParameter(t){C3X.ys(t),t=Math.floor(+t);t=map.get(this).e$(this.index,t);if(null===t)throw new RangeError("invalid index");return t instanceof C33.$a?[t.Qa(),t.eo(),t.io()]:t}}}{let C33=self.We,C3X=self.Ze,map=new WeakMap;self.s$=class IAnimation{constructor(t){map.set(this,t),Object.defineProperties(this,{name:{value:t.qc(),writable:!1}})}get speed(){return map.get(this).r$()}get h$(){return map.get(this).n$()}get repeatCount(){return map.get(this).a$()}get o$(){return map.get(this).l$()}get u$(){return map.get(this).c$()}get frameCount(){return map.get(this).f$()}d$(){return map.get(this).C$().map(t=>t.p$())}*frames(){for(var t of map.get(this).C$())yield t.p$()}}}{let C33=self.We,C3X=self.Ze,map=new WeakMap;self.xx=class IImageInfo{constructor(t){map.set(this,t)}static Lx(t){return map.get(t)}get width(){return map.get(this).tp()}get height(){return map.get(this).cp()}getSize(){var t=map.get(this);return[t.tp(),t.cp()]}m$(t){return t.v$(this)}S$(){return map.get(this).CM().yl()}}}{let C33=self.We,C3X=self.Ze,map=new WeakMap;self.g$=class IAnimationFrame extends self.xx{constructor(t){super(t.T$()),map.set(this,t),Object.defineProperties(this,{duration:{value:t._$(),writable:!1},E$:{value:t.y$(),writable:!1},A$:{value:t.I$(),writable:!1}})}R$(){var t=map.get(this);return[t.y$(),t.I$()]}M$(){return map.get(this).w$()}b$(t){return this.O$(t)[0]}G$(t){return this.O$(t)[1]}O$(t){var e=map.get(this);let i=null;if("number"==typeof t)i=e.P$(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=e.L$(t)}return i?[i.ag(),i.ug()]:this.R$()}x$(){var t=map.get(this).N$();return t?t.Du():0}D$(t){return this.F$(t)[0]}B$(t){return this.F$(t)[1]}F$(t){C3X.ys(t),t=Math.floor(t);var e=map.get(this).N$();return!e||t<0||t>=e.Du()?[0,0]:[(e=e.Nu())[2*t],e[2*t+1]]}get tag(){return map.get(this).$$()}}}{let GetTimelineState2=function(t){t=map.get(t);if(t.k$())throw new Error("timeline/tween was released and is no longer valid");return t},C33=(GetTimelineState=GetTimelineState2,self.We),C3X=self.Ze,map=new WeakMap;self.W$=class ITimelineStateBase{constructor(t){map.set(this,t),t.Dx().qN(this,t)}pause(){GetTimelineState2(this).V$()}resume(){GetTimelineState2(this).H$()}stop(){GetTimelineState2(this).lf()}TF(t){return GetTimelineState2(this).U$(t)}set time(t){C3X.ys(t),GetTimelineState2(this).j$(t)}get time(){return GetTimelineState2(this).qO()}set totalTime(t){C3X.ys(t),GetTimelineState2(this).X$(t)}get totalTime(){return GetTimelineState2(this).Y$()}set h$(t){GetTimelineState2(this).q$(!!t)}get h$(){return GetTimelineState2(this).z$()}set u$(t){GetTimelineState2(this).J$(!!t)}get u$(){return GetTimelineState2(this).K$()}set playbackRate(t){C3X.ys(t),GetTimelineState2(this).Z$(t)}get playbackRate(){return GetTimelineState2(this).Q$()}get progress(){var t=GetTimelineState2(this);return t.qO()/t.Y$()}get tags(){return GetTimelineState2(this).t6()}get finished(){return GetTimelineState2(this).e6()}get isPlaying(){return GetTimelineState2(this).IsPlaying()}get i6(){return GetTimelineState2(this).s6()}get r6(){return map.get(this).k$()}}}{let GetTimelineState2=function(t){t=map.get(t);if(t.k$())throw new Error("timeline was released and is no longer valid");return t},C33=(GetTimelineState=GetTimelineState2,self.We),C3X=self.Ze,map=new WeakMap,easeToIndexFunc=null;self.h6=class ITimelineState extends self.W${constructor(t){super(t),map.set(this,t);t={name:{value:t.qc(),writable:!1}};Object.defineProperties(this,t)}}}{let GetTweenState2=function(t){t=map.get(t);if(t.k$())throw new Error("tween was released and is no longer valid");return t},C33=(GetTweenState=GetTweenState2,self.We),C3X=self.Ze,map=new WeakMap,behInstMap=new WeakMap,easeToIndexFunc=null;self.n6=class ITweenState extends self.W${constructor(t,e,i){super(t),easeToIndexFunc=easeToIndexFunc||i.a6,map.set(this,t),e&&behInstMap.set(this,e)}stop(){var t=GetTweenState2(this);behInstMap.get(this).o6(t)}l6(t){C3X.Ms(t);t=self.uc.Oc(easeToIndexFunc(t));GetTweenState2(this).u6(t)}get YB(){var t=GetTweenState2(this).c6();return t?t.nx():null}get f6(){return GetTweenState2(this).d6()}set f6(t){GetTweenState2(this).C6(!!t)}get value(){var t=GetTweenState2(this);if("value"!==t.p6())throw new Error("not a value tween");return t.v6("value").m6()}}}{let C33=self.We,C3X=self.Ze;self.S6=class ISDKPluginBase extends self.vN{constructor(){super()}}}{let C33=self.We,C3X=self.Ze,map=new WeakMap,internalApiToken=C33.Ve();self.g6=class ISDKDOMPluginBase extends self.S6{constructor(t){if(super(),map.set(this,C33.gN.SN(internalApiToken)),!t?.domComponentId)throw new Error("no DOM component ID specified");this.PF=t.domComponentId,this.T6=0,this._6=new Map,this.E6("elem-focused",t=>t.y6()),this.E6("elem-blurred",t=>{t&&t.A6()})}I6(t){var e=this.T6++;return this._6.set(e,t),e}R6(t){this._6.delete(t)}E6(t,i){map.get(this).Dx().WF(this.PF,t,t=>{var e=this._6.get(t.elementId);i(e,t)})}M6(t){C3X.Vs(t);for(var[e,i]of t)this.M6(e,i)}}}{let C33=self.We,C3X=self.Ze,map=new WeakMap,internalApiToken=C33.Ve();self.w6=class ISDKObjectTypeBase extends self.jN{constructor(){super();var t=C33.gN.SN(internalApiToken);map.set(this,t)}b6(){}O6(){return map.get(this).T$().G6()}P6(t){}L6(t){}x6(){}N6(t){}}}{let C33=self.We,C3X=self.Ze,map=new WeakMap,internalApiToken=C33.Ve();self.D6=class ISDKWorldInstanceBase extends self.GB{constructor(t){super(t),map.set(this,C33.gN.SN(internalApiToken)),this.F6=null,this.B6=null}hF(){var t;super.hF(),this.F6&&((t=map.get(this).Dx().F3()).removeEventListener("renderercontextlost",this.F6),t.removeEventListener("renderercontextrestored",this.B6),this.F6=null,this.B6=null),map.delete(this)}k6(){var t;this.F6||(this.F6=()=>this.W6(),this.B6=()=>this.V6(),(t=map.get(this).Dx().F3()).addEventListener("renderercontextlost",this.F6),t.addEventListener("renderercontextrestored",this.B6))}W6(){}V6(){}H6(t){}}}{let C33=self.We,C3X=self.Ze,tempRect=C33.oh(C33.Rect),map=new WeakMap,internalApiToken=C33.Ve();self.U6=class ISDKDOMInstanceBase extends self.D6{constructor(t){if(!t?.domComponentId)throw new Error("no DOM component ID specified");super(t);t=C33.gN.SN(internalApiToken),map.set(this,t),this.j6=this.XN.I6(this),this.X6=!0,this.Y6=!1,this.q6=!1,this.z6=-.2,this.J6=C33.oh(C33.Rect,0,0,-1,-1),t=t.Dx().K6();this.Z6=t.Q6(),this.tk=t.ek(),this.ik=-1,this.sk=-1,this.rk=!1,this.XF(!0)}hF(){super.hF(),this.XN.R6(this.j6),this.hk("destroy"),this.j6=-1,map.delete(this)}nk(){if(map.get(this).Dx().w4())throw new Error("not valid in worker mode");return this.ak("get-element")}hk(t,e){(e=e||{}).elementId=this.j6,this.HF(t,e)}ak(t,e){return(e=e||{}).elementId=this.j6,this.jF(t,e)}lk(t,e){return(e=e||{}).elementId=this.j6,this.UF(t,e)}uk(t){t=t||{};var e=map.get(this).Cx();t.elementId=this.j6,t.isVisible=e.uD(),t.htmlIndex=e.mx().ck(),t.htmlZIndex=e.fk(),Object.assign(t,this.dk()),this.X6=!!t.isVisible,this.jF("create",t),this.Ck(!0)}pk(t){this.X6!==(t=!!t)&&(this.X6=t,this.hk("set-visible",{isVisible:t}))}YF(){this.Ck(!1)}mk(){var t=map.get(this).Dx().K6().vk();return"Android"===C33.di.Ci&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}Ck(t){var e=map.get(this);if(!e.Sk()){var i=e.Cx(),s=i.mx(),r=i.T7(),[h,n]=s.jD(r.gl(),r.Tl()),[r,a]=s.jD(r._l(),r.El()),e=e.Dx().K6(),o=e.gk(),l=e.Tk();if(i.uD()&&s.uD())if(!this.mk()&&(r<=0||a<=0||o<=h||l<=n))this.pk(!1);else{tempRect.set(h,n,r,a);o=e.Q6(),l=e.ek(),h=s.ck(),n=i.fk();if(!t&&tempRect.equals(this.J6)&&this.Z6===o&&this.tk===l&&this.ik===h&&this.sk===n)this.pk(!0);else{this.J6._(tempRect),this.Z6=o,this.tk=l,this.ik=h,this.sk=n,this.pk(!0);let t=null;this.q6&&(t=s._k()+this.z6),this.hk("update-position",{left:Math.round(this.J6.gl()),top:Math.round(this.J6.Tl()),width:Math.round(this.J6.width()),height:Math.round(this.J6.height()),htmlIndex:h,htmlZIndex:n,fontSize:t})}}else this.pk(!1)}}Ek(){this.ak("focus",{focus:!0})}yk(){this.ak("focus",{focus:!1})}y6(){this.Y6=!0}A6(){this.Y6=!1}Ak(){return this.Y6}Ik(t,e){this.postToDOMElement("set-css-style",{prop:C33.Da(t),val:e})}Rk(t,e){this.postToDOMElement("set-attribute",{name:t,val:e})}Mk(t){this.postToDOMElement("remove-attribute",{name:t})}wk(){this.rk||(this.rk=!0,Promise.resolve().then(()=>{this.rk=!1,this.hk("update-state",this.dk())}))}dk(){}bk(){return this.j6}}}{let C33=self.We,C3X=self.Ze;self.Ok=class ISDKBehaviorBase extends self.JB{constructor(){super()}}}{let C33=self.We,C3X=self.Ze;self.Gk=class ISDKBehaviorTypeBase extends globalThis.zB{constructor(){super()}b6(){}}}{let C33=self.We,C3X=self.Ze,map=new WeakMap,internalApiToken=C33.Ve();self.Pk=class ISDKBehaviorInstanceBase extends self.WB{constructor(){super(),map.set(this,C33.gN.SN(internalApiToken)),this.wF=!1,this.OF=!1,this.Lk=!1}hF(){super.hF(),this.XF(!1),this.zF(!1),this.xk(!1),map.delete(this)}xF(){return C33.gN.NF()}Nk(){}DF(t){var e=map.get(this);e.Dx().FF(t,e.qB(),e.XB())}BF(t){var e=map.get(this);return e.Dx().$F(t,e.qB(),e.XB())}XF(t){var e;this.wF!==(t=!!t)&&(this.wF=t,e=map.get(this).Dx(),t?e.Dk(this):e.Fk(this))}qF(){return this.wF}YF(){}zF(t){var e;this.OF!==(t=!!t)&&(this.OF=t,e=map.get(this).Dx(),t?e.Bk(this):e.$k(this))}KF(){return this.OF}JF(){}xk(t){var e;this.Lk!==(t=!!t)&&(this.Lk=t,e=map.get(this).Dx(),t?e.kk(this):e.Wk(this))}Vk(){return this.Lk}Hk(){}ZF(){return[]}QF(){return null}t7(t){}}}{let C33=self.We,C3X=self.Ze,runtime=null;self.F4=class ISDKUtils{constructor(t){runtime=t}Mx(t){runtime.wx(t)}a7(t,e,i){C3X.Ms(t),C3X.Ms(e),C3X.Hs(i),runtime.Uk(t,e,i)}l7(t,e,i){return C3X.Ms(t),C3X.Ms(e),C3X.Hs(i),runtime.jk(t,e,i)}Xk(t){return C3X.ws(t),new self.Yk(runtime,t)}set qk(t){runtime.zk(!!t)}get qk(){return runtime.Jk()}Kk(t){runtime.Zk(!!t)}}}{let C33=self.We,C3X=self.Ze,map=new WeakMap;self.Yk=class ILoopingConditionContext{constructor(t,e){var i=t.U4(),s=t.J4(),r=s.Qk(),h=t.sL(),n=h.t8(),h=h.e8(s),i=i.i8().e8();e&&i.s8(e),t.r8(!1),map.set(this,{runtime:t,h8:s,n8:r,a8:n,o8:h,loop:i})}l8(){var{runtime:t,h8:e,n8:i,a8:s,o8:r,loop:h}=map.get(this),t=t.U4();t.u8(i),e.c8(s,r),t.f8(i),h.d8(h.f4()+1)}get C8(){var t=map.get(this).loop;return t.p8()}release(){var t=map.get(this).runtime,e=t.sL(),i=t.U4().i8();t.r8(!0),i.m8(),e.m8(),map.delete(this)}}}{let C33=self.We,C3X=self.Ze,renderer=null,runtime=null;self.v8=class IRenderer{constructor(t,e){runtime=t,renderer=e}S8(){renderer.wb()}g8(t){renderer.Rb(t)}T8(){renderer.F2()}_8(){renderer.O2()}E8(){renderer.X2()}setColor(t){renderer.gb(t[0],t[1],t[2],t[3])}y8(t,e,i,s){renderer.gb(t,e,i,s)}A8(){renderer._b()}I8(t){renderer.Tb(t)}M8(t){renderer.mv(t)}w8(){renderer.vv()}rect(t){renderer.Gb(t.left,t.top,t.right,t.bottom)}b8(t,e,i,s){renderer.Gb(t,e,i,s)}O8(t){renderer.Jl(C33.Jl.pu(t))}G8(t,e,i,s,r,h,n,a){renderer.tS(t,e,i,s,r,h,n,a)}P8(t,e){renderer.Mv(C33.Jl.pu(t),C33.Rect.Al(e))}L8(t,e){renderer.xb(C33.Jl.pu(t),C33.Jl.pu(e))}x8(t,e,i,s,r,h,n,a,o,l,u,c,f){renderer.Nb(t,e,i,s,r,h,n,a,o,l,u,c,C33.Rect.Al(f))}N8(t,e,i,s,r,h,n,a,o,l,u,c,f){renderer.Ev(t,e,i,s,r,h,n,a,o,l,u,c,C33.Jl.pu(f))}D8(t,e,i){renderer.Db(t,e,i)}F8(t){renderer.Qv(t)}line(t,e,i,s){renderer.vp(t,e,i,s)}B8(t,e,i,s,r,h){renderer.yv(t,e,i,s,r,h)}k8(t,e,i,s){renderer.wv(t,e,i,s)}W8(t){renderer.Pv(C33.Rect.Al(t))}V8(t){renderer.Lv(C33.Jl.pu(t))}H8(t){renderer.$v(t)}U8(){renderer.kv()}j8(t){renderer.Uv(t)}X8(){renderer.qv()}Y8(t){C3X.rr(t,self.q8);t=t?runtime.B5(t):null;renderer.Ab(t)}z8(t,e){t=self.xx.Lx(t);if(t)return t.J8(renderer,{hT:e?.hT??"clamp-to-edge",nT:e?.nT??"clamp-to-edge",aT:e?.aT??"trilinear",uT:e?.uT??!0});throw new Error("invalid IImageInfo")}K8(t){t=self.xx.Lx(t);if(!t)throw new Error("invalid IImageInfo");t.rR()}v$(t){var t=self.xx.Lx(t);if(t)return t=t.T_(),self.q8.Z8(runtime,t);throw new Error("invalid IImageInfo")}Q8(t,e,i){C3X.ys(t),C3X.ys(e);t=renderer.u_(t,e,{hT:i?.hT??"clamp-to-edge",nT:i?.nT??"clamp-to-edge",aT:i?.aT??"trilinear",uT:i?.uT??!0});return self.q8.Z8(runtime,t)}t9(t,e,i){C3X.ir(e,self.q8);e=runtime.B5(e);renderer.dM(t,e,{premultiplyAlpha:i?.premultiplyAlpha??!0})}deleteTexture(t){C3X.ir(t,self.q8);t=runtime.B5(t);renderer.C_(t)}e9(){var t=renderer.pS();return new self.i9(runtime,t)}s9(){runtime.K6().r9(renderer)}h9(t){C3X.ir(t,globalThis.F5),runtime.B5(t).n9(renderer)}}}{let C33=self.We,C3X=self.Ze,map=new WeakMap,reverseMap=new WeakMap;self.q8=class ITexture{constructor(t,e){map.set(this,{runtime:t,a9:e}),reverseMap.set(e,this),t.qN(this,e),Object.defineProperties(this,{width:{value:e.tp(),writable:!1},height:{value:e.cp(),writable:!1}})}static Z8(t,e){return e?reverseMap.get(e)||new self.q8(t,e):null}}}{let getActual2=function(t){return map.get(t).o9},C33=(getActual=getActual2,self.We),C3X=self.Ze,map=new WeakMap;self.i9=class IRendererText{constructor(t,e){map.set(this,{runtime:t,o9:e}),t.qN(this,e)}release(){getActual2(this).lh()}set l9(t){C3X.Ms(t),getActual2(this).fR(t)}get l9(){return getActual2(this).CI()}set u9(t){C3X.ys(t),getActual2(this).dR(t)}get u9(){return getActual2(this).CR()}set lineHeight(t){C3X.ys(t),getActual2(this).mR(t)}get lineHeight(){return getActual2(this).vR()}set c9(t){getActual2(this).SR(t)}get c9(){return getActual2(this).gR()}set f9(t){getActual2(this).TR(t)}get f9(){return getActual2(this)._R()}setColor(t){C3X.Vs(t),this.d9(t[0],t[1],t[2])}d9(t,e,i){getActual2(this).RR(t,e,i)}C9(t){C3X.Ms(t),getActual2(this).KS(t)}set p9(t){getActual2(this).MR(t)}get p9(){return getActual2(this).wR()}set verticalAlign(t){getActual2(this).bR(t)}get verticalAlign(){return getActual2(this).OR()}set m9(t){getActual2(this).GR(t)}get m9(){return getActual2(this).PR()}set v9(t){getActual2(this).LR(t)}get v9(){return getActual2(this).xR()}set text(t){C3X.Ms(t),getActual2(this).n3(t)}get text(){return getActual2(this).NR()}_5(t,e,i){C3X.ys(t),C3X.ys(e),C3X.ys(i),getActual2(this).DR(t,e,i)}m$(){var{runtime:t,o9:e}=map.get(this),e=e.T_();return self.q8.Z8(t,e)}S$(){return getActual2(this).CM().yl()}S9(t){C3X.zs(t),getActual2(this).nR=t}g9(){getActual2(this).rR()}get T9(){return getActual2(this).BR()}get _9(){return getActual2(this).kR()}}}{let GetTypeFromFileExtension2=function(t){return t&&!((t=t.split(".")).length<2)&&(t=t.at(-1).toLowerCase(),EXT_TO_TYPE.get(t))||""},AddScript2=function(s){return new Promise((t,e)=>{var i=document.createElement("script");i.onload=t,i.onerror=e,i.async=!1,i.type="module",i.src=s,document.head.appendChild(i)})},C33=(GetTypeFromFileExtension=GetTypeFromFileExtension2,AddScript=AddScript2,self.We),VALID_LOAD_POLICIES=new Set(["local","remote"]),EXT_TO_TYPE=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);C33.E9=class AssetManager extends C33.nh{constructor(t,e){super();var i=e.exportType,t=(this.i3=t,this.y9="folders",this.A9=new Map,this.I9="cordova"===i,this.R9=!!e.isiOSCordova,this.M9=!!e.isFileProtocol,this.w9=e.swClientId,this.b9=e.supportedAudioFormats||{},this.O9=new Map,this.G9=!1,this.P9=e.scriptFolder,this.L9="",this.x9="",this.N9="",this.D9=e.fileMap||new Map,this.F9=new Map,"html5"===i||"scirra-arcade"===i||"instant-games"===i);this.B9=t?"remote":"local",this.k9=new Map,this.W9=[],this.V9=[],this.H9=!1,this.U9=0,this.j9=0,this.X9=0,this.Y9=!1,this.q9=C33.oh(C33._0,()=>this.z9(),50),this.J9=C33.oh(C33.f0,Math.max(C33.hardwareConcurrency,8)),this.K9=C33.oh(C33.f0,20),this.Z9=new self.bx(this)}lh(){for(var t of this.k9.values())t.lh();this.k9.clear(),C33.Dn(this.V9),this.i3=null}Dx(){return this.i3}Q9(t){this.y9=t}Ux(){return this.y9}tW(){return this.P9}eW(t){this.L9=t}Yx(){return this.L9}iW(t){this.x9=t}sW(){return this.x9}rW(t){this.N9=t}hW(){return this.N9}nW(){return this.M9}Ta(t,e){return e=e||this.B9,C33.Ca(t)?("flat"===this.y9&&(t=t.toLowerCase()),this.I9&&this.M9?this.aW(t):"playable-ad-single-file"===this.i3.oW()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):("local"===e?this.J9:this.K9).ac(()=>C33.Ta(t))):C33.Ta(t)}_a(t){return C33.Ca(t)?("flat"===this.y9&&(t=t.toLowerCase()),this.I9&&this.M9?this.lW(t):"playable-ad-single-file"===this.i3.oW()?C33.ya(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.B9?this.J9:this.K9).ac(()=>C33._a(t))):C33._a(t)}Sa(t){return C33.Ca(t)?("flat"===this.y9&&(t=t.toLowerCase()),this.I9&&this.M9?this.uW(t):"playable-ad-single-file"===this.i3.oW()?C33.Aa(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.B9?this.J9:this.K9).ac(()=>C33.Sa(t))):C33.Sa(t)}async ga(t){t=await this.Sa(t);return JSON.parse(t)}cW(t,e){return"flat"===this.y9&&(t=t.toLowerCase()),this.i3.Ax("runtime","cordova-fetch-local-file",{filename:t,as:e})}uW(t){return this.cW(t,"text")}async aW(t){var e=await this.cW(t,"buffer"),t=GetTypeFromFileExtension2(t);return new Blob([e],{type:t})}async fW(t){"flat"===this.y9&&(t=t.toLowerCase());var e,i=this.A9.get(t);return i||(e=await this.aW(t),i=URL.createObjectURL(e),this.A9.set(t,i)),i}lW(t){return this.cW(t,"buffer")}jx(t){"flat"===this.y9&&(t=t.toLowerCase());let e=this.L9+t;return e="Gecko"===C33.di.Ti&&"preview"===this.i3.oW()?this.dW(e):e}Vx(t){return C33.da(t)?Promise.resolve(t):this.I9&&this.M9?this.fW(t):"playable-ad-single-file"===this.i3.oW()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.y9&&(t=t.toLowerCase()),Promise.resolve(t))}pW(e){if(C33.da(e)||"preview"!==this.i3.oW()||!this.w9||!e)return e;try{var t=new URL(e,location.href);return t.searchParams.set("__c3_client_id",this.w9),t.toString()}catch(t){return console.warn("Invalid iframe URL: "+e),e}}mW(t){return this.Vx(t)}vW(t){if(t.SW&&!VALID_LOAD_POLICIES.has(t.SW))throw new Error("invalid load policy");let e=this.k9.get(t.url);return e||(e=C33.oh(C33.gW,this,{url:t.url,size:t.size||0,SW:t.SW||this.B9}),this.k9.set(e.TW(),e),this.H9)||(this.U9+=e.ec(),this.V9.push(e._W().then(()=>this.EW(e.ec())))),e}yW(t){this.k9.delete(t.TW())}async AW(){try{await Promise.all(this.V9),this.X9=1}catch(t){console.error("Error loading: ",t),this.Y9=!0,this.z9()}}IW(){this.H9=!0}RW(){return this.Y9}EW(t){this.j9+=t,this.q9.L0()}z9(){var t=C33.oh(C33.Event,"loadingprogress");this.X9=C33.ph(this.j9/this.U9,0,1),t.progress=this.X9,this.i3.F3().dispatchEvent(t)}MW(){return this.X9}wW(t){C33.kn(this.W9,t),this.W9.length&&this.V9.push(this.bW())}async bW(){var s=[],r=[];for(let[t,e,i]of this.W9)this.U9+=i,s.push(this.OW(t,e,r).then(()=>this.EW(i)));await Promise.all(s),this.i3.w4()&&0<r.length&&await this.i3.Ax("runtime","load-webfonts",{webfonts:r})}async OW(e,i,s){try{let t=await this.Vx(i);"Gecko"===C33.di.Ti&&(e=`'${e}'`),("Gecko"===C33.di.Ti&&"preview"===this.i3.oW()||"playable-ad-single-file"===this.i3.oW())&&(t=this.dW(t));var r=new FontFace(e,`url('${t}')`);(this.i3.w4()?self:document).fonts.add(r),await r.load(),this.i3.w4()&&s.push({name:e,url:t})}catch(t){console.warn(`[C3 runtime] Failed to load web font '${e}': `,t)}}Gx(t){return!!this.b9[t]}GW(s,t){this.G9=!!t;for(let[e,t,i]of s)this.O9.set(e,{fileName:e,PW:t.map(t=>({type:t[0],LW:t[1],xW:e+t[1],fileSize:t[2]})),NW:i})}DW(t){"flat"===this.y9&&(t=t.toLowerCase());var e,t=this.O9.get(t);if(!t)return null;let i=null;for(e of t.PW)if(i||"audio/webm; codecs=opus"!==e.type||(i=e),this.Gx(e.type))return e;return i}FW(t){t=this.DW(t);return t?{url:this.jx(t.xW),type:t.type}:null}BW(){if(this.G9){var t,e,i=[];for(t of this.O9.values())t.NW||(e=this.DW(t.fileName))&&i.push({$W:t.fileName,url:this.jx(e.xW),type:e.type,fileSize:e.fileSize});return i}return[]}kW(t){return"preview"===this.i3.oW()&&(t=new URL(t,location.href).toString()),this.D9.get(t)||null}dW(t){var e=this.F9.get(t);if(!e){var i=this.kW(t);if(!i)return t;e=URL.createObjectURL(i),this.F9.set(t,e)}return e}m4(){return this.Z9}async Kx(...t){var e,i=await Promise.all(t.map(t=>this.Vx(t)));this.i3.w4()?1===t.length?(e=t[0],await self.c3_import((C33.Ca(e)?"./":"")+e)):(e=t.map(t=>`import "${C33.Ca(t)?"./":""}${t}";`).join("\n"),t=URL.createObjectURL(new Blob([e],{type:"application/javascript"})),await self.c3_import(t)):await Promise.all(i.map(t=>AddScript2(t)))}async Qx(t){var e;return WebAssembly.compileStreaming?(e=await this.Vx(t),WebAssembly.compileStreaming(fetch(e))):(e=await C33._a(t),WebAssembly.compile(e))}async eN(t){t=await this.Vx(t);return this.i3.Ax("runtime","add-stylesheet",{url:t})}}}{let C33=self.We;C33.WW=class Asset extends C33.nh{constructor(t,e){super(),this.VW=t,this.i3=t.Dx(),this.HW=e.url||"",this.UW=e.size,this.jW=e.SW,this.XW=e.blob||null,this.YW=!!this.XW,this.O1=null}lh(){this.O1=null,this.VW=null,this.i3=null,this.XW=null}TW(){return this.HW}ec(){return this.UW}_W(){return"local"===this.jW||this.XW?(this.YW=!0,Promise.resolve()):(this.O1||(this.O1=this.VW.Ta(this.HW,this.jW).then(t=>(this.YW=!0,this.O1=null,this.XW=t)).catch(t=>{console.error("Error loading resource: ",t),this.O1=null})),this.O1)}qW(){return this.YW}zW(){return this.XW?Promise.resolve(this.XW):this.O1||this.VW.Ta(this.HW,this.jW)}}}{let C33=self.We,promiseThrottle=new C33.f0,allImageAssets=new Set;C33.gW=class ImageAsset extends C33.WW{constructor(t,e){super(t,e),this.JW=null,this.KW=null,this.fd=0,this.ZW=-1,this.QW=-1,allImageAssets.add(this)}lh(){if(0!==this.fd)throw new Error("released image asset which still has texture references");this.VW.yW(this),this.JW=null,allImageAssets.delete(this),super.lh()}static tV(){for(var t of allImageAssets)t.JW=null,t.KW=null,t.fd=0}J8(t,e){return e=e||{},this.fd++,this.KW?Promise.resolve(this.KW):(this.JW||(e.oT=this.i3.K6().eV(),this.JW=this.iV(t,e)),this.JW)}async iV(i,s){try{let e=await this.zW();return 0===this.fd?this.JW=null:await promiseThrottle.ac(async()=>{var t=await i.aO(e,s);return this.JW=null,0===this.fd?(i.C_(t),null):(this.KW=t,this.ZW=t.tp(),this.QW=t.cp(),this.KW)})}catch(t){throw console.error("Failed to load texture: ",t),t}}rR(){if(this.fd<=0)throw new Error("texture released too many times");this.fd--,0===this.fd&&this.KW&&(this.KW.OS().C_(this.KW),this.KW=null)}sV(){return this.fd}T_(){return this.KW}tp(){return this.ZW}cp(){return this.QW}async rV(){var t=await this.zW();return C33.Wi.ImageBitmap?createImageBitmap(t):C33.Ra(t)}}}{let SortByInstLastCachedZIndex2=function(t,e){return t.Cx().hV()-e.Cx().hV()},C33=(SortByInstLastCachedZIndex=SortByInstLastCachedZIndex2,self.We),assert=self.assert;C33.nV=class RenderCell extends C33.nh{constructor(t,e,i){super(),this.aV=t,this.zo=e,this.Jo=i,this.oV=[],this.lV=!0,this.uV=new Set,this.cV=!1}lh(){C33.Dn(this.oV),this.uV.clear(),this.aV=null}lf(){C33.Dn(this.oV),this.lV=!0,this.uV.clear(),this.cV=!1}fV(){this.lV=!1}Zu(){if(this.oV.length){if(this.oV.length>this.uV.size)return!1;this.dV()}return!0}CV(t){this.uV.has(t)?(this.uV.delete(t),0===this.uV.size&&(this.cV=!1)):(this.oV.push(t),this.lV=1===this.oV.length)}_f(t){this.uV.add(t),this.cV=!0,50<=this.uV.size&&this.dV()}dV(){this.cV&&(this.oV.length===this.uV.size?this.lf():(C33.jn(this.oV,this.uV),this.uV.clear(),this.cV=!1))}pV(){this.lV||(this.oV.sort(SortByInstLastCachedZIndex2),this.lV=!0)}mV(t){this.dV(),this.pV(),this.oV.length&&t.push(this.oV)}}}{let C33=self.We;C33.vV=class RenderGrid extends C33.nh{constructor(t,e){super(),this.SV=t,this.gV=e,this.TV=C33.oh(C33.zu)}lh(){this.TV.lh(),this.TV=null}_V(t,e,i){var s=this.TV.ni(t,e);return s||(i?(s=C33.oh(C33.nV,this,t,e),this.TV.Set(t,e,s),s):null)}EV(t){return Math.floor(t/this.SV)}yV(t){return Math.floor(t/this.gV)}AV(s,r,h){if(r)for(let i=r.gl(),t=r._l();i<=t;++i)for(let t=r.Tl(),e=r.El();t<=e;++t){var n;h&&h.Xl(i,t)||(n=this._V(i,t,!1))&&(n._f(s),n.Zu())&&this.TV.Qu(i,t)}if(h)for(let i=h.gl(),t=h._l();i<=t;++i)for(let t=h.Tl(),e=h.El();t<=e;++t)r&&r.Xl(i,t)||this._V(i,t,!0).CV(s)}IV(t,e){let i=this.EV(t.gl());for(var s=this.yV(t.Tl()),r=this.EV(t._l()),h=this.yV(t.El());i<=r;++i)for(let t=s;t<=h;++t){var n=this._V(i,t,!1);n&&n.mV(e)}}RV(t){let e=t.gl();for(var i=t.Tl(),s=t._l(),r=t.El();e<=s;++e)for(let t=i;t<=r;++t){var h=this._V(e,t,!1);h&&h.fV()}}}}{let SortByInstLastCachedZIndex2=function(t,e){return t.Cx().hV()-e.Cx().hV()},SortByInstZElevation2=function(t,e){return t.Cx().dg()-e.Cx().dg()},C33=(SortByInstLastCachedZIndex=SortByInstLastCachedZIndex2,SortByInstZElevation=SortByInstZElevation2,self.We),assert=self.assert,tmpRect=new C33.Rect,tmpQuad=new C33.Jl,renderCellArr=[],tmpDestRect=new C33.Rect,tmpSrcRect=new C33.Rect,glMatrix=self.Se,vec32=glMatrix.Re,vec42=glMatrix.Me,mat42=glMatrix.Ee,tempMat4=mat42.create(),tempVec3=vec32.create(),tempVec4=vec42.create(),camVector=vec32.create(),lookVector=vec32.create(),upVector=vec32.create(),tempVec2=C33.oh(C33.qo),tempRect=C33.oh(C33.Rect),tempInstanceList1=[],tempInstanceList2=[],tempInstancesByCameraDist=[],DEFAULT_LAYER_OPTIONS={name:"",sid:-1,MV:!1,isVisible:!0,cD:!0,CD:!1,backgroundColor:[1,1,1,1],bD:!0,wV:[1,1],opacity:1,PD:!1,bV:!1,OV:!1,GV:!1,scaleRate:1,cP:0,wD:0,PV:[],LV:[],xV:[]};C33.NV=class Layer extends C33.nh{constructor(t,e,i){super(),i=Object.assign({},DEFAULT_LAYER_OPTIONS,i),this.DV=t,this.i3=t.Dx(),this.FV=e,this.dh=i.name,this.H1=-1,this.BV=!!i.CD,this.$V=-1,this.kV=i.sid,this.WV=!!i.MV,this.VV=!!i.isVisible,this.HV=!!i.cD,this.UV=C33.oh(C33.$a),this.UV.Fo(i.backgroundColor),this.jV=!!i.bD,this.XV=i.wV[0],this.YV=i.wV[1],this.YS=C33.oh(C33.$a,1,1,1,i.opacity),this.qV=C33.oh(C33.$a),this.zV=!!i.PD,this.JV=!!i.bV,this.KV=!!i.OV,this.ZV=!!i.GV,this.QV=i.scaleRate,this.XS=i.cP,this.tH=null,this.eH=1,this.qS=i.wD,this.iH=0,this.sH=0,this.rH=0,this.hH=!1,this.QM=C33.oh(C33.Rect),this.nH=C33.oh(C33.Rect),this.aH=C33.oh(C33.Rect),this.oH=!0,this.r_=mat42.create(),this.lH=!0,this.KG=mat42.create(),this.uH=!0,this.cH=C33.oh(C33.J1.tm),this.fH=!0,this.dH=[],this.CH=i.PV,this.pH=[],this.mH=[],this.vH=new Map,this.oV=[],this.SH=!1,this.gH=!1,this.TH=!1;let s=this.i3.K6();this._H=C33.oh(C33.EH,this,i.LV),this.o4=C33.oh(C33.J1.aG,s.yH(),{JO:(t,e)=>{var e=e.t4(),i=e.sO();t.KS(e.AH()),t.cO(i),t.fO(i),s.IH(i)},ZO:t=>this.v5().RH(t)}),this.MH=!0,this.wH=!0,this.bH=null,this.OH=[],this.GH=!1,this.PH=C33.oh(C33.Rect,0,0,-1,-1),this.LH=C33.oh(C33.Rect,0,0,-1,-1),this.xH=new self.F5(this),this.NH(),this.DH()&&(this.bH=C33.oh(C33.vV,this.i3.O4(),this.i3.P4())),this.FH=i.xV.map(t=>C33.NV.BH(this.DV,this,t))}$H(){for(var t of this.CH){var e=this.i3.kH(t[1]);this.DV.WH(e),e.VH()||(e.HH(t),e.UH(this.H1)),this.pH.push(t),this.vH.set(t[2],t)}C33.kn(this.dH,this.pH),this.CH=null}static BH(t,e,i){return C33.oh(C33.NV,t,e,{name:i[0],sid:i[2],isVisible:i[3],cD:i[13],CD:i[19],backgroundColor:i[4].map(t=>t/255),bD:i[5],wV:[i[6],i[7]],opacity:i[8],PD:i[9],bV:i[17],OV:i[18],GV:i[10],scaleRate:i[11],cP:i[12],wD:i[16],PV:i[14],LV:i[15],xV:i[20]})}lh(){for(var t of this.FH)t.lh();C33.Dn(this.FH);for(var e of this.oV)this.i3.aF(e);C33.Dn(this.oV),this._H.lh(),this._H=null,this.o4.lh(),this.o4=null,this.xH=null,this.FV=null,this.DV=null,this.i3=null}jH(t){return this.vH.get(t)}XH(i){var s=this.DV.YH();let r=0;var h=this.pH;for(let e=0,t=h.length;e<t;++e){var n=h[e],a=this.i3.kH(n[1]);let t=!0;a.qH()&&!s||(n=this.i3.zH(n,this,!0),i.push(n),a.JH()&&(t=!1,this.mH.push(n.CF()))),t&&(h[r]=h[e],++r)}C33.Nn(h,r),this.i3.p5(),this._x()}KH(t,e){if(!t.YN().AN())throw new Error("instance is not of world type");var i=t.Cx();if(i.mx()!==this)throw new Error("instance added to wrong layer");this.oV.push(t),0!==i.dg()&&(this.TH=!0),e&&this.DH()&&t.Cx().f7(),this._x(t)}ZH(t){this.oV.includes(t)||(this.oV.push(t),0!==t.Cx().dg()&&(this.TH=!0),this._x(t))}QH(t,e){var i=t.Cx();if(i.mx()!==this)throw new Error("instance added to wrong layer");this.oV.unshift(t),0!==i.dg()&&(this.TH=!0),this._x(t),e&&this.DH()&&t.Cx().f7()}tU(t,e){var i=this.oV.indexOf(t);i<0||(e&&this.DH()&&t.Cx().eU(),this.oV.splice(i,1),this._x(t),this.iU())}sU(){this.TH=!0}iU(){0===this.oV.length&&(this.TH=!1)}rU(t){if(t){var e,i,s=new Set;for(e of this.oV){var r=e.Cx().hV();0<=r&&s.add(r)}let t=-1;for(i of this.oV){var h=i.Cx();if(!(0<=h.hV())){for(++t;s.has(t);)++t;h.hU(t)}}}this.oV.sort(SortByInstLastCachedZIndex2)}nU(){}aU(){for(var t of this.oV)t.tF().JH()||this.i3.aF(t);this.i3.p5(),C33.Dn(this.oV),this.TH=!1,this._x()}oU(e,t,i,s,r,h){var n,a=this.i3.U4(),o=this.i3.lU(),l=e.uU(),u=[];for(n of this.pH){var c=n[0],f=c[0];if(t.Xl(f,c[1])){f=o[n[1]];if(f!==e){if(!l)continue;if(!e.cU(f))continue}let t=r;t||(c=this.i3.lx(),t=this.VL()===c?this:(t=c.fU(this.qc()))||c.Sx(this.f4()));f=this.i3.zH(n,t,!1,void 0,void 0,!1,h),c=(t.u5(f),f.Cx());c.m7(i,s),c.f7(),a.c5(!0),f.f5(),a.c5(!1),u.push(f)}}return u}a5(){return this.oV.length}VL(){return this.DV}qc(){return this.dh}dU(t){this.H1=t}f4(){return this.H1}CU(t){this.$V=t}ck(){return this.$V}pD(){return this.BV}mD(t){this.BV!==(t=!!t)&&(this.BV=t,this.DV.pU(),this.i3.Ex())}mU(){let t=-1;var e=this.eD();return t=(e?e.rD():this.VL().vU()).indexOf(this)}SU(){return this.kV}Dx(){return this.i3}gU(){return this.WV}TU(){for(var t of this.iD())if(t.gU())return!0;return!1}_U(){return this.i3._U()}v5(){return this._H}c4(){return this.EU(),this.o4}EU(){var t,e=this.yU();(this.MH||e!==this.wH||this.o4.ZG())&&(t=this.v5().AU(),this.o4.QG(t.map(t=>t.kE()),{tG:t.map(t=>t.f4()),eG:!e,nG:!0}),this.MH=!1,this.wH=e)}t$(){this.v5().t$(),this.MH=!0}DH(){return this.ZV&&!this.KV}IU(){return this.bH}RU(){this.GH=!1}uD(){for(var t of this.MU())if(!t.aD())return!1;return!0}aD(){return this.VV}oD(t){this.VV!==(t=!!t)&&(this.VV=t,this.i3.Ex())}dD(t){this.HV=!!t}fD(){return this.HV}SD(){for(var t of this.MU())if(!t.fD())return!1;return!0}FD(t){this.hH!==(t=!!t)&&((this.hH=t)&&(t=this.VL(),this.sH=t.M5(),this.rH=t.b5()),this.wU(),this.i3.Ex())}bU(){return this.hH}R5(t){var e=this.VL(),i=e.OU(),e=e.GU();this.sH!==(t=(t=e<t?e:t)<i?i:t)&&(this.sH=t,this.bU())&&(this.wU(),this.i3.Ex())}w5(t){var e=this.VL(),i=e.PU(),e=e.LU();this.rH!==(t=(t=e<t?e:t)<i?i:t)&&(this.rH=t,this.bU())&&(this.wU(),this.i3.Ex())}M5(){return this.bU()?this.sH:this.VL().M5()}b5(){return this.bU()?this.rH:this.VL().b5()}$D(){return this.xU(),this.QM}NU(){return this.xU(),this.nH}DU(){return this.xU(),this.aH}J5(){var t=this.VL();return[t.FU(),t.BU()]}n2(t){return this.i3.n2(t)}$U(r,t){var e=this.NU();if(0===r)t._(e);else{let i=e.Ml(),s=e.wl();var h=this.kU(r),n=e.width()/h,e=e.height()/h,[h,a]=this.J5();if(.5!==h||.5!==a){var o=this.WU(),l=this.i3,u=this.n2()/o;let t=(h-.5)*l.VU()/u,e=(a-.5)*l.HU()/u;h=this.I5(),a=(0!==h&&(tempVec2.set(t,e),tempVec2.rotate(h),t=tempVec2.Qo(),e=tempVec2.el()),C33.Oh(o,0,r));i+=C33.Dt(t,0,a),s+=C33.Dt(e,0,a)}t.set(i-n/2,s-e/2,i+n/2,s+e/2)}}Sb(){return this.YS.ro()}Tb(t){t=C33.ph(t,0,1),this.YS.ro()!==t&&(this.YS.Ka(t),this.NH(),this.i3.Ex())}NH(){this.qV._(this.YS),this.qV.po()}AH(){return this.qV}yU(){return this.YS.co(1,1,1,1)}ED(){return this.QV}_D(t){this.QV!==t&&(this.QV=t,this.wU(),this.i3.Ex())}ID(){return this.XV}MD(){return this.YV}UU(t,e){this.XV===t&&this.YV===e||(this.XV=t,this.YV=e,this.wU(),this.i3.Ex())}AD(t){this.UU(t,this.MD())}RD(t){this.UU(this.ID(),t)}Cg(t){this.qS!==t&&(this.qS=t,this.i3.Ex())}dg(){return this.qS}A5(t){t=C33.mh(t),this.iH!==t&&(this.iH=t,this.wU(),this.i3.Ex())}I5(){return C33.mh(this.DV.I5()+this.iH)}yD(){return this.iH}jU(){return 0<this.oV.length}gx(){return this.oV}XU(){return this.YU()&&this.KV?(C33.kn(tempInstancesByCameraDist,this.gx()),tempInstancesByCameraDist.sort((t,e)=>this.qU(t,e)),tempInstancesByCameraDist):this.gx()}zU(t){C33.Jr(t,this.XU());for(var e of this.FH)e.uD()&&0<e.Sb()&&e.zU(t)}qU(t,e){var i=this.VL().JU(),s=i[0],r=i[1],i=i[2],t=t.Cx(),e=e.Cx(),h=t.ag()-s,n=t.ug()-r,t=t.dg()-i,s=e.ag()-s,r=e.ug()-r,e=e.dg()-i;return s*s+r*r+e*e-(h*h+n*n+t*t)}DD(){return this.UV}GD(){return this.jV}OD(t){this.jV!==(t=!!t)&&(this.jV=t,this.i3.Ex())}xD(){return this.zV}LD(t){this.zV!==(t=!!t)&&(this.zV=t,this.i3.Ex())}KU(){return!this.Dx().ZU()||!this.JV}YU(){return!this.KU()}QU(){return this.YU()&&this.VL().tj()}ej(){if(!this.QU())return!1;for(var t of this.FH)if(!t.ej())return!1;return!0}JS(t){this.XS!==t&&(this.XS=t,this.i3.Ex())}ND(){return this.XS}ij(){return!this.FV}eD(){return this.FV}sj(t){this.FV=t}rD(){return this.FH}rj(){return 0<this.FH.length}hj(t,e=!0){e?this.FH.push(t):this.FH.unshift(t)}nj(t,e,i){let s=this.FH.indexOf(e);if(-1===s)throw new Error("cannot find layer to insert by");i&&++s,this.FH.splice(s,0,t)}aj(t){t=this.FH.indexOf(t);if(-1===t)throw new Error("cannot find layer to remove");this.FH.splice(t,1)}oj(){for(var t of this.FH)if(t.lj())return!0;return!1}*nD(){for(var t of this.FH)yield*t.nD();yield this}*iD(){let t=this.eD();for(;t;)yield t,t=t.eD()}*MU(){yield this,yield*this.iD()}uj(t){for(var e of this.iD())if(e===t)return!0;return!1}cj(t){return this===t||this.XV===t.XV&&this.YV===t.YV&&this.eH===t.eH&&this.QV===t.QV&&this.iH===t.iH&&this.M5()===t.M5()&&this.b5()===t.b5()}fj(){return{parallaxX:this.ID(),parallaxY:this.MD(),scale:this.TD(),scaleRate:this.ED(),angle:this.yD(),hasOwnScroll:this.bU(),scrollX:this.M5(),scrollY:this.b5()}}dj(t){this.UU(t.parallaxX,t.parallaxY),this.gD(t.scale),this._D(t.scaleRate),this.A5(t.angle),this.FD(t.hasOwnScroll),this.R5(t.scrollX),this.w5(t.scrollY),this.xU()}Cj(t){0!==t.size&&0<C33.jn(this.oV,t)&&(this.iU(),this._x())}_x(t){this.SH=!1,this.GH=!1,t&&!t.tF().YN().RN()||(this.gH=!1)}pj(){if(!this.SH){if(this.oV.sort(SortByInstZElevation2),this.DH())for(let t=0,e=this.oV.length;t<e;++t){var i=this.oV[t].Cx();i.hU(t),this.bH.RV(i.mj())}else for(let t=0,e=this.oV.length;t<e;++t)this.oV[t].Cx().hU(t);this.SH=!0}}vj(){if(!this.gH){var e;let t=0;for(e of this.DV.Sj(this.ck()).map(t=>[...t.nD()]).flat()){for(var i of e.gx())i.tF().YN().RN()&&i.Cx().gj(t++);e.Tj()}}}Tj(){this.gH=!0}_j(t,e,i){var s=t.Cx(),e=e.Cx();if(s.mx()!==this||e.mx()!==this)throw new Error("can't arrange Z order unless both objects on this layer");s=s.vx();let r=e.vx();return s!==r+(i?1:-1)&&(C33.Wn(this.oV,s),s<r&&r--,i&&r++,r===this.oV.length?this.oV.push(t):this.oV.splice(r,0,t),this._x(t),!0)}Ej(t,e){var i=[];let s=0,r=0,h=t.length,n=e.length;for(;s<h&&r<n;){var a=t[s],o=e[r];a.Cx().hV()<o.Cx().hV()?(i.push(a),++s):(i.push(o),++r)}for(;s<h;++s)i.push(t[s]);for(;r<n;++r)i.push(e[r]);return i}yj(e){var i=[],s=e.length;for(let t=0;t<s-1;t+=2){var r=e[t],h=e[t+1];i.push(this.Ej(r,h))}return s%2==1&&i.push(e[s-1]),i}Aj(t){for(;1<t.length;)t=this.yj(t);return t[0]}Ij(){return this.pj(),C33.Dn(renderCellArr),this.bH.IV(this.$D(),renderCellArr),renderCellArr.length?1===renderCellArr.length?renderCellArr[0]:this.Aj(renderCellArr):[]}lj(){return this.uD()&&0<this.Sb()&&this.Rj()}Rj(){if(this.jU()||!this.GD())return!0;for(var t of this.FH)if(t.Rj())return!0;return!1}Mj(){return this.xD()||!this.yU()||0!==this.ND()||this._H.wj()}bj(){if(this.Mj())return!0;for(var t of this.FH)if(t.bj())return!0;return!1}sO(){return this.tH}kU(t){var e;return this.DV.Q5()?1:(e=this.Oj())/(e-t)}Gj(t){var e,i=this.i3.KD();return this.DV.Q5()?i:(e=this.Oj(),this.n2()/Math.abs(e-t)*i)}wU(){this.uH=!0,this.fH=!0,this.oH=!0}Pj(t){return this.uH&&(this.Lj(t,this.KG,0,0,null),this.uH=!1),this.KG}WU(t){return this.n2(t)/this.xj()}Oj(){return this.QU()?this.VL().JU()[2]:this.WU()}Nj(){var t;return this.QU()?[(t=this.VL().JU())[0],t[1],t[2]]:this.Dj()}Dj(i=0,s=0,r=0){var h=this.i3,n=this.VL(),a=h.Fj(),o=h.Bj();let t=(this.M5()-a)*this.XV+a,e=(this.b5()-o)*this.YV+o,l=(h.N4()&&(t=Math.round(t),e=Math.round(e)),t+i),u=e+s;var a=n.Q5()?this.n2(r):this.WU(r),[o,i]=this.J5();if(.5!==o||.5!==i){s=this.n2(r)/a;let t=(o-.5)*h.VU()/s,e=(i-.5)*h.HU()/s;n=this.I5();0!==n&&(tempVec2.set(t,e),tempVec2.rotate(n),t=tempVec2.Qo(),e=tempVec2.el()),l+=t,u+=e}return[l,u,a]}Lj(t,e,i,s,r){var h,n,a,o,l=this.i3,u=this.VL();this.QU()?(vec32._(camVector,u.JU()),vec32._(lookVector,u.$j()),vec32._(upVector,u.kj()),u=l.Fj(),n=l.Bj(),a=lookVector[0]-camVector[0],o=lookVector[1]-camVector[1],h=lookVector[2]-camVector[2],camVector[0]=(camVector[0]-u)*this.XV+u,camVector[1]=(camVector[1]-n)*this.YV+n,camVector[2]*=Math.max(this.XV,this.YV),lookVector[0]=camVector[0]+a,lookVector[1]=camVector[1]+o,lookVector[2]=camVector[2]+h):([u,n,a]=this.Dj(i,s,r),vec32.set(camVector,u,n,a),vec32.set(lookVector,u,n,a-100),0===(o=this.I5())?vec32.set(upVector,0,1,0):vec32.set(upVector,Math.sin(o),Math.cos(o),0)),t.A2(e,camVector,lookVector,upVector,r||l.HU())}Wj(){this.lH=!0,this.fH=!0,this.oH=!0}Vj(t){return this.lH&&(this.Hj(t),this.lH=!1),this.r_}Hj(t){var e,i=this.i3.K6(),[s,r]=this.J5();this.DV.Q5()?t.E2(this.r_,i.Uj(),i.jj()):.5===s&&.5===r?mat42._(this.r_,i.Xj()):(e=i.Uj(),i=i.jj(),t.T2(this.r_,e/i,s,r))}n9(t,e=!0,i=0,s=0,r=0){e&&t.hb(this.Vj(t));let h=null;h=0===i&&0===s&&0===r?this.Pj(t):(this.Lj(t,tempMat4,i,s,r),tempMat4),t.fb(h)}Yj(t){this.n9(t),t.Cv(this.dg())}qj(t){let e=null;var i;return t.uS()&&this.i3.zj()&&(i=this.i3.K6().Jj(this))&&(e=i.kM(),t.SO(e)),e}Kj(t){var e;t._2()&&this.i3.zj()&&(e=2*(this.f4()+1),t.StartMeasuringRenderPassTime(e,1+e))}Jg(t,e,i){var s=this.i3.K6(),r=this.Mj();let h=null;var n,a=this.qj(t);this.Kj(t),r?(n={aT:this.i3.L4(),XT:!0,Zj:!!t._2()&&this.i3.Qj()},"low"===s.tX()&&(n.width=s.Uj(),n.height=s.jj()),h=this.i3.eX(n),this.tH=h,t.lO(h),this.GD()&&t.Jb(0,0,0,0)):(this.tH=e,t.lO(e)),this.GD()||t.Ku(this.UV),this.DV.iX(t,this.tH,this.FH,r&&this.GD()),this.Kj(t),this.n9(t),t.Cv(this.dg()),t.Qb(this.YU()),this.xj()>Number.EPSILON&&(this.pj(),s=this.DH()&&0===this.dg()&&!this.TH,this.QU()?this.sX(t):s?this.rX(t):this.hX(t,this.XU())),t.Cv(0),t.mv(0),r&&(t.Qb(!1),this.nX(t,h,e,i)),a&&t.TO(a),this.tH=null}hX(i,s){var r=this.$D(),h=this.tH,n=this.VL().Q5(),a=this.VL().aX();let o=null;for(let t=0,e=s.length;t<e;++t){var l,u=s[t];u!==o&&((l=(o=u).Cx()).uD()&&l.lX(r,a,n))&&this.uX(u,l,i,h)}}sX(s){var r=this.tH,h=this.cX(),n=tempInstanceList1,a=tempInstanceList2,o=this.XU();for(let e=0,i=o.length;e<i;){var l=o[e],u=l.Cx();if(u.uD()&&u.fX(h)){(!l.dX()||0<u.CX())&&a.push(l);var c=l.Cx().S7();n.push(l);let t=e+1;for(;t<i;++t){var f=o[t],d=f.Cx();if(d.uD()&&d.fX(h)){if(d.S7()!==c)break;(f.dX()?(0<d.CX()&&a.push(f),n):a).push(f)}}if(1!==n.length||n[0].pX()){this.mX(s,n);for(let t=0,e=a.length;t<e;++t){var C=a[t],p=C.Cx();p.vX(!0),this.uX(C,p,s,r),p.vX(!1)}}else{this.uX(l,u,s,r);for(let t=0,e=a.length;t<e;++t){var m,v=a[t];v!==l&&(m=v.Cx()).mx().uX(v,m,s,r)}}e=t,C33.Dn(n),C33.Dn(a)}else++e}}mX(i,s){var r=this.tH;i.CO();for(let t=0,e=s.length;t<e;++t){var h=s[t],n=h.Cx();n.SX(!0),this.gX(h,n,i)}i.pO();for(let t=0,e=s.length;t<e;++t){var a=s[t],o=a.Cx();this.uX(a,o,i,r),o.SX(!1)}i.vO()}rX(t){var e=this.bH,i=this.LH,s=this.PH,r=this.$D();let h;i.set(e.EV(r.gl()),e.yV(r.Tl()),e.EV(r._l()),e.yV(r.El())),this.GH&&i.equals(s)?h=this.OH:(h=this.Ij(),this.GH=!0,s._(i)),this.hX(t,h),h!==this.OH&&C33.kn(this.OH,h)}uX(t,e,i,s){e.wj()?this.TX(t,e,i,s):this.gX(t,e,i)}gX(t,e,i){e=e._X();i.q2()!==e&&e.zS(),t.Jg(i)}TX(t,e,i,s){this.EX(t,e,i,s,null)&&this.n9(i)}EX(t,e,i,s,r){var h=e.u7().c4();return h.lP(i,s,{uP:t,cP:e.ND(),devicePixelRatio:this.i3.yX(),time:t.AX(),fP:this.i3.IX()*this.xj(),dP:this.I5(),xP:e.T7(),NP:h.ZP()?null:this.RX(e),SP:r&&r.SP,gP:r&&r.gP,TP:r&&r.TP,_P:r&&r._P}),i.Cv(this.dg()),h.pb()}nX(t,e,i,s){var r=this._H.AU(),h=this.i3;0===r.length?(t.lO(i),t.O2(),s&&0===this.XS&&this.yU()?t.uO(e):(t.JS(this.XS),t.KS(this.qV),t.cO(e)),t.fO(e),h.IH(e)):this.c4().lP(t,i,{uP:this,cP:this.ND(),devicePixelRatio:h.yX(),fP:h.IX()*this.xj(),dP:this.I5(),xP:this.$D(),NP:null,QO:!0})}TD(){return this.eH}gD(t){this.eH!==t&&(this.eH=t,this.DV.MX(),this.wU(),this.i3.Ex())}KD(){return this.xj()*this.i3.KD()}_k(){return this.xj()*this.i3._k()}xj(){return(this.eH*this.DV.y5()-1)*this.QV+1}xU(){if(this.oH){this.oH=!1;var i=this.i3.Fj(),s=this.i3.Bj(),i=(this.M5()-i)*this.XV+i,s=(this.b5()-s)*this.YV+s,r=this.xj(),h=this.i3.VU()/r,r=this.i3.HU()/r;let t=i-h/2,e=s-r/2;this.i3.N4()&&(t=Math.round(t),e=Math.round(e));i=this.nH,s=(i.set(t,e,t+h,e+r),this.I5()),h=(0!==s&&(tmpRect._(i),tmpRect.offset(-i.Ml(),-i.wl()),tmpQuad.Su(tmpRect,s),tmpQuad.Tu(tmpRect),tmpRect.offset(i.Ml(),i.wl()),i._(tmpRect)),this.qS);this.$U(h,this.QM),this.QU()?this.wX(h,this.aH):this.aH._(this.QM)}}wX(t,e){var i=this.i3.K6(),s=i.gk(),i=i.Tk(),[r,h]=this.WD(0,0,t),[n,a]=this.WD(s,0,t),[s,o]=this.WD(s,i,t),[i,t]=this.WD(0,i,t);let l=Math.min(r,n,s,i),u=Math.min(h,a,o,t),c=Math.max(r,n,s,i),f=Math.max(h,a,o,t);isFinite(l)||(l=-1/0),isFinite(u)||(u=-1/0),isFinite(c)||(c=1/0),isFinite(f)||(f=1/0),e.set(l,u,c,f)}WD(t,e,i=0){return this.bX(t,e,i,this._k())}YD(t,e,i=0){return this.bX(t,e,i,this.KD()*this._U())}bX(t,e,i,s){var r=this.i3,h=r.OS(),n=this.xj(),a=r.VU()/n,r=r.HU()/n,n=tempVec4,a=(vec42.set(n,0,0,a,r),t/=s,e=n[3]-e/s,this.Vj(h)),r=this.Pj(h),s=tempVec3;return C33.J1.Q1(t,e,i,r,a,n,s)?[s[0],s[1]]:[NaN,NaN]}OX(t,e){var i=this.eH,s=this.QV,r=this.XV,h=this.YV,n=this.iH,t=(this.eH=1,this.QV=1,this.XV=1,this.YV=1,this.iH=0,this.wU(),this.WD(t,e));return this.eH=i,this.QV=s,this.XV=r,this.YV=h,this.iH=n,this.wU(),t}jD(t,e,i=0){return this.GX(t,e,i,this._k())}zD(t,e,i=0){return this.GX(t,e,i,this.KD()*this._U())}GX(t,e,i,s){var r=this.i3,h=r.OS(),n=this.xj(),a=r.VU()/n,r=r.HU()/n,n=tempVec4,a=(vec42.set(n,0,0,a,r),this.Vj(h)),r=this.Pj(h),h=tempVec3;return C33.J1.K1(t,e,i,r,a,n,h)?[h[0]*s,(n[3]-h[1])*s]:[NaN,NaN]}PX(t,e){return t*=this.KD()*this._U(),0!==e&&(t*=this.kU(e)),t}RX(t){var e,i,s,r,h,n,a=t.T7(),o=t.S7(),t=t.CX(),l=o+t,u=a.gl(),c=a.Tl(),f=a._l(),a=a.El();if(this.QU()){if(this.LX(u,c,o)||this.LX(f,c,o)||this.LX(f,a,o)||this.LX(u,a,o))return null;if(0<t&&(this.LX(u,c,l)||this.LX(f,c,l)||this.LX(f,a,l)||this.LX(u,a,l)))return null}else if(l>=this.WU())return null;let[d,C]=this.zD(u,c,o),[p,m]=this.zD(f,a,o);return(0!==this.I5()||0<t||this.QU())&&([e,i]=this.zD(f,c,o),[o,s]=this.zD(u,a,o),C=0<t?([t,r]=this.zD(u,c,l),[c,h]=this.zD(f,c,l),[f,n]=this.zD(f,a,l),[u,a]=this.zD(u,a,l),l=Math.min(d,p,e,o,t,c,f,u),p=Math.max(d,p,e,o,t,c,f,u),d=l,l=Math.min(C,m,i,s,r,h,n,a),m=Math.max(C,m,i,s,r,h,n,a),l):(t=Math.min(d,p,e,o),p=Math.max(d,p,e,o),d=t,t=Math.min(C,m,i,s),m=Math.max(C,m,i,s),t)),tmpRect.set(d,C,p,m),tmpRect}cX(){return this.fH&&(this.xX(),this.fH=!1),this.cH}xX(){var t=this.i3.OS(),e=this.Vj(t),t=this.Pj(t);this.cH.lm(t,e)}LX(t,e,i){return this.cX().fm(t,e,i)}NX(){return{d:this.gU(),s:this.TD(),a:this.yD(),v:this.aD(),i:this.fD(),html:this.pD(),bc:this.UV.toJSON(),t:this.GD(),sx:this.sH,sy:this.rH,hosp:this.hH,px:this.ID(),py:this.MD(),c:this.YS.toJSON(),sr:this.ED(),fx:this._H._g(),cg:this.mH}}DX(t){this.WV=!!t.d,this.eH=t.s,this.iH=t.a,this.VV=!!t.v,this.HV=!t.hasOwnProperty("i")||t.i,this.BV=!!t.html,this.UV.Fo(t.bc),this.jV=!!t.t,t.hasOwnProperty("sx")&&(this.sH=t.sx),t.hasOwnProperty("sy")&&(this.rH=t.sy),t.hasOwnProperty("hosp")&&(this.hH=!!t.hosp),this.XV=t.px,this.YV=t.py,this.YS.Fo(t.c),this.NH(),this.QV=t.sr,C33.kn(this.mH,t.cg),C33.kn(this.pH,this.dH);var i=new Set(this.mH);let s=0;for(let t=0,e=this.pH.length;t<e;++t)i.has(this.pH[t][2])||(this.pH[s]=this.pH[t],++s);C33.Nn(this.pH,s),this._H.Eg(t.fx),this.MH=!0}FX(){this.rU(!1),this._x(),this.wU(),this.Wj()}P5(){return this.xH}u5(t,e=!1){if(this.oV.includes(t))e&&this.oV.sort((t,e)=>t.Cx().BX()-e.Cx().BX());else if(t.$X()){var i,s,r,h=[...t.z7()];h.push(t),h.sort((t,e)=>t.Cx().BX()-e.Cx().BX());for(i of h)if(i.fF())for(var n of i.dF())h.includes(n)||((s=[...n.z7()]).push(n),s.sort((t,e)=>t.Cx().BX()-e.Cx().BX()),s&&s.length&&h.splice(h.length,0,...s));for(r of h)r.YN().AN()&&this.KH(r,!0)}else if(t.YN().AN()&&this.KH(t,!0),t.fF())for(var a of t.dF()){var o=[...a.z7()];if(o.push(a),o.sort((t,e)=>t.Cx().BX()-e.Cx().BX()),o&&o.length)for(var l of o)l.YN().AN()&&this.KH(l,!0)}}}}{let vec3EqualsXYZ2=function(t,e,i,s){return t[0]===Math.fround(e)&&t[1]===Math.fround(i)&&t[2]===Math.fround(s)},MaybePrepareLayerDraw2=function(t,e){lastLayerPreparedForDrawing!==t&&(t.Yj(e),lastLayerPreparedForDrawing=t)},C33=(vec3EqualsXYZ=vec3EqualsXYZ2,MaybePrepareLayerDraw=MaybePrepareLayerDraw2,self.We),C3Debugger=self.C3Debugger,assert=self.assert,tempDestRect=C33.oh(C33.Rect),tempSrcRect=C33.oh(C33.Rect),tempLayoutRect=C33.oh(C33.Rect),tempColor=C33.oh(C33.$a),glMatrix=self.Se,vec32=glMatrix.Re,tempRender3dList=[],tempInstanceList1=[],tempInstanceList2=[],tempInstanceList3=[],lastLayerPreparedForDrawing=null;C33.kX=class Layout extends C33.nh{constructor(t,e,i){super(),this.WX=t,this.i3=t.Dx(),this.dh=i[0],this.VX=i[1],this.HX=i[2],this.Bp=i[1],this.$p=i[2],this.UX=!!i[3],this.jX=!!i[4],this.XX=i[5],this.YX=i[6],this.qX=i[7],this.zX=null,this.kV=i[8],this.H1=e,this.sH=0,this.rH=0,this.eH=1,this.iH=0,this.JX=new Set,this.KX=new Set,this.ZX=new Set,this.QX=[],this.tY=[],this.eY=new Map,this.iY=new Map,this.sY=[],this.rY=!1,this.hY=vec32.create(),this.nY=vec32.create(),this.aY=vec32.create(),this.lY=[],this.uY=[],this.cY=new Map,this.fY=new Map,this.dY=-1;let s=this.i3.K6();this._H=C33.oh(C33.EH,this,i[11]),this.o4=C33.oh(C33.J1.aG,s.yH(),{JO:(t,e)=>{e=e.t4().sO();t._b(),t.cO(e),t.fO(e),s.IH(e)},ZO:t=>this.v5().RH(t)}),this.MH=!0,this.CY=!1,this.tH=null,this.pY={},this.mY=new Map,this.vY=!0,this.SY=new self.m5(this),this.gY=C33.oh(C33.Event.F3);for(var r of i[9])this.lY.push(C33.NV.BH(this,null,r));this.TY();for(var h of this.N5())h.$H();for(var n of i[10]){var a=this.i3.kH(n[1]);if(!a)throw new Error("missing nonworld object class");a.VH()||a.HH(n),this.sY.push(n),this.WH(a)}}lh(){for(var t of this.uY)t.lh();C33.Dn(this.uY),this.ZX.clear(),this.zX=null,this.WX=null,this.i3=null}Dx(){return this.i3}qc(){return this.dh}SU(){return this.kV}f4(){return this.H1}v5(){return this._H}c4(){return this.EU(),this.o4}EU(){var t,e="low"===this.i3.K6().tX();(this.MH||this.CY!==e||this.o4.ZG())&&(t=this.v5().AU(),this.o4.QG(t.map(t=>t.kE()),{tG:t.map(t=>t.f4()),iG:e,nG:!0}),this.MH=!1,this.CY=e)}t$(){this.v5().t$(),this.MH=!0}_Y(){let i=this.uY[0].xj();for(let t=1,e=this.uY.length;t<e;++t){var s=this.uY[t];0===s.ID()&&0===s.MD()||(i=Math.min(i,s.xj()))}return i}EY(){return.5*this.i3.VU()/this._Y()}yY(){return.5*this.i3.HU()/this._Y()}OU(){return this.AY()?-1/0:this.EY()}GU(){return this.AY()?1/0:this.tp()-this.EY()}PU(){return this.AY()?-1/0:this.yY()}LU(){return this.AY()?1/0:this.cp()-this.yY()}R5(t){var e=this.OU(),i=this.GU();this.sH!==(t=(t=i<t?i:t)<e?e:t)&&(this.sH=t,this.IY(),this.i3.Ex())}M5(){return this.sH}w5(t){var e=this.PU(),i=this.LU();this.rH!==(t=(t=i<t?i:t)<e?e:t)&&(this.rH=t,this.IY(),this.i3.Ex())}b5(){return this.rH}AY(){return this.UX}MX(){this.R5(this.M5()),this.w5(this.b5());for(var t of this.uY)t.bU()&&(t.R5(t.M5()),t.w5(t.b5()))}q5(t,e){this.XX===t&&this.YX===e||(this.XX=t,this.YX=e,this.RY()&&(this.MY(),this.IY(),this.i3.Ex()))}FU(){return this.Q5()?.5:this.XX}BU(){return this.Q5()?.5:this.YX}aX(){var t=this.FU(),e=this.BU();return t<0||1<t||e<0||1<e}K5(){this.jX&&(this.jX=!1,this.MY(),this.IY(),this.i3.Ex())}Z5(){this.jX||(this.jX=!0,this.MY(),this.IY(),this.i3.Ex())}Q5(){return this.jX}RY(){return!this.Q5()}wY(t){this.rY!==(t=!!t)&&(this.rY=t,this.IY(),this.i3.Ex())}tj(){return this.rY}bY(t,e,i,s,r,h,n,a,o){vec3EqualsXYZ2(this.hY,t,e,i)&&vec3EqualsXYZ2(this.nY,s,r,h)&&vec3EqualsXYZ2(this.aY,n,a,o)||(vec32.set(this.hY,t,e,i),vec32.set(this.nY,s,r,h),vec32.set(this.aY,n,a,o),this.OY())}OY(){this.IY(),this.i3.Ex()}JU(){return this.hY}$j(){return this.nY}kj(){return this.aY}y5(){return this.eH}E5(t){this.eH!==t&&(this.eH=t,this.IY(),this.MX(),this.i3.Ex())}A5(t){t=C33.mh(t),this.iH!==t&&(this.iH=t,this.IY(),this.i3.Ex())}I5(){return this.iH}tp(){return this.Bp}op(t){!isFinite(t)||t<1||(this.Bp=t)}cp(){return this.$p}ep(t){!isFinite(t)||t<1||(this.$p=t)}GY(){return this.zX}vU(){return this.lY}*N5(){for(var t of this.lY)yield*t.nD()}x5(){return this.uY}PY(){return this.uY.length}mx(t){return"number"==typeof t?this.Sx(t):this.fU(t.toString())}Sx(t){return t=C33.ph(Math.floor(t),0,this.uY.length-1),this.uY[t]}fU(t){return this.cY.get(t.toLowerCase())||null}LY(t){return!!this.fU(t)}xY(t){return this.fY.get(t)||null}MY(){for(var t of this.uY)t.Wj()}IY(){for(var t of this.uY)t.wU()}k5(t,e,i){if(this.LY(t))throw new Error(`layer name '${t}' already in use`);if(!e&&i<2)throw new Error("invalid insert position");var s=2<=i?e:e.eD(),s=C33.oh(C33.NV,this,s,{name:t,sid:Math.floor(1e15*Math.random()),MV:!0});this.NY(s,e,i),this.Dx().Ex(),this.pU()}V5(t,e,i){if(!e&&i<2)throw new Error("invalid insert position");t===e&&i<2||(this.DY(t),this.NY(t,e,i),this.Dx().Ex(),this.pU())}U5(t){var e;this.DY(t)&&((e=this.i3.U4()).c5(!0),t.lh(),e.c5(!1),this.Dx().Ex(),this.pU())}X5(){var t,e=new Set;for(t of this.N5())t.gU()&&!t.TU()&&e.add(t);if(0!==e.size){var i,s=this.i3.U4();s.c5(!0);for(i of e)this.DY(i),i.lh();s.c5(!1),this.Dx().Ex(),this.pU()}}NY(e,i,s){if(2<=s)if(i){if(i===e||i.uj(e))throw new Error(`cannot move layer '${e.qc()}' to sub-layer of itself`);i.hj(e,2===s),e.sj(i)}else 2===s?this.lY.push(e):this.lY.unshift(e),e.sj(null);else{var t=i.eD();if(t){if(i.uj(e))throw new Error(`cannot move layer '${e.qc()}' to sub-layer of itself`);t.nj(e,i,0===s),e.sj(t)}else{let t=this.lY.indexOf(i);if(-1===t)throw new Error("cannot find layer to insert by");0===s&&++t,this.lY.splice(t,0,e),e.sj(null)}}}DY(t){var e=t.eD();if(e)return e.aj(t),!0;if(1<this.lY.length){e=this.lY.indexOf(t);if(-1===e)throw new Error("cannot find layer to remove");return this.lY.splice(e,1),!0}return!1}TY(){this.uY=[...this.N5()],this.cY.clear(),this.fY.clear();for(let t=0,e=this.uY.length;t<e;++t){var i=this.uY[t];i.dU(t),this.cY.set(i.qc().toLowerCase(),i),this.fY.set(i.SU(),i)}}FY(){let t=0;for(var e of this.lY){for(var i of e.nD())i.CU(t);e.pD()&&t++}}BY(){return this.lY.at(-1).ck()+1}async pU(){this.TY(),this.FY(),this.dY=this.BY()}$Y(){return this.dY}kY(){this.dY=-1}Sj(t){var e,i=[];for(e of this.lY){var s=e.ck();if(s===t)i.push(e);else if(t<s)break}return i}fj(){return{scrollX:this.M5(),scrollY:this.b5(),scale:this.y5(),angle:this.I5(),vpX:this.FU(),vpY:this.BU()}}dj(t){this.R5(t.scrollX),this.w5(t.scrollY),this.E5(t.scale),this.A5(t.angle),this.q5(t.vpX,t.vpY)}WY(){let t=this.lY.filter(t=>t.lj())[0];for(;t;){if(!t.GD())return tempColor.Za(t.DD()),tempColor.Ka(1),tempColor;if(t.Mj())return tempColor.Ua(0,0,0,0),tempColor;t=t.rD().filter(t=>t.lj())[0]}return tempColor.Ua(0,0,0,0),tempColor}YH(){return this.vY}VY(){return[...this.JX]}WH(t){if(t.fF())for(var e of t.UY().HY())this.JX.add(e);else this.JX.add(t)}jY(){return[...this.KX]}XY(t,e){if(t===this||!e)return Promise.resolve();t&&(C33.Ga(this.KX,t.KX),t.KX.clear());var i,s=[];for(i of this.JX)this.KX.has(i)||(s.push(i.YY(e)),this.KX.add(i));return Promise.all(s)}async qY(t){if(t.uU())throw new Error("cannot load textures for family");var e=this.i3.OS();!e||e.fM()||this.KX.has(t)||(this.KX.add(t),e=t.YY(e),this.zY(e),await e,t.JY(),this.i3.Ex())}zY(t){this.ZX.add(t),t.then(()=>this.ZX.delete(t)).catch(()=>this.ZX.delete(t))}KY(){return Promise.all([...this.ZX])}ZY(t){if(t.uU()||0<t.a5())throw new Error("cannot unload textures");var e=this.i3.OS();e&&this.KX.has(t)&&(this.KX.delete(t),t.QY(e))}tq(t,e){if(t!==this&&e)for(var i of this.KX)i.JH()||t.JX.has(i)||(i.QY(),this.KX.delete(i))}eq(){this.KX.clear()}async iq(t){var e=this.i3,i=this.WX,s=e.U4(),r=(this.qX&&(this.zX=s.sq(this.qX),this.zX.rq()),i.hq(this),this.Bp=this.VX,this.$p=this.HX,this.sH=e.O4()/2,this.rH=e.P4()/2,this.MX(),this.MY(),this.IY(),this.FY(),await this.i3.K6().nq(this.BY(),!0),this.aq(t),this.i3.oq(!0),this.lq(),this.vY||this.uq(),this.cq(this.QX),this.cq(this.tY),this.fq(),i.Cq(),e.p5(),this.i3.oq(!1),this.i3.pq());if(await Promise.all(r),C33.Dn(r),!e.mq()){for(var h of this.QX)h.vq();for(var n of this.tY)n.Sq(this.eY,this.iY);for(var[a,o]of Object.entries(this.pY)){a=this.i3.gq(parseInt(a,10));a&&!a.uU()&&a.qH()&&C33.Dn(o)}for(var l of this.QX)l.Tq();for(var u of this.tY)u.Tq()}C33.Dn(this.QX),C33.Dn(this.tY),this.eY.clear(),this.iY.clear(),await Promise.all([...this.JX].map(t=>t._q(this.i3.OS()))),t&&(e.F3().dispatchEvent(new C33.Event("beforefirstlayoutstart")),await e.Eq(new C33.Event("beforeprojectstart"))),await this.yq(new C33.Event("beforeanylayoutstart")),e.F3().dispatchEvent(new C33.Event("beforelayoutstart")),await this.Eq(new C33.Event("beforelayoutstart")),e.mq()||await e.$F(C33.Mq.Rq.Iq.Aq,null,null),e.F3().dispatchEvent(new C33.Event("afterlayoutstart")),await this.Eq(new C33.Event("afterlayoutstart")),await this.yq(new C33.Event("afteranylayoutstart")),t&&(e.F3().dispatchEvent(new C33.Event("afterfirstlayoutstart")),await e.Eq(new C33.Event("afterprojectstart"))),s.wq(i),await this.KY(),this.vY=!1}aq(t){for(var e of this.i3.lU())if(!e.uU()&&e.AN())for(var i of e.r5()){var s=i.Cx(),r=s.mx(),r=C33.ph(r.f4(),0,this.uY.length-1),r=this.uY[r];s.Tx(r,!0),r.ZH(i)}if(!t)for(var h of this.uY)h.rU(!1)}lq(){for(var t of this.uY)t.XH(this.QX),t.nU()}uq(){let e=!1;for(var[t,i]of Object.entries(this.pY)){var s,r=this.i3.gq(parseInt(t,10));if(r&&!r.uU()&&r.qH())for(var h of i){let t=null;r.AN()&&!(t=h.hasOwnProperty("instJson")?this.xY(h.instJson.w.l):this.xY(h.w.l))||(s=this.i3.zH(r,t,!1,0,0,!0),h.hasOwnProperty("instJson")?s.Eg(h.instJson):s.Eg(h),e=!0,this.tY.push(s),h.hasOwnProperty("instJson")&&(this.eY.set(s,h),this.iY.set(h.index,s)))}}for(var n of this.uY)n.rU(!0),n._x();e&&(this.i3.p5(),this.i3.bq())}cq(e){for(var i of e)if(i.fF()){var s,r=i.Cx(),t=i.Oq();for(s of i.tF().UY().Gq())if(s!==i.tF()){var h=s.r5();if(h.length>t)i.Pq(h[t]);else{let t;t=r?this.i3.zH(s,r.mx(),!0,r.ag(),r.ug(),!0):this.i3.zH(s,null,!0,0,0,!0),this.i3.p5(),s.Lq(),i.Pq(t),e.push(t)}}}}fq(){for(var t of this.sY)this.i3.kH(t[1]).fF()||this.i3.zH(t,null,!0)}xq(){var i=[],s=this.sY;let r=0;for(let t=0,e=s.length;t<e;++t){var h=s[t],n=this.i3.kH(h[1]);n.JH()?n.fF()&&n.UY().Nq()||i.push(this.i3.zH(h,null,!0)):(s[r]=h,++r)}C33.Nn(s,r),this.i3.p5(),this.cq(i)}oU(t,e,i,s,r,h,n){if(i)return i.oU(t,e,r,h,s,n);var a,o=[];for(a of this.uY)o.push(a.oU(t,e,r,h,s,n));return o.flat()}async Dq(){var t,e,i=this.WX;this.i3.mq()||(await this.yq(new C33.Event("beforeanylayoutend")),await this.Eq(new C33.Event("beforelayoutend")),await this.i3.$F(C33.Mq.Rq.Iq.Fq,null,null),await this.Eq(new C33.Event("afterlayoutend")),await this.yq(new C33.Event("afteranylayoutend"))),i.Bq(!0),this.i3.U4().$q(),this.vY||this.kq();for(t of this.uY)t.aU();for(e of this.i3.lU())if(!(e.JH()||e.AN()||e.YN().EN()||e.uU())){for(var s of e.r5())this.i3.aF(s);this.i3.p5()}i.Bq(!1),i.BL()===this&&i.hq(null)}Wq(t,e){var i=t.tF().SU().toString(),i=(this.pY.hasOwnProperty(i)||(this.pY[i]=[]),this.pY[i]),e={index:e,instJson:t._g(),sceneGraphJson:{children:[]}};i.push(e),this.mY.set(t,e)}Vq(t){var e,i=this.mY.get(t);for(e of t.Hq()){var s=this.mY.get(e);s&&i.sceneGraphJson.children.push({index:s.index,flags:C33.jq.Uq(e.Cx())})}}kq(){this.mY.clear();let t=0;for(var e of this.uY){e.pj();for(var i of e.gx()){var s=i.tF();!s.JH()&&s.qH()&&(this.Wq(i,t),t++)}}for(var r of this.uY)for(var h of r.gx()){var n=h.tF();!n.JH()&&n.qH()&&this.Vq(h)}this.mY.clear()}Xq(){this.pY={},this.vY=!0}sO(){return this.tH}Mj(){var t=this.i3,e=t.OS().uS();return"low"===t.K6().tX()||e&&t.Qj()||this._H.wj()||e&&t.ZU()}Yq(t){var e=this.i3.K6();this.Mj()?(t.lO(null),t.Jb(0,0,0,0),t={aT:this.i3.L4(),XT:t._2()||this.i3.Qj()||this._H.wj(),Zj:!!t._2()&&this.i3.Qj()},"low"===e.tX()&&(t.width=e.Uj(),t.height=e.jj()),this.tH=this.i3.eX(t)):this.tH=null}qq(t){this.i3.zq(t)&&(t.Qb(!1),t.lO(null),t.O2(),t.uO(this.tH))}Jq(t){this.Mj()&&(t.Qb(!1),this.Kq(t,this.tH))}Zq(t){t.lO(this.tH),t.Ku(this.WY()),this.i3.ZU()&&t.Zb();var e=this.Sj(0);this.iX(t,this.tH,e,!0),t._2()&&t.StartMeasuringRenderPassTime(0,1),this.Jq(t),this.tH=null}Qq(t,e){let i=null;this.i3.zq(t)&&(i=this.tH),t.lO(i),t.Jb(0,0,0,0),this.i3.ZU()&&t.Zb();var s=this.Sj(e);this.iX(t,i,s,!0),this.qq(t),t.sS(),this.i3.K6().ez(e)}iX(t,s,e,r){var h=e.filter(t=>t.lj());for(let e=0,i=h.length;e<i;){var n=h[e];if(n.ej()&&!n.bj()){tempRender3dList.push(n);for(let t=e+1;t<i;++t){var a=h[t];if(!a.ej()||a.bj())break;tempRender3dList.push(h[t])}if(2<=tempRender3dList.length||1===tempRender3dList.length&&tempRender3dList[0].oj()){this.iz(t,s,tempRender3dList),e+=tempRender3dList.length,C33.Dn(tempRender3dList);continue}C33.Dn(tempRender3dList)}n.Jg(t,s,r&&0===e),++e}}Kq(t,e){var i=this._H.AU(),s=this.i3;0===i.length?(t.lO(null),t.O2(),t.uO(e),t.fO(e),s.IH(e)):(tempLayoutRect.set(0,0,s.VU(),s.HU()),this.c4().lP(t,null,{uP:this,cP:3,devicePixelRatio:this.i3.yX(),fP:this.i3.IX()*this.y5(),dP:this.I5(),xP:tempLayoutRect,NP:null,QO:!0}))}iz(s,r,t){t[0].GD()||(tempColor.Za(t[0].DD()),tempColor.Ka(1),s.Ku(tempColor));this.i3.K6();s.Qb(!0);var e,h=tempInstanceList1,n=tempInstanceList2,a=tempInstanceList3;for(e of t)e.pj(),e.zU(h);var t=t[0],i=t.qj(s);t.Kj(s);for(let e=0,i=h.length;e<i;){var o=h[e],l=o.Cx(),u=l.mx();if(l.uD()&&l.fX(u.cX())){(!o.dX()||0<l.CX())&&a.push(o);var c=o.Cx().S7();n.push(o);let t=e+1;for(;t<i;++t){var f=h[t],d=f.Cx();if(d.uD()&&d.fX(d.mx().cX())){if(d.S7()!==c)break;(f.dX()?(0<d.CX()&&a.push(f),n):a).push(f)}}if(1!==n.length||n[0].pX()){this.sz(s,r,n);for(let t=0,e=a.length;t<e;++t){var C=a[t],p=C.Cx(),m=p.mx();p.vX(!0),MaybePrepareLayerDraw2(m,s),m.uX(C,p,s,r),p.vX(!1)}}else{MaybePrepareLayerDraw2(u,s),u.uX(o,l,s,r);for(let t=0,e=a.length;t<e;++t){var v,S,g=a[t];g!==o&&(S=(v=g.Cx()).mx(),MaybePrepareLayerDraw2(S,s),S.uX(g,v,s,r))}}e=t,C33.Dn(n),C33.Dn(a)}else++e}i&&s.TO(i),C33.Dn(h),lastLayerPreparedForDrawing=null}sz(i,s,r){i.CO();for(let t=0,e=r.length;t<e;++t){var h=r[t],n=h.Cx(),a=n.mx();n.SX(!0),MaybePrepareLayerDraw2(a,i),a.gX(h,n,i)}i.pO();for(let t=0,e=r.length;t<e;++t){var o=r[t],l=o.Cx(),u=l.mx();MaybePrepareLayerDraw2(u,i),u.uX(o,l,i,s),l.SX(!1)}i.vO()}NX(){var t,e,i={sx:this.M5(),sy:this.b5(),s:this.y5(),a:this.I5(),w:this.tp(),h:this.cp(),ortho:this.Q5(),vpX:this.FU(),vpY:this.BU(),fv:this.vY,persist:this.pY,fx:this._H._g(),layers:{},dynamicLayers:[]};for(t of this.uY)t.gU()?(e=t.eD(),i.dynamicLayers.push({sid:t.SU(),name:t.qc(),parentSid:e?e.SU():null,siblingIndex:t.mU(),data:t.NX()})):i.layers[t.SU().toString()]=t.NX();return i}DX(t){this.sH=t.sx,this.rH=t.sy,this.eH=t.s,this.iH=t.a,this.Bp=t.w,this.$p=t.h,this.jX=!!t.ortho,t.hasOwnProperty("vpX")&&(this.XX=t.vpX),t.hasOwnProperty("vpY")&&(this.YX=t.vpY),this.vY=!!t.fv,this.pY=t.persist,this._H.Eg(t.fx),this.MH=!0;for(var[e,i]of Object.entries(t.layers)){e=parseInt(e,10),e=this.xY(e);e&&e.DX(i)}if(t.hasOwnProperty("dynamicLayers")){this.X5(),this.i3.p5();var s,r,h=new Map,n=t.dynamicLayers;for(let t=n.length-1;0<=t;--t){var a=n[t],o=a.sid,l=a.name,u=a.parentSid,c=a.siblingIndex,a=a.data;if(this.TY(),!this.LY(l)&&!this.xY(o)){let t,e;if(null===u)t=null,e=this.lY;else{if(!(t=this.xY(u)))continue;e=t.rD()}u=C33.oh(C33.NV,this,t,{name:l,sid:o,MV:!0});e.push(u);let i=h.get(e);i||(i=[],h.set(e,i)),i.push({c7:u,siblingIndex:c}),u.DX(a)}}for([s,r]of h){r.sort((t,e)=>t.siblingIndex-e.siblingIndex);for(var f of r){var d=f.c7,f=f.siblingIndex,C=s.indexOf(d);s.splice(C,1),s.splice(f,0,d)}}}this.pU(),this.MY(),this.IY()}$L(){return this.SY}B4(){return this.gY}rz(t){t.layout=this.$L();var e=this.i3,e=e.hz()&&!e.U4().d5();e&&C3Debugger.StartMeasuringScriptTime(),this.gY.dispatchEvent(t),e&&C3Debugger.AddScriptTime()}Eq(t){return t.layout=this.$L(),this.gY.Y3(t)}yq(t){return t.layout=this.$L(),this.i3.Eq(t)}nz(){this.az(this.lY)}az(t,e=0){var i,t=t.slice(0);t.reverse();for(i of t)console.log("\t".repeat(e)+"- "+i.qc()),this.az(i.rD(),e+1)}}}{let C33=self.We;C33.oz=class LayoutManager extends C33.nh{constructor(t){super(),this.i3=t,this.lz=[],this.uz=new Map,this.cz=new Map,this.fz=null,this.dz=[],this.Cz=null,this.pz=0,this.mz=null}lh(){this.i3=null,this.fz=null,this.Cz=null,this.mz=null,C33.Dn(this.lz),this.uz.clear(),this.cz.clear(),C33.Dn(this.dz)}W_(t){t=C33.oh(C33.kX,this,this.lz.length,t);this.lz.push(t),this.uz.set(t.qc().toLowerCase(),t),this.cz.set(t.SU(),t)}Dx(){return this.i3}vz(t){this.Cz=t}Sz(){if(this.Cz)return this.Cz;if(this.lz.length)return this.lz[0];throw new Error("no first layout")}gz(t){return this.uz.get(t.toLowerCase())||null}Tz(t){return this.cz.get(t)||null}_z(t){return t=C33.ph(Math.floor(t),0,this.lz.length-1),this.lz[t]}VL(t){return"number"==typeof t?this._z(t):this.gz(t.toString())}UL(){return this.lz}hq(t){this.fz=t}BL(){return this.fz}Ez(t){if(this.dz.includes(t))throw new Error("layout already running");this.dz.push(t)}yz(t){t=this.dz.indexOf(t);if(-1===t)throw new Error("layout not running");this.dz.splice(t,1)}*Az(){this.fz&&(yield this.fz),this.dz.length&&(yield*this.dz)}Iz(t){return this.fz===t||this.dz.includes(t)}Bq(t){if(t)this.pz++;else{if(this.pz<=0)throw new Error("already unset");this.pz--}}C5(){return 0<this.pz}YL(t){this.mz=t}Cq(){this.mz=null}XL(){return!!this.mz}Rz(){return this.mz}Mz(){var t=this.BL();t&&t.MY()}wz(){var t=this.BL();t&&t.IY()}}}{let C33=self.We,NAMES_REGEXP=new RegExp("<(.+?)>","g");C33.bz=class TimelineManager extends C33.nh{constructor(t){super(),this.i3=t,this.Oz=C33.oh(C33.Gz),this.Pz=null,this.Lz=[],this.xz=new Map,this.Nz=new Map,this.Dz=new Map,this.Fz=[],this.Bz=[],this.$z=[],this.kz=!1,this.Wz=!1,this.Vz=!1,this.Uz=()=>this.jz(),this.Xz=()=>this.Yz(),this.qz=()=>this.zz(),this.Jz=()=>this.Kz(),this.Zz=t=>this.Qz(t.YB),this.tJ=t=>this.eJ(),this.iJ=t=>this.sJ(),this.rJ=t=>this.hJ(),this.nJ=[],this.aJ=0}lh(){this.oJ(),this.Uz=null,this.Xz=null,this.qz=null,this.Jz=null,this.Zz=null,this.iJ=null;for(var t of this.Lz)t.V$(),t.lh();C33.Dn(this.Lz),this.Lz=null,this.Oz.lh(),this.Oz=null,C33.Dn(this.Fz),this.Fz=null,C33.Dn(this.Bz),this.Bz=null,C33.Dn(this.$z),this.$z=null,this.xz.clear(),this.xz=null,this.Nz.clear(),this.Nz=null,this.Dz.clear(),this.Dz=null,C33.Dn(this.nJ),this.nJ=null,this.i3=null}lJ(){var t=this.i3.F3();t.addEventListener("pretick",this.Uz),t.addEventListener("tick2",this.Xz),t.addEventListener("beforelayoutchange",this.qz),t.addEventListener("layoutchange",this.Jz),t.addEventListener("instancedestroy",this.Zz),t.addEventListener("beforeload",this.tJ),t.addEventListener("afterload",this.iJ),t.addEventListener("afterlayoutstart",this.rJ)}oJ(){var t=this.i3.F3();t.removeEventListener("pretick",this.Uz),t.removeEventListener("tick2",this.Xz),t.removeEventListener("beforelayoutchange",this.qz),t.removeEventListener("layoutchange",this.Jz),t.removeEventListener("instancedestroy",this.Zz),t.removeEventListener("beforeload",this.tJ),t.removeEventListener("afterload",this.iJ),t.removeEventListener("afterlayoutstart",this.rJ)}W_(t){this.Oz.ac(t);t=C33.cJ.uJ(t,this);this.ac(t),this.fJ(t),this.Dz.set(t.qc(),0)}dJ(t){var e=this.CJ(),t=t.mF(),e=e.ni(t),e=C33.cJ.dJ(t+":"+this.Dz.get(t),e,this);return this.pJ(t),this.ac(e),e}pJ(t){this.Dz.set(t,this.Dz.get(t)+1)}mJ(){for(var t of this.Lz)t.vJ()||(t=t.mF(),this.pJ(t))}SJ(){for(var t of this.Dz.keys())this.Dz.set(t,0)}ac(t){this.Lz.push(t),this.xz.set(t.qc().toLowerCase(),t)}_f(t){t.gJ(),t.vJ()||(C33.Vn(this.Lz,t),C33.Vn(this.Fz,t),C33.Vn(this.Bz,t),C33.Vn(this.$z,t),this.xz.delete(t.qc().toLowerCase()),this.TJ(t),t.k$())||t.lh()}FF(t){this.i3.FF(t,this.Pz,null)}Dx(){return this.i3}CJ(){return this.Oz}_J(t){this.Pz=t}EJ(){return this.Pz}*yJ(){for(var t of this.Lz)yield t}*AJ(){for(var t of this.Bz)yield t}IJ(t,e){this.Nz.has(t)||this.Nz.set(t,new Set),this.Nz.get(t).add(e)}fJ(t){for(var e of t.RJ())this.IJ(e,t)}TJ(t){for(var[e,i]of this.Nz.entries())i.has(t)&&(i.delete(t),0===i.size)&&this.Nz.delete(e)}MJ(t){if(this.Nz.has(t))return this.Nz.get(t)}wJ(t,i){if(i)for(let e of this.Lz){var s=i.every(t=>e.bJ(t.YB,t.trackId));if(s&&e.qc().includes(t.qc()))return e}}OJ(t){return this.xz.get(t.toLowerCase())||null}GJ(t){for(var e of this.Fz)if(e.qc()===t)return e;for(var i of this.Bz)if(i.qc()===t)return i;return null}*PJ(t){if(NAMES_REGEXP.test(t)){NAMES_REGEXP.lastIndex=0;var e,i=new Set;do{var s,r=NAMES_REGEXP.exec(t);if(r)for(s of r[1].split(","))i.add(s)}while(r);for(e of i.values()){var h=this.OJ(e);h&&(yield h)}i.clear()}else{var n=this.OJ(t);n&&(yield n)}}*LJ(t){for(var e of this.Lz)e.U$(t)&&(yield e)}xJ(t){this.Fz.includes(t)||this.Fz.push(t),this.NJ()}DJ(t){C33.Vn(this.Bz,t),this.FJ()}BJ(t){this.Bz.includes(t)?(t.$J(!0),t.kJ(!1),t.WJ(!1)):(t.$J(!1),t.kJ(!0),t.WJ(!1),this.Fz.includes(t)||this.Fz.push(t)),this.NJ()}VJ(t){t.$J(!1),t.kJ(!1),t.HJ(),C33.Vn(this.Fz,t),this.FJ()}UJ(t){t.$J(!1),t.kJ(!1),this.Bz.includes(t)&&(t.WJ(!0),this.$z.push(t),C33.Vn(this.Bz,t)),this.Fz.includes(t)&&t.WJ(!0)}jJ(t){t.$J(!1),t.kJ(!1),t.WJ(!1),t.Z$(1),C33.Vn(this.Bz,t)}XJ(t){this.UJ(t),t.HJ()}jz(){if(!this.Dx().mq()&&this.kz&&!this.Wz){for(this.Vz=!0;this.Fz.length;){var t=this.Fz.pop();(t.YJ()?(t.qJ(),this.$z):(t.zJ(),this.Bz)).push(t),0!==t.JJ()&&(this.aJ=1)}var e=this.i3.KJ(),i=this.i3.ZJ(),s=this.i3.gL();for(let t=this.Bz.length-1;0<=t;t--){var r=this.Bz[t];r&&r.QJ(e,s,i)}this.Vz=!1,0!==this.aJ&&this.Dx().Ex()}}Yz(){if(!this.Dx().mq()&&this.kz&&!this.Wz){let i;for(let t=0,e=this.$z.length;t<e;t++){var s=this.$z[t];i=i||new Set,s.gJ(),this.tK(s),i.add(s)}if(i){C33.jn(this.$z,i);for(let t=this.aJ=0,e=this.Bz.length;t<e;t++)if(0!==this.Bz[t].JJ()){this.aJ=1;break}}this.FJ()}}tK(t){t.k$()||t.eK()&&t.iK()&&t.sK()&&t.rK()}NJ(){this.kz||(this.kz=!0)}FJ(){this.$z.length||this.Bz.length||this.Fz.length||this.Vz||(this.kz=!1)}zz(){for(this.Wz=!0;this.Fz.length;)this.VJ(this.Fz.pop());var t,e,i,s=new Set;for(t of this.Bz)t.zz()&&(t.gJ(),s.add(t));C33.jn(this.Bz,s),s.clear();for(e of this.$z)e.zz()&&(e.gJ(),s.add(e));C33.jn(this.$z,s),this.FJ();for(i of this.Lz)i.hK()}Kz(){this.Wz=!1}Qz(t){var e=t.tF(),e=this.MJ(e);if(e)if(this.i3.mq())this.nJ.push(t);else for(var i of e)i.vJ()||(i.k$()?this._f(i):i.eK()||(this.tK(i),this._f(i)))}eJ(){for(var t of this.Fz.map(t=>t))this.tK(t),this._f(t);for(var e of this.Bz.map(t=>t))this.tK(e),this._f(e)}sJ(){for(var t of this.nJ)this.Qz(t);C33.Dn(this.nJ);for(var e of this.Lz)e.sJ()}hJ(){var t=this.i3.WL().BL();if(t)for(var e of this.Lz){var i=e.nK();i&&t.qc()===i&&this.BJ(e)}}NX(){return{timelinesJson:this.aK(),scheduledTimelinesJson:this.oK(),playingTimelinesJson:this.lK(),markedForRemovalTimelinesJson:this.uK(),hasRuntimeListeners:this.kz,changingLayout:this.Wz,isTickingTimelines:this.Vz}}DX(t){t&&(this.SJ(),this.cK(t.timelinesJson),this.fK(t.scheduledTimelinesJson),this.dK(t.playingTimelinesJson),this.CK(t.markedForRemovalTimelinesJson),this.kz=!t.hasRuntimeListeners,this.Wz=!!t.changingLayout,this.Vz=!!t.isTickingTimelines,this.mJ(),this.NJ(),this.FJ())}aK(){return this.Lz.map(t=>t.NX())}cK(t){for(var e of t){let t=this.OJ(e.name);if(t)t.DX(e);else{var i=this.pK(e);if(!i)continue;i=this.OJ(i);(t=this.dJ(i)).DX(e)}t.mK()||this._f(t)}}pK(t){t=t.name.split(":");return t&&2===t.length?t[0]:null}oK(){return this.vK(this.Fz)}fK(t){this.SK(t,this.Fz)}lK(){return this.vK(this.Bz)}dK(t){this.SK(t,this.Bz)}uK(){return this.vK(this.$z)}CK(t){this.SK(t,this.$z)}gK(t,e){if(e)for(var i of e)if(i===t.qc())return!0;return!1}vK(t){return t.map(t=>t.qc())}SK(t,e){var i,s=new Set;for(i of e)this.gK(i,t)||s.add(i);if(C33.jn(e,s),t){var r;for(r of t){var h=this.OJ(r);h&&!e.find((e=>t=>t.qc()===e)(r))&&e.push(h)}}}}}{let C33=self.We,STEPS=100,LENGTH_STEP_SIZE=.01,BEZIER_STEP_SIZE=25,REFINE_ITERATIONS=20,LOOKUP_STEPS_FROM_LAST=5,TANGENT_RESULT=[0,0],MAP_RESULT=[0,0],SHORT_PROJECTION_RESULT=[0,0],PROJECTION_RESULT=[0,0,0,0,0],REFINE_LUT=new Array(4),REFINE_LUT_OBJECTS=[{x:0,y:0,t:0,Ot:0},{x:0,y:0,t:0,Ot:0},{x:0,y:0,t:0,Ot:0}],REFINE_RESULT={x:0,y:0,t:0,Ot:0};C33.TK=class TimelineInfo{constructor(t,e){this._K=!1,this.EK=t,this.yK=[];let i=null;if(i=e?this.EK.AK(e):C33.first(this.EK.IK())){t=i.v6("offsetX"),e=i.v6("offsetY");if(t&&e){this.RK=t,this.MK=e;var s=t.wK(),r=e.wK();for(let t=1,e=Math.min(s.length,r.length);t<e;++t){var h=s[t],n=(h.bK(),h.GK()),a=r[t],o=(a.bK(),a.GK());n&&"cubic-bezier"===n.PK()&&o&&"cubic-bezier"===o.PK()?this.yK.push(C33.oh(C33.LK,n,o,h,a,this.yK.length)):(n&&"line"===n.PK()&&o&&o.PK(),this.yK.push(C33.oh(C33.xK,h,a,this.yK.length)))}this._K=!0}}}lh(){for(var t of this.yK)t.lh();C33.Dn(this.yK),this.yK=null,this.EK=null,this.RK=null,this.MK=null}NK(){return this._K}DK(){return this.yK}FK(t){var e,i="relative"===this.RK.BK()?t.ag():0,s="relative"===this.MK.BK()?t.ug():0;for(e of this.yK)e.FK(i,s)}K1(e,i,t){let s=NaN;var r=this.yK.length;for(let t=0;t<r;t++){var h,n=this.yK[t];"cubic-bezier"===n.HE()&&(h=n.K1(e,i),isNaN(s)||h[3]<s)&&(s=h[3],SHORT_PROJECTION_RESULT[0]=h[2],SHORT_PROJECTION_RESULT[1]=n.f4())}return SHORT_PROJECTION_RESULT}$K(e,i,t){var s=t.tRange;C33.vs(s[0])||(s[0]=0),C33.vs(s[1])||(s[1]=1);let r=NaN;var h=this.yK.length;for(let t=0;t<h;t++){var n,a=this.yK[t];"cubic-bezier"===a.HE()&&(n=a.kK(e,i,s),isNaN(r)||n[3]<r)&&(r=n[3],SHORT_PROJECTION_RESULT[0]=n[2],SHORT_PROJECTION_RESULT[1]=a.f4())}return SHORT_PROJECTION_RESULT}WK(t,e){return this.yK[e].WK(t)}VK(t,e){return this.yK[e].VK(t)}},C33.LK=class TimelineCubicBezierSegmentInfo{constructor(t,e,i,s,r){this.H1=r;var r=t.HK("cubic-bezier"),h=i.HK("cubic-bezier"),n=e.HK("cubic-bezier"),a=s.HK("cubic-bezier");this.UK=t.jK(),this.XK=e.jK(),this.YK=t.jK()+r.qK(),this.zK=e.jK()+n.qK(),this.JK=i.jK()+h.KK(),this.ZK=s.jK()+a.KK(),this.QK=i.jK(),this.tZ=s.jK(),this.eZ=0,this.iZ=0,this.sZ=0,this.rZ=0,this.hZ=0,this.nZ=0,this.aZ=0,this.oZ=0,this.lZ=0,this.uZ=0,this.cZ=0,this.fZ=0,this.dZ=0,this.CZ=0,this.pZ=0,this.mZ=0,this.vZ=0,this.SZ=0,this.gZ=0,this.TZ=0,this._Z=NaN,this._K=!1,this.EZ=STEPS,this.yZ=new Array(this.EZ+1),this.yZ[0]=0,this.AZ=0,this.IZ=[],this.RZ=[];for(let t=0;t<STEPS;t++)this.RZ.push({x:0,y:0,t:0,Ot:0});this.MZ()}lh(){C33.Dn(this.yZ),this.yZ=null,C33.Dn(this.IZ),this.IZ=null,C33.Dn(this.RZ),this.RZ=null}HE(){return"cubic-bezier"}f4(){return this.H1}wZ(){return Math.floor(this.AZ/BEZIER_STEP_SIZE)}bZ(){return 1/this.wZ()}FK(t,e){this.OZ=t,this.GZ=e,this.yZ=new Array(this.EZ+1),this.yZ[0]=0,this.MZ(),this.eZ=this.UK+this.OZ,this.iZ=this.XK+this.GZ,this.sZ=this.YK+this.OZ,this.rZ=this.zK+this.GZ,this.hZ=this.JK+this.OZ,this.nZ=this.ZK+this.GZ,this.aZ=this.QK+this.OZ,this.oZ=this.tZ+this.GZ,this.lZ=3*(this.sZ-this.eZ),this.uZ=3*(this.rZ-this.iZ),this.cZ=3*(this.hZ-this.sZ),this.fZ=3*(this.nZ-this.rZ),this.dZ=3*(this.aZ-this.hZ),this.CZ=3*(this.oZ-this.nZ),this.pZ=3*(this.sZ-this.eZ),this.mZ=3*(this.eZ+this.hZ-2*this.sZ),this.vZ=this.aZ-this.eZ+3*(this.sZ-this.hZ),this.SZ=3*(this.rZ-this.iZ),this.gZ=3*(this.iZ+this.nZ-2*this.rZ),this.TZ=this.oZ-this.iZ+3*(this.rZ-this.nZ)}Map(t){return this._K?(t=this.PZ(t),MAP_RESULT[0]=this.LZ(t),MAP_RESULT[1]=this.xZ(t),MAP_RESULT):NaN}K1(t,e){var i=this.NZ(STEPS),s=this.DZ(t,e,i),t=this.FZ(t,e,i,s);return PROJECTION_RESULT[0]=t.x,PROJECTION_RESULT[1]=t.y,PROJECTION_RESULT[2]=t.t,PROJECTION_RESULT[3]=t.Ot,PROJECTION_RESULT}kK(t,e,i){var s=this.NZ(STEPS),i=this.BZ(t,e,s,i),t=this.FZ(t,e,s,i);return PROJECTION_RESULT[0]=t.x,PROJECTION_RESULT[1]=t.y,PROJECTION_RESULT[2]=t.t,PROJECTION_RESULT[3]=t.Ot,PROJECTION_RESULT}WK(t){var e=1-t,i=e*e,e=2*e*t,t=t*t,s=i*this.lZ+e*this.cZ+t*this.dZ,i=i*this.uZ+e*this.fZ+t*this.CZ,e=Math.hypot(s,i);return TANGENT_RESULT[0]=s/e,TANGENT_RESULT[1]=i/e,TANGENT_RESULT}VK(t){var e=1-t,i=e*e,e=2*e*t,t=t*t,s=i*this.lZ+e*this.cZ+t*this.dZ,i=i*this.uZ+e*this.fZ+t*this.CZ;return Math.atan2(i,s)}PZ(s){if(this._K){var r=s*this.yZ[this.EZ];let t=0,e=this.EZ,i=0;for(;t<e;)i=t+((e-t)/2|0),this.yZ[i]<r?t=i+1:e=i;this.yZ[i]>r&&i--;s=this.yZ[i];return s===r?i/this.EZ:(i+(r-s)/(this.yZ[i+1]-s))/this.EZ}}LZ(t){return this._K?self.uc.Mc("cubicbezier")(t,this.UK+this.OZ,this.YK+this.OZ,this.JK+this.OZ,this.QK+this.OZ):NaN}xZ(t){return this._K?self.uc.Mc("cubicbezier")(t,this.XK+this.GZ,this.zK+this.GZ,this.ZK+this.GZ,this.tZ+this.GZ):NaN}NZ(e){if(e=e||STEPS,!(this.IZ.length>=e)){this.IZ=new Array(e),e++;for(let t=0;t<e-1;t++){var i=t/(e-1),s=i**2,r=i**3,h=this.pZ*i,n=this.mZ*s,a=this.vZ*r,o=this.SZ*i,s=this.gZ*s,r=this.TZ*r,h=this.eZ+h+n+a,n=this.iZ+o+s+r;this.RZ[t].x=h,this.RZ[t].y=n,this.RZ[t].t=i,this.RZ[t].Ot=0,this.IZ[t]=this.RZ[t]}}return this.IZ}DZ(e,i,s,t=0,r=Number.MAX_SAFE_INTEGER){let h=0;if(isNaN(this._Z))for(let t=0;t<STEPS;t++){var n=s[t],a=n.x-e,o=n.y-i;n.Ot=a*a+o*o,n.Ot<r&&(r=n.Ot,h=t)}else{for(let t=this._Z;t<this._Z+LOOKUP_STEPS_FROM_LAST&&!(t>=s.length);t++){var l=s[t],u=l.x-e,c=l.y-i;l.Ot=u*u+c*c,l.Ot<r&&(r=l.Ot,h=t)}for(let t=this._Z;t>this._Z-LOOKUP_STEPS_FROM_LAST&&!(t<0);t--){var f=s[t],d=f.x-e,C=f.y-i;f.Ot=d*d+C*C,f.Ot<r&&(r=f.Ot,h=t)}}return this._Z=h}BZ(e,i,s,r,h=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this._Z))for(let t=0;t<STEPS;t++){var a=s[t],o=a.x-e,l=a.y-i;a.Ot=o*o+l*l,a.t>=r[0]&&a.t<=r[1]&&a.Ot<h&&(h=a.Ot,n=t)}else{for(let t=this._Z;t<this._Z+LOOKUP_STEPS_FROM_LAST&&!(t>=s.length);t++){var u=s[t],c=u.x-e,f=u.y-i;u.Ot=c*c+f*f,u.t>=r[0]&&u.t<=r[1]&&u.Ot<h&&(h=u.Ot,n=t)}for(let t=this._Z;t>this._Z-LOOKUP_STEPS_FROM_LAST&&!(t<0);t--){var d=s[t],C=d.x-e,p=d.y-i;d.Ot=C*C+p*p,d.t>=r[0]&&d.t<=r[1]&&d.Ot<h&&(h=d.Ot,n=t)}}return this._Z=n}FZ(e,i,t,s){let r=t[s],h=1,n=Number.MAX_SAFE_INTEGER;t:do{var a=t.length,o=0===s?0:s-1,a=s===a-1?a-1:s+1,l=t[o].t,u=(t[a].t-l)/4;if(u<.001)break;REFINE_LUT[0]=t[o];for(let t=1;t<=2;t++){var c=l+t*u,f=c**2,d=c**3,C=this.pZ*c,p=this.mZ*f,m=this.vZ*d,v=this.SZ*c,f=this.gZ*f,d=this.TZ*d,C=this.eZ+C+p+m,p=this.iZ+v+f+d,m=C-e,v=p-i,f=m*m+v*v;if(f<n){n=f,s=t,REFINE_RESULT.x=C,REFINE_RESULT.y=p,REFINE_RESULT.t=c,REFINE_RESULT.Ot=f,r=REFINE_RESULT;break t}d=REFINE_LUT_OBJECTS[t-1];d.x=C,d.y=p,d.t=c,d.Ot=f,REFINE_LUT[t]=d}REFINE_LUT[3]=t[a],t=REFINE_LUT}while(h++<REFINE_ITERATIONS);return r}MZ(){this._K=!0;let e=this.LZ(0),i=this.xZ(0),s=0;for(let t=1;t<=this.EZ;t++){var r=this.LZ(t*LENGTH_STEP_SIZE),h=this.xZ(t*LENGTH_STEP_SIZE),n=e-r,a=i-h;s+=Math.hypot(n,a),this.yZ[t]=s,e=r,i=h}this.AZ=s}},C33.xK=class TimelineLineSegmentInfo{constructor(t,e,i){this.H1=i,this.$Z=t.jK(),this.kZ=e.jK(),this.OZ=0,this.GZ=0}lh(){}HE(){return"line"}f4(){return this.H1}FK(t,e){this.OZ=t,this.GZ=e}ag(){return this.$Z+this.OZ}ug(){return this.kZ+this.GZ}}}{let C33=self.We,PING_PONG_BEGIN=0,PING_PONG_END=1;C33.cJ=class Timeline extends C33.nh{constructor(t,e,i){super(),this.i3=i.Dx(),this.WZ=i,this.VZ=e,this.dh=t,this.HZ=[],this.UZ=0,this.jZ=null,this.XZ=0,this.YZ(),this.qZ=null,this.zZ=null,this.JZ=0,this.KZ=0,this.ZZ=1,this.QZ=PING_PONG_BEGIN,this.tQ=1,this.eQ=!1,this.iQ=!1,this.sQ=!1,this.rQ=!0,this.hQ=!1,this.nQ=!1,this.aQ=-1,this.oQ=!1,this.lQ=!1,this.uQ=!1,this.cQ=!1,this.fQ=NaN,this.dQ=[""],this.CQ="",this.pQ=!1,this.aJ=0,this.mQ=0,this.vQ=null}static uJ(t,e){var i=e.CJ(),s=i.SQ(),i=i.ni(t[s]),t=C33.oh(C33.cJ,t[s],i,e);return t.gQ(!0),t}static dJ(t,e,i){return C33.oh(C33.cJ,t,e,i)}lh(){if(!this.k$()){var t,e=this.i3.F3();this.WZ.VJ(this),this.WZ.XJ(this);for(t of this.HZ)t.lh();C33.Dn(this.HZ),this.HZ=null,this.i3=null,this.WZ=null,this.VZ=null,this.hQ=!0,this.qZ=null,this.zZ=null,this.TQ(e)}}TQ(t){var e=C33.oh(C33.Event,"timelinestatereleased");e._Q=this,t.dispatchEvent(e)}HE(){return 0}YZ(){for(var t of this.VZ.yQ().EQ())this.UZ=this.HZ.push(C33.AQ.W_(this,t))}IQ(){return this.WZ}Dx(){return this.i3}IK(){return this.HZ}RQ(i,s,r,h){if(this.mQ){let e;for(let t=0;t<this.HZ.length;t++){var n=this.HZ[t];i===n.c6()&&((n=n.v6(r))&&s.constructor===n.MQ().constructor&&n.BK()===h.BK())&&(e=e||[]).push(n)}return e}}mK(){return!!this.HZ.length}AK(t){for(var e of this.HZ)if(C33.gr(e.p6(),t))return e;return null}wQ(t){for(var e of this.HZ)if(!e.bQ()&&C33.gr(e.qc(),t))return e;return null}s8(t){this.dh=t}qc(){return this.dh}OQ(){return this.VZ}mF(){return this.VZ.qc()}Y$(){return this.VZ.Y$()}X$(t){this.VZ.X$(t)}GQ(){return this.VZ.GQ()}PQ(t){this.VZ.PQ(t)}LQ(){return this.VZ.LQ()}xQ(t){this.VZ.xQ(t)}BK(){return this.VZ.BK()}NQ(t){this.VZ.BK(t)}u6(t){for(var e of this.IK())e.u6(t)}z$(){return this.VZ.z$()}q$(t){return this.VZ.q$(t)}K$(){return this.VZ.K$()}J$(t){return this.VZ.J$(t)}a$(){return this.VZ.a$()}DQ(t){return this.VZ.DQ(t)}Z$(t){return this.ZZ=t}Q$(){return this.ZZ}nK(){return this.VZ.nK()}FQ(){return this.VZ.FQ()}BQ(){return this.VZ.BQ()}$Q(){return this.QZ}kQ(){return!this.IsPlaying()||0<this.ZZ}e6(){return this.qZ||(this.qZ=new Promise(t=>{this.zZ=t})),this.qZ}HJ(){this.qZ&&(this.zZ(),this.qZ=null,this.zZ=null)}WQ(t){this.dQ=C33.cJ.VQ(t),this.pQ=!0}t6(){return this.dQ}HQ(){return this.pQ&&(this.CQ=this.dQ.join(" ")),this.pQ=!1,this.CQ}U$(t){return!!(this.dQ&&this.dQ.length&&(t=C33.cJ.VQ(t))&&t.length)&&t.every(C33.cJ.UQ,this)}jQ(){C33.Mq.Timeline&&this.constructor===C33.cJ&&(C33.Mq.Timeline.Iq.PushTriggerTimeline(this),this.WZ.FF(C33.Mq.Timeline.Iq.OnTimelineStarted),this.WZ.FF(C33.Mq.Timeline.Iq.OnTimelineStartedByName),this.WZ.FF(C33.Mq.Timeline.Iq.OnTimelineStartedByTags),this.WZ.FF(C33.Mq.Timeline.Iq.OnAnyTimelineStarted),C33.Mq.Timeline.Iq.PopTriggerTimeline())}XQ(){this.aQ=this.i3.YQ()}rK(){this.uQ||(this.uQ=!0,C33.Mq.Timeline&&this.constructor===C33.cJ&&(C33.Mq.Timeline.Iq.PushTriggerTimeline(this),this.WZ.FF(C33.Mq.Timeline.Iq.OnTimelineFinished),this.WZ.FF(C33.Mq.Timeline.Iq.OnTimelineFinishedByName),this.WZ.FF(C33.Mq.Timeline.Iq.OnTimelineFinishedByTags),this.WZ.FF(C33.Mq.Timeline.Iq.OnAnyTimelineFinished),C33.Mq.Timeline.Iq.PopTriggerTimeline()))}$J(t){this.eQ=t}qQ(){return this.aQ===this.i3.YQ()}IsPlaying(t=!1){return!!this.qQ()||!(!this.zQ()||t)||this.eQ}JQ(){return this.IsPlaying(!0)}s6(){return this.KQ()}KQ(){return!(this.k$()||this.zQ()||this.JQ()||this.iK())}kJ(t){this.iQ=t}zQ(){return this.iQ}ZQ(t){this.rQ=t;t=this.qO();(t<=0||t>=this.Y$())&&(this.rQ=!0)}iK(){return this.rQ}k$(){return this.hQ}WJ(t){this.nQ=t}YJ(){return this.nQ}QQ(t){this.oQ=t}ttt(){return this.oQ}gQ(t){this.lQ=!!t}vJ(){return this.lQ}sK(){return this.sQ}qO(){return this.JZ}j$(t){var e=this.qO();this.ett(t),this.ZQ(!1),this.iK()||this.QQ(!0),!this.JQ()&&!this.zQ()&&this.sQ||(this.JQ()||this.zQ()||this.sQ?this.JQ()?this.V$():this.zQ()&&(this.WZ.VJ(this),this.itt()):this.itt()),this.stt(),this.htt(this.qO(),!1,!0,!0,e),this.ntt(),this.aJ&&this.Dx().Ex(),this.att()}ett(t){(t=C33.vs(t)?t:this.Y$())<0?this.JZ=0:t>=this.Y$()?this.JZ=this.Y$():this.JZ=t}ott(t){(t=C33.vs(t)?t:this.Y$())<0?this.JZ=0:t>=this.Y$()?this.JZ=this.Y$():this.JZ=t;for(var e of this.HZ)e.ltt()}att(){C33.Mq.Timeline&&this.constructor===C33.cJ&&(C33.Mq.Timeline.Iq.PushTriggerTimeline(this),this.WZ.FF(C33.Mq.Timeline.Iq.OnTimeSet),this.WZ.FF(C33.Mq.Timeline.Iq.OnTimeSetByName),this.WZ.FF(C33.Mq.Timeline.Iq.OnTimeSetByTags),C33.Mq.Timeline.Iq.PopTriggerTimeline())}utt(){if(!this.z$())if(this.K$()&&this.QZ===PING_PONG_END){if(this.kQ()){if(this.qO()>=this.Y$())return!1}else if(this.qO()<=0)return!1}else if(!this.z$()&&!this.K$())if(this.kQ()){if(this.qO()>=this.Y$())return!1}else if(this.qO()<=0)return!1;return!0}H$(){this.k$()||this.utt()&&this.Play(!0)}Play(t=!1){return!this.k$()&&!this.zQ()&&(this.JQ()&&this.qQ()?this.ctt():!this.JQ()&&!!(this.iK()||t||this.ttt())&&this.ftt())}ctt(){return this.QQ(!1),this.WZ.DJ(this),this.WZ.BJ(this),this.e6(),!0}ftt(){return this.QQ(!1),this.WZ.BJ(this),this.e6(),!0}V$(t=!1){this.k$()||(this.ZQ(t),this.WZ.UJ(this),this.iK()&&this.HJ())}lf(t=!0,e=!1){if(!this.k$()){if(!this.JQ()&&this.zQ())return this.WZ.VJ(this);var i;this.iK()||(this.V$(!0),this.kQ()?this.ett(0):this.ett(this.Y$()),i=this.qO(),this.stt(),e?this.dtt(i):this.htt(i,!1,!1,!0),t&&this.att(),this.ntt(),this.aJ&&t&&this.Dx().Ex())}}Ctt(){this.lf(!1,!0)}dtt(t){this.htt(t,!1,!1,!0,NaN,!1,!0)}zz(){if(!this.k$()){if(!this.Dx().mq()&&this.ptt())return!1;this.WZ.jJ(this),this.Dx().mq()||this.Ctt()}return!0}itt(){this.zJ(!0)}qJ(){this.zJ(!1,!0),this.$J(!1),this.kJ(!1)}zJ(t=!1,e=!1){if(!this.YJ()||e){if(t){this.uQ=!1,this.sQ=!0,this.cQ=!0,this.stt();for(var i of this.HZ)i.zJ()}else if(this.$J(!0),this.kJ(!1),this.jQ(),this.iK()){this.aQ=-1,this.QZ!==PING_PONG_BEGIN&&(this.ZZ=Math.abs(this.ZZ)),this.QZ=PING_PONG_BEGIN,this.tQ=1,this.rQ=!1,this.uQ=!1,this.sQ=!0,this.cQ=!0,this.kQ()?this.ett(0):this.ett(this.Y$()),this.stt();for(var s of this.HZ)s.zJ()}else{this.cQ=!0,this.uQ=!1,this.stt();for(var r of this.HZ)r.mtt()}this.ntt()}}JJ(){return this.aJ}stt(){this.mQ=0;for(var t of this.HZ)t.xM()&&(this.mQ=1)}ntt(){this.aJ=0;for(var t of this.HZ)t.vtt(),0===this.aJ&&1===t.JJ()&&(this.aJ=1),this.jZ||1!==t.Stt()||(this.jZ||(this.jZ=[]),this.XZ=this.jZ.push(t))}QJ(t,e,i){if(this.BQ()){if(0===t&&0===this.fQ)return;this.fQ=t,t=i}else{if(0===i&&0===this.fQ)return;t=this.fQ=i,e=1}var s=this.JZ+this.KZ,i=s+t*e*this.ZZ,r=this.VZ.gtt;i<0?(this.JZ=0,this.KZ=-i):r<=i?(this.JZ=r,this.KZ=this.JZ-i):(this.JZ=i,this.KZ=0);let h=!1,n=!1;t=this.z$(),e=this.K$();t||e?t&&!e?0<this.ZZ?this.JZ>=r&&(this.ott(0),n=!0):this.JZ<=0&&(this.ott(r),n=!0):!t&&e?0<this.ZZ?this.JZ>=r&&(this.ett(r),this.Z$(-1*this.Q$()),n=!0,this.QZ===PING_PONG_END?this.tQ<this.a$()?(this.tQ++,this.QZ=PING_PONG_BEGIN):h=!0:this.QZ===PING_PONG_BEGIN&&(this.QZ=PING_PONG_END)):this.JZ<=0&&(this.ett(0),this.Z$(-1*this.Q$()),n=!0,this.QZ===PING_PONG_END?this.tQ<this.a$()?(this.tQ++,this.QZ=PING_PONG_BEGIN):h=!0:this.QZ===PING_PONG_BEGIN&&(this.QZ=PING_PONG_END)):t&&e&&(0<this.ZZ?this.JZ>=r&&(this.ett(r),this.Z$(-1*this.Q$()),n=!0,this.QZ++,C33.wrap(this.QZ,0,2)):this.JZ<=0&&(this.ett(0),this.Z$(-1*this.Q$()),n=!0,this.QZ++,C33.wrap(this.QZ,0,2))):0<this.ZZ?this.JZ>=r&&(this.tQ<this.a$()?(this.tQ++,this.ott(0),n=!0):(this.ett(r),h=!0)):this.JZ<=0&&(this.tQ<this.a$()?(this.tQ++,this.ott(r),n=!0):(this.ett(0),h=!0));let a;var o=this.UZ;if(h){for(a=0;a<o;a++)this.HZ[a].Ttt();this.V$(!0),this.XQ()}else{var l=this.XZ;for(a=0;a<l;a++)this.jZ[a]._tt();if(1===this.mQ)for(a=0;a<o;a++){var u=this.HZ[a],c=u.Ett();this.JZ-c<0&&0<s-c?(this.JZ=c<0?0:r<=c?r:c,u.Bc(c,!0,!1,n,this.cQ,!1)):u.Bc(this.JZ,!0,!1,n,this.cQ,!1)}else for(a=0;a<o;a++)this.HZ[a].Bc(this.JZ,!0,!1,n,this.cQ,!1);for(a=0;a<l;a++)this.jZ[a].ytt();this.cQ&&(this.cQ=!1)}}htt(e,i=!1,s=!1,r=!1,h=NaN,t=!1,n=!1){for(var a of this.HZ)a._tt();for(var o of this.HZ){let t=e;var l,u;"number"!=typeof h||isNaN(h)||(l=this.qO()-o.Ett(),u=h-o.Ett(),l<0&&0<u&&(t=o.Ett(),this.ett(t))),o.Bc(t,i,s,r,this.cQ,n)}for(var c of this.HZ)c.ytt();this.cQ&&t&&(this.cQ=!1)}Att(){var t=this.VZ.yQ().Itt(),t=C33.AQ.W_(this,t);return this.UZ=this.HZ.push(t),t}gJ(){if(!this.k$())for(var t of this.HZ)t.Rtt()}hK(){for(var t of this.HZ)t.hK()}Mtt(){for(var t of this.HZ)t.wtt()}btt(t,e,i){if(e){var s;if("number"==typeof i&&0<=i)return(i=this.HZ[i])?(i.Ott(e),void this.WZ.IJ(e.tF(),this)):void 0;for(s of this.HZ)if(s.bQ())if(t){if(s.p6()===t){s.Ott(e),this.WZ.IJ(e.tF(),this);break}}else if(!s.Gtt()){s.Ott(e),this.WZ.IJ(e.tF(),this);break}}}bJ(t,e){for(var i of this.HZ)if(i.bQ())if(e){if(e===i.p6()&&t===i.c6())return!0}else if(t===i.c6())return!0;return!1}eK(){return this.HZ.some(t=>!t.bQ()||t.Ptt())}ptt(){return this.HZ.some(t=>!!t.bQ()&&!!t.Ptt()&&!!(t=t.tF())&&t.JH())}v6(t){for(var e of this.IK())for(var i of e.Ltt())if(i.xtt()===t)return i}Ntt(t){for(var e of this.HZ)if(t===e.c6())return e;return null}Dtt(t){let i=t?t.split(" "):[];var s,t=new Set(i.map(t=>t.toLowerCase().trim()));i=[...t.values()];for(s of this.IK())for(let e of s.Ftt())if(i.every(t=>e.Btt(t)))return e}RJ(){var t,e=[];for(t of this.IK())e.push(t.tF());return e.filter(t=>t)}sJ(){for(var t of this.IK())t.sJ()}NX(){return{tracksJson:this.$tt(),name:this.dh,playheadTime:this.qO(),playbackRate:this.ZZ,pingPongState:this.QZ,currentRepeatCount:this.tQ,isPlaying:this.eQ,isScheduled:this.iQ,initialStateSet:this.sQ,finishedTriggers:this.uQ,complete:this.rQ,released:this.hQ,markedForRemoval:this.nQ,completedTick:this.aQ,implicitPause:this.oQ,isTemplate:this.lQ,tags:this.dQ.join(" "),stringTags:this.CQ,tagsChanged:this.pQ,firstTick:this.cQ}}DX(t){t&&(this.ktt(t.tracksJson),this.dh=t.name,this.JZ=t.playheadTime,this.ZZ=t.playbackRate,this.QZ=t.pingPongState,this.tQ=t.currentRepeatCount,this.eQ=!!t.isPlaying,this.iQ=!!t.isScheduled,this.sQ=!!t.initialStateSet,this.uQ=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.rQ=!!t.complete,this.hQ=!!t.released,this.nQ=!!t.markedForRemoval,this.aQ=t.completedTick,this.oQ=!!t.implicitPause,this.lQ=!!t.isTemplate,this.dQ=t.tags.split(" "),this.CQ=t.stringTags,this.pQ=!!t.tagsChanged,this.cQ=!!t.firstTick)}$tt(){return this.HZ.map(t=>t.NX())}ktt(t){this.Mtt(),t.forEach((t,e)=>{this.HZ[e].DX(t)}),this.HZ.filter(t=>t.Ptt())}static UQ(t){var e=this.t6();return""===t?1===e.length&&""===e[0]:e.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static VQ(t){if(C33.Ws(t))return t.slice(0);if(C33.Rs(t))return t.split(" ");throw new Error("invalid tags")}Wtt(){return this.vQ||(this.vQ=C33.oh(self.h6,this)),this.vQ}}}{let C33=self.We,INSTANCE_TRACK=0,VALUE_TRACK=1,AUDIO_TRACK=2;C33.AQ=class Track extends C33.nh{constructor(t,e){super(),this.EK=t,this.Vtt=e,this.Htt=e.yQ(),this.Utt=NaN,this.jtt=NaN,this.Xtt=null,this.Ytt=null,this.qtt=!1,this.wM=0<e.Ett(),this.ztt=!1,this.Jtt=!1,this.Ktt=NaN,this.Ztt=null,this.Qtt=this.Vtt.eet().tet(),this.iet=[],this.ret(),this.het=0,this.aJ=0,this.net=0}static W_(t,e){return C33.oh(C33.AQ,t,e)}lh(){this.Qtt=null;for(var t of this.iet)t.lh();C33.Dn(this.iet),this.iet=null,this.EK=null,this.Xtt=null,this.Ytt=null,this.Vtt=null,this.Ztt=null}ret(){for(var t of this.Vtt.oet().aet())this.iet.push(C33.let.W_(this,t))}Rtt(){for(var t of this.iet)t.Rtt()}hK(){for(var t of this.iet)t.hK();this.Xtt=null,this.Ytt=null}uet(){return this.EK}Dx(){return this.EK.Dx()}Ftt(){return this.Qtt||(this.Qtt=this.Vtt.eet().tet()),this.Qtt}Ltt(){return this.iet}v6(e){for(let t=0;t<this.iet.length;t++){var i=this.iet[t];if(i.xtt()===e)return i}}cet(){this.Xtt||this.c6()}fet(){return!!this.Xtt&&!this.Xtt.Sk()}Ptt(){var t;return!!this.bQ()&&(t=this.det(),!!(t=this.Dx().hx(t)))&&!t.Sk()}tF(){if(this.bQ()){var t=this.Cet();if(-1!==t)return this.Dx().kH(t)}}pet(){return this.EK.IK().indexOf(this)}wtt(){this.Xtt=null,this.Utt=NaN,this.Ytt=null,this.jtt=NaN,this.qtt=!0}Gtt(){return!!this.Xtt}c6(){var t;if(!this.qtt)return this.Xtt&&this.fet()||(t=this.det(),this.Xtt=this.Dx().hx(t)),this.Xtt}Ott(t){if(this.qtt=!1,this.Xtt!==t){this.hK(),this.Xtt=t,this.jtt=t.tF().f4(),this.Utt=t.CF(),this.Ytt=t.Cx();for(var e of this.met()){var i=e.vet,s=e.Tet;switch(i._et()){case"instance-variable":s.Eet();var r=t.tF(),h=r.yet(e.name),n=r.Aet(h),r=r.Iet(h);n===e.name&&r===e.type&&s.Ret(h);break;case"behavior":var a,n=e.UB,r=this.tF(),h=t.tF(),o=s.XB(h);n&&o&&(a=n.qc(),r.Met(a),h.Met(a),s.Eet(),s.wet(o.SU()))}}}}*met(){for(var t of this.iet){var e=t.MQ(),i=this.tF(),s={vet:t,Tet:e};switch(t._et()){case"world-instance":s.property=t.xtt();break;case"instance-variable":var r=e.Eet();s.name=i.Aet(r),s.type=i.Iet(r);break;case"effect":var r=i.v5(),h=e.bet(r);s.Oet=h;break;case"behavior":h=e.XB(i);s.UB=h;break;case"plugin":s.XN=i.YN()}yield s}}Cx(){var t;return this.Ytt&&this.fet()||(t=this.c6())&&(this.Ytt=t.Cx()),this.Ytt}Get(){return this.Vtt}det(){return isNaN(this.Utt)?this.Vtt.det():this.Utt}Pet(t){this.Vtt.Pet(t)}LQ(){return this.Vtt.LQ()}xQ(t){this.Vtt.xQ(t)}BK(){return this.Vtt.BK()}p6(){return this.Vtt.p6()}Ett(){return this.Vtt.Ett()}Let(){return this.Vtt.Let()}xet(t){this.Vtt.xet(t)}NQ(t){this.Vtt.NQ(t)}u6(t){for(var e of this.Ftt())e.u6(t);for(var i of this.Ltt())i.u6(t)}Net(){return this.Vtt.Net()}Det(t){this.Vtt.Det(t)}Cet(){return isNaN(this.jtt)?this.Vtt.Cet():this.jtt}Fet(t){this.Vtt.Fet(t)}Bet(t){this.Vtt.Bet(t)}$et(){var t=this.c6();if(t&&t.NB().ket())return t.NB().$et();return this.Vtt.$et()}Wet(t){this.Vtt.Wet(t)}Vet(){var t=this.c6();if(t&&t.NB().ket())return t.NB().Vet();return this.Vtt.Vet()}HE(){return this.Vtt.HE()}qc(){return this.Vtt.qc()}bQ(){return this.HE()===INSTANCE_TRACK}Het(){return this.HE()===VALUE_TRACK}Uet(){return this.HE()===AUDIO_TRACK}jet(){return this.het}JJ(){return this.aJ}Stt(){return this.net}xM(){return this.wM}ltt(){for(var t of this.iet)t.ltt()}zJ(){if(this.cet(),this.fet()||!this.bQ()){var t,e=this.uet().kQ()?0:this.Let();for(t of this.iet)t.zJ(e),0===this.het&&1===t.jet()&&(this.het=1),0===this.aJ&&1===t.JJ()&&(this.aJ=1);this.net=0,this.iet.some(t=>t.Stt())&&(this.net=1),this.Ztt=this.Xet(e),this.ztt=!1,this.Jtt=!1,this.Bc(e),this.Yet(this.Xet(e))}}mtt(){if(this.cet(),this.fet()||!this.bQ()){this.EK.kQ();var t,e=this.EK.qO()-this.Ett();this.Ztt=this.Xet(e);for(t of this.iet)t.mtt(e)}}Ttt(){var t;this.uet().iK()||(this.cet(),!this.fet()&&this.bQ())||this.wM||(t=this.EK.qO(),this.Ett()+this.Let()<=t?this.Bc(this.Let(),!0,!1,!0,!1,!1,!0):t<=0&&this.Bc(0,!0,!1,!0,!1,!1,!0))}vtt(){for(let t=0,e=this.iet.length;t<e;t++){var i=this.iet[t];i.vtt(),0===this.het&&1===i.jet()&&(this.het=1),0===this.aJ&&1===i.JJ()&&(this.aJ=1)}}_tt(){var e=this.iet.length;for(let t=0;t<e;t++)this.iet[t]._tt()}Bc(i,t=!1,s=!1,r=!1,e=!1,h=!1,n=!1){this.Xtt||this.c6();var a=this.Xtt&&!this.Xtt.Sk(),o=this.Vtt.u3===INSTANCE_TRACK;if((a||!o)&&!(h&&o&&this.tF().JH()||(i-=this.Ett())<0)){this.qet(i,t),this.zet(i,t,e);for(let t=0,e=this.iet.length;t<e;t++)this.iet[t].Bc(i,s,r,n);this.Jet(i,t),0!==this.het&&(this.Ytt||(this.Ytt=this.Xtt.Cx()),this.Ytt)&&this.Ytt.f7()}}ytt(){var e=this.iet.length;for(let t=0;t<e;t++)this.iet[t].ytt()}qet(t,e){if(e&&this.wM&&!this.ztt){var i;if(this.uet().kQ()){if(t<0)return}else if(t>this.Let())return;for(i of this.iet)i.zJ();this.ztt=!0}}Jet(t,e){if(e&&(this.wM&&!this.Jtt))if(this.uet().kQ()){if(t>=this.Let()){for(var i of this.iet)i.Bc(this.Let(),!1,!0);this.Jtt=!0}}else if(t<=0){for(var s of this.iet)s.Bc(0,!1,!0);this.Jtt=!0}}zet(t,e,i){var s,r;i||e&&C33.Mq.Timeline&&(i=this.uet(),e=this.Ztt.bK(),r=this.Ztt.qO(),s=e?e.qO():i.Y$(),t<=r||s<=t)&&(this.Ztt=this.Htt.Ket(t,this.Vtt),i.kQ()?e&&this.Yet(this.Ztt):(r=this.Ztt.bK())&&this.Yet(r))}Xet(t){var e=this.Htt.Zet(t,this.Vtt);return e||this.Htt.Ket(t,this.Vtt)}Yet(t){var e,i;C33.Mq.Timeline&&(i=(e=this.uet()).IQ(),C33.Mq.Timeline.Iq.PushTriggerTimeline(e),C33.Mq.Timeline.Iq.PushTriggerKeyframe(t),i.FF(C33.Mq.Timeline.Iq.OnAnyKeyframeReached),i.FF(C33.Mq.Timeline.Iq.Yet),C33.Mq.Timeline.Iq.PopTriggerTimeline(e),C33.Mq.Timeline.Iq.PopTriggerKeyframe(t))}Qet(){return this.Vtt.eet().tit()}eit(){var t=this.Vtt.oet().iit(),t=C33.let.W_(this,t);return this.iet.push(t),t}sit(t){this.Vtt.eet().rit(t)}hit(t){for(var e of this.iet)e.hit(t)}nit(){for(var t of this.iet)t.nit()}ait(){if(this.cet(),this.fet()||!this.bQ())for(var t of this.iet)t.ait()}oit(){if(this.cet(),this.fet()||!this.bQ()){let t=!1;for(var e of this.iet){e=e.oit();!t&&e&&(t=!0)}var i;t&&((i=this.Qet()).j$(this.uet().qO()),i.u6("noease"),i.Det(!0),i.WQ(""))}}sJ(){isNaN(this.Ktt)||this.lit(this.Ktt),this.Ktt=NaN}NX(){var t=this.c6(),t=t?t.CF():this.det();return{propertyTracksJson:this.uit(),lastKeyframeDataItemJson:this.cit(),initialStateOfNestedSet:this.ztt,endStateOfNestedSet:this.Jtt,instanceUid:t,cleared:this.qtt}}DX(t){if(t){this.fit(t.propertyTracksJson),this.dit(t.lastKeyframeDataItemJson),this.Ktt=t.instanceUid,this.ztt=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.ztt=t.initialStateOfNestedSet),this.Jtt=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.Jtt=t.endStateOfNestedSet),this.qtt=!!t.hasOwnProperty("cleared")&&t.cleared;for(var e of this.iet)0===this.het&&1===e.jet()&&(this.het=1),0===this.aJ&&1===e.JJ()&&(this.aJ=1);this.net=0,this.iet.some(t=>t.Stt())&&(this.net=1)}}cit(){return this.Vtt.eet().Cit(this.Ztt)}uit(){return this.iet.map(t=>t.NX())}fit(t){t.forEach((t,e)=>{this.iet[e].DX(t)})}lit(t){C33.vs(t)&&(t=this.Dx().hx(t))&&this.uet().btt(this.Vtt.p6(),t,this.pet())}dit(t){var e=this.Vtt.eet();this.Ztt=e.pit(t)}}}{let C33=self.We;C33.let=class PropertyTrack extends C33.nh{constructor(t,e){super(),this.mit=t,this.vit=e,this.Sit=e.oet(),this.het=0,this.aJ=0,this.net=0,this.git=this.MQ(),this.Tit=this.vit.Eit()._it(),this.yit=null,this.Ait=null}static W_(t,e){return C33.oh(C33.let,t,e)}lh(){this.mit=null,this.git&&(this.git.lh(),this.git=null),this.Tit=null,this.vit=null,this.Sit=null}jet(){return this.het}JJ(){return this.aJ}Stt(){return this.net}Iit(){return!!this.Ait}Rit(t){this.Ait=t}Mit(){return this.Ait}wit(){return this.mit}bit(){return this.vit}oet(){return this.Sit}uet(){return this.mit.uet()}Dx(){return this.mit.Dx()}c6(){return this.mit.c6()}MQ(){if(!this.git){let t;switch(this.vit._et()){case"behavior":t=new C33.let.Oit(this);break;case"effect":t=new C33.let.Git(this),this.aJ=1;break;case"instance-variable":t=new C33.let.Pit(this);break;case"plugin":t=new C33.let.Lit(this),this.aJ=1;break;case"world-instance":t=new C33.let.xit(this),this.aJ=1,this.het=1;break;case"value":t=new C33.let.Nit(this);break;case"audio":t=new C33.let.Dit(this)}this.git=t}return this.git}_et(){return this.vit._et()}Fit(t){this.vit.Fit(t)}Bit(){return this.vit.$it()}kit(t){this.vit.Wit(t)}m6(){return this.MQ().Vit()}xtt(){return this.vit.Hit()}Uit(t){this.vit.jit(t)}Xit(){return this.vit.HE()}Yit(t){this.vit.qit(t)}zit(){return this.oet().Jit(this.vit).HE()}Kit(){return this.vit.Kit()}Zit(t){this.vit.Zit(t)}Qit(){return this.vit.Qit()}tst(t){this.vit.tst(t)}Net(){return this.vit.Net()}Det(t){this.vit.Det(t)}LQ(){return this.vit.LQ()}xQ(t){this.vit.xQ(t)}BK(){return this.vit.BK()}NQ(t){this.vit.NQ(t)}u6(t){for(var e of this.est())e.u6(t)}ist(){return this.vit.ist()}est(){return this.Tit||(this.Tit=this.vit.Eit()._it()),this.Tit}wK(){return this.vit.Eit().wK()}sst(t){return this.Sit.sst(t,this.vit)}rst(t){return this.Sit.rst(t,this.vit)}hst(t){let e=this.Sit.sst(t,this.vit),i;return i=e?this.Sit.nst(t,this.vit):(e=this.Sit.rst(t,this.vit),this.Sit.ast(t,this.vit)),{start:e,end:i}}*ost(){for(var t of this.est())yield t.jK()}*lst(){for(var t of this.est())yield t.qO()}Rtt(){this.MQ().Rtt()}hK(){this.MQ().hK()}ust(){return this.MQ().ust()}ltt(){this.MQ().ltt()}zJ(t){this.MQ().zJ(),this.yit=this.cst(t),this.vtt()}mtt(t){this.MQ().mtt(),this.yit=this.cst(t)}vtt(){var t,e,i,s=this.wit();this.net=0,s.bQ()&&(i=this.uet(),s=s.c6(),t=this.MQ(),e=this.xtt(),t.fst()?(i=i.RQ(s,t,e,this))&&i.length&&(this.net=1):this.net=0)}cst(t){var e=this.uet(),i=this.Sit.sst(t,this.vit);return i||(e.kQ()?this.Sit.rst(t,this.vit):this.Sit.ast(t,this.vit))}_tt(){this.git._tt()}Bc(t,e=!1,i=!1,s=!1){let r,h,n=!1;var a,o,l;(r=e?this.Sit.rst(t,this.vit):((!this.yit||(a=this.uet(),l=this.yit.bK(),o=this.yit.qO(),l=l?l.qO():a.Y$(),t<=o)||l<=t)&&(this.yit=this.Sit.rst(t,this.vit),n=!0),this.yit))&&(h=r.bK()),this.git.Bc(t,r,h,e,i,s,n)}dst(t){(!this.yit||(i=this.uet(),e=this.yit.bK(),s=this.yit.qO(),e=e?e.qO():i.Y$(),t<=s)||e<=t)&&(this.yit=this.Sit.rst(t,this.vit));var e,i=this.yit,s=i.bK();return this.git.dst(t,i,s)}Cst(t,e,i){return this.git.dst(t,e,i)}ytt(){this.git.ytt()}static pst(t,e){var i=e.bit();return e.Sit.rst(t,i)}static mst(t,e){var i=e.bit();return e.Sit.ast(t,i)}vst(){var t=this.vit.Eit().Sst();return this.yit=null,t}hit(t){this.yit=null,this.vit.Eit().gst(t)}nit(){this.MQ().nit()}ait(){var t,e;this.MQ().ait()&&(t=this.Sit.Jit(this.vit),e=this.MQ().ust(),t.Tst(e))}oit(){var t=this.MQ().oit();return t&&this._st(),this.MQ().Est(),t}_st(){var t=this.uet().qO(),e=this.MQ(),i=C33.let.pst(t,this),s=this.vst();s.qit(i.HE()),s.j$(t),s.u6(i.yst()),s.Det(!0),s.Ast(e.Ist()),s.Tst(e.ust())}NX(){return{sourceAdapterJson:this.MQ().NX()}}DX(t){t&&this.MQ().DX(t.sourceAdapterJson)}}}{let C33=self.We,NS=C33.let;NS.xit=class PropertySourceAdapter{constructor(t){this.Rst=t,this.Mst=null,this.wst()}lh(){this.Mst&&(this.Mst.lh(),this.Mst=null),this.Rst=null}fst(){return this.Mst.fst()}v6(){return this.Rst}Rtt(){this.Mst&&this.Mst.Rtt()}hK(){this.Mst&&this.Mst.hK()}wst(){return this.Mst||(this.Mst=this.bst()),this.Mst}Eet(){}f4(){return this.Eet()}Ost(){}ltt(){this.wst().ltt()}zJ(){this.wst().zJ()}mtt(){this.wst().mtt()}_tt(){this.Mst.Gst()}Bc(t,e,i,s,r,h,n){let a;switch(this.Rst.zit()){case"numeric":a=NS.Pst.Bc(t,e,i,this.Rst);break;case"angle":a=NS.Lst.Bc(t,e,i,this.Rst);break;case"boolean":a=NS.xst.Bc(t,e,i,this.Rst);break;case"color":a=NS.Nst.Bc(t,e,i,this.Rst);break;case"text":a=NS.Dst.Bc(t,e,i,this.Rst)}this.Mst.Fst(t,a,e,i,s,r,h,n)}dst(t,e,i){switch(this.Rst.zit()){case"numeric":return NS.Pst.Bc(t,e,i,this.Rst);case"angle":return NS.Lst.Bc(t,e,i,this.Rst);case"boolean":return NS.xst.Bc(t,e,i,this.Rst);case"color":return NS.Nst.Bc(t,e,i,this.Rst);case"text":return NS.Dst.Bc(t,e,i,this.Rst)}}ytt(){this.Mst.Bst()}nit(){this.wst().$st()}Est(){this.wst().Est()}ust(){return this.wst().ust()}ait(){return this.wst().ait()}oit(){return this.wst().oit()}Ist(){var t=this.Rst,e=t.wit().uet().qO(),i=NS.pst(e,t),s=i.bK();switch(t.zit()){case"numeric":return NS.Pst.Bc(e,i,s,t);case"angle":return NS.Lst.Bc(e,i,s,t);case"boolean":return NS.xst.Bc(e,i,s,t);case"color":return NS.Nst.Bc(e,i,s,t);case"text":return NS.Dst.Bc(e,i,s,t)}}bst(){var t=this.Rst;switch(t.ist()?t.zit():""){case"combo":case"boolean":case"text":case"string":return new NS.Wst.kst(this);case"numeric":case"number":case"angle":return new("combo"===this.Rst.Xit()?NS.Wst.kst:NS.Wst.Vst)(this);case"color":case"offsetColor":return new NS.Wst.Hst(this);default:return new NS.Wst.Vst(this)}}NX(){return{propertyAdapterJson:this.wst().NX()}}DX(t){t&&this.wst().DX(t.propertyAdapterJson)}}}{let C33=self.We,INDEX=0;class InstanceVariableSourceAdapter extends C33.let.xit{constructor(t){super(t),this.Ust=NaN}Eet(){return this.Rst.bit().$it()[INDEX]}f4(){return this.Ust||super.f4()}Ost(){return this.Rst.wit().c6()}Ret(t){this.Rst.bit().$it()[INDEX]!==t&&(this.Ust=t)}Bc(t,e,i,s,r,h,n){this.wst().jst(e.Vit())&&super.Bc(t,e,i,s,r,h,n)}dst(t,e,i){if(this.wst().jst(e.Vit()))return super.dst(t,e,i)}NX(){return Object.assign(super.NX(),{index:this.Ust})}DX(t){t&&(super.DX(t),this.Ust=t.index)}}C33.let.Pit=InstanceVariableSourceAdapter}{let C33=self.We,SID=0,INDEX=1,NAME=2;class BehaviorSourceAdapter extends C33.let.xit{constructor(t){super(t),this.kV=NaN}Eet(){return this.Rst.bit().$it()[INDEX]}Ost(){var t=this.Rst.bit(),e=this.Rst.wit(),t=this.kV||t.$it()[SID],e=e.c6(),t=e.Xst(t);return e.Yst()[t].NB()}XB(t){var e=this.Rst.bit().$it()[NAME];return t.qst(e)}wet(t){this.Rst.bit().$it()[SID]!==t&&(this.kV=t)}Bc(t,e,i,s,r,h,n){var a=this.Rst.wit().c6();this.XB(a.tF())&&super.Bc(t,e,i,s,r,h,n)}dst(t,e,i){var s=this.Rst.wit().c6();if(this.XB(s.tF()))return super.dst(t,e,i)}NX(){return Object.assign(super.NX(),{sid:this.kV})}DX(t){t&&(super.DX(t),this.kV=t.sid)}}C33.let.Oit=BehaviorSourceAdapter}{let C33=self.We,NAME=0,INDEX=1;class EffectSourceAdapter extends C33.let.xit{constructor(t){super(t)}Eet(){return this.Rst.bit().$it()[INDEX]}Ost(){var t=this.Rst.wit().Cx().u7(),e=t.v5(),e=this.bet(e).f4();return t.ZB(e)?t.zst(e):null}bet(t){var e=this.Rst.bit().$it()[NAME];return t.Jst(e)}Bc(t,e,i,s,r,h,n){this.Kst()&&super.Bc(t,e,i,s,r,h,n)}dst(t,e,i){if(this.Kst())return super.dst(t,e,i)}Kst(){var t=this.Rst.wit().Cx().u7(),e=t.v5(),e=this.bet(e);if(e)return e=e.f4(),t.ZB(e)}}C33.let.Git=EffectSourceAdapter}{let C33=self.We,INDEX=0;class PluginSourceAdapter extends C33.let.xit{constructor(t){super(t)}Eet(){return this.Rst.bit().$it()[INDEX]}Ost(){return this.Rst.wit().c6().NB()}Bc(t,e,i,s,r,h,n){var a=this.Rst.wit();a.tF().YN()===a.c6().tF().YN()&&super.Bc(t,e,i,s,r,h,n)}dst(t,e,i){var s=this.Rst.wit(),r=s.tF().YN(),s=s.c6().tF().YN();if(r===s)return super.dst(t,e,i)}Zst(){var t=this.Rst.wit().tF().YN();if(C33.Mq.Qst&&t instanceof C33.Mq.Qst&&("initial-frame"===this.Rst.xtt()||"initial-animation"===this.Rst.xtt()))switch(this.Rst.BK()){case"relative":case"absolute":return null}}}C33.let.Lit=PluginSourceAdapter}{let C33=self.We;class ValueSourceAdapter extends C33.let.xit{constructor(t){super(t),this.trt=0,this.ert=!1}fst(){return!1}zJ(){var t=this.Rst.oet(),e=this.Rst.bit(),e=t.Jit(e);this.trt=e.jK()}mtt(){}Vit(){return this.ert||this.Rst.Bc(0),this.trt}Bc(t,e,i,s,r,h,n){this.trt=C33.let.Pst.Bc(t,e,i,this.Rst),this.ert=!0}nit(){}Est(){}ust(){return this.trt}ait(){return!1}oit(){return!1}NX(){return{value:this.trt,init:this.ert}}DX(t){t&&(this.trt=t.value,this.ert=!t.hasOwnProperty("init")||t.init)}}C33.let.Nit=ValueSourceAdapter}{let C33=self.We,PROJECT_FILE=0,PROJECT_FILE_NAME=0,PROJECT_FILE_TYPE=1,START_OFFSET=1,AUDIO_DURATION=2,AUDIO_TAG=3;class AudioSourceAdapter extends C33.let.xit{constructor(t){super(t),this.irt=!1,this.srt=null,this.rrt=null,this.hrt=null,this.EK=this.Rst.uet(),this.mit=this.Rst.wit(),this.nrt=this.Rst.Bit(),this.art=this.nrt[PROJECT_FILE],this.ort=this.nrt[START_OFFSET],this.nrt[AUDIO_TAG]?this.lrt=this.nrt[AUDIO_TAG]:this.lrt=Math.random().toString(36).slice(2),this.urt=NaN,this.crt=NaN,this.frt=NaN,this.drt=null,this.Crt()}lh(){super.lh(),this.srt=null,this.rrt=null,this.hrt=null,this.EK=null,this.mit=null,this.nrt=null,this.art=null,this.drt=null}Crt(){var t;self.We.Mq.Audio&&((t=this.Rst.Dx().prt(self.We.Mq.Audio))&&(this.srt=t.UN().NB()),this.rrt=self.We.Mq.Audio.mrt,this.hrt=self.We.Mq.Audio.vrt)}Srt(){var t;this.drt||(t=this.Rst.wit().v6("audioSource"))&&(this.drt=t.MQ())}grt(){var t=this.Rst.wit().v6("volume");return(t?t.MQ():this).crt}Rtt(){super.Rtt(),this.irt=!1,this.srt&&(this.hrt&&(this.urt=this.hrt.PlaybackTime.call(this.srt,this.lrt),this.crt=this.hrt.Volume.call(this.srt,this.lrt)),this.rrt)&&this.rrt.V$.call(this.srt,this.lrt)}Trt(){return this.lrt}_rt(){return this.frt}Ert(t){this.frt=t}zJ(){super.zJ(),this.urt=NaN,this.irt=!1}mtt(){super.mtt();var t=this.Rst.uet().qO();switch(this.urt=t-this.ort,this.Rst.xtt()){case"audioSource":break;case"volume":this.crt=this.Rst.dst(t)}this.irt=!1}Bc(t,e,i,s,r,h,n){if(this.srt)switch(this.Rst.xtt()){case"audioSource":if(!this.EK.kQ())return;if(s)return void(this.rrt&&this.rrt.V$.call(this.srt,this.lrt));if(t<this.ort)return void(this.irt=!1);var a=this.hrt.yrt.call(this.srt,this.lrt),o=this.EK.Q$();if(o!==a&&this.rrt.Z$.call(this.srt,this.lrt,o),this.irt)return;if(!this.Rst.uet().IsPlaying())return;if(this.irt=!0,isNaN(this.urt)){a=self.performance.now(),o=t-this.ort;if("suspended"===this.srt.GetAudioContextState())return void(this.irt=!1);o=o+(self.performance.now()-a)/1e3;if(this.rrt){let t=this._rt();isNaN(t)?(this.Ert(0),t=0):this.Ert(t),this.rrt.PlayFromTimeline.call(this.srt,this.art,t,this.lrt,o)}}else{var a=this.urt,o=(this.urt=NaN,this.grt()),l=(this.crt=NaN,this.srt.GetAudioContextState());if("suspended"===l)return void(this.irt=!1);this.rrt&&(this.Ert(o),this.rrt.PlayFromTimeline.call(this.srt,this.art,o,this.lrt,a))}break;case"volume":this.Srt(),super.Bc(t,e,i,s,r,h,n)}}dst(t,e,i){if(this.srt)switch(this.Rst.xtt()){case"audioSource":return;case"volume":return this.Srt(),super.dst(t,e,i)}}Art(t,e){return this.drt?this.drt._rt():0}Irt(t,e,i,s){this.drt&&this.drt.Ert(this.Art()+e),this.rrt&&this.drt&&this.rrt.Ert.call(this.srt,this.drt.Trt(),this.drt._rt())}Rrt(t,e,i){this.drt&&this.drt.Ert(e),this.rrt&&this.drt&&this.rrt.Ert.call(this.srt,this.drt.Trt(),this.drt._rt())}Mrt(){return!0}NX(){return{audioPlaybackStarted:this.irt,audioTag:this.lrt,pauseTime:this.urt,pauseVolume:this.crt,volume:this.frt}}DX(t){t&&(this.irt=t.audioPlaybackStarted,this.lrt=t.audioTag,this.urt=t.pauseTime,this.crt=t.pauseVolume,this.frt=t.volume,this.Crt())}}C33.let.Dit=AudioSourceAdapter}{let C33=self.We;C33.let.Wst=class PropertyInterpolationAdapter{constructor(t){this.git=t,this.Rst=t.v6(),this.Ytt=this.Rst.wit().Cx(),this.wrt=this.Rst.xtt(),this.brt=!1,this.Ort=null,this.Grt=null}lh(){this.git=null,this.Rst=null,this.Ytt=null,this.Ort=null,this.Grt=null}fst(){return!1}Rtt(){}hK(){this.Ytt=null,this.Ort=null,this.Grt=null}MQ(){return this.git}v6(){return this.Rst}Cx(){return this.Ytt||(this.Ytt=this.Rst.wit().Cx()),this.Ytt}Prt(t){this.brt=!!t}Lrt(){return this.brt}ltt(){}zJ(){}mtt(){}$st(){this.Ort=this.ust()}Est(){this.Ort=null}ust(){}ait(){}oit(){}jst(t){return typeof this.xrt()==typeof t}Gst(){}Fst(t,e,i,s,r,h,n,a){}Bst(){}Nrt(){return this.Frt(()=>{var t=this.Rst.bit();return this.Rst.oet().Jit(t)},()=>{var t=this.Rst.bit();return this.Rst.oet().Brt(t)}).Drt()}$rt(){let s=this.Rst.uet().qO()-this.Rst.wit().Ett();return this.Frt(()=>{var t=this.Rst.bit();return this.Rst.oet().rst(s,t)},()=>{var t=this.Rst.bit(),e=this.Rst.oet(),i=e.ast(s,t);return i||e.Brt(t)}).Drt()}Frt(t,e){return(this.Rst.uet().kQ()?t:e)()}krt(t,e){return("relative"===this.Rst.BK()?t:e)()}Wrt(t,e){return(this.Lrt()?(this.Prt(!1),t):e)()}Vrt(t){}Hrt(){return this.git.f4()}Urt(){return this.Grt||(this.Grt=this.git.Ost()),this.Grt}jrt(t,e,i,s,r,h){switch(this.Rst._et()){case"behavior":return t();case"effect":return e();case"instance-variable":return i();case"plugin":return s();case"world-instance":return r();case"audio":return h()}}NX(){return{firstAbsoluteUpdate:this.brt,saveState:this.Ort}}DX(t){t&&(this.brt=t.firstAbsoluteUpdate,this.Ort=t.saveState)}Xrt(t,e=!1){var i,s=[];for(i of t){var r,h=i.wit().Ett();for(r of i.est())(!e||0!==r.qO())&&e||s.push({time:h+r.qO(),value:r.Drt()})}return s.sort((t,e)=>t.time-e.time)}Yrt(t,e,i){return this.qrt(e,i)}qrt(e,i){for(let t=i.length-1;0<=t;t--)if(i[t].time<=e)return i[t];return null}}}{let C33=self.We,TMP_COLORS_MAP=new Map,TMP_COLOR=[0,0,0];class ColorInterpolationAdapter extends C33.let.Wst{constructor(t){super(t)}ltt(){}zJ(){}mtt(){}ust(){var t=this.Rst._et(),e=this.Urt(),i=this.Hrt();switch(t){case"behavior":return this.zrt(e.Jrt(i));case"effect":return this.zrt(e[i]);case"plugin":return this.zrt(e.Jrt(i));case"world-instance":return this.zrt(this.xrt())}}ait(){var t=this.Nrt();return!this.Krt(t,this.xrt())}oit(){return!C33.Ts(this.Ort)&&!this.Krt(this.Ort,this.xrt())}Krt(t,e){return t=this.Zrt(t),e=this.Zrt(e),t.lo(e)}Nrt(){var t=super.Nrt();return this.Zrt(t)}$rt(){var t=super.$rt();return this.Zrt(t)}Vrt(t){}zrt(t){return(C33.tr(t,C33.$a)?t.toArray():t).slice(0,3)}Zrt(t){return C33.tr(t,C33.$a)?t:new C33.$a(t[0],t[1],t[2],1)}jst(t){return!0}fst(){return!0}Gst(){var t=this.Rst.uet(),e=this.Rst.c6(),i=this.Rst.MQ(),t=t.RQ(e,i,this.wrt,this.Rst);t&&1<t.length&&(TMP_COLORS_MAP.has(e)||TMP_COLORS_MAP.set(e,new Map),i=TMP_COLORS_MAP.get(e),t=this.Rst._et(),i.has(t)||i.set(t,new Map),(e=i.get(t)).has(this.wrt)||e.set(this.wrt,{Qrt:!1,color:new C33.$a(0,0,0,1)}))}tht(t,e,i){t=TMP_COLORS_MAP.get(t).get(e).get(i);return t.Qrt=!0,t.color}Fst(t,e,i,s,r,h,n,a){var o=this.Rst.uet(),l=this.Rst.wit(),u=this.Rst.c6(),c=this.Rst.MQ(),f=this.Rst._et(),d=this.wrt,c=o.RQ(u,c,d,this.Rst);c&&1<c.length?(d=this.Xrt(c,!0),(c=this.Yrt(o,o.qO(),d))&&(o=l.Ett(),0==(d=c.time-o)?this.tht(u,f,this.wrt).Xa(e[0],e[1],e[2]):d<0||(l=e[0],c=e[1],o=e[2],d=this.Rst.Bc(d,!1,!0),l=C33.$a.Vo(l,d[0]),c=C33.$a.Vo(c,d[1]),o=C33.$a.Vo(o,d[2]),this.tht(u,f,this.wrt).Xa(l,c,o)))):this.eht(e[0],e[1],e[2])}Bst(){var t,e,i,s,r,h=this.Rst.c6();TMP_COLORS_MAP.has(h)&&(t=TMP_COLORS_MAP.get(h),e=this.Rst._et(),t.has(e))&&(i=t.get(e)).has(this.wrt)&&(s=(r=i.get(this.wrt)).Qrt,r=r.color,s&&this.eht(r.Qa(),r.eo(),r.io()),0===i.size&&t.delete(e),0===t.size)&&TMP_COLORS_MAP.delete(h)}xrt(){var t=this.Rst._et(),e=this.Urt(),i=this.Hrt();switch(t){case"behavior":return this.Zrt(e.Jrt(i));case"effect":return e[i].clone();case"plugin":return this.Zrt(e.Jrt(i));case"world-instance":return this.Cx().R7().clone()}}eht(t,e,i){var s=this.Rst._et(),r=this.Urt(),h=this.Hrt();switch(s){case"behavior":TMP_COLOR[0]=t,TMP_COLOR[1]=e,TMP_COLOR[2]=i,r.iht(h,TMP_COLOR);break;case"effect":r[h].ja(t,e,i);break;case"plugin":TMP_COLOR[0]=t,TMP_COLOR[1]=e,TMP_COLOR[2]=i,r.iht(h,TMP_COLOR);break;case"world-instance":this.Cx().sht(t,e,i)}}NX(){}DX(t){}}C33.let.Wst.Hst=ColorInterpolationAdapter}{let C33=self.We,NS=C33.let;class NoInterpolationAdapter extends C33.let.Wst{constructor(t){super(t)}ltt(){}zJ(){}mtt(){}ust(){return this.xrt()}ait(){return this.Nrt()!==this.ust()}oit(){return!C33.Ts(this.Ort)&&this.Ort!==this.ust()}fst(){return!1}Fst(t,e,i,s,r,h,n,a){var o=this.Rst,l=o.wit(),u=o._et(),c=o.uet(),f=l.c6(),d=o.MQ(),C=this.wrt,f=c.RQ(f,d,C,o),t=(f&&1<f.length&&(d=this.Xrt(f),C=t+l.Ett(),f=this.Yrt(c,C,d))&&(e=f.value),o.zit());switch(t){case"numeric":if(NS.Pst.rht(this.Hrt(),this.Urt(),e,u))break;return;case"angle":if(NS.Lst.rht(this.Hrt(),this.Urt(),e,u))break;return;case"boolean":if(NS.xst.rht(this.Hrt(),this.Urt(),e,u))break;return;case"color":if(NS.Nst.rht(this.Hrt(),this.Urt(),e,u))break;return;case"text":if(!NS.Dst.rht(this.Hrt(),this.Urt(),e,u))return}this.eht(e)}xrt(){var t=this.Rst._et(),e=this.Urt(),i=this.Hrt();switch(t){case"behavior":return e.Jrt(i);case"effect":return e[i];case"instance-variable":return e.hht(i);case"plugin":return e.Jrt(i)}}eht(t){var e=this.Rst._et(),i=this.Urt(),s=this.Hrt();switch(e){case"behavior":i.iht(s,t);break;case"effect":i[s]=t;break;case"instance-variable":i.nht(s,t);break;case"plugin":i.iht(s,t)}}}C33.let.Wst.kst=NoInterpolationAdapter}{let C33=self.We,NS=C33.let.Wst,INSTANCE_FUNC_MAP=new Map,add2=(t,e,i,s,r,h=!1,n=null,a=null)=>{INSTANCE_FUNC_MAP.set(t,{aht:e,oht:i,lht:s,round:r,uht:h,init:n,reset:a})};add2("offsetX",(t,e,i,s)=>{"relative"===s.Rst.BK()?t.cht(e,i.uet().FQ()):t.cht(e)},(t,e)=>t.og(e),t=>t.ag(),!0),add2("offsetY",(t,e,i,s)=>{"relative"===s.Rst.BK()?t.fht(e,i.uet().FQ()):t.fht(e)},(t,e)=>t.fg(e),t=>t.ug(),!0),add2("offsetWidth",(e,t,s,h,i)=>{if(0!==t){var n="relative"===h.Rst.BK(),a=1===h.dht.HE();if((n||a)&&e.tB()&&e.aB()){if(isNaN(h.Cht)){var o=[];let t=e.W7();for(;t;)o.push(t),t=t.W7();o.reverse();let r=(t,e)=>e.uet().Ntt(t.c6());var l=(t,e)=>{var e=r(t,e);return e||(e=t.c6().NB()).ket()?e.$et():t.mht().pht()},u=(t,e,i,s=0)=>{var t=r(t,e);return t&&(e=t.v6(i))&&(t=e.bit().Eit())&&(i=t.Brt())?i.Vit():s};let i;if(a)i=o[o.length-1].tp();else{let e=o[0];n=e.mht().pht(),a=e.mht().vht();i=n*a,i=(i+=u(e,s,"offsetWidth"))+l(e,s)*u(e,s,"offsetScaleX");for(let t=1;t<o.length;t++){var c=(e=o[t]).mht().vht();i=(i=(i*=c)+u(e,s,"offsetWidth"))+l(e,s)*u(e,s,"offsetScaleX")}}h.Cht=0===i?Number.EPSILON:i}i||e.xp(t/h.Cht,!0)}else e.xp(t)}},(t,e)=>t.op(e),t=>t.tp(),!0),add2("offsetHeight",(e,t,s,r,i)=>{if(0!==t){var h="relative"===r.Rst.BK(),n=1===r.dht.HE();if((h||n)&&e.tB()&&e.lB()){if(isNaN(r.Cht)){var a=[];let t=e.W7();for(;t;)a.push(t),t=t.W7();a.reverse();var o=(t,e)=>{i=t;var i,e=e.uet().Ntt(i.c6());return e?e.Vet():(i=t.c6().NB()).ket()?i.Vet():t.mht().Sht()},l=(t,e,i,s=0)=>{var e=e.uet().Ntt(t.c6());return e&&(t=e.v6(i))&&(e=t.bit().Eit())&&(i=e.Brt())?i.Vit():s};let i;if(n)i=a[a.length-1].cp();else{let e=a[0];h=e.mht().Sht(),n=e.mht().ght();i=h*n,i=(i+=l(e,s,"offsetHeight"))+o(e,s)*l(e,s,"offsetScaleY");for(let t=1;t<a.length;t++){var u=(e=a[t]).mht().ght();i=(i=(i*=u)+l(e,s))+o(e,s)*l(e,s,"offsetScaleY")}}r.Cht=0===i?Number.EPSILON:i}i||e.Tht(t/r.Cht,!0)}else e.Tht(t)}},(t,e)=>t.ep(e),t=>t.cp(),!0),add2("offsetAngle",(t,e,i,s,r)=>{t._ht(e)},(t,e)=>t.A5(e),t=>t.I5(),!1,!0),add2("offsetOpacity",(t,e,i,s,r)=>{e/=s.Eht||1;var h=t.Sb(),h=h+e;0===s.yht?(1<h?s.yht+=h-1:h<0&&(s.yht+=h),t.Aht(e)):(h=t.Sb()+e,0<e&&0<s.yht?1<h&&(s.yht+=h-1):0<e&&s.yht<0?(s.yht+=e,0<s.yht&&(t.Aht(s.yht),s.yht=0)):e<0&&0<s.yht?(s.yht+=e,s.yht<0&&(t.Aht(s.yht),s.yht=0)):e<0&&s.yht<0&&h<0&&(s.yht+=h))},(t,e)=>{t.Tb(e)},t=>t.Sb(),!1,!0,(i,s,r)=>{switch(i.yht=0,i.Rst.BK()){case"relative":{i.Rst.oet();var t,h=i.Rst.bit().Eit()._it(),n=i.Cx().Sb();let e=n;for(t of h){var a=t.qO(),a=i.Rst.dst(a);e=n+a,e=C33.ph(e,0,1)}i.Iht=n-e,i.Iht=Math.round(100*(i.Iht+Number.EPSILON))/100,e=n;for(let t=h.length-1;0<=t;t--){var o=h[t].qO(),o=i.Rst.dst(o);e-=o,e=C33.ph(e,0,1)}i.Rht=e,i.Rht=Math.round(100*(i.Rht+Number.EPSILON))/100;break}}var e="relative"===i.Rst.BK(),l=1===i.dht.HE();if((e||l)&&s.tB()&&s.pB()){var u=[];let t=s.W7();for(;t;)u.push(t),t=t.W7();u.reverse();var c=(t,e,i)=>{var e=e.uet().Ntt(t.c6());return e&&(t=e.v6(i))&&(e=t.bit().Eit())&&(i=e.Brt())?i.Vit():0};let e=u[0].mht().Mht();e+=c(u[0],r,"offsetOpacity");for(let t=1;t<u.length;t++)e+=c(u[t],r,"offsetOpacity");i.Eht=0===e?1:e}},t=>{var e,i;"relative"===t.Rst.BK()&&(t.yht=0,i=(e=t.Cx()).Sb(),i=Math.round(100*(i+Number.EPSILON))/100,t.Rst.uet().kQ()?(e.Tb(i+t.Iht),t.By=0):(e.Tb(i-t.Rht),t.By=t.MQ().Ist()))}),add2("offsetOriginX",(t,e)=>t.wht(e),(t,e)=>t.bht(e),t=>t.y$(),!1),add2("offsetOriginY",(t,e)=>t.Oht(e),(t,e)=>t.Ght(e),t=>t.I$(),!1),add2("offsetZElevation",(t,e)=>t.Pht(e),(t,e)=>t.Cg(e),t=>t.dg(),!0),add2("offsetScaleX",(t,e,i,s)=>{var r,h;0!==e&&(r=t.tp()<0?-1:1,"relative"===s.Rst.BK()&&t.tB()&&t.aB()?(h=i.$et()*r*e,isNaN(s.Cht)&&INSTANCE_FUNC_MAP.get("offsetWidth").aht(t,1,i,s,!0),t.xp(h/s.Cht,!0)):t.xp(i.$et()*r*e))},(t,e,i)=>{t.op(i.$et()*e)},(e,i)=>{var s=e.tp()<0?-1:1;if(e.aB()){var r=e.W7(),h=i.uet().Ntt(r.c6());let t=NaN;return t=h?r.tp()/h.$et():(h=r.c6().NB()).ket()?r.tp()/h.$et():1,e.tp()*s/(i.$et()*t)}return e.tp()*s/i.$et()},!1),add2("offsetScaleY",(t,e,i,s)=>{var r,h;0!==e&&(r=t.cp()<0?-1:1,"relative"===s.Rst.BK()&&t.tB()&&t.lB()?(h=i.Vet()*r*e,isNaN(s.Cht)&&INSTANCE_FUNC_MAP.get("offsetHeight").aht(t,1,i,s,!0),t.Tht(h/s.Cht,!0)):t.Tht(i.Vet()*r*e))},(t,e,i)=>{t.ep(i.Vet()*e)},(e,i)=>{var s=e.cp()<0?-1:1;if(e.lB()){var r=e.W7(),h=i.uet().Ntt(r.c6());let t=NaN;return t=h?r.cp()/h.Vet():(h=r.c6().NB()).ket()?r.cp()/h.Vet():1,e.cp()*s/(i.Vet()*t)}return e.cp()*s/i.Vet()},!1);class NumericInterpolationAdapter extends C33.let.Wst{constructor(t){super(t),this.By=0,this.yht=0,this.Iht=0,this.Rht=0,this.Eht=NaN,this.Cht=NaN,this.Lht=void 0,this.xht=void 0,this.Nht=null,this.Dht=null,this.Fht=null,this.Bht=null,this.$ht=null,this.kht=null,this.Wht=null,this.Vht=null,this.Hht=!1,this.Uht=!1,C33.tr(this.Rst.uet(),C33.jht)?this.dht=new C33.let.Wst.Xht(this):this.dht=new C33.let.Wst.Yht(this);var e=this.Rst.xtt();switch(this.Rst._et()){case"world-instance":var i=INSTANCE_FUNC_MAP.get(e);this.Nht=i.lht,this.Dht=i.aht,this.Fht=i.oht,this.Hht=i.round,this.Uht=i.uht,this.$ht=i.init,this.Bht=i.reset;break;case"audio":this.kht=t.Art,this.Wht=t.Irt,this.Vht=t.Rrt,this.Hht=!!t.Mrt(),this.Uht=!1}}lh(){this.dht=null,this.Nht=null,this.Dht=null,this.Fht=null,this.Bht=null,this.$ht=null,this.kht=null,this.Wht=null,this.Vht=null,super.lh()}fst(){return this.dht.fst()}qht(){return this.By}zht(t){this.By=t}ltt(){this.Bht&&this.Bht(this)}zJ(){var t,e=this.dht.zJ();"number"==typeof e&&(this.By=e),this.$ht&&(e=this.Cx(),t=this.Rst.wit(),this.$ht(this,e,t))}mtt(){var t=this.dht.mtt();"number"==typeof t&&(this.By=t)}ust(){return this.xrt()}ait(){return this.Nrt()!==this.ust()}oit(){return!C33.Ts(this.Ort)&&this.Ort!==this.ust()}Gst(){this.dht.Gst()}Fst(t,e,i,s,r,h,n,a){return this.dht.Fst(t,e,i,s,r,h,n,a)}Bst(){this.dht.Bst()}xrt(){var t=this.Urt(),e=this.Hrt(),i=this.Cx(),s=this.Rst.wit();switch(this.Rst._et()){case"behavior":return t.Jrt(e);case"effect":return t[e];case"instance-variable":return t.hht(e);case"plugin":return t.Jrt(e);case"world-instance":return this.Nht(i,s);case"audio":return this.kht.call(this.MQ(),i,s)}}eht(t,e,i){var s=this.Urt(),r=this.Hrt(),h=this.Cx(),n=this.Rst.wit();switch(this.Rst._et()){case"behavior":s.Jht(r,t);break;case"effect":s[r]+=t;break;case"instance-variable":s.Kht(r,t);break;case"plugin":s.Jht(r,t,this.MQ().Zst());break;case"world-instance":this.Dht(h,t,n,this);break;case"audio":this.Wht.call(this.MQ(),h,t,n,this)}}Zht(t,e,i){var s=this.Rst.LQ();if("discrete"!==(s="default"===s?"continuous":s)||e){if("discrete"===s&&i){e=this.Rst.uet().qO();if(!this.Rst.sst(e))return}var r=this.Urt(),h=this.Hrt(),n=this.Cx(),a=this.Rst.wit();switch(this.Rst._et()){case"behavior":r.iht(h,t);break;case"effect":r[h]=t;break;case"instance-variable":r.nht(h,t);break;case"plugin":r.iht(h,t,this.MQ().Zst());break;case"world-instance":this.Fht(n,t,a);break;case"audio":this.Vht.call(this.MQ(),n,t,a)}}}Qht(t,e,i,s,r,h,n,a){this.dht.Qht(t,e,i,s,r,h,n,a)}tnt(t,e,i,s,r){var t=((t="angle"===this.Rst.Xit()?C33.gh(t):t).toString().split(".")[1]||"").length,h=this.xrt();let n;switch(n=0===t?this.Hht?Math.round(h):this.Uht?"angle"===this.Rst.Xit()?C33.Sh(Math.round(C33.gh(h))):Number(C33.toFixed(h,2)):h:this.Hht?Number(C33.toFixed(h,t)):(this.Uht,h),this.eht(n-h,e,i),this.Rst.xtt()){case"offsetWidth":case"offsetScaleX":var a=this.Cx(),o=a.tp(),l=Number(C33.toFixed(o,2));a.xp(l-o);break;case"offsetHeight":case"offsetScaleY":a=this.Cx(),l=a.cp(),o=Number(C33.toFixed(l,2));a.Tht(o-l)}}NX(){return Object.assign(super.NX(),{v:this.By,a:this.yht,fod:this.Iht,bod:this.Rht,of:this.Eht,sf:this.Cht,armorf:this.Lht,armandf:this.xht})}DX(t){t&&(super.DX(t),this.By=t.v,this.yht=t.a,this.Iht=C33.vs(t.fod)?t.fod:0,this.Rht=C33.vs(t.bod)?t.bod:0,this.Eht=C33.vs(t.of)?t.of:NaN,this.Cht=C33.vs(t.sf)?t.sf:NaN,this.Lht=C33.vs(t.armorf)?t.armorf:void 0,this.xht=C33.vs(t.armandf)?t.armandf:void 0)}}C33.let.Wst.Vst=NumericInterpolationAdapter}{let C33=self.We;class AbsoluteValueObject{constructor(t){this.ent=!1,this.trt=0,this.int=!1,this.snt=!1,this.iet=t;for(let t=0,e=this.iet.length;t<e;t++)this.iet[t].Rit(this)}Ltt(){return this.iet}rnt(){this.ent=!0}hnt(){return this.ent}Ast(t){this.trt=t}Vit(){return this.trt}nnt(t){this.int=t}ant(){return this.int}Ttt(t){this.snt=t}ont(){return this.snt}lf(){this.ent=!1,this.trt=0,this.int=!1,this.snt=!1}}class NumericInterpolationAdapterForTimeline{constructor(t){this.lnt=t}lh(){this.lnt=null}HE(){return 0}zJ(){let t=this.lnt;this.lnt.v6();return t.krt(()=>t.Frt(()=>0,()=>t.MQ().Ist()),()=>{})}mtt(){}fst(){this.lnt;switch(this.lnt.v6().BK()){case"relative":return!1;case"absolute":return!0}}Gst(){this.lnt;var t,e,i,s=this.lnt.v6(),r=s.xtt();switch(s.BK()){case"relative":break;case"absolute":s.Iit()?s.Mit().lf():(i=s.uet(),t=s.c6(),e=s.MQ(),(i=i.RQ(t,e,r,s))&&1<i.length&&new AbsoluteValueObject(i))}}Fst(t,e,i,s,r,h,n,a){var o=this.lnt,l=this.lnt.v6();switch(l.BK()){case"relative":var u=o.qht();o.eht(e-u,i,s),h&&this.Qht(t,i,s,r,u,e),o.zht(e);break;case"absolute":var u=l.uet(),c=l.wit();l.c6(),l.MQ();if(l.Iit()){var f=l.Mit(),d=f.Ltt(),d=o.Xrt(d,!0),u=o.Yrt(u,u.qO(),d);if(u){d=c.Ett(),c=u.time-d;if(0==c)f.Ttt(n),f.nnt(a),f.rnt(),f.Ast(f.Vit()+e);else{if(c<0)return;u=l.dst(c);f.Ttt(n),f.nnt(a),f.rnt(),f.Ast(f.Vit()+(e-u))}}}else o.Zht(e,a,n)}}Bst(){var t,e=this.lnt,i=this.lnt.v6();switch(i.BK()){case"relative":break;case"absolute":i.Iit()&&(t=i.Mit()).hnt()&&e.Zht(t.Vit(),t.ant(),t.ont())}}Qht(t,e,i,s,r,h){var n=this.lnt;s||(e&&t===e.qO()?n.tnt(e.jK(),e,i):i&&t===i.qO()?n.tnt(i.jK(),e,i):h-r==0&&n.tnt(e.jK(),e,i))}}C33.let.Wst.Yht=NumericInterpolationAdapterForTimeline}{let C33=self.We;class NumericInterpolationAdapterForTween{constructor(t){this.lnt=t}lh(){this.lnt=null}HE(){return 1}zJ(){var t=this.lnt;return t.Prt(!0),this.Vrt(t.Nrt())}mtt(){var t=this.lnt;if(t.Nrt()!==t.$rt())return t.Prt(!0),this.Vrt(t.$rt())}fst(){return!1}Gst(){}Fst(t,e,i,s,r,h,n,a){var o=this.lnt,l=o.qht();switch(o.v6().BK()){case"relative":o.eht(e-l,i,s),h&&this.Qht(t,i,s,r,l,e,!1,n);break;case"absolute":o.Lrt()?(o.Prt(!1),o.eht(l,i,s)):0===t&&0===o.v6().uet().Y$()?o.Zht(e,!0,!1):(o.eht(e-l,i,s),h&&this.Qht(t,i,s,r,l,e,this.unt(),n))}o.zht(e)}Bst(){}Vrt(t){return t-this.lnt.ust()}unt(){var t,e=this.lnt,i=e.Cx().c6();let s=0;for(t of e.v6().Dx().IQ().AJ())0===t.HE()?t.bJ(i)&&s++:1===t.HE()&&t.c6()===i&&s++;return s<=1}Qht(t,e,i,s,r,h,n,a){var o=this.lnt;s?e&&t===e.qO()?o.tnt(e.jK(),e,i,n,a):i&&t===i.qO()?o.tnt(i.jK(),e,i,n,a):i||o.tnt(e.jK(),e,i,n,a):e&&t===e.qO()?o.tnt(e.jK(),e,i,n,a):i&&t===i.qO()?o.tnt(i.jK(),e,i,n,a):h-r==0&&o.tnt(e.jK(),e,i,n,a)}}C33.let.Wst.Xht=NumericInterpolationAdapterForTween}{let C33=self.We,Ease=self.uc;C33.let.Pst=class NumericTypeAdapter{constructor(){}static rht(t,e,i,s){let r;switch(s){case"behavior":r=e.Jrt(t);break;case"effect":r=e[t];break;case"instance-variable":r=e.hht(t);break;case"plugin":r=e.Jrt(t)}return r!==i}static Bc(e,i,s,r){if(!s)return n=r.bit(),(n=r.oet().Brt(n)).jK();let h=r.LQ();if("default"===h&&(h="continuous"),"discrete"===(h="combo"===r.Xit()?"discrete":h))return i.jK();if("continuous"===h||"step"===h){var n=r.uet().GQ(),a=("step"===h&&0!==n&&(a=1/n,e=Math.floor(e*a)/a),i.jK()),o=s.jK(),l=i.HK("cubic-bezier"),u=s.HK("cubic-bezier"),c=l&&l.cnt()&&u&&u.fnt();if(!c&&a===o)return a;var f=i.qO(),s=s.qO(),n=("step"===h&&0!==n&&(e=C33.ph(e,f,s)),C33.normalize(e,f,s)),e=i.yst();let t;return t=c?(i=s-f,t=Ease.Mc(e)(i*n,0,1,i),Ease.Mc("cubicbezier")(t,a,a+l.qK(),o+u.KK(),o)):Ease.Mc(e)((s-f)*n,a,o-a,s-f),"integer"===r.Xit()?Math.floor(t):t}}}}{let C33=self.We;C33.let.Lst=class AngleTypeAdapter{constructor(){}static rht(t,e,i,s){let r;switch(s){case"behavior":r=e.Jrt(t);break;case"effect":r=e[t];break;case"instance-variable":r=e.hht(t);break;case"plugin":r=e.Jrt(t)}return r!==i}static Bc(t,e,i,s){if(!i)return h=s.bit(),(h=s.oet().Brt(h)).jK();let r=s.LQ();if("default"===r&&(r="continuous"),"discrete"===(r="combo"===s.Xit()?"discrete":r))return e.jK();if("continuous"===r||"step"===r){var h=s.uet().GQ(),s=("step"===r&&0!==h&&(s=1/h,t=Math.floor(t*s)/s),e.qO()),n=i.qO(),a=e.jK(),o=i.jK(),i=("step"===r&&0!==h&&(t=C33.ph(t,s,n)),e.HK("angle"));if(!i)return a===o?a:(h=C33.normalize(t,s,n),u=self.uc.Mc(e.yst()),C33.Rh(a,o,u(h,0,1,1)));var l=i.dnt();if(a===o&&0===l)return a;var u=C33.normalize(t,s,n),c=self.uc.Mc(e.yst())(u,0,1,1);switch(i.Cnt()){case"closest":return C33.Rh(a,o,c,l);case"clockwise":return C33.Mh(a,o,c,l);case"anti-clockwise":return C33.wh(a,o,c,l)}}}}}{let C33=self.We;C33.let.xst=class BooleanTypeAdapter{constructor(){}static rht(t,e,i,s){let r;switch(s){case"behavior":r=e.Jrt(t);break;case"effect":r=e[t];break;case"instance-variable":r=e.hht(t);break;case"plugin":r=e.Jrt(t)}return!!r!=!!i}static Bc(t,e,i,s){return i?e.jK()?1:0:(i=s.bit(),(i=s.oet().Brt(i)).jK()?1:0)}}}{let C33=self.We,TEMP_COLOR_ARRAY=[0,0,0],TEMP_COLOR_ARRAY_2=[0,0,0],TEMP_COLOR_ARRAY_3=[0,0,0];C33.let.Nst=class ColorTypeAdapter{constructor(){}static rht(t,e,i,s){let r;switch(s){case"behavior":r=e.Jrt(t);break;case"effect":r=e[t];break;case"instance-variable":r=e.hht(t);break;case"plugin":r=e.Jrt(t)}return Array.isArray(i)?(TEMP_COLOR_ARRAY[0]=i[0],TEMP_COLOR_ARRAY[1]=i[1],TEMP_COLOR_ARRAY[2]=i[2]):(TEMP_COLOR_ARRAY_3.Io(i),TEMP_COLOR_ARRAY[0]=Math.floor(255*TEMP_COLOR_ARRAY_3.Qa()),TEMP_COLOR_ARRAY[1]=Math.floor(255*TEMP_COLOR_ARRAY_3.eo()),TEMP_COLOR_ARRAY[2]=Math.floor(255*TEMP_COLOR_ARRAY_3.io())),Array.isArray(r)?(TEMP_COLOR_ARRAY_2[0]=r[0],TEMP_COLOR_ARRAY_2[1]=r[1],TEMP_COLOR_ARRAY_2[2]=r[2]):(TEMP_COLOR_ARRAY_3.Io(r),TEMP_COLOR_ARRAY_2[0]=Math.floor(255*TEMP_COLOR_ARRAY_3.Qa()),TEMP_COLOR_ARRAY_2[1]=Math.floor(255*TEMP_COLOR_ARRAY_3.eo()),TEMP_COLOR_ARRAY_2[2]=Math.floor(255*TEMP_COLOR_ARRAY_3.io())),TEMP_COLOR_ARRAY[0]!==TEMP_COLOR_ARRAY_2[0]||TEMP_COLOR_ARRAY[1]!==TEMP_COLOR_ARRAY_2[1]||TEMP_COLOR_ARRAY[2]!==TEMP_COLOR_ARRAY_2[2]}static Bc(t,e,i,s){var r,h,n,a,o,l;if(!i)return r=s.bit(),r=(r=s.oet().Brt(r)).jK(),TEMP_COLOR_ARRAY[0]=r[0],TEMP_COLOR_ARRAY[1]=r[1],TEMP_COLOR_ARRAY[2]=r[2],TEMP_COLOR_ARRAY;let u=s.LQ();return"discrete"===(u="default"===u?"continuous":u)?(r=e.jK(),TEMP_COLOR_ARRAY[0]=r[0],TEMP_COLOR_ARRAY[1]=r[1],TEMP_COLOR_ARRAY[2]=r[2],TEMP_COLOR_ARRAY):"continuous"===u||"step"===u?(r=s.uet().GQ(),"step"===u&&0!==r&&(s=1/r,t=Math.floor(t*s)/s),s=e.qO(),l=i.qO(),n=e.jK(),i=i.jK(),"step"===u&&0!==r&&(t=C33.ph(t,s,l)),r=C33.normalize(t,s,l),t=e.yst(),e=n[0],h=n[1],n=n[2],a=i[0],o=i[1],i=i[2],t=self.uc.Mc(t),s=(l=l-s)*r,TEMP_COLOR_ARRAY[0]=e===a?e:t(s,e,a-e,l),TEMP_COLOR_ARRAY[1]=h===o?h:t(s,h,o-h,l),TEMP_COLOR_ARRAY[2]=n===i?n:t(s,n,i-n,l),TEMP_COLOR_ARRAY):void 0}}}{let C33=self.We;C33.let.Dst=class TextTypeAdapter{constructor(){}static rht(t,e,i,s){let r;switch(s){case"behavior":r=e.Jrt(t);break;case"effect":r=e[t];break;case"instance-variable":r=e.hht(t);break;case"plugin":r=e.Jrt(t)}return r!==i}static Bc(t,e,i,s){return(i?e:(i=s.bit(),i=s.oet().Brt(i))).jK()}}}{let C33=self.We;C33.Gz=class TimelineDataManager{constructor(){this.pnt=new Map}lh(){for(var t of this.pnt.values())t.lh();this.pnt.clear(),this.pnt=null}ac(t){var t=new C33.mnt(t),e=t.qc();this.pnt.set(e,t)}ni(t){return this.pnt.get(t)}SQ(){return 0}static vnt(t,e,i,s){if(e)for(var r of e)C33.Gz.Snt("create",r,t,i,s)}static gnt(t,e,i,s){if(e)for(var r of e)C33.Gz.Snt("create-including-disabled",r,t,i,s)}static Tnt(i,t,e,s){i.length?t.forEach((t,e)=>{i[e].DX(t)}):t.forEach(t=>{C33.Gz.Snt("load",t,i,e,s)})}static Snt(t,e,i,s,r){let h;if("function"==typeof s)switch(t){case"load":h=new s(null,r);break;case"create":case"create-including-disabled":h=new s(e,r)}else if("object"==typeof s){var n=e[s.prop],a=s.map.get(n);switch(t){case"load":h=new a(null,r);break;case"create":case"create-including-disabled":h=new a(e,r)}}switch(t){case"load":h.DX(e),i.push(h);break;case"create":if("function"==typeof h.Net&&!h.Net())return h.lh();i.push(h);break;case"create-including-disabled":i.push(h)}}}}{let C33=self.We,NAME=0,TOTAL_TIME=1,STEP=2,INTERPOLATION_MODE=3,RESULT_MODE=4,TRACKS=5,LOOP=6,PING_PONG=7,REPEAT_COUNT=8,START_ON_LAYOUT=9,TRANSFORM_WITH_SCENE_GRAPH=10,USE_SYSTEM_TIMESCALE=11;C33.mnt=class TimelineDataItem{constructor(t){this.dh="",this.gtt=NaN,this._nt=0,this.Ent="default",this.ynt="default",this.Ant=!1,this.Int=!1,this.Rnt=1,this.Htt=null,this.Mnt="",this.wnt=!1,this.bnt=!0,t&&(this.dh=t[NAME],this.gtt=t[TOTAL_TIME],this._nt=t[STEP],this.Ent=t[INTERPOLATION_MODE],this.ynt=t[RESULT_MODE],this.Ant=!!t[LOOP],this.Int=!!t[PING_PONG],this.Rnt=t[REPEAT_COUNT],this.Mnt=t[START_ON_LAYOUT],this.wnt=!!t[TRANSFORM_WITH_SCENE_GRAPH],this.bnt=!!t[USE_SYSTEM_TIMESCALE],this.Htt=new C33.Ont(t[TRACKS],this))}lh(){this.Htt.lh(),this.Htt=null}yQ(){return this.Htt||(this.Htt=new C33.Ont(null,this)),this.Htt}qc(){return this.dh}s8(t){this.dh=t}Y$(){return this.gtt}X$(t){this.gtt=t}GQ(){return this._nt}PQ(t){this._nt=t}LQ(){return this.Ent}xQ(t){this.Ent=t}BK(){return this.ynt}NQ(t){this.ynt=t}z$(){return this.Ant}q$(t){this.Ant=t}K$(){return this.Int}J$(t){this.Int=t}a$(){return this.Rnt}DQ(t){this.Rnt=t}nK(){return this.Mnt}FQ(){return this.wnt}BQ(){return this.bnt}NX(){return{trackDataJson:this.Htt.NX(),name:this.dh,totalTime:this.gtt,step:this._nt,interpolationMode:this.Ent,resultMode:this.ynt,loop:this.Ant,pingPong:this.Int,repeatCount:this.Rnt,startOnLayout:this.Mnt,transformWithSceneGraph:!!this.wnt,useSystemTimescale:this.bnt}}DX(t){t&&(this.yQ().DX(t.trackDataJson),this.dh=t.name,this.gtt=t.totalTime,this._nt=t.step,this.Ent=t.interpolationMode,this.ynt=t.resultMode,this.Ant=t.loop,this.Int=t.pingPong,this.Rnt=t.repeatCount,this.Mnt=t.startOnLayout,this.wnt=!!t.transformWithSceneGraph,this.bnt=!!t.useSystemTimescale)}}}{let C33=self.We,WI_DATA=0,OC_INDEX=1,WI_UID=2,INTERPOLATION_MODE=1,RESULT_MODE=2,ENABLED=3,KEYFRAMES=4,PROPERTY_TRACKS=5,ID=6,NESTED_DATA=7,START_OFFSET=0,LOCAL_TOTAL_TIME=1,WI_ADDITIONAL_DATA=8,ORIGINAL_WIDTH=0,ORIGINAL_HEIGHT=1,TRACK_TYPE=9,TRACK_NAME=10;class TrackDataItem{constructor(t,e){this.Htt=e,this.Gnt=null,this.Pnt=null,this.Utt=NaN,this.jtt=NaN,this.Ent="default",this.ynt="default",this.xu=!1,this.Lnt=null,this.Sit=null,this.r3="",this.xnt=null,this.Nnt=0,this.Dnt=this.Htt.OQ().Y$(),this.u3=0,this.dh="",t&&(t[WI_DATA]&&(this.Gnt=t[WI_DATA],this.Utt=t[WI_DATA][WI_UID],this.jtt=t[WI_DATA][OC_INDEX]),this.Ent=t[INTERPOLATION_MODE],this.ynt=t[RESULT_MODE],this.xu=!!t[ENABLED],t[ID]&&(this.r3=t[ID]),t[NESTED_DATA]&&(this.xnt=t[NESTED_DATA],this.Nnt=t[NESTED_DATA][START_OFFSET],this.Dnt=t[NESTED_DATA][LOCAL_TOTAL_TIME]),t[WI_ADDITIONAL_DATA]&&(this.Pnt=t[WI_ADDITIONAL_DATA]),t[WI_ADDITIONAL_DATA]&&(this.Pnt=t[WI_ADDITIONAL_DATA]),t[TRACK_TYPE]&&(this.u3=t[TRACK_TYPE]),t[TRACK_NAME]&&(this.dh=t[TRACK_NAME]),this.Lnt=new C33.Fnt(t[KEYFRAMES],this),this.Sit=new C33.Bnt(t[PROPERTY_TRACKS],this))}lh(){this.Gnt=null,this.Htt=null,this.Lnt&&(this.Lnt.lh(),this.Lnt=null),this.Sit&&(this.Sit.lh(),this.Sit=null),this.xnt=null}yQ(){return this.Htt}eet(){return this.Lnt||(this.Lnt=new C33.Fnt(null,this)),this.Lnt}oet(){return this.Sit||(this.Sit=new C33.Bnt(null,this)),this.Sit}$nt(){return this.Gnt}Cet(){return this.jtt}Fet(t){this.jtt=t}det(){return this.Utt}Pet(t){this.Utt=t}LQ(){return this.Ent}xQ(t){this.Ent=t}BK(){return this.ynt}NQ(t){this.ynt=t}Net(){return this.xu}Det(t){this.xu=!!t}p6(){return this.r3}Ett(){return this.Nnt}Let(){return this.Dnt}xet(t){this.Dnt=t}$et(){return this.Pnt[ORIGINAL_WIDTH]}Bet(t){this.Pnt||(this.Pnt=[]),this.Pnt[ORIGINAL_WIDTH]=t}Vet(){return this.Pnt||(this.Pnt=[]),this.Pnt[ORIGINAL_HEIGHT]}Wet(t){this.Pnt||(this.Pnt=[]),this.Pnt[ORIGINAL_HEIGHT]=t}HE(){return this.u3}qc(){return this.dh}NX(){return{keyframeDataJson:this.Lnt.NX(),propertyTrackDataJson:this.Sit.NX(),instanceData:this.Gnt,additionalInstanceData:this.Pnt,instanceUid:this.Utt,objectClassIndex:this.jtt,interpolationMode:this.Ent,resultMode:this.ynt,enabled:this.xu,id:this.r3,nestedData:this.xnt,type:this.u3,name:this.dh}}DX(t){t&&(this.Gnt=t.instanceData,this.Utt=t.instanceUid,this.jtt=t.objectClassIndex,this.Ent=t.interpolationMode,this.ynt=t.resultMode,this.xu=t.enabled,this.r3=t.id,this.u3=t.type||0,this.dh=t.name||"",this.Dnt=this.Htt.OQ().Y$(),t.nestedData&&(this.xnt=t.nestedData,this.Nnt=this.xnt[START_OFFSET],this.Dnt=this.xnt[LOCAL_TOTAL_TIME]),t.additionalInstanceData&&(this.Pnt=t.additionalInstanceData),this.eet().DX(t.keyframeDataJson),this.oet().DX(t.propertyTrackDataJson))}}C33.Ont=class TrackData{constructor(t,e){this.VZ=e,this.knt=[],C33.Gz.vnt(this.knt,t,TrackDataItem,this)}lh(){this.VZ=null;for(var t of this.knt)t.lh();C33.Dn(this.knt),this.knt=null}OQ(){return this.VZ}Itt(){var t=new TrackDataItem(null,this);return this.knt.push(t),t}Wnt(t){return t.eet().tet()[0]}Vnt(t){return t.eet().tet().at(-1)}Zet(e,t){var i=t.eet().tet(),s=i.length;for(let t=0;t<s;t++){var r=i[t];if(r.qO()===e)return r}}Hnt(e,t){var i=t.eet().tet(),s=i.length;for(let t=0;t<s;t++){var r=i[t];if(r.qO()>e)return r}}Unt(e,t){var i=t.eet().tet(),s=i.length;for(let t=0;t<s;t++){var r=i[t];if(r.qO()>=e)return r}}Ket(e,t){var i=t.eet().tet();for(let t=i.length-1;0<=t;t--){var s=i[t];if(s.qO()<=e)return s}}*EQ(){for(var t of this.knt)yield t}NX(){return{trackDataItemsJson:this.knt.map(t=>t.NX())}}DX(t){t&&C33.Gz.Tnt(this.knt,t.trackDataItemsJson,TrackDataItem,this)}}}{let C33=self.We,SOURCE_DATA=0,SOURCE=0,PROPERTY=1,TYPE=2,MIN=3,MAX=4,INTERPOLATION_MODE=5,RESULT_MODE=6,ENABLED=7,PROPERTY_KEYFRAMES=8,CAN_HAVE_PROPERTY_KEYFRAMES=9;class PropertyTrackDataItem{constructor(t,e){this.Sit=e,this.jnt="",this.Xnt=null,this.wrt=null,this.u3=null,this.Ynt=NaN,this.qnt=NaN,this.Ent="default",this.ynt="default",this.xu=!1,this.znt=null,this.Jnt=!0,t&&(this.jnt=t[SOURCE_DATA][SOURCE],this.Xnt=t[SOURCE_DATA].slice(1),this.wrt=t[PROPERTY],this.u3=t[TYPE],this.Ynt=t[MIN],this.qnt=t[MAX],this.Ent=t[INTERPOLATION_MODE],this.ynt=t[RESULT_MODE],this.xu=!!t[ENABLED],this.znt=new C33.Knt(t[PROPERTY_KEYFRAMES],this),this.Jnt=t[CAN_HAVE_PROPERTY_KEYFRAMES])}lh(){this.znt.lh(),this.znt=null,this.Sit=null,this.Xnt=null}oet(){return this.Sit}Eit(){return this.znt||(this.znt=new C33.Knt(null,this)),this.znt}_et(){return this.jnt}Fit(t){this.jnt=t}$it(){return this.Xnt}Wit(t){this.Xnt=t}Hit(){return this.wrt}jit(t){this.wrt=t}HE(){return this.u3}qit(t){this.u3=t}Kit(){return this.Ynt}Zit(t){this.Ynt=t}Qit(){return this.qnt}tst(t){this.qnt=t}LQ(){return this.Ent}xQ(t){this.Ent=t}BK(){return this.ynt}NQ(t){this.ynt=t}Net(){return this.xu}Det(t){this.xu=!!t}ist(){return!!this.Jnt}NX(){return{propertyKeyframeDataJson:this.znt.NX(),sourceAdapterId:this.jnt,sourceAdapterArguments:this.Xnt,property:this.wrt,type:this.u3,min:this.Ynt,max:this.qnt,interpolationMode:this.Ent,resultMode:this.ynt,enabled:this.xu,canHavePropertyKeyframes:this.Jnt}}DX(t){t&&(this.jnt=t.sourceAdapterId,this.Xnt=t.sourceAdapterArguments,this.wrt=t.property,this.u3=t.type,this.Ynt=t.min,this.qnt=t.max,this.Ent=t.interpolationMode,this.ynt=t.resultMode,this.xu=t.enabled,this.Jnt=t.canHavePropertyKeyframes,this.Eit().DX(t.propertyKeyframeDataJson))}}C33.Bnt=class PropertyTrackData{constructor(t,e){this.Vtt=e,this.Znt=[],C33.Gz.vnt(this.Znt,t,PropertyTrackDataItem,this)}lh(){this.Vtt=null;for(var t of this.Znt)t.lh();C33.Dn(this.Znt),this.Znt=null}Get(){return this.Vtt}iit(){var t=new PropertyTrackDataItem(null,this);return this.Znt.push(t),t}Jit(t){return t.Eit()._it()[0]}Brt(t){return t.Eit()._it().at(-1)}sst(e,t){var i=t.Eit()._it(),s=i.length;for(let t=0;t<s;t++){var r=i[t];if(r.qO()===e)return r}}nst(e,t){var i=t.Eit()._it(),s=i.length;for(let t=0;t<s;t++){var r=i[t];if(r.qO()>e)return r}}ast(e,t){var i=t.Eit()._it(),s=i.length;for(let t=0;t<s;t++){var r=i[t];if(r.qO()>=e)return r}}rst(e,t){var i=t.Eit()._it();for(let t=i.length-1;0<=t;t--){var s=i[t];if(s.qO()<=e)return s}}*aet(){for(var t of this.Znt)yield t}NX(){return{propertyTrackDataItemsJson:this.Znt.map(t=>t.NX())}}DX(t){t&&C33.Gz.Tnt(this.Znt,t.propertyTrackDataItemsJson,PropertyTrackDataItem,this)}}}{let C33=self.We,TIME=0,EASE=1,ENABLE=2,TAGS=3;class KeyframeDataItem{constructor(t,e){this.Lnt=e,this.jG=-1,this.Qnt="noease",this.tat=!1,this.dQ=null,this.eat=null,t&&(this.jG=t[TIME],this.Qnt=t[EASE],this.tat=!!t[ENABLE],e=t[TAGS],this.dQ=e?e.split(" "):[],this.eat=new Set(this.dQ.map(t=>t.toLowerCase())),this.iat=null)}lh(){this.Lnt=null,C33.Dn(this.dQ),this.dQ=null,this.eat.clear(),this.eat=null,this.iat=null}eet(){return this.Lnt}bK(){return this.iat}sat(t){this.iat=t}qO(){return this.jG}j$(t){this.jG=t,this.Lnt.rat()}yst(){return this.Qnt}u6(t){this.Qnt=t}Net(){return this.tat}Det(t){this.tat=!!t}t6(){return this.dQ}WQ(t){this.dQ=t?t.split(" "):[],this.eat=new Set(this.dQ.map(t=>t.toLowerCase()))}hat(){return this.eat}Btt(t){return this.eat.has(t.toLowerCase())}NX(){return{time:this.jG,ease:this.Qnt,enable:this.tat,tags:this.dQ}}DX(t){t&&(this.jG=t.time,this.Qnt=t.ease,this.tat=t.enable,this.dQ=t.tags,this.eat=new Set(this.dQ.map(t=>t.toLowerCase())))}}C33.Fnt=class KeyframeData{constructor(t,e){this.Vtt=e,this.Qtt=[],C33.Gz.vnt(this.Qtt,t,KeyframeDataItem,this),this.rat()}lh(){this.Vtt=null;for(var t of this.Qtt)t.lh();C33.Dn(this.Qtt),this.Qtt=null}rat(){this.Qtt.sort((t,e)=>t.qO()-e.qO());for(let t=0;t<this.Qtt.length;t++)this.Qtt[t].sat(this.Qtt[t+1])}Get(){return this.Vtt}nat(){return this.Qtt.length}tet(){return this.Qtt}tit(){var t=new KeyframeDataItem(null,this);return this.Qtt.push(t),this.rat(),t}rit(t){for(var e of this.Qtt){var i;t(e)&&-1!==(i=this.Qtt.indexOf(e))&&(e.lh(),this.Qtt.splice(i,1))}this.aat(),this.rat()}aat(){this.Qtt.sort((t,e)=>t.qO()-e.qO())}Cit(t){return this.Qtt.indexOf(t)}pit(t){return this.Qtt[t]}*oat(){for(var t of this.Qtt)yield t}*lat(){for(let t=this.Qtt.length-1;0<=t;t--)yield this.Qtt[t]}NX(){return{keyframeDataItemsJson:this.Qtt.map(t=>t.NX())}}DX(t){t&&(C33.Gz.Tnt(this.Qtt,t.keyframeDataItemsJson,KeyframeDataItem,this),this.rat())}}}{let C33=self.We,VALUE_DATA=0,VALUE_DATA_VALUE=0,VALUE_DATA_ABSOLUTE_VALUE=1,VALUE_DATA_TYPE=2,TIME=1,EASE=2,ENABLE=3,ADDONS=4,PATH_MODE=5;class PropertyKeyframeDataItem{constructor(t,e){this.znt=e,this.trt=null,this.uat=null,this.u3="",this.jG=NaN,this.Qnt="noease",this.tat=!1,this.cat=null,this.fat=void 0,this.dat="line",t&&(this.trt=t[VALUE_DATA][VALUE_DATA_VALUE],this.uat=t[VALUE_DATA][VALUE_DATA_ABSOLUTE_VALUE],this.u3=t[VALUE_DATA][VALUE_DATA_TYPE],this.jG=t[TIME],this.Qnt=t[EASE],this.tat=!!t[ENABLE],this.dat=t[PATH_MODE],this.cat=null,t[ADDONS]&&(this.cat=new C33.Cat(t[ADDONS],this)),this.iat=null,this.pat=null)}lh(){this.znt=null,this.cat&&(this.cat.lh(),this.cat=null),this.iat=null,this.pat=null}mat(){return this.cat}sat(t){this.iat=t}bK(){return this.iat}vat(t){this.pat=t}GK(){return this.pat}Vit(){return this.trt}Ast(t){"color"===this.u3&&C33.vs(t)?(this.trt[0]=C33.Uh(t),this.trt[1]=C33.jh(t),this.trt[2]=C33.Xh(t)):this.trt=t}Drt(){return this.uat}Tst(t){"color"===this.u3&&C33.vs(t)?(this.uat[0]=C33.Uh(t),this.uat[1]=C33.jh(t),this.uat[2]=C33.Xh(t)):this.uat=t}jK(){var t=this.znt.bit().BK();return"relative"===t?this.Vit():"absolute"===t?this.Drt():void 0}HE(){return this.u3}qit(t){this.u3=t}qO(){return this.jG}j$(t){this.jG=t,this.znt.Sat()}yst(){return this.Qnt}u6(t){this.Qnt=t}Net(){return this.tat}Det(t){this.tat=!!t}PK(){return this.dat}HK(e){if(this.cat){if(!this.fat&&null!==this.fat){var i=this.cat.gat();if(i){var s=i.length;for(let t=0;t<s;t++){var r=i[t];if(r.p6()===e)return this.fat=r,this.fat}}this.fat=null}return this.fat}}NX(){var t=this.cat;return{addonDataJson:t&&t.NX(),value:this.trt,aValue:this.uat,type:this.u3,time:this.jG,ease:this.Qnt,enable:this.tat}}DX(t){t&&(t.addonDataJson&&this.cat._SetFromJson(t.addonDataJson),this.trt=t.value,this.uat=t.aValue,this.u3=t.type,this.jG=t.time,this.Qnt=t.ease,this.tat=t.enable)}}C33.Knt=class PropertyKeyframeData{constructor(t,e){this.vit=e,this.Tit=[],this.Tat=[],C33.Gz.vnt(this.Tit,t,PropertyKeyframeDataItem,this),C33.Gz.gnt(this.Tat,t,PropertyKeyframeDataItem,this),this.Sat()}lh(){this.vit=null;for(var t of this.Tit)t.lh();C33.Dn(this.Tit),this.Tit=null;for(var e of this.Tat)e.lh();C33.Dn(this.Tat),this.Tat=null}Sat(){let e=this.Tit;e.sort((t,e)=>t.qO()-e.qO());for(let t=0;t<e.length;t++){var i=e[t];t+1<e.length&&i.sat(e[t+1]),0<=t-1&&i.vat(e[t-1])}(e=this.Tat).sort((t,e)=>t.qO()-e.qO());for(let t=0;t<e.length;t++){var s=e[t];t+1<e.length&&s.sat(e[t+1]),0<=t-1&&s.vat(e[t-1])}}Sst(){var t=new PropertyKeyframeDataItem(null,this);return this.Tit.push(t),this.Sat(),t}gst(t){for(var e of this.Tit){var i;t(e)&&-1!==(i=this.Tit.indexOf(e))&&(e.lh(),this.Tit.splice(i,1))}this._at(),this.Sat()}_at(){this.Tit.sort((t,e)=>t.qO()-e.qO())}bit(){return this.vit}Eat(){return this.Tit.length}Brt(){return this.Tit[this.Tit.length-1]}_it(){return this.Tit}wK(){return this.Tat}*yat(){for(var t of this.Tit)yield t}*Aat(){for(let t=this.Tit.length-1;0<=t;t--)yield this.Tit[t]}NX(){var t=this.Tit,e=this.Tat;return{propertyKeyframeDataItemsJson:t.map(t=>t.NX()),propertyKeyframeDataItemsIncludingDisabledJson:e.map(t=>t.NX())}}DX(t){t&&(C33.Gz.Tnt(this.Tit,t.propertyKeyframeDataItemsJson,PropertyKeyframeDataItem,this),C33.Gz.Tnt(this.Tat,t.propertyKeyframeDataItemsIncludingDisabledJson,PropertyKeyframeDataItem,this),this.Sat())}}}{let C33=self.We,ADDON_ID=0,ADDON_DATA=1;class AddonDataItem{constructor(t,e){this.cat=e,this.r3=t[ADDON_ID],this.Iat=t[ADDON_DATA]}lh(){this.cat=null,this.Iat=null}mat(){return this.cat}p6(){return this.r3}NX(){return{id:this.r3,data:this.Iat}}DX(t){t&&(this.r3=t.id,this.Iat=t.data)}}let START_ANCHOR=0,START_ENABLE=1,END_ANCHOR=2,END_ENABLE=3;class AddonDataCubicBezierItem extends AddonDataItem{constructor(t,e){super(t,e),this.Rat=this.Iat[START_ANCHOR],this.Mat=!!this.Iat[START_ENABLE],this.wat=this.Iat[END_ANCHOR],this.bat=!!this.Iat[END_ENABLE]}lh(){super.lh()}qK(){return this.Rat}cnt(){return this.Mat}KK(){return this.wat}fnt(){return this.bat}NX(){return Object.assign(super.NX(),{startAnchor:this.Rat,startEnable:!!this.Mat,endAnchor:this.wat,endEnable:!!this.bat})}DX(t){t&&(super.DX(t),this.Rat=t.startAnchor,this.Mat=!!t.startEnable,this.wat=t.endAnchor,this.bat=!!t.endEnable)}}let DIRECTION=0,REVOLUTIONS=1;class AddonDataAngleItem extends AddonDataItem{constructor(t,e){super(t,e),this.Oat=this.Iat[DIRECTION],this.Gat=this.Iat[REVOLUTIONS]}lh(){super.lh()}Cnt(){return this.Oat}dnt(){return this.Gat}NX(){return Object.assign(super.NX(),{direction:this.Oat,revolutions:this.Gat})}DX(t){t&&(super.DX(t),this.Oat=t.direction,this.Gat=t.revolutions)}}C33.Cat=class AddonData{constructor(t,e){this.Pat=e,this.Lat=[],C33.Gz.vnt(this.Lat,t,{prop:0,map:new Map([["cubic-bezier",AddonDataCubicBezierItem],["angle",AddonDataAngleItem]])},this)}lh(){this.Pat=null;for(var t of this.Lat)t.lh();C33.Dn(this.Lat),this.Lat=null}xat(){return this.Pat}gat(){return this.Lat}*Nat(){for(var t of this.Lat)yield t}NX(){return{addonDataItemsJson:this.Lat.map(t=>t.NX())}}DX(t){t&&C33.Gz.Tnt(this.Lat,t.addonDataItemsJson,{prop:"id",map:new Map([["cubic-bezier",AddonDataCubicBezierItem],["angle",AddonDataAngleItem]])},this)}}}{let C33=self.We,INITIAL_VALUE_MODE_START_VALUE="start-value",INITIAL_VALUE_MODE_CURRENT_STATE="current-state",PING_PONG_BEGIN=0,PING_PONG_END=1,createdTweens=0;C33.jht=class Tween extends C33.cJ{constructor(t,e){super("tween-"+createdTweens++,t,e),this.r3="",this.Dat=!1,this.Fat=INITIAL_VALUE_MODE_START_VALUE,this.Xtt=null,this.Bat=null,this.$at=null,this.mit=null,this.kat=null}TQ(t){var e=C33.oh(C33.Event,"tweenstatereleased");e.Wat=this,t.dispatchEvent(e)}HE(){return 1}YZ(){for(var t of this.VZ.yQ().EQ())this.HZ.push(C33.Vat.W_(this,t));this.mit=this.HZ[0]}Att(){var t=this.VZ.yQ().Itt(),t=C33.Vat.W_(this,t);return this.HZ.push(t),this.Hat(),t}Hat(){this.mit=this.HZ[0]}v6(t){return this.mit.Ltt()[0]}Yit(t){this.Uat=t}c6(){var t=this.IK();if(t&&t.length){var e,t=t[0];if(this.mit=t)return e=t.c6(),t.fet()?e:void 0}}jat(t){this.$at||(this.$at=[]),this.$at.push(t)}Xat(t){this.Bat||(this.Bat=[]),this.Bat.push(t)}Yat(t){this.$at&&-1!==(t=this.$at.indexOf(t))&&this.$at.splice(t,1)}qat(t){this.Bat&&-1!==(t=this.Bat.indexOf(t))&&this.Bat.splice(t,1)}zat(t,e){for(var i of this.HZ)for(var s of i.iet){var r;s.xtt()===e&&(r=s.oet(),s=s.bit(),(r=r.Jit(s)).Ast(t),r.Tst(t))}}Jat(t){for(var e of this.HZ)for(var i of e.iet)if(i.xtt()===t)return i}Kat(t){for(var e of t){var i=this.Jat(e);this.zat(i.ust(),e)}if(this.kQ()){var s,r=this.Y$()-this.qO();this.X$(r);for(s of this.HZ)s.xet(r);this.ett(0)}else{var h,n=this.qO();this.X$(n);for(h of this.HZ)h.xet(n);this.ett(n)}this.itt()}Zat(t,e){var e=this.Jat(e),i=e.oet(),e=e.bit(),i=i.Brt(e);i.j$(this.Y$()),i.Ast(t),i.Tst(t)}Qat(t){this.r3=t}p6(){return this.r3}tot(t){this.Fat=t}eot(){return this.Fat}C6(t){this.Dat=t}d6(){return this.Dat}jQ(){if(this.$at)for(var t of this.$at)t(this);if(!this.iK())for(var e of this.HZ)e.oit()}XQ(){this.aQ=this.i3.YQ()}rK(){if(!this.uQ&&(this.uQ=!0,this.Bat))for(var t of this.Bat)t(this)}j$(t){this.iot(),super.j$(t)}ott(t){(t=C33.vs(t)?t:this.Y$())<0?this.JZ=0:t>=this.Y$()?this.JZ=this.Y$():this.JZ=t,this.mit.ltt()}zJ(t){if(!this.sK()&&this.eot()===INITIAL_VALUE_MODE_CURRENT_STATE)for(var e of this.HZ)e.ait();super.zJ(t)}V$(t=!1){if(super.V$(t),!this.iK())for(var e of this.HZ)e.nit()}lf(t=!0,e=!1){this.iot(),super.lf(t,e)}iot(){for(var t of this.HZ){var e=t=>{var t=t.qO(),e=this.Y$();return 0!==t&&t!==e};t.sit(e),t.hit(e)}}zz(){if(!this.k$()){var t=this.c6();if(t&&t.tF().JH())return!1;this.WZ.jJ(this),this.Ctt()}return!0}QJ(i,t,s){if(this.Xtt||(this.Xtt=this.c6()),!this.Xtt||this.Xtt.Sk())this.V$(!0),this.XQ();else{var r=this.Xtt.gL();if(0!==(i=-1!==r?s*r:i)||0!==this.fQ){this.fQ=i;s=this.JZ+this.KZ+i*this.ZZ,r=this.VZ.gtt;s<0?(this.JZ=0,this.KZ=-s):r<=s?(this.JZ=r,this.KZ=this.JZ-s):(this.JZ=s,this.KZ=0);let t=!1,e=!1;i=this.z$(),s=this.K$();i||s?i&&!s?0<this.ZZ?this.JZ>=r&&(this.ott(0),this.sot(C33.hot.Tween.Iq.rot),this.sot(C33.hot.Tween.Iq.not),e=!0):this.JZ<=0&&(this.ott(r),this.sot(C33.hot.Tween.Iq.rot),this.sot(C33.hot.Tween.Iq.not),e=!0):!i&&s?0<this.ZZ?this.JZ>=r&&(this.ett(r),this.Z$(-1*this.Q$()),e=!0,this.QZ===PING_PONG_END?this.tQ<this.a$()?(this.tQ++,this.sot(C33.hot.Tween.Iq.rot),this.sot(C33.hot.Tween.Iq.not),this.sot(C33.hot.Tween.Iq.aot),this.sot(C33.hot.Tween.Iq.oot),this.QZ=PING_PONG_BEGIN):(this.sot(C33.hot.Tween.Iq.aot),this.sot(C33.hot.Tween.Iq.oot),t=!0):this.QZ===PING_PONG_BEGIN&&(this.sot(C33.hot.Tween.Iq.aot),this.sot(C33.hot.Tween.Iq.oot),this.QZ=PING_PONG_END)):this.JZ<=0&&(this.ett(0),this.Z$(-1*this.Q$()),e=!0,this.QZ===PING_PONG_END?this.tQ<this.a$()?(this.tQ++,this.sot(C33.hot.Tween.Iq.rot),this.sot(C33.hot.Tween.Iq.not),this.sot(C33.hot.Tween.Iq.aot),this.sot(C33.hot.Tween.Iq.oot),this.QZ=PING_PONG_BEGIN):(t=!0,this.sot(C33.hot.Tween.Iq.aot),this.sot(C33.hot.Tween.Iq.oot)):this.QZ===PING_PONG_BEGIN&&(this.sot(C33.hot.Tween.Iq.aot),this.sot(C33.hot.Tween.Iq.oot),this.QZ=PING_PONG_END)):i&&s&&(0<this.ZZ?this.JZ>=r&&(this.ett(r),this.Z$(-1*this.Q$()),e=!0,this.QZ===PING_PONG_BEGIN&&(this.sot(C33.hot.Tween.Iq.aot),this.sot(C33.hot.Tween.Iq.oot)),this.QZ===PING_PONG_END&&(this.sot(C33.hot.Tween.Iq.rot),this.sot(C33.hot.Tween.Iq.not),this.sot(C33.hot.Tween.Iq.aot),this.sot(C33.hot.Tween.Iq.oot)),this.QZ++,this.QZ=C33.wrap(this.QZ,0,2)):this.JZ<=0&&(this.ett(0),this.Z$(-1*this.Q$()),e=!0,this.QZ===PING_PONG_BEGIN&&(this.sot(C33.hot.Tween.Iq.aot),this.sot(C33.hot.Tween.Iq.oot)),this.QZ===PING_PONG_END&&(this.sot(C33.hot.Tween.Iq.rot),this.sot(C33.hot.Tween.Iq.not),this.sot(C33.hot.Tween.Iq.aot),this.sot(C33.hot.Tween.Iq.oot)),this.QZ++,this.QZ=C33.wrap(this.QZ,0,2))):0<this.ZZ?this.JZ>=r&&(this.tQ<this.a$()?(this.tQ++,this.ott(0),this.sot(C33.hot.Tween.Iq.rot),this.sot(C33.hot.Tween.Iq.not),e=!0):(this.ett(r),t=!0)):this.JZ<=0&&(this.tQ<this.a$()?(this.tQ++,this.ott(r),this.sot(C33.hot.Tween.Iq.rot),this.sot(C33.hot.Tween.Iq.not),e=!0):(this.ett(0),t=!0)),t?(this.mit.Ttt(),this.V$(!0),this.XQ()):(this.mit.Bc(this.JZ,!0,!1,e,this.cQ,!1),this.cQ&&(this.cQ=!1))}}}sot(t){var e=this.c6(),i=e.lot(C33.hot.Tween);i.uot(this),this.i3.FF(t,e,i.XB()),i.cot()}NX(){var t=super.NX(),e=this.OQ();return Object.assign(t,{tweenDataItemJson:e.NX(),id:this.r3,destroyInstanceOnComplete:this.Dat,initialValueMode:this.Fat})}DX(t){t&&(this.OQ().DX(t.tweenDataItemJson),super.DX(t),this.r3=t.id,this.Dat=t.destroyInstanceOnComplete,this.Fat=t.initialValueMode,this.Hat())}static IsPlaying(t){return t.IsPlaying()}static s6(t){return t.s6()}static fot(t){return!!t.K$()&&t.$Q()===PING_PONG_BEGIN}static dot(t){return!!t.K$()&&t.$Q()===PING_PONG_END}static Cot(t){var e=t.runtime.IQ(),i=new C33.mnt;if(t.json)return i.DX(t.json.tweenDataItemJson),(r=new C33.jht(i,e)).DX(t.json),r;var s,r=new C33.jht(i,e),h=(C33.Ws(t.pot)||(t.pot=[t.pot]),r.Qat(t.id),r.WQ(t.tags),r.tot(t.initialValueMode),r.C6(t.mot),r.q$(t.loop),r.J$(t.pingPong),r.X$(t.time),r.PQ(0),r.xQ("default"),r.NQ(t.pot[0].resultMode),r.DQ(t.repeatCount),r.Att()),i=(h.Pet(t.YB.CF()),h.xQ("default"),h.NQ(t.pot[0].resultMode),h.Det(!0),h.Fet(t.YB.tF().f4()),t.YB.NB()),e=i.ket()?i.$et():t.YB.Cx().tp(),i=i.ket()?i.Vet():t.YB.Cx().cp(),e=(h.Bet(e),h.Wet(i),h.Qet()),i=(e.j$(0),e.u6("noease"),e.Det(!0),e.WQ(""),h.Qet());i.j$(t.time),i.u6("noease"),i.Det(!0),i.WQ("");for(s of t.pot){var n=h.eit(),a=(n.Fit(s.vot),n.kit(s.Sot),n.Uit(s.property),n.Yit(s.type),n.Zit(NaN),n.tst(NaN),n.xQ("default"),n.NQ(s.resultMode),n.Det(!0),n.vst()),a=(a.qit(s.valueType),a.j$(0),a.u6(s.ease),a.Det(!0),a.Ast(s.got),a.Tst(s.got),n.vst());a.qit(s.valueType),a.j$(t.time),a.u6(s.ease),a.Det(!0),a.Ast(s.Tot),a.Tst(s.Tot),n.MQ()}return r}static Pet(t,e){if(!isNaN(e))for(var i of t.IK())i.Pet(e)}_ot(t,e){return this.kat||(this.kat=C33.oh(self.n6,this,t,e)),this.kat}}}{let C33=self.We;C33.Vat=class TweenTrack extends C33.AQ{constructor(t,e){super(t,e),this.Eot=null,this.yot=null}static W_(t,e){return C33.oh(C33.Vat,t,e)}Aot(){1===this.iet.length?this.Eot=this.iet[0]:(this.Eot=this.iet[0],this.yot=this.iet[1])}ret(){for(var t of this.Vtt.oet().aet())this.iet.push(C33.Iot.W_(this,t));this.Aot()}eit(){var t=this.Vtt.oet().iit(),t=C33.Iot.W_(this,t);return this.iet.push(t),this.Aot(),t}zJ(){if(this.cet(),this.fet()||!this.bQ()){var t,e=this.uet().kQ()?0:this.Let();for(t of this.iet)t.zJ(e),0===this.het&&1===t.jet()&&(this.het=1),0===this.aJ&&1===t.JJ()&&(this.aJ=1);this.net=0,this.iet.some(t=>t.Stt())&&(this.net=1),this.Ztt=this.Xet(e),this.ztt=!1,this.Jtt=!1,this.Bc(e)}}_tt(){}Bc(t,e=0,i=!1,s=!1,r,h=!1,n=!1){if(this.Xtt||this.c6(),this.Xtt)return!(this.Xtt.Sk()||h&&this.tF().JH())&&((this.yot?(this.Eot.Bc(t,i,s,n),this.yot):this.Eot).Bc(t,i,s,n),void(0!==this.Eot.jet()&&(this.Ytt||(this.Ytt=this.Xtt.Cx()),this.Ytt)&&this.Ytt.f7()))}ytt(){}DX(t){super.DX(t),this.Aot()}}}{let C33=self.We;C33.Iot=class TweenPropertyTrackState extends C33.let{constructor(t,e){super(t,e),this.Rot=!1}static W_(t,e){return C33.oh(C33.Iot,t,e)}Bc(t,e=!1,i=!1,s=!1){let r,h;var n,a,o;h=this.Rot?(r=this.Tit[0],this.Tit[1]):(r=e?this.Sit.rst(t,this.vit):((!this.yit||(n=this.uet(),o=this.yit.bK(),a=this.yit.qO(),o=o?o.qO():n.Y$(),t<=a)||o<=t)&&(this.yit=this.Sit.rst(t,this.vit)),this.yit)).bK(),this.git.Bc(t,r,h,e,i,s)}vst(){var t=this.vit.Eit().Sst();return this.yit=null,this.Rot=this.est().length<=2,t}hit(t){this.yit=null,this.vit.Eit().gst(t),this.Rot=this.est().length<=2}NX(){return{sourceAdapterJson:this.MQ().NX(),basic:this.Rot}}DX(t){t&&(this.MQ().DX(t.sourceAdapterJson),this.Rot=t.basic)}}}{let C33=self.We,Ease=self.uc,NAME=0,TRANSITION_KEYFRAMES=1,LINEAR=2;C33.$c=class Transition extends C33.nh{constructor(t,e=!0){super(),this.dh=t[NAME],this.Mot=t[LINEAR],this.wot=[];for(var i of t[TRANSITION_KEYFRAMES]){i=C33.bot.W_(this,i);this.wot.push(i)}for(let t=0;t<this.wot.length;t++){var s=this.wot[t],r=this.wot[t+1],h=this.wot[t-1];s.sat(r),s.vat(h)}this.Oot=new Map,this.Got=new Map,this.Pot(),e&&Ease.Wc(this.dh,(t,e,i,s)=>this.Bc(t,e,i,s),null,{transition:this})}static W_(t){return C33.oh(C33.$c,t)}lh(){for(var t of this.wot)t.lh();C33.Dn(this.wot),this.wot=null,this.Oot.clear(),this.Oot=null,this.Got.clear(),this.Got=null}kc(t){this.Mot=!!t}Lot(t){var e,i=this.Got.get(t);if(i)return i;for(e of this.wot)if(e.xot()===t)return this.Got.set(t,e),e}Not(e){for(let t=this.wot.length-1;0<=t;t--){var i=this.wot[t],s=i.xot();if(s<=e){let t=i;if(s<e)return t;if(s===e){for(;t;){var r=t.GK();if(!r)break;if(r.xot()!==t.xot())break;t=r}return t}}}}Bc(t,e,i,s){let r=t/s;if(this.Mot)return a=this.Lot(0),d=this.Lot(1),a=e+(e+i)*a.Dot(),d=(e+i)*d.Dot()-a,0===s?a+d:Ease.Hc(t,a,d,s);0===s&&(r=1);let h=this.Not(r),n=h.bK();n||(t=h.GK(),a=h,h=t,n=a);var a,o,l,u,c,f,d=n.xot()-h.xot(),s=C33.Ch(r,h.xot(),n.xot(),0,d);return h.Fot()||0==d?(t=e+(e+i)*h.Dot(),a=(e+i)*n.Dot()-t,0==d?1===s?t+a:t:Ease.Hc(s,t,a,d)):(t=h.xot(),a=h.Dot(),d=h.xot()+h.Bot(),o=h.Dot()+h.$ot(),l=n.xot()+n.kot(),u=n.Dot()+n.Wot(),c=n.xot(),f=n.Dot(),s=Ease.Mc("spline")(s,t,a,d,o,l,u,c,f,this.Oot.get(h)),(1-(s+=h.Dot()))*e+s*(e+i))}Pot(){this.Oot.clear();for(let t=0;t<this.wot.length-1;t++){var e,i,s,r,h=this.wot[t];h.cnt()&&(h=h,(r=this.wot[t+1]).fnt())&&(e=h.xot(),i=h.xot()+h.Bot(),s=r.xot()+r.kot(),r=r.xot(),this.Oot.set(h,Ease.Uc(e,i,s,r)))}}}}{let C33=self.We,VALUE_X=0,VALUE_Y=1,START_ANCHOR_X=2,START_ANCHOR_Y=3,END_ANCHOR_X=4,END_ANCHOR_Y=5,START_ENABLE=6,END_ENABLE=7,SEGMENT_MODE=8;C33.bot=class TransitionKeyframe extends C33.nh{constructor(t,e){super(),this.Vot=t,this.Hot=e[VALUE_X],this.Uot=e[VALUE_Y],this.jot=e[START_ANCHOR_X],this.Xot=e[START_ANCHOR_Y],this.Yot=e[END_ANCHOR_X],this.qot=e[END_ANCHOR_Y],this.Mat=e[START_ENABLE],this.bat=e[END_ENABLE],this.zot=e[SEGMENT_MODE],this.iat=null,this.pat=null}lh(){this.Vot=null}static W_(t,e){return C33.oh(C33.bot,t,e)}sat(t){this.iat=t}bK(){return this.iat}vat(t){this.pat=t}GK(){return this.pat}xot(){return this.Hot}Dot(){return this.Uot}Bot(){return this.jot}$ot(){return this.Xot}kot(){return this.Yot}Wot(){return this.qot}cnt(){return this.Mat}fnt(){return this.bat}Fot(){return"linear"===this.zot}Jot(){return"cubic"===this.zot}}}{let C33=self.We;C33.Kot=class TransitionManager extends C33.nh{constructor(t){super(),this.i3=t,this.Zot=[]}lh(){for(var t of this.Zot)t.lh();C33.Dn(this.Zot),this.Zot=null}W_(t){this.Zot.push(C33.$c.W_(t))}}}{let C33=self.We;C33.Qot=class TemplateManager extends C33.nh{constructor(t){super(),this.i3=t,this.tlt=null,this.elt=null,this.Zz=t=>this.Qz(t.YB)}lh(){if(this.oJ(),this.tlt){for(var t of this.tlt.values())t.clear();this.tlt.clear()}this.tlt=null,this.i3=null}W_(t){var e,i;this.tlt||(this.tlt=new Map),t&&(e=t[0][16][0],this.tlt.has(i=t[1])||this.tlt.set(i,new Map),this.tlt.get(i).set(e,t))}lJ(){var t=this.i3.F3();t&&t.addEventListener("instancedestroy",this.Zz)}oJ(){var t=this.i3.F3();t&&t.removeEventListener("instancedestroy",this.Zz)}ilt(){return!!this.tlt&&0!==this.tlt.size}slt(t,e){let i=0;return i=t instanceof C33.rlt?t.f4():t,this.tlt.has(i)&&(t=this.tlt.get(i).get(e))?JSON.parse(JSON.stringify(t)):void 0}hlt(t,e){this.elt||(this.elt=new WeakMap),this.elt.has(t)||this.elt.set(t,e)}nlt(t){return this.elt&&this.elt.get(t)||""}Qz(t){this.elt&&this.elt.has(t)&&this.elt.delete(t)}}}{let C33=self.We;C33.olt=class FlowchartManager{constructor(t){this.i3=t,this.llt=new C33.ult}lh(){this.llt.lh(),this.llt=null,this.i3=null}Dx(){return this.i3}W_(t){this.llt.ac(t)}clt(t){return this.llt.ni(t)}flt(){return this.llt.flt()}}}{let C33=self.We;C33.dlt=class Flowchart{constructor(t,e,i,s,r,h,n){this.i3=r.Dx(),this.Clt=r,this.plt=t,this.mlt=i,this.vlt=s,this.U1=e,this.Pz=h,this.Slt=n??h.c6().CF(),this.glt(),this.Tlt=this.Elt?._lt()??-1,this.ylt=[],this.Alt=null,this.Ilt=NaN,this.Rlt=null,this.Mlt=null,this.wlt=null,this.blt="",this.Olt=null,this.Glt="",this.Plt="",this.Llt=0,this.xlt=!1,this.hQ=!1}lh(){this.hQ||(C33.Dn(this.ylt),this.ylt=null,this.i3=null,this.Clt=null,this.vlt=null,this.Pz=null,this.Alt=null,this.Ilt=NaN,this.Rlt&&this.Rlt.clear(),this.Rlt=null,this.Mlt=null,this.wlt=null,this.blt="",this.Olt=null,this.Glt="",this.Plt="",this.hQ=!0)}uh(){return this.hQ}Nlt(){return this.Clt}Dx(){return this.i3}qc(){return this.plt}Dlt(){return this.vlt}$$(){return this.U1}EJ(){return this.Pz||(this.Pz=this.i3.hx(this.Slt).NB()),this.Pz}Flt(){return this.Blt(this.Tlt)}$lt(){var t=this.Flt();return t?t.$$():""}klt(t){var e=this.Flt();if(e){if(C33.vs(t)){var i=e.Wlt(),i=i?i[t]:void 0;if(C33.vs(i))return this.Blt(i)}if("string"==typeof t)for(var s of e.Wlt()){s=this.Blt(s);if(s.$$()===t)return this.Blt(s._lt())}}}Vlt(t){t=this.klt(t);return t?t.$$():""}Hlt(t){var e,t=this.klt(t);return t&&(e=t.Wlt())?e.indexOf(t._lt()):-1}Ult(){var t=this.Flt();return(t=t&&t.Wlt())?t.length:0}Blt(t){return this.vlt.Blt(t)}lf(){this.Xlt().jlt(!0)}jlt(t){if(this.Ylt()){for(var[e,i]of this.Ylt().entries())i.jlt(!1);this.Ylt().clear()}this.Rlt=null,this.Alt=null,this.qlt=null,this.Mlt=null,this.blt="",this.Olt=null,this.Glt="",this.Plt="",this.ylt=[],t?(this.Clt.zlt(this),(t=this.Elt._lt())!==this.Tlt&&this.Jlt(t)):this.Tlt=this.Elt._lt()}Klt(){var t=this.vlt.Blt(this.Tlt);return t?t.Qlt().Zlt():0}tut(t){t=this.eut(t);return t?t.qc():""}iut(t){let e;return C33.vs(t)&&(e=this.eut(t)),"string"==typeof t&&(e=this.sut(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),e?e.Vit():""}rut(t){let e;C33.vs(t)&&(e=this.eut(t));t=(e="string"==typeof t?this.sut(t):e).hut();C33.vs(t)&&(this.ylt.push(this.Tlt),this.Jlt(t))}nut(t){var t=this.vlt.aut(t);t&&(t=this.vlt.Blt(t._lt()))&&(this.ylt.push(this.Tlt),this.Jlt(t._lt()))}out(){var t=this.ylt.pop();C33.vs(t)?this.Jlt(t):this.lut()&&(this.Clt.zlt(this.lut(),!0,!1,!1),this.lut().Jlt(this.uut()),this.Xlt().cut(this.lut()))}fut(t){var e=this.Flt();e&&(e._lt(),e=this.klt(t))&&(this.ylt.push(this.Tlt),this.Jlt(e._lt()))}dut(e){if(C33.vs(e))return!!this.vlt.Blt(this.Tlt).Qlt().Cut()[e];if("string"==typeof e){var i=this.vlt.Blt(this.Tlt).Qlt().Cut();for(let t=0;t<i.length;t++)if(i[t].qc()===e)return!0}return!1}mut(){this.xlt=!0}vut(){return 0<this.Llt}Sut(){this.Llt++}gut(){this.Llt--,0===this.Llt&&this.xlt&&this.Clt.Tut(this)}Jlt(t){var i=this.Tlt,s=this.EJ().c6();if(this.Sut(),this.Clt._ut(this),this.i3.FF(C33.Mq.Flowchart.Iq.OnBeforeAnyNodeChange,s),this.i3.FF(C33.Mq.Flowchart.Iq.OnBeforeTaggedNodeChange,s),this.i3.FF(C33.Mq.Flowchart.Iq.OnBeforeAnyNodeChangeInFlowchart,s),this.i3.FF(C33.Mq.Flowchart.Iq.OnBeforeTaggedNodeChangeInFlowchart,s),this.Tlt=t,this.i3.FF(C33.Mq.Flowchart.Iq.OnAnyNodeChange,s),this.i3.FF(C33.Mq.Flowchart.Iq.OnTaggedNodeChange,s),this.i3.FF(C33.Mq.Flowchart.Iq.OnAnyNodeChangeInFlowchart,s),this.i3.FF(C33.Mq.Flowchart.Iq.OnTaggedNodeChangeInFlowchart,s),this.Clt.Eut(),this.gut(),!this.uh()){t=this.Blt(this.Tlt);if("reference"===t.HE()){s=t.yut();if(this.Aut(t)){this.ylt.pop();var r=this.Iut(t);this.Clt.zlt(r,!0,!0,!1),r.Rut(this,i),this.Xlt().cut(r)}else{r=t.Mut();if(s){this.ylt.pop();let e=t.wut();if(e){let t=this.Clt.but(e);for(;t;)e=C33.Xd(e),t=this.Clt.but(e)}else{e=s+"-ref";let t=this.Clt.but(e);for(;t;)e=C33.Xd(e),t=this.Clt.but(e)}s=this.Clt.Gut(s,r,e,this.Pz,!0),r=(s.Rut(this,i),this.Put(t,s),this.Xlt());s.Lut(r),r.cut(s)}}}}}eut(t){var e=this.vlt.Blt(this.Tlt);return(e=e&&e.Qlt().Cut())&&e[t]||null}sut(t){var e=this.vlt.Blt(this.Tlt);return e&&e.Qlt().xut(t)||null}glt(e){if("number"==typeof e){let t=this.Blt(e);t=t||this.vlt.Nut(),this.Elt=t}else{let t=this.vlt.aut(this.mlt);t=t||this.vlt.Nut(),this.Elt=t}}NX(){return this.xlt?null:{flowchartName:this.plt,flowchartTag:this.U1,startNodeTag:this.mlt,currentNodeId:this.Tlt,previousNodeIds:this.ylt,pluginUID:this.Pz.c6().CF(),reference:{previousFlowchartTag:this.lut()?this.lut().$$():"",previousStartNodeId:C33.vs(this.uut())?this.uut():NaN,referencesJson:this.Dut(),currentReferenceFlowchartTag:this.Fut()?this.Fut().$$():"",rootFlowchartTag:this.Xlt()?this.Xlt().$$():""}}}Dut(){if(!this.But())return null;var t,e,i=[];for([t,e]of this.Ylt().entries())i.push({flowchartElementId:t._lt(),flowchartStateTag:e.$$()});return i.length?i:null}DX(t){t&&(this.plt=t.flowchartName,this.U1=t.flowchartTag,this.mlt=t.startNodeTag,this.Tlt=t.currentNodeId,this.ylt=t.previousNodeIds,this.Slt=t.pluginUID,t.hasOwnProperty("reference")&&(t=t.reference,this.blt=t.previousFlowchartTag,this.Ilt=t.previousStartNodeId,this.Olt=t.referencesJson,this.Glt=t.currentReferenceFlowchartTag,this.Plt=t.rootFlowchartTag),this.glt())}lut(){return"string"==typeof this.blt&&this.blt&&(this.Alt=this.Clt.but(this.blt),this.blt=""),this.Alt}uut(){return this.Ilt}Rut(t,e){this.Alt=t,this.Ilt=e}Fut(){return"string"==typeof this.Glt&&this.Glt&&(this.Mlt=this.Clt.but(this.Glt),this.Glt=""),this.Mlt}cut(t){this.Mlt=t,this.Mlt===this&&(this.Mlt=null)}Xlt(){return"string"==typeof this.Plt&&this.Plt&&(this.wlt=this.Clt.but(this.Plt),this.Plt=""),this.wlt||this}Lut(t){this.wlt=t}But(){return this.$ut(),!!this.Rlt}Aut(t){return this.$ut(),this.Rlt&&this.Rlt.has(t)}$ut(){if(this.Olt){this.Rlt&&this.Rlt.clear(),this.Rlt||(this.Rlt=new Map);for(var t of this.Olt){var e=this.Clt.but(t.flowchartStateTag),t=e.Blt(t.flowchartElementId);this.Rlt.set(t,e)}this.Olt=null}}Ylt(){return this.$ut(),this.Rlt}Iut(t){return this.$ut(),this.Rlt.get(t)}Put(t,e){this.Rlt||(this.Rlt=new Map),this.Rlt.set(t,e)}}}{let C33=self.We;C33.kut=class FlowchartStateManager{constructor(t){this.i3=t,this.Wut=new Map,this.Vut=null,this.Hut=[],this.Uut=()=>this.sJ(),this.jut=null}lh(){C33.Dn(this.Hut),this.Hut=null,this.Wut.clear(),this.Wut=null,this.Vut=null,this.i3=null,this.jut=null}Dx(){return this.i3}Gut(t,e,i,s,r,h){var n=this.i3.Nlt().clt(t);if(n){if(!this.Wut.has(i))return e=new C33.dlt(t,i,e,n,this,s,h),this.Wut.set(i,e),r&&this.zlt(e,!0),e;console.warn(`[Flowcharts] there already is a flowchart with the tag '${i}'`)}else console.warn(`[Flowcharts] no flowchart found with name '${t}'`)}Tut(t){var e;t.mut(),t.vut()||(e=t.$$(),this.Wut.delete(e),t.lh(),this.Vut===t&&(this.Vut=null))}Xut(t){t.lf()}but(t){return this.Wut.get(t)}_ut(t){this.Hut.push(t)}Eut(){this.Hut.pop()}zlt(t,e=!1,i=!1,s=!0){(t=s&&t.Fut()||t)!==this.Vut&&(this.Yut(),this.qut(t,e,i))}zut(t){return"string"==typeof t?this.but(t):this.Hut.length?this.Hut[this.Hut.length-1]:this.Vut}Yut(){var t;this.Vut&&!this.Vut.uh()&&(t=this.Vut.EJ().c6(),this.Vut.Sut(),this._ut(this.Vut),this.i3.FF(C33.Mq.Flowchart.Iq.OnBeforeFlowchartChange,t),this.Eut(),this.Vut.gut())}qut(t,e=!1,i=!1){this.Vut=t,this.Vut&&!this.Vut.uh()&&(t=this.Vut.EJ().c6(),this.Vut.Sut(),this._ut(this.Vut),this.i3.FF(C33.Mq.Flowchart.Iq.OnFlowchartChange,t),!0!==i&&"number"!=typeof i||this.Vut.glt(i),e&&(this.i3.FF(C33.Mq.Flowchart.Iq.OnAnyNodeChange,t),this.i3.FF(C33.Mq.Flowchart.Iq.OnTaggedNodeChange,t)),this.Eut(),this.Vut.gut())}NX(){return{flowchartJsonObjects:[...this.Wut.values()].map(t=>t.NX()),currentFlowchartTag:this.Vut?this.Vut.$$():null}}DX(t){if(t){this.jut=t;var e,i,s,r=new Map;for(e of this.jut.flowchartJsonObjects){var h,n=e.flowchartTag;this.Wut.has(n)?((h=this.Wut.get(n)).DX(e),r.set(n,h)):((n=this.Gut(e.flowchartName,e.startNodeTag,e.flowchartTag,null,!1,e.pluginUID)).DX(e),r.set(e.flowchartTag,n))}for([i,s]of this.Wut.entries())r.has(i)||s.lh();this.Wut.clear(),this.Wut=r,this.i3.mq()?this.i3.F3().addEventListener("afterload",this.Uut):this.sJ()}}sJ(){this.i3.F3().removeEventListener("afterload",this.Uut);var t=this.Wut.get(this.jut.currentFlowchartTag);t&&this.zlt(t,!0),this.jut=null}}}{let C33=self.We;C33.ult=class FlowchartDataManager{constructor(){this.Jut=new Map}lh(){for(var t of this.Jut.values())t.lh();this.Jut.clear(),this.Jut=null}ac(t){var t=new C33.Kut(t),e=t.qc();this.Jut.set(e,t)}ni(t){return this.Jut.get(t)}flt(){return!!this.Jut.size}static Zut(t,e,i,s){if(e)for(var r of e){r=new i(r,s);t.push(r)}}}}{let C33=self.We,NAME=0,NODES=1;C33.Kut=class FlowchartDataItem{constructor(t){this.dh=t[NAME],this.Qut=new C33.tct(t[NODES],this)}lh(){this.Qut.lh(),this.Qut=null}ect(){return this.Qut}Blt(t){return this.Qut.Blt(t)}aut(t){return this.Qut.aut(t)}Nut(){return this.Qut.Nut()}qc(){return this.dh}}}{let C33=self.We,FLOWCHART_ID=0,TAG=1,PARENT_FLOWCHART_IDS=2,PARENT_OUTPUT_FLOWCHART_IDS=3,CHILDREN_FLOWCHART_IDS=4,OUTPUTS=5,IS_START=6,TYPE=7,REFERENCE_FLOWCHART=8,REFERENCE_FLOWCHART_START_NODE=9,REFERENCE_FLOWCHART_TAG=10;class FlowchartNodeDataItem{constructor(t,e){this.Qut=e,this.u3=t[TYPE],this.ict=t[FLOWCHART_ID],this.U1=t[TAG],this.sct=t[PARENT_FLOWCHART_IDS],this.rct=null,this.hct=null,"dictionary"===this.u3&&(this.rct=t[PARENT_OUTPUT_FLOWCHART_IDS],this.hct=t[CHILDREN_FLOWCHART_IDS]),this.nct=t[IS_START],this.oct=null,this.lct=null,this.uct=null,"reference"===this.u3&&(this.oct=t[REFERENCE_FLOWCHART],this.lct=t[REFERENCE_FLOWCHART_START_NODE],this.uct=t[REFERENCE_FLOWCHART_TAG]),this.cct=new C33.fct(t[OUTPUTS],this)}lh(){this.Qut=null}ect(){return this.Qut}Qlt(){return this.cct}_lt(){return this.ict}$$(){return this.U1}dct(){return this.nct}Wlt(){return this.sct}Cct(){return this.rct}pct(){return this.hct}HE(){return this.u3}yut(){return this.oct}Mut(){return this.lct}wut(){return this.uct}}C33.tct=class FlowchartNodeData{constructor(t,e){this.vlt=e,this.mct=[],this.vct=new Map,this.Sct=new Map,this.gct=null,C33.ult.Zut(this.mct,t,FlowchartNodeDataItem,this);for(var i of this.mct){var s,r=i._lt(),h=i.$$(),n=i.dct();this.vct.set(r,i),h&&this.Sct.set(h,i),n&&(this.gct=i);for(s of i.Qlt().Tct()){var a=s._lt();this.vct.set(a,s)}}}lh(){this.vlt=null;for(var t of this.mct)t.lh();C33.Dn(this.mct),this.mct=null}Dlt(){return this.vlt}Blt(t){return this.vct.get(t)}aut(t){return this.Sct.get(t)}Nut(){return this.gct}*_ct(){for(var t of this.mct)yield t}}}{let C33=self.We,FLOWCHART_ID=0,NAME=1,VALUE=2,CONNECTED_FLOWCHART_NODE_FLOWCHART_ID=3;class FlowchartNodeDataOutputItem{constructor(t,e){this.cct=e,this.ict=t[FLOWCHART_ID],this.dh=t[NAME],this.trt=t[VALUE],this.Ect=t[CONNECTED_FLOWCHART_NODE_FLOWCHART_ID]}lh(){this.cct=null}Qlt(){return this.cct}_lt(){return this.ict}qc(){return this.dh}Vit(){return this.trt}hut(){return this.Ect}}C33.fct=class FlowchartNodeOutputData{constructor(t,e){this.yct=e,this.Act=[],this.Ict=new Map,C33.ult.Zut(this.Act,t,FlowchartNodeDataOutputItem,this);for(var i of this.Act)this.Ict.set(i.qc(),i)}lh(){this.yct=null;for(var t of this.Act)t.lh();C33.Dn(this.Act),this.Act=null}Rct(){return this.yct}Zlt(){return this.Act.length}Cut(){return this.Act}xut(t){return this.Ict.get(t)}*Tct(){for(var t of this.Act)yield t}}}{let C33=self.We;C33.Mct=class SolStack extends C33.nh{constructor(t){super(),this.wct=t,this.bct=[],this.bct.push(C33.oh(C33.Oct,this)),this.H1=0,this.Gct=this.bct[0]}lh(){for(var t of this.bct)t.lh();C33.Dn(this.bct),this.Gct=null,this.wct=null}tF(){return this.wct}h5(){return this.Gct}Pct(){return this.bct[this.H1-1]}Ku(){this.h5().Ku()}Lct(){var t,e=this.bct,i=++this.H1;i===e.length?(t=C33.oh(C33.Oct,this),e.push(t),this.Gct=t):((t=e[i]).lf(),this.Gct=t)}xct(){var t=this.bct,e=++this.H1,i=(e===t.length&&t.push(C33.oh(C33.Oct,this)),t[e]);i.wf(t[e-1]),this.Gct=i}m8(){this.Gct=this.bct[--this.H1]}Nct(i){var s=this.bct;for(let t=0,e=s.length;t<e;++t)s[t].Nct(i)}}}{let C33=self.We;C33.Oct=class Sol extends C33.nh{constructor(t){super(),this.bct=t,this.wct=this.bct.tF(),this.Dct=this.wct.Dx().sL(),this.Fct=!0,this.oV=[],this.Bct=[]}lh(){this.$ct(),this.bct=null,this.wct=null,this.Dct=null}$ct(){C33.Dn(this.oV),C33.Dn(this.Bct)}tF(){return this.wct}kct(){return this.Fct}Wct(){return this.Fct?!!this.wct.a5():!!this.oV.length}r5(){return this.Fct?this.wct.r5():this.oV}Vct(){return!!this.Bct.length}Hct(){return this.Bct}Uct(){var t=this.r5();return t.length?t:this.Bct}lf(){this.Fct=!0,C33.Dn(this.Bct)}Ku(){this.Fct=!0}wf(t){t.kct()?this.lf():(this.Fct=!1,C33.kn(this.oV,t.oV),C33.Dn(this.Bct))}jct(t){this.oV.push(t)}Xct(t){this.Bct.push(t)}Yct(t){this.Fct=!!t}qct(){return this.oV}zct(){return this.Bct}Jct(t){this.Fct=!1,C33.Dn(this.oV),this.oV.push(t)}Kct(t){this.Fct=!1,C33.kn(this.oV,t)}Zct(t){this.Fct=!1,C33.Dn(this.oV);for(var e of t)this.oV.push(e)}Qct(t,e){for(var i of e)t.has(i)||this.Bct.push(i)}t3t(t){for(var e of t)this.oV.push(e);C33.jn(this.Bct,t)}e3t(){C33.Dn(this.Bct)}i3t(t){var e;t&&(this.Dct.t8().J4().s3t()?(this.kct()&&(C33.Dn(this.oV),C33.kn(this.Bct,t.tF().r5()),this.Fct=!1),-1!==(e=this.Bct.indexOf(t))&&(this.oV.push(this.Bct[e]),this.Bct.splice(e,1))):this.Jct(t))}Nct(t){C33.jn(this.oV,t),C33.jn(this.Bct,t)}}}{let C33=self.We;C33.r3t=class EventStack extends C33.nh{constructor(t){super(),this.h3t=t,this.i3=this.h3t.Dx(),this.bct=[],this.bct.push(C33.oh(C33.n3t,this,null)),this.H1=0,this.a3t=[]}lh(){for(var t of this.bct)t.lh();C33.Dn(this.bct),C33.Dn(this.a3t),this.h3t=null,this.i3=null}U4(){return this.h3t}Dx(){return this.i3}t8(){return this.bct[this.H1]}o3t(){return this.bct}l3t(){return this.H1}e8(t){var e,i=this.bct,s=++this.H1;return s===i.length?(e=C33.oh(C33.n3t,this,t),i.push(e),e):((e=i[s]).lf(t),e)}m8(){--this.H1}u3t(t){this.a3t.push(t)}c3t(){this.a3t.pop()}iL(){var t=this.a3t;return 0===t.length?null:t.at(-1)}}}{let C33=self.We;C33.n3t=class EventStackFrame extends C33.nh{constructor(t,e){super(),this.bct=t,this.i3=this.bct.Dx(),this.f3t=e,this.d3t=0,this.C3t=0,this.p3t=!1,this.m3t=!1,this.v3t=null,this.S3t=0,this.g3t=0,this.T3t=null}lh(){this.lf(null),this.bct=null,this.i3=null}lf(t){this.f3t=t,this.d3t=0,this.C3t=0,this.p3t=!1,this.m3t=!1,this.T3t=null}_3t(t,e){this.f3t=t,this.d3t=0,this.C3t=e}E3t(){this.d3t=0,this.C3t=0}J4(){return this.f3t}y3t(t){this.f3t=t}A3t(){return this.d3t}I3t(t){this.d3t=t}R3t(){return this.C3t}M3t(t){this.C3t=t}w3t(t){this.p3t=!!t}b3t(){return this.p3t}O3t(t){this.m3t=!!t}G3t(){return this.m3t}P3t(t){this.v3t=t}L3t(){return this.v3t}x3t(t,e){this.S3t=t,this.g3t=e}rL(){return this.S3t}hL(t){this.g3t=t}N3t(){return this.g3t}D3t(){var t=this.f3t;return!!t.F3t()||this.d3t<t.B3t()-1&&!!t.Qk().length}$3t(t){this.T3t=t}k3t(){return this.T3t}}}{let C33=self.We;C33.W3t=class LocalVarStack extends C33.nh{constructor(t){super(),this.h3t=t,this.i3=this.h3t.Dx(),this.bct=[],this.H1=-1,this.Gct=null,this.V3t=[]}lh(){C33.Dn(this.bct),this.h3t=null,this.i3=null}H3t(t){this.V3t=t;t=this.V3t.slice(0);this.bct.push(t),this.H1=0,this.Gct=t}U4(){return this.h3t}Dx(){return this.i3}U3t(){return this.Gct}e8(){var t=++this.H1,e=this.bct;t===e.length?e.push(this.V3t.slice(0)):C33.kn(e[t],this.V3t),this.Gct=e[t]}m8(){this.Gct=this.bct[--this.H1]}}}{let C33=self.We;C33.j3t=class LoopStack extends C33.nh{constructor(t){super(),this.h3t=t,this.i3=this.h3t.Dx(),this.bct=[],this.H1=-1}lh(){C33.Dn(this.bct),this.h3t=null,this.i3=null}U4(){return this.h3t}Dx(){return this.i3}X3t(){return 0<=this.H1}U3t(){return this.bct[this.H1]}e8(){var t;return++this.H1,this.H1===this.bct.length?(t=C33.oh(C33.Y3t,this),this.bct.push(t),t):((t=this.bct[this.H1]).lf(),t)}m8(){--this.H1}q3t(e){var i=this.bct;for(let t=this.H1;0<=t;--t){var s=i[t];if(s.qc()===e)return s}return null}z3t(){return this.bct.slice(0,this.H1+1)}}}{let C33=self.We;C33.Y3t=class Loop extends C33.nh{constructor(t){super(),this.J3t=t,this.dh="",this.H1=0,this.K3t=!1,this.Z3t=NaN}lf(){this.dh="",this.H1=0,this.K3t=!1,this.Z3t=NaN}s8(t){this.dh=t}qc(){return this.dh}d8(t){this.H1=t}f4(){return this.H1}V$(){this.K3t=!0}p8(){return this.K3t}Q3t(t){this.Z3t=t}tft(){return this.Z3t}}}{let C33=self.We;C33.eft=class ArrayStack extends C33.nh{constructor(){super(),this.bct=[],this.H1=-1}lh(){C33.Dn(this.bct)}U3t(){return this.bct[this.H1]}e8(){var t;return++this.H1,this.H1===this.bct.length?(this.bct.push(t=[]),t):this.bct[this.H1]}m8(){--this.H1}}}{let SortSolArray2=function(t,e){return t.f4()-e.f4()},IsSolArrayIdentical2=function(i,s){for(let t=0,e=i.length;t<e;++t)if(i[t]!==s[t])return!1;return!0},C33=(SortSolArray=SortSolArray2,IsSolArrayIdentical=IsSolArrayIdentical2,self.We),assert=self.assert;C33.ift=class EventSheetManager extends C33.nh{constructor(t){super(),this.i3=t,this.rft=[],this.hft=new Map,this.nft=[],this.aft=new Map,this.oft=new Map,this.lft=new Map,this.uft=new Map,this.cft=new Map,this.fft=new Map,this.dft=0,this.Cft=[],this.pft=[],this.mft=[],this.vft=new Map,this.Sft=new Map,this.Dct=C33.oh(C33.r3t,this),this.gft=C33.oh(C33.W3t,this),this.J3t=C33.oh(C33.j3t,this),this.Tft=[],this._ft=[],this.Eft=[],this.yft=0,this.Aft=0,this.Ift=0,this.Rft=[],this.Mft=[],this.wft=[],this.bft=new Map,this.Oft=new Map,self.c3_callFunction=(t,e)=>this.Gft(t,e)}lh(){this.$q(),this.Dct.lh(),this.Dct=null,this.gft.lh(),this.gft=null,C33.Dn(this._ft),C33.Dn(this.Eft),this.i3=null,C33.Dn(this.rft),this.hft.clear()}W_(t){t=C33.oh(C33.Pft,this,t);this.rft.push(t),this.hft.set(t.qc().toLowerCase(),t)}Lft(t){this.Tft.push(t)}xft(){for(var t of this.Sft.values())t.Nft();for(var e of this.vft.values())e.xft();for(var i of this.Sft.values())i.xft();for(var s of this.rft)s.xft();for(var r of this.rft)r.rq();for(var h of this.Tft)h.xft(!1);C33.Dn(this.Tft),this.gft.H3t(this.mft)}Dx(){return this.i3}sq(t){return this.hft.get(t.toLowerCase())||null}Dft(t){this.nft.push(t),this.aft.set(t.Fft(),t)}Bft(t){this.oft.set(t.SU(),t)}$ft(t){this.lft.set(t.SU(),t)}kft(t){this.uft.set(t.SU(),t)}Wft(t){switch(t.Vft()){case 0:this.vft.set(t.Hft().toLowerCase(),t);break;case 1:this.Sft.set(t.Hft().toLowerCase(),t)}}Uft(t){this.fft.set(t.SU(),t),(t.JH()?this.Cft:this.pft).push(t)}jft(i){2<=i.length&&i.sort(SortSolArray2);let s=this.cft.get(i.length);s||(s=[],this.cft.set(i.length,s));for(let t=0,e=s.length;t<e;++t){var r=s[t];if(IsSolArrayIdentical2(i,r))return r}return s.push(i),i}Xft(t){return this.mft.push(t.Yft()),this.dft++}sL(){return this.Dct}qft(){return this.sL().t8()}J4(){return this.qft().J4()}zft(){var t=this.qft();return t.J4().Jft(t.A3t())}Kft(){var t=this.qft();return t.J4().Zft(t.R3t())}Qft(){return this.gft}i8(){return this.J3t}t0t(t){var e=[];for(t=t.e0t();t;)C33.Jr(e,t.i0t()),t=t.e0t();return e}s0t(t){var e,i={};for(e of this.t0t(t))i[e.r0t()]=e.h0t();return Object.create(Object.prototype,i)}n0t(t){return this.fft.get(t)||null}a0t(t){return this.oft.get(t)||null}o0t(t){return this.lft.get(t)||null}l0t(t){return this.uft.get(t)||null}j4(t){return this.vft.get(t.toLowerCase())||null}u0t(t,e){let i=this.Sft.get((t.qc()+"."+e).toLowerCase());if(i)return i;if(!t.uU())for(var s of t.c0t())if(i=this.Sft.get((s.qc()+"."+e).toLowerCase()))return i;return null}f0t(){return this.Cft}d0t(){return this.pft}C0t(t){for(var e of this.Cft)e.p0t();if(t)for(var i of this.pft)i.HT()&&i.p0t()}m0t(t){return this.aft.get(t.toLowerCase())||null}v0t(t){t=this.oft.get(t);return t&&t.S0t()?t:null}g0t(){return this.nft}T0t(){for(var t of this.nft)t._0t()}E0t(){for(var t of this.rft)t.y0t()}A0t(t){this.E0t(),this.yft++;for(var e of t.Az()){var i=e.GY();i&&(this.i3.I0t(e),i.fI(),this.i3.R0t())}this.yft--}async M0t(t){this.E0t(),this.yft++;for(var e of this.w0t(t))await this.i3.b0t(e);this.yft--}*w0t(t){for(var e of t.Az()){var i=e.GY();i&&(this.i3.I0t(e),yield*i.O0t(),this.i3.R0t())}}G0t(t,e,i,s){let r=!1;if(!t.BL())return this.P0t(e,i,s);this.Aft++;for(var h of t.Az()){var n=h.GY();if(n){this.i3.I0t(h);for(var a of n.L0t()){a=a.G0t(e,i,s);r=r||a}h=n.G0t(e,i,s);r=r||h,this.i3.R0t()}}return this.Aft--,r}*x0t(t,e,i,s){let r=!1;if(!t.BL())return this.P0t(e,i,s);this.Aft++;for(var h of t.Az()){var n=h.GY();if(n){this.i3.I0t(h);for(var a of n.L0t()){a=yield*a.x0t(e,i,s);r=r||a}h=yield*n.x0t(e,i,s);r=r||h,this.i3.R0t()}}return this.Aft--,r}P0t(t,e,i){return this._ft.push([t,e,i]),!1}N0t(t,e,i){let s=null;var r=new Promise(t=>s=t);return this.Eft.push([t,e,i,s]),r}*D0t(){if(this.i3.F0t())throw new Error("should not be in breakpoint");for(var t=this.i3.WL();this.Eft.length;){var[e,i,s,r]=this.Eft.shift();r(yield*this.x0t(t,e,i,s))}}async B0t(){for(var t of this.D0t())await this.i3.b0t(t)}$0t(t,i,s,r){let h=!1;var t=t.BL(),e=t.GY();if(e){this.Aft++,this.i3.I0t(t);var n=e.L0t();for(let t=0,e=n.length;t<e;++t){var a=n[t].$0t(i,s,r);h=h||a}t=e.$0t(i,s,r);return h=h||t,this.i3.R0t(),this.Aft--,h}}*k0t(t,i,s,r){let h=!1;var t=t.BL(),e=t.GY();if(e){this.Aft++,this.i3.I0t(t);var n=e.L0t();for(let t=0,e=n.length;t<e;++t){var a=yield*n[t].k0t(i,s,r);h=h||a}t=yield*e.k0t(i,s,r);return h=h||t,this.i3.R0t(),this.Aft--,h}}W0t(){return this.Aft}V0t(){return 0<this.W0t()}H0t(){return++this.Aft}U0t(){--this.Aft}j0t(){return 0<this.yft}d5(){return this.j0t()||this.V0t()}wq(t){for(var[e,i,s]of this._ft)this.G0t(t,e,i,s);C33.Dn(this._ft)}c5(t){t?this.Ift++:this.Ift--}oF(){return 0<this.Ift}X0t(i){for(let t=0,e=i.length;t<e;++t)i[t].Y0t().Ku()}q0t(i){for(let t=0,e=i.length;t<e;++t)i[t].Y0t().Lct()}u8(i){for(let t=0,e=i.length;t<e;++t)i[t].Y0t().xct()}f8(i){for(let t=0,e=i.length;t<e;++t)i[t].Y0t().m8()}K4(e){var i=new Set,s=this.Dct.o3t(),r=this.Dct.l3t();for(let t=0;t<=r;++t){var h=s[t].k3t();if(h)for(var n of h)e&&e.has(n)||i.add(n)}return i}z0t(t){t=new Set([...t]),t=this.K4(t);if(0<t.size){for(var e of t)e.Y0t().Lct();return[...t]}return null}J0t(){var t=C33.oh(C33.K0t,this);return this.Rft.push(t),t}Z0t(){return this.Rft}Q0t(){if(this.Rft.length){var s=this.qft();let i=!1;this.yft++;for(let t=0,e=this.Rft.length;t<e;++t){var r=this.Rft[t];r.tdt()&&r.edt(s),r.idt()&&(i=!0)}i&&(this.sdt(),s.lf(null)),this.yft--}}async rdt(){if(this.Rft.length){var s=this.qft();let i=!1;this.yft++;for(let t=0,e=this.Rft.length;t<e;++t){var r=this.Rft[t];r.tdt()&&await r.hdt(s),r.idt()&&(i=!0)}i&&(this.sdt(),s.lf(null)),this.yft--}}sdt(){var t;for(t of C33.Un(this.Rft,t=>t.idt()))t.lh()}$q(){for(var t of this.Rft)t.lh();C33.Dn(this.Rft)}ndt(t){for(var e of this.Rft)e.Nct(t);for(var i of t){var s=this.Oft.get(i);if(this.Oft.delete(i),s)for(var{resolve:r}of s.adt.values())r(!0)}}odt(t){this.Mft.push(t)}ldt(){C33.Dn(this.Mft)}udt(){var t=Promise.all(this.Mft);return this.Mft=[],t}nL(t){var e,i=t.toLowerCase();this.wft.push(i),this.i3.FF(C33.Mq.Rq.Iq.cdt,null),this.wft.pop();for(e of this.i3.U4().Z0t())e.fdt()&&e.ddt()===i&&e.Cdt();t=this.bft.get(i);t&&(t.resolve(),this.bft.delete(i))}oL(t){var t=t.toLowerCase(),i=this.bft.get(t);if(i)return i.promise;{let e=null;i=new Promise(t=>e=t);return this.bft.set(t,{promise:i,resolve:e}),i}}pdt(){if(0===this.wft.length)throw new Error("not in a signal");return this.wft.at(-1)}mdt(t){let e=this.Oft.get(t);return e||(e={vdt:[],adt:new Map},this.Oft.set(t,e)),e}IF(t,e){var i,s=this.mdt(t),r=e.toLowerCase();s.vdt.push(r),this.i3.FF(t.YN().gdt().Iq.Sdt,t),s.vdt.pop();for(i of this.i3.U4().Z0t())i.Tdt()&&i.ddt()===r&&i._dt(t);e=s.adt.get(r);e&&(e.resolve(!1),s.adt.delete(r)),0===s.vdt.length&&0===s.adt.size&&this.Oft.delete(t)}RF(t,i){var t=this.mdt(t),i=i.toLowerCase(),s=t.adt.get(i);if(s)return s.promise;{let e=null;s=new Promise(t=>e=t);return t.adt.set(i,{promise:s,resolve:e}),s}}Edt(t){t=this.mdt(t);if(t&&0!==t.vdt.length)return t.vdt.at(-1);throw new Error("not in a signal")}NX(){return{groups:this.ydt(),cnds:this.Adt(),acts:this.Idt(),vars:this.Rdt(),waits:this.Mdt()}}DX(t){this.wdt(t.groups),this.bdt(t.cnds),this.Odt(t.acts),this.Gdt(t.vars),this.Pdt(t.waits)}ydt(){var t,e={};for(t of this.g0t())e[t.SU().toString()]=t.Ldt();return e}wdt(t){for(var[e,i]of Object.entries(t)){e=parseInt(e,10),e=this.v0t(e);e&&e.xdt(i)}}Adt(){var t,e,i={};for([t,e]of this.lft){var s=e.NX();s&&(i[t.toString()]=s)}return i}bdt(t){var e,i,s,r,h=new Map;for([e,i]of Object.entries(t))h.set(parseInt(e,10),i);for([s,r]of this.lft)r.DX(h.get(s)||null)}Idt(){var t,e,i={};for([t,e]of this.uft){var s=e.NX();s&&(i[t.toString()]=s)}return i}Odt(t){var e,i,s,r,h=new Map;for([e,i]of Object.entries(t))h.set(parseInt(e,10),i);for([s,r]of this.uft)r.DX(h.get(s)||null)}Rdt(){var t,e,i={};for([t,e]of this.fft)e.Ndt()||!e.JH()&&!e.HT()||(i[t.toString()]=e.Vit());return i}Gdt(t){for(var[e,i]of Object.entries(t)){e=parseInt(e,10),e=this.n0t(e);e&&e.Ast(i)}}Mdt(){return this.Rft.filter(t=>!t.Ddt()).map(t=>t.NX())}Pdt(t){this.$q();for(var e of t){e=C33.K0t.Fdt(this,e);e&&this.Rft.push(e)}}Bdt(){return[...this.i3.WL().Az()].map(t=>t.GY()).filter(t=>t).map(t=>t.$dt())}kdt(t){for(;t;){var e=t.e0t();if(e instanceof C33.Wdt)return e;t=e}return null}Gft(t,e){Array.isArray(e)||(e=[]);t=this.j4(t.toLowerCase());if(!t)return null;if(!t.qu())return t.X4();var i=t.Vdt();if(e.length<i.length)for(e=e.slice(0);e.push(i[e.length].Yft()),e.length<i.length;);var s=t.q4();return s.Z4(s.z4(),!1,t.tL(),t.X4(),...e)}}}{let C33=self.We;C33.Pft=class EventSheet extends C33.nh{constructor(t,e){super(),this.h3t=t,this.i3=t.Dx(),this.dh=e[0],this.Hdt=[],this.Udt=new Map,this.jdt=new Map,this.Xdt=new Map,this.Ydt=!1,this.qdt=[],this.zdt=[],this.Jdt=new Set;for(var i of e[1])this.Kdt(i,null,this.Hdt);this.Zdt=this.i3.hz()?{type:"sheet",name:this.dh,Qdt:0,children:[]}:null}lh(){this.h3t=null,this.i3=null}Kdt(t,e,i){switch(t[0]){case 0:case 3:this.tCt(t,e,i);break;case 1:this.eCt(t,e,i);break;case 2:this.iCt(t,e,i);break;case 4:this.sCt(t,e);break;case 5:this.rCt(t,e,i);break;case 6:this.hCt(t,e);break;default:throw new Error("invalid event type")}}tCt(t,e,i){var s=C33.nCt.W_(this,e,t);if(s.s3t()){i.push(s);var r=s.aCt();for(let t=0,e=r.length;t<e;++t)r[t].oCt()&&this.lCt(s,t)}else s.oCt()?this.lCt(s,0):i.push(s)}sCt(t,e){e=C33.Wdt.uCt(this,e,t);this.h3t.Wft(e)}hCt(t,e){e=C33.Wdt.cCt(this,e,t);this.h3t.Wft(e)}eCt(t,e,i){e=C33.fCt.W_(this,e,t);i.push(e)}iCt(t,e,i){e=C33.dCt.W_(this,e,t);i.push(e)}rCt(t,e,i){e=C33.CCt.W_(this,e,t);i.push(e)}lCt(s,r){s.s3t()||this.h3t.Lft(s);var h=s.Jft(r),n=h.pCt(),a=h.tF();if(h.mCt()){let t=this.jdt.get(a);t||(t=new Map,this.jdt.set(a,t));var o=h.vCt().toLowerCase();let e=t.get(n),i=(e||(e=new Map,t.set(n,e)),e.get(o));i||(i=[],e.set(o,i)),i.push([s,r])}else{let t=this.Udt.get(a);t||(t={SCt:new Map,gCt:new Map},this.Udt.set(a,t));o=h.XB();let e,i=(o?(e=t.gCt.get(o))||(e=new Map,t.gCt.set(o,e)):e=t.SCt,e.get(n));i||(i=[],e.set(n,i)),i.push([s,r])}}xft(){var i=this.Hdt;for(let t=0,e=i.length;t<e;++t){var s=t<e-1&&i[t+1]instanceof C33.nCt&&i[t+1].TCt();i[t].xft(s)}}_Ct(t){this.qdt.push(t)}rq(){C33.Dn(this.zdt),this.ECt(this),this.Jdt.clear()}ECt(t){var e,i=t.zdt,s=t.Jdt;for(e of this.qdt){var r=e.yCt();e.ACt()&&t!==r&&!s.has(r)&&(s.add(r),r.ECt(t),i.push(r))}}L0t(){return this.zdt}U4(){return this.h3t}Dx(){return this.i3}qc(){return this.dh}ICt(t,e){this.Xdt.set(e,t)}RCt(t){return this.Xdt.get(t)||null}y0t(){this.Ydt=!1}fI(){if(!this.Ydt){var t,e=this.i3,i=e.MCt(),s=i?performance.now():0,r=(this.Ydt=!0,this.U4()),h=r.qft();for(t of this.Hdt)t.fI(h),r.X0t(t.Qk()),r.ldt(),e.p5();h.lf(null),i&&(this.Zdt.Qdt+=performance.now()-s)}}*O0t(){if(!this.Ydt){this.Ydt=!0;var t,e=this.i3,i=this.U4(),s=i.qft();for(t of this.Hdt)yield*t.O0t(s),i.X0t(t.Qk()),i.ldt(),e.p5();s.lf(null)}}G0t(i,s,r){if(!s)return this.wCt(i,s,null,null);{var h,n=s.tF();let t=!1,e=this.wCt(i,s,n,r);t=t||e;for(h of n.c0t())e=this.wCt(i,s,h,r),t=t||e}}wCt(t,e,i,s){i=this.Udt.get(i);if(!i)return!1;s=s?i.gCt.get(s):i.SCt;if(!s)return!1;var r,h,i=s.get(t);if(!i)return!1;let n=!1;for([r,h]of i){var a=this.bCt(e,r,h);n=n||a}return n}*x0t(i,s,r){if(!s)return yield*this.OCt(i,s,null,null);{var h,n=s.tF();let t=!1,e=yield*this.OCt(i,s,n,r);t=t||e;for(h of n.c0t())e=yield*this.OCt(i,s,h,r),t=t||e}}*OCt(t,e,i,s){i=this.Udt.get(i);if(!i)return!1;s=s?i.gCt.get(s):i.SCt;if(!s)return!1;var r,h,i=s.get(t);if(!i)return!1;let n=!1;for([r,h]of i){let t;t=r.GCt()?this.bCt(e,r,h):yield*this.PCt(e,r,h),n=n||t}return n}$0t(t,e,i){e=e.tF(),e=this.jdt.get(e);if(!e)return!1;e=e.get(t);if(!e)return!1;var s=e.get(i);if(!s)return!1;let r=!1;for(let t=0,e=s.length;t<e;++t){var h=s[t],h=this.bCt(null,h[0],h[1]);r=r||h}return r}*k0t(t,e,i){e=e.tF(),e=this.jdt.get(e);if(!e)return!1;e=e.get(t);if(!e)return!1;var s=e.get(i);if(!s)return!1;let r=!1;for(let e=0,t=s.length;e<t;++e){var h=s[e],n=h[0],h=h[1];let t;t=n.GCt()?this.bCt(null,n,h):yield*this.PCt(null,n,h),r=r||t}return r}bCt(t,e,i){var s=this.i3,r=this.h3t,h=r.J4(),n=r.sL(),a=r.W0t();let o=!1;h&&r.q0t(h.z4()),r.q0t(e.z4());var l=1<a,u=(l&&r.Qft().e8(),n.e8(e));t&&(e.aCt()[i].tF().h5().Jct(t),t.fF())&&t.LCt();let c=!0;if(e.W7()){var f=e.xCt();for(let t=0,e=f.length;t<e;++t)if(!f[t].NCt(u)){c=!1;break}}return c&&(e.s3t()?e.DCt(u,i):e.fI(u),o=u.b3t()),n.m8(),l&&r.Qft().m8(),r.f8(e.z4()),h&&r.f8(h.z4()),h||1!==a||(r.ldt(),r.oF())||s.p5(),o}*PCt(t,e,i){var s=this.i3,r=this.h3t,h=r.J4(),n=r.sL(),a=r.W0t();let o=!1;h&&r.q0t(h.z4()),r.q0t(e.z4());var l=1<a,u=(l&&r.Qft().e8(),n.e8(e));t&&(e.aCt()[i].tF().h5().Jct(t),t.fF())&&t.LCt();let c=!0;if(e.W7()){var f=e.xCt();for(let t=0,e=f.length;t<e;++t)if(!(yield*f[t].FCt(u))){c=!1;break}}return c&&(e.s3t()?yield*e.BCt(u,i):yield*e.O0t(u),o=u.b3t()),n.m8(),l&&r.Qft().m8(),r.f8(e.z4()),h&&r.f8(h.z4()),h||1!==a||(r.ldt(),r.oF())||s.p5(),o}$dt(){return this.Zdt}}}{let NoActions2=function(t,e){return!0},C33=(NoActions=NoActions2,self.We),EMPTY_ARRAY=[];function*DebugNoActions(t,e){return!0}C33.nCt=class EventBlock extends C33.nh{constructor(t,e,i){super(),this.zX=t,this.i3=t.Dx(),this.$Ct=e,this.kCt=null,this.Dct=this.i3.U4().sL(),this.WCt=[],this.VCt=[],this.HCt=!1,this.UCt=!1,this.jCt=!1,this.XCt=!1,this.YCt=!!i[2],this.qCt=!1,this.zCt=null,this.JCt=[],this.rrt=[],this.KCt=[],this.ZCt=NoActions2,this.QCt=DebugNoActions,this.tpt=!1,this.ept=!1,this.ipt="",this.spt=!1,this.rpt=null,this.Zdt=null,this.kV=i[4],this.hpt=i[5],this.zX.ICt(this,this.hpt),this.npt=this.i3.hz()?{apt:i[3][0],opt:i[3][1],lpt:!1,upt:!1,cpt:!1,fpt:!1}:null,this.U4().Bft(this),3===i[0]&&this.dpt(i[1]);let s=0;for(var r of i[6]){r=C33.Cpt.W_(this,r,s++);this.JCt.push(r),this.ppt(r.tF())}s=0;for(var h of i[7]){h=C33.mpt.W_(this,h,s++);this.rrt.push(h)}var n;if(9===i.length)for(n of i[8])this.zX.Kdt(n,this,this.KCt);this.JCt.length&&(this.qCt=null===this.JCt[0].tF()&&this.JCt[0].pCt()===C33.Mq.Rq.Iq.vpt),0===this.JCt.length&&(this.JCt=EMPTY_ARRAY),0===this.rrt.length&&(this.rrt=EMPTY_ARRAY),0===this.KCt.length&&(this.KCt=EMPTY_ARRAY)}static W_(t,e,i){return C33.oh(C33.nCt,t,e,i)}dpt(t){this.tpt=!0,this.ept=!!t[0],this.spt=this.ept,this.ipt=t[1].toLowerCase(),this.rpt=[],this.U4().Dft(this),this.i3.hz()&&(this.Zdt={type:"group",name:t[1],Qdt:0,children:[]})}Spt(t){this.rpt.push(t)}gpt(t,e){for(var i of t.UY().Gq())e.includes(i)||e.push(i)}Tpt(t,e){if(t)if(e.includes(t)||e.push(t),t.uU())for(var i of t._pt())i.fF()&&this.gpt(i,e);else t.fF()&&this.gpt(t,e)}ppt(t){this.Tpt(t,this.WCt)}Ept(t){this.Tpt(t,this.VCt)}ypt(){this.WCt=this.i3.lU()}xft(t){this.XCt=!!t,this.Apt(),this.Ipt();for(var e of this.JCt)e.xft();if(0<this.rrt.length){let t=!1;for(var i of this.rrt)i.xft(),i.Rpt()&&(t=!0);t?(this.ZCt=this.Mpt,this.QCt=this.wpt):(this.ZCt=this.bpt,this.QCt=this.Opt)}var s=this.KCt;for(let t=0,e=s.length;t<e;++t){var r=t<e-1&&s[t+1]instanceof C33.nCt&&s[t+1].TCt();s[t].xft(r)}this.npt&&this.Gpt(),this.Zdt&&this.Ppt().$dt().children.push(this.Zdt)}$dt(){return this.Zdt}Ppt(){let t=this.W7();for(;t;){if(t.S0t())return t;t=t.W7()}return this.zX}Gpt(){var t=this.npt;t.lpt=this.JCt.every(t=>t.GCt()),t.upt=this.rrt.every(t=>t.GCt()),t.cpt=this.KCt.every(t=>t.GCt()),t.fpt=t.lpt&&t.upt&&t.cpt}Lpt(){let t=this;for(;t.Gpt(),t=t.W7(););}Apt(){if(this.S0t()){let t=this.W7();for(this.jCt=!0;t;){if(!t.S0t()){this.jCt=!1;break}t=t.W7()}}}xpt(){var e=this.i3.lU();if(this.WCt===e)this.VCt=e;else{this.VCt=C33.qn(this.WCt);let t=this.W7();for(;t;){for(var i of t.WCt)this.Ept(i);t=t.W7()}e=this.U4();this.WCt=e.jft(this.WCt),this.VCt=e.jft(this.VCt)}}Ipt(){if(this.Npt()){this.zCt=[];let t=this.W7();for(;t;)this.zCt.push(t),t=t.W7();this.zCt.reverse()}}Dpt(){this.UCt=!0,this.$Ct&&this.$Ct.Dpt()}F3t(){return this.UCt}Qk(){return this.WCt}z4(){return this.HCt||(this.HCt=!0,this.xpt()),this.VCt}Fpt(t){return this.WCt.includes(t)}xCt(){return this.zCt}GY(){return this.zX}U4(){return this.zX.U4()}Dx(){return this.i3}W7(){return this.$Ct}Bpt(t){this.kCt=t}e0t(){return this.kCt||this.$Ct}$pt(){return this.hpt}kpt(){return this.npt&&this.npt.opt}Wpt(){return this.kpt()&&this.npt.apt}Vpt(t){this.npt.apt=!!t,this.Lpt()}S0t(){return this.tpt}Hpt(){return this.jCt}TCt(){return this.qCt}Upt(){return this.XCt}Fft(){return this.ipt}Ldt(){return this.spt}_0t(){this.xdt(this.ept)}xdt(t){if(t=!!t,!this.tpt)throw new Error("not a group");if(this.spt!==t){this.spt=t;for(var e of this.rpt)e.jpt();this.rpt.length&&(t=this.i3.lx().GY())&&t.rq()}}SU(){return this.kV}s3t(){return this.YCt}oCt(){return this.JCt.length&&this.JCt[0].oCt()}Xpt(){return this.kCt&&this.kCt instanceof C33.Wdt}Npt(){return this.Xpt()||this.JCt.some(t=>t.oCt())}aCt(){return this.JCt}B3t(){return this.JCt.length}Jft(t){if((t=Math.floor(t))<0||t>=this.JCt.length)throw new RangeError("invalid condition index");return this.JCt[t]}Ypt(t){return this.Jft(t)}qpt(t){let e=t.f4();if(0!==e){--e;for(var i=t.zpt()?t.Jpt():t.tF();0<=e;--e){var s=this.JCt[e];if(i===s.tF()||s.zpt()&&s.Jpt()===i)return!1}}return!0}Kpt(){return this.rrt}Zpt(){return this.rrt.length}Zft(t){if((t=Math.floor(t))<0||t>=this.rrt.length)throw new RangeError("invalid action index");return this.rrt[t]}Qpt(e){e=Math.floor(e);var t=this.rrt.find(t=>t.t1t()===e);if(t)return t;throw new RangeError("invalid action debug index")}e1t(t){return 0<=(t=Math.floor(t))&&t<this.rrt.length}i1t(){return this.KCt}i0t(){return this.KCt.filter(t=>t instanceof C33.fCt)}NCt(i){i.y3t(this);var s=this.JCt;let r=0===s.length;for(let t=0,e=s.length;t<e;++t){var h=s[t];if(i.I3t(t),h.n$())throw new Error("trigger cannot be used as sub-event to a loop");if(h.fI())r=!0;else if(!this.YCt)return!1}return!this.YCt||r}DCt(t,e){t.y3t(this),t.I3t(e),this.JCt[e].fI()&&(this.ZCt(t,0)&&this.s1t(t),t.w3t(!0))}*FCt(i){i.y3t(this);var s=this.JCt;let r=0===s.length;for(let e=0,t=s.length;e<t;++e){var h=s[e];if(i.I3t(e),h.n$())throw new Error("trigger cannot be used as sub-event to a loop");let t;if(t=h.GCt()?h.fI():yield*h.O0t())r=!0;else if(!this.YCt)return!1}return!this.YCt||r}*BCt(e,t){e.y3t(this),e.I3t(t);t=this.JCt[t];let i;if(i=t.GCt()?t.fI():yield*t.O0t()){let t;(t=this.r1t()?this.ZCt(e,0):yield*this.QCt(e,0))&&(this.h1t()?this.s1t():yield*this.n1t()),e.w3t(!0)}}fI(t){t.y3t(this),this.qCt||t.O3t(!1),this.YCt?this.a1t(t):this.o1t(t)}*O0t(t){(this.Wpt()||this.i3.l1t())&&(yield this),t.y3t(this),this.qCt||t.O3t(!1),this.YCt?yield*this.u1t(t):yield*this.c1t(t)}a1t(i){var s=this.JCt;let r=0===s.length;for(let t=0,e=s.length;t<e;++t){var h=s[t];h.oCt()||(i.I3t(t),h=h.fI(),r=r||h)}i.w3t(r),r&&(this.ZCt(i,0)&&this.s1t(i),this.XCt)&&i.O3t(!0)}*u1t(i){var s=this.JCt;let r=0===s.length;for(let e=0,t=s.length;e<t;++e){var h=s[e];if(!h.oCt()){i.I3t(e);let t;t=h.GCt()?h.fI():yield*h.O0t(),r=r||t}}if(i.w3t(r),r){let t;(t=this.r1t()?this.ZCt(i,0):yield*this.QCt(i,0))&&(this.h1t()?this.s1t():yield*this.n1t()),this.XCt&&i.O3t(!0)}}o1t(i){var s=this.JCt;for(let t=0,e=s.length;t<e;++t){var r=s[t],r=(i.I3t(t),r.fI());if(!r)return void i.w3t(!1)}i.w3t(!0),this.ZCt(i,0)&&this.s1t(i),i.b3t()&&this.XCt&&i.O3t(!0)}*c1t(i){var s=this.JCt;for(let e=0,t=s.length;e<t;++e){var r=s[e];i.I3t(e);let t;if(!(t=r.GCt()?r.fI():yield*r.O0t()))return void i.w3t(!1)}i.w3t(!0);let t;(t=this.r1t()?this.ZCt(i,0):yield*this.QCt(i,0))&&(this.h1t()?this.s1t():yield*this.n1t()),i.b3t()&&this.XCt&&i.O3t(!0)}bpt(i,s){var r=this.rrt;for(let t=s,e=r.length;t<e;++t){var h=r[t];i.M3t(t),h.fI()}return!0}*Opt(i,s){var r=this.rrt;for(let t=s,e=r.length;t<e;++t){var h=r[t];i.M3t(t),h.GCt()?h.fI():yield*h.O0t()}return!0}Mpt(i,s){var r=this.U4(),h=this.rrt;for(let t=s,e=h.length;t<e;++t){var n=h[t],a=(i.M3t(t),n.fI());if(n.f1t()&&!0===a)return!1;n.d1t()&&a instanceof Promise&&r.odt(a)}return!0}*wpt(i,s){var r=this.U4(),h=this.rrt;for(let e=s,t=h.length;e<t;++e){var n=h[e];i.M3t(e);let t;if(t=n.GCt()?n.fI():yield*n.O0t(),n.f1t()&&!0===t)return!1;n.d1t()&&t instanceof Promise&&r.odt(t)}return!0}C1t(t){this.ZCt(t,t.R3t())&&this.s1t()}*p1t(t){(yield*this.QCt(t,t.R3t()))&&(yield*this.n1t())}s1t(){var t,e,i,s;this.KCt.length&&(e=(t=this.S0t()&&this.i3.MCt())?performance.now():0,s=(i=this.Dct).e8(this),this.UCt?this.m1t(s):this.v1t(s),i.m8(),t)&&(this.Zdt.Qdt+=performance.now()-e)}m1t(s){var r=this.tpt,h=this.jCt,n=this.U4(),a=this.KCt;for(let t=0,e=a.length,i=e-1;t<e;++t){var o=a[t],l=o.Qk(),u=!h||!r&&t<i;u&&n.u8(l),o.fI(s),u?n.f8(l):n.X0t(l)}}v1t(i){var s=this.KCt;for(let t=0,e=s.length;t<e;++t)s[t].fI(i)}*n1t(){var t,e;this.KCt.length&&(e=(t=this.Dct).e8(this),this.UCt?yield*this.S1t(e):yield*this.g1t(e),t.m8())}*S1t(s){var r=this.tpt,h=this.jCt,n=this.U4(),a=this.KCt;for(let t=0,e=a.length,i=e-1;t<e;++t){var o=a[t],l=o.Qk(),u=!h||!r&&t<i;u&&n.u8(l),yield*o.O0t(s),u?n.f8(l):n.X0t(l)}}*g1t(i){var s=this.KCt;for(let t=0,e=s.length;t<e;++t)yield*s[t].O0t(i)}c8(i,s){s.E3t();var r=this.JCt;if(!this.s3t())for(let t=i.A3t()+1,e=r.length;t<e;++t){var h=r[t],h=(s.I3t(t),h.fI());if(!h)return!1}return this.ZCt(s,0)&&this.s1t(s),!0}*T1t(i,s){s.E3t();var r=this.JCt;if(!this.s3t())for(let e=i.A3t()+1,t=r.length;e<t;++e){var h=r[e];s.I3t(e);let t;if(!(t=h.GCt()?h.fI():yield*h.O0t()))return!1}let t;return(t=this.r1t()?this.ZCt(s,0):yield*this.QCt(s,0))&&(this.h1t()?this.s1t():yield*this.n1t()),!0}GCt(){return!this.Wpt()&&!this.i3.l1t()&&this.npt.fpt}r1t(){return!this.i3.l1t()&&this.npt.upt}h1t(){return!this.i3.l1t()&&this.npt.cpt}_1t(i){if(this.W7()){var s=this.xCt();for(let t=0,e=s.length;t<e;++t)if(!s[t].NCt(i))return!1}return!0}*E1t(i){if(this.W7()){var s=this.xCt();for(let t=0,e=s.length;t<e;++t)if(!(yield*s[t].FCt(i)))return!1}return!0}y1t(t,e,i){var s;0<e.length?i?(s=e.map(t=>t.ni(0)),t.Qft().e8(),this.kCt.A1t(s)):this.kCt.I1t(e):i&&t.Qft().e8()}R1t(t,e,i,s){let r,h;var n=0<t.length;let a=null;var o=this.i3,l=this.Dct,o=o.U4(),u=1<o.H0t(),c=(this.y1t(o,e,u),n&&(i?o.u8(t):o.q0t(t)),null!==s&&(s.M1t?(e=i?s.M1t.h5():s.M1t.Y0t().Pct(),(c=s.w1t.h5()).Kct(e.r5()),c.e3t(),i||s.w1t.b1t()):s.O1t&&((e=s.O1t.h5()).Kct(s.G1t),e.e3t()),s.P1t)&&(a=o.z0t(t)),l.e8(this));return i&&c.$3t(t),this._1t(c)&&(c.y3t(this),(e=this.kCt.d1t())&&([h,r]=this.kCt.L1t()),this.o1t(c),e)&&this.kCt.x1t(h),l.m8(),u&&o.Qft().m8(),null!==a&&o.f8(a),n&&o.f8(t),o.U0t(),r}*N1t(t,e,i,s){let r,h;(this.Wpt()||this.i3.l1t())&&(yield this);var n=0<t.length;let a=null;var o=this.i3,l=this.Dct,o=o.U4(),u=1<o.H0t(),c=(this.y1t(o,e,u),n&&(i?o.u8(t):o.q0t(t)),null!==s&&(s.M1t?(e=i?s.M1t.h5():s.M1t.Y0t().Pct(),(c=s.w1t.h5()).Kct(e.r5()),c.e3t(),i||s.w1t.b1t()):s.O1t&&((e=s.O1t.h5()).Kct(s.G1t),e.e3t()),s.P1t)&&(a=o.z0t(t)),l.e8(this));return i&&c.$3t(t),(yield*this.E1t(c))&&(c.y3t(this),(e=this.kCt.d1t())&&([h,r]=this.kCt.L1t()),yield*this.c1t(c),e)&&this.kCt.x1t(h),l.m8(),u&&o.Qft().m8(),null!==a&&o.f8(a),n&&o.f8(t),o.U0t(),r}D1t(t,e){var i=this.z4(),s=0<i.length,r=this.i3,h=this.Dct,r=r.U4(),n=1<r.H0t(),t=(n&&r.Qft().e8(),this.kCt.A1t(t),s&&(e?r.u8(i):r.q0t(i)),h.e8(this));this._1t(t)&&(t.y3t(this),this.o1t(t)),h.m8(),n&&r.Qft().m8(),s&&r.f8(i),r.U0t()}*F1t(t,e){(this.Wpt()||this.i3.l1t())&&(yield this);var i=this.z4(),s=0<i.length,r=this.i3,h=this.Dct,r=r.U4(),n=1<r.H0t(),t=(n&&r.Qft().e8(),this.kCt.A1t(t),s&&(e?r.u8(i):r.q0t(i)),h.e8(this));(yield*this.E1t(t))&&(t.y3t(this),yield*this.c1t(t)),h.m8(),n&&r.Qft().m8(),s&&r.f8(i),r.U0t()}Z4(t,e,i,s,...r){let h,n;var a=0<t.length,o=this.i3,l=this.Dct,u=o.U4(),c=1<u.H0t(),r=(c&&u.Qft().e8(),0<r.length&&this.kCt.A1t(r),a&&(e?u.u8(t):u.q0t(t)),l.e8(this));return r.x3t(i,s),l.u3t(r),o.r8(!1),this._1t(r)&&(r.y3t(this),(e=this.kCt.d1t())&&([n,h]=this.kCt.L1t()),this.o1t(r),e)&&this.kCt.x1t(n),o.r8(!0),l.m8(),l.c3t(),c&&u.Qft().m8(),a&&u.f8(t),u.U0t(),h||r.N3t()}}}{let C33=self.We,EMPTY_SOL_MODIFIERS=[],hadUserScriptException=!1;C33.CCt=class EventScript extends C33.nh{constructor(t,e,i){super();var s=t.Dx(),r=t.U4(),r=(this.zX=t,this.h3t=r,this.i3=t.Dx(),this.$Ct=e,s.B1t(i[1]));this.$1t=r,this.hpt=i[2],this.zX.ICt(this,this.hpt),this.npt=s.hz()?{apt:i[3][0],opt:i[3][1]}:null}static W_(t,e,i){return C33.oh(C33.CCt,t,e,i)}xft(){var t=this.$1t,e=this.i3.U4().s0t(this);this.$1t=t.bind(null,this.i3.TN(),e)}W7(){return this.$Ct}e0t(){return this.$Ct}GY(){return this.zX}$pt(){return this.hpt}kpt(){return this.npt&&this.npt.opt}Wpt(){return this.kpt()&&this.npt.apt}Vpt(t){this.npt.apt=!!t}TCt(){return!1}Qk(){return EMPTY_SOL_MODIFIERS}z4(){return this.$Ct?this.$Ct.z4():EMPTY_SOL_MODIFIERS}fI(t){t.y3t(this),this.h3t.odt(this.k1t())}async k1t(){try{await this.$1t()}catch(t){console.error(`Unhandled exception running script %c${this.GY().qc()}, event ${this.$pt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),hadUserScriptException||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),hadUserScriptException=!0)}}*O0t(t){t.y3t(this),(this.Wpt()||this.i3.l1t())&&(yield this),this.fI(t)}GCt(){return!this.Wpt()&&!this.i3.l1t()}static W1t(){return hadUserScriptException}static V1t(){hadUserScriptException=!0}}}{let C33=self.We,assert=self.assert;C33.Wdt=class FunctionBlock extends C33.nh{constructor(t,e,i){super(),this.zX=t,this.i3=t.Dx(),this.$Ct=e,this.H1t=0,this.U1t="",this.j1t=0,this.X1t=[],this.Y1t=!0,this.q1t="",this.wct=null,this.z1t=!1,this.J1t=[],this.K1t=!1,this.Z1t=!1,this.Q1t=0,this.tmt=-1,this.emt=new Map,this.imt=C33.nCt.W_(t,e,i),this.imt.Bpt(this)}smt(t){this.H1t=0,this.U1t=t[0],this.j1t=t[1],this.X1t=t[2].map(t=>C33.fCt.W_(this.zX,this,t)),this.Y1t=t[3],this.Z1t=t[4],this.K1t=t[5]}rmt(t){this.H1t=1,this.q1t=t[1],this.wct=this.i3.kH(t[2]),this.imt.ppt(this.wct),this.U1t=this.wct.qc()+"."+this.q1t,this.j1t=t[3],this.X1t=t[4].map(t=>C33.fCt.W_(this.zX,this,t)),this.Y1t=t[5],this.Z1t=t[6],this.K1t=t[7],this.wct.hmt(this)}static uCt(t,e,i){t=C33.oh(C33.Wdt,t,e,i),e=i[1];return t.smt(e),t}static cCt(t,e,i){t=C33.oh(C33.Wdt,t,e,i),e=i[1];return t.rmt(e),t}Nft(){if(this.wct&&this.wct.uU())for(var t of this.wct._pt())if(t.nmt(this.q1t)){this.z1t=!0;break}}xft(){for(var t of this.X1t)t.xft();this.imt.xft(!1)}Vft(){return this.H1t}i0t(){return this.X1t}Vdt(){return this.X1t}Y4(){return this.X1t.length}amt(t){this.J1t.push(t)}omt(){return this.J1t}I1t(i){var s=this.X1t;for(let t=0,e=s.length;t<e;++t)s[t].Ast(i[t].ni(0))}A1t(i){var s=this.X1t;for(let t=0,e=s.length;t<e;++t)s[t].Ast(i[t])}lmt(){return this.X1t.map(t=>t.Vit())}W7(){return this.$Ct}e0t(){return this.$Ct}Hft(){return this.U1t}umt(){return this.q1t}cmt(){return this.z1t}tL(){return this.j1t}tF(){return this.wct}qu(){return this.Y1t}X4(){switch(this.j1t){case 0:return null;case 2:return"";default:return 0}}q4(){return this.imt}Q4(){return this.K1t}d1t(){return this.Z1t}L1t(){var t=this.Q1t++;this.tmt=t;let e;var i=new Promise(t=>e=t);return this.emt.set(t,{resolve:e,fmt:0}),[t,i]}x1t(t){var e=this.emt.get(t);0===e.fmt&&(e.resolve(),this.emt.delete(t)),this.tmt=-1}dmt(){return this.emt.get(this.tmt).fmt++,this.tmt}Cmt(t){this.tmt=t,this.emt.get(t).fmt--}pmt(t,e){var i,s=new Map,r=[];for(i of this.wct.h5().r5()){var h,n=i.tF();n.nmt(this.q1t)?(h=s.get(n),Array.isArray(h)?h.push(i):s.set(n,[i])):r.push(i)}if(0<r.length&&this.imt.R1t(t,e,this.K1t,{O1t:this.wct,G1t:r}),0<s.size)for(var[a,o]of s){var l=a.mmt(this.q1t).q4(),u=[...new Set([...t,...l.Qk()])];l.R1t(u,e,this.K1t,{O1t:a,G1t:o})}}*vmt(t,e){var i,s=new Map,r=[];for(i of this.wct.h5().r5()){var h,n=i.tF();n.nmt(this.q1t)?(h=s.get(n),Array.isArray(h)?h.push(i):s.set(n,[i])):r.push(i)}if(0<r.length&&(yield*this.imt.N1t(t,e,this.K1t,{O1t:this.wct,G1t:r})),0<s.size)for(var[a,o]of s){var l=a.mmt(this.q1t).q4(),u=[...new Set([...t,...l.Qk()])];yield*l.N1t(u,e,this.K1t,{O1t:a,G1t:o})}}}}{let C33=self.We,EMPTY_SOL_MODIFIERS=[];C33.fCt=class EventVariable extends C33.nh{constructor(t,e,i){super();var s=t.U4();this.zX=t,this.h3t=s,this.i3=t.Dx(),this.$Ct=e,this.gft=s.Qft(),this.dh=i[1],this.u3=i[2],this.Smt=i[3],this.pT=!!i[4],this.gmt=!!i[5],this.Tmt=e instanceof C33.Wdt,this.kV=i[6],this._mt=this.i3.r0t(i[8]),this.Emt=t=>this.Ast(t),this.ymt=()=>this.Vit(),this.Amt=!this.$Ct||this.pT||this.gmt,this.trt=this.Smt,this.Imt=-1,this.Rmt()&&(this.trt=this.trt?1:0),!this.Mmt()||this.HT()||this.Ndt()||(this.Imt=s.Xft(this)),s.Uft(this)}static W_(t,e,i){return C33.oh(C33.fCt,t,e,i)}xft(){var t;!this.Mmt()||this.HT()||this.Ndt()||this.wmt()||(t=this.h3t.kdt(this))&&t.amt(this)}qc(){return this.dh}r0t(){return this._mt}W7(){return this.$Ct}e0t(){return this.W7()}JH(){return!this.W7()}Mmt(){return!this.JH()}wmt(){return this.Tmt}HT(){return this.pT}Ndt(){return this.gmt}Cs(){return 0===this.u3}Rs(){return 1===this.u3}Rmt(){return 2===this.u3}TCt(){return!1}SU(){return this.kV}Yft(){return this.Smt}Qk(){return EMPTY_SOL_MODIFIERS}fI(t){!this.Mmt()||this.HT()||this.Ndt()||this.Ast(this.Yft())}GCt(){return!0}*O0t(t){this.fI(t)}Ast(t){this.Cs()?"number"!=typeof t&&(t=parseFloat(t)):this.Rs()?"string"!=typeof t&&(t=t.toString()):this.Rmt()&&(t=t?1:0),this.Amt?this.trt=t:this.gft.U3t()[this.Imt]=t}Vit(){return this.Amt?this.trt:this.gft.U3t()[this.Imt]}bmt(){let t=this.Vit();return t=this.Rmt()?!!t:t}p0t(){this.trt=this.Smt}h0t(){return{configurable:!1,enumerable:!0,get:this.ymt,set:this.Emt}}}}{let C33=self.We,assert=self.assert,EMPTY_SOL_MODIFIERS=[];C33.dCt=class EventInclude extends C33.nh{constructor(t,e,i){super();var s=t.U4();this.zX=t,this.h3t=s,this.i3=t.Dx(),this.$Ct=e,this.Omt=null,this.Gmt=i[1],this.nf=!0}static W_(t,e,i){return C33.oh(C33.dCt,t,e,i)}xft(){this.Omt=this.h3t.sq(this.Gmt),this.zX._Ct(this);let t=this.W7();for(;t;)t instanceof C33.nCt&&t.S0t()&&t.Spt(this),t=t.W7();this.jpt(),this.i3.hz()&&this.zX.$dt().children.push(this.Omt.$dt())}W7(){return this.$Ct}Qk(){return EMPTY_SOL_MODIFIERS}yCt(){return this.Omt}fI(t){var e=!!this.W7(),i=this.i3.lU();e&&this.h3t.q0t(i),this.Omt.fI(),e&&this.h3t.f8(i)}*O0t(t){var e=!!this.W7(),i=this.i3.lU();e&&this.h3t.q0t(i),yield*this.Omt.O0t(),e&&this.h3t.f8(i)}GCt(){return!1}ACt(){return this.nf}jpt(){let t=this.W7();for(;t;){if(t instanceof C33.nCt&&t.S0t()&&!t.Ldt())return void(this.nf=!1);t=t.W7()}this.nf=!0}}}{let WrapIndex2=function(t,e){return e<=t?t%e:(t<0&&(t<=-e&&(t%=e),t<0)&&(t+=e),t)},C33=(WrapIndex=WrapIndex2,self.We),assert=self.assert;C33.Pmt=class ExpNode extends C33.nh{constructor(t){super(),this.bg=t,this.i3=t.Dx()}xft(){}static Lmt(t,e){var i=e[0],s=[BehaviorExpressionNode,ObjectExpressionNode,InstVarExpressionNode,EventVarExpNode,SystemExpressionExpNode,CallFunctionExpressionExpNode];return C33.oh(s[i],t,e)}};class SystemExpressionExpNode extends C33.Pmt{constructor(t,e){super(t),this.xmt=this.i3.Nmt(),this.$1t=this.i3.B1t(e[1]),this.$1t!==C33.Mq.Rq.vrt.random&&this.$1t!==C33.Mq.Rq.vrt.Dmt||this.bg.Fmt()}Bmt(){return this.xmt.$mt(this.$1t,this.xmt)}}class CallFunctionExpressionExpNode extends C33.Pmt{constructor(t,e){super(t),this.kmt=null,this.U1t=e[1],this.bg.Fmt()}xft(){var t=this.i3.U4(),e=(this.kmt=t.j4(this.U1t),this.U1t=null,this.bg.q4()),i=this.kmt.q4();this.Wmt=[...new Set([...e.z4(),...i.z4()])],this.Wmt=t.jft(this.Wmt)}Bmt(){var t,e=this.kmt;if(e.qu())return t=e.q4(),C33.nCt.prototype.Z4.bind(t,this.Wmt,e.Q4(),e.tL(),e.X4());{let t=e.X4();return()=>t}}}class ObjectExpressionNode extends C33.Pmt{constructor(t,e){super(t),this.wct=this.i3.kH(e[1]),this.$1t=this.i3.B1t(e[2]),this.Vmt=!!e[3],this.Dct=this.i3.U4().sL(),this.bg.Hmt(this.wct)}Bmt(){return this.wct.YN().$mt(this.$1t,this.wct.UN().NB())}Umt(...t){var e=this.wct,i=e.h5().Uct(),s=i.length;return 0===s?this.Vmt?"":0:(s=WrapIndex2(this.bg.jmt(),s),this.Dct.t8().P3t(e),this.$1t.apply(i[s].NB(),t))}Xmt(t,...e){var i=this.wct,s=i.r5(),r=s.length;return 0===r?this.Vmt?"":0:(t=WrapIndex2(t,r),this.Dct.t8().P3t(i),this.$1t.apply(s[t].NB(),e))}}class InstVarExpressionNode extends C33.Pmt{constructor(t,e){super(t),this.wct=this.i3.kH(e[1]),this.Ymt=e[3],this.Vmt=!!e[2],this.bg.Hmt(this.wct)}qmt(){var t=this.wct.h5().Uct(),e=t.length;return 0===e?this.Vmt?"":0:t[WrapIndex2(this.bg.jmt(),e)].zmt(this.Ymt)}Jmt(){var t=this.wct,e=t.h5().Uct(),i=e.length;return 0===i?this.Vmt?"":0:(i=(e=e[WrapIndex2(this.bg.jmt(),i)]).tF().Kmt(t.Zmt()),e.zmt(this.Ymt+i))}Qmt(t){var e=this.wct,i=e.r5(),s=i.length;if(0===s)return this.Vmt?"":0;i=i[WrapIndex2(t,s)];let r=0;return e.uU()&&(r=i.tF().Kmt(e.Zmt())),i.zmt(this.Ymt+r)}}class BehaviorExpressionNode extends C33.Pmt{constructor(t,e){super(t),this.wct=this.i3.kH(e[1]),this.t2t=this.wct.qst(e[2]),this.e2t=this.wct.Met(e[2]),this.$1t=this.i3.B1t(e[3]),this.Vmt=!!e[4],this.Dct=this.i3.U4().sL(),this.bg.Hmt(this.wct)}i2t(...t){var e=this.wct,i=e.h5().Uct(),s=i.length;if(0===s)return this.Vmt?"":0;s=WrapIndex2(this.bg.jmt(),s),this.Dct.t8().P3t(e),i=i[s];let r=0;return e.uU()&&(r=i.tF().s2t(e.Zmt())),this.$1t.apply(i.Yst()[this.e2t+r].NB(),t)}r2t(t,...e){var i=this.wct,s=i.r5(),r=s.length;if(0===r)return this.Vmt?"":0;t=WrapIndex2(t,r),this.Dct.t8().P3t(i),r=s[t];let h=0;return i.uU()&&(h=r.tF().s2t(i.Zmt())),this.$1t.apply(r.Yst()[this.e2t+h].NB(),e)}}class EventVarExpNode extends C33.Pmt{constructor(t,e){super(t),this.h2t=null,this.n2t=e[1]}xft(){this.h2t=this.i3.U4().n0t(this.n2t)}a2t(){return this.h2t}}}{let GetExpressionFunc2=function(t){t=self.o2t[t];if(t)return t;throw new Error("invalid expression number")},C33=(GetExpressionFunc=GetExpressionFunc2,self.We),assert=self.assert;C33.l2t=class Parameter extends C33.nh{constructor(t,e,i){super(),this.bg=t,this.H1=i,this.u3=e,this.ni=null,this.u2t=!1,this.gmt=!1}static W_(t,e,i){var s=e[0],r=[ExpressionParameter,StringExpressionParameter,FileParameter,ComboParameter,ObjectParameter,LayerExpressionParameter,LayoutParameter,ExpressionParameter,ComboParameter,ComboParameter,InstVarParameter,EventVarParameter,FileParameter,VariadicParameter,StringExpressionParameter,TimelineParameter,BooleanParameter,FunctionParameter,EaseParameter,TilemapBrushParameter,TemplateExpressionParameter,FlowchartParameter];return C33.oh(r[s],t,s,i,e)}xft(){}Fmt(){this.u2t=!0}Hmt(t){this.u2t||!t||t.YN().EN()||(this.u2t=!0)}c2t(){return this.u2t}f4(){return this.H1}Dx(){return this.bg.Dx()}q4(){return this.bg.q4()}Ndt(){return this.gmt}f2t(){return 4===this.u3}};class ExpressionParameter extends C33.l2t{constructor(t,e,i,s){super(t,e,i),this.d2t=0;var r=s[1];this.C2t=r[0],this.p2t=[],this.m2t=null;for(let t=1,e=r.length;t<e;++t)this.p2t.push(C33.Pmt.Lmt(this,r[t]));this.p2t.length?this.ni=this.v2t:(this.ni=GetExpressionFunc2(this.C2t),this.gmt=!0)}S2t(t){if(t<0||t>=this.p2t.length)throw new RangeError("invalid numbered node");return this.p2t[t]}xft(){for(var t of this.p2t)t.xft();var e=GetExpressionFunc2(this.C2t);this.p2t.length?this.m2t=e(this):this.m2t=e}jmt(){return this.d2t}v2t(t){return this.d2t=t,this.m2t()}}class StringExpressionParameter extends ExpressionParameter{constructor(t,e,i,s){super(t,e,i,s),this.ni=this.g2t,14===e&&(this.q4().ypt(),this.bg instanceof C33.mpt)&&this.q4().Dpt()}g2t(t){this.d2t=t;t=this.m2t();return"string"==typeof t?t:""}T2t(){return GetExpressionFunc2(this.C2t)()}}class LayerExpressionParameter extends ExpressionParameter{constructor(t,e,i,s){super(t,e,i,s),2<=t._2t()?this.ni=this.P5:this.ni=this.mx,this.gmt=!1}mx(t){this.d2t=t;t=this.m2t();return this.Dx().lx().mx(t)}P5(t){t=this.mx(t);return t?t.P5():null}}class ComboParameter extends C33.l2t{constructor(t,e,i,s){super(t,e,i),this.E2t=s[1],this.ni=this.y2t,this.gmt=!0}y2t(){return this.E2t}}class BooleanParameter extends C33.l2t{constructor(t,e,i,s){super(t,e,i),this.A2t=s[1],this.ni=this.I2t,this.gmt=!0}I2t(){return this.A2t}}class ObjectParameter extends C33.l2t{constructor(t,e,i,s){super(t,e,i),this.wct=this.Dx().kH(s[1]),2<=t._2t()?this.ni=this.WN:this.ni=this.tF;e=this.q4();e.ppt(this.wct),this.bg instanceof C33.mpt?e.Dpt():e.W7()&&e.W7().Dpt(),this.gmt=!0}tF(){return this.wct}WN(){return this.wct?this.wct.WN():null}}class LayoutParameter extends C33.l2t{constructor(t,e,i,s){super(t,e,i),this.DV=this.Dx().WL().gz(s[1]),2<=t._2t()?this.ni=this.$L:this.ni=this.VL,this.gmt=!0}VL(){return this.DV}$L(){return this.DV?this.DV.$L():null}}class TimelineParameter extends C33.l2t{constructor(t,e,i,s){super(t,e,i),this.EK=this.Dx().IQ().OJ(s[1]),2<=t._2t()?this.ni=this.Wtt:this.ni=this.uet,this.gmt=!0}uet(){return this.EK}Wtt(){return this.EK?this.EK.Wtt():null}}class FileParameter extends C33.l2t{constructor(t,e,i,s){super(t,e,i),this.R2t=s[1],this.ni=this.M2t,this.gmt=!0}M2t(){return this.R2t}}class InstVarParameter extends C33.l2t{constructor(t,e,i,s){super(t,e,i),this.w2t=s[1];t=this.bg.tF();!(this.bg instanceof C33.Cpt&&this.bg.HT())&&t&&t.uU()?(this.ni=this.b2t,this.Fmt()):(this.ni=this.O2t,this.gmt=!0)}O2t(){return this.w2t}b2t(t){t=t||0;var e=this.bg.tF(),i=e.h5(),s=i.r5();let r=null;if(s.length)r=s[t%s.length].tF();else if(i.Vct()){s=i.Hct();r=s[t%s.length].tF()}else{if(!(0<e.a5()))return 0;i=e.r5();r=i[t%i.length].tF()}return this.w2t+r.Kmt(e.Zmt())}}class EventVarParameter extends C33.l2t{constructor(t,e,i,s){super(t,e,i),this.n2t=s[1],this.h2t=null,2<=t._2t()?this.ni=this.G2t:this.ni=this.P2t,this.gmt=!0}xft(){this.h2t=this.Dx().U4().n0t(this.n2t)}P2t(){return this.h2t}G2t(){return null}}class FunctionParameter extends C33.l2t{constructor(t,e,i,s){super(t,e,i),this.L2t=s[1],this.kmt=null,2<=t._2t()?this.ni=this.x2t:this.ni=this.N2t,this.gmt=!0}xft(){this.kmt=this.Dx().U4().j4(this.L2t),this.L2t=null}N2t(){return this.kmt}x2t(){return null}}class VariadicParameter extends C33.l2t{constructor(t,e,i,s){super(t,e,i),this.D2t=[],this.F2t=[],this.gmt=!0;for(let t=1,e=s.length;t<e;++t){var r=C33.l2t.W_(this.bg,s[t],0);this.D2t.push(r),this.F2t.push(0),r.Ndt()||(this.gmt=!1)}this.ni=this.B2t}xft(){for(var t of this.D2t)t.xft()}B2t(){var i=this.D2t,s=this.F2t;for(let t=0,e=i.length;t<e;++t)s[t]=i[t].ni(0);return s}}class EaseParameter extends C33.l2t{constructor(t,e,i,s){super(t,e,i),this.$2t=s[1],this.ni=this.yst,this.gmt=!0}yst(){return this.$2t}}class TilemapBrushParameter extends C33.l2t{constructor(t,e,i,s){super(t,e,i),this.k2t=s[1],this.ni=this.W2t,this.gmt=!0}W2t(){return this.k2t}}class TemplateExpressionParameter extends ExpressionParameter{constructor(t,e,i,s){super(t,e,i,s),this.ni=this.mF,this.gmt=!1}mF(){return this.m2t()}}class FlowchartParameter extends C33.l2t{constructor(t,e,i,s){super(t,e,i),this.vlt=this.Dx().Nlt().clt(s[1]),this.ni=this.V2t,this.gmt=!0}V2t(){return this.vlt.qc()}}}{let EvalParams2=function(i,s){for(let t=0,e=i.length;t<e;++t)s[t]=i[t].ni(0)},C33=(EvalParams=EvalParams2,self.We),assert=self.assert,EMPTY_PARAMS_ARRAY=[],noop=function(){};C33.Cpt=class Condition extends C33.nh{constructor(t,e,i){var s;if(super(),this.imt=t,this.i3=t.Dx(),this.H1=i,this.$1t=this.i3.B1t(e[1]),this.H2t=0<e[3],this.U2t=2===e[3],this.j2t=!!e[4],this.X2t=!!e[5],this.pT=!!e[6],this.kV=e[7],this.Y2t=this.imt.s3t(),this.wct=null,this.t2t=null,this.e2t=-1,this.xmt=null,this.fI=noop,this.O0t=noop,this.ei=[],this.q2t=[],this.z2t=!1,this.J2t=null,this.K2t=null,this.npt=this.i3.hz()?{apt:e[8][0],Z2t:e[8][1]}:null,-1===e[0]?this.xmt=this.i3.Nmt():(this.wct=this.i3.kH(e[0]),e[2]&&(this.t2t=this.wct.qst(e[2]),this.e2t=this.wct.Met(e[2])),this.imt.W7()&&this.imt.W7().Dpt()),10===e.length)for(s of e[9])this.ei.push(C33.l2t.W_(this,s,this.ei.length)),this.q2t.push(0);0===this.ei.length&&(this.ei=EMPTY_PARAMS_ARRAY,this.q2t=EMPTY_PARAMS_ARRAY),this.imt.U4().$ft(this)}static W_(t,e,i){return C33.oh(C33.Cpt,t,e,i)}xft(){for(var t of this.ei)t.xft(),t.c2t()&&(this.z2t=!0);this.U2t?(this.fI=this.Q2t,this.O0t=this.tvt):this.xmt?(this.evt(),this.O0t=this.ivt):this.wct.YN().EN()?(this.svt(),this.O0t=this.rvt):this.pT?(this.fI=this.hvt,this.O0t=this.nvt):(this.fI=this.avt,this.O0t=this.ovt)}evt(){var t=this.xmt,e=this.xmt;this.lvt(t,e,this.uvt)}svt(){var t=this.wct.YN(),e=this.wct.UN().NB();this.lvt(t,e,this.cvt)}lvt(r,h,t){var n=this.$1t;let a=this.X2t;var o=this.ei;if(0===o.length){let t=r.$mt(n,h);a?this.fI=function(){return C33.xor(t(),a)}:this.fI=t}else if(1===o.length){let e=o[0];if(!a&&e.Ndt())this.fI=r.fvt(n,h,e.ni(0));else{let t=r.$mt(n,h);this.fI=function(){return C33.xor(t(e.ni(0)),a)}}}else if(2===o.length){let e=o[0],i=o[1];if(!a&&e.Ndt()&&i.Ndt())this.fI=r.dvt(n,h,e.ni(0),i.ni(0));else{let t=r.$mt(n,h);this.fI=function(){return C33.xor(t(e.ni(0),i.ni(0)),a)}}}else if(3===o.length){let e=o[0],i=o[1],s=o[2];if(!a&&e.Ndt()&&i.Ndt()&&s.Ndt())this.fI=r.Cvt(n,h,e.ni(0),i.ni(0),s.ni(0));else{let t=r.$mt(n,h);this.fI=function(){return C33.xor(t(e.ni(0),i.ni(0),s.ni(0)),a)}}}else this.fI=t}SU(){return this.kV}pCt(){return this.$1t}tF(){return this.wct}XB(){return this.t2t}pvt(){return this.t2t?this.t2t.HB():this.wct?this.wct.YN():null}_2t(){var t=this.pvt();return t?t.mvt():1}q4(){return this.imt}Dx(){return this.i3}f4(){return this.H1}t1t(){return this.f4()}oCt(){return this.H2t}mCt(){return this.U2t}vvt(){return this.X2t}n$(){return this.j2t}HT(){return this.pT}Svt(){return this.npt.apt}gvt(){return!!this.xmt}zpt(){return this.gvt()||this.wct.YN().EN()}Jpt(){for(var t of this.ei)if(t.f2t())return t.tF();return null}Tvt(t){this.npt.apt=!!t,this.imt.Lpt()}_vt(){return this.npt.Z2t}GCt(){return!this.Svt()&&!this.i3.l1t()&&!this._vt()}Evt(){return this.J2t||(this.J2t=new Map),this.J2t}yvt(){return this.K2t||(this.K2t=new Map),this.K2t}uvt(){var t=this.q2t;return EvalParams2(this.ei,t),C33.xor(this.$1t.apply(this.xmt,t),this.X2t)}*ivt(){if((this.Svt()||this.i3.l1t())&&(yield this),this._vt()){var e=this.q2t;EvalParams2(this.ei,e);let t=this.$1t.apply(this.xmt,e);return C33.Fa(t)&&(t=yield*t),C33.xor(t,this.X2t)}return this.fI()}cvt(){var t=this.q2t,e=(EvalParams2(this.ei,t),this.wct.UN().NB());return C33.xor(this.$1t.apply(e,t),this.X2t)}*rvt(){if((this.Svt()||this.i3.l1t())&&(yield this),this._vt()){var e=this.q2t,i=(EvalParams2(this.ei,e),this.wct.UN().NB());let t=this.$1t.apply(i,e);return C33.Fa(t)&&(t=yield*t),C33.xor(t,this.X2t)}return this.fI()}Q2t(){return!0}*tvt(){return(this.Svt()||this.i3.l1t())&&(yield this),!0}Avt(){if(this.t2t){if(2<=this.t2t.HB().mvt())throw new Error("not yet implemented");return this.t2t}return 2<=this.wct.YN().mvt()?this.wct.WN():this.wct}hvt(){var t=this.q2t,t=(EvalParams2(this.ei,t),this.$1t.apply(this.Avt(),t));return this.wct.b1t(),t}*nvt(){if((this.Svt()||this.i3.l1t())&&(yield this),this._vt()){var e=this.q2t;EvalParams2(this.ei,e);let t=this.$1t.apply(this.Avt(),e);return C33.Fa(t)&&(t=yield*t),this.wct.b1t(),t}return this.fI()}avt(){var i=this.ei,s=this.q2t,t=this.wct.h5();for(let t=0,e=i.length;t<e;++t){var r=i[t];r.c2t()||(s[t]=r.ni(0))}return t.kct()?this.Ivt(t):this.Rvt(t)}*ovt(){return(this.Svt()||this.i3.l1t())&&(yield this),this.avt()}Mvt(i){var s=this.ei,r=this.q2t;for(let t=0,e=s.length;t<e;++t){var h=s[t];h.c2t()&&(r[t]=h.ni(i))}}Ivt(i){var t=this.wct,s=t.uU(),r=t.Zmt(),h=this.e2t,n=0<=h,a=t.r5(),o=this.z2t,l=this.q2t,u=this.$1t,c=this.X2t,f=this.Y2t&&!this.H2t;i.$ct();for(let e=0,t=a.length;e<t;++e){var d,C=a[e];o&&this.Mvt(e);let t;t=n?(d=s?C.tF().s2t(r):0,u.apply(C.Yst()[h+d].NB(),l)):u.apply(C.NB(),l),C33.xor(t,c)?i.jct(C):f&&i.Xct(C)}return t.wvt(!0),i.Yct(!1),t.b1t(),i.Wct()}Rvt(t){var e=this.wct,i=e.uU(),s=e.Zmt(),r=e.fF(),h=this.e2t,n=0<=h,a=this.z2t,o=this.q2t,l=this.$1t,u=this.X2t,c=this.Y2t&&!this.H2t,f=t.qct(),d=t.zct(),C=c&&!this.imt.qpt(this),p=C?d:f;let m=0,v=!1;for(let e=0,t=p.length;e<t;++e){var S,g=p[e];a&&this.Mvt(e);let t;t=n?(S=i?g.tF().s2t(s):0,l.apply(g.Yst()[h+S].NB(),o)):l.apply(g.NB(),o),C33.xor(t,u)?(v=!0,C?(f.push(g),r&&g.bvt()):(p[m]=g,r&&g.Ovt(m),++m)):C?(p[m]=g,r&&g.Gvt(m),++m):c&&(d.push(g),r)&&g.Pvt()}C33.Nn(p,m),r&&e.Lvt(C,m);var T=v;return C&&!v&&(v=this.xvt(f)),e.wvt(T||c),c?v:t.Wct()}xvt(i){var t=this.wct,s=t.uU(),r=t.Zmt(),h=this.z2t,n=this.e2t,a=0<=n,o=this.q2t,l=this.$1t,u=this.X2t;for(let e=0,t=i.length;e<t;++e){var c,f=i[e];h&&this.Mvt(e);let t;if(t=a?(c=s?f.tF().s2t(r):0,l.apply(f.Yst()[n+c].NB(),o)):l.apply(f.NB(),o),C33.xor(t,u))return!0}return!1}Nvt(t,e){return this.ei[t].ni(e)}vCt(){var t=this.ei;if(t.length)return t[0].T2t();throw new Error("no parameters")}NX(){if(!this.J2t||!this.J2t.size)return null;var e,i,s={};for([e,i]of this.J2t.entries()){let t=i;"collmemory"===e&&(t=[...i.entries()].map(t=>[t[0].CF(),t[1].CF(),t[2]])),s[e]=t}return{ex:s}}DX(t){if(this.J2t&&(this.J2t.clear(),this.J2t=null),t){let e=this.i3;t=t.ex;if(t){var i,s,r=this.Evt();r.clear();for([i,s]of Object.entries(t)){let t=s;"collmemory"===i&&(t=C33.oh(C33.zu,s.map(t=>[e.hx(t[0]),e.hx(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),r.set(i,t)}}}}}}{let EvalParams2=function(i,s){for(let t=0,e=i.length;t<e;++t)s[t]=i[t].ni(0)},C33=(EvalParams=EvalParams2,self.We),assert=self.assert,EMPTY_PARAMS_ARRAY=[],noop=function(){},noopGenerator=function*(){},FLAG_CANPICKANYOBJECTCLASS=1,FLAG_COPYPICKED=2,FLAG_CUSTOM_ACE=4,FLAG_IS_ASYNC=8,FLAG_CAN_BAIL_OUT=16;C33.mpt=class Action extends C33.nh{constructor(t,e,i){super();var s,t=(this.imt=t).Dx(),i=(this.i3=t,this.H1=i,this.kV=4<=e.length?e[3]:-1,this.Dvt=5<=e.length?255&e[4]:0,this.Fvt=5<=e.length?e[4]>>8:0,this.$1t=null,this.wct=null,this.t2t=null,this.e2t=-1,this.xmt=null,this.Bvt="",this.$vt=null,this.kvt=null,this.fI=noop,this.O0t=noop,this.ei=[],this.q2t=[],this.z2t=!1,this.J2t=null,this.K2t=null,-3===e[0]),r=i?e[2]:e[5];if(this.npt=t.hz()||i?{apt:r[0],Z2t:r[1],index:r[2]}:null,-1===e[0]?(this.xmt=t.Nmt(),this.$1t=t.B1t(e[1])):-2===e[0]?this.Bvt=e[1]:i?(r=t.B1t(e[1]),this.$1t=r,this.fI=this.Wvt,this.O0t=this.Vvt,this.Fvt|=FLAG_IS_ASYNC):(this.wct=t.kH(e[0]),this.Fvt&FLAG_CUSTOM_ACE?(this.Bvt=e[1],this.$vt=t.kH(e[2])):(e[2]&&(this.t2t=this.wct.qst(e[2]),this.e2t=this.wct.Met(e[2])),this.$1t=t.B1t(e[1]))),7===e.length)for(s of e[6])this.ei.push(C33.l2t.W_(this,s,this.ei.length)),this.q2t.push(0);0===this.ei.length&&(this.ei=EMPTY_PARAMS_ARRAY,this.q2t=EMPTY_PARAMS_ARRAY),this.Hvt()&&(this.imt.ypt(),this.imt.Dpt()),this.imt.U4().kft(this)}static W_(t,e,i){return C33.oh(C33.mpt,t,e,i)}xft(){for(var t of this.ei)t.xft(),t.c2t()&&(this.z2t=!0);var e,i;this.xmt?(this.evt(),this.O0t=this.ivt):this.Bvt?(this.Fvt&FLAG_CUSTOM_ACE?this.Uvt():this.jvt(),this.Bvt="",this.$vt=null):this.fI===this.Wvt?(e=this.$1t,i=this.i3.U4().s0t(this.imt),this.$1t=e.bind(null,this.i3.TN(),i)):this.t2t?this.d1t()?(this.fI=this.Xvt,this.O0t=this.Yvt):(this.fI=this.qvt,this.O0t=this.zvt):this.wct.YN().EN()?(this.svt(),this.O0t=this.rvt):this.HT()?(this.fI=this.Jvt,this.O0t=this.Kvt):this.d1t()?(this.fI=this.Zvt,this.O0t=this.Qvt):this.tSt()?(this.fI=this.eSt,this.O0t=this.iSt):this.ei.length?this.ei.every(t=>t.c2t())?(this.fI=this.sSt,this.O0t=this.rSt):this.z2t?(this.fI=this.hSt,this.O0t=this.nSt):this.ei.every(t=>t.Ndt())?(EvalParams2(this.ei,this.q2t),this.fI=this.aSt,this.O0t=this.oSt):(this.fI=this.lSt,this.O0t=this.uSt):(this.fI=this.aSt,this.O0t=this.oSt)}evt(){var t=this.xmt,e=this.xmt;this.lvt(t,e,this.uvt)}svt(){var t=this.wct.YN(),e=this.wct.UN().NB();this.lvt(t,e,this.cvt)}jvt(){var t=this.imt.U4(),r=t.j4(this.Bvt);if(r.qu()){let e=0!=(this.Fvt&FLAG_COPYPICKED),i=(this.kvt=r.q4(),[...new Set([...this.imt.z4(),...this.kvt.z4()])]),s=(i=t.jft(i),!r.Q4()&&this.cSt()?{P1t:!0}:null);if(this.fI=C33.nCt.prototype.R1t.bind(this.kvt,i,this.ei,e,s),this.i3.hz()){let t=this;this.O0t=function*(){return(t.Svt()||t.i3.l1t())&&(yield t),yield*t.kvt.N1t(i,t.ei,e,s)}}else this.O0t=noopGenerator}else this.fI=noop,this.O0t=noopGenerator}Uvt(){var r=this.imt.U4();let h=r.u0t(this.$vt,this.Bvt);if(h.qu()){let e=0!=(this.Fvt&FLAG_COPYPICKED),i=(this.kvt=h.q4(),[...new Set([...this.imt.z4(),...this.kvt.z4(),this.wct,h.tF()])]);i=r.jft(i);var r=!this.wct.uU()&&!h.tF().uU(),n=!this.wct.uU()&&h.tF().uU(),a=this.wct.uU();let s=null;if(!h.Q4()&&this.cSt()&&((s=s||{}).P1t=!0),!n&&e||((s=s||{}).M1t=this.wct,s.w1t=h.tF()),r||n||a&&!h.cmt()?this.fI=C33.nCt.prototype.R1t.bind(this.kvt,i,this.ei,e,s):a&&(this.fI=C33.Wdt.prototype.pmt.bind(h,i,this.ei)),this.i3.hz()){let t=this;r||n||a&&!h.cmt()?this.O0t=function*(){return(t.Svt()||t.i3.l1t())&&(yield t),yield*t.kvt.N1t(i,t.ei,e,s)}:a&&(this.O0t=function*(){return(t.Svt()||t.i3.l1t())&&(yield t),yield*h.vmt(i,t.ei)})}else this.O0t=noopGenerator}else this.fI=noop,this.O0t=noopGenerator}lvt(r,h,t){var n=this.$1t,a=this.ei;if(0===a.length)this.fI=r.$mt(n,h);else if(1===a.length){let e=a[0];if(e.Ndt())this.fI=r.fvt(n,h,e.ni(0));else{let t=r.$mt(n,h);this.fI=function(){return t(e.ni(0))}}}else if(2===a.length){let e=a[0],i=a[1];if(e.Ndt()&&i.Ndt())this.fI=r.dvt(n,h,e.ni(0),i.ni(0));else{let t=r.$mt(n,h);this.fI=function(){return t(e.ni(0),i.ni(0))}}}else if(3===a.length){let e=a[0],i=a[1],s=a[2];if(e.Ndt()&&i.Ndt()&&s.Ndt())this.fI=r.Cvt(n,h,e.ni(0),i.ni(0),s.ni(0));else{let t=r.$mt(n,h);this.fI=function(){return t(e.ni(0),i.ni(0),s.ni(0))}}}else this.fI=t}SU(){return this.kV}d1t(){return 0!=(this.Fvt&FLAG_IS_ASYNC)}f1t(){return 0!=(this.Fvt&FLAG_CAN_BAIL_OUT)}tSt(){return 1===this.Dvt}HT(){return 2===this.Dvt}Hvt(){return 0!=(this.Fvt&FLAG_CANPICKANYOBJECTCLASS)}Rpt(){return this.d1t()||this.f1t()}tF(){return this.wct}pvt(){return this.t2t?this.t2t.HB():this.wct?this.wct.YN():null}_2t(){var t=this.pvt();return t?t.mvt():1}q4(){return this.imt}cSt(){let t=this.imt;do{if(t instanceof C33.Wdt&&t.Q4())return!0}while(t=t.e0t());return!1}Dx(){return this.i3}f4(){return this.H1}t1t(){return this.npt.index}Svt(){return this.npt.apt}Tvt(t){this.npt.apt=!!t,this.imt.Lpt()}_vt(){return this.npt.Z2t}GCt(){return!this.Svt()&&!this.i3.l1t()&&!this._vt()}Evt(){return this.J2t||(this.J2t=new Map),this.J2t}yvt(){return this.K2t||(this.K2t=new Map),this.K2t}uvt(){var t=this.q2t;return EvalParams2(this.ei,t),this.$1t.apply(this.xmt,t)}*ivt(){var t;return(this.Svt()||this.i3.l1t())&&(yield this),this._vt()?(t=this.q2t,EvalParams2(this.ei,t),yield*this.$1t.apply(this.xmt,t)):this.fI()}cvt(){var t=this.q2t;return EvalParams2(this.ei,t),this.$1t.apply(this.wct.UN().NB(),t)}*rvt(){var t;return(this.Svt()||this.i3.l1t())&&(yield this),this._vt()?(t=this.q2t,EvalParams2(this.ei,t),yield*this.$1t.apply(this.wct.UN().NB(),t)):this.fI()}aSt(){var i=this.q2t,s=this.wct.h5().r5();for(let t=0,e=s.length;t<e;++t)this.$1t.apply(s[t].NB(),i)}*oSt(){if((this.Svt()||this.i3.l1t())&&(yield this),this._vt()){var i=this.q2t,s=this.wct.h5().r5();for(let t=0,e=s.length;t<e;++t)yield*this.$1t.apply(s[t].NB(),i)}else this.aSt()}lSt(){var i=this.q2t,s=(EvalParams2(this.ei,i),this.wct.h5().r5());for(let t=0,e=s.length;t<e;++t)this.$1t.apply(s[t].NB(),i)}*uSt(){if((this.Svt()||this.i3.l1t())&&(yield this),this._vt()){var i=this.q2t,s=(EvalParams2(this.ei,i),this.wct.h5().r5());for(let t=0,e=s.length;t<e;++t)yield*this.$1t.apply(s[t].NB(),i)}else this.lSt()}sSt(){var s=this.ei,r=this.q2t,e=this.$1t,h=this.wct.h5().r5();for(let i=0,t=h.length;i<t;++i){var n=h[i];for(let t=0,e=s.length;t<e;++t)r[t]=s[t].ni(i);e.apply(n.NB(),r)}}*rSt(){if((this.Svt()||this.i3.l1t())&&(yield this),this._vt()){var s=this.ei,r=this.q2t,e=this.$1t,h=this.wct.h5().r5();for(let i=0,t=h.length;i<t;++i){var n=h[i];for(let t=0,e=s.length;t<e;++t)r[t]=s[t].ni(i);yield*e.apply(n.NB(),r)}}else this.sSt()}hSt(){var s=this.ei,r=this.q2t,e=this.$1t,h=this.wct.h5().r5();for(let t=0,e=s.length;t<e;++t){var i=s[t];i.c2t()||(r[t]=i.ni(0))}for(let i=0,t=h.length;i<t;++i){var n=h[i];for(let t=0,e=s.length;t<e;++t){var a=s[t];a.c2t()&&(r[t]=a.ni(i))}e.apply(n.NB(),r)}}*nSt(){if((this.Svt()||this.i3.l1t())&&(yield this),this._vt()){var s=this.ei,r=this.q2t,e=this.$1t,h=this.wct.h5().r5();for(let t=0,e=s.length;t<e;++t){var i=s[t];i.c2t()||(r[t]=i.ni(0))}for(let i=0,t=h.length;i<t;++i){var n=h[i];for(let t=0,e=s.length;t<e;++t){var a=s[t];a.c2t()&&(r[t]=a.ni(i))}yield*e.apply(n.NB(),r)}}else this.hSt()}eSt(){var s=this.ei,r=this.q2t,e=this.$1t,t=this.wct,i=t.fSt(),h=t.h5().r5();i.dSt(e);for(let i=0,t=h.length;i<t;++i){var n=h[i];for(let t=0,e=s.length;t<e;++t)r[t]=s[t].ni(i);e.apply(n.NB(),r)}i.CSt(e)}*iSt(){if((this.Svt()||this.i3.l1t())&&(yield this),this._vt()){var s=this.ei,r=this.q2t,e=this.$1t,t=this.wct,i=t.fSt(),h=t.h5().r5();i.dSt(e);for(let i=0,t=h.length;i<t;++i){var n=h[i];for(let t=0,e=s.length;t<e;++t)r[t]=s[t].ni(i);yield*e.apply(n.NB(),r)}i.CSt(e)}else this.eSt()}Jvt(){var t=this.q2t;return EvalParams2(this.ei,t),this.$1t.apply(this.t2t||this.wct,t)}*Kvt(){if((this.Svt()||this.i3.l1t())&&(yield this),this._vt()){var e=this.q2t;EvalParams2(this.ei,e);let t=this.$1t.apply(this.t2t||this.wct,e);return t=C33.Fa(t)?yield*t:t}return this.Jvt()}qvt(){var t=this.wct,e=t.uU(),s=t.Zmt(),r=this.ei,h=this.z2t,n=this.q2t,a=this.$1t,o=this.e2t,l=t.h5().r5();for(let t=0,e=r.length;t<e;++t){var i=r[t];i.c2t()||(n[t]=i.ni(0))}for(let i=0,t=l.length;i<t;++i){var u=l[i];if(h)for(let t=0,e=r.length;t<e;++t){var c=r[t];c.c2t()&&(n[t]=c.ni(i))}var f=e?u.tF().s2t(s):0;a.apply(u.Yst()[o+f].NB(),n)}}*zvt(){if((this.Svt()||this.i3.l1t())&&(yield this),this._vt()){var t=this.wct,e=t.uU(),s=t.Zmt(),r=this.ei,h=this.z2t,n=this.q2t,a=this.$1t,o=this.e2t,l=t.h5().r5();for(let t=0,e=r.length;t<e;++t){var i=r[t];i.c2t()||(n[t]=i.ni(0))}for(let i=0,t=l.length;i<t;++i){var u=l[i];if(h)for(let t=0,e=r.length;t<e;++t){var c=r[t];c.c2t()&&(n[t]=c.ni(i))}var f=e?u.tF().s2t(s):0;yield*a.apply(u.Yst()[o+f].NB(),n)}}else this.qvt()}Zvt(){var s=this.ei,r=this.q2t,e=this.$1t,h=this.wct.h5().r5(),n=[];for(let i=0,t=h.length;i<t;++i){var a=h[i];for(let t=0,e=s.length;t<e;++t)r[t]=s[t].ni(i);n.push(e.apply(a.NB(),r))}return Promise.all(n)}*Qvt(){if((this.Svt()||this.i3.l1t())&&(yield this),this._vt()){var s=this.ei,r=this.q2t,e=this.$1t,h=this.wct.h5().r5(),n=[];for(let i=0,t=h.length;i<t;++i){var a=h[i];for(let t=0,e=s.length;t<e;++t)r[t]=s[t].ni(i);n.push(yield*e.apply(a.NB(),r))}return Promise.all(n)}return this.Zvt()}Xvt(){var t=this.wct,e=t.uU(),s=t.Zmt(),r=this.ei,h=this.q2t,n=this.$1t,a=this.e2t,o=t.h5().r5(),l=[];for(let i=0,t=o.length;i<t;++i){var u=o[i];for(let t=0,e=r.length;t<e;++t)h[t]=r[t].ni(i);var c=e?u.tF().s2t(s):0;l.push(n.apply(u.Yst()[a+c].NB(),h))}return Promise.all(l)}*Yvt(){if((this.Svt()||this.i3.l1t())&&(yield this),this._vt()){var t=this.wct,e=t.uU(),s=t.Zmt(),r=this.ei,h=this.q2t,n=this.$1t,a=this.e2t,o=t.h5().r5(),l=[];for(let i=0,t=o.length;i<t;++i){var u=o[i];for(let t=0,e=r.length;t<e;++t)h[t]=r[t].ni(i);var c=e?u.tF().s2t(s):0;l.push(yield*n.apply(u.Yst()[a+c].NB(),h))}return Promise.all(l)}return this.Xvt()}async Wvt(){try{await this.$1t()}catch(t){console.error(`Unhandled exception running script %c${this.imt.GY().qc()}, event ${this.imt.$pt()}, action ${this.t1t()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),C33.CCt.W1t()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),C33.CCt.V1t())}}*Vvt(){return(this.Svt()||this.i3.l1t())&&(yield this),this.Wvt()}NX(){return this.J2t&&this.J2t.size?{ex:C33.xa(this.J2t)}:null}DX(t){this.J2t&&(this.J2t.clear(),this.J2t=null),t&&(t=t.ex)&&(this.J2t=C33.Na(t))}}}{let GetInst2=function(t){return t instanceof self.ZD?runtime.B5(t):t.c6()},GetWorldInfo2=function(t){return GetInst2(t).Cx()},CompareX2=function(t,e){return C33.compare(GetWorldInfo2(this).ag(),t,e)},CompareY2=function(t,e){return C33.compare(GetWorldInfo2(this).ug(),t,e)},IsOnScreen2=function(){return GetWorldInfo2(this).A7()},IsOutsideLayout2=function(){var t=GetWorldInfo2(this),e=t.VL(),t=t.T7();return t._l()<0||t.El()<0||t.gl()>e.tp()||t.Tl()>e.cp()},PickDistance2=function(i,s,r){var t=this.h5(),h=t.r5();if(!h.length)return!1;let n=h[0],a=n.Cx(),o=n,l=C33._h(a.ag(),a.ug(),s,r);for(let t=1,e=h.length;t<e;++t){n=h[t],a=n.Cx();var u=C33._h(a.ag(),a.ug(),s,r);(0===i&&u<l||1===i&&u>l)&&(l=u,o=n)}return t.i3t(o),!0},SetX2=function(t){var e=GetWorldInfo2(this);e.ag()!==t&&(e.og(t),e.f7())},SetY2=function(t){var e=GetWorldInfo2(this);e.ug()!==t&&(e.fg(t),e.f7())},SetPos2=function(t,e){var i=GetWorldInfo2(this);i.pSt(t,e)||(i.d7(t,e),i.f7())},SetPosToObject2=function(t,e){var i;t&&(i=GetInst2(this),t=t.i5(i))&&([t,e]=t.mSt(e),(i=i.Cx()).ag()===t&&i.ug()===e||(i.d7(t,e),i.f7()))},MoveForward2=function(t){var e;0!==t&&((e=GetWorldInfo2(this)).m7(e.vSt()*t,e.SSt()*t),e.f7())},MoveAtAngle2=function(t,e){var i;0!==e&&(i=GetWorldInfo2(this),t=C33.Sh(t),i.m7(Math.cos(t)*e,Math.sin(t)*e),i.f7())},GetX2=function(){return GetWorldInfo2(this).ag()},GetY2=function(){return GetWorldInfo2(this).ug()},GetDt2=function(){var t=GetInst2(this);return t.Dx().cL(t)},CompareWidth2=function(t,e){return C33.compare(GetWorldInfo2(this).tp(),t,e)},CompareHeight2=function(t,e){return C33.compare(GetWorldInfo2(this).cp(),t,e)},SetWidth2=function(t){var e=GetWorldInfo2(this);e.tp()!==t&&(e.op(t),e.f7())},SetHeight2=function(t){var e=GetWorldInfo2(this);e.cp()!==t&&(e.ep(t),e.f7())},SetSize2=function(t,e){var i=GetWorldInfo2(this);i.tp()===t&&i.cp()===e||(i.DR(t,e),i.f7())},GetWidth2=function(){return GetWorldInfo2(this).tp()},GetHeight2=function(){return GetWorldInfo2(this).cp()},GetBboxLeft2=function(){return GetWorldInfo2(this).T7().gl()},GetBboxTop2=function(){return GetWorldInfo2(this).T7().Tl()},GetBboxRight2=function(){return GetWorldInfo2(this).T7()._l()},GetBboxBottom2=function(){return GetWorldInfo2(this).T7().El()},GetBboxMidX2=function(){var t=GetWorldInfo2(this).T7();return(t.gl()+t._l())/2},GetBboxMidY2=function(){var t=GetWorldInfo2(this).T7();return(t.Tl()+t.El())/2},IsAngleWithin2=function(t,e){return C33.yh(GetWorldInfo2(this).I5(),C33.Sh(e))<=C33.Sh(t)},IsAngleClockwiseFrom2=function(t){return C33.Ih(GetWorldInfo2(this).I5(),C33.Sh(t))},IsBetweenAngles2=function(t,e){var t=C33.Sh(t),e=C33.Sh(e),i=GetWorldInfo2(this).I5();return!C33.Ih(e,t)?!(!C33.Ih(i,t)&&C33.Ih(i,e)):C33.Ih(i,t)&&!C33.Ih(i,e)},SetAngle2=function(t){var e=GetWorldInfo2(this),t=C33.mh(C33.Sh(t));isNaN(t)||e.I5()===t||(e.A5(t),e.f7())},RotateClockwise2=function(t){var e;isNaN(t)||0===t||((e=GetWorldInfo2(this)).A5(e.I5()+C33.Sh(t)),e.f7())},RotateCounterclockwise2=function(t){var e;isNaN(t)||0===t||((e=GetWorldInfo2(this)).A5(e.I5()-C33.Sh(t)),e.f7())},RotateTowardAngle2=function(t,e){var i=GetWorldInfo2(this),s=i.I5(),e=C33.Ah(s,C33.Sh(e),C33.Sh(t));isNaN(e)||s===e||(i.A5(e),i.f7())},RotateTowardPosition2=function(t,e,i){var s=GetWorldInfo2(this),r=s.I5(),e=e-s.ag(),i=i-s.ug(),i=Math.atan2(i,e),e=C33.Ah(r,i,C33.Sh(t));isNaN(e)||r===e||(s.A5(e),s.f7())},SetTowardPosition2=function(t,e){var i=GetWorldInfo2(this),s=i.I5(),t=t-i.ag(),e=e-i.ug(),e=Math.atan2(e,t);isNaN(e)||s===e||(i.A5(e),i.f7())},GetAngle2=function(){return C33.gh(GetWorldInfo2(this).I5())},CompareOpacity2=function(t,e){return C33.compare(C33.$h(100*GetWorldInfo2(this).Sb(),6),t,e)},IsVisible2=function(){return GetWorldInfo2(this).uD()},SetVisible2=function(t){var e=GetInst2(this),i=e.Cx();t=2===t?!i.uD():0!==t,i.uD()!==t&&(i.oD(t),e.Dx().Ex())},SetOpacity2=function(t){var t=C33.ph(t/100,0,1),e=GetInst2(this),i=e.Cx();if(i.pB()){if(i.mht().gSt()===t)return}else if(i.Sb()===t)return;i.Tb(t),e.Dx().Ex()},SetDefaultColor2=function(t){tempColor.vo(t);var t=GetInst2(this),e=t.Cx();e.R7().lo(tempColor)||(e.M7(tempColor),t.Dx().Ex())},GetColor2=function(){var t=GetWorldInfo2(this).R7();return C33.Vh(t.Qa(),t.eo(),t.io(),t.ro())},GetOpacity2=function(){return C33.$h(100*GetWorldInfo2(this).Sb(),6)},IsOnLayer2=function(t){return!!t&&GetWorldInfo2(this).mx()===t},PickTopBottom2=function(i){var t=this.h5(),s=t.r5();if(!s.length)return!1;let r=s[0];for(let t=1,e=s.length;t<e;++t){var h=s[t],n=h.Cx(),a=r.Cx(),o=n.mx().f4(),l=a.mx().f4();0===i?(l<o||o===l&&n.vx()>a.vx())&&(r=h):(o<l||o===l&&n.vx()<a.vx())&&(r=h)}return t.i3t(r),!0},CompareZElevation2=function(t,e,i){var s=GetWorldInfo2(this),t=0===t?s.dg():s.S7();return C33.compare(t,e,i)},MoveToTop2=function(){GetWorldInfo2(this).b7()},MoveToBottom2=function(){GetWorldInfo2(this).G7()},MoveToLayer2=function(t){t&&GetWorldInfo2(this).L7(t)},ZMoveToObject2=function(t,e){var i,t=0===t;e&&(i=GetInst2(this),e=e.TSt(i))&&i.Cx().N7(e,t)},SetZElevation2=function(t){var e=GetInst2(this),i=e.Cx();i.dg()!==t&&(i.Cg(t),e.Dx().Ex())},LayerNumber2=function(){return GetWorldInfo2(this).mx().f4()},LayerName2=function(){return GetWorldInfo2(this).mx().qc()},ZIndex2=function(){return GetWorldInfo2(this).vx()},ZElevation2=function(){return GetWorldInfo2(this).dg()},TotalZElevation2=function(){return GetWorldInfo2(this).S7()},IsEffectEnabled2=function(t){var e=GetInst2(this),t=e.tF().v5().Jst(t);if(t)return t=t.f4(),e.Cx().u7().ZB(t)},SetEffectEnabled2=function(t,e){var i,s=GetInst2(this),e=s.tF().v5().Jst(e);e&&(e=e.f4(),t=1===t,(i=s.Cx().u7()).ZB(e)!==t)&&(i.QB(e,t),i.t$(),s.Dx().Ex())},SetEffectParam2=function(t,e,i){var s,r=GetInst2(this),t=r.tF().v5().Jst(t);t&&(e=Math.floor(e),s=t.kE().VE(e))&&("color"===s?(tempColor.vo(i),i=tempColor):"percent"===s&&(i/=100),s=t.f4(),(t=r.Cx().u7()).i$(s,e,i))&&t.ZB(s)&&r.Dx().Ex()},CollMemory_Add2=function(t,e,i,s){e.CF()<i.CF()?t.Set(e,i,s):t.Set(i,e,s)},CollMemory_Remove2=function(t,e,i){e.CF()<i.CF()?t.Qu(e,i):t.Qu(i,e)},CollMemory_RemoveInstance2=function(t,e){t.tc(e)},CollMemory_Get2=function(t,e,i){return e.CF()<i.CF()?t.ni(e,i):t.ni(i,e)},DoOverlapCondition2=function(t,e,i,s){if(!e)return!1;var r,h=0!==i||0!==s,n=t.Cx(),a=t.Dx(),o=a.T4(),l=a.zft(),u=l.q4().s3t(),c=l.tF(),f=l.vvt(),l=e.h5(),d=c!==e;rPickType=e,needsCollisionFinish=d&&!f;let C,p=0,m=0,v=rPickFromElseInstances=!1;l.kct()?(tempRect._(n.T7()),tempRect.offset(i,s),o._St(n.mx(),e,tempRect,tempCandidates2),C=tempCandidates2):!u||a.ESt()&&!l.zct().length&&l.qct().length?C=l.qct():(C=l.zct(),rPickFromElseInstances=!0),h&&(p=n.ag(),m=n.ug(),n.m7(i,s),n.f7());for(r of C)if(o.rN(t,r)){if(v=!0,f)break;d&&rToPick.add(r)}return h&&(n.d7(p,m),n.f7()),C33.Dn(tempCandidates2),v},FinishCollisionConditionPicking2=function(t){var t=t.Dx().J4().s3t(),e=rPickType.h5(),i=e.qct(),s=e.zct();e.kct()?(e.Zct(rToPick),t&&(C33.Dn(s),e.Qct(rToPick,rPickType.r5()))):t?rPickFromElseInstances?e.t3t(rToPick):(e.Qct(rToPick,i),e.Zct(rToPick)):e.Zct(rToPick),rPickType.b1t()},FinishCollisionCondition2=function(t,e){needsCollisionFinish&&(e&&FinishCollisionConditionPicking2(t),rToPick.clear(),rPickType=null,needsCollisionFinish=!1)},OnCollision2=function(s){if(this.i3.ySt())return DebugOnCollision.call(this,s);if(s){var t=this.i3,r=t.T4(),h=t.U4(),n=h.sL(),a=h.zft(),o=a.tF(),l=a.Evt(),a=a.yvt(),u=n.t8(),c=t.YQ(),f=c-1,d=u.J4(),C=n.e8(d);let i=l.get("collmemory");i||(i=C33.oh(C33.zu),l.set("collmemory",i)),a.get("collisionCreatedDestroyCallback")||(a.set("collisionCreatedDestroyCallback",!0),t.F3().addEventListener("instancedestroy",t=>CollMemory_RemoveInstance2(i,t.YB)));var l=o.h5(),p=s.h5(),m=l.r5();let e=null;for(let t=0;t<m.length;++t){var v=m[t];p.kct()?(r._St(v.Cx().mx(),s,v.Cx().T7(),tempCandidates1),e=tempCandidates1,r.ASt(v,s,e)):e=p.r5();for(let t=0;t<e.length;++t){var S=e[t];if(r.rN(v,S)||r.ISt(v,S)){var g=CollMemory_Get2(i,v,S);let t=!1,e=-2;"number"==typeof g&&(t=!0,e=g);var T,_,E,g=!t||e<f;CollMemory_Add2(i,v,S,c),g&&(g=d.Qk(),h.u8(g),E=o.h5(),T=s.h5(),E.Yct(!1),T.Yct(!1),(o===s?(_=E.qct(),C33.Dn(_),_.push(v),_.push(S),o):(_=E.qct(),E=T.qct(),C33.Dn(_),C33.Dn(E),_.push(v),E.push(S),o.b1t(),s)).b1t(),d.c8(u,C),h.f8(g))}else CollMemory_Remove2(i,v,S)}C33.Dn(tempCandidates1)}n.m8()}return!1},IsOverlapping2=function(t){return DoOverlapCondition2(GetInst2(this),t,0,0)},IsOverlappingOffset2=function(t,e,i){return DoOverlapCondition2(GetInst2(this),t,e,i)},HasParent2=function(){return GetWorldInfo2(this).tB()},HasChildren2=function(){return GetWorldInfo2(this).$X()},PickParent2=function(i,s){var r=this.h5().r5();if(0===r.length)return!1;var t,e=i.h5();let h=e.r5();if(0===(h=e.kct()&&0<(t=[...this.i3.RSt(i)]).length?h.concat(t):h).length)return!1;var n=new Set(h),a=new Set;for(let t=0,e=r.length;t<e;++t){var o=r[t];if(1===s)for(var l of o.U7())l.MSt(i)&&n.has(l)&&a.add(l);else{let t;if(0===s){if(null===(t=o.W7()))continue}else t=o.H7();t.MSt(i)&&n.has(t)&&a.add(t)}}return 0!==a.size&&(e.Zct(a),i.b1t(),!0)},PickChildren2=function(i,s){var r=this.h5().r5();if(0===r.length)return!1;var t,e=i.h5();let h=e.r5();if(0===(h=e.kct()&&0<(t=[...this.i3.RSt(i)]).length?h.concat(t):h).length)return!1;var n=new Set(h),a=new Set;for(let t=0,e=r.length;t<e;++t){var o,l=r[t];2===s&&!l.$X()&&l.MSt(i)&&n.has(l)&&a.add(l);for(o of 0===s?l.children():l.z7())2===s&&o.$X()||o.MSt(i)&&n.has(o)&&a.add(o)}return 0!==a.size&&(e.Zct(a),i.b1t(),!0)},PickNthChild2=function(i,s,r){var h=this.h5().r5();if(0===h.length)return!1;var t,e=i.h5();let n=e.r5();if(0===(n=e.kct()&&0<(t=[...this.i3.RSt(i)]).length?n.concat(t):n).length)return!1;var a=new Set(n),o=[];for(let t=0,e=h.length;t<e;++t){var l=h[t];if(0===s){var u=l.q7(r);null!==u&&u.MSt(i)&&a.has(u)&&o.push(u)}else if(1===s)for(var c of l.children())if(c.MSt(i)){if(0===r){a.has(c)&&o.push(c);break}--r}}return 0!==o.length&&(e.Kct(o),i.b1t(),!0)},CompareChildCount2=function(t,e,i){var s=GetInst2(this);switch(t){case 0:default:return C33.compare(s.X7(),e,i);case 1:return C33.compare(s.wSt(),e,i)}},AddChild2=function(t,e,i,s,r,h,n,a,o,l){var u,c=GetInst2(this),f=c.Dx().Kft().tF();for(u of t.bSt(c,f)){if(!u.YN().xN())return;c.K7(u,{iB:e,rB:i,nB:s,oB:r,uB:h,CB:n,fB:a,mB:o,SB:l})}},RemoveChild2=function(t){var e,i=GetInst2(this),s=i.Dx().Kft().tF();for(e of t.bSt(i,s))i.Z7(e)},RemoveFromParent2=function(){var t=GetInst2(this);t.tB()&&t.W7().Z7(t)},ChildCount2=function(){return GetInst2(this).X7()},AllChildCount2=function(){return GetInst2(this).wSt()},SetMeshSize2=function(t,e){t=Math.floor(t),e=Math.floor(e);var i=GetWorldInfo2(this);t<2||e<2||!isFinite(t)||!isFinite(e)?(i.yB(),i.f7()):i._B(t,e)},SetMeshPoint2=function(t,e,i,s,r,h,n,a){var o=GetWorldInfo2(this);o.IB(t,e,{mode:0===i?"absolute":"relative",x:s,y:r,wD:h,u:n,v:a})&&o.f7()},MeshColumns2=function(){var t=GetWorldInfo2(this);return t.MB()?t.wB().Fg():0},MeshRows2=function(){var t=GetWorldInfo2(this);return t.MB()?t.wB().Bg():0},SetElementVisible2=function(t){var e=GetWorldInfo2(this);t=2===t?!e.uD():0!==t,e.uD()!==t&&e.oD(t)},SetElementCSSStyle2=function(t,e){this instanceof self.ZD?this.Ik(t,e):this.kB(t,e)},SetElementAttribute2=function(t,e){this instanceof self.ZD?this.Rk(t,""+e):this.OSt(t,""+e)},RemoveElementAttribute2=function(t){this instanceof self.ZD?this.Mk(t):this.GSt(t)},SetElementFocus2=function(){this instanceof self.ZD?this.Ek():this.DB()},SetElementBlur2=function(){this instanceof self.ZD?this.yk():this.BB()},IsElementFocused2=function(){return this instanceof self.ZD?this.Ak():this.PSt()},SetElementEnabled2=function(t){this instanceof self.ZD?this._setEnabled(0!==t):this.LSt(0!==t)},IsElementEnabled2=function(){return this instanceof self.ZD?this.Y1t():this.xSt()},CompareInstanceVar2=function(t,e,i){return C33.compare(GetInst2(this).hht(t),e,i)},IsBoolInstanceVarSet2=function(t){return!!GetInst2(this).hht(t)},PickInstVarHiLow2=function(i,s){var t=this.h5(),r=t.r5();if(!r.length)return!1;var h=this.uU();let n=null,a=0;for(let t=0,e=r.length;t<e;++t){var o=r[t],l=h?o.tF().Kmt(this.Zmt()):0,l=o.hht(l+s);(null===n||0===i&&l<a||1===i&&l>a)&&(a=l,n=o)}return t.i3t(n),!0},PickByUID2=function(t){return(this.i3.zft().vvt()?PickByUID_Inverted2:PickByUID_Normal2)(this,t)},PickByUID_Normal2=function(t,e){e=t.Dx().hx(e);if(e){var i=t.h5();if(i.kct()||i.qct().includes(e))if(t.uU()){if(e.tF().NSt(t))return i.i3t(e),t.b1t(),!0}else if(e.tF()===t)return i.i3t(e),t.b1t(),!0}return!1},PickByUID_Inverted2=function(t,s){var r=t.h5();if(r.kct()){r.Yct(!1),r.$ct();var i=t.r5();for(let t=0,e=i.length;t<e;++t){var h=i[t];h.CF()===s?r.Xct(h):r.jct(h)}return t.b1t(),!!r.qct().length}{var n=r.qct();let i=0;for(let t=0,e=n.length;t<e;++t){var a=n[t];(n[i]=a).CF()===s?r.Xct(a):++i}return C33.Nn(n,i),t.b1t(),!!n.length}},HasTags2=function(t){var t=new Set(C33.Kn(t)),e=GetInst2(this)._F();return t.cs(e)},Tags2=function(){return GetInst2(this).DSt()},TagsCount2=function(){return GetInst2(this)._F().size},TagAt2=function(t){return GetInst2(this).FSt(t)},ChangeTags2=function(t,e){e=C33.Kn(e);if(0!==e.length){var i=GetInst2(this),s=new Set(i._F());if(0===t)for(var r of e)s.add(r);else if(1===t)for(var h of e)s.delete(h);i.yF(s)}},Destroy2=function(){var t=GetInst2(this);t.Dx().aF(t)},OnCreated2=function(){return!0},OnDestroyed2=function(){return!0},SetInstanceVar2=function(t,e){GetInst2(this).nht(t,e)},AddInstanceVar2=function(t,e){var i=GetInst2(this),s=i.hht(t);"number"==typeof s&&"number"!=typeof e?e=parseFloat(e):"string"==typeof s&&"string"!=typeof e&&(e=e.toString()),i.nht(t,s+e)},SubInstanceVar2=function(t,e){var i=GetInst2(this),s=i.hht(t);"number"==typeof s&&("number"!=typeof e&&(e=parseFloat(e)),i.nht(t,s-e))},SetBoolInstanceVar2=function(t,e){GetInst2(this).nht(t,e?1:0)},ToggleBoolInstanceVar2=function(t){var e=GetInst2(this);e.nht(t,0===e.hht(t)?1:0)},LoadFromJsonString2=function(t){let e;try{e=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}t=GetInst2(this);t.Dx().BSt(),t.eJ("state"),t.Eg(e,"state"),t.Dx().$St("state",{kSt:!0})},AsJSON2=function(){return JSON.stringify(GetInst2(this)._g("state"))},ObjectTypeName2=function(){return GetInst2(this).tF().qc()},Count2=function(){var t,e=GetInst2(this).Dx(),i=e.qft().L3t();let s=i.a5();for(t of e.RSt(i))++s;return s},PickedCount2=function(){return GetInst2(this).Dx().qft().L3t().h5().r5().length},GetIID2=function(){return GetInst2(this).Oq()},GetUID2=function(){return GetInst2(this).CF()},OnInstanceSignal2=function(t){var e=GetInst2(this);return t.toLowerCase()===e.Dx().U4().Edt(e)},InstanceSignal2=function(t){var e=GetInst2(this);e.Dx().U4().IF(e,t)},InstanceWaitForSignal2=function(t){return this.Dx().U4().J0t().WSt(this.h5().r5(),t),!0},TemplateName2=function(){return GetInst2(this).mF()},C33=(GetInst=GetInst2,GetWorldInfo=GetWorldInfo2,CompareX=CompareX2,CompareY=CompareY2,IsOnScreen=IsOnScreen2,IsOutsideLayout=IsOutsideLayout2,PickDistance=PickDistance2,SetX=SetX2,SetY=SetY2,SetPos=SetPos2,SetPosToObject=SetPosToObject2,MoveForward=MoveForward2,MoveAtAngle=MoveAtAngle2,GetX=GetX2,GetY=GetY2,GetDt=GetDt2,CompareWidth=CompareWidth2,CompareHeight=CompareHeight2,SetWidth=SetWidth2,SetHeight=SetHeight2,SetSize=SetSize2,GetWidth=GetWidth2,GetHeight=GetHeight2,GetBboxLeft=GetBboxLeft2,GetBboxTop=GetBboxTop2,GetBboxRight=GetBboxRight2,GetBboxBottom=GetBboxBottom2,GetBboxMidX=GetBboxMidX2,GetBboxMidY=GetBboxMidY2,IsAngleWithin=IsAngleWithin2,IsAngleClockwiseFrom=IsAngleClockwiseFrom2,IsBetweenAngles=IsBetweenAngles2,SetAngle=SetAngle2,RotateClockwise=RotateClockwise2,RotateCounterclockwise=RotateCounterclockwise2,RotateTowardAngle=RotateTowardAngle2,RotateTowardPosition=RotateTowardPosition2,SetTowardPosition=SetTowardPosition2,GetAngle=GetAngle2,CompareOpacity=CompareOpacity2,IsVisible=IsVisible2,SetVisible=SetVisible2,SetOpacity=SetOpacity2,SetDefaultColor=SetDefaultColor2,GetColor=GetColor2,GetOpacity=GetOpacity2,IsOnLayer=IsOnLayer2,PickTopBottom=PickTopBottom2,CompareZElevation=CompareZElevation2,MoveToTop=MoveToTop2,MoveToBottom=MoveToBottom2,MoveToLayer=MoveToLayer2,ZMoveToObject=ZMoveToObject2,SetZElevation=SetZElevation2,LayerNumber=LayerNumber2,LayerName=LayerName2,ZIndex=ZIndex2,ZElevation=ZElevation2,TotalZElevation=TotalZElevation2,IsEffectEnabled=IsEffectEnabled2,SetEffectEnabled=SetEffectEnabled2,SetEffectParam=SetEffectParam2,CollMemory_Add=CollMemory_Add2,CollMemory_Remove=CollMemory_Remove2,CollMemory_RemoveInstance=CollMemory_RemoveInstance2,CollMemory_Get=CollMemory_Get2,DoOverlapCondition=DoOverlapCondition2,FinishCollisionConditionPicking=FinishCollisionConditionPicking2,FinishCollisionCondition=FinishCollisionCondition2,OnCollision=OnCollision2,IsOverlapping=IsOverlapping2,IsOverlappingOffset=IsOverlappingOffset2,HasParent=HasParent2,HasChildren=HasChildren2,PickParent=PickParent2,PickChildren=PickChildren2,PickNthChild=PickNthChild2,CompareChildCount=CompareChildCount2,AddChild=AddChild2,RemoveChild=RemoveChild2,RemoveFromParent=RemoveFromParent2,ChildCount=ChildCount2,AllChildCount=AllChildCount2,SetMeshSize=SetMeshSize2,SetMeshPoint=SetMeshPoint2,MeshColumns=MeshColumns2,MeshRows=MeshRows2,SetElementVisible=SetElementVisible2,SetElementCSSStyle=SetElementCSSStyle2,SetElementAttribute=SetElementAttribute2,RemoveElementAttribute=RemoveElementAttribute2,SetElementFocus=SetElementFocus2,SetElementBlur=SetElementBlur2,IsElementFocused=IsElementFocused2,SetElementEnabled=SetElementEnabled2,IsElementEnabled=IsElementEnabled2,CompareInstanceVar=CompareInstanceVar2,IsBoolInstanceVarSet=IsBoolInstanceVarSet2,PickInstVarHiLow=PickInstVarHiLow2,PickByUID=PickByUID2,PickByUID_Normal=PickByUID_Normal2,PickByUID_Inverted=PickByUID_Inverted2,HasTags=HasTags2,Tags=Tags2,TagsCount=TagsCount2,TagAt=TagAt2,ChangeTags=ChangeTags2,Destroy=Destroy2,OnCreated=OnCreated2,OnDestroyed=OnDestroyed2,SetInstanceVar=SetInstanceVar2,AddInstanceVar=AddInstanceVar2,SubInstanceVar=SubInstanceVar2,SetBoolInstanceVar=SetBoolInstanceVar2,ToggleBoolInstanceVar=ToggleBoolInstanceVar2,LoadFromJsonString=LoadFromJsonString2,AsJSON=AsJSON2,ObjectTypeName=ObjectTypeName2,Count=Count2,PickedCount=PickedCount2,GetIID=GetIID2,GetUID=GetUID2,OnInstanceSignal=OnInstanceSignal2,InstanceSignal=InstanceSignal2,InstanceWaitForSignal=InstanceWaitForSignal2,TemplateName=TemplateName2,self.We),tempColor=new C33.$a,runtime=null,tempRect=(C33.VSt=function(t){runtime=t},C33.oh(C33.Rect)),tempCandidates1=[],tempCandidates2=[],needsCollisionFinish=!1,rPickType=null,rPickFromElseInstances=!1,rToPick=new Set;function*DebugOnCollision(s){if(s){var t=this.i3,r=t.T4(),h=t.U4(),n=h.sL(),a=h.zft(),o=a.tF(),l=a.Evt(),a=a.yvt(),u=n.t8(),c=t.YQ(),f=c-1,d=u.J4(),C=n.e8(d);let i=l.get("collmemory");i||(i=C33.oh(C33.zu),l.set("collmemory",i)),a.get("collisionCreatedDestroyCallback")||(a.set("collisionCreatedDestroyCallback",!0),t.F3().addEventListener("instancedestroy",t=>CollMemory_RemoveInstance2(i,t.YB)));var l=o.h5(),p=s.h5(),m=l.r5();let e=null;for(let t=0;t<m.length;++t){var v=m[t];p.kct()?(r._St(v.Cx().mx(),s,v.Cx().T7(),tempCandidates1),e=tempCandidates1,r.ASt(v,s,e)):e=p.r5();for(let t=0;t<e.length;++t){var S=e[t];if(r.rN(v,S)||r.ISt(v,S)){var g=CollMemory_Get2(i,v,S);let t=!1,e=-2;"number"==typeof g&&(t=!0,e=g);var T,_,E,g=!t||e<f;CollMemory_Add2(i,v,S,c),g&&(g=d.Qk(),h.u8(g),E=o.h5(),T=s.h5(),E.Yct(!1),T.Yct(!1),(o===s?(_=E.qct(),C33.Dn(_),_.push(v),_.push(S),o):(_=E.qct(),E=T.qct(),C33.Dn(_),C33.Dn(E),_.push(v),E.push(S),o.b1t(),s)).b1t(),yield*d.T1t(u,C),h.f8(g))}else CollMemory_Remove2(i,v,S)}C33.Dn(tempCandidates1)}n.m8()}return!1}C33.HSt=function(t,e){var i=t[1],s=t[4],r=t[5],h=t[6],n=t[7],a=t[8],o=t[10],l=t[11],u=t[12],c=t[13],f=t[14],d=t[15],C=t[16],p=e.Iq,m=e.mrt,v=e.vrt;t[3]&&(p.USt=CompareX2,p.jSt=CompareY2,p.XSt=IsOnScreen2,p.YSt=IsOutsideLayout2,p.qSt=PickDistance2,m.og=SetX2,m.fg=SetY2,m.zSt=SetPos2,m.JSt=SetPosToObject2,m.KSt=MoveForward2,m.ZSt=MoveAtAngle2,v.QSt=GetX2,v.tgt=GetY2,v.dt=GetDt2),s&&(p.egt=CompareWidth2,p.igt=CompareHeight2,m.op=SetWidth2,m.ep=SetHeight2,m.DR=SetSize2,v.sgt=GetWidth2,v.rgt=GetHeight2,v.hgt=GetBboxLeft2,v.ngt=GetBboxTop2,v.agt=GetBboxRight2,v.ogt=GetBboxBottom2,v.lgt=GetBboxMidX2,v.ugt=GetBboxMidY2),r&&(p.cgt=IsAngleWithin2,p.fgt=IsAngleClockwiseFrom2,p.dgt=IsBetweenAngles2,m.A5=SetAngle2,m.Cgt=RotateClockwise2,m.pgt=RotateCounterclockwise2,m.mgt=RotateTowardAngle2,m.vgt=RotateTowardPosition2,m.Sgt=SetTowardPosition2,v.ggt=GetAngle2),h&&(p.uD=IsVisible2,p.Tgt=CompareOpacity2,m.oD=SetVisible2,m.Tb=SetOpacity2,m._gt=SetDefaultColor2,v.Opacity=GetOpacity2,v.Egt=GetColor2),n&&(p.ygt=IsOnLayer2,p.Agt=PickTopBottom2,p.Igt=CompareZElevation2,m.Rgt=MoveToTop2,m.Mgt=MoveToBottom2,m.wgt=MoveToLayer2,m.bgt=ZMoveToObject2,m.Cg=SetZElevation2,v.Ogt=LayerNumber2,v.Ggt=LayerName2,v.Pgt=ZIndex2,v.Lgt=ZElevation2,v.xgt=TotalZElevation2),a&&(p.Ngt=IsEffectEnabled2,m.Dgt=SetEffectEnabled2,m.Fgt=SetEffectParam2),c&&(p.tB=HasParent2,p.$X=HasChildren2,p.Bgt=PickParent2,p.$gt=PickChildren2,p.kgt=PickNthChild2,p.Wgt=CompareChildCount2,m.K7=AddChild2,m.Z7=RemoveChild2,m.Vgt=RemoveFromParent2,v.Hgt=ChildCount2,v.Ugt=AllChildCount2),f&&(m.jgt=SetMeshSize2,m.IB=SetMeshPoint2,v.Xgt=MeshColumns2,v.Ygt=MeshRows2),o&&(p.uD=IsVisible2,m.oD=SetElementVisible2,m.qgt=SetElementCSSStyle2,m.zgt=SetElementAttribute2,m.Jgt=RemoveElementAttribute2),l&&(p.Kgt=IsElementFocused2,m.Zgt=SetElementFocus2,m.Qgt=SetElementBlur2),u&&(p.qu=IsElementEnabled2,m.tTt=SetElementEnabled2),d&&(p.eTt=OnCollision2,p.iTt=IsOverlapping2,p.sTt=IsOverlappingOffset2,e.rTt=FinishCollisionCondition2),i||(p.hTt=CompareInstanceVar2,p.nTt=IsBoolInstanceVarSet2,p.aTt=PickInstVarHiLow2,p.oTt=PickByUID2,p.U$=HasTags2,m.lTt=SetInstanceVar2,m.uTt=AddInstanceVar2,m.cTt=SubInstanceVar2,m.fTt=SetBoolInstanceVar2,m.dTt=ToggleBoolInstanceVar2,m.CTt=ChangeTags2,p.pTt=OnCreated2,p.mTt=OnDestroyed2,m.vTt=Destroy2,m.STt||(m.STt=LoadFromJsonString2),v.gTt||(v.gTt=AsJSON2),v.TTt=Count2,v._Tt=PickedCount2,v.ETt=GetIID2,v.yTt=GetUID2,v.ATt=ObjectTypeName2,v.ITt=Tags2,v.RTt=TagsCount2,v.MTt=TagAt2,p.Sdt=OnInstanceSignal2,m.IF=InstanceSignal2,m.wTt=InstanceWaitForSignal2),C&&(v.bTt=TemplateName2)}}{let C33=self.We;C33.K0t=class ScheduledWait extends C33.nh{constructor(t){super(),this.h3t=t,this.u3="",this.jG=-1,this.OTt="",this.GTt=!1,this.PTt=null,this.C3t=0,this.WCt=[],this.T3t=null,this.LTt=new Map,this.xTt=null,this.NTt=null,this.DTt=-1,this.X1t=null,this.FTt=null,this.BTt=!1}lh(){this.u3="",this.jG=-1,this.OTt="",this.PTt=null,this.NTt=null,this.X1t=null,this.FTt=null,this.DTt=-1,C33.Dn(this.WCt),this.T3t&&(this.T3t.clear(),this.T3t=null);for(var t of this.LTt.values())t.lh();this.LTt.clear(),this.xTt=null}ng(){var t,e=this.h3t,i=e.Dx().lU(),s=e.qft(),s=(this.PTt=s.J4(),this.C3t=s.R3t()+1,e.kdt(this.PTt));s&&(this.NTt=s,this.X1t=s.lmt(),this.FTt=s.omt().map(t=>t.Vit()),s.d1t())&&(this.DTt=s.dmt());for(t of i){var r=t.h5();r.kct()&&!this.PTt.Fpt(t)||(this.WCt.push(t),this.LTt.set(t,C33.oh(C33.$Tt,r)))}s=e.K4();this.T3t=0<s.size?s:null}kTt(t){this.u3="timer",this.ng(),this.jG=this.h3t.Dx().pL()+t}WTt(t){this.u3="signal",this.ng(),this.OTt=t.toLowerCase()}WSt(t,e){this.u3="instance-signals",this.ng(),this.OTt=e.toLowerCase(),this.xTt=new Set(t)}VTt(t){this.u3="promise",this.ng(),t.then(()=>this.Cdt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.Cdt()})}HTt(){return"timer"===this.u3}fdt(){return"signal"===this.u3}Tdt(){return"instance-signals"===this.u3}Ddt(){return"promise"===this.u3}ddt(){return this.OTt}UTt(){return this.GTt}Cdt(){this.GTt=!0}_dt(t){this.xTt.delete(t),0===this.xTt.size&&this.Cdt()}tdt(){return this.HTt()?this.jG<=this.h3t.Dx().pL():this.UTt()}jTt(t){t._3t(this.PTt,this.C3t);for(var[e,i]of this.LTt.entries()){e=e.h5();i._3t(e)}this.T3t&&t.$3t([...this.T3t]);t=this.NTt;t&&(t.A1t(this.X1t),t.omt().map((t,e)=>t.Ast(this.FTt[e])),t.d1t())&&t.Cmt(this.DTt)}edt(t){this.jTt(t),this.PTt.C1t(t),this.NTt&&this.NTt.d1t()&&this.NTt.x1t(this.DTt),this.h3t.X0t(this.WCt),this.BTt=!0}async hdt(t){this.jTt(t);for(var e of this.PTt.p1t(t))await this.h3t.Dx().b0t(e);this.NTt&&this.NTt.d1t()&&this.NTt.x1t(this.DTt),this.h3t.X0t(this.WCt),this.BTt=!0}idt(){return this.BTt}Nct(t){for(var e of this.LTt.values())e.Nct(t);if("instance-signals"===this.u3){for(var i of t)this.xTt.delete(i);0===this.xTt.size&&this.Cdt()}}NX(){var t,e,i={},s={wt:this.u3,t:this.jG,st:this.OTt,s:this.GTt,ev:this.PTt.SU(),sm:this.WCt.map(t=>t.SU()),dsm:this.T3t?[...this.T3t].map(t=>t.SU()):null,sols:i};this.PTt.e1t(this.C3t)&&(s.act=this.PTt.Zft(this.C3t).SU());for([t,e]of this.LTt)i[t.SU().toString()]=e.NX();return"instance-signals"===this.u3&&(s.pi=[...this.xTt].map(t=>t.CF())),s}static Fdt(t,e){var i=t.Dx(),s=t.a0t(e.ev);if(!s)return null;let r=0;if(e.hasOwnProperty("act")){var h=t.l0t(e.act);if(!h)return null;r=h.f4()}var n,a,o,l=C33.oh(C33.K0t,t);l.jG=e.t,e.hasOwnProperty("wt")?l.u3=e.wt:l.u3=-1===l.jG?"signal":"timer",l.OTt=e.st,l.GTt=e.s,l.PTt=s,l.C3t=r;for(n of e.sm){var u=i.gq(n);u&&l.WCt.push(u)}if(Array.isArray(e.dsm))for(var c of e.dsm){c=i.gq(c);c&&(l.T3t||(l.T3t=new Set),l.T3t.add(c))}for([a,o]of Object.entries(e.sols)){var f,d=parseInt(a,10),d=i.gq(d);d&&((f=C33.oh(C33.$Tt,null)).DX(t,o),l.LTt.set(d,f))}if("instance-signals"===l.u3){l.xTt=new Set;for(var C of e.pi){C=i.hx(C);C&&l.xTt.add(C)}}return l}}}{let C33=self.We;C33.$Tt=class SolState extends C33.nh{constructor(t){super(),this.wct=null,this.XTt=!0,this.oV=[],t&&(this.wct=t.tF(),this.XTt=t.kct(),C33.kn(this.oV,t.qct()))}lh(){this.wct=null,C33.Dn(this.oV)}_3t(t){t.Yct(this.XTt),C33.kn(t.qct(),this.oV)}Nct(t){C33.jn(this.oV,t)}NX(){return{sa:this.XTt,insts:this.oV.map(t=>t.CF())}}DX(t,e){var i,s=t.Dx();this.XTt=!!e.sa,C33.Dn(this.oV);for(i of e.insts){var r=s.hx(i);r&&this.oV.push(r)}}}}{let GetNextParamMap2=function(t,e){let i=t.get(e);return i||(i=new Map,t.set(e,i)),i},C33=(GetNextParamMap=GetNextParamMap2,self.We);C33.YTt=class SDKPluginBase extends C33.nh{constructor(t){super(),this.i3=t.runtime,this.qTt=!!t._N,this.zTt=!!t.JTt,this.KTt=!!t.MN,this.ZTt=!!t.QTt,this.t_t=!!t.bN,this.e_t=!!t.i_t,this.s_t=!!t.NN,this.r_t=!!t.IN,this.h_t=!!t.GN,this.n_t=t.a_t,this.o_t=null,this.l_t=new Map,this.u_t=new Map,this.c_t=new Map,this.f_t=new Map,this.d_t=t.C_t,this.p_t=null}lh(){this.i3=null}Dx(){return this.i3}m_t(){}gdt(){return(2<=this.mvt()?this.p_t:this).constructor}mvt(){return this.n_t}v_t(t=!1){let e=this.d_t;return e=t&&"function"!=typeof e&&2<=this.mvt()?globalThis.S6:e}EN(){return this.qTt}AN(){return this.zTt}RN(){return this.r_t}PN(){return this.h_t}wN(){return this.KTt}NS(){return this.ZTt}ON(){return this.t_t}xN(){return this.e_t}DN(){return this.s_t}$mt(t,e){var i;if(e)return(i=this.l_t.get(t))||(i=t.bind(e),this.l_t.set(t,i)),i;throw new Error("missing 'this' binding")}fvt(t,e,i){var s,r;if(e)return(r=(s=GetNextParamMap2(this.u_t,t)).get(i))||(r=t.bind(e,i),s.set(i,r)),r;throw new Error("missing 'this' binding")}dvt(t,e,i,s){var r,h;if(e)return r=GetNextParamMap2(this.c_t,t),(h=(r=GetNextParamMap2(r,i)).get(s))||(h=t.bind(e,i,s),r.set(s,h)),h;throw new Error("missing 'this' binding")}Cvt(t,e,i,s,r){var h,n;if(e)return h=GetNextParamMap2(this.f_t,t),h=GetNextParamMap2(h,i),(n=(h=GetNextParamMap2(h,s)).get(r))||(n=t.bind(e,i,s,r),h.set(r,n)),n;throw new Error("missing 'this' binding")}S_t(t){if(!this.EN())throw new Error("must be single-global plugin");this.o_t=t}VN(){if(this.EN())return this.o_t;throw new Error("must be single-global plugin")}UN(){if(this.EN())return this.o_t.UN();throw new Error("must be single-global plugin")}g_t(){var t=this.mvt(),e=(C33.gN.T_t(this,t),this.v_t(!0));if(e){if(this.p_t=new e,!(this.p_t instanceof self.vN))throw new TypeError("plugin class must derive from IPlugin")}else this.p_t=new self.vN;C33.gN.__t(t)}$N(){return this.p_t}}}{let C33=self.We;C33.E_t=class SDKDOMPluginBase extends C33.YTt{constructor(t,e){super(t),this.y_t=e,this.A_t=0,this.I_t=new Map,this.R_t("elem-focused",t=>t.M_t()),this.R_t("elem-blurred",t=>{t&&t.w_t()})}lh(){super.lh()}b_t(t){var e=this.A_t++;return this.I_t.set(e,t),e}O_t(t){this.I_t.delete(t)}R_t(t,i){this.i3.WF(this.y_t,t,t=>{var e=this.I_t.get(t.elementId);i(e,t)})}}}{let C33=self.We;C33.G_t=class SDKTypeBase extends C33.nh{constructor(t){super(),this.wct=t,this.i3=t.Dx(),this.P_t=t.YN()}lh(){this.wct=null,this.i3=null,this.P_t=null}tF(){return this.wct}Dx(){return this.i3}YN(){return this.P_t}T$(){return this.wct.T$()}m_t(){}wvt(t){}dSt(t){}CSt(t){}YY(t){}QY(){}JY(){}_q(t){}L_t(){}v_t(){return null}x_t(t,e,i){t=C33.oh(C33.Event,t,e);t.N_t=this,i&&Object.assign(t,i),this.tF().rz(t)}}}{let C33=self.We;C33.D_t=class SDKInstanceBase extends C33.nh{constructor(t,e){super(),this.wi=t,this.y_t=e,this.F_t=null,this.i3=t.Dx(),this.wct=this.wi.tF(),this.B_t=this.wct.fSt(),this.Uz=null,this.Xz=null,this.qF=!1,this.KF=!1,this.Tf=null,this.aR=!1}lh(){this.aR=!0,this.$_t(),this.k_t(),this.Uz=null,this.Xz=null,this.Tf&&(this.Tf.lh(),this.Tf=null),this.wi=null,this.i3=null,this.wct=null,this.B_t=null}uh(){return this.aR}c6(){return this.wi}Dx(){return this.i3}tF(){return this.wct}YN(){return this.B_t.YN()}fSt(){return this.B_t}W_t(){return this.wi.nx()}FF(t){return this.i3.FF(t,this.wi,null)}V_t(t){return this.i3.V_t(t,this.wi,null)}$F(t){return this.i3.$F(t,this.wi,null)}H_t(t,e){return this.i3.H_t(t,this.wi,e)}U_t(t,e){return this.i3.U_t(t,this.wi,e)}j_t(t){return this.i3.j_t(t)}X_t(t,e){this.i3.WF(this.y_t,t,e)}Y_t(t){for(var[e,i]of t)this.X_t(e,i)}q_t(t,e){this.i3.h3(this.y_t,t,e)}z_t(t,e){return this.i3.Ax(this.y_t,t,e)}J_t(t,e){if(!this.i3.w4())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.y_t,handler:t,data:e,responseId:null});this.q_t(t,e)}K_t(t){if(!t)throw new Error("cannot set empty component id");this.F_t=t}Z_t(){if(this.F_t)return this.i3.i7(this.F_t);throw new Error("wrapper extension component id not set")}r7(t,e){if(!this.F_t)throw new Error("wrapper extension component id not set");this.i3.r7(this.F_t,t,e)}Q_t(t){for(var[e,i]of t)this.r7(e,i)}Uk(t,e){if(!this.F_t)throw new Error("wrapper extension component id not set");this.i3.Uk(this.F_t,t,e)}jk(t,e){if(this.F_t)return this.i3.jk(this.F_t,t,e);throw new Error("wrapper extension component id not set")}QJ(){}tEt(){}eEt(){this.qF||(this.Uz||(this.Uz=()=>this.QJ()),this.i3.F3().addEventListener("tick",this.Uz),this.qF=!0)}$_t(){this.qF&&(this.i3.F3().removeEventListener("tick",this.Uz),this.qF=!1)}iEt(){return this.qF}sEt(){this.KF||(this.Xz||(this.Xz=()=>this.tEt()),this.i3.F3().addEventListener("tick2",this.Xz),this.KF=!0)}k_t(){this.KF&&(this.i3.F3().removeEventListener("tick2",this.Xz),this.KF=!1)}rEt(){return this.KF}hEt(){return[]}_g(){return null}Eg(t){}Jrt(t){}iht(t,e){}Jht(t,e,i){if(0!==e){var s=this.Jrt(t);if("number"!=typeof s)throw new Error("expected number");this.iht(t,s+e,i)}}nEt(t,e,i,s){}aEt(t,...e){t.call(this,...e)}oEt(t,...e){return t.call(this,...e)}v_t(){return null}x_t(t,e,i){var s;this.wi.lEt()&&(s=this.W_t(),(t=C33.oh(C33.Event,t,e)).YB=s,i&&Object.assign(t,i),s.dispatchEvent(t))}NS(){return!1}}}{let C33=self.We;C33.uEt=class SDKWorldInstanceBase extends C33.D_t{constructor(t,e){super(t,e),this.Ytt=t.Cx(),this.cEt=null,this.fEt=null}lh(){var t;this.cEt&&((t=this.i3.F3()).removeEventListener("renderercontextlost",this.cEt),t.removeEventListener("renderercontextrestored",this.fEt),this.cEt=null,this.fEt=null),this.Ytt=null,super.lh()}dEt(){this.CEt()}pEt(){}mEt(){}CEt(){var t;this.cEt||(this.cEt=()=>this.tV(),this.fEt=()=>this.vEt(),(t=this.i3.F3()).addEventListener("renderercontextlost",this.cEt),t.addEventListener("renderercontextrestored",this.fEt))}tV(){this.pEt()}vEt(){this.mEt()}Cx(){return this.Ytt}ket(){return!1}$et(){if(!this.ket())throw new Error("original size not known");var t=this.SEt();if(t)return t.tp()}Vet(){if(!this.ket())throw new Error("original size not known");var t=this.SEt();if(t)return t.cp()}SEt(){return null}gEt(){var t=this.SEt();if(t){t=t.T_();if(t)return[t.tp(),t.cp()]}return[100,100]}TEt(){var t=this.SEt();return t?t.CM():null}_Et(){var t=this.SEt();return t?t.EEt():null}yEt(){var t=this.SEt();return!!t&&t.AEt()}mSt(t){var e=this.wi.Cx();return[e.ag(),e.ug(),e.S7()]}L_t(t,e,i){}IEt(t,e){}dX(){return!0}}}{let C33=self.We,tempRect=C33.oh(C33.Rect);C33.REt=class SDKDOMInstanceBase extends C33.uEt{constructor(t,e){super(t,e),this.MEt=this.YN().b_t(this),this.wEt=!0,this.bEt=!1,this.OEt=!1,this.GEt=-.2,this.PEt=C33.oh(C33.Rect,0,0,-1,-1);t=this.i3.K6();this.LEt=t.Q6(),this.xEt=t.ek(),this.NEt=-1,this.DEt=-1,this.FEt=!1,this.eEt()}lh(){this.YN().O_t(this.MEt),this.BEt("destroy"),this.MEt=-1,super.lh()}xB(){if(this.i3.w4())throw new Error("not valid in worker mode");return this.$Et("get-element")}BEt(t,e){(e=e||{}).elementId=this.MEt,this.q_t(t,e)}$Et(t,e){return(e=e||{}).elementId=this.MEt,this.J_t(t,e)}kEt(t,e){return(e=e||{}).elementId=this.MEt,this.z_t(t,e)}WEt(t){t=t||{};var e=this.Cx();t.elementId=this.MEt,t.isVisible=e.uD(),t.htmlIndex=e.mx().ck(),t.htmlZIndex=e.fk(),Object.assign(t,this.VEt()),this.wEt=!!t.isVisible,this.J_t("create",t),this.HEt(!0)}UEt(t){this.wEt!==(t=!!t)&&(this.wEt=t,this.BEt("set-visible",{isVisible:t}))}QJ(){this.HEt(!1)}jEt(){var t=this.i3.K6().vk();return"Android"===C33.di.Ci&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}HEt(t){if(!this.c6().Sk()){var e=this.Cx(),i=e.mx(),s=e.T7(),[r,h]=i.jD(s.gl(),s.Tl()),[s,n]=i.jD(s._l(),s.El()),a=this.i3.K6(),o=a.gk(),l=a.Tk();if(e.uD()&&i.uD())if(!this.jEt()&&(s<=0||n<=0||o<=r||l<=h))this.UEt(!1);else{tempRect.set(r,h,s,n);o=a.Q6(),l=a.ek(),r=i.ck(),h=e.fk();if(!t&&tempRect.equals(this.PEt)&&this.LEt===o&&this.xEt===l&&this.NEt===r&&this.DEt===h)this.UEt(!0);else{this.PEt._(tempRect),this.LEt=o,this.xEt=l,this.NEt=r,this.DEt=h,this.UEt(!0);let t=null;this.OEt&&(t=i._k()+this.GEt),this.BEt("update-position",{left:Math.round(this.PEt.gl()),top:Math.round(this.PEt.Tl()),width:Math.round(this.PEt.width()),height:Math.round(this.PEt.height()),htmlIndex:r,htmlZIndex:h,fontSize:t})}}else this.UEt(!1)}}DB(){this.$Et("focus",{focus:!0})}BB(){this.$Et("focus",{focus:!1})}M_t(){this.bEt=!0}w_t(){this.bEt=!1}PSt(){return this.bEt}kB(t,e){this.BEt("set-css-style",{prop:C33.Da(t),val:e})}OSt(t,e){this.BEt("set-attribute",{name:t,val:e})}GSt(t){this.BEt("remove-attribute",{name:t})}XEt(){this.FEt||(this.FEt=!0,Promise.resolve().then(()=>{this.FEt=!1,this.BEt("update-state",this.VEt())}))}VEt(){}YEt(){return this.MEt}}}{let C33=self.We,IBehavior=self.JB;C33.qEt=class SDKBehaviorBase extends C33.nh{constructor(t){super(),this.i3=t.runtime,this.zEt=C33.oh(C33.sc),this.JEt=C33.oh(C33.sc),this.n_t=t.a_t,this.d_t=t.C_t,this.KEt=null}lh(){this.JEt.lh(),this.zEt.lh(),this.i3=null}Dx(){return this.i3}m_t(){}mvt(){return this.n_t}v_t(t=!1){let e=this.d_t;return e=t&&"function"!=typeof e&&2<=this.mvt()?globalThis.Ok:e}ZEt(t){this.zEt.ac(t)}RJ(){return this.zEt.oc()}KH(t){this.JEt.ac(t)}tU(t){this.JEt.Qu(t)}r5(){return this.JEt.oc()}g_t(){var t=this.mvt(),e=(C33.gN.T_t(this,t),this.v_t(!0));if(e){if(this.KEt=new e,!(this.KEt instanceof IBehavior))throw new TypeError("behavior class must derive from IBehavior")}else this.KEt=new IBehavior;C33.gN.__t(t)}VB(){return this.KEt}}}{let C33=self.We;C33.QEt=class SDKBehaviorTypeBase extends C33.nh{constructor(t){super(),this.i3=t.Dx(),this.t2t=t,this.wct=t.tF(),this.tyt=t.HB(),this.tyt.ZEt(this.wct)}lh(){this.i3=null,this.t2t=null,this.wct=null,this.tyt=null}m_t(){}XB(){return this.t2t}tF(){return this.wct}Dx(){return this.i3}HB(){return this.tyt}}}{let C33=self.We;C33.eyt=class SDKBehaviorInstanceBase extends C33.nh{constructor(t,e){super(),this.iyt=t,this.y_t=e,this.wi=t.qB(),this.i3=t.Dx(),this.t2t=t.XB(),this.B_t=this.t2t.fSt(),this.qF=!1,this.KF=!1,this.Vk=!1,this.Tf=null}lh(){this.$_t(),this.k_t(),this.syt(),this.Tf&&(this.Tf.lh(),this.Tf=null),this.iyt=null,this.wi=null,this.i3=null,this.t2t=null,this.B_t=null}HB(){return this.t2t.HB()}ryt(){return this.iyt}qB(){return this.wi}tF(){return this.wi.tF()}Cx(){return this.wi.Cx()}Dx(){return this.i3}XB(){return this.t2t}fSt(){return this.B_t}W_t(){return this.iyt.W_t()}FF(t){return this.i3.FF(t,this.wi,this.t2t)}V_t(t){return this.i3.V_t(t,this.wi,this.t2t)}$F(t){return this.i3.$F(t,this.wi,this.t2t)}hyt(){}QJ(){}tEt(){}nyt(){}eEt(){this.qF||(this.i3.Dk(this),this.qF=!0)}$_t(){this.qF&&(this.i3.Fk(this),this.qF=!1)}iEt(){return this.qF}sEt(){this.KF||(this.i3.Bk(this),this.KF=!0)}k_t(){this.KF&&(this.i3.$k(this),this.KF=!1)}rEt(){return this.KF}ayt(){this.Vk||(this.i3.kk(this),this.Vk=!0)}syt(){this.Vk&&(this.i3.Wk(this),this.Vk=!1)}oyt(){return this.Vk}hEt(){return[]}X_t(t,e){this.i3.WF(this.y_t,t,e)}lyt(t,e){}_g(){return null}Eg(t){}Jrt(t){}iht(t,e){}Jht(t,e){if(0!==e){var i=this.Jrt(t);if("number"!=typeof i)throw new Error("expected number");this.iht(t,i+e)}}nEt(t,e,i,s){}aEt(t,...e){t.call(this,...e)}oEt(t,...e){return t.call(this,...e)}v_t(){return null}x_t(t,e,i){var s;this.iyt.lEt()&&(s=this.W_t(),(t=C33.oh(C33.Event,t,e)).uyt=s,t.YB=s.YB,i&&Object.assign(t,i),s.dispatchEvent(t))}}}{let ValidateInternalAPIToken2=function(t){if(t!==internalApiToken)throw new Error("invalid internal API token")},C33=(ValidateInternalAPIToken=ValidateInternalAPIToken2,self.We),internalApiToken=(C33.Mq={},C33.hot={},C33.Ve()),initObjectStack=[],initObjectStack2=[],initPropertiesStack=[],originalPushInitObject=null,originalPopInitObject=null,originalGetInitObject=null,originalGetInitObject2=null,pluginsByCtor=new Map,behaviorsByCtor=new Map;C33.gN=class AddonManager extends C33.nh{constructor(t,e){super(),this.i3=t,this.cyt=[],this.xmt=null,this.fyt=[],this.dyt=new Map,this.Cyt=null,this.pyt=null,this.myt=new Set(e)}vyt(t){var e=t[19],i=this.i3.B1t(t[0]);if(!i)throw new Error("missing plugin");C33.HSt(t,i);var s=2<=e?C33.YTt:i,s=C33.oh(s,{runtime:this.i3,_N:t[1],JTt:t[2],MN:t[5],bN:t[8],QTt:t[9],i_t:t[13],NN:t[14],IN:t[17],GN:t[18],a_t:e,C_t:2<=e?i:null});s.m_t(),this.cyt.push(s),pluginsByCtor.set(i,s)}Syt(){this.xmt=C33.oh(C33.Mq.Rq,{runtime:this.i3,_N:!0}),this.xmt.m_t()}gyt(t){let e=t[1],i=this.i3.B1t(t[0]);if(!i)throw new Error("missing behavior");this.dyt.set(i,()=>{var t=2<=e?C33.qEt:i,t=C33.oh(t,{runtime:this.i3,a_t:e,C_t:2<=e?i:null});t.m_t(),this.fyt.push(t),behaviorsByCtor.set(i,t),!this.Cyt&&C33.hot.solid&&t instanceof C33.hot.solid?this.Cyt=t:!this.pyt&&C33.hot.jumpthru&&t instanceof C33.hot.jumpthru&&(this.pyt=t),t.g_t()})}Tyt(t){var e=this.dyt.get(t);e&&(e(),this.dyt.delete(t))}static T_t(t,e=1){if(C33.gN.T_t!==originalPushInitObject)throw new Error("invalid method");1===e&&initObjectStack.push(t),initObjectStack2.push(t)}static __t(t=1){if(C33.gN.__t!==originalPopInitObject)throw new Error("invalid method");1===t&&initObjectStack.pop(),initObjectStack2.pop()}static rF(){if(C33.gN.rF!==originalGetInitObject)throw new Error("invalid method");if(0===initObjectStack.length)throw new Error("no init object set");return initObjectStack.at(-1)}static SN(t){if(C33.gN.SN!==originalGetInitObject2)throw new Error("invalid method");if(ValidateInternalAPIToken2(t),0===initObjectStack2.length)throw new Error("no init object set");return initObjectStack2.at(-1)}static _yt(t){initPropertiesStack.push(t)}static Eyt(){initPropertiesStack.pop()}static NF(){if(0===initPropertiesStack.length)throw new Error("no init properties set");return initPropertiesStack.at(-1)}yyt(){for(var t of this.cyt)t.g_t()}static BN(t){return pluginsByCtor.get(t)||null}static KB(t){return behaviorsByCtor.get(t)||null}Nmt(){return this.xmt}Ayt(){return this.Cyt}Iyt(){return this.pyt}i7(t){return this.myt.has(t)}},originalPushInitObject=C33.gN.T_t,originalPopInitObject=C33.gN.__t,originalGetInitObject=C33.gN.rF,originalGetInitObject2=C33.gN.SN}{let C33=self.We,allImageInfos=new Set;C33.Ryt=class ImageInfo extends C33.nh{constructor(){super(),this.Myt=0,this.HW="",this.UW=0,this.wyt=0,this.byt=0,this.Bp=0,this.$p=0,this.Oyt=!1,this.Gyt=!1,this.Pyt=null,this.Lyt="",this.eR=C33.oh(C33.Rect),this.xyt=C33.oh(C33.Jl),this.Nyt="",this.Dyt=new self.xx(this),allImageInfos.add(this)}lh(){this.rR(),this.Pyt&&0===this.Pyt.sV()&&this.Pyt.lh(),this.Pyt=null,allImageInfos.delete(this),this.Fyt()}static tV(){for(var t of allImageInfos)t.Lyt="",t.eR.set(0,0,0,0),t.xyt.vu(t.eR)}Byt(t){this.HW=t[0],this.UW=t[1],this.wyt=t[2],this.byt=t[3],this.Bp=t[4],this.$p=t[5],this.Oyt=t[6],this.Gyt=!0}$yt(t,e){if(this.Pyt)throw new Error("already loaded asset");this.HW=e;var i={};return C33.da(e)&&(i.SW="remote"),this.Nx(t,i),this.Pyt._W()}kyt(t,e){if(this.Pyt)throw new Error("already loaded asset");this.HW="",this.UW=e.size,this.Pyt=C33.oh(C33.gW,t.v4(),{blob:e,size:this.UW,SW:"local"})}Wyt(t){if(t===this)throw new Error("cannot replace with self");this.Myt++,this.rR(),this.HW=t.HW,this.UW=t.UW,this.wyt=t.wyt,this.byt=t.byt,this.Bp=t.Bp,this.$p=t.$p,this.Oyt=t.Oyt,this.Gyt=t.Gyt,this.Pyt=t.Pyt,this.Lyt=t.Lyt,this.eR=t.eR,this.xyt=t.xyt,this.Fyt()}TW(){return this.HW}ec(){return this.UW}Vyt(){return this.wyt}Hyt(){return this.byt}AEt(){return this.Oyt}tp(){return this.Bp}cp(){return this.$p}Uyt(){return this.Pyt.tp()}jyt(){return this.Pyt.cp()}Nx(t,e){if(this.Pyt)throw new Error("already got asset");e=Object.assign({},e,{url:this.TW(),size:this.ec()}),this.Pyt=t.vW(e)}qW(){return this.Pyt&&this.Pyt.qW()}async J8(t,e){if(!this.Pyt)throw new Error("no asset");if(this.Lyt)throw new Error("already loaded texture");var i=this.Myt,t=(this.Lyt="loading",await this.Pyt.J8(t,e));if(this.Myt!==i)return null;if(!t)return this.Lyt="",null;this.Lyt="loaded",this.Gyt||(this.Bp=t.tp(),this.$p=t.cp(),this.Gyt=!0);e=this.Oyt?this.$p:this.Bp,i=this.Oyt?this.Bp:this.$p;return this.eR.set(this.wyt,this.byt,this.wyt+e,this.byt+i),this.eR.Mt(t.tp(),t.cp()),this.xyt.vu(this.eR),this.Oyt&&this.xyt.yu(),t}rR(){this.Lyt&&(this.Pyt&&this.Pyt.rR(),this.Lyt="",this.eR.set(0,0,0,0),this.xyt.vu(this.eR))}T_(){return this.Pyt&&"loaded"===this.Lyt?this.Pyt.T_():null}CM(){return this.eR}EEt(){return this.xyt}G6(){return this.Dyt}Xyt(){return this.Pyt}async Yyt(t){t=t||await this.Pyt.rV();var e=C33.Ma(this.Bp,this.$p),i=e.getContext("2d");return this.Oyt?(i.rotate(Math.PI/-2),i.translate(-this.$p,0),i.drawImage(t,this.wyt,this.byt,this.$p,this.Bp,0,0,this.$p,this.Bp)):i.drawImage(t,this.wyt,this.byt,this.Bp,this.$p,0,0,this.Bp,this.$p),e}async qyt(t){return this.Nyt||(t=await this.Yyt(t),t=await C33.wa(t),this.Nyt=URL.createObjectURL(t)),this.Nyt}Fyt(){this.Nyt&&(URL.revokeObjectURL(this.Nyt),this.Nyt="")}}}{let C33=self.We;C33.zyt=class AnimationInfo extends C33.nh{constructor(t){super(),this.dh=t[0],this.Jyt=t[1],this.j2t=!!t[2],this.Rnt=t[3],this.Kyt=t[4],this.Zyt=!!t[5],this.kV=t[6],this.Qyt=t[7].map(t=>C33.oh(C33.tAt,t)),this.eAt=new self.s$(this)}static iAt(t,e){e=C33.oh(C33.zyt,[e,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return e.Qyt.push(C33.tAt.iAt(t)),e}lh(){for(var t of this.Qyt)t.lh();C33.Dn(this.Qyt)}sAt(t){for(var e of this.Qyt)e.T$().Nx(t)}rAt(e,i){return Promise.all(this.Qyt.map(t=>t.T$().J8(e,i)))}hAt(){for(var t of this.Qyt)t.T$().rR()}qc(){return this.dh}SU(){return this.kV}f$(){return this.Qyt.length}C$(){return this.Qyt}nAt(t){if((t=Math.floor(t))<0||t>=this.Qyt.length)throw new RangeError("invalid frame");return this.Qyt[t]}aAt(t,e){(e=Math.floor(e))<0?this.Qyt.unshift(t):e>=this.Qyt.length?this.Qyt.push(t):this.Qyt.splice(e,0,t)}oAt(t){if((t=Math.floor(t))<0||t>=this.Qyt.length)throw new RangeError("invalid frame");this.Qyt[t].lh(),this.Qyt.splice(t,1)}lAt(i){for(let t=0,e=this.Qyt.length;t<e;++t)if(C33.gr(this.Qyt[t].$$(),i))return t;return-1}uAt(t){if("string"!=typeof t)return t;var e=this.lAt(t);if(-1===e)throw new Error("cannot find animation frame with tag "+t);return e}r$(){return this.Jyt}n$(){return this.j2t}a$(){return this.Rnt}l$(){return this.Kyt}c$(){return this.Zyt}cAt(){return this.eAt}}}{let C33=self.We,EMPTY_IMAGE_BLOB=(()=>{var i=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),s=new Uint8Array(i.length);for(let t=0,e=i.length;t<e;++t)s[t]=i.charCodeAt(t);return new Blob([s],{type:"image/png"})})();C33.tAt=class AnimationFrameInfo extends C33.nh{constructor(t){super(),this.fAt=C33.oh(C33.Ryt),this.fAt.Byt(t),this.dAt=t[7],this.CAt=C33.oh(C33.qo,t[8],t[9]),this.pAt=t[10].map(t=>C33.oh(C33.mAt,this,t)),this.vAt=new Map;for(var e of this.pAt)this.vAt.set(e.qc().toLowerCase(),e);this.SAt=null;var i=t[11];6<=i.length&&(this.SAt=C33.oh(C33.Ou,i)),this.U1=t[12]||"",this.gAt=new self.g$(this)}static iAt(t){var e=C33.oh(C33.tAt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return e.fAt.kyt(t,EMPTY_IMAGE_BLOB),e}lh(){this.SAt&&(this.SAt.lh(),this.SAt=null),this.fAt.lh(),this.fAt=null}T$(){return this.fAt}_$(){return this.dAt}y$(){return this.CAt.Qo()}I$(){return this.CAt.el()}N$(){return this.SAt}L$(t){return this.vAt.get(t.toLowerCase())||null}P$(t){return(t=Math.floor(t))<0||t>=this.pAt.length?null:this.pAt[t]}w$(){return this.pAt.length}$$(){return this.U1}p$(){return this.gAt}}}{let C33=self.We;C33.mAt=class ImagePoint extends C33.nh{constructor(t,e){super(),this.TAt=t,this.dh=e[0],this._At=C33.oh(C33.qo,e[1],e[2])}lh(){}qc(){return this.dh}ag(){return this._At.Qo()}ug(){return this._At.el()}EAt(){return this._At}}}{let C33=self.We,C3Debugger=self.C3Debugger,IObjectClass=self.jN,assert=self.assert;C33.rlt=class ObjectClass extends C33.nh{constructor(e,t,i){super();var s=e.B1t(i[1]),[t,r]=(this.i3=e,this.P_t=C33.gN.BN(s),this.B_t=null,this.yAt=s.Instance,this.H1=t,this.kV=i[11],this.dh=i[0],this._mt=this.i3.r0t(i[14]),this.AAt=!!i[9],this.IAt=!!i[2],this.RAt=!!i[10],this.MAt=i[3].map(t=>({sid:t[0],type:t[1],name:t[2],wAt:e.r0t(t[3])})),this.bAt=i[4],this.OAt=i[5],this.zTt=this.P_t.AN(),this.GAt=C33.oh(C33.Event.F3),this._H=null,e.T4().cN());if(this.PAt=C33.oh(C33.LAt,t,r),this.xAt=!0,this.NAt=null,this.DAt=null,this.FAt=-1,this.BAt=null,this.$At=null,this.kAt=null,this.WAt=null,this.VAt=null,this.HAt=!1,this.UAt=null,this.jAt=i[8].map(t=>C33.XAt.W_(this,t)),this.YAt=[],this.qAt=new Map,this.zAt=new Map,this.JAt=new Set,this.KAt=new Map,this.ZAt=C33.oh(C33.Mct,this),this.QAt=null,this.tIt=0,this.eIt=!1,this.UAt=null,this.fAt=null,this.iIt=null,this.sIt=null,this.rIt=null,this.hIt=0,this.J2t=new Map,this.K2t=new Map,this.oV=[],this.nIt=new Map,this.aIt=!0,this.P_t.ON()&&(this._H=C33.oh(C33.EH,this,i[12])),i[6]&&(this.fAt=C33.oh(C33.Ryt),this.fAt.Byt(i[6])),i[7]){this.iIt=i[7].map(t=>C33.oh(C33.zyt,t)),this.sIt=new Map,this.rIt=new Map;for(var h of this.iIt)this.sIt.set(h.qc().toLowerCase(),h),this.rIt.set(h.SU(),h)}this.IAt?(this.NAt=[],this.DAt=new Set,this.FAt=this.i3.oIt()):(this.BAt=[],this.$At=new Set,this.kAt=[],this.WAt=[],this.VAt=[]);t=this.P_t.mvt();if(t<2&&(this.B_t=C33.oh(s.lIt,this,i[15]),!(this.B_t instanceof C33.G_t)))throw new Error("v1 sdk type must derive from SDKTypeBase");this.uIt=null,this.cIt=null,this.gY=C33.oh(C33.Event.F3),C33.gN.T_t(this,t);let n;if(n=2<=t?(n=s.lIt)||globalThis.w6:this.B_t.v_t()){if(this.uIt=new n(t<2?this:null),t<2&&!(this.uIt instanceof IObjectClass))throw new TypeError("script interface class must derive from IObjectClass");if(2<=t&&!(this.uIt instanceof globalThis.w6))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else this.uIt=new IObjectClass;C33.gN.__t(t),i[13]&&(r=i[13])&&(s=r[0],t=r[1],r=r[2],this.B_t.L_t(s,t,r)),this.i3.fIt()&&!this.IAt&&!this.RAt&&this.zTt||this.m_t(),this.P_t.EN()&&(this.P_t.S_t(this),this.dIt(i)),this.CIt=null}static W_(t,e,i){return C33.oh(C33.rlt,t,e,i)}lh(){if(this.GAt.lh(),this.GAt=null,this.fAt&&(this.fAt.lh(),this.fAt=null),this.iIt){for(var t of this.iIt)t.lh();C33.Dn(this.iIt),this.sIt.clear(),this.rIt.clear()}this.CIt=null,this.ZAt.lh(),this.ZAt=null,this.J2t.clear(),this.K2t.clear(),this.UAt=null,this.i3=null}pIt(i){for(let t=1,e=i.length;t<e;++t){var s=this.i3.kH(i[t]);this.NAt.push(s),this.DAt.add(s),s.BAt.push(this),s.$At.add(this)}}mIt(t){this.HAt=!0,this.UAt=t}fF(){return this.HAt}UY(){return this.UAt}vIt(){let t=0;if(!this.IAt)for(var e of this.BAt)for(var i of e.SIt()){var s=i.qc().toLowerCase();this.qAt.set(s,i),this.zAt.set(s,t),this.YAt.push(i),++t}for(var r of this.SIt()){var h=r.qc().toLowerCase();this.qAt.set(h,r),this.zAt.set(h,t),this.YAt.push(r),++t}for(var n of this.YAt)this.JAt.add(n.HB().constructor);if(!this.IAt&&this.BAt.length){var a,o=this.i3.gIt(),l=(C33.Bn(this.kAt,o,0),C33.Bn(this.WAt,o,0),C33.Bn(this.VAt,o,0),[]);let t=0,e=0,i=0;for(a of this.BAt){var u=a.Zmt(),u=(this.kAt[u]=t,t+=a.TIt(),this.WAt[u]=e,e+=a._It(),this.VAt[u]=i,i+=a.EIt(),a.v5());if(u&&this._H)for(var c of u.S5())l.push(c.yIt(this._H))}this._H&&this._H.AIt(l)}}dIt(t){var e=this.i3.IIt(),i=C33.oh(C33.Instance,{runtime:this.i3,QD:this,uid:e});i.RIt(t[16],[]),this.i3.MIt(e,i),this.oV.push(i)}fSt(){return this.B_t}wIt(){return this.RAt}F3(){return this.GAt}m_t(){this.IAt||(this.B_t?this.B_t.m_t():this.uIt.b6())}bIt(){return 0<this.hIt}async YY(t){this.IAt||(this.hIt++,1===this.hIt&&(this.B_t?await this.B_t.YY(t):await this.uIt.P6(this.i3.K6().OIt())))}QY(){if(!this.IAt){if(this.hIt--,this.hIt<0)throw new Error("released textures too many times");0===this.hIt&&(this.B_t?this.B_t.QY():this.uIt.L6(this.i3.K6().OIt()))}}JY(){if(this.IAt)throw new Error("not applicable to family");this.B_t?this.B_t.JY():this.uIt.x6()}async _q(t){this.IAt||(this.B_t?await this.B_t._q(t):await this.uIt.N6(this.i3.K6().OIt()))}Dx(){return this.i3}YN(){return this.P_t}GIt(){return this.yAt}qc(){return this.dh}r0t(){return this._mt}f4(){return this.H1}SU(){return this.kV}uU(){return this.IAt}JH(){return this.AAt}AN(){return this.zTt}Zmt(){return this.FAt}SIt(){return this.jAt}_It(){return this.bAt}PIt(t){return t&&this.JAt.has(t)}TIt(){return this.MAt.length}LIt(){return this.MAt.map(t=>t.sid)}xIt(e){return this.MAt.findIndex(t=>t.sid===e)}yet(e){return this.MAt.findIndex(t=>t.name===e)}NIt(){return this.MAt.map(t=>t.name)}DIt(){return this.MAt.map(t=>t.wAt)}Iet(t){if((t=Math.floor(t))<0||t>=this.MAt.length)throw new RangeError("invalid instance variable index");return this.MAt[t].type}Aet(t){if((t=Math.floor(t))<0||t>=this.MAt.length)throw new RangeError("invalid instance variable index");return this.MAt[t].name}EIt(){return this.OAt}FIt(){return this.YAt}qst(t){return this.qAt.get(t.toLowerCase())||null}Met(t){t=this.zAt.get(t.toLowerCase());return void 0===t?-1:t}v5(){return this._H}ON(){return this.P_t.ON()}BIt(){return this._H&&this._H.$It()}Y0t(){return this.ZAt}h5(){return this.ZAt.h5()}T$(){return this.fAt}HH(t){this.QAt=t}VH(){return this.QAt}UH(t){this.tIt=t}kIt(){return this.tIt}WIt(){return this.iIt}VIt(){return this.iIt.length}c0t(){return this.BAt}NSt(t){return this.$At.has(t)}_pt(){return this.NAt}cU(t){return this.DAt.has(t)}s2t(t){return this.WAt[t]}Kmt(t){return this.kAt[t]}hmt(t){this.KAt.set(t.umt().toLowerCase(),t)}nmt(t){return!!this.mmt(t)}mmt(t){t=this.KAt.get(t.toLowerCase());return t&&t.qu()?t:null}HIt(){return this.iIt}UIt(t){if(this.iIt)return this.sIt.get(t.toLowerCase())||null;throw new Error("no animations")}jIt(t){if(this.iIt)return this.rIt.get(t)||null;throw new Error("no animations")}XIt(t){if(this.UIt(t))throw new Error(`animation name '${t}' already exists`);t=C33.zyt.iAt(this.Dx(),t);return this.iIt.push(t),this.sIt.set(t.qc().toLowerCase(),t),this.rIt.set(t.SU(),t),t}YIt(t){var e=this.UIt(t);if(!e)throw new Error(`animation name '${t}' does not exist`);if(1===this.iIt.length)throw new Error("cannot remove last animation");t=this.iIt.indexOf(e);this.iIt.splice(t,1),this.sIt.delete(e.qc().toLowerCase()),this.rIt.delete(e.SU()),e.lh()}qIt(){if(this.iIt)return this.iIt[0];throw new Error("no animations")}zIt(){return this.qIt().nAt(0)}JIt(){var t;return this.iIt?[(t=this.zIt().T$()).tp(),t.cp()]:this.fAt?[this.fAt.tp(),this.fAt.cp()]:[100,100]}UN(){if(this.P_t.EN())return this.oV[0];throw new Error("not a single-global plugin")}r5(){return this.oV}*instances(){yield*this.oV}*s5(){yield*this.oV,yield*this.i3.RSt(this)}a5(){return this.oV.length}KH(t){this.oV.push(t)}KIt(){this.aIt=!0}Lq(){if(this.aIt&&!this.IAt){var e=this.oV;let t=0;for(var i,s=e.length;t<s;++t)e[t].ZIt(t);for(i of this.i3.QIt())i.tF()===this&&i.ZIt(t++);this.aIt=!1}}tRt(t){var e,i=this.oV;if(t<i.length)return i[t];t-=i.length;for(e of this.i3.QIt())if(e.tF()===this){if(0===t)return e;--t}return null}TSt(t){if(t&&t.fF()&&t.tF()!==this)for(var e of t.dF())if(e.tF()===this)return e;t=this.h5().r5();return t.length?t[0]:null}i5(t){var e=this.h5().r5();return 0<e.length?e[t.Oq()%e.length]:null}*bSt(t,e){var i=this.h5().r5(),s=i.length,r=e.h5(),h=e.h5().r5(),n=h.length;let a=t.Oq();!e.uU()&&r.kct()||(a=h.indexOf(t));e=Math.ceil(s/n),r=s%n;let o=0,l=0;l=0==r||a<r?(o=a*e,e):(o=r*e+(a-r)*(e-1),e-1);for(let t=o,e=o+l;t<e;++t)yield i[t]}wvt(t){this.B_t?.wvt(t)}b1t(){if(this.HAt&&!this.IAt){this.Lq();var t,e=this.h5(),i=e.qct(),s=e.kct(),r=this.i3.qft(),h=r&&r.J4()&&r.J4().s3t();for(t of this.UAt.Gq())if(t!==this){t.Lq();var n=t.h5();if(n.Yct(s),!s){var a,o=n.qct();C33.Dn(o);for(a of i)o.push(t.tRt(a.Oq()));if(h){var l,u=e.zct(),c=n.zct();C33.Dn(c);for(l of u)c.push(t.tRt(l.Oq()))}}}}}Lvt(t,e){for(var i of this.UY().Gq()){i=i.h5();t?C33.Nn(i.zct(),e):C33.Nn(i.qct(),e)}}eRt(){return this.PAt}iRt(t){this.xAt=!!t}sRt(){if(this.xAt&&this.zTt){for(var t of this.oV)t.Cx().rRt();for(var e of this.i3.QIt())e.tF()===this&&e.Cx().rRt();this.xAt=!1}}hRt(e,t,i){var s;if(t&&(s=this.nIt.get(t))&&(s.delete(e),0===s.size)&&this.nIt.delete(t),i){let t=this.nIt.get(i);t||(t=new Set,this.nIt.set(i,t)),t.add(e)}}nRt(){if(this.uU()){var t,e=new Set;for(t of this.NAt)for(var i of t.nRt())e.add(i);return e.values()}return this.nIt.keys()}Evt(){return this.J2t||(this.J2t=new Map),this.J2t}yvt(){return this.K2t||(this.K2t=new Map),this.K2t}aRt(){return this.PIt(C33.hot.solid)}oRt(){return this.PIt(C33.hot.jumpthru)}lRt(){return this.PIt(C33.hot.NoSave)}qH(){return this.PIt(C33.hot.Persist)}NX(){var t={instances:this.oV.map(t=>t._g())};return this.J2t&&this.J2t.size&&(t.ex=C33.xa(this.J2t)),t}DX(t,i){this.J2t&&(this.J2t.clear(),this.J2t=null);var e=t.ex,s=(e&&(this.J2t=C33.Na(e)),this.oV),r=t.instances;for(let t=0,e=Math.min(s.length,r.length);t<e;++t)s[t].Eg(r[t]);for(let t=r.length,e=s.length;t<e;++t)this.i3.aF(s[t]);for(let e=s.length,t=r.length;e<t;++e){var h,n=r[e];let t=null;this.AN()&&!(t=this.i3.BL().xY(n.w.l))||((h=this.i3.zH(this.QAt||this,t,!1,0,0,!0)).Eg(n),i&&i.add(h))}this.CIt=r,this.KIt()}uRt(){return this.CIt}cRt(){this.CIt=null}fRt(){for(let t=0,e=this.oV;t<e;++t)this.oV[t].fRt()}WN(){return this.uIt}B4(){return this.gY}dRt(){return this.cIt}o5(t){this.cIt=t}rz(t){var e=this.i3,e=e.hz()&&!e.U4().d5();e&&C3Debugger.StartMeasuringScriptTime(),this.gY.dispatchEvent(t),e&&C3Debugger.AddScriptTime()}}}{let C33=self.We;C33.CRt=class Container extends C33.nh{constructor(t,e){super(),this.i3=t,this.pRt=e;for(var i of this.pRt)i.mIt(this)}lh(){this.i3=null}Dx(){return this.i3}HY(){return this.pRt}Gq(){return this.pRt}Nq(){return this.pRt.some(t=>t.AN())}}}{let C33=self.We,C3Debugger=self.C3Debugger,IInstance=self.ZD,originalAddonManager=C33.gN,EMPTY_ARRAY=[],nextPuid=0,savedDataMaps=new WeakMap,unsavedDataMaps=new WeakMap,FLAG_DESTROYED=1,FLAG_TILEMAP=2,FLAG_MUST_PREDRAW=4,FLAG_SOLID_ENABLED=8,FLAG_JUMPTHRU_ENABLED=16,FLAG_MUST_MITIGATE_Z_FIGHTING=32,FLAG_IS_DRAWING_WITH_EFFECTS=64;C33.Instance=class Instance extends C33.nh{constructor(t){if(C33.gN!==originalAddonManager)throw new Error("invalid addon manager");super(),this.i3=t.runtime,this.mRt=t.QD,this.Ytt=null,this.vRt=null,this.SRt=null,this.gRt=0,this.TRt=t.uid,this._Rt=nextPuid++,this.Fvt=0,this.ERt=null;var e,i=C33.Kn(t.tags),i=(0<i.length&&(this.ERt=new Set(i)),this.yRt=EMPTY_ARRAY,this.ARt=EMPTY_ARRAY,this.mRt.FIt()),i=(0<i.length&&(this.ARt=i.map((t,e)=>C33.oh(C33.IRt,{runtime:this.i3,UB:t,YB:this,index:e}))),this.RRt=this.mRt.fF()?[]:null,this.MRt=-1,this.GAt=null,this.YN());i.NS()&&(this.Fvt|=FLAG_MUST_PREDRAW),i.AN()&&(this.Ytt=C33.oh(C33.wRt,this,t.c7),t.bRt?this.Ytt.ORt(t.bRt):(this.Ytt.GRt(),[i,e]=this.mRt.JIt(),this.Ytt.DR(i,e),this.tF().BIt()&&this.Ytt.u7().PRt())),t.LRt?this.xRt(t.LRt):this.NRt()}lh(){if(this.SRt&&(this.SRt.hF(),this.SRt=null),0<this.ARt.length){for(var t of this.ARt)t.lh();C33.Dn(this.ARt)}this.vRt&&(this.vRt.lh(),this.vRt=null);var e=savedDataMaps.get(this),e=(e&&(e.clear(),savedDataMaps.delete(this)),unsavedDataMaps.get(this));e&&(e.clear(),unsavedDataMaps.delete(this)),this.RRt&&C33.Dn(this.RRt),this.GAt&&(this.GAt.lh(),this.GAt=null),this.ERt&&this.ERt.clear(),this.ERt=null,this.i3=null,this.mRt=null,0<this.yRt.length&&C33.Dn(this.yRt),this.Ytt&&(this.Ytt.lh(),this.Ytt=null)}xRt(t){0<t.length&&(this.yRt=[],C33.kn(this.yRt,t))}NRt(){var e=this.mRt.TIt();if(0!==e){this.yRt=[];var i=[0,0,""];for(let t=0;t<e;++t)this.yRt.push(i[this.mRt.Iet(t)])}}RIt(t,i){if(this.vRt)throw new Error("already got sdk instance");for(let t=0,e=this.ARt.length;t<e;++t)this.ARt[t].RIt(i?i[t]:null);if(this.YN().mvt()<2){if(this.vRt=C33.oh(this.mRt.GIt(),this,t),!(this.vRt instanceof C33.D_t))throw new Error("sdk type must derive from SDKInstanceBase");!this.YN().AN()&&this.mRt.dRt()&&this.nx()}else{var e=this.YN().v_t();this.DRt(e.Instance,t)}}NB(){return this.vRt??this.SRt}Cx(){return this.Ytt}Dx(){return this.i3}gL(){return this.MRt}vF(){var t=this.MRt;return-1===t?this.Dx().gL():t}TL(t){((t=+t)<0||!isFinite(t))&&(t=0),this.MRt=t,this.tF().BIt()&&this.i3.FRt(this,!0)}gF(){this.MRt=-1,this.tF().BIt()&&this.i3.FRt(this,!1)}AX(){return this.i3.BRt(this)}F3(){return this.GAt||(this.GAt=C33.oh(C33.Event.F3)),this.GAt}Jg(t){this.vRt?this.vRt.Jg(t):this.SRt.H6(this.i3.K6().OIt())}m_t(t){this.vRt.m_t(t)}$Rt(){this.Fvt|=FLAG_TILEMAP}kRt(){return 0!=(this.Fvt&FLAG_TILEMAP)}WRt(){this.Fvt|=FLAG_DESTROYED}Sk(){return 0!=(this.Fvt&FLAG_DESTROYED)}NS(){return 0!=(this.Fvt&FLAG_MUST_PREDRAW)||this.vRt.NS()}VRt(){this.Fvt|=FLAG_MUST_MITIGATE_Z_FIGHTING}pX(){return 0!=(this.Fvt&FLAG_MUST_MITIGATE_Z_FIGHTING)}HRt(){return 0!=(this.Fvt&FLAG_SOLID_ENABLED)}URt(t){t?this.Fvt|=FLAG_SOLID_ENABLED:this.Fvt&=~FLAG_SOLID_ENABLED}jRt(){return 0!=(this.Fvt&FLAG_JUMPTHRU_ENABLED)}XRt(t){t?this.Fvt|=FLAG_JUMPTHRU_ENABLED:this.Fvt&=~FLAG_JUMPTHRU_ENABLED}YRt(){return 0!=(this.Fvt&FLAG_IS_DRAWING_WITH_EFFECTS)}qRt(t){t?this.Fvt|=FLAG_IS_DRAWING_WITH_EFFECTS:this.Fvt&=~FLAG_IS_DRAWING_WITH_EFFECTS}zRt(t,e){t<<=16,e?this.Fvt|=t:this.Fvt&=~t}JRt(t){return 0!=(this.Fvt&t<<16)}SEt(){return this.vRt.SEt()}gEt(){return this.vRt.gEt()}TEt(){return this.vRt.TEt()}_Et(){return this.vRt._Et()}yEt(){return this.vRt.yEt()}mSt(t){return this.vRt.mSt(t)}tF(){return this.mRt}dX(){return this.vRt.dX()}MSt(t){return t.uU()?t.cU(this.tF()):this.tF()===t}KRt(s,t,e){var i=(t,e)=>{var e=e||t.tF(),i=s.get(e);i?i.add(t):s.set(e,new Set([t]))};if(i(this,t),this.fF())for(var r of this.dF())i(r);if(e)for(var h of this.z7())i(h)}ZRt(){if(!this.YN().xN())throw new Error("object does not support scene graph")}tB(){return null!==this.W7()}W7(){var t=this.Cx();return(t=t&&t.W7())?t.c6():null}H7(){var t=this.Cx();return(t=t&&t.H7())?t.c6():null}*U7(){var t=this.Cx();if(t)for(var e of t.U7())yield e.c6()}QRt(t){if(t)for(var e of this.children())if(e===t)return!0;return!1}$X(){var t=this.Cx();return!!t&&t.$X()}tMt(t){var e=this.Cx();if(!e)return[];let i=t.qc();return e.Hq().map(t=>t.c6()).filter(t=>t.tF().qc()===i)}Hq(){var t=this.Cx();return t?t.Hq().map(t=>t.c6()):[]}*children(){var t=this.Cx();if(t)for(var e of t.children())yield e.c6()}*z7(){var t=this.Cx();if(t)for(var e of t.z7())yield e.c6()}X7(){var t=this.Cx();return t?t.X7():0}eMt(){return[...this.U7()].length}wSt(){var t=this.Cx();return t?t.wSt():0}q7(t){var e=this.Cx();return(e=e&&e.q7(t))?e.c6():null}iMt(){var t,e=this.Cx();return e&&(t=e.W7())?t.sMt(e):NaN}rMt(t){for(var e of this.Cx().Hq())if(e.c6().CF()===t)return!0;return!1}K7(t,e){this.ZRt(),t.ZRt(),this.Cx().K7(t.Cx(),e||{})}Z7(t){var e=this.Cx();e&&e.Z7(t.Cx())}gB(){var t=this.Cx();return!!t&&t.gB()}vq(){var t=this.Cx();if(t){t=t.hMt();if(t)for(var e of t){var i=this.i3.hx(e[2]);i&&(e=e[3],this.K7(i,{iB:!!(e>>0&1),rB:!!(e>>1&1),nB:!!(e>>2&1),oB:!!(e>>3&1),uB:!!(e>>4&1),SB:!!(e>>5&1),fB:!!(e>>6&1),CB:!!(e>>7&1),mB:!!(e>>8&1)}))}}}Sq(t,e){t=t.get(this);if(t)for(var i of t.sceneGraphJson.children){var s=e.get(i.index);s&&(i=i.flags,this.K7(s,{iB:!!(i>>0&1),rB:!!(i>>1&1),nB:!!(i>>2&1),oB:!!(i>>3&1),uB:!!(i>>4&1),SB:!!(i>>5&1),fB:!!(i>>6&1),CB:!!(i>>7&1),mB:!!(i>>8&1)}))}}mF(){var t=this.i3.nMt();return t?t.nlt(this):""}fF(){return null!==this.RRt}Pq(t){this.RRt.push(t)}uF(){return this.RRt}aMt(t){return!!this.oMt(t)}oMt(t){var e,i=this.dF();if(null===i||0===i.length)return!1;for(e of i)if(e.tF()===t)return e;return null}dF(){return this.RRt}LCt(){for(var t of this.dF())t.tF().h5().Jct(t)}bvt(){for(var t of this.dF())t.tF().h5().jct(t)}Ovt(t){for(var e of this.dF())e.tF().h5().qct()[t]=e}Pvt(){for(var t of this.dF())t.tF().h5().Xct(t)}Gvt(t){for(var e of this.dF())e.tF().h5().zct()[t]=e}YN(){return this.mRt.YN()}ZIt(t){this.gRt=t}Oq(){return this.mRt.Lq(),this.gRt}CF(){return this.TRt}lMt(){return this._Rt}uMt(t){t?this.yF(new Set(t)):this.ERt=null}yF(t){if(0===t.size)this.ERt=null;else{this.ERt?this.ERt.clear():this.ERt=new Set;for(var e of t)this.ERt.add(e)}}_F(){return this.ERt??new Set}DSt(){return Array.from(this._F()).join(" ")}FSt(t){t=Math.floor(t);for(var e of this._F()){if(0===t)return e;--t}return""}Yst(){return this.ARt}cMt(t){if(t)for(var e of this.ARt)if(e.HB()instanceof t)return e;return null}lot(t){return(t=t&&this.cMt(t))?t.NB():null}Xst(i){var s=this.ARt;for(let t=0,e=s.length;t<e;++t)if(s[t].XB().SU()===i)return t;return-1}fMt(){return this.yRt}NIt(){return this.mRt.NIt()}dMt(){return this.yRt.length}hht(t){var e=this.yRt;if((t|=0)<0||t>=e.length)throw new RangeError("invalid instance variable");return e[t]}zmt(t){return this.yRt[t]}CMt(t){var e=this.yRt[t];return 0===this.mRt.Iet(t)?!!e:e}nht(t,e){var i=this.yRt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");switch(this.mRt.Iet(t)){case 0:i[t]=e?1:0;break;case 1:i[t]="number"==typeof e?e:parseFloat(e);break;case 2:i[t]="string"==typeof e?e:e.toString();break;default:throw new Error("unknown instance variable type")}}Kht(t,e){if(0!==e){var i=this.yRt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");var s=i[t];if("number"!=typeof s)throw"boolean"==typeof s?new Error("can not set offset of boolean variable"):"string"==typeof s?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof e?e:parseFloat(e)}}Evt(){var t=savedDataMaps.get(this);return t||(t=new Map,savedDataMaps.set(this,t)),t}yvt(){var t=unsavedDataMaps.get(this);return t||(t=new Map,unsavedDataMaps.set(this,t)),t}pMt(t){var e,i=this.tF();if(i.B4().U3(t))return!0;for(e of i.c0t())if(e.B4().U3(t))return!0;return!!this.i3.B4().U3(t)}f5(){var t,e=new Set,i=(e.add(this),this.Cx());if(i&&i.$X())for(var s of this.z7())if(e.add(s),s.fF())for(var r of s.dF())e.add(r);if(this.fF())for(var h of this.dF())e.add(h);for(t of e.values())t.Tq()}mMt(){this.mRt.dRt()&&this.nx();for(var t of this.ARt)t.hyt()}vMt(){this.mMt()}Tq(){if(this.mMt(),this.pMt("instancecreate")){var t,e=this.tF(),i=new C33.Event("instancecreate");i.YB=this.nx(),e.rz(i);for(t of e.c0t())t.rz(i);this.i3.rz(i)}this.i3.FF(this.YN().gdt().Iq.pTt,this,null)}SMt(){this.i3.FF(this.YN().gdt().Iq.mTt,this,null)}gMt(t){if(this.SRt&&((i=new C33.Event("destroy")).TMt=t,this.rz(i)),this.pMt("instancedestroy")){var e,i=this.tF(),s=new C33.Event("instancedestroy");s.YB=this.nx(),s.TMt=t,i.rz(s);for(e of i.c0t())e.rz(s);this.i3.rz(s)}}_Mt(){return this.vRt?this.vRt.hEt():this.SRt.ZF()}_g(t="full",e=null){var i={},s=("full"===t?i.uid=this.CF():i.c3=!0,this._F());if(0<s.size&&(i.tags=Array.from(s)),"visual-state"!==t){s=savedDataMaps.get(this);if(s&&s.size&&(i.ex=C33.xa(s)),-1!==this.gL()&&(i.mts=this.gL()),0<this.mRt.TIt()){var r={},h=this.mRt.LIt();for(let t=0,e=this.yRt.length;t<e;++t)r[h[t].toString()]=this.yRt[t];i.ivs=r}if(this.ARt.length){var n,a={};for(n of this.ARt){var o=n._g(t);o&&(a[n.XB().SU().toString()]=o)}i.behs=a}}this.Ytt&&(i.w=this.Ytt.NX(t,e));s=this.vRt?this.vRt._g():this.SRt.QF();return s&&(i.data=s),i}eJ(t="full",e){this.Ytt&&this.Ytt.eJ(t)}sJ(t,e="full",i=null){this.Ytt&&this.Ytt.sJ(t,e,i)}EMt(t,e="full",i=null){this.Ytt&&this.Ytt.EMt(t,e,i)}fRt(){this.YN().AN()&&this.Ytt.fRt()}Eg(e,t="full",i){if("full"===t)this.TRt=e.uid;else if(!e.c3)return;if(this.uMt(e.tags),"visual-state"!==t){let t=savedDataMaps.get(this);t&&(t.clear(),savedDataMaps.delete(this));var s=e.ex,s=(s&&(t=C33.Na(s),savedDataMaps.set(this,t)),this.MRt=e.hasOwnProperty("mts")?e.mts:-1,e.ivs);if(s)for(var[r,h]of Object.entries(s)){r=parseInt(r,10),r=this.mRt.xIt(r);if(!(r<0||r>=this.yRt.length)){let t=h;null===t&&(t=NaN),this.yRt[r]=t}}}if(this.YN().AN()&&(s=e.w)&&(l=s.l,this.Ytt.mx().SU()!==l&&((l=(n=this.Ytt.mx()).VL().xY(l))?(this.Ytt.Tx(l),n.tU(this,!0),l.KH(this,!0),l._x(this),this.Ytt.f7()):"full"===t&&this.i3.aF(this)),this.Ytt.DX(s,t)),"visual-state"!==t){var n=e.behs;if(n)for(var[a,o]of Object.entries(n)){a=parseInt(a,10),a=this.Xst(a);a<0||a>=this.ARt.length||this.ARt[a].Eg(o,t)}}var l=e.data;l&&(this.vRt?this.vRt.Eg(l,t):this.SRt.t7(l))}nx(){return this.SRt||this.DRt()}lEt(){return!!this.SRt}DRt(t,e){var i=this.Ytt?t?self.D6:self.OB:t?self.MF:self.ZD,t=t||this.vRt.v_t(),s=this.mRt.dRt(),r=s||t||i,h=this.YN().mvt();if(C33.gN.T_t(this,h),C33.gN._yt(e),this.SRt=new r,C33.gN.Eyt(),C33.gN.__t(h),t&&!(this.SRt instanceof i))throw new TypeError(`script interface class '${t.name}' does not extend the right base class '${i.name}'`);if(s&&!(this.SRt instanceof(t||i)))throw new TypeError(`setInstanceClass(): class '${s.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`);return this.SRt}eF(t){if(0!==this.yRt.length){var i={},s=this.mRt.DIt();for(let t=0,e=s.length;t<e;++t)i[s[t]]={configurable:!1,enumerable:!0,get:C33.Instance.prototype.CMt.bind(this,t),set:C33.Instance.prototype.nht.bind(this,t)};var e=Object.create(Object.prototype,i);t.yMt={value:e,writable:!1}}}iF(t){var e=this.ARt;if(0!==e.length){var i,s={};for(i of e)s[i.XB().r0t()]={value:i.W_t(),writable:!1};e=Object.create(Object.prototype,s);t.gCt={value:e,writable:!1}}}rz(t){var e,i;this.lEt()&&(e=this.nx(),t.YB=e,(i=(i=this.i3).hz()&&!i.U4().d5())&&C3Debugger.StartMeasuringScriptTime(),e.dispatchEvent(t),i)&&C3Debugger.AddScriptTime()}}}{let C33=self.We;C33.jq=class SceneGraphInfo extends C33.nh{constructor(t){super(),this.bg=t,this.$Ct=null,this.AMt=[],this.IMt=t.tp(),this.RMt=t.cp(),this.MMt=1,this.wMt=1,this.bMt=0,this.OMt=1,this.GMt=t.Sb(),this.PMt=null,this.LMt=null,this.xMt=NaN}lh(){this.$Ct=null,this.PMt=null,this.LMt=null,this.xMt=NaN,C33.Dn(this.AMt)}NMt(t){this.OMt=this.bg.Sb(),this.GMt=this.OMt,this.$Ct=t,this.bMt=t?t.I5():0}W7(){return this.$Ct}$X(){return 0<this.AMt.length}Hq(){return this.AMt}DMt(){this.$X()&&1!==this.AMt.length&&(this.LMt?this.AMt.sort((t,e)=>{t=this.LMt.get(t.c6()),e=this.LMt.get(e.c6());return C33.vs(t)&&C33.vs(e)?t-e:0}):this.AMt.sort((t,e)=>{t=t.mht().FMt(),e=e.mht().FMt();return C33.vs(t)&&C33.vs(e)?t-e:0}))}FMt(){return this.xMt}vht(){return this.MMt}BMt(t){this.MMt=t}ght(){return this.wMt}$Mt(t){this.wMt=t}Mht(){return this.GMt}gSt(){return this.OMt}kMt(t){this.OMt=t}pht(){return 0===this.IMt?Number.EPSILON:this.IMt}Sht(){return 0===this.RMt?Number.EPSILON:this.RMt}WMt(){if(this.bg.aB()){var e=this.$Ct;let t=e.tp();var i=e.mht().pht();if(0===t&&(t=Number.EPSILON),i===Number.EPSILON&&t===Number.EPSILON)return 1;if(i===Number.EPSILON&&t!==Number.EPSILON){e=e.c6().NB();if(e.ket())return 1+t/e.$et()}return t/i}return 1}VMt(){if(this.bg.lB()){var e=this.$Ct;let t=e.cp();var i=e.mht().Sht();if(0===t&&(t=Number.EPSILON),i===Number.EPSILON&&t===Number.EPSILON)return 1;if(i===Number.EPSILON&&t!==Number.EPSILON){e=e.c6().NB();if(e.ket())return 1+t/e.Vet()}return t/i}return 1}HMt(){return this.bMt}UMt(){return{sw:this.IMt,sh:this.RMt,sx:this.MMt,sy:this.wMt,psa:this.bMt,oo:this.OMt,so:this.GMt,pi:this.bg.c6().iMt()}}NX(t,e=null){var i=this.UMt();return e&&e.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.jMt(t),c:this.XMt(t)})}YMt(t){let e="";return t.sB()&&(e+="x"),t.hB()&&(e+="y"),t.aB()&&(e+="w"),t.lB()&&(e+="h"),t.cB()&&(e+="a"),t.dB()&&(e+="z"),t.gB()&&(e+="d"),t.pB()&&(e+="o"),t.vB()&&(e+="v"),e}jMt(t){return!this.$Ct||!this.$Ct.c6()||this.$Ct.c6().Sk()?null:this.qMt(this.$Ct,this.bg,t)}XMt(e){return this.AMt.map(t=>this.qMt(t,t,e)).filter(t=>t)}qMt(t,e,i){var s,t=t.c6();return t&&t.Sk()?null:((s={}).uid=t.CF(),s.f=this.YMt(e),s.offsets=e.zMt(),s.data=C33.jq.JMt(t),s.oci=t.tF().f4(),"state"===i?(s.inst=t._g("full",{selfOnly:!0}),s.instIndex=NaN):(s.instIndex=t.tF().r5().indexOf(t),s.inst=null),s)}DX(t){this.IMt=t.sw,this.RMt=t.sh,this.MMt=t.sx,this.wMt=t.sy,this.bMt=t.psa,this.OMt=t.oo,this.GMt=t.so,this.xMt=C33.vs(t.pi)?t.pi:NaN}KMt(t,e){if(!t&&!e&&this.PMt)for(var i of this.PMt)i.Sk()||i.tB()||i.Dx().aF(i);this.PMt=t,this.LMt=e}sJ(t,e){var i,s,r,h,n=this.bg,a=n.Dx(),o=new Set,l=(t.p&&!this.$Ct&&(i=t.p.uid,i=a.hx(i),e?.kSt,i?(s=i.Cx(),i.QRt(n.c6())?this.$Ct=s:(i.rMt(n.c6().CF())?a.aF(n.c6()):i.K7(n.c6(),this.ZMt(t.p.f)),o.has(n)||(n.QMt(t.p.offsets),this.twt(i,t.p,e)),o.add(n),i.Cx().mht().DMt())):C33.vs(t.p.oci)&&(s=a.kH(t.p.oci),a.Nmt(),i=a.l5(s,n.mx(),0,0,!0),e?.kSt,i)&&(s=this.ewt(t.p,a),i.Eg(s),i.Cx().mx().u5(i),i.K7(n.c6(),this.ZMt(t.p.f)),i.Cx().mht().DMt())),[]);for(r of t.c){var u=r.uid,u=a.hx(u);u&&l.push(u)}let c=0;for(h of t.c){var f=h.uid,f=a.hx(f);if(e?.kSt,f){if(this.PMt){if(this.PMt.includes(f)){var d=f;if(d.tF()!==f.tF()){c++;continue}if(d.Sk()){c++;continue}var C=t.c[c];if(!e?.kSt&&this.iwt(d,l,n)){this.swt(c,C,n,o,e),c++;continue}if(d.tB()&&d.W7()!==n.c6()){var p=this.rwt(C,e);this.hwt(p,C,o,e),c++;continue}this.hwt(d.Cx(),C,o,e,!0),c++;continue}if(this.PMt[c]){p=this.PMt[c];if(p.tF()!==f.tF()){c++;continue}if(p.Sk()){c++;continue}d=t.c[c];if(!e?.kSt&&this.iwt(p,l,n)){this.swt(c,d,n,o,e),c++;continue}if(p.tB()&&p.W7()!==n.c6()){C=this.rwt(d,e);this.hwt(C,d,o,e),c++;continue}this.hwt(p.Cx(),d,o,e,!0),c++;continue}}var m=f.tF();if(this.nwt(l,m)===n.c6().tMt(m).length){m=n.c6().q7(c);m&&(v=m.Cx())&&(o.has(v)||(v.QMt(h.offsets),this.twt(m,h,e)),o.add(v)),c++;continue}if(f.tB()&&f.W7()!==n.c6()){m=this.rwt(h,e);this.hwt(m,h,o,e),c++;continue}this.hwt(f.Cx(),h,o,e)}else if(this.PMt&&this.PMt[c]){var v=this.PMt[c],m=a.kH(this.awt(h));if(v.tF()!==m){c++;continue}if(v.Sk()){c++;continue}f=t.c[c];if(!e?.kSt&&this.iwt(v,l,n)){this.swt(c,f,n,o,e),c++;continue}if(v.tB()&&v.W7()!==n.c6()){var S=this.rwt(f,e);this.hwt(S,f,o,e),c++;continue}this.hwt(v.Cx(),f,o,e)}else{S=this.rwt(h,e);this.hwt(S,h,o,e)}c++}}iwt(t,e,i){t=t.tF();return this.nwt(e,t)===i.c6().tMt(t).length}swt(t,e,i,s,r){i=i.c6().q7(t,e);i&&(t=i.Cx())&&(s.has(t)||(t.QMt(e.offsets),this.twt(i,e,r)),s.add(t))}ZMt(t){var e={};return e.iB=t.includes("x"),e.rB=t.includes("y"),e.nB=t.includes("w"),e.oB=t.includes("h"),e.uB=t.includes("a"),e.fB=t.includes("z"),e.SB=t.includes("d"),e.CB=t.includes("o"),e.mB=t.includes("v"),e}awt(t){return C33.vs(t.oci)?t.oci:t[1]}rwt(e,i){if(C33.vs(e.oci)){var s,r=this.bg,h=r.Dx();let t;if(t=e.data?h.zH(e.data,r.mx(),!1,0,0,!1,!0):(s=h.kH(e.oci),h.l5(s,r.mx(),0,0,!0)),i?.kSt,t)return s=this.ewt(e,h),t.Eg(s),(r=t.Cx()).mx().u5(t,!0),r}}hwt(t,e,i,s,r=!0){this.bg.K7(t,this.ZMt(e.f))&&r&&(i.has(t)||(t.QMt(e.offsets),this.twt(t.c6(),e,s)),i.add(t)),this.DMt()}twt(t,e,i){e=this.ewt(e,this.bg.Dx());e&&((e=JSON.parse(JSON.stringify(e))).w=null,t.Eg(e))}nwt(t,e){return t.filter(t=>t.tF().qc()===e.qc()).length}ewt(t,e){return C33.vs(t.instIndex)?e.kH(t.oci).uRt()[t.instIndex]:C33.Rs(t.inst)?JSON.parse(t.inst):t.inst||void 0}static JMt(t){if(!(i=t.Cx().mx().jH(t.CF())))return null;var e,i=JSON.parse(JSON.stringify(i)),s=[];for(e of[...t.Hq()]){var r=e.Cx();s.push([r.VL().SU(),r.mx().f4(),e.CF(),C33.jq.Uq(r),e.tF().fF()?1:0,r.vx(),C33.jq.JMt(e)])}return C33.Ws(i[0][14])?i[0][14][1]=s:(i[0][14]=[],i[0][14][0]=C33.jq.owt(),i[0][14][1]=s,i[0][14][2]=t.Cx().vx()),i}static Uq(t){var e=0;return(e|=Number(t.vB())<<8)|Number(t.pB())<<7|Number(t.dB())<<6|Number(t.gB())<<5|Number(t.cB())<<4|Number(t.lB())<<3|Number(t.aB())<<2|Number(t.hB())<<1|Number(t.sB())<<0}static owt(t){var e=0;e|=256;return 511}}}{let C33=self.We,glMatrix=self.Se,vec32=glMatrix.Re,vec42=glMatrix.Me,tempRect=C33.oh(C33.Rect),tempQuad=C33.oh(C33.Jl),bboxChangeEvent=C33.oh(C33.Event,"bboxchange",!1),tempColor=C33.oh(C33.$a,0,0,0,0),tempCollisionPoly=C33.oh(C33.Ou),DEFAULT_COLOR=C33.oh(C33.$a,1,1,1,1),DEFAULT_RENDER_CELLS=C33.oh(C33.Rect,0,0,-1,-1),DEFAULT_COLLISION_CELLS=C33.oh(C33.Rect,0,0,-1,-1),VALID_SET_MESH_POINT_MODES=new Set(["absolute","relative"]),EMPTY_ARRAY=[],enableUpdateRendererStateGroup=!0,FLAG_IS_VISIBLE=1,FLAG_BBOX_CHANGED=2,FLAG_ENABLE_BBOX_CHANGED_EVENT=4,FLAG_COLLISION_ENABLED=8,FLAG_COLLISION_CELL_CHANGED=16,FLAG_SOLID_FILTER_INCLUSIVE=32,FLAG_HAS_ANY_ACTIVE_EFFECT=64,FLAG_IS_ROTATABLE=128,FLAG_DESTROYED=256,FLAG_DESTROY_WITH_PARENT=512,FLAG_TRANSFORM_WITH_PARENT_X=1024,FLAG_TRANSFORM_WITH_PARENT_Y=2048,FLAG_TRANSFORM_WITH_PARENT_W=4096,FLAG_TRANSFORM_WITH_PARENT_H=8192,FLAG_TRANSFORM_WITH_PARENT_A=16384,FLAG_TRANSFORM_WITH_PARENT_Z_ELEVATION=32768,FLAG_TRANSFORM_WITH_PARENT_OPACITY=1<<22,FLAG_TRANSFORM_WITH_PARENT_VISIBILITY=1<<23,MASK_ALL_SCENE_GRAPH_FLAGS=FLAG_DESTROY_WITH_PARENT|FLAG_TRANSFORM_WITH_PARENT_X|FLAG_TRANSFORM_WITH_PARENT_Y|FLAG_TRANSFORM_WITH_PARENT_W|FLAG_TRANSFORM_WITH_PARENT_H|FLAG_TRANSFORM_WITH_PARENT_A|FLAG_TRANSFORM_WITH_PARENT_Z_ELEVATION|FLAG_TRANSFORM_WITH_PARENT_OPACITY|FLAG_TRANSFORM_WITH_PARENT_VISIBILITY,FLAG_MESH_CHANGED=65536,FLAG_PHYSICS_BODY_CHANGED=1<<17,FLAG_SIN_COS_ANGLE_CHANGED=1<<18,FLAG_USE_POINTS_SHADER_PROGRAM=1<<19,FLAG_DRAW_BACK_FACE_ONLY=1<<20,FLAG_DRAW_NON_BACK_FACES_ONLY=1<<21,FLAG_BLEND_MODE_BIT_OFFSET=26,FLAG_BLEND_MODE_MASK=31<<FLAG_BLEND_MODE_BIT_OFFSET,sceneGraphExportDataMap=new WeakMap,sceneGraphZIndexMap=new WeakMap;C33.wRt=class WorldInfo extends C33.nh{constructor(t,e){super(),this.wi=t,this.wct=t.tF(),this.i3=t.Dx(),this.lwt=e,this.wct.hRt(this,null,e),this.uwt=-1,this.cwt=-1,this.Fvt=FLAG_IS_VISIBLE|FLAG_BBOX_CHANGED|FLAG_COLLISION_ENABLED|FLAG_COLLISION_CELL_CHANGED|FLAG_MESH_CHANGED|FLAG_PHYSICS_BODY_CHANGED,this.wct.YN().wN()&&(this.Fvt|=FLAG_IS_ROTATABLE),this.zo=NaN,this.Jo=NaN,this.qS=NaN,this.fwt=NaN,this.dwt=NaN,this.e_=NaN,this.Ha=NaN,this.Cwt=NaN,this.pwt=NaN,this.mwt=NaN,this.vwt=NaN,this.Swt=C33.oh(C33.Rect),this.gwt=C33.oh(C33.Jl),this.Twt=DEFAULT_COLLISION_CELLS,this._wt=DEFAULT_RENDER_CELLS,this.Ewt=null,this.ywt=null,this.Awt=null,this.YS=DEFAULT_COLOR,this.Iwt=DEFAULT_COLOR,this.Rwt=null,this.Mwt=null,this.wi.tF().BIt()&&(this.Mwt=C33.oh(C33.wwt,this.wi,this)),this.bwt=null,this.PMt=null,this.LMt=null,this.Owt=-1,this.Gwt=null}WRt(){this.Fvt|=FLAG_DESTROYED}lh(){var t;if(this.wct.hRt(this,this.lwt,null),this.Rwt&&(this.i3.OS().Q2(this.Rwt),this.Rwt=null),this.Ewt=null,this.ywt&&(this.ywt.Pwt.lh(),this.ywt=null),this.Awt&&(this.Awt.clear(),this.Awt=null),this.yB(),this.Mwt&&this.Mwt.lh(),this.tB()&&this.W7().Z7(this),this.$X())for(t of[...this.Hq()])this.Z7(t);this.Lwt(),this.xwt(),sceneGraphExportDataMap.delete(this),sceneGraphZIndexMap.delete(this),this.wi=null,this.wct=null,this.i3=null,this.lwt=null}ORt(t){if(enableUpdateRendererStateGroup=!1,this.d7(t[0],t[1]),this.Cg(t[2]),this.DR(t[3],t[4]),this.e_=0,this.wN()?this.A5(t[6]):this.Ha=0,tempColor.Fo(t[7]),this.Nwt(tempColor),this.bht(t[8]),this.Ght(t[9]),this.JS(t[10]),this.Mwt&&this.Mwt.Dwt(t[12]),t[14]&&sceneGraphExportDataMap.set(this,{Fwt:t[14][1],Bwt:t[14][2]}),t[15]){var e=t[15],s=(this._B(e[0],e[1]),this.wB()),r=e[2];for(let i=0,t=r.length;i<t;++i){var h=r[i];for(let t=0,e=h.length;t<e;++t){var n=h[t],a=s.qg(t,i);a.og(n[0]),a.fg(n[1]),a.Cg(n[2]),a.mg(n[3]),a.Sg(n[4])}}}var i,o,l;t[16]&&(e=t[16][0],o=!(i=!!(t=t[16][1])),l=this.i3.nMt(),i&&l&&l.hlt(this.c6(),t),o)&&l&&l.hlt(this.c6(),e),enableUpdateRendererStateGroup=!0,this.$wt()}GRt(){this.zo=0,this.Jo=0,this.qS=0,this.fwt=0,this.dwt=0,this.e_=0,this.Ha=0,this.Cwt=0,this.pwt=1,this.mwt=0,this.vwt=0,this.$wt()}Dx(){return this.i3}tF(){return this.wct}c6(){return this.wi}kwt(){return this.cB()?this.Wwt(this.W7().Vwt()-this.bwt.HMt()):0}og(t){var e,i,s;t=+t,this.sB()?(e=this.bwt,i=t-this.ag(),0==(s=-this.kwt())?this.zo+=i/e.WMt():(this.zo+=Math.cos(s)*i/e.WMt(),this.hB()&&(this.Jo+=Math.sin(s)*i/e.VMt()))):this.zo=t}cht(t,e=!1){t=+t,!e&&this.sB()?this.og(this.ag()+t):this.zo+=t}ag(){if(this.sB()){let t=this.zo;var e=this.bwt,i=this.W7(),s=this.kwt();return 0===s?t*=e.WMt():(t=t*e.WMt()*Math.cos(s),this.hB()&&(t-=this.Jo*e.VMt()*Math.sin(s))),i.ag()+t}return this.zo}fg(t){var e,i,s;t=+t,this.hB()?(e=this.bwt,i=t-this.ug(),0==(s=-this.kwt())?this.Jo+=i/e.VMt():(this.sB()&&(this.zo-=Math.sin(s)*i/e.WMt()),this.Jo+=Math.cos(s)*i/e.VMt())):this.Jo=t}fht(t,e=!1){t=+t,!e&&this.hB()?this.fg(this.ug()+t):this.Jo+=t}ug(){if(this.hB()){let t=this.Jo;var e=this.bwt,i=this.W7(),s=this.kwt();return 0===s?t*=e.VMt():(t=t*e.VMt()*Math.cos(s),this.sB()&&(t+=this.zo*e.WMt()*Math.sin(s))),i.ug()+t}return this.Jo}d7(t,e){var i,s,r,h,n,a,o;t=+t,e=+e,this.Hwt()?(i=this.sB(),s=this.hB(),r=this.bwt,h=t-this.ag(),n=e-this.ug(),0==(o=-this.kwt())?(i?this.zo+=h/r.WMt():this.zo=t,s?this.Jo+=n/r.VMt():this.Jo=e):(a=Math.sin(o),o=Math.cos(o),i?this.zo+=s?(o*h-a*n)/r.WMt():o*h/r.WMt():this.zo=t,s?this.Jo+=i?(a*h+o*n)/r.VMt():o*n/r.VMt():this.Jo=e)):(this.zo=t,this.Jo=e)}Uwt(){return[this.ag(),this.ug()]}m7(t,e){t=+t,e=+e,this.Hwt()?this.d7(this.ag()+t,this.ug()+e):(this.zo+=t,this.Jo+=e)}pSt(t,e){return this.ag()===t&&this.ug()===e}Cg(t){t=+t,this.dB()&&(t-=this.W7().dg()),this.qS!==t&&(this.qS=t,this.jwt(),t=this.mx(),0!==this.qS&&t.sU(),t._x(this))}jwt(){if(this.$wt(),this.$X()){var i=this.Hq();for(let t=0,e=i.length;t<e;t++){var s=i[t];s.dB()&&s.jwt()}}}Pht(t){this.Cg(this.dg()+t)}dg(){return this.dB()?this.W7().dg()+this.qS:this.qS}S7(){return this.mx().dg()+this.dg()}op(t){var e;t=+t,this.aB()?0===(e=this.tp())?this.fwt=Number.EPSILON:this.fwt*=t/e:this.fwt=t,this.Xwt()}xp(t,e){t=+t,!e&&this.aB()?this.op(this.tp()+t):this.fwt+=t,this.Xwt()}tp(){var t,e;return this.aB()?(e=(t=this.W7()).tp(),t.mht().pht()===Number.EPSILON?(this.mht().pht()+e)*this.fwt:e*this.fwt):this.fwt}ep(t){var e;t=+t,this.lB()?0===(e=this.cp())?this.dwt=Number.EPSILON:this.dwt*=t/e:this.dwt=t,this.Xwt()}Tht(t,e){t=+t,!e&&this.lB()?this.ep(this.cp()+t):this.dwt+=t,this.Xwt()}cp(){var t,e;return this.lB()?(e=(t=this.W7()).cp(),t.mht().Sht()===Number.EPSILON?(this.mht().Sht()+e)*this.dwt:e*this.dwt):this.dwt}DR(t,e){var i;t=+t,e=+e,this.aB()?0===(i=this.tp())?this.fwt=Number.EPSILON:this.fwt*=t/i:this.fwt=t,this.lB()?0===(i=this.cp())?this.dwt=Number.EPSILON:this.dwt*=e/i:this.dwt=e,this.Xwt()}ec(){return[this.tp(),this.cp()]}CX(){return this.e_}Ywt(t){if(t<0)throw new RangeError("invalid depth");this.e_=t}qwt(){var t;return this.tB()?(t=this.bwt,Math.min(t.WMt(),t.VMt())):1}wN(){return 0!=(this.Fvt&FLAG_IS_ROTATABLE)}A5(t){t=+t,this.wN()&&(this.cB()&&(t-=this.W7().I5()),t=C33.mh(t),this.Ha!==t)&&(this.Ha=t,this.Xwt())}_ht(t){0!==(t=+t)&&this.wN()&&(this.Ha=C33.mh(this.Ha+t),this.Xwt())}Xwt(){if(this.Fvt|=FLAG_SIN_COS_ANGLE_CHANGED,this.$X()){var i=this.Hq();for(let t=0,e=i.length;t<e;t++)i[t].Xwt()}}I5(){return this.cB()&&this.wN()?this.Wwt(C33.mh(this.W7().Vwt()+this.Ha)):this.Ha}Vwt(){return this.cB()&&this.wN()?C33.mh(this.W7().Vwt()+this.Ha):this.Ha}Wwt(t){return this.aB()&&this.H7().tp()<0&&(t=C33.mh(C33.bh(t,this.H7().I5()+Math.PI))),t=this.lB()&&this.H7().cp()<0?C33.bh(t,this.H7().I5()):t}zwt(){var t=this.W7();return!!(this.aB()&&t.tp()<0)||!!(this.lB()&&t.cp()<0)}Jwt(){var t=this.W7();return!!(this.aB()&&t.tp()<0&&this.lB()&&t.cp()<0)}Kwt(){var t,e=this.Fvt;0!=(e&FLAG_SIN_COS_ANGLE_CHANGED)&&(t=this.I5(),this.Cwt=Math.sin(t),this.pwt=Math.cos(t),this.Fvt=e&~FLAG_SIN_COS_ANGLE_CHANGED)}SSt(){return this.Kwt(),this.Cwt}vSt(){return this.Kwt(),this.pwt}bht(t){this.mwt=+t}wht(t){this.mwt+=+t}y$(){return this.mwt}Ght(t){this.vwt=+t}Oht(t){this.vwt+=+t}I$(){return this.vwt}Nwt(t){this.YS.equals(t)||(this.YS===DEFAULT_COLOR?(this.YS=C33.oh(C33.$a,t),this.Iwt=C33.oh(C33.$a,t),this.Iwt.po()):t.co(1,1,1,1)?(this.YS=DEFAULT_COLOR,this.Iwt=DEFAULT_COLOR):(this.YS.set(t),this.Iwt.set(t),this.Iwt.po()),this.$wt())}Tb(t){if(t=C33.ph(+t,0,1),this.pB()){if(this.mht().gSt()===t)return;this.mht().kMt(t),t=this.Sb()}else if(this.YS.a===t)return;this.Zwt(t)}Qwt(){if(this.$X()){var i=this.Hq();for(let t=0,e=i.length;t<e;t++){var s=i[t];s.Zwt(s.Sb())}}}Zwt(t){tempColor.Za(this.YS),tempColor.a=t,this.Nwt(tempColor),this.Qwt()}Aht(t){this.pB()?this.Tb(this.mht().gSt()+t):this.Tb(this.Sb()+t)}Sb(){return this.pB()?this.W7().Sb()*this.mht().gSt():this.YS.a}M7(t){this.YS.lo(t)||(tempColor.Za(t),tempColor.a=this.Sb(),this.Nwt(tempColor))}sht(t,e,i){tempColor.ja(t,e,i),this.M7(tempColor)}tbt(t,e,i){0===t&&0===e&&0===i||(tempColor.Za(this.YS),tempColor.r+=t,tempColor.Bo+=e,tempColor.b+=i,this.M7(tempColor))}R7(){return this.YS}AH(){return this.Iwt}gB(){return 0!=(this.Fvt&FLAG_DESTROY_WITH_PARENT)}ebt(t){this.ibt(FLAG_DESTROY_WITH_PARENT,t)}sB(){return 0!=(this.Fvt&FLAG_TRANSFORM_WITH_PARENT_X)}sbt(t){this.ibt(FLAG_TRANSFORM_WITH_PARENT_X,t)}hB(){return 0!=(this.Fvt&FLAG_TRANSFORM_WITH_PARENT_Y)}Hwt(){return 0!=(this.Fvt&(FLAG_TRANSFORM_WITH_PARENT_X|FLAG_TRANSFORM_WITH_PARENT_Y))}rbt(t){this.ibt(FLAG_TRANSFORM_WITH_PARENT_Y,t)}aB(){return 0!=(this.Fvt&FLAG_TRANSFORM_WITH_PARENT_W)}hbt(t){this.ibt(FLAG_TRANSFORM_WITH_PARENT_W,t)}lB(){return 0!=(this.Fvt&FLAG_TRANSFORM_WITH_PARENT_H)}nbt(t){this.ibt(FLAG_TRANSFORM_WITH_PARENT_H,t)}cB(){return 0!=(this.Fvt&FLAG_TRANSFORM_WITH_PARENT_A)}abt(t){this.ibt(FLAG_TRANSFORM_WITH_PARENT_A,t)}dB(){return 0!=(this.Fvt&FLAG_TRANSFORM_WITH_PARENT_Z_ELEVATION)}obt(t){this.ibt(FLAG_TRANSFORM_WITH_PARENT_Z_ELEVATION,t)}pB(){return 0!=(this.Fvt&FLAG_TRANSFORM_WITH_PARENT_OPACITY)}lbt(t){this.ibt(FLAG_TRANSFORM_WITH_PARENT_OPACITY,t)}vB(){return 0!=(this.Fvt&FLAG_TRANSFORM_WITH_PARENT_VISIBILITY)}ubt(t){this.ibt(FLAG_TRANSFORM_WITH_PARENT_VISIBILITY,t)}cbt(){this.Fvt&=~MASK_ALL_SCENE_GRAPH_FLAGS}K7(t,e){var i,s,r,h,n,a,o;return t!==this&&!(t.tB()||this.fbt(t)||this.dbt(t)||(o=t.ag(),a=t.ug(),i=t.tp(),s=t.cp(),r=t.I5(),h=t.dg(),n=t.Sb(),t.Cbt(this),t.sbt(e.iB),t.rbt(e.rB),t.hbt(e.nB),t.nbt(e.oB),t.abt(e.uB),t.obt(e.fB),t.lbt(e.CB),t.ubt(e.mB),t.ebt(e.SB),e.iB&&(t.zo=o-this.ag(),e.nB)&&0!=(o=this.tp()/this.bwt.pht())&&(t.zo/=o),e.rB&&(t.Jo=a-this.ug(),e.oB)&&0!=(o=this.cp()/this.bwt.Sht())&&(t.Jo/=o),e.nB&&(0===(a=this.tp())||a===Number.EPSILON?(t.fwt=1,t.bwt.BMt(1)):(t.fwt=i/this.tp(),t.bwt.BMt(t.fwt))),e.oB&&(0===(o=this.cp())||o===Number.EPSILON?(t.dwt=1,t.bwt.$Mt(1)):(t.dwt=s/this.cp(),t.bwt.$Mt(t.dwt))),e.uB&&(t.Ha=r-this.I5()),e.fB&&(t.qS=h-this.dg()),e.CB&&t.bwt.kMt(n),e.mB&&t.oD(this.uD()),this.pbt(t),this.f7(),this.Qwt(),0))}Z7(t){var e,i,s,r,h,n,a;t.W7()===this&&(e=t.ag(),i=t.ug(),s=t.tp(),r=t.cp(),h=t.I5(),n=t.dg(),a=t.Sb(),t.Cbt(null),t.cbt(),t.d7(e,i),t.DR(s,r),t.A5(h),t.Cg(n),t.Tb(a),this.mbt(t),this.f7())}vbt(){return this.Owt}Sbt(){var t;this.gbt();for(t of[...this.children()])this.Z7(t);var e=this.W7();e&&e.Z7(this),this.cbt()}gbt(){if(this.Tbt(),!this.PMt){var e,i=[...this.children()];i.length&&(this.PMt=[],this.LMt=new WeakMap);let t=0;for(e of i){var s=e.c6();this.PMt.push(s),this.LMt.set(s,t),t++}}i=this.W7();i&&i.gbt()}Tbt(){if(-1===this.Owt){var t,e,i=[...this.U7()];this.Owt=i.length;for(t of i)t.Tbt();for(e of[...this.children()])e.Tbt()}}xwt(){this.PMt&&(this.PMt.length=0),this.PMt=null,this.LMt=null;var t=this.W7();t&&t.xwt(),this.Owt=-1}tB(){return null!==this.W7()}W7(){var t=this.bwt;return null!==t?t.W7():null}H7(){let t=this;for(;t.tB();)t=t.W7();return t}*U7(){let t=this.W7();for(;t;)yield t,t=t.W7()}QRt(t){return this.Hq().includes(t)}$X(){var t=this.bwt;return null!==t&&t.$X()}Hq(){var t=this.bwt;return null!==t?t.Hq():EMPTY_ARRAY}children(){return this.Hq()}*z7(){for(var t of this.children())yield t,yield*t.z7()}X7(){return this.Hq().length}wSt(){return[...this.z7()].length}q7(t){var e=this.Hq();return(t=Math.floor(+t))<0||t>=e.length?null:e[t]}sMt(e){if(e){var i=this.Hq();if(i)for(let t=0;t<i.length;t++)if(e===i[t])return t}return NaN}_bt(t){this.bwt||(this.bwt=C33.oh(C33.jq,this)),t&&this.bwt.NMt(t)}mht(){return this.bwt}Lwt(){this.bwt&&(this.bwt.lh(),this.bwt=null)}Cbt(t){t?(t._bt(null),this._bt(t)):(this.bwt&&this.bwt.NMt(null),this.$X()||this.Lwt())}dbt(t){var e;return!!this.tB()&&((e=this.W7())===t||e.dbt(t))}fbt(t){if(this.QRt(t))return!0;for(var e of this.Hq())if(e.fbt(t))return!0;return!1}pbt(t){this.bwt.Hq().push(t)}mbt(t){var e=this.bwt.Hq(),i=e.indexOf(t);-1!==i&&e.splice(i,1),0!==e.length||this.tB()||this.Lwt(),t.$X()||t.Lwt()}hMt(){var t=sceneGraphExportDataMap.get(this);return t?t.Fwt:null}Ebt(){var t=sceneGraphExportDataMap.get(this);return t?t.Bwt:NaN}BX(){var t=sceneGraphZIndexMap.get(this);return C33.vs(t)?t:NaN}ybt(t){sceneGraphZIndexMap.set(this,t)}Abt(){this.ibt(FLAG_USE_POINTS_SHADER_PROGRAM,!0),this.$wt()}$wt(){if(enableUpdateRendererStateGroup){var e=this.i3.OS();this.Rwt&&e.Q2(this.Rwt);let t;t=0!=(this.Fvt&FLAG_USE_POINTS_SHADER_PROGRAM)?e.P2()||"<point>":e.b2()||"<default>",this.Rwt=e.z2(t,this.ND(),this.Iwt,this.dg())}}_X(){return this.Rwt}yU(){return this.YS===DEFAULT_COLOR}JS(t){if((t|=0)<0||31<t)throw new RangeError("invalid blend mode");this.ND()!==t&&(this.Fvt=this.Fvt&~FLAG_BLEND_MODE_MASK|t<<FLAG_BLEND_MODE_BIT_OFFSET,this.$wt())}ND(){return(this.Fvt&FLAG_BLEND_MODE_MASK)>>FLAG_BLEND_MODE_BIT_OFFSET}Tx(t,e){e=e&&this.lwt!==t;e&&this.eU(),this.wct.hRt(this,this.lwt,t),this.lwt=t,e&&this.Ibt(),0!==this.dg()&&this.lwt.sU()}mx(){return this.lwt}VL(){return this.mx().VL()}hU(t){this.uwt=0|t}vx(){return this.lwt.pj(),this.uwt}gj(t){this.cwt=0|t}fk(){return this.lwt.vj(),this.cwt}hV(){return this.uwt}ibt(t,e){e?this.Fvt|=t:this.Fvt&=~t}uD(){return 0!=(this.Fvt&FLAG_IS_VISIBLE)}oD(t){if(this.ibt(FLAG_IS_VISIBLE,t),this.$X())for(var e of this.Hq())e.vB()&&e.oD(t)}F7(){return 0!=(this.Fvt&FLAG_COLLISION_ENABLED)}B7(t){t=!!t,this.F7()!==t&&(this.ibt(FLAG_COLLISION_ENABLED,t),t?this.f7():this.Rbt())}Mbt(t,e){if(this.ibt(FLAG_SOLID_FILTER_INCLUSIVE,t),this.Awt&&this.Awt.clear(),e.trim()){this.Awt||(this.Awt=new Set);for(var i of e.split(" "))i&&this.Awt.add(i.toLowerCase())}else this.Awt=null}wbt(t){var e=0!=(this.Fvt&FLAG_SOLID_FILTER_INCLUSIVE),i=this.Awt;if(t&&i)for(var s of i)if(t.has(s))return e;return!e}f7(){if(this.Fvt|=FLAG_BBOX_CHANGED|FLAG_COLLISION_CELL_CHANGED|FLAG_MESH_CHANGED,this.wct.iRt(!0),this.i3.Ex(),this.lwt.DH()&&(this.bbt(this.Swt,this.gwt,!0),this.Fvt&=~FLAG_BBOX_CHANGED,this.Ibt()),0!=(this.Fvt&FLAG_ENABLE_BBOX_CHANGED_EVENT)&&this.wi.F3().dispatchEvent(bboxChangeEvent),null!==this.bwt){var i=this.bwt.Hq();for(let t=0,e=i.length;t<e;++t)i[t].f7()}}bbt(t,e,i){var s=this.ag(),r=this.ug(),h=this.tp(),n=this.cp(),a=this.I5();t.cl(s-this.mwt*h,r-this.vwt*n,h,n),i&&this.MB()&&this.Obt(t),0===a?e.vu(t):(t.offset(-s,-r),e.gu(t,this.SSt(),this.vSt()),e.offset(s,r),e.Tu(t)),t.normalize()}Gbt(){var t=this.Fvt;0!=(t&FLAG_BBOX_CHANGED)&&(this.bbt(this.Swt,this.gwt,!0),this.Fvt=t&~FLAG_BBOX_CHANGED)}T7(){return this.Gbt(),this.Swt}E7(){return this.Gbt(),this.gwt}Pbt(t){var e=this.ag(),i=this.ug(),e=Math.round(e)-e,i=Math.round(i)-i;return 0==e&&0==i?t:(tempQuad._(t),tempQuad.offset(e,i),tempQuad)}Lbt(t){this.Swt._(t),this.gwt.vu(this.Swt),this.Fvt&=~FLAG_BBOX_CHANGED,this.rRt(),this.Ibt()}xbt(t){this.ibt(FLAG_ENABLE_BBOX_CHANGED_EVENT,t)}Nbt(){return 0!=(this.Fvt&FLAG_ENABLE_BBOX_CHANGED_EVENT)}lX(t,e,i){return e&&0!==this.CX()?this.fX(this.mx().cX()):0===this.dg()||i?t.Ul(this.T7()):this.Dbt()}Dbt(){var t=this.mx(),e=this.S7();return!(e>=t.WU())&&(t.$U(e,tempRect),tempRect.Ul(this.T7()))}fX(t){var e=this.T7(),i=e.gl(),s=e._l(),r=e.Tl(),e=e.El(),h=this.S7(),n=h+this.CX();return t.um(i,r,h,s,e,n)}A7(){var t,e=this.mx();return e.QU()?this.fX(e.cX()):(t=e.VL(),this.lX(e.$D(),t.aX(),t.Q5()))}SX(t){this.ibt(FLAG_DRAW_BACK_FACE_ONLY,t)}vX(t){this.ibt(FLAG_DRAW_NON_BACK_FACES_ONLY,t)}Fbt(){return 0!=(this.Fvt&FLAG_DRAW_BACK_FACE_ONLY)}Bbt(){return 0!=(this.Fvt&FLAG_DRAW_NON_BACK_FACES_ONLY)}$bt(t){this.Ewt=t,this.kbt(),this.MB()&&(this.Gwt.Wbt=null)}Vbt(){return this.Ewt}Hbt(){return null!==this.Ewt||this.MB()}Ubt(){return this.jbt(this.tp(),this.cp(),this.I5(),this.SSt(),this.vSt())}Xbt(t,e,i){let s=0,r=1;return 0!==i&&(s=Math.sin(i),r=Math.cos(i)),this.jbt(t,e,i,s,r)}jbt(e,i,t,s,r){let h=this.ywt;null===h&&(h={Pwt:C33.oh(C33.Ou),width:NaN,height:NaN,angle:NaN},this.ywt=h);var n=h.Pwt;if(h.width!==e||h.height!==i||h.angle!==t){var a=this.Ewt;if(this.MB()){var o=this.y$(),l=this.I$(),u=this.wB();let t=this.Gwt.Wbt;t||(a?(tempCollisionPoly._(a),tempCollisionPoly.offset(o,l)):tempCollisionPoly.Bu(),t=u.Zg(tempCollisionPoly),this.Gwt.Wbt=t),u.Qg(t,n),n.offset(-o,-l),n.Vu(e,i,s,r)}else a?(n._(a),n.Vu(e,i,s,r)):n.Wu(this.E7(),-this.ag(),-this.ug());h.width=e,h.height=i,h.angle=t}return n}kbt(){this.Ybt(!0);var t=this.ywt;null!==t&&(t.width=NaN)}_B(t,e){if(t=Math.floor(t),e=Math.floor(e),!this.c6().YN().DN())throw new Error("object does not support mesh");this.yB(),this.Gwt={qbt:C33.oh(C33.J1.Rg,t,e),zbt:C33.oh(C33.J1.Rg,t,e),Wbt:null}}MB(){return null!==this.Gwt}wB(){if(this.MB())return this.Gwt.qbt;throw new Error("no mesh")}Jbt(){if(this.MB())return this.Gwt.zbt;throw new Error("no mesh")}Kbt(t){this.ibt(FLAG_MESH_CHANGED,t)}Zbt(){return 0!=(this.Fvt&FLAG_MESH_CHANGED)}Ybt(t){this.ibt(FLAG_PHYSICS_BODY_CHANGED,t)}Qbt(){return 0!=(this.Fvt&FLAG_PHYSICS_BODY_CHANGED)}Obt(t){var e=this.Gwt.qbt,i=Math.min(e.Vg(),0),s=Math.min(e.Hg(),0),r=Math.max(e.Ug(),1),h=Math.max(e.jg(),1),n=t.width(),a=t.height();t.offsetLeft(i*n),t.offsetTop(s*a),t.bl((r-1)*n),t.Ol((h-1)*a),this.e_=e.Xg()}yB(){this.Gwt&&(this.Gwt.qbt.lh(),this.Gwt.zbt.lh(),this.Gwt=null,this.kbt())}IB(t,e,i){t=Math.floor(t),e=Math.floor(e);var s=i.mode||"absolute";if(!VALID_SET_MESH_POINT_MODES.has(s))throw new Error("invalid mode");s="relative"===s;let r=i.x,h=i.y;var n=i.wD;let a="number"==typeof i.u?i.u:s?0:-1,o="number"==typeof i.v?i.v:s?0:-1;if(!this.MB())return!1;var i=this.wB(),l=i.qg(t,e);if(null===l)return!1;let u=!1;return"number"==typeof n&&l.dg()!==n&&(l.Cg(n),u=!0),s&&(r+=t/(i.Fg()-1),h+=e/(i.Bg()-1)),a=-1!==a||s?(s&&(a+=t/(i.Fg()-1)),C33.ph(a,0,1)):l.pg(),o=-1!==o||s?(s&&(o+=e/(i.Bg()-1)),C33.ph(o,0,1)):l.vg(),l.ag()===r&&l.ug()===h&&l.pg()===a&&l.vg()===o?u:(l.og(r),l.fg(h),l.mg(a),l.Sg(o),this.kbt(),!0)}kRt(){return this.wi.kRt()}k7(t,e){return!!this.T7().Xl(t,e)&&!!this.E7().Xl(t,e)&&(this.kRt()?this.wi.NB().IEt(t,e):!this.Hbt()||this.Ubt().Xl(t-this.ag(),e-this.ug()))}tOt(){return 0!=(this.Fvt&FLAG_COLLISION_CELL_CHANGED)}rRt(){var t,e,i;this.tOt()&&this.F7()&&0==(this.Fvt&FLAG_DESTROYED)&&(i=this.T7(),t=this.wct.eRt(),e=this.Twt,tempRect.set(t.EV(i.gl()),t.yV(i.Tl()),t.EV(i._l()),t.yV(i.El())),e.equals(tempRect)||(i=this.wi,e===DEFAULT_COLLISION_CELLS?(t.AV(i,null,tempRect),this.Twt=C33.oh(C33.Rect,tempRect)):(t.AV(i,e,tempRect),e._(tempRect)),this.Fvt&=~FLAG_COLLISION_CELL_CHANGED))}eOt(){this.Fvt|=FLAG_COLLISION_CELL_CHANGED}Rbt(){var t=this.Twt;t!==DEFAULT_COLLISION_CELLS&&(this.wct.eRt().AV(this.wi,t,null),this.Twt=DEFAULT_COLLISION_CELLS)}Ibt(){var t,e,i,s=this.mx();s.DH()&&0==(this.Fvt&FLAG_DESTROYED)&&(t=s.IU(),i=this.T7(),e=this._wt,tempRect.set(t.EV(i.gl()),t.yV(i.Tl()),t.EV(i._l()),t.yV(i.El())),e.equals(tempRect)||(i=this.wi,e===DEFAULT_RENDER_CELLS?(t.AV(i,null,tempRect),this._wt=C33.oh(C33.Rect,tempRect)):(t.AV(i,e,tempRect),e._(tempRect)),s.RU()))}eU(){var t=this._wt;t!==DEFAULT_RENDER_CELLS&&(this.mx().IU().AV(this.wi,t,null),this._wt=DEFAULT_RENDER_CELLS)}mj(){return this._wt}b7(){var t=this.wi,e=this.lwt,i=e.gx();i.length&&i.at(-1)===t||(e.tU(t,!1),e.KH(t,!1),this.i3.Ex())}G7(){var t=this.wi,e=this.lwt,i=e.gx();i.length&&i[0]===t||(e.tU(t,!1),e.QH(t,!1),this.i3.Ex())}L7(t){var e=this.wi,i=this.lwt;if(i.VL()!==t.VL())throw new Error("layer from different layout");t!==i&&(i.tU(e,!0),this.Tx(t),t.KH(e,!0),this.i3.Ex())}N7(t,e){var i=this.wi;let s=!1;var r=this.lwt;if(t.CF()!==i.CF()){var h=t.Cx();if(!h)throw new Error("expected world instance");h=h.mx(),r=(r.f4()!==h.f4()&&(r.tU(i,!0),this.Tx(h),h.KH(i,!0),s=!0),h._j(i,t,!!e));(s||r)&&this.i3.Ex()}}u7(){return this.Mwt}iOt(t){this.ibt(FLAG_HAS_ANY_ACTIVE_EFFECT,t)}wj(){return 0!=(this.Fvt&FLAG_HAS_ANY_ACTIVE_EFFECT)}NX(t,e=null){var i={x:this.ag(),y:this.ug(),w:this.tp(),h:this.cp(),l:this.mx().SU(),zi:this.vx()},s=(0!==this.dg()&&(i.ze=this.dg()),0!==this.I5()&&(i.a=this.Vwt()),this.yU()||(i.c=this.YS.toJSON()),.5!==this.y$()&&(i.oX=this.y$()),.5!==this.I$()&&(i.oY=this.I$()),0!==this.ND()&&(i.bm=this.ND()),this.uD()||(i.v=this.uD()),this.F7()||(i.ce=this.F7()),this.Nbt()&&(i.be=this.Nbt()),this.Mwt&&(i.fx=this.Mwt.NX()),0!=(this.Fvt&FLAG_SOLID_FILTER_INCLUSIVE));return s&&(i.sfi=s),this.Awt&&(i.sft=[...this.Awt].join(" ")),this.bwt&&"visual-state"!==t&&(i.sgi=this.bwt.NX(t,e),sceneGraphExportDataMap.has(this))&&(i.sgcd=sceneGraphExportDataMap.get(this).Fwt,i.sgzid=sceneGraphExportDataMap.get(this).Bwt),this.MB()&&(i.mesh=this.wB()._g()),i}zMt(){return{x:this.zo,y:this.Jo,z:this.qS,w:this.fwt,h:this.dwt,a:this.Ha,sgi:this.mht()?this.mht().UMt():null}}QMt(t){t&&(this.zo=t.x,this.Jo=t.y,this.qS=t.z,this.fwt=t.w,this.dwt=t.h,this.Ha=t.a,t.sgi&&this.mht()&&this.mht().DX(t.sgi),this.Xwt(),this.f7())}fRt(){this.xwt(),this.Sbt(),this._bt(null),this.bwt&&this.bwt.KMt(this.PMt,this.LMt)}eJ(t){"visual-state"!==t&&this.Sbt()}sJ(t,e="full",i=null){t.hasOwnProperty("sgi")&&"visual-state"!==e&&0==(this.Fvt&FLAG_DESTROYED)&&this.bwt.sJ(t.sgi,i)}EMt(t,e="full",i){t.hasOwnProperty("sgi")&&"visual-state"!==e&&0==(this.Fvt&FLAG_DESTROYED)&&(this.bwt.KMt(null,null),this.xwt(),this.f7())}DX(t,e){if(enableUpdateRendererStateGroup=!1,this.og(t.x),this.fg(t.y),this.op(t.w),this.ep(t.h),this.hU(t.zi),this.Cg(t.hasOwnProperty("ze")?t.ze:0),this.A5(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?tempColor.Fo(t.c):t.hasOwnProperty("o")?(tempColor.Za(this.YS),tempColor.a=t.o):tempColor.Ua(1,1,1,1),this.Nwt(tempColor),this.bht(t.hasOwnProperty("oX")?t.oX:.5),this.Ght(t.hasOwnProperty("oY")?t.oY:.5),this.JS(t.hasOwnProperty("bm")?t.bm:0),this.oD(!t.hasOwnProperty("v")||t.v),this.B7(!t.hasOwnProperty("ce")||t.ce),this.xbt(!!t.hasOwnProperty("be")&&t.be),this.Mbt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.Mwt&&t.hasOwnProperty("fx")&&this.Mwt.DX(t.fx),!t.hasOwnProperty("sgi")&&"visual-state"!==e&&this.PMt)for(var i of this.PMt)i.Sk()||this.i3.aF(i);var s,r;t.hasOwnProperty("sgi")&&"visual-state"!==e&&(this._bt(null),s=this.bwt,r=t.sgi,s.DX(r),s.KMt(this.PMt,this.LMt),t.sgcd)&&C33.vs(t.sgzid)&&sceneGraphExportDataMap.set(this,{Fwt:t.sgcd,Bwt:t.sgzid}),t.hasOwnProperty("mesh")?(r=t.mesh,this._B(r.cols,r.rows),this.wB().Eg(r)):this.yB(),this.f7(),enableUpdateRendererStateGroup=!0,this.$wt(),"visual-state"!==e&&this.i3.sOt(this.c6(),t)}}}{let C33=self.We;C33.XAt=class BehaviorType extends C33.nh{constructor(t,e){super();var i=t.Dx(),s=i.B1t(e[1]),i=(i.rOt().Tyt(s),this.i3=i,this.wct=t,this.tyt=C33.gN.KB(s),this.B_t=null,this.hOt=null,this.yAt=s.Instance,this.kV=e[2],this.dh=e[0],this._mt=this.i3.r0t(e[3]),this.tyt.mvt());if(i<2&&(this.B_t=C33.oh(s.lIt,this),!(this.B_t instanceof C33.QEt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(C33.gN.T_t(this,i),2<=i){t=s.lIt??globalThis.Gk;if(this.hOt=new t,!(this.hOt instanceof globalThis.Gk))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.hOt=new globalThis.zB;C33.gN.__t(i),this.m_t()}static W_(t,e){return C33.oh(C33.XAt,t,e)}lh(){this.i3=null,this.tyt=null,this.B_t&&(this.B_t.lh(),this.B_t=null),this.yAt=null}fSt(){return this.B_t}m_t(){this.B_t?this.B_t.m_t():this.hOt&&this.hOt.b6()}Dx(){return this.i3}tF(){return this.wct}HB(){return this.tyt}GIt(){return this.yAt}qc(){return this.dh}SU(){return this.kV}jB(){return this.hOt}r0t(){return this._mt}}}{let C33=self.We,IBehaviorInstance=self.WB;C33.IRt=class BehaviorInstance extends C33.nh{constructor(t){super(),this.i3=t.runtime,this.t2t=t.UB,this.tyt=this.t2t.HB(),this.wi=t.YB,this.H1=t.index,this.vRt=null,this.SRt=null,this.tyt.KH(this.wi)}lh(){this.SRt&&(this.SRt.hF(),this.SRt=null),this.tyt.tU(this.wi),this.vRt&&(this.vRt.lh(),this.vRt=null),this.i3=null,this.t2t=null,this.tyt=null,this.wi=null}RIt(t){if(this.vRt)throw new Error("already got sdk instance");if(this.HB().mvt()<2){if(this.vRt=C33.oh(this.t2t.GIt(),this,t),!(this.vRt instanceof C33.eyt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{var e=this.HB().v_t();this.g_t(e.Instance,t)}}NB(){return this.vRt??this.SRt}qB(){return this.wi}Dx(){return this.i3}XB(){return this.t2t}HB(){return this.tyt}Hrt(){return this.H1}hyt(){this.vRt?this.vRt.hyt():this.SRt.Nk()}lyt(t,e){this.vRt&&this.vRt.lyt(t,e)}_Mt(){return this.vRt?this.vRt.hEt():this.SRt.ZF()}_g(t="full"){return this.vRt?this.vRt._g(t):this.SRt.QF(t)}Eg(t,e="full"){if(this.vRt)return this.vRt.Eg(t,e);this.SRt.t7(t,e)}static nOt(t,e,i){var s=globalThis.Pk;let r,h;r=e instanceof s?t.B5(e):e.ryt(),h=i instanceof s?t.B5(i):i.ryt();var e=r.qB(),s=h.qB(),t=e.tF().f4(),i=s.tF().f4();return t!==i||(t=e.lMt())!==(i=s.lMt())?t-i:r.Hrt()-h.Hrt()}g_t(t,e){var i=IBehaviorInstance,t=t??this.vRt.v_t(),s=t||i,r=this.HB().mvt();if(C33.gN.T_t(this,r),C33.gN._yt(e),this.SRt=new s,C33.gN.Eyt(),C33.gN.__t(r),!t||this.SRt instanceof i)return this.SRt;throw new TypeError(`script interface class '${t.name}' does not extend the right base class '${i.name}'`)}W_t(){return this.SRt||this.g_t()}lEt(){return!!this.SRt}}}{let C33=self.We;C33.EH=class EffectList extends C33.nh{constructor(t,e){super(),this.bg=t,this.aOt=[],this.oOt=[],this.lOt=new Map,this.uOt=[],this.cOt=[],this.fOt=new Set,this.yS=!0;for(var i of e){var s=C33.oh(C33.dOt,this,i,this.aOt.length);this.aOt.push(s),this.lOt.set(s.qc().toLowerCase(),s),3<=i.length&&this.uOt.push(this.COt(s,i[2]))}this.Dx().pOt(this)}lh(){this.Dx().mOt(this);for(var t of this.cOt)t.lh();C33.Dn(this.cOt),C33.Dn(this.aOt),C33.Dn(this.oOt),this.lOt.clear(),C33.Dn(this.uOt),this.bg=null}vOt(t){this.fOt.add(t)}SOt(t){this.fOt.delete(t)}gOt(t){t._2()&&(this.cOt=this.aOt.map(t=>{t=t.kE();return 0<t.GetCustomParametersByteSize()?C33.oh(C33.J1.WebGPUEffectCustomParamsBuffer,t):null}),this.TOt());for(var e of this.fOt)e.gOt(t)}AIt(t){if(t.length){this.aOt=t.concat(this.aOt);for(var e of t)this.lOt.set(e.qc().toLowerCase(),e);for(let t=0,e=this.aOt.length;t<e;++t)this.aOt[t].dU(t)}}COt(t,e){t._Ot(e[0]);var i=e.slice(1);for(let t=0,e=i.length;t<e;++t){var s,r=i[t];Array.isArray(r)&&((s=C33.oh(C33.$a)).Fo(r),i[t]=s)}return i}$g(){return this.bg}Dx(){return this.bg.Dx()}t$(){C33.Dn(this.oOt);let t=!0;for(var e of this.aOt)e.ACt()&&(this.oOt.push(e),e.kE().DS()||(t=!1));this.yS=t}S5(){return this.aOt}$It(){return 0<this.aOt.length}Jst(t){return this.lOt.get(t.toLowerCase())||null}EOt(t){if((t=Math.floor(+t))<0||t>=this.aOt.length)throw new RangeError("invalid effect type index");return this.aOt[t]}ZB(t){return this.EOt(t).ACt()}QB(t,e){this.EOt(t)._Ot(e)}AU(){return this.oOt}wj(){return 0<this.oOt.length}DS(){return this.yS}zst(t){return this.uOt[t]}RH(t){return(t<this.cOt.length?this.cOt:this.uOt)[t]}e$(t,e){return t<0||t>=this.uOt.length||(t=this.uOt[t],e<0)||e>=t.length?null:t[e]}i$(t,e,i){if(t<0||t>=this.uOt.length)return!1;var s=this.uOt[t];if(e<0||e>=s.length)return!1;var r=s[e];if(r instanceof C33.$a){if(r.lo(i))return!1;r.Za(i)}else{if(r===i)return!1;s[e]=i}return t<this.cOt.length&&this.cOt[t].SetParameterValue(e,i),!0}TOt(){var i=this.uOt,s=this.cOt;for(let t=0,e=Math.min(i.length,s.length);t<e;++t){var r=s[t],h=i[t];for(let t=0,e=h.length;t<e;++t)r.SetParameterValue(t,h[t])}}static yOt(t){return t&&t instanceof C33.$a?{t:"color",v:t.toJSON()}:t}static AOt(t){if(null===t)return NaN;if("object"!=typeof t)return t;var e;if("color"===t.t)return(e=C33.oh(C33.$a)).Fo(t.v),e;throw new Error("invalid effect parameter type")}static IOt(t){return t.map(C33.EH.yOt)}static ROt(t){return t.map(C33.EH.AOt)}_g(){return this.aOt.map(t=>({name:t.qc(),active:t.ACt(),params:C33.EH.IOt(this.uOt[t.f4()])}))}Eg(t){for(var e of t){var i=this.Jst(e.name);i&&(i._Ot(e.active),this.uOt[i.f4()]=C33.EH.ROt(e.params))}this.t$(),this.TOt()}}}{let C33=self.We;C33.dOt=class EffectType extends C33.nh{constructor(t,e,i){super(),this._H=t,this.r3=e[0],this.dh=e[1],this.H1=i,this.US=null,this.nf=!0}lh(){this._H=null,this.US=null}yIt(t){t=C33.oh(C33.dOt,t,[this.r3,this.dh],-1);return t.US=this.US,t.nf=this.nf,t}gOt(t){t=t.w2(this.r3);if(!t)throw new Error("failed to find shader program '"+this.r3+"'");this.US=t}v5(){return this._H}qc(){return this.dh}dU(t){this.H1=t}f4(){return this.H1}$g(){return this._H.$g()}Dx(){return this._H.Dx()}_Ot(t){this.nf=!!t}ACt(){return this.nf}kE(){return this.US}MOt(){var i=[];for(let t=0,e=this.US.WE();t<e;++t){var s=this.US.VE(t);if("float"===s||"percent"===s)i.push(0);else{if("color"!==s)throw new TypeError("unknown effect parameter type");i.push(C33.oh(C33.$a,1,1,1,1))}}return i}}}{let C33=self.We;C33.wwt=class InstanceEffectList extends C33.nh{constructor(t,e){super(),this.wi=t,this.wOt=e,this._H=t.tF().v5(),this.bOt=!0,this.wH=!0,this.OOt=!1,this.GOt=!1,this.POt=!1,this.LOt=!1,this.o4=C33.oh(C33.J1.aG,t.Dx().K6().yH(),{JO:(t,e)=>{var e=e.t4(),i=e.Cx();t.KS(i.AH()),t.mv(i.S7()),e.Jg(t),t.mv(0)},KO:t=>{var e=t.TEt(),[t,i]=t.gEt();return{YP:e,qP:t,zP:i}},ZO:t=>this.RH(t)}),this.xOt=[],this.oOt=[],this.yS=!0,this.uOt=[],this.cOt=[],this.gOt(t.Dx().OS());for(let t=0,e=this._H.S5().length;t<e;++t)this.xOt.push(!0);this.t$(),this._H.vOt(this)}lh(){this._H.SOt(this);for(var t of this.cOt)t&&t.lh();C33.Dn(this.cOt),this.o4.lh(),this.o4=null,C33.Dn(this.xOt),C33.Dn(this.oOt),C33.Dn(this.uOt),this.wi=null,this._H=null}gOt(t){t._2()&&(this.cOt=this._H.S5().map(t=>{t=t.kE();return 0<t.GetCustomParametersByteSize()?C33.oh(C33.J1.WebGPUEffectCustomParamsBuffer,t):null}))}Dwt(t){let e=0;for(var i of t)this.uOt.push(this.COt(e,i)),++e;this.TOt(),this.t$()}COt(t,e){this.xOt[t]=e[0];var i=e.slice(1);for(let t=0,e=i.length;t<e;++t){var s,r=i[t];Array.isArray(r)&&((s=C33.oh(C33.$a)).Fo(r),i[t]=s)}return i}PRt(){for(var t of this._H.S5())this.uOt.push(t.MOt());this.TOt()}$g(){return this.bg}v5(){return this._H}c4(){return this.EU(),this.o4}Dx(){return this.wi.Dx()}t$(){C33.Dn(this.oOt);var i,t=this.wOt,s=this._H.S5(),r=this.oOt,h=this.xOt;let n=!0;for(let t=0,e=s.length;t<e;++t)h[t]&&(i=s[t],r.push(i),i.kE().DS()||(n=!1));this.yS=n,t.iOt(!!r.length),this.bOt=!0}EU(){var t=this.wi,e=this.wOt,i=e.yU(),s=t.YN().PN(),e=0!==e.I5()||0!==e.mx().I5()||e.tp()<0||e.cp()<0,r=t.yEt(),t=t.NS();(this.bOt||i!==this.wH||s!==this.OOt||e!==this.GOt||r!==this.POt||t!==this.LOt||this.o4.ZG())&&(this.o4.QG(this.oOt.map(t=>t.kE()),{tG:this.oOt.map(t=>t.f4()),eG:!i||t,sG:s,rG:r,hG:e}),this.bOt=!1,this.wH=i,this.OOt=s,this.GOt=e,this.POt=r,this.LOt=t)}AU(){return this.oOt}zst(t){return this.uOt[t]}RH(t){return(t<this.cOt.length?this.cOt:this.uOt)[t]}e$(t,e){return t<0||t>=this.uOt.length||(t=this.uOt[t],e<0)||e>=t.length?null:t[e]}i$(t,e,i){if(t<0||t>=this.uOt.length)return!1;var s=this.uOt[t];if(e<0||e>=s.length)return!1;var r=s[e];if(r instanceof C33.$a){if(r.lo(i))return!1;r.Za(i)}else{if(r===i)return!1;s[e]=i}return t<this.cOt.length&&this.cOt[t].SetParameterValue(e,i),!0}TOt(){var i=this.uOt,s=this.cOt;for(let t=0,e=s.length;t<e;++t){var r=s[t],h=i[t];for(let t=0,e=h.length;t<e;++t)r.SetParameterValue(t,h[t])}}DS(){return this.yS}NOt(){return this.oOt.some(t=>t.kE().$S())}ZB(t){return this.xOt[t]}QB(t,e){this.xOt[t]=!!e}S5(){return this._H.S5()}NX(){return this._H.S5().map(t=>({name:t.qc(),active:this.xOt[t.f4()],params:C33.EH.IOt(this.uOt[t.f4()])}))}DX(t){for(var e of t){var i=this._H.Jst(e.name);i&&(this.xOt[i.f4()]=e.active,this.uOt[i.f4()]=C33.EH.ROt(e.params))}this.t$(),this.TOt()}}}{let C33=self.We,tempCandidates=[],tileCollRectCandidates=[],tempJumpthruRet=[],tempPolyA=C33.oh(C33.Ou),tempPolyB=C33.oh(C33.Ou),tempQuad=C33.oh(C33.Jl),tempRect=C33.oh(C33.Rect),tempRect2=C33.oh(C33.Rect),tempPolyC=null,tempRect3=null,tempQuadB=null;C33.DOt=class CollisionEngine extends C33.nh{constructor(t){super(),this.i3=t,this.FOt=0,this.BOt=0,this.$Ot=[],this.kOt=0,this.WOt=0,this.VOt=0,this.HOt=0,this.UOt=new self.iN(this)}lh(){this.i3=null}Dx(){return this.i3}g4(){return this.UOt}jOt(){this.WOt=this.kOt,this.kOt=0,this.HOt=this.VOt,this.VOt=0}XOt(){return this.WOt}YOt(){return this.HOt}qOt(t,e){var i=t.Cx(),s=e.Cx();i&&s&&i.F7()&&s.F7()&&this.$Ot.push([t,e])}ASt(e,i,s){for(var[r,h]of this.$Ot){let t=null;if(e===r)t=h;else{if(e!==h)continue;t=r}!t.MSt(i)||s.includes(t)||s.push(t)}}ISt(t,e){if(this.$Ot.length)for(var[i,s]of this.$Ot)if(t===i&&e===s||t===s&&e===i)return!0;return!1}zOt(){C33.Dn(this.$Ot)}rN(t,e){if(!t||!e||t===e)return!1;t=t.Cx(),e=e.Cx();if(!t.F7()||!e.F7())return!1;this.kOt++;var i=t.mx(),s=e.mx();return i.cj(s)?this.JOt(t,e):this.KOt(t,e)}JOt(t,e){var i,s;return!(!t.T7().Ul(e.T7())||(this.VOt++,!t.E7().Eu(e.E7()))||t.kRt()&&e.kRt())&&(t.kRt()?this.ZOt(t,e):e.kRt()?this.ZOt(e,t):!t.Hbt()&&!e.Hbt()||(i=t.Ubt(),s=e.Ubt(),i.Hu(s,e.ag()-t.ag(),e.ug()-t.ug())))}KOt(i,s){var t=i.kRt(),e=s.kRt();if(t&&!e)return this.QOt(i,s);if(e&&!t)return this.QOt(s,i);if(e||t)return!1;var r=i.mx(),h=s.mx(),n=(tempPolyA._(i.Ubt()),tempPolyB._(s.Ubt()),tempPolyA.Nu());for(let t=0,e=n.length;t<e;t+=2){var a=t+1,o=n[t],l=n[a],[o,l]=r.jD(o+i.ag(),l+i.ug());n[t]=o,n[a]=l}var u=tempPolyB.Nu();for(let t=0,e=u.length;t<e;t+=2){var c=t+1,f=u[t],d=u[c],[f,d]=h.jD(f+s.ag(),d+s.ug());u[t]=f,u[c]=d}return tempPolyA.$u(),tempPolyB.$u(),this.VOt++,tempPolyA.Hu(tempPolyB,0,0)}QOt(t,e){var i=t.mx(),s=e.mx(),r=(tempPolyC=tempPolyC||C33.oh(C33.Ou),tempRect3=tempRect3||C33.oh(C33.Rect),tempQuadB=tempQuadB||C33.oh(C33.Jl),e.ag()),h=e.ug(),[s,n]=s.jD(r,h),[i,s]=i.WD(s,n),a=i-r,o=s-h;if(tempRect3._(e.T7()),tempRect3.offset(a,o),!t.T7().Ul(tempRect3))return!1;if(tempQuadB._(e.E7()),tempQuadB.offset(a,o),this.VOt++,!t.E7().Eu(tempQuadB))return!1;tempPolyC._(e.Ubt());var l=tempPolyC.Nu();for(let t=0,e=l.length;t<e;t+=2){var u=t+1;l[t]+=a,l[u]+=o}return tempPolyC.$u(),this.ZOt(t,e,i,s,tempPolyC,tempRect3,tempQuadB)}ZOt(t,i,e,s,r,h,n){var a=void 0!==h?h:i.T7(),o=t.ag(),l=t.ug(),h=t.c6().NB(),u=void 0!==e?e:i.ag(),c=void 0!==s?s:i.ug(),f=i.Hbt(),d=void 0!==n?n:i.E7(),C=tileCollRectCandidates;h.GetCollisionRectCandidates(a,C);for(let t=0,e=C.length;t<e;++t){var p=C[t],m=p.GetRect();if(this.kOt++,a.jl(m,o,l)&&(tempQuad.vu(m),tempQuad.offset(o,l),tempQuad.Eu(d)))if(f){var v=void 0!==r?r:i.Ubt();let t=u,e=c;void 0!==r&&(t=i.ag(),e=i.ug());var S=p.GetPoly();if(S){if(this.VOt++,S.Hu(v,t-(o+m.gl()),e-(l+m.Tl())))return C33.Dn(C),!0}else if(tempPolyA.Wu(tempQuad,0,0),tempPolyA.Hu(v,t,e))return C33.Dn(C),!0}else{S=p.GetPoly();if(!S)return C33.Dn(C),!0;if(tempPolyA.Wu(d,0,0),S.Hu(tempPolyA,-(o+m.gl()),-(l+m.Tl())))return C33.Dn(C),!0}}return C33.Dn(C),!1}tGt(t,a,o){var l=t.h5(),e=this.i3.J4();if(!e)throw new Error("cannot call outside event");var u=e.s3t();let i=new Map;var c=t=>{let e=i.get(t);return void 0===e&&(e=t.SD(),i.set(t,e)),e};if(l.kct()){o||(l.Yct(!1),C33.Dn(l.qct())),u&&C33.Dn(l.zct());for(var r of t.r5()){let i=r.Cx(),s=i.mx(),t=!1;if(t=c(s)&&i.A7()?a.some(([t,e])=>{var[t,e]=s.WD(t,e,i.S7());return i.k7(t,e)}):t){if(o)return!1;l.jct(r)}else u&&l.Xct(r)}}else{let r,h=!1,n=(!u||e.qpt(this.i3.zft())||this.i3.ESt()&&!l.zct().length&&l.qct().length?r=l.qct():(r=l.zct(),h=!0),0);for(let e=0,t=r.length;e<t;++e){var f=r[e];let i=f.Cx(),s=i.mx(),t=!1;if(t=c(s)&&i.A7()?a.some(([t,e])=>{var[t,e]=s.WD(t,e,i.S7());return i.k7(t,e)}):t){if(o)return!1;h?l.jct(f):r[n++]=f}else h?r[n++]=f:u&&l.Xct(f)}o||(r.length=n)}return t.b1t(),i.clear(),!!o||l.Wct()}eGt(t,e){if(t)for(var i of e.nRt())if(!t.cj(i))return!1;return!0}_St(t,e,i,s){if(e.uU())for(var r of e._pt())this.eGt(t,r)?(r.sRt(),r.eRt().IV(i,s)):C33.Jr(s,r.r5());else this.eGt(t,e)?(e.sRt(),e.eRt().IV(i,s)):C33.Jr(s,e.r5())}CN(t,e,i,s){for(var r of e)this._St(t,r,i,s)}iGt(t,e,i){var s=this.i3.Ayt();s&&this.CN(t,s.RJ(),e,i)}sGt(t,e,i){var s=this.i3.Iyt();s&&this.CN(t,s.RJ(),e,i)}wbt(t,e){return t.HRt()&&(!e||e.Cx().wbt(t.Evt().get("solidTags")))}aN(t){var e,i=t.Cx();this.iGt(i.mx(),i.T7(),tempCandidates);for(e of tempCandidates)if(this.wbt(e,t)&&this.rN(t,e))return C33.Dn(tempCandidates),e;return C33.Dn(tempCandidates),null}rGt(t,e){this.iGt(null,t,tempCandidates);for(var i of tempCandidates)if(this.wbt(i,e)&&this.hGt(t,i))return C33.Dn(tempCandidates),i;return C33.Dn(tempCandidates),null}nGt(t,e){let i=null;e&&(i=tempJumpthruRet,C33.Dn(i));var s,r=t.Cx();this.sGt(r.mx(),r.T7(),tempCandidates);for(s of tempCandidates)if(s.jRt()&&this.rN(t,s)){if(!e)return C33.Dn(tempCandidates),s;i.push(s)}return C33.Dn(tempCandidates),i}aGt(e,i,s,r,h){r=r||50;var n=e.Cx(),a=n.ag(),o=n.ug();for(let t=0;t<r;++t)if(n.d7(a+i*t,o+s*t),n.f7(),!this.rN(e,h))return!0;return n.d7(a,o),n.f7(),!1}oGt(e,i,s,r,h,n){r=r||50;var a=e.Cx(),o=a.ag(),l=a.ug();let u=null,c=null;for(let t=0;t<r;++t)if(a.d7(o+i*t,l+s*t),a.f7(),!this.rN(e,u))if(u=this.aN(e))c=u;else if(h&&(u=n?this.rN(e,n)?n:null:this.nGt(e))&&(c=u),!u)return c&&this.lGt(e,i,s,c,16,!0),!0;return a.d7(o,l),a.f7(),!1}uGt(i,s,r,t){t=t||50;var h=i.Cx(),n=h.ag(),a=h.ug();let o=null,l=null;for(let e=0;e<t;++e)for(let t=0;t<2;++t){var u=2*t-1;if(h.d7(n+s*e*u,a+r*e*u),h.f7(),!this.rN(i,o)){if(!(o=this.aN(i)))return l&&this.lGt(i,s*u,r*u,l,16,!0),!0;l=o}}return h.d7(n,a),h.f7(),!1}lGt(t,e,i,s,r,h){let n=2,a=!1,o=!1;var l=t.Cx();let u=l.ag(),c=l.ug();for(;n<=r;){var f=1/n;n*=2,l.m7(e*f*(a?1:-1),i*f*(a?1:-1)),l.f7(),this.rN(t,s)||h&&this.aN(t)?(a=!0,o=!0):(a=!1,o=!1,u=l.ag(),c=l.ug())}o&&(l.d7(u,c),l.f7())}cGt(i,t=100){let s=0;var r=i.Cx(),h=r.ag(),n=r.ug();let a=0,o=this.aN(i);if(!o)return!0;for(;s<=t;){let t=0,e=0;switch(a){case 0:t=0,e=-1,s++;break;case 1:t=1,e=-1;break;case 2:t=1,e=0;break;case 3:t=1,e=1;break;case 4:t=0,e=1;break;case 5:t=-1,e=1;break;case 6:t=-1,e=0;break;case 7:t=-1,e=-1}if(a=(a+1)%8,r.d7(Math.floor(h+t*s),Math.floor(n+e*s)),r.f7(),!this.rN(i,o)&&!(o=this.aN(i)))return!0}return r.d7(h,n),r.f7(),!1}fGt(t,e,i,s){var r=t.Cx(),h=r.ag(),n=r.ug(),a=Math.max(10,C33.Th(e,i,h,n)),o=C33.Eh(e,i,h,n),l=s||this.aN(t);if(!l)return C33.mh(o+Math.PI);let u=l,c=0,f=0;var d=C33.Sh(5);let C;for(C=1;C<36;++C){var p=o-C*d;if(r.d7(e+Math.cos(p)*a,i+Math.sin(p)*a),r.f7(),!this.rN(t,u)&&!(u=s?null:this.aN(t))){c=p;break}}for(36===C&&(c=C33.mh(o+Math.PI)),u=l,C=1;C<36;++C){var m=o+C*d;if(r.d7(e+Math.cos(m)*a,i+Math.sin(m)*a),r.f7(),!this.rN(t,u)&&!(u=s?null:this.aN(t))){f=m;break}}if(36===C&&(f=C33.mh(o+Math.PI)),r.d7(h,n),r.f7(),f===c)return f;l=C33.yh(f,c)/2;let v;v=C33.Ih(f,c)?C33.mh(c+l+Math.PI):C33.mh(f+l);var h=Math.cos(o),n=Math.sin(o),l=Math.cos(v),S=Math.sin(v),g=h*l+n*S,h=h-2*g*l,l=n-2*g*S;return C33.Eh(0,0,h,l)}dGt(t,e,i,s,r){var h;return!!r&&!!(h=r.Cx()).F7()&&(this.kOt++,tempRect.set(Math.min(t,i),Math.min(e,s),Math.max(t,i),Math.max(e,s)),!!h.T7().Ul(tempRect))&&(r.kRt()?this.CGt(t,e,i,s,r,h):(this.VOt++,!!h.E7()._u(t,e,i,s)&&(!h.Hbt()||h.Ubt()._u(h.ag(),h.ug(),t,e,i,s))))}CGt(i,s,r,h,t,e){var n=e.ag(),a=e.ug(),e=t.NB(),o=tileCollRectCandidates;tempRect2.set(i,s,r,h),tempRect2.normalize(),e.GetCollisionRectCandidates(tempRect2,o);for(let t=0,e=o.length;t<e;++t){var l=o[t],u=l.GetRect();if(this.kOt++,tempRect.jl(u,n,a)&&(tempQuad.vu(u),tempQuad.offset(n,a),tempQuad._u(i,s,r,h))){l=l.GetPoly();if(!l)return C33.Dn(o),!0;if(this.VOt++,l._u(n+u.gl(),a+u.Tl(),i,s,r,h))return C33.Dn(o),!0}}return C33.Dn(o),!1}hGt(t,e){var i;return!!e&&!!(i=e.Cx()).F7()&&(this.kOt++,!!i.T7().Ul(t))&&(e.kRt()?this.pGt(t,e,i):(this.VOt++,tempQuad.vu(t),!!i.E7().Eu(tempQuad)&&(!i.Hbt()||((e=tempPolyA).vu(t,i.ag(),i.ug()),t=i.Ubt(),e.Hu(t,0,0)))))}pGt(i,t,e){var s=e.ag(),r=e.ug(),e=t.NB(),h=tileCollRectCandidates;e.GetCollisionRectCandidates(i,h);for(let t=0,e=h.length;t<e;++t){var n=h[t],a=n.GetRect();if(this.kOt++,i.jl(a,s,r)){n=n.GetPoly();if(!n)return C33.Dn(h),!0;if(this.VOt++,tempPolyA.vu(i,0,0),n.Hu(tempPolyA,-(s+a.gl()),-(r+a.Tl())))return C33.Dn(h),!0}}return C33.Dn(h),!1}mGt(t,e){var i;t&&(i=t.Cx()).F7()&&(this.kOt++,i.T7().Ul(e.rect))&&(t.kRt()?this.vGt(t,i,e):(this.VOt++,i.Hbt()?e.SGt(t,i.ag(),i.ug(),i.Ubt()):e.gGt(t,i.E7())))}vGt(i,s,r){var h=s.ag(),n=s.ug(),a=tileCollRectCandidates;i.NB().GetCollisionRectCandidates(r.rect,a);for(let t=0,e=a.length;t<e;t++){var o=a[t],l=o.GetRect();this.kOt++,r.rect.jl(l,h,n)&&(o=o.GetPoly(),this.VOt++,o?r.SGt(i,h+l.gl(),n+l.Tl(),o):r.TGt(i,s.ag(),s.ug(),l))}C33.Dn(a)}lN(t,e){if(t!==this.FOt||e!==this.BOt){var i;this.FOt=t,this.BOt=e;for(i of this.i3.lU())if(i.AN()){for(var s of i.s5())s.Cx().Rbt();i.eRt()._Gt(t,e),i.iRt();for(var r of i.s5()){r=r.Cx();r.eOt(),r.rRt()}}}}cN(){return[this.FOt,this.BOt]}EGt(t,e){this.FOt=t,this.BOt=e}}}{let C33=self.We;C33.LAt=class SparseGrid extends C33.nh{constructor(t,e){super(),this.SV=t,this.gV=e,this.TV=C33.oh(C33.zu)}lh(){this.TV.lh(),this.TV=null}_Gt(t,e){if(!this.TV.Zu())throw new Error("grid not empty");this.SV=t,this.gV=e}_V(t,e,i){var s=this.TV.ni(t,e);return s||(i?(s=C33.oh(C33.yGt,this,t,e),this.TV.Set(t,e,s),s):null)}EV(t){t=Math.floor(t/this.SV);return isFinite(t)?t:0}yV(t){t=Math.floor(t/this.gV);return isFinite(t)?t:0}AV(s,r,h){if(r)for(let i=r.gl(),t=r._l();i<=t;++i)for(let t=r.Tl(),e=r.El();t<=e;++t){var n;h&&h.Xl(i,t)||(n=this._V(i,t,!1))&&(n._f(s),n.Zu())&&this.TV.Qu(i,t)}if(h)for(let i=h.gl(),t=h._l();i<=t;++i)for(let t=h.Tl(),e=h.El();t<=e;++t)r&&r.Xl(i,t)||this._V(i,t,!0).CV(s)}IV(t,e){let i=this.EV(t.gl());var s=this.yV(t.Tl()),r=this.EV(t._l()),h=this.yV(t.El());if(isFinite(r)&&isFinite(h))for(;i<=r;++i)for(let t=s;t<=h;++t){var n=this._V(i,t,!1);n&&n.mV(e)}}}}{let C33=self.We;C33.yGt=class GridCell extends C33.nh{constructor(t,e,i){super(),this.aV=t,this.zo=e,this.Jo=i,this.oV=C33.oh(C33.sc)}lh(){this.oV.lh(),this.oV=null,this.aV=null}Zu(){return this.oV.Zu()}CV(t){this.oV.ac(t)}_f(t){this.oV.Qu(t)}mV(t){C33.Jr(t,this.oV.oc())}}}{let C33=self.We,PADDING=1e-6,NO_HIT=2;C33.AGt=class Ray{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new C33.Rect,this.IGt=NO_HIT,this.RGt=null,this.MGt=0,this.wGt=0,this.bGt=0,this.OGt=0,this.GGt=0,this.Ot=0,this.PGt=1,this.LGt=0,this.xGt=1,this.NGt=0}DGt(){return this.IGt<1+PADDING}lf(){this.IGt=NO_HIT}Set(t,e,i,s){return this.x1=t,this.y1=e,this.x2=i,this.y2=s,this.dx=i-t,this.dy=s-e,this.rect.set(t,e,i,s),this.rect.normalize(),this.IGt=NO_HIT,this.RGt=null,this.MGt=0,this.wGt=0,this.bGt=0,this.OGt=0,this.GGt=0,this.Ot=0,this.PGt=1,this.LGt=0,this.xGt=1,this.NGt=0,this}FGt(){var t,e,i;!1!==this.DGt()&&(e=this.dx*this.IGt,t=this.dy*this.IGt,i=e/(e=Math.hypot(e,t)),t=t/e,this.Ot=e-PADDING,this.OGt=this.x1+i*this.Ot,this.GGt=this.y1+t*this.Ot,this.MGt=Math.atan2(this.bGt,this.wGt)+Math.PI/2,this.PGt=Math.cos(this.MGt),this.LGt=Math.sin(this.MGt),e=i*this.PGt+t*this.LGt,this.xGt=i-2*this.PGt*e,this.NGt=t-2*this.LGt*e,0<e)&&(i=Math.PI,this.MGt=C33.mh(this.MGt+i),this.PGt=-this.PGt,this.LGt=-this.LGt)}BGt(t,e,i,s,r){var h=C33.cn(this.x1,this.y1,this.x2,this.y2,e,i,s,r);0<=h&&h<this.IGt&&(this.IGt=h,this.RGt=t.CF(),this.wGt=e-s,this.bGt=i-r)}TGt(t,e,i,s){var r=e+s.gl(),e=e+s._l(),h=i+s.Tl(),i=i+s.El();this.BGt(t,r,h,e,h),this.BGt(t,e,h,e,i),this.BGt(t,e,i,r,i),this.BGt(t,r,i,r,h)}gGt(t,e){var i=e.Qh(),s=e.tn(),r=e.sn(),h=e.rn(),n=e.hn(),a=e.nn(),o=e.an(),e=e.ln();this.BGt(t,i,s,r,h),this.BGt(t,r,h,n,a),this.BGt(t,n,a,o,e),this.BGt(t,o,e,i,s)}SGt(i,s,r,t){var h=t.Nu();for(let t=0,e=h.length;t<e;t+=2){var n=(t+2)%e,a=h[t]+s,o=h[t+1]+r,l=h[n]+s,n=h[1+n]+r;this.BGt(i,a,o,l,n)}}}}{let C33=self.We,VALID_FULLSCREEN_MODES=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),VALID_FULLSCREEN_SCALING_QUALITIES=new Set(["high","low"]),glMatrix=self.Se,mat42=glMatrix.Ee,vec32=glMatrix.Re,tempProjection=mat42.create(),PERCENTTEXT_WIDTH=300,PERCENTTEXT_HEIGHT=200,PROGRESSBAR_WIDTH=120,PROGRESSBAR_HEIGHT=8,tempQuad=C33.oh(C33.Jl),tempRect=C33.oh(C33.Rect),SPLASH_MIN_DISPLAY_TIME=3e3,SPLASH_AFTER_FADEOUT_WAIT_TIME=200,SPLASH_FADE_DURATION=300;C33.$Gt=class CanvasManager extends C33.nh{constructor(t){super(),this.i3=t,this.kGt=[],this.WGt=!1,this.VGt=null,this.HGt=null,this.UGt=null,this.jGt="high-performance",this.XGt=!1,this.YGt=0,this.qGt=0,this.zGt="",this.JGt=0,this.KGt=0,this.ZGt=0,this.QGt=0,this.tPt=0,this.ePt=0,this._m="normalized",this.iPt=0,this.sPt=1,this.rPt=1e4,this.Zm=!0,this.hPt=0,this.LG=0,this.xG=0,this.nPt="letterbox-scale",this.aPt="letterbox-scale",this.oPt=0,this.lPt=0,this.uPt=mat42.create(),this.cPt="high",this.fPt=this.cPt,this.dPt=!1,this.CPt=[],this.pPt=new Set,this.mPt=self.C3_Shaders,this.vPt=C33.oh(C33.J1.DO,{PO:()=>[this.Uj(),this.jj()],LO:()=>this.SPt(),xO:t=>this.gPt(t),getTime:()=>this.Dx().pL(),NO:()=>this.Dx().Ex()}),this.TPt=0,this._Pt=0,this.EPt=NaN,this.yPt=null,this.APt=new Map,this.IPt=NaN,this.RPt=new Map,this.MPt="",this.wPt=1,this.bPt=C33.oh(C33.Rect),this.OPt="",this.GPt=null,this.PPt=null,this.LPt=0,this.xPt=0,this.NPt=-1,this.DPt=0,this.FPt=t=>this.DPt=t.progress,this.BPt=null,this.$Pt={kPt:null,WPt:null,VPt:null},this.HPt=0,this.UPt=0,this.jPt=0,this.XPt="fade-in",this.YPt=null,this.qPt=new Promise(t=>this.YPt=t)}zPt(t){this.jGt=t}JPt(t){this.WGt=!!t}KPt(t){this._m=t}ZPt(){return this._m}QPt(t){this.iPt=t}t4t(t,e){this.sPt=t,this.rPt=e}e4t(t){this.XGt=!!t}async Ma(t){var e=t.canvas,e=(this.kGt.push({canvas:e,i4t:null}),this.i3.WF("runtime","window-resize",t=>this.s4t(t)),this.i3.WF("runtime","fullscreenchange",t=>this.r4t(t)),this.i3.WF("runtime","fullscreenerror",t=>this.h4t(t)),e.addEventListener("webglcontextlost",t=>this.n4t(t)),e.addEventListener("webglcontextrestored",t=>this.a4t(t)),this.dPt=!!t.isFullscreen,this.zGt=t.cssDisplayMode,navigator.gpu&&this.WGt);let i=!1;if(e)try{await this.o4t(!0)}catch(t){this.l4t("WebGPU",t),this.HGt=null}if(!this.OS())try{await this.u4t(!0)}catch(t){this.l4t("WebGL",t),this.VGt=null}if(this.OS()||(i=!0),!this.OS()&&e)try{await this.o4t(!1)}catch(t){this.l4t("WebGPU",t),this.HGt=null}if(!this.OS())try{await this.u4t(!1)}catch(t){this.l4t("WebGL",t),this.VGt=null}e=this.OS();if(!e)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");e.oS(i),this.HGt&&(this.HGt.c4t=()=>this.f4t(),this.HGt.d4t=()=>this.C4t()),"normalized"===this._m?e.v2():(e.S2(),e.C2(this.iPt)),this.DR(t.windowInnerWidth,t.windowInnerHeight,!0),await this.gOt()}l4t(t,e){e&&"string"==typeof e.message&&e.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,e)}async o4t(t){var e={dm:this.sPt,Cm:this.rPt},t={powerPreference:this.jGt,depth:this.i3.ZU(),failIfMajorPerformanceCaveat:t,p4t:this.i3.Qj(),m4t:this.i3.v4t(),XM:this.i3.S4t()};this.HGt=C33.oh(C33.J1.WebGPURenderer,e),await this.HGt.W_(this.kGt[0].canvas,t)}async u4t(t){t={alpha:!0,powerPreference:this.jGt,jM:"xbox-uwp-webview2"!==this.i3.oW(),depth:this.i3.ZU(),XM:this.i3.S4t(),failIfMajorPerformanceCaveat:t,dm:this.sPt,Cm:this.rPt};this.XGt&&(t.YM=1),this.VGt=C33.oh(C33.J1.JM,this.kGt[0].canvas,t),await this.VGt.s2()}async g4t(){if(this.mPt){var t,e,i=[];for([t,e]of Object.entries(this.mPt)){e.src=e.wgsl;var s=C33.J1.WebGPUShaderProgram.ly();i.push(this.HGt.ib(Object.assign({F_:s,name:t},e)))}await Promise.all(i)}}async T4t(){if(this.mPt){var e,i,s=[];for([e,i]of Object.entries(this.mPt)){let t;if(i.glslWebGL2&&2<=this.VGt.RT())i.src=i.glslWebGL2,t=C33.J1.N_.uy();else{if(!i.glsl)throw new Error(`shader '${e}' does not support WebGL 1`);i.src=i.glsl,t=C33.J1.N_.ly()}s.push(this.VGt.ib(Object.assign({F_:t,name:e},i)))}await Promise.all(s),this.VGt.sb(),this.VGt.O2()}this.VGt.gO()&&(this.yPt=C33.oh(C33.J1.NM,this.VGt))}async gOt(){this.HGt?await this.g4t():this.VGt&&await this.T4t();var t,e=this.OS();e.nS(this.Zm),e.gO()&&(this.EPt=0);for(t of this.i3._4t()){for(var i of t.S5())i.gOt(e);t.gOt(e),t.t$()}this.UGt=new self.v8(this.i3,e)}lh(){this.i3=null,this.VGt=null,this.kGt.length=0}w4(){return this.i3.w4()}s4t(t){var e,i=this.i3;i.E4t()||(e=t.devicePixelRatio,this.w4()&&(self.devicePixelRatio=e),i.y4t(e),this.dPt=!!t.isFullscreen,this.zGt=t.cssDisplayMode,this.DR(t.innerWidth,t.innerHeight),i.Ex(),(e=new C33.Event("window-resize")).data=t,i.F3().z3(e),(t=new C33.Event("resize")).A4t=this.gk(),t.I4t=this.Tk(),t.R4t=this.M4t(),t.w4t=this.b4t(),i.rz(t),i.hz()&&(i.F0t()||self.C3Debugger.IsDebuggerPaused())&&i.lP())}r4t(t){this.dPt=!!t.isFullscreen,this.DR(t.innerWidth,t.innerHeight,!0),this.i3.Ex()}h4t(t){this.dPt=!!t.isFullscreen,this.DR(t.innerWidth,t.innerHeight,!0),this.i3.Ex()}DR(t,e,i=!1){if(t=Math.floor(t),e=Math.floor(e),t<=0||e<=0)throw new Error("invalid size");if(this.YGt!==t||this.qGt!==e||i){this.YGt=t,this.qGt=e;var s,i=this.O4t();"letterbox-scale"===i?this.G4t(t,e):"letterbox-integer-scale"===i?this.P4t(t,e):"off"===i?this.L4t(t,e):this.x4t(t,e),this.N4t(i);for({canvas:s}of this.kGt)s.width=this.ZGt,s.height=this.QGt;this.i3.h3("canvas","update-size",{marginLeft:this.tPt,marginTop:this.ePt,styleWidth:this.JGt,styleHeight:this.KGt,displayScale:this._k()});var r,h=this.OS();h.DR(this.ZGt,this.QGt,!0);for(r of this.CPt)h.dO(r);C33.Dn(this.CPt),this.D4t();t=this.i3.WL();t.Mz(),t.wz()}}D4t(){this.OS().T2(this.uPt,this.Uj()/this.jj())}Xj(){return this.uPt}G4t(t,e){var i=this.i3._U(),s=this.i3.O4(),r=this.i3.P4(),h=s/r;h<t/e?(this.JGt=Math.round(e*h),this.KGt=e,this.tPt=Math.floor((t-this.JGt)/2),this.ePt=0):(h=t/h,this.JGt=t,this.KGt=Math.round(h),this.tPt=0,this.ePt=Math.floor((e-this.KGt)/2)),this.ZGt=Math.round(this.JGt*i),this.QGt=Math.round(this.KGt*i),this.i3.F4t(s,r)}P4t(t,e){var i=this.i3._U(),s=(1!==i&&(t+=1,e+=1),this.i3.O4()),r=this.i3.P4(),h=s/r;let n;1<(n=h<t/e?e*h*i/s:t/h*i/r)?n=Math.floor(n):n<1&&(n=1/Math.ceil(1/n)),this.ZGt=Math.round(s*n),this.QGt=Math.round(r*n),this.JGt=this.ZGt/i,this.KGt=this.QGt/i,this.tPt=Math.max(Math.floor((t-this.JGt)/2),0),this.ePt=Math.max(Math.floor((e-this.KGt)/2),0),this.i3.F4t(s,r)}x4t(t,e){var i=this.i3._U(),t=(this.JGt=t,this.KGt=e,this.ZGt=Math.round(this.JGt*i),this.QGt=Math.round(this.KGt*i),this.tPt=0,this.ePt=0,this._k());this.i3.F4t(this.JGt/t,this.KGt/t)}L4t(t,e){var i=this.i3._U();this.JGt=this.i3.VU(),this.KGt=this.i3.HU(),this.ZGt=Math.round(this.JGt*i),this.QGt=Math.round(this.KGt*i),this.B4t()?(this.tPt=Math.floor((t-this.JGt)/2),this.ePt=Math.floor((e-this.KGt)/2)):(this.tPt=0,this.ePt=0),this.i3.F4t(this.i3.VU(),this.i3.HU())}N4t(i){if("high"===this.cPt)this.LG=this.ZGt,this.xG=this.QGt,this.fPt="high";else{let t,e;var s,r;e="off"===this.O4t()?(t=this.i3.VU(),this.i3.HU()):(t=this.i3.O4(),this.i3.P4()),this.ZGt<t||this.QGt<e?(this.LG=this.ZGt,this.xG=this.QGt,this.fPt="high"):(this.LG=t,this.xG=e,this.fPt="low","scale-inner"===i?(s=t/e,(r=this.YGt/this.qGt)<s?this.LG=this.xG*r:s<r&&(this.xG=this.LG/r)):"scale-outer"===i&&((s=t/e)<(r=this.YGt/this.qGt)?this.LG=this.xG*r:r<s&&(this.xG=this.LG/r)))}}Dx(){return this.i3}$4t(){return this.kGt[0].canvas}yH(){return this.vPt}B4t(){return this.dPt}k4t(){return this.zGt}W4t(t){if(!VALID_FULLSCREEN_MODES.has(t))throw new Error("invalid fullscreen mode");this.nPt=t;t=this.i3.WL();t.Mz(),t.wz()}vk(){return this.nPt}V4t(t){if(!VALID_FULLSCREEN_MODES.has(t))throw new Error("invalid fullscreen mode");this.aPt=t;t=this.i3.WL();t.Mz(),t.wz()}H4t(){return this.aPt}O4t(){return this.B4t()?this.H4t():this.vk()}U4t(t){if(!VALID_FULLSCREEN_SCALING_QUALITIES.has(t))throw new Error("invalid fullscreen scaling quality");this.cPt=t,this.i3.WL().Mz()}j4t(){return this.cPt}tX(){return this.fPt}static X4t(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}Q6(){return this.YGt}ek(){return this.qGt}Uj(){return this.LG}jj(){return this.xG}nS(t){this.Zm=!!t}Y4t(t){this.hPt=t}eV(){return this.hPt}q4t(){return this.OS().fM()}n4t(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.CPt=[],this.pPt.clear(),this.vPt.ZS(),this.VGt.ZS(),this.i3.eq()}f4t(){console.log("[Construct] WebGPU device lost"),this.CPt=[],this.pPt.clear(),this.vPt.ZS(),this.i3.eq()}async a4t(t){await this.VGt.QS(),await this.gOt(),await this.i3.z4t(),console.log("[Construct] WebGL context restored")}async C4t(){await this.gOt(),await this.i3.z4t(),console.log("[Construct] WebGPU device restored")}J4t(){return this.VGt}K4t(){return this.HGt}OS(){return this.HGt||this.VGt}OIt(){return this.UGt}KD(){return"low"===this.fPt?1/this.i3._U():this._k()}_k(){var t,e,i,s,r=this.O4t();return"off"===r||"crop"===r?1:(i=(t=this.i3.O4())/(e=this.i3.P4()),s=this.ZGt/this.QGt,"scale-inner"!==r&&i<s||"scale-inner"===r&&s<i?this.KGt/e:this.JGt/t)}IX(){return"low"===this.tX()?1:this._k()}yX(){return"low"===this.tX()?1:this.i3._U()}Z4t(t,e){this.oPt=t,this.lPt=e}r9(e,i,s,t=!0){i=i||this.LG,s=s||this.xG;var r=i/2+this.oPt,h=s/2+this.lPt;if(t){let t=this.Xj();i===this.LG&&s===this.xG||(e.T2(tempProjection,i/s),t=tempProjection),e.hb(t)}t=e.I2(r,h,e.n2(s),r,h,0,s);e.fb(t)}Q4t(t,e=!0){var i=this.gk(),s=this.Tk(),i=i/2,r=s/2,e=(e&&t.hb(this.Xj()),t.I2(i,r,t.n2(s),i,r,0,s));t.fb(e)}M4t(){return this.ZGt}b4t(){return this.QGt}gk(){return this.JGt}Tk(){return this.KGt}VD(){return this.tPt}HD(){return this.ePt}BY(){return this.kGt.length}tLt(){return"undefined"!=typeof OffscreenCanvas&&this.$4t()instanceof OffscreenCanvas&&("Chromium"!==C33.di.Ti||124<=C33.di.gi)}async nq(e,i=!1){if(e<1)throw new Error("invalid HTML layer count");if(this.kGt.length!==e){i={count:e,immediate:i,marginLeft:this.tPt,marginTop:this.ePt,styleWidth:this.JGt,styleHeight:this.KGt};let t;if(t=this.w4()?await this.i3.Ax("canvas","set-html-layer-count",i):self.c3_runtimeInterface._OnSetHTMLLayerCount(i),e<this.kGt.length)this.kGt.length=e;else for(var s of t.addedCanvases){s.width=this.ZGt,s.height=this.QGt;var r=this.tLt()?"bitmaprenderer":"2d",h=s.getContext(r);if(!h)throw new Error(`failed to acquire '${r}' canvas context`);this.kGt.push({canvas:s,i4t:h})}this.i3.Ex()}}ez(t){var e;t>=this.kGt.length||(e=this.$4t(),t=this.kGt[t].i4t,this.tLt()?t.transferFromImageBitmap(e.transferToImageBitmap()):(t.globalCompositeOperation="copy",t.drawImage(e,0,0)))}eX(e){e.depth=this.i3.ZU();var t=this.CPt,i=t.findIndex(t=>t.b_(e));let s;return-1!==i?(s=t[i],t.splice(i,1)):s=this.OS().oO(e),this.pPt.add(s),s}IH(t){if(!this.pPt.has(t))throw new Error("render target not in use");this.pPt.delete(t),this.CPt.push(t)}SPt(){var t={aT:this.i3.L4()};return"low"===this.tX()&&(t.width=this.Uj(),t.height=this.jj()),this.eX(t)}gPt(t){this.IH(t)}*eLt(){for(var t of this.i3.WL().Az())for(var e of t.x5()){e=this.APt.get(e);e&&(yield e)}}Jj(t){if(!this.OS().gO())return null;let e=this.APt.get(t);return e||(e={c7:t,name:t.qc(),iLt:C33.oh(C33.J1.NM,this.VGt),sLt:0,rLt:0,hLt:0},this.APt.set(t,e)),e.iLt}nLt(){var t=this.OS();if(t.gO()&&0===this._Pt){this._Pt=t.rS(),this.IPt=NaN;for(var e of this.eLt())e.sLt=NaN}}aLt(){this.VGt&&this.VGt.gO()&&this.oLt(),this.HGt&&this.HGt.gO()&&this.lLt()}oLt(){if(isNaN(this.IPt)&&(this.IPt=this.yPt.VM(this.TPt,this._Pt),!isNaN(this.IPt))){if(this.i3.hz())for(var t of this.eLt())if(t.sLt=t.iLt.VM(this.TPt,this._Pt),isNaN(t.sLt))return;if(this.yPt.HM(this._Pt),this.EPt=Math.min(this.IPt,1),this.i3.hz()){let i=new Map;for(var e of this.eLt())e.iLt.HM(this._Pt),e.rLt=Math.min(e.sLt,1),i.set(e.c7,e.rLt);for(var s of this.eLt()){var r=s.c7,r=(i.get(r)||0)-r.rD().reduce((t,e)=>t+(i.get(e)||0),0);s.hLt=C33.ph(r,0,1)}var h=this.i3.BL(),h=this.EPt-h.vU().reduce((t,e)=>t+(i.get(e)||0),0);self.C3Debugger.UpdateGPUProfile(C33.ph(h,0,1),this.EPt,[...this.eLt()])}this.TPt=this._Pt,this._Pt=0}}uLt(){return this.yPt}lLt(){if(0!==this._Pt){for(let t=this.TPt;t<this._Pt;++t){var i=this.RPt.get(t);if(i&&!i.AM())return}var t=this.i3.BL(),r=C33.Ba(t.PY()+1,0);let e=0;for(let t=this.TPt;t<this._Pt;++t){var h=this.RPt.get(t);if(h){var n=h.IM();let i=BigInt(0),s=BigInt(0);var a=BigInt(0);for(let t=0,e=Math.min(r.length,n.length/2);t<e;++t){var o=n[2*t],l=n[2*t+1],l=(o!==a&&(i===a||o<i)&&(i=o),l>s&&(s=l),l-o),o=Number(l)/1e9;r[t]+=o}h=s-i,h=Number(h)/1e9;e+=h}}if(this.EPt=C33.ph(e,0,1),this.i3.hz()){var u=t.x5();let i=new Map;for(let t=0,e=Math.min(u.length,r.length-1);t<e;++t){var c=r[t+1];i.set(u[t],c)}var f,d,C=[];let s=new Map;for([f,d]of i){var p=[...f.nD()].reduce((t,e)=>t+(i.get(e)||0),0);s.set(f,p),C.push({name:f.qc(),hLt:C33.ph(d,0,1),rLt:C33.ph(p,0,1)})}t=this.EPt-t.vU().reduce((t,e)=>t+(s.get(e)||0),0);self.C3Debugger.UpdateGPUProfile(C33.ph(t,0,1),this.EPt,C)}for(let t=this.TPt;t<this._Pt;++t)this.RPt.delete(t);this.TPt=this._Pt,this._Pt=0}}cLt(t){this.RPt.set(this.HGt.rS(),t)}ML(){return this.EPt}fLt(t,e,i,s,r,h){return this.MPt=t,this.wPt=e,this.bPt.cl(i,s,r,h),this.GPt||(this.GPt=new Promise(t=>{this.PPt=t})),this.GPt}dLt(){if(this.MPt){let t=this.$4t();var s=this.bPt,r=C33.ph(Math.floor(s.gl()),0,t.width),h=C33.ph(Math.floor(s.Tl()),0,t.height);let e=s.width(),i=(e=0===e?t.width-r:C33.ph(Math.floor(e),0,t.width-r),s.height());i=0===i?t.height-h:C33.ph(Math.floor(i),0,t.height-h),(0!==r||0!==h||e!==t.width||i!==t.height)&&0<e&&0<i&&((s=C33.Ma(e,i)).getContext("2d").drawImage(t,r,h,e,i,0,0,e,i),t=s),C33.wa(t,this.MPt,this.wPt).then(t=>{this.OPt&&URL.revokeObjectURL(this.OPt),this.OPt=URL.createObjectURL(t),this.GPt=null,this.PPt(this.OPt)}),this.MPt="",this.wPt=1}}CLt(){return this.OPt}pLt(t){t?this.LPt++:this.LPt--}mLt(){return 0<this.LPt}vLt(t){let e=this.OS();var i;2===t?(this.BPt=C33.oh(C33.J1.mS,this.OS()),this.BPt.fR("Arial"),this.BPt.dR(16),this.BPt.MR("center"),this.BPt.bR("center"),this.BPt.DR(PERCENTTEXT_WIDTH,PERCENTTEXT_HEIGHT)):0===t?(i=this.i3.SLt())&&i.J8(e).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t)):4===t&&(this.gLt("splash-images/splash-logo.svg").then(t=>{"done"===this.XPt?e.C_(t):this.$Pt.kPt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.TLt("splash-images/splash-poweredby-512.png").then(t=>{"done"===this.XPt?e.C_(t):this.$Pt.WPt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.TLt("splash-images/splash-website-512.png").then(t=>{"done"===this.XPt?e.C_(t):this.$Pt.VPt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async gLt(t){t=new URL(t,this.i3._Lt()).toString();t=await C33.Ta(t),t=await this.i3.ELt(t,2048,2048);return this.OS().aO(t,{cT:"high"})}async TLt(t){t=new URL(t,this.i3._Lt()).toString();t=await C33.Ta(t);return this.OS().aO(t,{cT:"high"})}yLt(){this.i3.h3("runtime","hide-cordova-splash")}ALt(){this.xPt=Date.now(),this.i3.F3().addEventListener("loadingprogress",this.FPt),this.NPt=requestAnimationFrame(()=>this.ILt()),3!==this.i3.RLt()&&this.yLt()}async MLt(){var t=this.OS(),e=(this.DPt=1,this.i3.RLt());4===e&&await this.qPt,this.YPt=null,this.qPt=null,-1!==this.NPt&&(cancelAnimationFrame(this.NPt),this.NPt=-1),this.i3.F3().removeEventListener("loadingprogress",this.FPt),this.FPt=null,this.BPt&&(this.BPt.lh(),this.BPt=null),this.i3.wLt(),t.Kb(),this.$Pt.kPt&&(t.C_(this.$Pt.kPt),this.$Pt.kPt=null),this.$Pt.WPt&&(t.C_(this.$Pt.WPt),this.$Pt.WPt=null),this.$Pt.VPt&&(t.C_(this.$Pt.VPt),this.$Pt.VPt=null),t.Jb(0,0,0,0),t.iS(),this.XPt="done",this.TPt=t.rS(),3===e&&this.yLt()}ILt(){if(-1!==this.NPt){var t=this.OS(),e=(t.Kb(),this.NPt=-1,this.i3.v4().RW()),i=this.i3.RLt();if(3!==i&&(this.Q4t(t),t.Jb(0,0,0,0),t._b(),t.O2(),t.Ab(null)),0===i)this.bLt(e);else if(1===i)this.OLt(e,PROGRESSBAR_WIDTH,0);else if(2===i)this.GLt(e);else if(3===i)C33.Pn();else{if(4!==i)throw new Error("invalid loader style");this.PLt(e)}t.iS(),this.NPt=requestAnimationFrame(()=>this.ILt())}}GLt(t){t?this.BPt.RR(1,0,0):this.BPt.RR(.6,.6,.6),this.BPt.n3(Math.round(100*this.DPt)+"%");var t=this.JGt/2,e=this.KGt/2,i=PERCENTTEXT_WIDTH/2,s=PERCENTTEXT_HEIGHT/2,t=(tempQuad.hu(t-i,e-s,t+i,e+s),this.OS());t.Ab(this.BPt.T_()),t.Mv(tempQuad,this.BPt.CM())}OLt(t,e,i){var s=this.OS(),r=PROGRESSBAR_HEIGHT,t=(s.F2(),t?s.gb(1,0,0,1):s.gb(.118,.565,1,1),this.JGt/2),h=this.KGt/2,n=e/2,a=r/2;tempRect.cl(t-n,h-a+i,Math.floor(e*this.DPt),r),s.Rect(tempRect),tempRect.cl(t-n,h-a+i,e,r),tempRect.offset(-.5,-.5),tempRect.Pl(.5,.5),s.gb(0,0,0,1),s.Pv(tempRect),tempRect.Pl(1,1),s.gb(1,1,1,1),s.Pv(tempRect)}bLt(t){var e,i,s,r,h,n=this.OS(),a=this.i3.SLt();(a=a&&a.T_())?(e=a.tp(),h=a.cp(),i=this.JGt/2,s=this.KGt/2,r=e/2,h=h/2,tempQuad.hu(i-r,s-h,i+r,s+h),n.Ab(a),n.Jl(tempQuad),this.OLt(t,e,16+h)):this.OLt(t,PROGRESSBAR_WIDTH,0)}PLt(t){var e=this.OS(),i=this.$Pt.kPt,s=this.$Pt.WPt,r=this.$Pt.VPt,h=Date.now(),n=(0===this.HPt&&(this.xPt=h),this.i3.LLt()||this.i3.xLt()&&!this.i3.NLt()),a=n?0:SPLASH_AFTER_FADEOUT_WAIT_TIME,o=n?0:SPLASH_MIN_DISPLAY_TIME;let l=1;"fade-in"===this.XPt?l=Math.min((h-this.xPt)/SPLASH_FADE_DURATION,1):"fade-out"===this.XPt&&(l=Math.max(1-(h-this.jPt)/SPLASH_FADE_DURATION,0)),e.F2(),e.gb(.231*l,.251*l,.271*l,l),tempRect.set(0,0,this.JGt,this.KGt),e.Rect(tempRect);var u=Math.ceil(this.JGt),c=Math.ceil(this.KGt);let f,d;256<this.KGt?(e.gb(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),tempRect.cl(0,.8*c-d/2,f,d),e.Rect(tempRect),t?e.gb(l,0,0,l):e.gb(.161*l,.953*l,.816*l,l),f=u*this.DPt,tempRect.cl(.5*u-f/2,.8*c-d/2,f,d),e.Rect(tempRect),e.gb(l,l,l,l),e.O2(),s&&(f=1.5*C33.ph(.22*c,105,.6*u),d=f/8,tempRect.cl(.5*u-f/2,.2*c-d/2,f,d),e.Ab(s),e.Rect(tempRect)),i&&(f=Math.min(.395*c,.95*u),d=f,tempRect.cl(.5*u-f/2,.485*c-d/2,f,d),e.Ab(i),e.Rect(tempRect)),r&&(f=1.5*C33.ph(.22*c,105,.6*u),d=f/8,tempRect.cl(.5*u-f/2,.868*c-d/2,f,d),e.Ab(r),e.Rect(tempRect))):(e.gb(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),tempRect.cl(0,.85*c-d/2,f,d),e.Rect(tempRect),t?e.gb(l,0,0,l):e.gb(.161*l,.953*l,.816*l,l),f=u*this.DPt,tempRect.cl(.5*u-f/2,.85*c-d/2,f,d),e.Rect(tempRect),e.gb(l,l,l,l),e.O2(),i&&(f=.55*c,d=f,tempRect.cl(.5*u-f/2,.45*c-d/2,f,d),e.Ab(i),e.Rect(tempRect))),this.HPt++,"fade-in"===this.XPt&&h-this.xPt>=SPLASH_FADE_DURATION&&2<=this.HPt&&(this.XPt="wait",this.UPt=h),"wait"===this.XPt&&h-this.UPt>=o&&1<=this.DPt&&(this.XPt="fade-out",this.jPt=h),("fade-out"===this.XPt&&h-this.jPt>=SPLASH_FADE_DURATION+a||n&&1<=this.DPt&&h-this.xPt<500)&&this.YPt()}}}{let C33=self.We,C3Debugger=self.C3Debugger,assert=self.assert,DEFAULT_RUNTIME_OPTS={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""},ife=!0;C33.DLt=class C3Runtime extends C33.nh{constructor(t){t=Object.assign({},DEFAULT_RUNTIME_OPTS,t),super(),this.FLt=t.messagePort,this.BLt=t.runtimeBaseUrl,this.$Lt=t.previewUrl,this.kLt=!!t.headless,this.WLt=!!t.hasDom,this.VLt=!!t.isInWorker,ife=t.ife,this.HLt=!!t.useAudio,this.ULt=t.exportType,this.R9=!!t.isiOSCordova,this.jLt=!!t.isiOSWebView,this.XLt=!!t.isWindowsWebView2,this.YLt=!!t.isAnyWebView2Wrapper,this.qLt=!!t.isFBInstantAvailable,this.zLt=!("preview"!==this.ULt||!t.isDebug),this.JLt=this.zLt,this.KLt=this.zLt,this.ZLt=0,this.QLt=[],this.txt=[],this.ixt=!1,this.sxt="",this.rxt="",this.hxt="",this.nxt="",this.axt=0,this.oxt=0,this.VG=self.devicePixelRatio,this.lxt=0,this.uxt=0,this.cxt=0,this.fxt=0,this.dxt=0,this.Cxt=!1,this.b1=!0,this.pxt=!1,this.mxt=!1,this.vxt=!1,this.Sxt=null,this.VW=C33.oh(C33.E9,this,t),this.WX=C33.oh(C33.oz,this),this.h3t=C33.oh(C33.ift,this),this.gxt=C33.oh(C33.gN,this,t.wrapperComponentIds),this.Txt=C33.oh(C33.DOt,this),this.WZ=C33.oh(C33.bz,this),this._xt=C33.oh(C33.Kot,this),this.Ext=C33.oh(C33.Qot,this),this.Clt=C33.oh(C33.olt,this),this.A1=C33.oh(C33.u1,{d1:t=>this.yxt(t),m1:t=>this.Axt(t)}),this.Ixt=new Map,this.Rxt=[],this.Mxt=new Map,this.wxt=new Map,this.bxt=0,this.Oxt=[],this.Gxt=new Set,this.Pxt=[],this.Lxt=[],this.xxt=new Map,this.Nxt=!1,this.Dxt=!1,this.Fxt=0,this.Bxt=0,this.$xt=new Map,this.kxt=new Set,this.Wxt=new Set,this.Vxt=[],this.Hxt=[],this.Uxt=null,this.jxt=!1,this.Xxt="vsync",this.ST="trilinear",this.Yxt=!1,this.qxt=!0,this.zxt=!1,this.Jxt=!1,this.Kxt=null,this.Zxt={Qxt:t=>{this.NPt=-1,this.tNt=-1,this.QJ(t)},eNt:t=>{this.tNt=-1,this.QJ(t,!1,"skip-render")},iNt:()=>{this.NPt=-1,this.lP()}},this.NPt=-1,this.tNt=-1,this.sNt=0,this.rNt=0,this.hNt=!1,this.nNt=!1,this.aNt=!1,this.oNt=!0,this.lNt=!0,this.uNt=!1,this.cNt=0,this.fNt=new C33.f0(1),this.dNt=()=>Math.random(),this.CNt=0,this.pNt=0,this.mNt=0,this.vNt=0,this.SNt=0,this.MRt=1,this.gNt=1/30,this.TNt=0,this._Nt=C33.oh(C33.yf),this.ENt=C33.oh(C33.yf),this.yNt=C33.oh(C33.yf),this.ANt=new Map,this.INt=-1,this.RNt=0,this.MNt=0,this.wNt=-1,this.bNt=0,this.ONt=0,this.GNt=0,this.PNt=!1,this.LNt="",this.xNt="",this.t7=null,this.NNt="",this.DNt=null,this.FNt=null,this.GAt=C33.oh(C33.Event.F3),this.BNt=new Map,this.$Nt=new Map,this.kNt=0,this.WNt=!1,this.VNt=!1,this.HNt=!1,this.UNt=[],this.jNt={pretick:C33.oh(C33.Event,"pretick",!1),tick:C33.oh(C33.Event,"tick",!1),tick2:C33.oh(C33.Event,"tick2",!1),instancedestroy:C33.oh(C33.Event,"instancedestroy",!1),beforelayoutchange:C33.oh(C33.Event,"beforelayoutchange",!1),layoutchange:C33.oh(C33.Event,"layoutchange",!1)},this.jNt.instancedestroy.YB=null,this.gY=C33.oh(C33.Event.F3),this.XNt=null;var e=(t,e)=>C33.IRt.nOt(this,t,e);this.YNt=C33.oh(C33.Pf,e),this.qNt=C33.oh(C33.Pf,e),this.zNt=C33.oh(C33.Pf,e),this.JNt=C33.oh(C33.KNt,this,t.jobScheduler),t.canvas&&(this.Uxt=C33.oh(C33.$Gt,this)),this.FLt.onmessage=t=>this._OnMessageFromDOM(t.data),this.WF("runtime","visibilitychange",t=>this.ZNt(t)),this.WF("runtime","wrapper-extension-message",t=>this.QNt(t)),this.WF("runtime","opus-decode",t=>this.zx(t.arrayBuffer)),this.WF("runtime","get-remote-preview-status-info",()=>this.t5t()),this.WF("runtime","js-invoke-function",t=>this.Gft(t)),this.WF("runtime","go-to-last-error-script",self.goToLastErrorScript),this.WF("runtime","offline-audio-render-completed",t=>this.e5t(t)),this.GAt.addEventListener("window-blur",t=>this.i5t(t)),this.GAt.addEventListener("window-focus",()=>this.s5t()),this.WZ.lJ(),this.Ext.lJ(),this.r5t=null,this.h5t=new WeakMap,this.n5t={keyboard:null,zL:null,JL:null,KL:null,ZL:null},this.a5t=new WeakMap,this.o5t=[]}static W_(t){return C33.oh(C33.DLt,t)}lh(){C33.Dn(this.Rxt),this.Mxt.clear(),this.wxt.clear(),this.WX.lh(),this.WX=null,this.h3t.lh(),this.h3t=null,this.gxt.lh(),this.gxt=null,this.VW.lh(),this.VW=null,this.Txt.lh(),this.Txt=null,this.WZ.lh(),this.WZ=null,this._xt.lh(),this._xt=null,this.Ext.lh(),this.Ext=null,this.Clt.lh(),this.Clt=null,this.A1.lh(),this.A1=null,this.Uxt&&(this.Uxt.lh(),this.Uxt=null),this.GAt.lh(),this.GAt=null,this.l5t=null}["_OnMessageFromDOM"](t){var e=t.type;if("event"===e)this.u5t(t);else{if("result"!==e)throw new Error(`unknown message '${e}'`);this.c5t(t)}}u5t(t){if(this.HNt){let e=t.component,i=t.handler;var r=t.data,h=t.dispatchOpts,n=!(!h||!h.dispatchRuntimeEvent),h=!(!h||!h.dispatchUserScriptEvent);let s=t.responseId;if("runtime"===e)if(n&&((u=new C33.Event(i)).data=r,this.GAt.z3(u)),h){var a,o,l=new C33.Event(i,!0);for([a,o]of Object.entries(r))l[a]=o;this.rz(l)}var u=this.BNt.get(e);if(u){u=u.get(i);if(u){let t=null;try{t=u(r)}catch(t){return console.error(`Exception in '${e}' handler '${i}':`,t),void(null!==s&&this.f5t(s,!1,""+t))}null!==s&&(t&&t.then?t.then(t=>this.f5t(s,!0,t)).catch(t=>{console.error(`Rejection from '${e}' handler '${i}':`,t),this.f5t(s,!1,""+t)}):this.f5t(s,!0,t))}else n||h||console.warn(`[Runtime] No DOM handler '${i}' for component '${e}'`)}else n||h||console.warn(`[Runtime] No DOM event handlers for component '${e}'`)}else this.UNt.push(t)}f5t(t,e,i){this.FLt.postMessage({type:"result",responseId:t,isOk:e,result:i})}c5t(t){var e=t.responseId,i=t.isOk,t=t.result,s=this.$Nt.get(e);i?s.resolve(t):s.reject(t),this.$Nt.delete(e)}WF(t,e,i){let s=this.BNt.get(t);if(s||(s=new Map,this.BNt.set(t,s)),s.has(e))throw new Error(`[Runtime] Component '${t}' already has handler '${e}'`);s.set(e,i)}h3(t,e,i,s){this.FLt.postMessage({type:"event",component:t,handler:e,data:i,responseId:null},s)}Ax(t,e,i,s){let r=this.kNt++;var h=new Promise((t,e)=>{this.$Nt.set(r,{resolve:t,reject:e})});return this.FLt.postMessage({type:"event",component:t,handler:e,data:i,responseId:r},s),h}Uk(t,e,i,s=-1){this.h3("runtime","send-wrapper-extension-message",{componentId:t,messageId:e,params:i,asyncId:s})}jk(t,e,i){let s=this.kNt++;var r=new Promise((t,e)=>{this.$Nt.set(s,{resolve:t,reject:e})});return this.Uk(t,e,i,s),r}QNt(t){var e;-1!==t.asyncId?(e=t.asyncId,this.$Nt.get(e).resolve(t.params),this.$Nt.delete(e)):this.u5t({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}r7(t,e,i){this.WF("wrapper-extension:"+t,e,i)}i7(t){return this.gxt.i7(t)}d5t(t){if(!this.hz())throw new Error("not in debug mode");this.h3("runtime","post-to-debugger",t)}async ORt(t){C33.VSt(this),this.hz()?await C3Debugger.ORt(this):self.C3Debugger&&self.C3Debugger.InitPreview(this);var e,i,[s]=await Promise.all([this.VW.ga("data.json"),this.C5t(),this.JNt.ORt()]);await this.p5t(s),await this.m5t(t),this.LLt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.J4t()?(s=this.J4t(),console.info(`[C3 runtime] Hosted in ${this.w4()?"worker":"DOM"}, rendering with WebGL ${s.RT()} [${s.wO()}]`)):this.K4t()&&console.info(`[C3 runtime] Hosted in ${this.w4()?"worker":"DOM"}, rendering with WebGPU [${this.K4t().GetAdapterInfoString()}]`),this.OS().lS()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.HNt=!0;for(e of this.UNt)this.u5t(e);C33.Dn(this.UNt),this.Uxt&&this.Uxt.ALt();for(i of t.runOnStartupFunctions)this.QLt.push(this.v5t(i));if(await Promise.all([this.VW.AW(),...this.QLt]),C33.Dn(this.QLt),!this.VW.RW())return this.Uxt&&await this.Uxt.MLt(),await this.GAt.Y3(new C33.Event("beforeruntimestart")),await this.Kb(),this.FLt.postMessage({type:"runtime-ready"}),this;this.Uxt&&this.Uxt.yLt()}async v5t(t){try{await t(this.r5t)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async p5t(t){var t=t.project,e=(this.sxt=t[0],this.rxt=t[16],this.hxt=t[31],this.nxt=t[38],t[39]||"loading-logo.png"),i=(this.Yxt=!!t[9],this.axt=this.cxt=t[10],this.oxt=this.fxt=t[11],this.Txt.EGt(this.axt,this.oxt),this.lxt=this.axt/2,this.uxt=this.oxt/2,this.Xxt=t[37],this.jxt=!!t[40],this.ST=t[14],this.pxt=t[15],this.mxt=t[42],this.vxt=t[17],this.Cxt=!!t[18],this.dxt=t[19],this.Bxt=t[21],this.zxt=t[22],this.VW);if(i.Q9(t[45]),i.GW(t[7],t[25]),i.eW(t[8]),i.iW(t[32]),i.rW(t[28]),i.wW(t[29]),0===this.dxt){let t="";(t="flat"===i.Ux()?i.hW()+e:e)&&(this.Sxt=i.vW({url:t}))}this.Uxt&&(this.Uxt.W4t(C33.$Gt.X4t(t[12])),this.Uxt.U4t(t[23]?"high":"low"),this.Uxt.nS(0!==t[24]),this.Uxt.zPt(t[34]),this.Uxt.Y4t(t[41]),this.Uxt.JPt(t[13]),this.Uxt.KPt(t[30]),this.Uxt.t4t(t[46],t[47]),this.Uxt.QPt(t[26]),this.Uxt.e4t(t[48]));var s,r,h,n,a,o,l,e=t[43],i=(e&&await this.S5t(e),this.g5t(),this.gxt.Syt(),this.Vxt=self.T5t(),t[2]);for(s of i[1])this.gxt.gyt(s);for(r of i[0])this.gxt.vyt(r);this.Vxt=self.T5t(),this._5t(),this.gxt.yyt();for(h of t[3]){var u=C33.rlt.W_(this,this.Rxt.length,h);this.Rxt.push(u),this.Mxt.set(u.qc().toLowerCase(),u),this.wxt.set(u.SU(),u)}for(n of t[4])this.Rxt[n[0]].pIt(n);for(a of t[27]){var c=a.map(t=>this.Rxt[t]);this.Oxt.push(C33.oh(C33.CRt,this,c))}this.E5t();for(o of this.Rxt)o.vIt();for(l of t[5])this.WX.W_(l);var f,d,C,p,m,e=t[1];e&&(i=this.WX.gz(e))&&this.WX.vz(i);for(f of t[35])this._xt.W_(f);for(d of t[33])this.WZ.W_(d);for(C of t[44])this.Ext.W_(C);this.Ext.ilt()||(this.Ext.lh(),this.Ext=null);for(p of t[49])this.Clt.W_(p);this.Clt.flt()||(this.Clt.lh(),this.Clt=null);for(m of t[6])this.h3t.W_(m);this.h3t.xft(),this.y5t(),C33.Dn(this.Vxt),this.p5();let v="any";e=t[20];1===e?v="portrait":2===e&&(v="landscape"),this.h3("runtime","set-target-orientation",{targetOrientation:v})}async S5t(t){var e=t.format;"image-sequence"===e?this.Kxt=new self.C3ExportToImageSequence(this,t):"image-sequence-gif"===e?this.Kxt=new self.C3ExportToGIF(this,t):"webm"===e?this.Kxt=new self.C3ExportToWebMVideo(this,t):"mp4"===e&&(this.Kxt=new self.C3ExportToMP4Video(this,t)),this.Xxt="unlimited-frame",this.Uxt.W4t("off"),this.VG=1,self.devicePixelRatio=1,await this.Ax("runtime","set-exporting-to-video",{message:this.Kxt.GetExportingMessageForPercent(0),duration:this.Kxt._$()})}RLt(){return this.dxt}E4t(){return null!==this.Kxt}A5t(){return this.Kxt._$()}I5t(){return this.Kxt.GetFramerate()}R5t(){return this.Kxt.ORt({width:this.Uxt.M4t(),height:this.Uxt.b4t()})}M5t(){var t=this.sNt/this.I5t();return this.Kxt.AddFrame(this.Uxt.$4t(),t)}w5t(){this.Kxt&&this.Kxt.Qet()}e5t(t){this.Kxt.OnOfflineAudioRenderCompleted(t)}b5t(){return this.Kxt.iS()}xLt(){return this.qLt}N1(){return this.b1}wx(t){this.QLt.push(t)}oq(t){this.ixt=!!t}O5t(t){this.ixt&&this.txt.push(t)}pq(){return this.txt}oIt(){return this.bxt++}gIt(){return this.bxt}pOt(t){this.Gxt.add(t)}mOt(t){this.Gxt.delete(t)}_4t(){return this.Gxt}async m5t(t){this.Uxt&&(await this.Uxt.Ma(t),this.Uxt.vLt(this.dxt))}async C5t(){var e=this.VW;if(!e.Gx("audio/webm; codecs=opus")){let t=null;var i=e.tW(),s=i+"opus.wasm.js",i=i+"opus.wasm.wasm";try{t=this.G5t()&&e.nW()?await e.lW(i):await e._a(i)}catch(t){return void console.info("Failed to fetch Opus decoder WASM; assuming project has no Opus audio.",t)}this.P5t(t,"opus-decoder-wasm"),await this.L5t([s])}}async zx(t){return await this.x5t("OpusDecode",{arrayBuffer:t},[t])}async Kb(){this.hNt=!0,this.CNt=Date.now();let e=null,t=new Promise(t=>e=t);if(this.Cxt){for(var i of this.Rxt)i.uU()||i.wIt()||!i.AN()||i.m_t();(async()=>{await this.VW.AW(),await t,this.b1=!1,this.N5t()})()}else this.b1=!1;this.VW.IW(),this.hz()&&C3Debugger.RuntimeInit(ife);for(var s of this.WX.UL())s.xq();this.E4t()&&await this.R5t();var r=this.WX.Sz(),r=(await r.XY(null,this.OS()),await r.iq(!0),this.RNt=performance.now(),e(),this.Cxt||this.N5t(),await this.Ax("runtime","before-start-ticking"));r.isSuspended&&!this.E4t()?(this.cNt++,this.uNt=!0):this.QJ()}N5t(){this.FF(C33.Mq.Rq.Iq.D5t,null,null),this.h3("runtime","register-sw")}B1t(t){t=Math.floor(t);var e=this.Vxt;if(t<0||t>=e.length)throw new Error("invalid object reference");return e[t]}_5t(){for(var t of self.F5t){t=C33.first(Object.keys(t));this.Hxt.push(t)}}r0t(t){t=Math.floor(t);var e=this.Hxt;if(t<0||t>=e.length)throw new Error("invalid prop reference");return e[t]}B5t(){return this.WLt}$5t(){return this.kLt}w4(){return this.VLt}_Lt(){return this.BLt}k5t(){return this.$Lt}U4(){return this.h3t}sL(){return this.h3t.sL()}qft(){return this.h3t.qft()}J4(){return this.h3t.J4()}zft(){return this.h3t.zft()}ESt(){return 0===this.qft().A3t()}Kft(){return this.h3t.Kft()}rOt(){return this.gxt}Nmt(){return this.gxt.Nmt()}kH(t){if((t=Math.floor(t))<0||t>=this.Rxt.length)throw new RangeError("invalid index");return this.Rxt[t]}W5t(t){return this.Mxt.get(t.toLowerCase())||null}gq(t){return this.wxt.get(t)||null}prt(t){t=C33.gN.BN(t);return t?t.VN():null}lU(){return this.Rxt}*V5t(){for(var t of this.Rxt)t.uU()||(yield*t.instances())}F3(){return this.GAt}B4(){return this.gY}rz(t){t.runtime=this.TN();var e=this.hz()&&!this.h3t.d5();e&&C3Debugger.StartMeasuringScriptTime(),this.gY.dispatchEvent(t),e&&C3Debugger.AddScriptTime()}Eq(t){return t.runtime=this.TN(),this.gY.Y3(t)}O4(){return this.axt}P4(){return this.oxt}H5t(t,e){this.axt===t&&this.oxt===e||(this.axt=t,this.oxt=e,(t=this.WL()).Mz(),t.wz())}VU(){return this.cxt}HU(){return this.fxt}F4t(t,e){this.cxt===t&&this.fxt===e||(this.cxt=t,this.fxt=e,(t=this.WL()).Mz(),t.wz())}y4t(t){this.E4t()||(this.VG=t)}_U(){return this.VG}Fj(){return this.lxt}Bj(){return this.uxt}K6(){return this.Uxt}Uj(){return this.Uxt?this.Uxt.Uj():this.cxt}jj(){return this.Uxt?this.Uxt.jj():this.fxt}KD(){return this.Uxt?this.Uxt.KD():1}_k(){return this.Uxt?this.Uxt._k():1}IX(){return this.Uxt?this.Uxt.IX():1}yX(){return this.Uxt?this.Uxt.yX():1}VD(){return this.Uxt?this.Uxt.VD():0}HD(){return this.Uxt?this.Uxt.HD():0}U5t(){return this.Uxt?this.Uxt.gk():0}j5t(){return this.Uxt?this.Uxt.Tk():0}vk(){return this.Uxt?this.Uxt.vk():"off"}eX(t){return this.Uxt?this.Uxt.eX(t):null}IH(t){this.Uxt&&this.Uxt.IH(t)}Qj(){return this.pxt}v4t(){return this.mxt}S4t(){return this.vxt}ML(){return this.Uxt?this.Uxt.ML():NaN}E_(){return"nearest"!==this.L4()}bL(){return this.Xxt}OL(t){this.Xxt!==t&&(this.Xxt=t,-1!==this.NPt||-1!==this.tNt)&&(this.X5t(),this.Y5t())}L4(){return this.ST}fIt(){return this.Cxt}SLt(){return this.Sxt}wLt(){this.Sxt&&(this.Sxt.rR(),this.Sxt.lh(),this.Sxt=null)}WL(){return this.WX}BL(){return this.WX.BL()}IQ(){return this.WZ}q5t(){return this._xt}nMt(){return this.Ext}Nlt(){return this.Clt}v4(){return this.VW}vW(t){return this.VW.vW(t)}l5(t,e,i,s,r,h){if(h&&this.Ext){if(t instanceof C33.rlt&&t.uU())return a=t._pt(),n=Math.floor(this.FL()*a.length),this.l5(a[n],e,i,s,r,h);var n,a=this.Ext.slt(t,h);if(a)return n=this.zH(a,e,!1,i,s,!1,r,void 0,r),this.Ext.hlt(n,h),n}return this.zH(t,e,!1,i,s,!1,r,void 0,r)}zH(t,e,i,s,r,h,n,a,o){let l=null,u=null;t instanceof C33.rlt?((u=t).uU()&&(c=u._pt(),C=Math.floor(this.FL()*c.length),u=c[C]),l=u.VH()):(l=t,u=this.kH(l[1]));var c=u.YN().AN();if(this.b1&&c&&!u.wIt())return null;var f=e;c||(e=null);let d;d=i&&!h&&l&&!this.$xt.has(l[2])?l[2]:this.Bxt++;var C=l?l[0]:null,p=C33.oh(C33.Instance,{runtime:this,QD:u,c7:e,bRt:C,LRt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.$xt.set(d,p);let m=null,v=(c&&(m=p.Cx(),void 0!==s&&void 0!==r&&(m.og(s),m.fg(r)),u.iRt(!0)),e&&(o||e.KH(p,!0),e.VL().qY(u)),this.Fxt++,!0);if(a&&(t=a.tF()).fF()&&u.fF()&&u.UY()===t.UY()&&(v=!1),u.fF()&&!i&&!h&&v){var S,g,T,_=new Set;for(S of u.UY().Gq())S!==u&&((g=this.z5t(S,m,_))?(g=this.zH(g,f,!1,m?m.ag():s,m?m.ug():r,!0,!1,void 0,o),p.Pq(g)):(g=this.zH(S,f,!1,m?m.ag():s,m?m.ug():r,!0,!1,void 0,o),p.Pq(g)));for(T of p.dF()){T.Pq(p);for(var E of p.dF())T!==E&&T.Pq(E)}}if(c&&!i&&n&&this.J5t(p,C,m,e,s,r,o),u.fF()&&!i&&!h&&n)for(var y of p.dF()){var A,I,R=y.Cx();R&&(A=y.YN(),I=y.tF().VH()[0],A.AN()?this.J5t(y,I,R,e,R.ag(),R.ug(),o):this.J5t(y,I,R,e,void 0,void 0,o))}!h&&n&&(void 0===s&&(s=C[0]),void 0===r&&(r=C[1]),a=m.H7(),t=s-m.ag()+a.ag(),i=r-m.ug()+a.ug(),a.d7(t,i)),u.KIt();h=l?C33.qn(l[5]):null,n=l?l[4].map(t=>C33.qn(t)):null,a=c&&C&&C[13];return a&&p.$Rt(),p.RIt(h,n),a&&(t=C[13],p.NB().L_t(t[2],t[0],t[1])),this.Lxt.push(p),this.Nxt=!0,this.hz()&&C3Debugger.InstanceCreated(p),p}ewt(t){var e=t[0],i=t[1],s=t[2],t=t[6];return t||this.WX.Tz(e).mx(i).jH(s)}z5t(t,e,i){var s;for(s of e?.hMt()??[]){var r=this.ewt(s),h=!!s[4],n=this.kH(r[1]);if(!i.has(r)&&(t===n&&h))return i.add(r),r}}J5t(e,t,i,s,r,h,n){var a=i.Ebt(),i=i.hMt();if(e.Cx().ybt(a),i){void 0===r&&(r=t[0]),void 0===h&&(h=t[1]);var o,l=new Set,u=t[0],c=t[1];for(o of i){var f=o[0],d=o[1],C=o[2],p=o[3],m=!!o[4],v=o[5],S=o[6];let t;t=S||this.WX.Tz(f).mx(d).jH(C);var S=this.kH(t[1]),f=e.aMt(S),d=l.has(S);f&&!d&&m?((C=e.oMt(S)).Cx().ORt(t[0]),f=r+t[0][0]-u,d=h+t[0][1]-c,C.Cx().d7(f,d),C.Cx().ybt(v),e.K7(C,{iB:!!(p>>0&1),rB:!!(p>>1&1),nB:!!(p>>2&1),oB:!!(p>>3&1),uB:!!(p>>4&1),SB:!!(p>>5&1),fB:!!(p>>6&1),CB:!!(p>>7&1),mB:!!(p>>8&1)}),l.add(S)):(m=r+t[0][0]-u,f=h+t[0][1]-c,(d=this.zH(t,s,!1,m,f,!1,!0,e,n)).Cx().ybt(v),e.K7(d,{iB:!!(p>>0&1),rB:!!(p>>1&1),nB:!!(p>>2&1),oB:!!(p>>3&1),uB:!!(p>>4&1),SB:!!(p>>5&1),fB:!!(p>>6&1),CB:!!(p>>7&1),mB:!!(p>>8&1)}))}}}aF(e){if(!this.kxt.has(e)){var i,s=e.tF();let t=this.xxt.get(s);if(t){if(t.has(e))return;t.add(e)}else(t=new Set).add(e),this.xxt.set(s,t);if(this.hz()&&C3Debugger.InstanceDestroyed(e),e.WRt(),this.Nxt=!0,e.fF())for(var r of e.dF())this.aF(r);for(i of e.children())i.gB()&&this.aF(i);this.WX.C5()||this.PNt||((s=this.U4()).c5(!0),e.SMt(),s.c5(!1)),e.gMt(this.WX.C5())}}p5(){this.Nxt&&(this.Dxt=!0,this.K5t(),this.Z5t(),this.Dxt=!1,this.Nxt=!1,this.Ex())}K5t(){for(var t of this.Lxt){var e,i=t.tF();i.KH(t);for(e of i.c0t())e.KH(t),e.KIt()}C33.Dn(this.Lxt)}Z5t(){this.GAt.O3(!0);for(var[t,e]of this.xxt.entries())this.Q5t(t,e),e.clear();this.xxt.clear(),this.GAt.O3(!1)}Q5t(t,e){for(var i of e){var s=this.jNt.instancedestroy,s=(s.YB=i,this.GAt.dispatchEvent(s),this.$xt.delete(i.CF()),this.ANt.delete(i),i.Cx());s&&(s.Rbt(),s.eU(),s.WRt()),this.kxt.add(i),this.Fxt--}C33.jn(t.r5(),e),t.KIt(),this.Wxt.add(t);for(var r of t.c0t())C33.jn(r.r5(),e),r.KIt(),this.Wxt.add(r);var h;if(t.YN().AN())for(h of new Set([...e].map(t=>t.Cx().mx())))h.Cj(e)}QIt(){return this.Lxt}*RSt(t){for(var e of this.QIt())t.uU()?e.tF().NSt(t)&&(yield e):e.tF()===t&&(yield e)}IIt(){return this.Bxt++}MIt(t,e){this.$xt.set(t,e)}zk(t){this.lNt!==(t=!!t)&&(this.lNt=!!t,this.lNt)&&this.uNt&&(this.Zk(!1),this.uNt=!1)}Jk(){return this.lNt}eq(){this.GAt.dispatchEvent(C33.oh(C33.Event,"renderercontextlost")),this.Zk(!0);for(var t of this.Rxt)!t.uU()&&t.bIt()&&t.QY();var e=this.BL();e&&e.eq(),C33.Ryt.tV(),C33.gW.tV()}async z4t(){await this.BL().XY(null,this.OS()),this.GAt.dispatchEvent(C33.oh(C33.Event,"renderercontextrestored")),this.Zk(!1),this.Ex()}ZNt(t){!this.lNt||(t=t.hidden,this.Zk(t),this.uNt=t)||this.Ex()}i5t(t){!this.LLt()||!this.zxt||C33.di.yi||t.data.parentHasFocus||(this.Zk(!0),this.Jxt=!0)}s5t(){this.Jxt&&(this.Zk(!1),this.Jxt=!1)}Y5t(){var t=this.Zxt;"vsync"===this.Xxt?-1===this.NPt&&(this.NPt=self.requestAnimationFrame(t.Qxt)):"unlimited-tick"===this.Xxt?(-1===this.tNt&&(this.tNt=C33.aa(t.eNt)),-1===this.NPt&&(this.NPt=self.requestAnimationFrame(t.iNt))):-1===this.tNt&&(this.tNt=C33.aa(t.Qxt))}X5t(){-1!==this.NPt&&(self.cancelAnimationFrame(this.NPt),this.NPt=-1),-1!==this.tNt&&(C33.oa(this.tNt),this.tNt=-1)}uL(){return 0<this.cNt}Zk(t){var e;this.E4t()||(e=this.uL(),this.cNt+=t?1:-1,this.cNt<0&&(this.cNt=0),t=this.uL(),!e&&t?(console.log("[Construct] Suspending"),this.X5t(),this.GAt.dispatchEvent(C33.oh(C33.Event,"suspend")),this.FF(C33.Mq.Rq.Iq.tDt,null,null)):e&&!t&&(console.log("[Construct] Resuming"),e=performance.now(),this.pNt=e,this.RNt=e,this.INt=0,this.MNt=0,this.wNt=0,this.bNt=0,this.GNt=0,this.ONt=0,this.GAt.dispatchEvent(C33.oh(C33.Event,"resume")),this.FF(C33.Mq.Rq.Iq.eDt,null,null),this.F0t()||this.QJ(e)))}Dk(t){this.YNt.ac(t)}kk(t){this.qNt.ac(t)}Bk(t){this.zNt.ac(t)}Fk(t){this.YNt._f(t)}Wk(t){this.qNt._f(t)}$k(t){this.zNt._f(t)}iDt(){var t,e=globalThis.Pk;this.YNt.u0(!0);for(t of this.YNt)t instanceof e?t.YF():t.QJ();this.YNt.u0(!1)}sDt(){var t,e=globalThis.Pk;this.qNt.u0(!0);for(t of this.qNt)t instanceof e?t.Hk():t.nyt();this.qNt.u0(!1)}rDt(){var t,e=globalThis.Pk;this.zNt.u0(!0);for(t of this.zNt)t instanceof e?t.JF():t.tEt();this.zNt.u0(!1)}*hDt(){var e,i=globalThis.Pk;this.YNt.u0(!0);for(e of this.YNt){let t;t=e instanceof i?e.YF():e.QJ(),C33.Fa(t)&&(yield*t)}this.YNt.u0(!1)}*nDt(){var e,i=globalThis.Pk;this.qNt.u0(!0);for(e of this.qNt){let t;t=e instanceof i?e.Hk():e.nyt(),C33.Fa(t)&&(yield*t)}this.qNt.u0(!1)}*aDt(){var e,i=globalThis.Pk;this.zNt.u0(!0);for(e of this.zNt){let t;t=e instanceof i?e.JF():e.tEt(),C33.Fa(t)&&(yield*t)}this.zNt.u0(!1)}async QJ(e,i,s){this.aNt=!0;var r="background-wake"===s,s="background-wake"!==s&&"skip-render"!==s,h=this.WL(),n=this.K6();if(this.hNt&&(!this.uL()||i||r)){var i=performance.now(),e=(this.nNt=!0,this.oDt(e||0),this.wNt++,this.lDt(),this.uDt()),e=(this.ySt()&&await e,this.GAt.q3(this.jNt.pretick)),e=(e instanceof Promise&&await e,this.cDt()),e=(this.ySt()&&await e,this.fDt()&&await this.dDt(),h.XL()&&await this.CDt(),this.pDt()),e=(this.ySt()&&await e,h.BL()),h=e.$Y();let t=!1;-1!==h&&(e.kY(),n.BY()!==h)&&(e=this.K6().nq(h),this.w4())&&(t=!0,await e),s&&this.lP(),t&&this.h3("canvas","cleanup-html-layers"),this.E4t()&&(await this.M5t(),this.pL()>=this.A5t())?this.b5t():(this.uL()||r||this.Y5t(),this.sNt++,this.rNt++,this.nNt=!1,this.ONt+=performance.now()-i)}}async uDt(){var t=this.h3t,e=this.hz();this.p5(),t.c5(!0),this.I0t(this.BL()),e&&C3Debugger.StartMeasuringTime(),this.ySt()?await t.rdt():t.Q0t(),e&&C3Debugger.AddEventsTime(),this.R0t(),t.c5(!1),this.p5(),t.c5(!0)}async cDt(){var t=this.hz(),e=this.ySt(),i=this.GAt,s=this.jNt,r=this.XNt;t&&C3Debugger.StartMeasuringTime(),e?await this.mDt(this.hDt()):this.iDt(),e?await this.mDt(this.nDt()):this.sDt(),t&&C3Debugger.AddBehaviorTickTime(),t&&C3Debugger.StartMeasuringTime(),e?await this.vDt(s.tick):i.dispatchEvent(s.tick),t&&C3Debugger.AddPluginTickTime(),this.h3t.c5(!1),this.rz(r.tick)}async pDt(){var t=this.h3t,e=this.GAt,i=this.jNt,s=this.hz(),r=this.ySt();s&&C3Debugger.StartMeasuringTime(),r?await t.M0t(this.WX):t.A0t(this.WX),s&&C3Debugger.AddEventsTime(),this.Txt.zOt(),this.lDt(),this.oNt=!1,t.c5(!0),s&&C3Debugger.StartMeasuringTime(),r?await this.mDt(this.aDt()):this.rDt(),s&&C3Debugger.AddBehaviorTickTime(),s&&C3Debugger.StartMeasuringTime(),r?await this.vDt(i.tick2):e.dispatchEvent(i.tick2),s&&C3Debugger.AddPluginTickTime(),t.c5(!1),r&&await t.B0t()}lDt(){if(0!==this.kxt.size){var t,e,i=this.GAt;i.O3(!0);for(t of this.Wxt)t.Y0t().Nct(this.kxt);this.Wxt.clear(),this.h3t.ndt(this.kxt);for(e of this.kxt)e.lh();this.kxt.clear(),i.O3(!1)}}async CDt(){var t=this.WL();let e=0;for(;t.XL()&&e++<10;)await this.SDt(t.Rz())}oDt(t){let e=0;var i,s,r;this.E4t()?(e=1/this.I5t(),this.mNt=e,this.vNt=e):0!==this.pNt&&(i=Math.max(t-this.pNt,0),.5<(e=i/1e3)&&(e=0),this.mNt=e,this.vNt=C33.ph(e,this.TNt,this.gNt)),this.pNt=t,this.SNt=this.vNt*this.MRt,this._Nt.ac(this.SNt),this.ENt.ac(e*this.MRt),this.yNt.ac(this.vNt);for([s,r]of this.ANt)r.ac(this.vNt*s.gL());this.Uxt&&this.Uxt.aLt(),1e3<=t-this.RNt&&(this.RNt+=1e3,1e3<=t-this.RNt&&(this.RNt=t),this.MNt=this.INt,this.INt=0,this.bNt=this.wNt,this.wNt=0,this.GNt=Math.min(this.ONt/1e3,1),this.ONt=0,this.Uxt&&this.Uxt.nLt(),this.Txt.jOt(),this.hz())&&C3Debugger.Update1sPerfStats()}FRt(t,e){e?this.ANt.has(t)||((e=C33.oh(C33.yf)).wf(this._Nt),this.ANt.set(t,e)):this.ANt.delete(t)}BRt(t){t=this.ANt.get(t);return t?t.ni():this.pL()}async SDt(t){var e=this.GAt,i=this.WL().BL();await i.Dq(),i.tq(t,this.OS()),i===t&&this.h3t.$q(),this.Txt.zOt(),this.lDt(),e.dispatchEvent(this.jNt.beforelayoutchange),C33.P3.K3(!0),await t.XY(i,this.OS()),C33.P3.K3(!1),await t.iq(!1),e.dispatchEvent(this.jNt.layoutchange),this.Ex(),this.oNt=!0,this.p5(),this.w5t()}Ex(){this.qxt=!0}J4t(){return this.Uxt?this.Uxt.J4t():null}K4t(){return this.Uxt?this.Uxt.K4t():null}OS(){return this.Uxt?this.Uxt.OS():null}lP(){var i=this.Uxt;if(i&&!i.q4t()){var s=this.OS(),r=s.gO(),h=r&&s.uS(),r=r&&s._2();if(h&&s.hO(),this.qxt||this.E4t()){var n=this.WX.BL(),a=(this.INt++,s.Kb(),this.hz());a&&C3Debugger.StartMeasuringTime(),this.qxt=!1;let t=null,e=(h&&(t=i.uLt().kM(),s.SO(t)),null);r&&(e=s.StartFrameTiming(2*(1+n.PY())),s.StartMeasuringRenderPassTime(0,1)),this.ZU()&&"low"===i.tX()?s.ob(i.Uj(),i.jj()):s.lb(),this.gDt(this.OS(),n),t&&s.TO(t),r&&(s.StopMeasuringRenderPassTime(),this.Uxt.cLt(e)),s.iS(),a&&(C3Debugger.AddDrawCallsTime(),C3Debugger.UpdateInspectHighlight()),i&&i.dLt()}else s.hS()}}zq(t){return"low"===this.K6().tX()||t.uS()&&(this.Qj()||this.ZU())}gDt(e,i){e.O2(),e.wb(),e.gb(1,1,1,1),e.lO(null),e.Ab(null),e.Qb(this.ZU()),this.zq(e)&&i.Yq(e);var s=i.BY();for(let t=1;t<s;++t)i.Qq(e,t),e._2()&&e.Restart();this.zq(e)||i.Yq(e),i.Zq(e)}FF(t,e,i){if(!this.hNt)return!1;var s=!this.nNt&&!this.h3t.V0t();let r=0;s&&(r=performance.now());var h=this.hz(),t=(h&&this.r8(!1),this.h3t.G0t(this.WX,t,e,i));return s&&(e=performance.now()-r,this.ONt+=e,h)&&C3Debugger.AddTriggersTime(e),h&&this.r8(!0),t}V_t(t,e,i){if(!this.ySt())return this.FF(t,e,i);if(this.F0t())throw new Error("called DebugTrigger() while stopped on breakpoint");if(this.nNt||this.h3t.V0t())return this.h3t.x0t(this.WX,t,e,i);throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead")}async $F(t,e,i){if(!this.ySt())return this.FF(t,e,i);if(!this.hNt)return!1;if(this.F0t())return this.h3t.N0t(t,e,i);if(!this.BL())return this.h3t.P0t(t,e,i);var s=performance.now(),r=this.h3t.x0t(this.WX,t,e,i);let h=r.next();for(;!h.done;)await this.b0t(h.value),h=r.next();return this.uL()||this.h3t.V0t()||(await this.h3t.B0t(),this.aNt&&!this.nNt&&this.Y5t()),this.ONt+=performance.now()-s,h.value}H_t(t,e,i){var s=this.hz(),t=(s&&this.r8(!1),this.h3t.$0t(this.WX,t,e,i));return s&&this.r8(!0),t}U_t(t,e,i){return this.h3t.k0t(this.WX,t,e,i)}j_t(t){return this.fNt.ac(t)}I0t(t){this.Pxt.push(t)}R0t(){if(!this.Pxt.length)throw new Error("layout stack empty");this.Pxt.pop()}lx(){return this.Pxt.length?this.Pxt.at(-1):this.BL()}cL(t){return t&&-1!==t.gL()?this.vNt*t.gL():this.SNt}KJ(){return this.SNt}ZJ(){return this.vNt}dL(){return this.mNt}gL(){return this.MRt}TL(t){(isNaN(t)||t<0)&&(t=0),this.MRt=t}LL(t){this.TNt=Math.max(t,0)}PL(){return this.TNt}DL(t){this.gNt=Math.max(t,0)}NL(){return this.gNt}_L(){return this.MNt}yL(){return this.bNt}IL(){return this.GNt}TDt(){return this.CNt}pL(){return this._Nt.ni()}_Dt(){return this.ENt.ni()}vL(){return this.yNt.ni()}YQ(){return this.sNt}EDt(){return this.rNt}yDt(){return this.Fxt}A4(){return this.sxt}R4(){return this.rxt}ADt(){return this.hxt}IDt(){return this.nxt}hx(t){if(this.PNt)throw new Error("cannot call while loading state - wait until afterload event");return this.$xt.get(t)||null}bq(){this.$xt.clear();for(var t of this.Rxt)if(!t.uU())for(var e of t.r5())this.$xt.set(e.CF(),e)}LLt(){return"preview"===this.ULt}hz(){return this.zLt}oW(){return this.ULt}NLt(){return"cordova"===this.ULt}RDt(){return"Android"===C33.di.Ci&&("cordova"===this.ULt||"playable-ad-single-file"===this.ULt||"playable-ad-zip"===this.ULt||"instant-games"===this.ULt)}G5t(){return this.R9}MDt(){return this.jLt}wDt(){return this.XLt}bDt(){return this.YLt}T4(){return this.Txt}Ayt(){return this.gxt.Ayt()}Iyt(){return this.gxt.Iyt()}ZU(){return this.jxt}ODt(){return this.OS().l2(this.HU())}n2(t){return this.OS().n2(t||this.HU())}GDt(){return this.oNt}PDt(t){this.Yxt!==(t=!!t)&&(this.Yxt=t,this.WL().wz(),this.Ex())}N4(){return this.Yxt}LDt(t){this.Ixt.has(t)||(this.Ixt.set(t,e=()=>this.xDt(t)),t.F3().addEventListener("animationframeimagechange",e));var e=this.A1.v1(t);return e.L1()||e.D1().then(()=>this.Ex()),e}xDt(t){this.A1._1(t)}yxt(t){var e,i=[];for(e of t.WIt())for(var s of e.C$()){var r=s.T$();i.push({source:s,width:r.tp(),height:r.cp(),tag:s.$$()})}return{G1:i}}async Axt(t){var e,s=C33.oh(C33.f0),i=[];let r=new Map;for(e of t.WIt())for(var h of e.C$()){let e=h.T$().Xyt();r.has(e)||(r.set(e,null),i.push(s.ac(async()=>{var t=await e.rV();r.set(e,t)})))}await Promise.all(i);var n,a=[];for(n of t.WIt())for(let i of n.C$())a.push(s.ac(async()=>{var t=i.T$(),e=r.get(t.Xyt()),t=await t.Yyt(e);return{B1:await createImageBitmap(t)}}));var o,t=await Promise.all(a);for(o of r.values())o instanceof ImageBitmap&&o.close&&o.close();return{G1:t}}NDt(t){this.LNt=t}DDt(t){this.xNt=t}STt(t){this.t7=t}FDt(){return this.NNt}fDt(){return!(!this.LNt&&!this.xNt&&null===this.t7)}async dDt(){if(this.LNt&&(this.p5(),await this.BDt(this.LNt),this.$Dt()),this.xNt&&(await this.kDt(this.xNt),this.$Dt(),this.hz())&&C3Debugger.StepIfPausedInDebugger(),null!==this.t7){this.p5();try{await this.WDt(this.t7),this.NNt=this.t7,await this.$F(C33.Mq.Rq.Iq.VDt,null),this.NNt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.$F(C33.Mq.Rq.Iq.HDt,null)}this.$Dt()}}$Dt(){this.LNt="",this.xNt="",this.t7=null}mN(){return this.DNt||(this.DNt=localforage.Di({name:"c3-localstorage-"+this.ADt(),description:this.A4()})),this.DNt}UDt(){return this.FNt||(this.FNt=localforage.Di({name:"c3-savegames-"+this.ADt(),description:this.A4()})),this.FNt}async BDt(t){var e=await this.jDt();try{await this.UDt().setItem(t,e),console.log("[Construct] Saved state to storage ("+e.length+" chars)"),this.NNt=e,await this.$F(C33.Mq.Rq.Iq.XDt,null),this.NNt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.$F(C33.Mq.Rq.Iq.YDt,null)}}async kDt(t){try{var e=await this.UDt().getItem(t);if(!e)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+e.length+" chars)"),await this.WDt(e),this.NNt=e,await this.$F(C33.Mq.Rq.Iq.VDt,null),this.NNt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.$F(C33.Mq.Rq.Iq.HDt,null)}}async jDt(){var t,e,i={c3save:!0,version:1,rt:{time:this.pL(),timeRaw:this._Dt(),walltime:this.vL(),timescale:this.gL(),tickcount:this.YQ(),next_uid:this.Bxt,running_layout:this.BL().SU(),start_time_offset:Date.now()-this.CNt},types:{},layouts:{},events:this.h3t.NX(),timelines:this.WZ.NX(),user_script_data:null};for(t of this.Rxt)t.uU()||t.lRt()||(i.types[t.SU().toString()]=t.NX());for(e of this.WX.UL())i.layouts[e.SU().toString()]=e.NX();var s=this.qDt("save");return s.saveData=null,await this.Eq(s),i.user_script_data=s.saveData,JSON.stringify(i)}mq(){return this.PNt}async WDt(t){var e,i=this.WL(),t=JSON.parse(t);if(t.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!t.c3save)throw new Error("not valid C3 save data");if(1<t.version)throw new Error("C3 save data from future version");this.BSt(),this.GAt.dispatchEvent(C33.oh(C33.Event,"beforeload"));for(e of this.V5t())e.tF().lRt()||e.eJ();var s,r,h=t.rt,n=(this._Nt.Set(h.time),h.hasOwnProperty("timeRaw")&&this.ENt.Set(h.timeRaw),this.yNt.Set(h.walltime),this.MRt=h.timescale,this.sNt=h.tickcount,this.CNt=Date.now()-h.start_time_offset,h.running_layout);let a=!(this.PNt=!0);if(n!==this.BL().SU()){n=i.Tz(n);if(!n)return;await this.SDt(n),a=!0}for([s,r]of Object.entries(t.layouts)){var o=parseInt(s,10),o=i.Tz(o);o&&o.DX(r)}var l,u,c,f,d,C,p,m=new Set;for([l,u]of Object.entries(t.types)){var v=parseInt(l,10),v=this.gq(v);!v||v.uU()||v.lRt()||v.DX(u,m)}for(c of this.WX.UL())for(var S of c.N5())S.FX();if(this.p5(),this.bq(),this.PNt=!1,a){for(var g of this.V5t())g.vq();for(var[T,_]of Object.entries(t.types)){T=parseInt(T,10),T=this.gq(T);!T||T.uU()||T.lRt()||T.fRt(_)}}this.Bxt=h.next_uid,this.h3t.DX(t.events);for(f of this.Rxt)if(!f.uU()&&f.fF())for(var E of f.r5()){var y,A=E.Oq();for(y of f.UY().Gq())if(y!==f){var I=y.r5();if(A<0||A>=I.length)throw new Error("missing sibling instance");E.Pq(I[A])}}this.WZ.DX(t.timelines),i.Mz(),i.wz();for(d of m)d.vMt();this.$St(),this.GAt.dispatchEvent(C33.oh(C33.Event,"afterload")),this.rz(this.qDt("afterload"));for([C,p]of Object.entries(t.types)){var R=parseInt(C,10),R=this.gq(R);R&&R.cRt()}n=this.qDt("load");n.saveData=t.user_script_data,await this.Eq(n),this.Ex()}zDt(t,e){return t.Cx().vbt()-e.Cx().vbt()}sOt(t,e){!t.Cx()||this.a5t.has(t)||(this.a5t.set(t,e),this.o5t.push(t))}BSt(){this.a5t=new WeakMap,C33.Dn(this.o5t)}$St(t="full",e=null){this.o5t.sort(this.zDt);for(var i of this.o5t)i.sJ(this.a5t.get(i),t,e);for(var s of this.o5t)s.EMt(this.a5t.get(s),t,e);this.BSt()}async L5t(t){t=await Promise.all(t.map(async t=>{var e;return this.NLt()&&this.VW.nW()||"playable-ad-single-file"===this.oW()?(e=await this.VW.Ta(t),URL.createObjectURL(e)):new URL(t,location.href).toString()}));this.JNt.JDt(t)}KDt(t,e){this.JNt.ZDt(t,e)}P5t(t,e){this.JNt.QDt(t,e)}x5t(t,e,i,s){return this.JNt.x5t(t,e,i,null,null,s)}tFt(t,e,i,s){return this.JNt.tFt(t,e,i,s)}eFt(){return this.JNt.iFt()}tx(t,e){this.h3("runtime","invoke-download",{url:t,filename:e})}async ELt(t,e,i,s,r,h){return s=s||e,r=r||i,this.w4()?(await this.Ax("runtime","raster-svg-image",{blob:t,imageWidth:e,imageHeight:i,surfaceWidth:s,surfaceHeight:r,imageBitmapOpts:h})).imageBitmap:(t=await self.C3_RasterSvgImageBlob(t,e,i,s,r),h?self.createImageBitmap(t,h):t)}async sFt(t){return this.w4()?this.Ax("runtime","get-svg-image-size",{blob:t}):self.C3_GetSvgImageSize(t)}rFt(){this.WNt||(this.WNt=!0,this.h3("runtime","enable-device-orientation"))}hFt(){this.VNt||(this.VNt=!0,this.h3("runtime","enable-device-motion"))}FL(){return this.dNt()}nFt(t){this.dNt=t}t5t(){var t=this.OS();return{fps:this._L(),tps:this.yL(),cpu:this.IL(),gpu:this.ML(),layout:this.BL()?this.BL().qc():"",renderer:t.uS()?t.wO():t.GetAdapterInfoString()}}F0t(){return!!this.hz()&&C3Debugger.F0t()}b0t(t){return this.ySt()?C3Debugger.b0t(t):Promise.resolve()}l1t(){return!!this.ySt()&&C3Debugger.BreakNext()}aFt(t){this.JLt=!!t,this.oFt()}lFt(){return this.JLt}ySt(){return this.KLt}r8(t){t?this.ZLt--:this.ZLt++,this.oFt()}oFt(){this.KLt=this.hz()&&this.JLt&&0===this.ZLt}MCt(){return this.hz()&&C3Debugger.MCt()}zj(){return this.hz()&&this.OS().gO()&&C3Debugger.zj()}async mDt(t){if(t)for(var e of t)await this.b0t(e)}vDt(t){return this.mDt(this.GAt.J3(t))}Gft(t){return this.h3t.Gft(t.name,t.params)}Rx(t){if(this.w4())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}TN(){return this.r5t}qDt(t){t=C33.oh(C33.Event,t,!1);return t.runtime=this.r5t,t}g5t(){this.r5t=new self.d4(this),this.XNt={tick:this.qDt("tick")}}E5t(){var t,e={};for(t of this.Rxt)e[t.r0t()]={value:t.WN(),enumerable:!0,writable:!1};this.r5t.W4(e)}y5t(){var t,e={};for(t of this.U4().f0t())e[t.r0t()]=t.h0t();this.r5t.V4(e)}qL(){return this.n5t}qN(t,e){this.h5t.set(t,e)}B5(t){return this.h5t.get(t)}dN(t){if(!(t instanceof self.jN))throw new TypeError("expected IObjectClass");t=this.B5(t);if(t&&t instanceof C33.rlt)return t;throw new Error("invalid IObjectClass")}e5(t){if(!(t instanceof self.ZD))throw new TypeError("expected IInstance");t=this.B5(t);if(t&&t instanceof C33.Instance)return t;throw new Error("invalid IInstance")}ux(t){if(!(t instanceof self.OB))throw new TypeError("expected IWorldInstance");t=this.B5(t);if(t&&t instanceof C33.Instance)return t;throw new Error("invalid IInstance")}},self.C3_CreateRuntime=C33.DLt.W_,self.C3_InitRuntime=(t,e)=>t.ORt(e)}{let C33=self.We;C33.KNt=class JobSchedulerRuntime extends C33.nh{constructor(t,e){super(),this.i3=t,this.uFt=new Map,this.cFt=0,this.fFt=e.inputPort,e.outputPort.onmessage=t=>this.dFt(t),this.CFt=e.maxNumWorkers,this.pFt=1,this.mFt=!1,this.vFt=!1}async ORt(){}iFt(){return this.CFt}JDt(t){this.fFt.postMessage({type:"_import_scripts",scripts:t})}ZDt(t,e){this.fFt.postMessage({type:"_send_blob",blob:t,id:e})}QDt(t,e){this.fFt.postMessage({type:"_send_buffer",buffer:t,id:e},[t])}x5t(t,e,i,s,r,h){if(i=i||[],"number"==typeof h&&(h=Math.floor(h))<=0)throw new Error("invalid maxWorkerNum");let n=this.cFt++;t={type:t,isBroadcast:!1,maxWorkerNum:h,jobId:n,params:e,transferables:i},e=new Promise((t,e)=>{this.uFt.set(n,{resolve:t,progress:s,reject:e,SFt:!1,maxWorkerNum:h})});return r&&r.gf(()=>this.gFt(n)),this.fFt.postMessage(t,i),this.TFt(),e}tFt(t,e,i,s){if(i=i||[],"number"==typeof s&&(s=Math.floor(s))<=0)throw new Error("invalid maxWorkerNum");var r=this.cFt++;this.fFt.postMessage({type:t,isBroadcast:!0,maxWorkerNum:s,jobId:r,params:e,transferables:i},i)}gFt(t){var e=this.uFt.get(t);e&&(e.SFt=!0,e.resolve=null,e.progress=null,e.reject=null,this.fFt.postMessage({type:"_cancel",jobId:t}))}dFt(t){var e=t.data,i=e.type,s=e.jobId;switch(i){case"result":this._Ft(s,e.result);break;case"progress":this.EFt(s,e.progress);break;case"error":this.yFt(s,e.error);break;case"ready":this.AFt();break;default:throw new Error(`unknown message from worker '${i}'`)}}_Ft(t,e){var i=this.uFt.get(t);if(!i)throw new Error("invalid job ID");i.SFt||i.resolve(e),this.uFt.delete(t)}EFt(t,e){t=this.uFt.get(t);if(!t)throw new Error("invalid job ID");!t.SFt&&t.progress&&t.progress(e)}yFt(t,e){var i=this.uFt.get(t);if(!i)throw new Error("invalid job ID");i.SFt||i.reject(e),this.uFt.delete(t)}AFt(){this.mFt&&(this.mFt=!1,this.pFt++,this.pFt<this.CFt?this.TFt():this.fFt.postMessage({type:"_no_more_workers"}))}IFt(){let t=0;var e;for(e of[...this.uFt.values()].sort((t,e)=>(t.maxWorkerNum||1/0)-(e.maxWorkerNum||1/0))){var i=e.maxWorkerNum||1/0;t<i&&t++}return t}async TFt(){if(!(this.pFt>=this.CFt||this.mFt||this.vFt||this.IFt()<=this.pFt))try{this.mFt=!0,(await this.i3.Ax("runtime","create-job-worker")).outputPort.onmessage=t=>this.dFt(t)}catch(t){this.vFt=!0,this.mFt=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.pFt} so far)`,t)}}}}self.C3_Shaders={};{let ForEachOrdered_SortInstances2=function(t,e){var t=t[1],e=e[1];return"number"==typeof t&&"number"==typeof e?t-e:(t=""+t)<(e=""+e)?-1:e<t?1:0},C33=(ForEachOrdered_SortInstances=ForEachOrdered_SortInstances2,self.We),cacheRegex=null,lastRegex="",lastFlags="",regexMatches=[],lastMatchesStr="",lastMatchesRegex="",lastMatchesFlags="",forEachStack=C33.oh(C33.eft);C33.Mq.Rq=class SystemPlugin extends C33.YTt{constructor(t){super(t),this.J3t=this.i3.U4().i8(),this.Dct=this.i3.U4().sL(),this.RFt=0,this.MFt=0,this.wFt=new Map}lh(){super.lh()}Ex(){this.i3.Ex()}FF(t){this.i3.FF(t,null,null)}bFt(t,e){return cacheRegex&&t===lastRegex&&e===lastFlags||(cacheRegex=new RegExp(t,e),lastRegex=t,lastFlags=e),cacheRegex.lastIndex=0,cacheRegex}OFt(t,e,i){var s;return t===lastMatchesStr&&e===lastMatchesRegex&&i===lastMatchesFlags||(s=this.bFt(e,i),regexMatches=t.match(s),lastMatchesStr=t,lastMatchesRegex=e,lastMatchesFlags=i),regexMatches}async GFt(t,e){if(e.length){this.RFt+=e.length;var i,s=[];for(i of e)s.push(t.qY(i));await C33.ia(s,()=>{this.MFt++}),this.MFt++,this.MFt===this.RFt&&(this.MFt=0,this.RFt=0,this.i3.FF(C33.Mq.Rq.Iq.PFt,null,null))}}LFt(t,e){for(var i of e)0===i.a5()&&t.ZY(i)}xFt(){return forEachStack}NFt(e){var i=this.i3.U4(),t=i.sL(),s=t.t8(),r=s.J4(),h=r.Qk(),n=s.D3t(),a=t.e8(r),o=i.i8(),l=o.e8();if(l.Q3t(e),n)for(let t=0;t<e&&!l.p8();++t)i.u8(h),l.d8(t),r.c8(s,a),i.f8(h);else for(let t=0;t<e&&!l.p8();++t)l.d8(t),r.c8(s,a);return t.m8(),o.m8(),!1}*DFt(e){var i=this.i3.U4(),t=i.sL(),s=t.t8(),r=s.J4(),h=r.Qk(),n=s.D3t(),a=t.e8(r),o=i.i8(),l=o.e8();if(l.Q3t(e),n)for(let t=0;t<e&&!l.p8();++t)i.u8(h),l.d8(t),yield*r.T1t(s,a),i.f8(h);else for(let t=0;t<e&&!l.p8();++t)l.d8(t),yield*r.T1t(s,a);return t.m8(),o.m8(),!1}FFt(){var e=this.i3.U4(),t=e.sL(),i=t.t8(),s=i.J4(),r=s.Qk(),h=i.D3t(),n=t.e8(s),a=e.i8(),o=a.e8();if(h)for(let t=0;!o.p8();++t)e.u8(r),o.d8(t),s.c8(i,n)||o.V$(),e.f8(r);else for(let t=0;!o.p8();++t)o.d8(t),s.c8(i,n)||o.V$();return t.m8(),a.m8(),!1}*BFt(){var e=this.i3.U4(),t=e.sL(),i=t.t8(),s=i.J4(),r=s.Qk(),h=i.D3t(),n=t.e8(s),a=e.i8(),o=a.e8();if(h)for(let t=0;!o.p8();++t)e.u8(r),o.d8(t),(yield*s.T1t(i,n))||o.V$(),e.f8(r);else for(let t=0;!o.p8();++t)o.d8(t),(yield*s.T1t(i,n))||o.V$();return t.m8(),a.m8(),!1}$Ft(t,e,i){var s=this.i3.U4(),r=s.sL(),h=r.t8(),n=h.J4(),a=n.Qk(),o=h.D3t(),l=r.e8(n),u=s.i8(),c=u.e8();if(c.s8(t),c.Q3t(i),i<e)if(o)for(let t=e;t>=i&&!c.p8();--t)s.u8(a),c.d8(t),n.c8(h,l),s.f8(a);else for(let t=e;t>=i&&!c.p8();--t)c.d8(t),n.c8(h,l);else if(o)for(let t=e;t<=i&&!c.p8();++t)s.u8(a),c.d8(t),n.c8(h,l),s.f8(a);else for(let t=e;t<=i&&!c.p8();++t)c.d8(t),n.c8(h,l);return r.m8(),u.m8(),!1}*kFt(t,e,i){var s=this.i3.U4(),r=s.sL(),h=r.t8(),n=h.J4(),a=n.Qk(),o=h.D3t(),l=r.e8(n),u=s.i8(),c=u.e8();if(c.s8(t),c.Q3t(i),i<e)if(o)for(let t=e;t>=i&&!c.p8();--t)s.u8(a),c.d8(t),yield*n.T1t(h,l),s.f8(a);else for(let t=e;t>=i&&!c.p8();--t)c.d8(t),yield*n.T1t(h,l);else if(o)for(let t=e;t<=i&&!c.p8();++t)s.u8(a),c.d8(t),yield*n.T1t(h,l),s.f8(a);else for(let t=e;t<=i&&!c.p8();++t)c.d8(t),yield*n.T1t(h,l);return r.m8(),u.m8(),!1}WFt(i){var t=i.h5(),e=t.r5();if(0!==e.length){var s=this.i3.U4(),r=s.sL(),h=r.t8(),n=h.J4(),a=n.Qk(),o=h.D3t(),l=r.e8(n),u=s.i8(),c=u.e8(),f=i.fF(),d=forEachStack.e8();if(C33.kn(d,e),c.Q3t(d.length),o)for(let t=0,e=d.length;t<e&&!c.p8();++t){s.u8(a);var C=d[t];i.h5().Jct(C),f&&C.LCt(),c.d8(t),n.c8(h,l),s.f8(a)}else{t.Yct(!1);var p=t.qct();C33.Dn(p),p.push(null);for(let t=0,e=d.length;t<e&&!c.p8();++t){var m=d[t];p[0]=m,f&&m.LCt(),c.d8(t),n.c8(h,l)}}r.m8(),u.m8(),C33.Dn(d),forEachStack.m8()}return!1}*VFt(i){var t=i.h5(),e=t.r5();if(0!==e.length){var s=this.i3.U4(),r=s.sL(),h=r.t8(),n=h.J4(),a=n.Qk(),o=h.D3t(),l=r.e8(n),u=s.i8(),c=u.e8(),f=i.fF(),d=forEachStack.e8();if(C33.kn(d,e),c.Q3t(d.length),o)for(let t=0,e=d.length;t<e&&!c.p8();++t){s.u8(a);var C=d[t];i.h5().Jct(C),f&&C.LCt(),c.d8(t),yield*n.T1t(h,l),s.f8(a)}else{t.Yct(!1);var p=t.qct();C33.Dn(p),p.push(null);for(let t=0,e=d.length;t<e&&!c.p8();++t){var m=d[t];p[0]=m,f&&m.LCt(),c.d8(t),yield*n.T1t(h,l)}}r.m8(),u.m8(),C33.Dn(d),forEachStack.m8()}return!1}HFt(i,t){var e=i.h5(),s=e.r5();if(0!==s.length){var r=this.i3.U4(),h=r.sL(),n=r.zft(),a=h.t8(),o=a.J4(),l=o.Qk(),u=a.D3t(),c=h.e8(o),f=r.i8(),d=f.e8(),C=i.fF(),p=forEachStack.e8();C33.Dn(p),d.Q3t(s.length);for(let t=0,e=s.length;t<e;++t)p.push([s[t],n.Nvt(1,t)]);if(p.sort(ForEachOrdered_SortInstances2),1===t&&p.reverse(),u)for(let t=0,e=p.length;t<e&&!d.p8();++t){r.u8(l);var m=p[t][0];i.h5().Jct(m),C&&m.LCt(),d.d8(t),o.c8(a,c),r.f8(l)}else{e.Yct(!1);var v=e.qct();C33.Dn(v),v.push(null);for(let t=0,e=p.length;t<e&&!d.p8();++t){var S=p[t][0];v[0]=S,C&&S.LCt(),d.d8(t),o.c8(a,c)}}h.m8(),f.m8(),C33.Dn(p),forEachStack.m8()}return!1}*UFt(i,t){var e=i.h5(),s=e.r5();if(0!==s.length){var r=this.i3.U4(),h=r.sL(),n=r.zft(),a=h.t8(),o=a.J4(),l=o.Qk(),u=a.D3t(),c=h.e8(o),f=r.i8(),d=f.e8(),C=i.fF(),p=forEachStack.e8();C33.Dn(p),d.Q3t(s.length);for(let t=0,e=s.length;t<e;++t)p.push([s[t],n.Nvt(1,t)]);if(p.sort(ForEachOrdered_SortInstances2),1===t&&p.reverse(),u)for(let t=0,e=p.length;t<e&&!d.p8();++t){r.u8(l);var m=p[t][0];i.h5().Jct(m),C&&m.LCt(),d.d8(t),yield*o.T1t(a,c),r.f8(l)}else{e.Yct(!1);var v=e.qct();C33.Dn(v),v.push(null);for(let t=0,e=p.length;t<e&&!d.p8();++t){var S=p[t][0];v[0]=S,C&&S.LCt(),d.d8(t),yield*o.T1t(a,c)}}h.m8(),f.m8(),C33.Dn(p),forEachStack.m8()}return!1}jFt(t,e){var i=this.wFt.get(t);if(!i){if(!e)return null;i={XFt:null,YFt:new Map},this.wFt.set(t,i)}return i}qFt(t,e,i,s,r){e.q4().D1t(i,e.Q4()),s&&t.f8(r)}*zFt(t,e,i,s,r){yield*e.q4().F1t(i,e.Q4()),s&&t.f8(r)}}}{let C33=self.We;C33.Mq.Rq.lIt=class SystemType extends C33.nh{constructor(t){super(),this.wct=t,this.i3=t.Dx(),this.P_t=t.YN()}m_t(){}lh(){this.wct=null,this.i3=null,this.P_t=null}}}{let C33=self.We;C33.Mq.Rq.Instance=class SystemInstance extends C33.nh{constructor(t,e){super(),this.wi=t,this.wct=this.wi.tF(),this.B_t=this.wct.fSt(),this.i3=this.wi.Dx()}lh(){this.wi=null,this.wct=null,this.B_t=null,this.i3=null}}}{let C33=self.We,tmpPickArray=[];C33.Mq.Rq.Iq={JFt(){return!0},Aq(){return!0},Fq(){return!0},tDt(){return!0},eDt(){return!0},uL(){return this.i3.uL()},vpt(){var t=this.i3.qft();return!t.G3t()&&!t.b3t()},KFt(){var t=this.i3.zft().Evt();let e=t.get("TriggerOnce_lastTick");void 0===e&&(e=-1,t.set("TriggerOnce_lastTick",-1));var i=this.i3.YQ();return t.set("TriggerOnce_lastTick",i),this.i3.GDt()||e!==i-1},ZFt(t){var e=this.i3.zft().Evt(),i=e.get("Every_lastTime")||0,s=this.i3.pL(),r=(e.has("Every_seconds")||e.set("Every_seconds",t),e.get("Every_seconds"));return i+r<=s?(e.set("Every_lastTime",i+r),s>=e.get("Every_lastTime")+.04&&e.set("Every_lastTime",s),e.set("Every_seconds",t),!0):(s<i-.1&&e.set("Every_lastTime",s),!1)},Ldt(t){t=this.i3.U4().m0t(t);return t&&t.Ldt()},LLt(){return this.i3.LLt()},yi(){return C33.di.yi},D5t(){return!0},QFt(){return!0},t7t(){return!0},XDt(){return!0},YDt(){return!0},VDt(){return!0},HDt(){return!0},e7t(t){return!!this.i3.hx(t)},i7t(t){switch(t){case 0:return"browser"===C33.di._i;case 1:return"iOS"===C33.di.Ci;case 2:return"Android"===C33.di.Ci;case 8:return"cordova"===C33.di._i;case 9:return"scirra-arcade"===this.i3.oW();case 10:return"nwjs"===C33.di._i;case 13:return"windows-uwp"===this.i3.oW();default:return!1}},s7t(t,e,i){return this.bFt(e,i).test(t)},r7t(t,e,i){return C33.compare(t,e,i)},h7t(t,e,i){return e<=t&&t<=i},n7t(t,e,i){return C33.compare(t.Vit(),e,i)},a7t(t){return!!t.Vit()},o7t(t,e){var i,s=this.i3.pL();return 0===t?!(i=this.i3.zft().Evt()).get("CompareTime_executed")&&e<=s&&(i.set("CompareTime_executed",!0),!0):C33.compare(s,t,e)},l7t(t){return isNaN(t)},cgt(t,e,i){return C33.yh(C33.Sh(t),C33.Sh(i))<=C33.Sh(e)},fgt(t,e){return C33.Ih(C33.Sh(t),C33.Sh(e))},dgt(t,e,i){t=C33.Sh(t),e=C33.Sh(e),i=C33.Sh(i);return!C33.Ih(i,e)?!(!C33.Ih(t,e)&&C33.Ih(t,i)):C33.Ih(t,e)&&!C33.Ih(t,i)},u7t(t,e){return"number"==typeof t?0===e:1===e},c7t(t){return!!t},cdt(t){return t.toLowerCase()===this.i3.U4().pdt()},f7t(t,i,s,r){if(!t)return!1;var e=this.xFt(),h=e.e8(),n=t.h5(),a=(C33.kn(h,n.r5()),n.kct()&&C33.Dn(n.zct()),this.i3.zft());let o=0;for(let t=0,e=h.length;t<e;++t){var l=h[t];h[o]=l,i=a.Nvt(1,t),r=a.Nvt(3,t),C33.compare(i,s,r)?++o:n.Xct(l)}C33.Nn(h,o),n.Kct(h);var u=!!h.length;return C33.Dn(h),e.m8(),t.b1t(),u},d7t(t,e){if(!t)return!1;var i=this.xFt(),s=i.e8(),r=t.h5(),h=(C33.kn(s,r.r5()),r.kct()&&C33.Dn(r.zct()),this.i3.zft());let n=0;for(let t=0,e=s.length;t<e;++t){var a=s[t];s[n]=a,h.Nvt(1,t)?++n:r.Xct(a)}C33.Nn(s,n),r.Kct(s);var o=!!s.length;return C33.Dn(s),i.m8(),t.b1t(),o},C7t(t,i,s){if(!t)return!1;var e=t.h5(),r=e.r5();if(0===r.length)return!1;var h=this.i3.zft();let n=null,a=0;for(let t=0,e=r.length;t<e;++t){var o=r[t];s=h.Nvt(2,t),(null===n||0===i&&s<a||1===i&&s>a)&&(a=s,n=o)}return e.i3t(n),t.b1t(),!0},p7t(t,e){var i,s;return!(!t||(s=(i=t.h5()).r5(),(e=Math.floor(e))>=s.length)||(s=s[e],i.i3t(s),t.b1t(),0))},m7t(t){var e,i,s;return!(!t||(s=(e=t.h5()).r5(),(i=Math.floor(this.i3.FL()*s.length))>=s.length)||(s=s[i],e.i3t(s),t.b1t(),0))},v7t(t){return!!t&&!!t.a5()&&(t.h5().Yct(!0),t.b1t(),!0)},S7t(t,i,s){if(!t)return!1;var r=t.h5(),e=r.r5(),h=this.i3.J4().s3t(),n=this.i3.zft().vvt();r.kct()?(C33.kn(tmpPickArray,e),r.$ct(),r.Yct(!1)):h?(C33.kn(tmpPickArray,r.zct()),C33.Dn(r.zct())):(C33.kn(tmpPickArray,r.qct()),C33.Dn(r.qct()));for(let t=0,e=tmpPickArray.length;t<e;++t){var a=tmpPickArray[t];C33.xor(a.Cx().k7(i,s),n)?r.jct(a):r.Xct(a)}return t.b1t(),C33.xor(!!r.qct().length,n)},g7t(e){if(!e)return!1;var i=e.uU();let s=null;var t,r=this.i3.QIt();for(let t=r.length-1;0<=t;--t){var h=r[t];if(i){if(h.tF().NSt(e)){s=h;break}}else if(h.tF()===e){s=h;break}}return s||(t=e.r5()).length&&(s=t.at(-1)),!!s&&(e.h5().i3t(s),e.b1t(),!0)},T7t(t){return this.i3.ySt()?this.DFt(t):this.NFt(t)},_7t(){return this.i3.ySt()?this.BFt():this.FFt()},E7t(t,e,i){return this.i3.ySt()?this.kFt(t,e,i):this.$Ft(t,e,i)},c0(t){return this.i3.ySt()?this.VFt(t):this.WFt(t)},y7t(t,e,i){return this.i3.ySt()?this.UFt(t,i):this.HFt(t,i)},A7t(t){return!!t&&t.uD()},I7t(t){return!!t&&t.SD()},R7t(t){return!!t&&t.pD()},M7t(t){return!!t&&!t.a5()},w7t(t,e,i){return!!t&&C33.compare(100*t.Sb(),e,i)},b7t(t){var e=this.i3.BL();return!!e&&e.LY(t)},PFt(){return!0},O7t(){return 0<this.RFt},G7t(t,e){var i=this.i3.nMt();return!!i&&!!e&&!!i.slt(t,e)}}}{let SortZOrderList2=function(t,e){var i=t[0]-e[0];return 0!=i?i:t[1]-e[1]},SortInstancesByValue2=function(t,e){return t[1]-e[1]},C33=(SortZOrderList=SortZOrderList2,SortInstancesByValue=SortInstancesByValue2,self.We),tempZOrderList=[],tempInstValues=[],tempRect=C33.oh(C33.Rect),tempColor=C33.oh(C33.$a),EMPTY_ITERABLE=[];C33.Mq.Rq.mrt={P7t(t,e){t.Ast(e)},L7t(t,e){t.Cs()&&"number"!=typeof e&&(e=parseFloat(e)),t.Ast(t.Vit()+e)},x7t(t,e){t.Cs()&&t.Ast(t.Vit()-e)},N7t(t,e){t.Ast(!!e)},D7t(t){t.Ast(!t.Vit())},F7t(t){t.Ast(t.Yft())},B7t(t){this.i3.U4().C0t(t)},$7t(t,e,i,s,r,h){if(t&&e){i=this.i3.l5(t,e,i,s,r,h);if(i){r&&e.u5(i);var n,a,s=this.i3.U4(),h=(s.c5(!0),i.f5(),s.c5(!1),new Map);i.KRt(h,t,r);for([n,a]of h)n.h5().Zct(a)}}},k7t(t,e,i,s,r,h){t&&e&&(t=this.i3.W5t(t))&&C33.Mq.Rq.mrt.$7t.call(this,t,e,i,s,r,h)},oU(s,r,h,n,a,o,t,l,u,c,f){if(s){var d=this.i3.lx();let e=d;if(o){var o=this.i3.WL().gz(o);if(!o)return;e=o}let i=null;if(!("number"!=typeof t||0<=t)||(i=e.mx(t))){let t=null;("number"!=typeof l||0<=l)&&!(t=d.mx(l))||(tempRect.set(r,h,n,a),o=e.oU(s,tempRect,i,t,u,c,f),s.h5().Kct(o),s.b1t())}}},W7t(){var t=this.J3t;t.X3t()&&t.U3t().V$()},xdt(t,e){t=this.i3.U4().m0t(t);t&&(0===e?t.xdt(!1):1===e?t.xdt(!0):t.xdt(!t.Ldt()))},V7t(t){this.i3.TL(t)},H7t(t,e){var i;if(e<0&&(e=0),t)for(i of t.h5().r5())i.TL(e)},U7t(t){var e;if(t)for(e of t.h5().r5())e.gF()},On(t){if(!(t<0))return this.i3.U4().J0t().kTt(t),!0},oL(t){return this.i3.U4().J0t().WTt(t),!0},j7t(){var t=this.i3.U4();return t.J0t().VTt(t.udt()),!0},nL(t){this.i3.U4().nL(t)},async fLt(t,e,i,s,r,h){var n=this.i3.K6();n&&(this.Ex(),await n.fLt(0===t?"image/png":"image/jpeg",e/100,i,s,r,h),await this.i3.$F(C33.Mq.Rq.Iq.QFt,null))},X7t(t,e){var i;t<=0||e<=0||(this.i3.F4t(t,e),this.i3.lx().MX(),(i=this.i3.K6())&&("off"!==i.O4t()&&this.i3.H5t(t,e),i.DR(i.Q6(),i.ek(),!0),this.i3.Ex()))},Y7t(t){var e=this.i3.K6();e&&"off"!==e.O4t()&&(e.U4t(0!==t?"high":"low"),e.DR(e.Q6(),e.ek(),!0))},nit(t){this.i3.NDt(t)},q7t(t){this.i3.DDt(t)},z7t(t){this.i3.STt(t)},J7t(t){},K7t(){for(var t of this.i3.WL().UL())t.Xq()},Z7t(t){this.i3.PDt(0!==t)},Q7t(t,e){this.i3.DL(1/t),this.i3.LL(1/e)},tBt(t,e){this.i3.LL(t),this.i3.DL(e)},eBt(t){this.i3.OL(["vsync","unlimited-tick","unlimited-frame"][t])},iBt(t,i){if(t){var s=t.h5().r5(),r=tempZOrderList,h=tempInstValues,n=this.i3.lx(),a=t.uU(),o=t.Zmt();for(let t=0,e=s.length;t<e;++t){var l=s[t],u=l.Cx();if(u){let t;t=a?l.hht(i+l.tF().Kmt(o)):l.hht(i),r.push([u.mx().f4(),u.vx()]),h.push([l,t])}}if(r.length){r.sort(SortZOrderList2),h.sort(SortInstancesByValue2);let i=!1;for(let t=0,e=r.length;t<e;++t){var c=h[t][0],f=n.Sx(r[t][0]),d=r[t][1],C=f.gx();C[d]!==c&&((C[d]=c).Cx().Tx(f,!0),f._x(c),i=!0)}i&&this.i3.Ex(),C33.Dn(tempZOrderList),C33.Dn(tempInstValues)}}},lN(t,e){t=Math.floor(t),e=Math.floor(e),t<=0||e<=0||!Number.isFinite(t)||!Number.isFinite(e)||this.i3.T4().lN(t,e)},sBt(t){var e;this.i3.N1()||(e=this.i3.WL()).XL()||e.YL(t)},rBt(t){var e;this.i3.N1()||(e=this.i3.WL()).XL()||(t=e.gz(t))&&e.YL(t)},hBt(t){var e,i,s;this.i3.N1()||(e=this.i3.WL()).XL()||(i=(s=e.UL()).indexOf(e.BL()),t&&0===i)||!t&&i===s.length-1||(s=s[i+(t?-1:1)],e.YL(s))},nBt(){var t;this.i3.N1()||(t=this.i3.WL()).XL()||(t.YL(t.BL()),this.i3.U4().T0t())},aBt(t,e){t&&t.oD(e)},oBt(t,e){t&&t.dD(e)},lBt(t,e){t&&t.mD(e)},uBt(t,e){t&&t.Tb(e/100)},cBt(t,e){t&&t.gD(e)},fBt(t,e){t&&t._D(e)},dBt(t,e){t&&t.A5(C33.Sh(+e))},CBt(t,e,i){t&&(t.FD(!0),t.R5(e),t.w5(i))},pBt(t){t&&t.FD(!1)},mBt(t,e,i){t&&t.UU(e/100,i/100)},vBt(t,e){t&&t.Cg(+e)},SBt(t,e){t&&(tempColor.vo(e),tempColor.ph(),(e=t.DD()).lo(tempColor)||(e.Za(tempColor),this.Ex()))},gBt(t,e){t&&t.OD(e)},TBt(t,e){t&&t.JS(e)},_Bt(t,e,i){t&&(i=t.v5().Jst(i))&&(e=1===e,i.ACt()!==e)&&(i._Ot(e),t.t$(),this.i3.Ex())},EBt(t,e,i,s){var r;t&&(e=(t=t.v5()).Jst(e))&&(i=Math.floor(i),r=e.kE().VE(i))&&("color"===r?(tempColor.vo(s),s=tempColor):"percent"===r&&(s/=100),t.i$(e.f4(),i,s))&&e.ACt()&&this.i3.Ex()},yBt(t,e){t&&t.LD(e)},ABt(t){this.i3.lx().E5(+t)},IBt(t){this.i3.lx().A5(C33.Sh(+t))},RBt(t,e){var i=this.i3.lx(),e=i.v5().Jst(e);e&&(t=1===t,e.ACt()!==t)&&(e._Ot(t),i.t$(),this.i3.Ex())},MBt(t,e,i){var s,r=this.i3.lx().v5(),t=r.Jst(t);t&&(e=Math.floor(e),s=t.kE().VE(e))&&("color"===s?(tempColor.vo(i),i=tempColor):"percent"===s&&(i/=100),r.i$(t.f4(),e,i))&&t.ACt()&&this.i3.Ex()},wBt(t,e){this.i3.lx().q5(t/100,e/100)},bBt(t){var e=this.i3.lx();0===t?e.K5():e.Z5()},OBt(t){this.i3.lx().R5(t)},GBt(t){this.i3.lx().w5(t)},PBt(t,e){var i=this.i3.lx();i.R5(t),i.w5(e)},LBt(t){var e;t&&(t=t.TSt())&&(t=t.Cx())&&((e=this.i3.lx()).R5(t.ag()),e.w5(t.ug()))},k5(t,e,i){var s=this.i3.lx();try{s.k5(t,e,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},V5(t,e,i){if(t){var s=this.i3.lx();try{s.V5(t,e,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}}},U5(t){t&&this.i3.lx().U5(t)},X5(){this.i3.lx().X5()},async xBt(t){var e=this.i3.BL();e&&t&&!this.i3.N1()&&(t=t.uU()?t._pt():[t],await this.GFt(e,t))},async NBt(t){await C33.Mq.Rq.mrt.xBt.call(this,this.i3.W5t(t))},DBt(t){var e=this.i3.BL();e&&t&&(t=t.uU()?t._pt():[t],this.LFt(e,t))},FBt(t){C33.Mq.Rq.mrt.DBt.call(this,this.i3.W5t(t))},BBt(){var t,e=this.i3.BL();e&&(t=e.jY(),this.LFt(e,t))},async $Bt(t){var e=this.i3.BL();t&&e&&!this.i3.N1()&&await this.GFt(e,t.VY())},async kBt(t){var e=this.i3.BL(),t=this.i3.WL().gz(t);t&&e&&!this.i3.N1()&&await this.GFt(e,t.VY())},hL(t){var e=this.Dct.iL();if(e)switch(e.rL()){case 1:"number"==typeof t&&e.hL(t);break;case 2:"string"==typeof t&&e.hL(t);break;case 3:e.hL(t)}},WBt(t,e,i){var s=this.jFt(t.toLowerCase(),!0),r=s.YFt,h=e.toLowerCase(),s=(r.has(h)&&console.warn(`[Construct] Function map '${t}' string '${e}' already in map; overwriting entry`),C33.first(r.values())||s.XFt);if(s&&0!==s.tL()!=(0!==i.tL()))return void console.error(`[Construct] Function map '${t}' string '${e}' function return type not compatible with other functions in the map; entry ignored`);r.set(h,i)},VBt(t,e){var i=this.jFt(t.toLowerCase(),!0),s=(i.XFt&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`),C33.first(i.YFt.values())||i.XFt);if(s&&0!==s.tL()!=(0!==e.tL()))return void console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`);i.XFt=e},HBt(t,e,i){var s=this.i3,r=s.ySt()?EMPTY_ITERABLE:null,h=(i=Math.floor(i),this.jFt(t.toLowerCase(),!1));if(!h)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),r;let n=h.YFt.get(e.toLowerCase());if(!n){if(!h.XFt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${e}'; call ignored (consider setting a default)`),r;n=h.XFt,i=0}if(!n.qu())return r;if(0!==n.tL())return console.warn(`[Construct] Call mapped function: map '${t}' string '${e}' has a return type so cannot be called`),r;var h=s.U4(),t=h.J4(),e=t.z4(),r=0<e.length,a=(r&&(n.Q4()?h.u8(e):h.q0t(e)),[]),t=h.kdt(t);if(t){var o=t.Vdt();for(let t=i,e=o.length;t<e;++t)a.push(o[t].Vit())}var l=n.Vdt();for(let t=a.length,e=l.length;t<e;++t)a.push(l[t].Yft());return s.ySt()?this.zFt(h,n,a,r,e):this.qFt(h,n,a,r,e)}}}{let C33=self.We;C33.Mq.Rq.vrt={UBt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t))&&(t=0),Math.floor(t)},float:function(t){return t="string"==typeof t&&(t=parseFloat(t),isNaN(t))?0:t},L(t){return t.toString()},Xt(t){return"string"==typeof t?t.length:0},random(t,e){return void 0===e?this.i3.FL()*t:this.i3.FL()*(e-t)+t},Dmt(...t){return t[Math.floor(this.i3.FL()*t.length)]},jBt(t,...e){return"number"!=typeof t&&(t=0),e[t=C33.ph(Math.floor(t),0,e.length-1)]},pi(){return Math.PI},XBt(){return 1/0},sqrt(t){return Math.sqrt(t)},abs(t){return Math.abs(t)},round(t){return Math.round(t)},YBt(t,e){e=Math.max(Math.floor(e),0);e=Math.pow(10,e);return Math.round((t+Number.EPSILON)*e)/e},floor(t){return Math.floor(t)},ceil(t){return Math.ceil(t)},sign(t){return Math.sign(t)},sin(t){return Math.sin(C33.Sh(t))},cos(t){return Math.cos(C33.Sh(t))},tan(t){return Math.tan(C33.Sh(t))},asin(t){return C33.gh(Math.asin(t))},acos(t){return C33.gh(Math.acos(t))},atan(t){return C33.gh(Math.atan(t))},exp(t){return Math.exp(t)},Zt(t){return Math.log(t)},log10(t){return Math.log10(t)},max(...i){let s=i[0];"number"!=typeof s&&(s=0);for(let t=1,e=i.length;t<e;++t){var r=i[t];"number"==typeof r&&s<r&&(s=r)}return s},min(...i){let s=i[0];"number"!=typeof s&&(s=0);for(let t=1,e=i.length;t<e;++t){var r=i[t];"number"==typeof r&&s>r&&(s=r)}return s},ph(t,e,i){return C33.ph(t,e,i)},Ot(t,e,i,s){return C33.Th(t,e,i,s)},angle(t,e,i,s){return C33.gh(C33.Eh(t,e,i,s))},Dt(t,e,i){return C33.Dt(t,e,i)},Oh(t,e,i){return C33.Oh(t,e,i)},Ph(t,e,i,s){return C33.Ph(t,e,i,s)},Lh(t,e,i,s,r){return C33.Lh(t,e,i,s,r)},xh(t,e,i){return C33.xh(t,e,i)},qBt(t,e){return C33.gh(C33.yh(C33.Sh(t),C33.Sh(e)))},zBt(t,e,i){return C33.gh(C33.Rh(C33.Sh(t),C33.Sh(e),i))},JBt(t,e,i){return C33.gh(C33.Ah(C33.Sh(t),C33.Sh(e),C33.Sh(i)))},KBt(t,e,i){return(t|=0)&~(1<<(e|=0))|(i=0!==i?1:0)<<e},ZBt(t,e){return(t|=0)^1<<(e|=0)},QBt(t,e){return(t|=0)&1<<(e|=0)?1:0},t$t(){return"\n"},e$t(t){return"string"==typeof t?t.toUpperCase():""},i$t(t){return"string"==typeof t?t.toLowerCase():""},left(t,e){return"string"==typeof t?t.substr(0,e):""},mid(t,e,i){return"string"!=typeof t?"":i<0?t.substr(e):t.substr(e,i)},right(t,e){return"string"==typeof t?t.substr(Math.max(t.length-e,0)):""},trim(t){return"string"==typeof t?t.trim():""},s$t(t,e,i){return"string"!=typeof t||"string"!=typeof i||(t=t.split(i),(e=Math.floor(e))<0)||e>=t.length?"":t[e]},r$t(t,e){return"string"==typeof t&&"string"==typeof e&&t.length?t.split(e).length:0},find(t,e){return"string"==typeof t&&"string"==typeof e?t.search(new RegExp(C33.us(e),"i")):-1},h$t(t,e){return"string"==typeof t&&"string"==typeof e?t.search(new RegExp(C33.us(e),"")):-1},replace(t,e,i){return"string"==typeof t&&"string"==typeof e&&"string"==typeof i?t.replace(new RegExp(C33.us(e),"gi"),i):"string"==typeof t?t:""},n$t(t,...i){let s=t;for(let t=0,e=i.length;t<e;++t)s=s.replaceAll(`{${t}}`,i[t].toString());return s},a$t(t,e,i){e=this.bFt(e,i);return t?t.search(e):-1},o$t(t,e,i,s){e=this.bFt(e,i);return t?t.replace(e,s):""},l$t(t,e,i){t=this.OFt(t.toString(),e,i);return t?t.length:0},u$t(t,e,i,s){s=Math.floor(s);t=this.OFt(t.toString(),e,i);return!t||s<0||s>=t.length?"":t[s]},c$t(t,e){var i=t<0?"-":"",e=e-(t=t<0?-t:t).toString().length;return(i+="0".repeat(Math.max(e,0)))+t.toString()},f$t(t){return encodeURIComponent(t)},d$t(t){return decodeURIComponent(t)},dt(){return this.i3.KJ()},timescale(){return this.i3.gL()},C$t(){return(Date.now()-this.i3.TDt())/1e3},p$t(){return Date.now()},time(){return this.i3.pL()},tickcount(){return this.i3.YQ()},m$t(){return this.i3.yDt()},fps(){return this.i3._L()},v$t(){return this.i3.IL()},S$t(){return this.i3.ML()},g$t(){return this.i3.K6().M4t()},T$t(){return this.i3.K6().b4t()},_$t(){return this.i3.O4()},E$t(){return this.i3.P4()},y$t(){return this.i3.O4()},A$t(){return this.i3.P4()},I$t(){return this.i3.lx().M5()},R$t(){return this.i3.lx().b5()},M$t(){return this.i3.lx().qc()},w$t(){return this.i3.lx().y5()},b$t(){return C33.gh(this.i3.lx().I5())},O$t(){return this.i3.lx().tp()},G$t(){return this.i3.lx().cp()},P$t(){return 100*this.i3.lx().FU()},L$t(){return 100*this.i3.lx().BU()},x$t(t){t=this.i3.lx().mx(t);return t?t.DU().gl():0},N$t(t){t=this.i3.lx().mx(t);return t?t.DU().Tl():0},D$t(t){t=this.i3.lx().mx(t);return t?t.DU()._l():0},F$t(t){t=this.i3.lx().mx(t);return t?t.DU().El():0},B$t(t){t=this.i3.lx().mx(t);return t?t.DU().width():0},$$t(t){t=this.i3.lx().mx(t);return t?t.DU().height():0},k$t(t){var t=this.i3.lx().mx(t);return t?((t=t.DU()).gl()+t._l())/2:0},W$t(t){var t=this.i3.lx().mx(t);return t?((t=t.DU()).Tl()+t.El())/2:0},V$t(t,e,i){t=this.i3.lx().mx(t);return t?t.WD(e,i)[0]:0},H$t(t,e,i){t=this.i3.lx().mx(t);return t?t.WD(e,i)[1]:0},U$t(t,e,i){t=this.i3.lx().mx(t);return t?t.jD(e,i)[0]:0},j$t(t,e,i){t=this.i3.lx().mx(t);return t?t.jD(e,i)[1]:0},X$t(t,e,i,s){var r=this.i3.lx(),t=r.mx(t),r=r.mx(e);return t&&r&&t!==r?([e,t]=t.jD(i,s),r.WD(e,t)[0]):i},Y$t(t,e,i,s){var r=this.i3.lx(),t=r.mx(t),r=r.mx(e);return t&&r&&t!==r?([e,t]=t.jD(i,s),r.WD(e,t)[1]):s},q$t(t){t=this.i3.lx().mx(t);return t?t.TD():0},z$t(t){t=this.i3.lx().mx(t);return t?C33.gh(t.yD()):0},J$t(t){t=this.i3.lx().mx(t);return t?100*t.Sb():0},K$t(t){t=this.i3.lx().mx(t);return t?t.ED():0},Z$t(t){t=this.i3.lx().mx(t);return t?t.M5():0},Q$t(t){t=this.i3.lx().mx(t);return t?t.b5():0},t6t(t){t=this.i3.lx().mx(t);return t?100*t.ID():0},e6t(t){t=this.i3.lx().mx(t);return t?100*t.MD():0},i6t(t){t=this.i3.lx().mx(t);return t?t.dg():0},s6t(t){t=this.i3.lx().mx(t);return t?t.f4():-1},r6t(){var t=this.i3.K6();return t?t.CLt():""},h6t(t){var e=this.J3t;return e.X3t()?t?(t=e.q3t(t))?t.f4():0:e.U3t().f4():0},n6t(){return this.i3.FDt()},a6t(t,e,...i){var s=this.jFt(t.toLowerCase(),!1);if(!s)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let r=s.YFt.get(e.toLowerCase());if(!r){if(!s.XFt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${e}'; returning 0 (consider setting a default)`),0;r=s.XFt}var s=r.tL(),h=r.X4();if(0===s)return console.warn(`[Construct] Call mapped function: map '${t}' string '${e}' has no return type so cannot be called from an expression; returning 0`),0;if(!r.qu())return h;var t=this.i3.U4(),e=t.J4().z4(),n=0<e.length,a=(n&&(r.Q4()?t.u8(e):t.q0t(e)),r.Vdt());for(let t=i.length,e=a.length;t<e;++t)i.push(a[t].Yft());var o=r.q4(),o=o.Z4(o.z4(),r.Q4(),s,h,...i);return n&&t.f8(e),o},o6t(){return this.i3.v4().MW()},l6t(){return 0===this.RFt?1:this.MFt/this.RFt},renderer(){return this.i3.K4t()?"webgpu":"webgl"},u6t(){return this.i3.K4t()?this.i3.K4t().GetAdapterInfoString():this.i3.J4t().wO()},c6t(){var t=this.i3.OS().dS();return Math.round(100*t/1048576)/100},f6t(t,e,i){return C33.Wh(t,e,i)},d6t(t,e,i){return C33.Hh(t/100,e/100,i/100)},C6t(t,e,i,s){return C33.Vh(t/100,e/100,i/100,s/100)},p6t(t,e,i){return C33.Hh(t/255,e/255,i/255)},m6t(t,e,i,s){return C33.Vh(t/255,e/255,i/255,s/255)},v6t(){return this.i3.A4()},S6t(){return this.i3.R4()},g6t(){return this.i3.J4().GY().qc()},T6t(){return this.i3.J4().$pt()}}}{let C33=self.We;C33.Mq.Date=class DatePlugin extends C33.YTt{constructor(t){super(t)}lh(){super.lh()}}}{let C33=self.We;C33.Mq.Date.lIt=class DateType extends C33.G_t{constructor(t){super(t)}lh(){super.lh()}m_t(){}}}{let C33=self.We;C33.Mq.Date.Instance=class DateInstance extends C33.D_t{constructor(t,e){super(t)}}}{let C33=self.We,getters=[],parse=(getters[0]=[t=>C33.Mq.Date.vrt._6t(t),t=>C33.Mq.Date.vrt.E6t(t),t=>C33.Mq.Date.vrt.y6t(t),t=>C33.Mq.Date.vrt.A6t(t),t=>C33.Mq.Date.vrt.I6t(t),t=>C33.Mq.Date.vrt.R6t(t),t=>C33.Mq.Date.vrt.M6t(t),t=>C33.Mq.Date.vrt.w6t(t)],getters[1]=[t=>C33.Mq.Date.vrt.b6t(t),t=>C33.Mq.Date.vrt.O6t(t),t=>C33.Mq.Date.vrt.G6t(t),t=>C33.Mq.Date.vrt.P6t(t),t=>C33.Mq.Date.vrt.L6t(t),t=>C33.Mq.Date.vrt.x6t(t),t=>C33.Mq.Date.vrt.N6t(t),t=>C33.Mq.Date.vrt.D6t(t)],t=>C33.Mq.Date.vrt.F6t(t));C33.Mq.Date.Iq={B6t(t,e,i){return C33.compare(t,e,i)},$6t(t,e,i){return C33.compare(parse(t),e,parse(i))},k6t(t,e,i,s){return C33.compare(getters[1][s](t),e,getters[1][s](i))},W6t(t,e,i,s,r){return C33.compare(getters[r][s](parse(t)),e,getters[r][s](parse(i)))}}}{let C33=self.We;C33.Mq.Date.mrt={}}{let C33=self.We,Intl=self.Intl,getters=new Map,setters=(getters.set("local",new Map([["year",t=>new Date(t).getFullYear()],["month",t=>new Date(t).getMonth()],["date",t=>new Date(t).getDate()],["day",t=>new Date(t).getDay()],["hours",t=>new Date(t).getHours()],["minutes",t=>new Date(t).getMinutes()],["seconds",t=>new Date(t).getSeconds()],["milliseconds",t=>new Date(t).getMilliseconds()]])),getters.set("universal",new Map([["year",t=>new Date(t).getUTCFullYear()],["month",t=>new Date(t).getUTCMonth()],["date",t=>new Date(t).getUTCDate()],["day",t=>new Date(t).getUTCDay()],["hours",t=>new Date(t).getUTCHours()],["minutes",t=>new Date(t).getUTCMinutes()],["seconds",t=>new Date(t).getUTCSeconds()],["milliseconds",t=>new Date(t).getUTCMilliseconds()]])),new Map),validate_date_format_option=(setters.set("local",new Map([["year",(t,e)=>new Date(t).setFullYear(e)],["month",(t,e)=>new Date(t).setMonth(e)],["date",(t,e)=>new Date(t).setDate(e)],["hours",(t,e)=>new Date(t).setHours(e)],["minutes",(t,e)=>new Date(t).setMinutes(e)],["seconds",(t,e)=>new Date(t).setSeconds(e)],["milliseconds",(t,e)=>new Date(t).setMilliseconds(e)]])),setters.set("universal",new Map([["year",(t,e)=>new Date(t).setUTCFullYear(e)],["month",(t,e)=>new Date(t).setUTCMonth(e)],["date",(t,e)=>new Date(t).setUTCDate(e)],["hours",(t,e)=>new Date(t).setUTCHours(e)],["minutes",(t,e)=>new Date(t).setUTCMinutes(e)],["seconds",(t,e)=>new Date(t).setUTCSeconds(e)],["milliseconds",(t,e)=>new Date(t).setUTCMilliseconds(e)]])),function(t,e,i,s){i.includes(t)&&(s[e]=t)}),validate_hour_format_option=function(t,e){t&&("12"===t?e.hour12=!0:"24"===t&&(e.hour12=!1))},validate_locale=function(t){try{return Intl.getCanonicalLocales(t)}catch(t){return self.navigator.language}},DATE_STYLES=["full","long","medium","short"],TIME_STYLES=["full","long","medium","short"],WEEK_DAY_FORMATS=["long","short","narrow"],YEAR_FORMATS=["numeric","2-digit"],MONTH_FORMATS=["numeric","2-digit","long","short","narrow"],DAY_FORMATS=["numeric","2-digit"],HOUR_FORMATS=["numeric","2-digit"],MINUTE_FORMATS=["numeric","2-digit"],SECOND_FORMATS=["numeric","2-digit"];C33.Mq.Date.vrt={V6t(t){return new Date(t).toString()},H6t(t){return new Date(t).toDateString()},U6t(t){return new Date(t).toTimeString()},j6t(t){return new Date(t).toLocaleString()},X6t(t){return new Date(t).toLocaleDateString()},Y6t(t){return new Date(t).toLocaleTimeString()},q6t(t){return new Date(t).toUTCString()},F6t(t){return Date.parse(t)},ni(t,e,i,s,r,h,n){return Date.UTC(t,e,i,s,r,h,n)},z6t(){return Date.now()},J6t(){return new Date(Date.now()).getTimezoneOffset()},_6t(t){return getters.get("local").get("year")(t)},b6t(t){return getters.get("universal").get("year")(t)},E6t(t){return getters.get("local").get("month")(t)},O6t(t){return getters.get("universal").get("month")(t)},y6t(t){return getters.get("local").get("date")(t)},G6t(t){return getters.get("universal").get("date")(t)},A6t(t){return getters.get("local").get("day")(t)},P6t(t){return getters.get("universal").get("day")(t)},I6t(t){return getters.get("local").get("hours")(t)},L6t(t){return getters.get("universal").get("hours")(t)},R6t(t){return getters.get("local").get("minutes")(t)},x6t(t){return getters.get("universal").get("minutes")(t)},M6t(t){return getters.get("local").get("seconds")(t)},N6t(t){return getters.get("universal").get("seconds")(t)},w6t(t){return getters.get("local").get("milliseconds")(t)},D6t(t){return getters.get("universal").get("milliseconds")(t)},K6t(t,e){return setters.get("local").get("year")(t,e)},Z6t(t,e){return setters.get("universal").get("year")(t,e)},Q6t(t,e){return setters.get("local").get("month")(t,e)},tkt(t,e){return setters.get("universal").get("month")(t,e)},ekt(t,e){return setters.get("local").get("date")(t,e)},ikt(t,e){return setters.get("universal").get("date")(t,e)},skt(t,e){var i=C33.Mq.Date.vrt._6t(t),s=C33.Mq.Date.vrt.E6t(t),r=C33.Mq.Date.vrt.y6t(t),h=C33.Mq.Date.vrt.I6t(t),n=C33.Mq.Date.vrt.R6t(t),a=C33.Mq.Date.vrt.M6t(t),o=C33.Mq.Date.vrt.w6t(t),t=C33.Mq.Date.vrt.A6t(t);return new Date(i,s,r+(e-t),h,n,a,o).getTime()},rkt(t,e){var i=C33.Mq.Date.vrt.b6t(t),s=C33.Mq.Date.vrt.O6t(t),r=C33.Mq.Date.vrt.G6t(t),h=C33.Mq.Date.vrt.L6t(t),n=C33.Mq.Date.vrt.x6t(t),a=C33.Mq.Date.vrt.N6t(t),o=C33.Mq.Date.vrt.D6t(t),e=e-C33.Mq.Date.vrt.P6t(t);return C33.Mq.Date.vrt.ni(i,s,r+e,h,n,a,o)},hkt(t,e){return setters.get("local").get("hours")(t,e)},nkt(t,e){return setters.get("universal").get("hours")(t,e)},akt(t,e){return setters.get("local").get("minutes")(t,e)},okt(t,e){return setters.get("universal").get("minutes")(t,e)},lkt(t,e){return setters.get("local").get("seconds")(t,e)},ukt(t,e){return setters.get("universal").get("seconds")(t,e)},ckt(t,e){return setters.get("local").get("milliseconds")(t,e)},fkt(t,e){return setters.get("universal").get("milliseconds")(t,e)},dkt(t,e){return e-t},Ckt(t){return Math.trunc(C33.Mq.Date.vrt.pkt(t))},mkt(t){return Math.trunc(C33.Mq.Date.vrt.vkt(t))%60},Skt(t){return Math.trunc(C33.Mq.Date.vrt.gkt(t))%60},Tkt(t){return t%1e3},pkt(t){return t/36e5},vkt(t){return t/6e4},gkt(t){return t/1e3},_kt(t,e,i,s,r){var h,t=validate_locale(t);if(t)return h={},validate_date_format_option.call(this,i,"dateStyle",DATE_STYLES,h),validate_date_format_option.call(this,s,"timeStyle",TIME_STYLES,h),validate_hour_format_option.call(this,r,h),new Intl.DateTimeFormat(t,h).format(e)},Ekt(t,e,i,s,r,h,n,a,o,l){var u,t=validate_locale(t);if(t)return u={},validate_date_format_option.call(this,i,"weekday",WEEK_DAY_FORMATS,u),validate_date_format_option.call(this,s,"year",YEAR_FORMATS,u),validate_date_format_option.call(this,r,"month",MONTH_FORMATS,u),validate_date_format_option.call(this,h,"day",DAY_FORMATS,u),validate_date_format_option.call(this,n,"hour",HOUR_FORMATS,u),validate_date_format_option.call(this,a,"minute",MINUTE_FORMATS,u),validate_date_format_option.call(this,o,"second",SECOND_FORMATS,u),validate_hour_format_option.call(this,l,u),new Intl.DateTimeFormat(t,u).format(e)}}}{let C33=self.We;C33.Mq.Qst=class SpritePlugin extends C33.YTt{constructor(t){super(t)}lh(){super.lh()}}}{let C33=self.We,C3X=self.Ze,spawnPickStack=[],map=(C33.Mq.Qst.lIt=class SpriteType extends C33.G_t{constructor(t){super(t),this.iIt=t.WIt()}lh(){C33.Dn(this.iIt),super.lh()}m_t(){for(var t of this.iIt)t.sAt(this.i3)}YY(e){let i={aT:this.i3.L4()};return Promise.all(this.iIt.map(t=>t.rAt(e,i)))}QY(){for(var t of this.iIt)t.hAt()}JY(){this.ykt()}ykt(){for(var t of this.wct.s5())t.NB().Akt()}wvt(t){C33.Mq.Qst.rTt(this,t)}dSt(t){spawnPickStack.push({N_t:null,Ikt:!1,instances:[]})}Rkt(t,e,i){var s=spawnPickStack.at(-1);s.N_t=t,s.Ikt=i,s.instances.push(e)}CSt(t){var e=spawnPickStack.pop(),i=e.N_t,s=e.Ikt;if(i){var r,h,n,a=new Map;for(r of e.instances)r.KRt(a,i,s);for([h,n]of a)h.h5().Zct(n)}}Mkt(t){var t=this.tF().XIt(t),e=this.Dx();return t.nAt(0).T$().J8(e.OS(),{aT:e.L4()}).then(()=>this.ykt()),t}wkt(t){for(var e of this.wct.s5())e.NB().bkt(t);this.tF().YIt(t)}Okt(t,e){var i=this.wct.UIt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let s=i.uAt(e);s<0&&(s+=i.f$()+1);var r,t=C33.tAt.iAt(this.Dx()),e=(i.aAt(t,s),this.Dx());t.T$().J8(e.OS(),{aT:e.L4()}).then(()=>this.ykt());for(r of this.wct.s5())r.NB().Gkt();return t}Pkt(t,e){var i,s=this.wct.UIt(t);if(!s)throw new Error(`cannot find animation name '${t}'`);if(1===s.f$())throw new Error(`cannot remove last frame from animation '${t}'`);let r=s.uAt(e);r<0&&(r+=s.f$()),s.oAt(r);for(i of this.wct.s5())i.NB().Gkt()}v_t(){return self.Lkt}},new WeakMap);self.Lkt=class ISpriteObjectType extends self.jN{constructor(t){super(t),map.set(this,t.fSt())}xkt(t){C3X.Ms(t);t=map.get(this).tF().UIt(t);return t?t.cAt():null}Nkt(){return map.get(this).tF().HIt().map(t=>t.cAt())}Dkt(t){return C3X.Ms(t),map.get(this).Mkt(t).cAt()}Fkt(t){C3X.Ms(t),map.get(this).wkt(t)}Bkt(t,e){if(C3X.Ms(t),"number"!=typeof e&&"string"!=typeof e)throw new TypeError("invalid insert location");return map.get(this).Okt(t,e).p$()}$kt(t,e){if(C3X.Ms(t),"number"!=typeof e&&"string"!=typeof e)throw new TypeError("invalid insert location");map.get(this).Pkt(t,e)}}}{let C33=self.We,C3X=self.Ze,INITIALLY_VISIBLE=0,INITIAL_ANIMATION=1,INITIAL_FRAME=2,ENABLE_COLLISIONS=3,tempRect=C33.oh(C33.Rect),tempQuad=C33.oh(C33.Jl),tempVec2=C33.oh(C33.qo),FLAG_PLAYING_FORWARDS=1,FLAG_ANIMATION_PLAYING=2,FLAG_ANIMATION_TRIGGER=4,map=(C33.Mq.Qst.Instance=class SpriteInstance extends C33.uEt{constructor(t,e){super(t);let i=!0,s="",r=0,h=!0;e&&(i=!!e[INITIALLY_VISIBLE],s=e[INITIAL_ANIMATION],r=e[INITIAL_FRAME],h=e[ENABLE_COLLISIONS]),this.kkt=this.wct.UIt(s)||this.wct.WIt()[0],this.Wkt=C33.ph(r,0,this.kkt.f$()-1),this.Vkt=this.kkt.nAt(this.Wkt);e=this.Vkt.T$(),this.Hkt=e.T_(),this.Ukt=e.CM(),this.jkt=e.EEt(),this.CEt(),t.zRt(FLAG_ANIMATION_PLAYING,!0),t.zRt(FLAG_PLAYING_FORWARDS,0<=this.kkt.r$()),this.Xkt=Math.abs(this.kkt.r$()),this.Ykt=this.kkt.l$(),this.qkt=C33.oh(C33.yf),this.zkt=0,this.Jkt=0,this.Kkt="",this.Zkt=-1,this.Qkt="",this.t8t=0,e=this.Cx();this.e8t=e.E7(),e.oD(i),e.B7(h),e.bht(this.Vkt.y$()),e.Ght(this.Vkt.I$()),e.$bt(this.Vkt.N$()),e.f7(),1===this.wct.VIt()&&1===this.wct.WIt()[0].f$()||0===this.Xkt||this.eEt()}lh(){this.kkt=null,this.Vkt=null,this.Hkt=null,this.qkt=null,super.lh()}SEt(){return this.Vkt.T$()}ket(){return!0}tV(){this.Hkt=null}vEt(){this.Akt()}Jg(t){var e=this.Hkt;null!==e&&(t.Ab(e),(e=this.Cx()).MB()?this.i8t(e,t):this.s8t(e,t))}s8t(t,e){let i=this.e8t;this.i3.N4()&&(i=t.Pbt(i)),e.xb(i,this.jkt)}i8t(e,t){var i=e.Jbt();if(e.Zbt()){e.bbt(tempRect,tempQuad,!1);let t=tempQuad;this.i3.N4()&&(t=e.Pbt(t)),i.zg(e.wB(),t,this.jkt),e.Kbt(!1)}i.Jg(t)}r8t(){return this.qkt.ni()}h8t(){return this.wi.JRt(FLAG_ANIMATION_PLAYING)}n8t(t){this.wi.zRt(FLAG_ANIMATION_PLAYING,t)}a8t(){return this.wi.JRt(FLAG_PLAYING_FORWARDS)}o8t(t){this.wi.zRt(FLAG_PLAYING_FORWARDS,t)}l8t(){return this.wi.JRt(FLAG_ANIMATION_TRIGGER)}u8t(t){this.wi.zRt(FLAG_ANIMATION_TRIGGER,t)}QJ(){this.Qkt&&this.c8t(),0<=this.Zkt&&this.f8t();var t,e,i,s,r,h,n,a,o,l=this.Xkt;this.h8t()&&0!==l?(t=this.i3.cL(this.wi),this.qkt.ac(t),t=this.r8t(),o=(e=this.Vkt)._$()/l,t<this.zkt+o||(i=this.kkt,s=this.Ykt,r=i.f$(),h=i.a$(),n=i.n$(),a=i.c$(),this.a8t()?this.Wkt++:this.Wkt--,this.zkt+=o,this.Wkt>=r&&(a?(this.o8t(!1),this.Wkt=r-2):!n&&(this.Jkt++,this.Jkt>=h)?this.d8t(!1):this.Wkt=s),this.Wkt<0&&(a?(this.Wkt=1,this.o8t(!0),n||(this.Jkt++,this.Jkt>=h&&this.d8t(!0))):!n&&(this.Jkt++,this.Jkt>=h)?this.d8t(!0):this.Wkt=s),this.Wkt=C33.ph(this.Wkt,0,r-1),o=i.nAt(this.Wkt),t>this.zkt+o._$()/l&&(this.zkt=t),this.C8t(e,o))):this.$_t()}d8t(t){this.Wkt=t?0:this.kkt.f$()-1,this.n8t(!1),this.Kkt=this.kkt.qc(),this.u8t(!0),this.x_t("animationend",!1,{animationName:this.Kkt}),this.FF(C33.Mq.Qst.Iq.p8t),this.FF(C33.Mq.Qst.Iq.m8t),this.u8t(!1),this.Jkt=0}C8t(i,s,t){if(i!==s){var e=this.Cx(),r=i.T$(),h=s.T$(),n=r.tp(),r=r.cp(),a=h.tp(),o=h.cp(),l=(t&&t.onFrameChange?t.onFrameChange(e,n,r,a,o):(n!==a&&e.op(e.tp()*(a/n)),r!==o&&e.ep(e.cp()*(o/r))),e.bht(s.y$()),e.Ght(s.I$()),e.$bt(s.N$()),e.f7(),this.Vkt=s,this.Hkt=h.T_(),this.Ukt=h.CM(),this.jkt=h.EEt(),this.c6().Yst());for(let t=0,e=l.length;t<e;++t)l[t].lyt(i,s);this.x_t("framechange",!1,{animationName:this.kkt.qc(),v8t:this.Wkt}),this.FF(C33.Mq.Qst.Iq.S8t),this.i3.Ex()}}g8t(t){this.n8t(!0),this.zkt=this.r8t(),1===t&&0!==this.Wkt&&(this.Zkt=0,this.l8t()||this.f8t()),this.eEt()}T8t(t,e,i){this.Qkt=t,this.t8t=e,this.eEt(),!i&&this.l8t()||this.c8t()}_8t(){return this.kkt}E8t(){return this.Qkt||this.kkt.qc()}bkt(t){C33.gr(t,this.E8t())&&this.T8t(this.wct.qIt().qc(),1,!0)}y8t(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{var e=this.wct.UIt(this.E8t());if(!e)return;if(-1===(t=e.lAt(t)))return}isFinite(t)&&(this.Zkt=t,this.l8t()||this.f8t())}Gkt(){var t,e;this.Qkt||-1!==this.Zkt||((t=this.Vkt)!==(e=this.kkt.nAt(C33.ph(this.Wkt,0,this.kkt.f$()-1)))&&this.C8t(t,e),1<this.kkt.f$()&&0<this.Xkt&&this.eEt())}A8t(){return this.Wkt}I8t(){return this.Vkt.$$()}R8t(t){this.Xkt=Math.abs(t),this.o8t(0<=t),0<this.Xkt&&this.eEt()}M8t(){return this.a8t()?this.Xkt:-this.Xkt}w8t(t){"string"==typeof t&&-1===(t=this.kkt.lAt(t))||(t=C33.ph(Math.floor(t),0,this.kkt.f$()-1),this.Ykt=t)}b8t(){return this.Ykt}c8t(t){var e=this.Vkt,i=this.wct.UIt(this.Qkt);this.Qkt="",!i||i===this.kkt&&this.h8t()||(this.kkt=i,this.o8t(0<=i.r$()),this.Xkt=Math.abs(i.r$()),this.Ykt=i.l$(),this.Wkt=C33.ph(this.Wkt,0,this.kkt.f$()-1),1===this.t8t&&(this.Wkt=0),this.n8t(!0),this.zkt=this.r8t(),i=this.kkt.nAt(this.Wkt),this.C8t(e,i,t))}f8t(t){var e=this.Vkt,i=this.Wkt;this.Wkt=C33.ph(Math.floor(this.Zkt),0,this.kkt.f$()-1),this.Zkt=-1,!t&&i===this.Wkt||(t=this.kkt.nAt(this.Wkt),this.C8t(e,t),this.zkt=this.r8t())}Akt(){var t=this.Vkt.T$();this.Hkt=t.T_(),this.Ukt=t.CM(),this.jkt=t.EEt(),this.Cx().Kbt(!0)}T_(){return this.Hkt}CM(){return this.Ukt}EEt(){return this.jkt}w$(){return this.Vkt.w$()}mSt(t){var e,i,s=this.Vkt,r=this.Cx();let h=null;if("string"==typeof t)h=s.L$(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");h=s.P$(t-1)}let n=r.S7();return h?(tempVec2._(h.EAt()),r.MB()&&([t,e,i]=r.wB().iT(tempVec2.Qo(),tempVec2.el()),tempVec2.set(t,e),n+=i),tempVec2.offset(-s.y$(),-s.I$()),tempVec2.scale(r.tp(),r.cp()),tempVec2.rotate(r.I5()),tempVec2.offset(r.ag(),r.ug()),[tempVec2.Qo(),tempVec2.el(),n]):[r.ag(),r.ug(),n]}O8t(){return this.Cx().Ubt().Du()}G8t(t){t=Math.floor(t);var e=this.Cx(),i=e.Ubt(),s=i.Du();return(t=t===s?0:t)<0||s<=t?[0,0]:[(s=i.Nu())[2*t+0]+e.ag(),s[2*t+1]+e.ug()]}hEt(){let e=C33.Mq.Qst.mrt;var t="plugins.sprite.debugger.animation-properties";return[{title:t+".title",properties:[{name:t+".current-animation",value:this.kkt.qc(),P8t:t=>this.aEt(e.L8t,t,0)},{name:t+".current-frame",value:this.Wkt,P8t:t=>this.aEt(e.x8t,t)},{name:t+".is-playing",value:this.h8t(),P8t:t=>t?this.aEt(e.N8t,0):this.aEt(e.D8t)},{name:t+".speed",value:this.Xkt,P8t:t=>this.aEt(e.F8t,t)},{name:t+".repeats",value:this.Jkt,P8t:t=>this.Jkt=t}]}]}_g(){var t={a:this.kkt.SU()},e=(0!==this.zkt&&(t.fs=this.zkt),this.r8t()),e=(0!==e&&(t.at=e),0!==this.Wkt&&(t.f=this.Wkt),0!==this.Xkt&&(t.cas=this.Xkt),1!==this.Jkt&&(t.ar=this.Jkt),0!==this.Ykt&&(t.rt=this.Ykt),this.h8t()||(t.ap=this.h8t()),this.a8t()||(t.af=this.a8t()),this.Cx());return e.F7()&&(t.ce=e.F7()),t}Eg(t){var e=this.tF().jIt(t.a),e=(e&&(this.kkt=e),this.zkt=t.hasOwnProperty("fs")?t.fs:0,this.qkt.Set(t.hasOwnProperty("at")?t.at:0),t.hasOwnProperty("f")?t.f:0),e=(this.Wkt=C33.ph(e,0,this.kkt.f$()-1),this.Xkt=t.hasOwnProperty("cas")?t.cas:0,this.Jkt=t.hasOwnProperty("ar")?t.ar:1,t.hasOwnProperty("rt")?t.rt:0),e=(this.Ykt=C33.ph(e,0,this.kkt.f$()-1),this.n8t(!t.hasOwnProperty("ap")||!!t.ap),this.o8t(!t.hasOwnProperty("af")||!!t.af),this.kkt.nAt(this.Wkt)),i=(this.Vkt=e,this.Akt(),this.Cx());i.bht(e.y$()),i.Ght(e.I$()),i.$bt(e.N$()),i.B7(!!t.ce),this.h8t()&&this.eEt()}Jrt(t){var e=this.Cx();switch(t){case ENABLE_COLLISIONS:return e.F7();case INITIAL_FRAME:return C33.ph(this.Wkt,0,this.kkt.f$()-1);case INITIAL_ANIMATION:return this.kkt.qc()}}iht(t,e,i){var s=this.Cx();switch(t){case ENABLE_COLLISIONS:s.B7(!!e);break;case INITIAL_FRAME:this.n8t(!1);var r=this.kkt.f$()-1,h=e=C33.ph(e,0,r),n=this.kkt.nAt(this.Wkt),a=this.kkt.nAt(h);this.C8t(n,a,i),this.Wkt=C33.ph(h,0,r);break;case INITIAL_ANIMATION:this.Qkt=e,this.c8t(i),1<this.kkt.f$()&&0<this.kkt.r$()?this.eEt():this.$_t()}}v_t(){return self.B8t}},new WeakMap),ANIM_FROM_MODES=new Map([["current-frame",0],["beginning",1]]);self.B8t=class ISpriteInstance extends self.OB{constructor(){super(),map.set(this,self.ZD.sF().NB())}M$(){return map.get(this).w$()}b$(t){return this.O$(t)[0]}G$(t){return this.O$(t)[1]}$8t(t){return this.O$(t)[2]}O$(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return map.get(this).mSt(t)}x$(){return map.get(this).O8t()}D$(t){return C3X.ys(t),map.get(this).G8t(t)[0]}B$(t){return C3X.ys(t),map.get(this).G8t(t)[1]}F$(t){return C3X.ys(t),map.get(this).G8t(t)}k8t(){map.get(this).n8t(!1)}W8t(t="current-frame"){C3X.Ms(t);t=ANIM_FROM_MODES.get(t);if(void 0===t)throw new Error("invalid mode");map.get(this).g8t(t)}V8t(t,e="beginning"){C3X.Ms(t),C3X.Ms(e);e=ANIM_FROM_MODES.get(e);if(void 0===e)throw new Error("invalid mode");var i=map.get(this);if(!i.tF().UIt(t))throw new Error(`animation name "${t}" does not exist`);i.T8t(t,e)}xkt(t){C3X.Ms(t);t=map.get(this).tF().UIt(t);return t?t.cAt():null}get animation(){return map.get(this)._8t().cAt()}get animationName(){return map.get(this).E8t()}set v8t(t){C3X.ys(t),map.get(this).y8t(t)}get v8t(){return map.get(this).A8t()}set H8t(t){C3X.Ms(t),map.get(this).y8t(t)}get H8t(){return map.get(this).I8t()}set U8t(t){C3X.ys(t),map.get(this).R8t(t)}get U8t(){return map.get(this).M8t()}set j8t(t){C3X.ys(t),map.get(this).w8t(t)}get j8t(){return map.get(this).b8t()}get imageWidth(){return map.get(this).SEt().tp()}get imageHeight(){return map.get(this).SEt().cp()}X8t(){var t=map.get(this).SEt();return[t.tp(),t.cp()]}async Y8t(t){C3X.ir(t,Blob);var e=map.get(this),i=e.Dx(),s=e.SEt(),r=C33.oh(C33.Ryt);r.kyt(i,t),await r.J8(i.OS(),{aT:i.L4()}),e.uh()?r.lh():(s.Wyt(r),(t=e.fSt()).ykt(),t.tF().F3().dispatchEvent(new C33.Event("animationframeimagechange")),i.Ex())}q8t(t,e){C3X.Ms(e),map.get(this).Cx().Mbt(!!t,e)}}}{let C33=self.We;C33.Mq.Qst.Iq={z8t(t){return C33.gr(this.E8t(),t)},J8t(t,e){return C33.compare(this.Wkt,t,e)},K8t(t,e){var i;return"string"==typeof e&&(i=this.Vkt.$$(),C33.compare(i.toLowerCase(),t,e.toLowerCase()))},Z8t(t,e){return C33.compare(this.M8t(),t,e)},m8t(t){return C33.gr(this.Kkt,t)},p8t(){return!0},S8t(){return!0},Q8t(){return this.Cx().tp()<0},t9t(){return this.Cx().cp()<0},e9t(){return!0},i9t(){return!0},F7(){return this.Cx().F7()}}}{let C33=self.We;C33.Mq.Qst.mrt={s9t(t,e,i,s,r){var h;t&&e&&([i,h]=this.mSt(i),i=this.i3.l5(t,e,i,h,s,r))&&(s&&e.u5(i),t.YN().wN()&&((h=i.Cx()).A5(this.Cx().I5()),h.f7()),(r=this.i3.U4()).c5(!0),i.f5(),r.c5(!1),t!==this.i3.Kft().tF())&&this.B_t.Rkt(t,i,s)},D8t(){this.n8t(!1)},N8t(t){this.g8t(t)},L8t(t,e){this.T8t(t,e)},x8t(t){this.y8t(t)},F8t(t){this.R8t(t)},r9t(t){this.w8t(t)},h9t(e,t){try{0===e?this.fSt().Mkt(t):this.fSt().wkt(t)}catch(t){console.error(`[Construct] Error ${0===e?"adding":"removing"} animation: `,t)}},n9t(e,t,i){try{0===e?this.fSt().Okt(t,i):this.fSt().Pkt(t,i)}catch(t){console.error(`[Construct] Error ${0===e?"adding":"removing"} animation frame: `,t)}},a9t(t){var e=this.Cx(),i=e.tp(),t=Math.abs(i)*(0===t?-1:1);i!==t&&(e.op(t),e.f7())},o9t(t){var e=this.Cx(),i=e.cp(),t=Math.abs(i)*(0===t?-1:1);i!==t&&(e.ep(t),e.f7())},E5(t){var e=this.Vkt.T$(),i=this.Cx(),s=i.tp()<0?-1:1,r=i.cp()<0?-1:1,s=e.tp()*t*s,e=e.cp()*t*r;i.tp()===s&&i.cp()===e||(i.DR(s,e),i.f7())},async l9t(t,e,i){var s=this.Vkt.T$(),r=this.Cx(),h=this.i3,n=this.B_t;if(s.TW()===t)0===e&&(r.DR(s.tp(),s.cp()),r.f7()),this.FF(C33.Mq.Qst.Iq.e9t);else{var a=C33.oh(C33.Ryt);try{if(await a.$yt(h,t),!a.qW())throw new Error("image failed to load");if(this.uh())return void a.lh();await a.J8(h.OS(),{aT:h.L4()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.uh()||this.FF(C33.Mq.Qst.Iq.i9t))}this.uh()?a.lh():(s.Wyt(a),n.ykt(),n.tF().F3().dispatchEvent(new C33.Event("animationframeimagechange")),h.Ex(),0===e&&(r.DR(s.tp(),s.cp()),r.f7()),await this.$F(C33.Mq.Qst.Iq.e9t))}},u9t(t){this.Cx().B7(t)},Mbt(t,e){this.Cx().Mbt(0===t,e)},c9t(t){this.Cx().JS(t),this.i3.Ex()}}}{let C33=self.We;C33.Mq.Qst.vrt={f9t(){return this.A8t()},d9t(){return this.I8t()},C9t(){return this.kkt.f$()},p9t(){return this.kkt.qc()},m9t(){return this.M8t()},v9t(){return this.kkt.r$()},S9t(t){return this.mSt(t)[0]},g9t(t){return this.mSt(t)[1]},T9t(t){return this.mSt(t)[2]},_9t(){return this.w$()},E9t(){return this.SEt().tp()},y9t(){return this.SEt().cp()},A9t(t){return this.G8t(t)[0]},I9t(t){return this.G8t(t)[1]},R9t(){return this.O8t()}}}{let C33=self.We;C33.Mq.Touch=class TouchPlugin extends C33.YTt{constructor(t){super(t)}lh(){super.lh()}}}{let GetTouchSdkInstance2=function(){return touchObjectType.UN().NB()},C33=(GetTouchSdkInstance=GetTouchSdkInstance2,self.We),C3X=self.Ze,touchObjectType=(C33.Mq.Touch.lIt=class TouchType extends C33.G_t{constructor(t){super(t)}lh(){super.lh()}m_t(){}v_t(){return self.M9t}},null);self.M9t=class ITouchObjectType extends self.jN{constructor(t){super(t),(touchObjectType=t).Dx().qL().JL=this}requestPermission(t){C3X.Ms(t);var e=GetTouchSdkInstance2();if("orientation"===t)return e.w9t(0);if("motion"===t)return e.w9t(1);throw new Error("invalid type")}}}{let C33=self.We,DOM_COMPONENT_ID2="touch";C33.Mq.Touch.Instance=class TouchInstance extends C33.D_t{constructor(t,e){super(t,DOM_COMPONENT_ID2),this.b9t=new Map,this.O9t=!1,this.G9t=!1,this.P9t=0,this.L9t=0,this.x9t=0,this.N9t=0,this.D9t=0,this.F9t=0,this.B9t=0,this.$9t=0,this.k9t=0,this.W9t=0,this.V9t=0,this.H9t=0,this.U9t=0,this.j9t=0,this.X9t=0,this.Y9t=0,this.q9t=0,this.z9t=[],e&&(this.O9t=e[0]),this.X_t("permission-result",t=>this.J9t(t));t=this.Dx().F3();this.Tf=new C33.vf(C33.cf.mf(t,"pointerdown",t=>this.K9t(t.data)),C33.cf.mf(t,"pointermove",t=>this.Z9t(t.data)),C33.cf.mf(t,"pointerup",t=>this.Q9t(t.data,!1)),C33.cf.mf(t,"pointercancel",t=>this.Q9t(t.data,!0)),C33.cf.mf(t,"deviceorientation",t=>this.tWt(t.data)),C33.cf.mf(t,"deviceorientationabsolute",t=>this.eWt(t.data)),C33.cf.mf(t,"devicemotion",t=>this.iWt(t.data)),C33.cf.mf(t,"tick2",t=>this.Yz()))}lh(){this.b9t.clear(),super.lh()}K9t(t){if("mouse"===t.pointerType){if(!this.O9t)return;this.G9t=!0}var e,i,s,r,h=t.pointerId;this.b9t.has(h)||(e=t.pageX-this.i3.VD(),t=t.pageY-this.i3.HD(),i=performance.now(),s=this.b9t.size,this.V9t=s,this.H9t=h,(r=C33.oh(C33.Mq.Touch.sWt)).ORt(i,e,t,h,s),this.b9t.set(h,r),this.FF(C33.Mq.Touch.Iq.rWt),this.FF(C33.Mq.Touch.Iq.hWt),this.j9t=e,this.X9t=t,this.q9t=0,this.FF(C33.Mq.Touch.Iq.nWt))}Z9t(t){var e,i,s,r;"mouse"===t.pointerType&&!this.G9t||!(e=this.b9t.get(t.pointerId))||(i=performance.now())-e.qO()<2||(s=t.pageX-this.i3.VD(),r=t.pageY-this.i3.HD(),e.AV(i,s,r,t.width,t.height,t.pressure))}Q9t(t,e){if("mouse"===t.pointerType){if(!this.G9t)return;this.G9t=!1}var i,s=performance.now(),r=t.pointerId,h=this.b9t.get(r);h&&(this.V9t=h.aWt(),this.H9t=h.p6(),e||(i=t.pageX-this.i3.VD(),t=t.pageY-this.i3.HD(),this.j9t=i,this.X9t=t,this.q9t=1,this.FF(C33.Mq.Touch.Iq.nWt)),this.FF(C33.Mq.Touch.Iq.oWt),this.FF(C33.Mq.Touch.Iq.lWt),e||("single-tap"===(i=h.uWt(s))?(this.FF(C33.Mq.Touch.Iq.cWt),this.j9t=h.ag(),this.X9t=h.ug(),this.FF(C33.Mq.Touch.Iq.fWt)):"double-tap"===i&&(this.FF(C33.Mq.Touch.Iq.dWt),this.j9t=h.ag(),this.X9t=h.ug(),this.FF(C33.Mq.Touch.Iq.CWt))),h.lh(),this.b9t.delete(r))}w9t(i){return this.J_t("request-permission",{type:i}),new Promise((t,e)=>{this.z9t.push({type:i,resolve:t,reject:e})})}J9t(t){var e,i=t.result;let s=t.type;this.U9t=s;for(e of this.z9t.filter(t=>t.type===s))e.resolve(i?"granted":"denied");this.z9t=this.z9t.filter(t=>t.type!==s),i?(this.FF(C33.Mq.Touch.Iq.pWt),0===s?this.i3.rFt():this.i3.hFt()):this.FF(C33.Mq.Touch.Iq.mWt)}tWt(t){"number"==typeof t.webkitCompassHeading?this.P9t=t.webkitCompassHeading:t.absolute&&(this.P9t=t.alpha),this.L9t=t.alpha,this.x9t=t.beta,this.N9t=t.gamma}eWt(t){this.P9t=t.alpha}iWt(t){var e=t.acceleration,e=(e&&(this.D9t=e.x,this.F9t=e.y,this.B9t=e.z),t.accelerationIncludingGravity);e&&(this.$9t=e.x,this.k9t=e.y,this.W9t=e.z)}Yz(){var t,e=performance.now();let i=0;for(t of this.b9t.values())t.qO()<=e-50&&t.vWt(e),t.SWt(e)&&(this.V9t=t.aWt(),this.H9t=t.p6(),this.Y9t=i,this.FF(C33.Mq.Touch.Iq.gWt),this.j9t=t.ag(),this.X9t=t.ug(),this.FF(C33.Mq.Touch.Iq.TWt),this.Y9t=0),++i}_Wt(t){t=Math.floor(t);for(var e of this.b9t.values()){if(0===t)return e;--t}return null}EWt(t,e){return 0<=t&&0<=e&&t<this.i3.U5t()&&e<this.i3.j5t()}hEt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.b9t.values()].map(t=>({name:"$"+t.p6(),value:t.ag()+", "+t.ug()}))}]}}}{let C33=self.We,tempArr=[];C33.Mq.Touch.Iq={hWt(){return!0},lWt(){return!0},yWt(){return 0<this.b9t.size},nWt(t,e){return!!t&&e===this.q9t&&!!this.EWt(this.j9t,this.X9t)&&this.i3.T4().tGt(t,[[this.j9t,this.X9t]],!1)},AWt(t){var e,i;return!!t&&(e=this.i3.zft().vvt(),i=[...this.b9t.values()].filter(t=>this.EWt(t.ag(),t.ug())).map(t=>[t.ag(),t.ug()]),C33.xor(this.i3.T4().tGt(t,i,e),e))},IWt(t,e,i){t=this._Wt(t);return!!t&&C33.compare(t.r$(),e,i)},RWt(){return!0},MWt(){return!0},wWt(t,e,i){this.i3.rFt();let s=0;return s=0===t?this.L9t:1===t?this.x9t:this.N9t,C33.compare(s,e,i)},bWt(t,e,i){this.i3.hFt();let s=0;return s=0===t?this.$9t:1===t?this.k9t:2===t?this.W9t:3===t?this.D9t:4===t?this.F9t:this.B9t,C33.compare(s,e,i)},rWt(t){return(t=Math.floor(t))===this.V9t},oWt(t){return(t=Math.floor(t))===this.V9t},OWt(t){return t=Math.floor(t),this.b9t.size>=t+1},gWt(){return!0},cWt(){return!0},dWt(){return!0},TWt(t){return!!t&&!!this.EWt(this.j9t,this.X9t)&&this.i3.T4().tGt(t,[[this.j9t,this.X9t]],!1)},fWt(t){return!!t&&!!this.EWt(this.j9t,this.X9t)&&this.i3.T4().tGt(t,[[this.j9t,this.X9t]],!1)},CWt(t){return!!t&&!!this.EWt(this.j9t,this.X9t)&&this.i3.T4().tGt(t,[[this.j9t,this.X9t]],!1)},pWt(t){return this.U9t===t},mWt(t){return this.U9t===t}}}{let C33=self.We;C33.Mq.Touch.mrt={GWt(t){this.w9t(t)}}}{let C33=self.We;C33.Mq.Touch.vrt={PWt(){return this.b9t.size},QSt(t){var e=this._Wt(this.Y9t);return e?e.LWt(this.i3.lx(),t,!0):0},tgt(t){var e=this._Wt(this.Y9t);return e?e.LWt(this.i3.lx(),t,!1):0},xWt(t,e){t=this._Wt(t);return t?t.LWt(this.i3.lx(),e,!0):0},NWt(t,e){t=this._Wt(t);return t?t.LWt(this.i3.lx(),e,!1):0},DWt(t,e){t=this.b9t.get(t);return t?t.LWt(this.i3.lx(),e,!0):0},FWt(t,e){t=this.b9t.get(t);return t?t.LWt(this.i3.lx(),e,!1):0},BWt(){var t=this._Wt(0);return t?t.ag():0},$Wt(){var t=this._Wt(0);return t?t.ug():0},kWt(t){t=this._Wt(t);return t?t.ag():0},WWt(t){t=this._Wt(t);return t?t.ug():0},VWt(t){t=this.b9t.get(t);return t?t.ag():0},HWt(t){t=this.b9t.get(t);return t?t.ug():0},UWt(t){t=this._Wt(t);return t?t.r$():0},jWt(t){t=this.b9t.get(t);return t?t.r$():0},XWt(t){t=this._Wt(t);return t?C33.gh(t.I5()):0},YWt(t){t=this.b9t.get(t);return t?C33.gh(t.I5()):0},qWt(){return this.i3.rFt(),this.P9t},zWt(){return this.i3.rFt(),this.L9t},JWt(){return this.i3.rFt(),this.x9t},KWt(){return this.i3.rFt(),this.N9t},ZWt(){return this.i3.hFt(),this.$9t},QWt(){return this.i3.hFt(),this.k9t},tVt(){return this.i3.hFt(),this.W9t},eVt(){return this.i3.hFt(),this.D9t},iVt(){return this.i3.hFt(),this.F9t},sVt(){return this.i3.hFt(),this.B9t},rVt(){return this.V9t},hVt(){return this.H9t},nVt(t){t=this.b9t.get(t);return t?t.tp():0},aVt(t){t=this.b9t.get(t);return t?t.cp():0},oVt(t){t=this.b9t.get(t);return t?t.lVt():0}}}{let C33=self.We,GESTURE_HOLD_THRESHOLD=15,GESTURE_HOLD_TIMEOUT=500,GESTURE_TAP_TIMEOUT=333,GESTURE_DOUBLETAP_THRESHOLD=25,lastTapX=-1e3,lastTapY=-1e3,lastTapTime=-1e4;C33.Mq.Touch.sWt=class TouchInfo extends C33.nh{constructor(){super(),this.uVt=0,this.Ky=0,this.CNt=0,this.jG=0,this.cVt=0,this.fVt=0,this.dVt=0,this.zo=0,this.Jo=0,this.CVt=0,this.pVt=0,this.Bp=0,this.$p=0,this.mVt=0,this.vVt=!1,this.SVt=!1}lh(){}ORt(t,e,i,s,r){this.uVt=s,this.Ky=r,this.jG=t,this.cVt=t,this.CNt=t,this.fVt=e,this.dVt=i,this.zo=e,this.Jo=i,this.CVt=e,this.pVt=i}AV(t,e,i,s,r,h){this.cVt=this.jG,this.jG=t,this.CVt=this.zo,this.pVt=this.Jo,this.zo=e,this.Jo=i,this.Bp=s,this.$p=r,this.mVt=h,!this.SVt&&C33.Th(this.fVt,this.dVt,this.zo,this.Jo)>=GESTURE_HOLD_THRESHOLD&&(this.SVt=!0)}p6(){return this.uVt}aWt(){return this.Ky}qO(){return this.jG}vWt(t){this.cVt=t}ag(){return this.zo}ug(){return this.Jo}r$(){var t=C33.Th(this.zo,this.Jo,this.CVt,this.pVt),e=(this.jG-this.cVt)/1e3;return 0<e?t/e:0}I5(){return C33.Eh(this.CVt,this.pVt,this.zo,this.Jo)}tp(){return this.Bp}cp(){return this.$p}lVt(){return this.mVt}SWt(t){return!this.vVt&&t-this.CNt>=GESTURE_HOLD_TIMEOUT&&!this.SVt&&C33.Th(this.fVt,this.dVt,this.zo,this.Jo)<GESTURE_HOLD_THRESHOLD&&(this.vVt=!0)}uWt(t){return!this.vVt&&t-this.CNt<=GESTURE_TAP_TIMEOUT&&!this.SVt&&C33.Th(this.fVt,this.dVt,this.zo,this.Jo)<GESTURE_HOLD_THRESHOLD?t-lastTapTime<=2*GESTURE_TAP_TIMEOUT&&C33.Th(lastTapX,lastTapY,this.zo,this.Jo)<GESTURE_DOUBLETAP_THRESHOLD?(lastTapX=-1e3,lastTapY=-1e3,lastTapTime=-1e4,"double-tap"):(lastTapX=this.zo,lastTapY=this.Jo,lastTapTime=t,"single-tap"):""}LWt(t,e,i){return void 0===e?t.Sx(0).OX(this.zo,this.Jo)[i?0:1]:(t=t.mx(e))?t.WD(this.zo,this.Jo)[i?0:1]:0}}}{let C33=self.We;C33.Mq.gVt=class ArrayPlugin extends C33.YTt{constructor(t){super(t)}lh(){super.lh()}}}{let C33=self.We;C33.Mq.gVt.lIt=class ArrayType extends C33.G_t{constructor(t){super(t)}lh(){super.lh()}m_t(){}}}{let ResizeArray2=function(e,i,s){if(i<e.length)C33.Nn(e,i);else if(i>e.length)if("function"==typeof s)for(let t=e.length;t<i;++t)e.push(s());else for(let t=e.length;t<i;++t)e.push(s)},C33=(ResizeArray=ResizeArray2,self.We),C3X=self.Ze,IInstance=self.ZD,map=(C33.Mq.gVt.Instance=class ArrayInstance extends C33.D_t{constructor(t,e){super(t),this.TVt=10,this._Vt=1,this.EVt=1,this.hc=null,this.yVt=[],this.AVt=[],this.IVt=[],this.RVt=-1,e&&(this.TVt=e[0],this._Vt=e[1],this.EVt=e[2]),this.hc=C33.Ba(this.TVt,()=>C33.Ba(this._Vt,()=>C33.Ba(this.EVt,0)))}lh(){this.hc=null,super.lh()}MVt(t,e,i){return t=Math.floor(t),e=Math.floor(e),i=Math.floor(i),0<=t&&t<this.TVt&&0<=e&&e<this._Vt&&0<=i&&i<this.EVt?this.hc[t][e][i]:0}Set(t,e,i,s){t=Math.floor(t),e=Math.floor(e),i=Math.floor(i),0<=t&&t<this.TVt&&0<=e&&e<this._Vt&&0<=i&&i<this.EVt&&(this.hc[t][e][i]=s)}DR(t,i,s){if(t=Math.floor(t),i=Math.floor(i),s=Math.floor(s),i<0&&(i=0),s<0&&(s=0),this.TVt!==(t=t<0?0:t)||this._Vt!==i||this.EVt!==s){this.TVt=t,this._Vt=i,this.EVt=s;var r=this.hc;ResizeArray2(r,t,()=>C33.Ba(i,()=>C33.Ba(s,0)));for(let e=0;e<t;++e){ResizeArray2(r[e],i,()=>C33.Ba(s,0));for(let t=0;t<i;++t)ResizeArray2(r[e][t],s,0)}}}tp(){return this.TVt}cp(){return this._Vt}CX(){return this.EVt}wVt(t,e,i,s,r){for(;0<e;){var h,n,a,o,l=Math.floor(this.i3.FL()*e);--e,0===t?(n=this.MVt(e,s,r),h=this.MVt(l,s,r),this.Set(e,s,r,h),this.Set(l,s,r,n)):1===t?(h=this.MVt(i,e,r),n=this.MVt(i,l,r),this.Set(i,e,r,n),this.Set(i,l,r,h)):2===t&&(a=this.MVt(i,s,e),o=this.MVt(i,s,l),this.Set(i,s,e,o),this.Set(i,s,l,a))}}hEt(){var t="plugins.arr.debugger",e="plugins.arr.properties",e=[{title:t+".array-properties.title",properties:[{name:e+".width.name",value:this.TVt,P8t:t=>this.DR(t,this._Vt,this.EVt)},{name:e+".height.name",value:this._Vt,P8t:t=>this.DR(this.TVt,t,this.EVt)},{name:e+".depth.name",value:this.EVt,P8t:t=>this.DR(this.TVt,this._Vt,t)},{name:e+".elements.name",value:this.TVt*this._Vt*this.EVt}]}],i=[];if(1===this._Vt&&1===this.EVt)for(let e=0;e<this.TVt;++e)i.push({name:"$"+e,value:this.hc[e][0][0],P8t:t=>this.hc[e][0][0]=t});else for(let t=0;t<this.TVt;++t)i.push({name:"$"+t,value:this.hc[t].toString()});return i.length&&e.push({title:t+".array-data.title",properties:i}),e}bVt(){return JSON.stringify({c2array:!0,size:[this.TVt,this._Vt,this.EVt],data:this.hc})}_g(){return{size:[this.TVt,this._Vt,this.EVt],data:this.hc}}Eg(t){var e=t.size;this.TVt=e[0],this._Vt=e[1],this.EVt=e[2],this.hc=t.data}OVt(){return 0<=this.RVt&&this.RVt<this.yVt.length?this.yVt[this.RVt]:0}GVt(){return 0<=this.RVt&&this.RVt<this.AVt.length?this.AVt[this.RVt]:0}PVt(){return 0<=this.RVt&&this.RVt<this.IVt.length?this.IVt[this.RVt]:0}v_t(){return self.LVt}},new WeakMap);self.LVt=class IArrayInstance extends IInstance{constructor(){super(),map.set(this,IInstance.sF().NB())}get width(){return map.get(this).tp()}get height(){return map.get(this).cp()}get depth(){return map.get(this).CX()}_5(t,e=1,i=1){C3X.ys(t),C3X.ys(e),C3X.ys(i),map.get(this).DR(t,e,i)}xVt(t,e=0,i=0){return C3X.ys(t),C3X.ys(e),C3X.ys(i),map.get(this).MVt(t,e,i)}NVt(t,e,i=0,s=0){if(C3X.ys(e),C3X.ys(i),C3X.ys(s),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid type");map.get(this).Set(e,i,s,t)}}}{let DoForEachTrigger2=function(t,e,i,s,r,h){t.u8(i),h.tF().h5().i3t(h.c6()),e.c8(s,r),t.f8(i)},C33=(DoForEachTrigger=DoForEachTrigger2,self.We);C33.Mq.gVt.Iq={USt(t,e,i){return C33.compare(this.MVt(t,0,0),e,i)},DVt(t,e,i,s){return C33.compare(this.MVt(t,e,0),i,s)},FVt(t,e,i,s,r){return C33.compare(this.MVt(t,e,i),s,r)},BVt(t){var e=this.i3,s=e.U4(),r=e.J4(),h=r.Qk(),i=e.sL(),n=i.t8(),a=i.e8(r),o=++this.RVt,l=this.yVt,u=this.AVt,c=this.IVt,f=this.TVt,d=this._Vt,C=this.EVt;if(o===this.yVt.length?(l.push(0),u.push(0),c.push(0)):(l[o]=0,u[o]=0,c[o]=0),e.r8(!1),0===t)for(let i=0;i<f;++i)for(let e=0;e<d;++e)for(let t=0;t<C;++t)l[o]=i,u[o]=e,c[o]=t,DoForEachTrigger2(s,r,h,n,a,this);else if(1===t)for(let e=0;e<f;++e)for(let t=0;t<d;++t)l[o]=e,u[o]=t,DoForEachTrigger2(s,r,h,n,a,this);else for(let t=0;t<f;++t)l[o]=t,DoForEachTrigger2(s,r,h,n,a,this);return e.r8(!0),this.RVt--,i.m8(),!1},$Vt(t,e){return C33.compare(this.MVt(this.OVt(),this.GVt(),this.PVt()),t,e)},kVt(s){var t=this.TVt,r=this._Vt,h=this.EVt,n=this.hc;for(let i=0;i<t;++i)for(let e=0;e<r;++e)for(let t=0;t<h;++t)if(n[i][e][t]===s)return!0;return!1},Zu(){return 0===this.TVt||0===this._Vt||0===this.EVt},WVt(t,e,i){let s=0;switch(t){case 0:s=this.TVt;break;case 1:s=this._Vt;break;case 2:s=this.EVt}return C33.compare(s,e,i)}}}{let CompareValues2=function(t,e){return"number"==typeof t&&"number"==typeof e?t-e:(t=t.toString())<(e=e.toString())?-1:e<t?1:0},C33=(CompareValues=CompareValues2,self.We);C33.Mq.gVt.mrt={Ku(s){var t=this.TVt,r=this._Vt,h=this.EVt,n=this.hc;for(let i=0;i<t;++i)for(let e=0;e<r;++e)for(let t=0;t<h;++t)n[i][e][t]=s},DR(t,e,i){this.DR(t,e,i)},og(t,e){this.Set(t,0,0,e)},d7(t,e,i){this.Set(t,e,0,i)},VVt(t,e,i,s){this.Set(t,e,i,s)},e8(i,s,t){var r=this.TVt,h=this._Vt;let e=this.EVt;var n=this.hc;if(0===t){var a=C33.Ba(h,()=>C33.Ba(e,s));0===i?n.push(a):n.unshift(a),this.TVt++}else if(1===t){for(let t=0;t<r;++t){var o=C33.Ba(e,s);0===i?n[t].push(o):n[t].unshift(o)}this._Vt++}else{for(let e=0;e<r;++e)for(let t=0;t<h;++t)0===i?n[e][t].push(s):n[e][t].unshift(s);this.EVt++}},m8(i,t){var s=this.TVt,r=this._Vt,e=this.EVt,h=this.hc;if(0===t)0!==s&&(0===i?h.pop():h.shift(),this.TVt--);else if(1===t){if(0!==r){for(let t=0;t<s;++t)0===i?h[t].pop():h[t].shift();this._Vt--}}else if(0!==e){for(let e=0;e<s;++e)for(let t=0;t<r;++t)0===i?h[e][t].pop():h[e][t].shift();this.EVt--}},HVt(t){var i=this.TVt,s=this._Vt,e=this.EVt,r=this.hc;if(0!==i&&0!==s&&0!==e)if(0===t)r.reverse();else if(1===t)for(let t=0;t<i;++t)r[t].reverse();else for(let e=0;e<i;++e)for(let t=0;t<s;++t)r[e][t].reverse()},UVt(t){var i=this.TVt,s=this._Vt,e=this.EVt,r=this.hc;if(0!==i&&0!==s&&0!==e)if(0===t)r.sort((t,e)=>CompareValues2(t[0][0],e[0][0]));else if(1===t)for(let t=0;t<i;++t)r[t].sort((t,e)=>CompareValues2(t[0],e[0]));else for(let e=0;e<i;++e)for(let t=0;t<s;++t)r[e][t].sort(CompareValues2)},jVt(i){var s=this.TVt,r=this._Vt,h=this.EVt;if(0!==s&&0!==r&&0!==h)if(0===i)for(let e=0;e<r;++e)for(let t=0;t<h;++t)this.wVt(i,s,0,e,t);else if(1===i)for(let e=0;e<s;++e)for(let t=0;t<h;++t)this.wVt(i,r,e,0,t);else for(let e=0;e<s;++e)for(let t=0;t<r;++t)this.wVt(i,h,e,t,0)},Qu(i,t){if(!((i=Math.floor(i))<0)){var s=this.TVt,r=this._Vt,e=this.EVt,h=this.hc;if(0===t)s<=i||(h.splice(i,1),this.TVt--);else if(1===t){if(!(r<=i)){for(let t=0;t<s;++t)h[t].splice(i,1);this._Vt--}}else if(!(e<=i)){for(let e=0;e<s;++e)for(let t=0;t<r;++t)h[e][t].splice(i,1);this.EVt--}}},CV(i,s,t){if(!((s=Math.floor(s))<0)){var r=this.TVt,h=this._Vt;let e=this.EVt;var n=this.hc;if(0===t)r<s||(n.splice(s,0,C33.Ba(h,()=>C33.Ba(e,i))),this.TVt++);else if(1===t){if(!(h<s)){for(let t=0;t<r;++t)n[t].splice(s,0,C33.Ba(e,i));this._Vt++}}else if(!(s>e)){for(let e=0;e<r;++e)for(let t=0;t<h;++t)n[e][t].splice(s,0,i);this.EVt++}}},XVt(t,e,i){var s=t.split(e);this.DR(s.length,1,1);for(let e=0,t=s.length;e<t;++e){let t=s[e];0===i?String(Number(t))===t&&(t=Number(t)):2===i&&(t=Number(t)),this.Set(e,0,0,t)}},YVt(t){let e=null;try{e=JSON.parse(t)}catch(t){return void console.error("[Construct] Failed to parse JSON: ",t)}e.c2array&&(t=e.size,this.TVt=t[0],this._Vt=t[1],this.EVt=t[2],this.hc=e.data)},qVt(t){var e=URL.createObjectURL(new Blob([this.bVt()],{type:"application/json"}));this.i3.tx(e,t)}}}{let C33=self.We;C33.Mq.gVt.vrt={MVt(t,e,i){return this.MVt(t,e||0,i||0)},sgt(){return this.TVt},rgt(){return this._Vt},zVt(){return this.EVt},JVt(){return this.OVt()},KVt(){return this.GVt()},ZVt(){return this.PVt()},QVt(){return this.MVt(this.OVt(),this.GVt(),this.PVt())},o0(){return this.MVt(0,0,0)},tHt(){return this.MVt(this.TVt-1,0,0)},eHt(i){var s=this.hc;for(let t=0,e=this.TVt;t<e;++t)if(s[t][0][0]===i)return t;return-1},iHt(e){var i=this.hc;for(let t=this.TVt-1;0<=t;--t)if(i[t][0][0]===e)return t;return-1},sHt(t){var e=[];for(let t=0;t<this.TVt;++t)e.push(this.MVt(t,0,0));return e.join(t)},gTt(){return this.bVt()}}}{let C33=self.We;C33.Mq.rHt=class AJAXPlugin extends C33.YTt{constructor(t){super(t)}lh(){super.lh()}}}{let C33=self.We;C33.Mq.rHt.lIt=class AJAXType extends C33.G_t{constructor(t){super(t)}lh(){super.lh()}m_t(){}}}{let C33=self.We;C33.Mq.rHt.Instance=class AJAXInstance extends C33.D_t{constructor(t,e){super(t),this.hHt="",this.nHt=0,this.aHt="",this.oHt=0,this.rf=-1,this.lHt=new Map,this.uHt=null,this.cHt="",this.fHt=!1,this.dHt=null,this.CHt=null,this.pHt=null,this.mHt="nwjs"===this.i3.oW(),this.mHt&&(this.dHt=__require("fs"),this.CHt=__require("path"),t=self.process||nw.process,this.pHt=this.CHt.dirname(t.execPath)+"\\")}lh(){super.lh()}async vHt(t,e,i){console.error(`[Construct] AJAX request to '${e}' (tag '${t}') failed: `,i),this.aHt=t,await this.$F(C33.Mq.rHt.Iq.SHt),this.aHt=t,await this.$F(C33.Mq.rHt.Iq.gHt)}async THt(t){this.aHt=t,await this.$F(C33.Mq.rHt.Iq._Ht),this.aHt=t,await this.$F(C33.Mq.rHt.Iq.EHt)}async yHt(t,e){e.lengthComputable&&(this.oHt=e.loaded/e.total,this.aHt=t,await this.$F(C33.Mq.rHt.Iq.AHt))}IHt(i,s,t){var e,r;this.mHt&&(e=this.dHt,r=this.pHt+s,e.existsSync(r))?e.readFile(r,{encoding:"utf8"},(t,e)=>{t?this.vHt(i,s,t):(this.hHt=e.replace(/\r\n/g,"\n"),this.THt(i))}):this.vHt(i,s,t)}async RHt(e,i){var t,s,r=this.i3.v4(),h=this.uHt;this.uHt=null;try{h?(t=await r.lW(i),h.SetArrayBufferTransfer(t),this.hHt=""):(s=await r.uW(i),this.hHt=s.replace(/\r\n/g,"\n")),this.nHt=0,this.THt(e)}catch(t){this.vHt(e,i,t)}}MHt(a,o,t,l){return new Promise(i=>{var s=t=>{this.IHt(a,o,t),i()};let r=this.uHt;this.uHt=null;try{let e=new XMLHttpRequest;e.onreadystatechange=()=>{var t;4===e.readyState&&(r?this.hHt="":this.hHt=(e.responseText||"").replace(/\r\n/g,"\n"),this.nHt=e.status,400<=e.status?this.vHt(a,o,e.status+e.statusText):(t=this.hHt.length||r&&e.response instanceof ArrayBuffer,this.mHt&&!t||!this.mHt&&0===e.status&&!t||(r&&r.SetArrayBufferTransfer(e.response),this.THt(a))),i())},e.onerror=s,e.ontimeout=s,e.onabort=s,e.onprogress=t=>this.yHt(a,t),e.open(t,o),0<=this.rf&&void 0!==e.timeout&&(e.timeout=this.rf),e.responseType=r?"arraybuffer":"text",l&&!this.lHt.has("Content-Type")&&("string"!=typeof l?e.setRequestHeader("Content-Type","application/octet-stream"):e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));for(var[h,n]of this.lHt)try{e.setRequestHeader(h,n)}catch(t){console.error(`[Construct] AJAX: Failed to set header '${h}: ${n}': `,t)}if(this.lHt.clear(),this.cHt){try{e.overrideMimeType(this.cHt)}catch(t){console.error("[Construct] AJAX: failed to override MIME type: ",t)}this.cHt=""}this.fHt&&(e.withCredentials=!0,this.fHt=!1),l?e.send(l):e.send()}catch(t){s(t)}})}hEt(){var t="plugins.ajax.debugger";return[{title:t+".title",properties:[{name:t+".last-status-code",value:this.nHt},{name:t+".last-data",value:this.hHt}]}]}_g(){return{lastData:this.hHt,lastStatusCode:this.nHt}}Eg(t){this.hHt=t.lastData,this.nHt=t.hasOwnProperty("lastStatusCode")?t.lastStatusCode:0,this.aHt="",this.oHt=0}}}{let C33=self.We;C33.Mq.rHt.Iq={EHt(t){return C33.gr(this.aHt,t)},_Ht(){return!0},gHt(t){return C33.gr(this.aHt,t)},SHt(){return!0},AHt(t){return C33.gr(this.aHt,t)}}}{let C33=self.We;C33.Mq.rHt.mrt={async Request(t,e){this.i3.NLt()&&C33.Ca(e)&&this.i3.v4().nW()?await this.RHt(t,e):await this.MHt(t,e,"GET",null)},async wHt(t,e){this.i3.NLt()&&this.i3.v4().nW()?await this.RHt(t,e):await this.MHt(t,e,"GET",null)},async bHt(t,e,i,s){await this.MHt(t,e,s,i)},async OHt(t,e,i,s){i&&(i=i.TSt(this.wi))&&(i=i.NB().GetArrayBufferReadOnly(),await this.MHt(t,e,s,i))},GHt(t){this.rf=1e3*t},PHt(t,e){this.lHt.set(t,e)},LHt(t){t&&(t=t.TSt(this.wi))&&(this.uHt=t.NB())},xHt(t){this.cHt=t},NHt(t){this.fHt=!!t}}}{let C33=self.We;C33.Mq.rHt.vrt={DHt(){return this.hHt},FHt(){return this.nHt},BHt(){return this.oHt},Tag(){return this.aHt}}}{let C33=self.We;C33.Mq.$Ht=class aekiro_prouiSingleGlobalPlugin extends C33.YTt{constructor(t){super(t)}lh(){super.lh()}}}{let C33=self.We;C33.Mq.$Ht.lIt=class aekiro_prouiSingleGlobalType extends C33.G_t{constructor(t){super(t)}lh(){super.lh()}m_t(){}}}{let C33=self.We;C33.Mq.$Ht.Instance=class aekiro_prouiSingleGlobalInstance extends C33.D_t{constructor(t,e){super(t,e),this.ignoreInput=!1,this.kHt=e[0],this.WHt=globalThis.VHt,this.WHt.init(this.Dx()),this.HHt=null,this.Dx().F3().addEventListener("beforelayoutchange",()=>{this.WHt.UHt=!1})}jHt(){this.WHt.XHt={},this.WHt.YHt(),this.WHt.qHt(),this.WHt.zHt(),this.WHt.UHt=!0}JHt(t){for(var e,i=0,s=[C33.hot.KHt,C33.hot.aekiro_checkbox,C33.hot.aekiro_radiobutton,C33.hot.aekiro_dialog].length;i<s;i++){var r=this.Dx().gxt?this.Dx().gxt:this.Dx()._pluginManager;if(r=C33?.gN?.KB?C33.gN.KB(C33.hot.ZHt):r._behaviorsByCtor.get(C33.hot.ZHt))for(var h,n=0,a=(h=r.r5()).length;n<a;n++)if(e=h[n].yvt().QHt)for(var o in e)e[o].tUt(t)}}eUt(t,e){for(var i=t.YN().constructor,s=0,r=e.length;s<r;s++)if(i==e[s])return!0;return!1}lh(){super.lh()}_g(){return{}}Eg(t){}}}{let Tween=self.TWEEN,C33=self.We;globalThis.iUt={},globalThis.sUt=class AudioSource{constructor(t,e){this.runtime=e,this.rUt(t),C33.Mq.Audio&&(this.hUt=C33.Mq.Audio.mrt.PlayByName)}rUt(t){t=t.split(";"),this.fileName=t[0],this.volume=parseInt(t[1]),this.volume||(this.volume=0)}nUt(){var t;return this.audio||(t=this.runtime.prt(C33.Mq.Audio))&&(this.audio=t.UN().NB()),this.audio}tUt(t){this.volume=t}play(){var t;this.fileName&&((t=this.nUt())?this.hUt.call(t,1,this.fileName,0,this.volume,0,"sound"):console.error("ProUI: Please add the Audio plugin to the project."))}},globalThis.aUt=class EventManager{constructor(t){this.map={},this.inst=t}on(t,e,i){this.map[t]||(this.map[t]=[]);var s=!1,e={callback:e,once:s=i?i.once:s,eventName:t};return this.map[t].push(e),e}oUt(t,e){e=e||{};var i,s=this.map[t];if(s)for(var r=0,h=s.length;r<h;r++)if((i=s[r]).callback(e.args),i.once){if(this.removeListener(i),0==(h=s.length))break;r--}null==e.propagate&&(e.propagate=!0),null==e.bubble&&(e.bubble=!0);var n=Object.assign({},e);if(!(n.propagate=!1)===e.bubble&&this.inst&&(a=this.inst.yvt().ZHt).parent&&a.parent.yvt().ZHt.lUt.oUt(t,n),!((n=Object.assign({},e)).bubble=!1)===e.propagate&&this.inst)for(var a,o=(a=this.inst.yvt().ZHt).children,r=0,h=o.length;r<h;r++)o[r].yvt().ZHt.lUt.oUt(t,e)}removeListener(t){var e=this.map[t.eventName],t=e.indexOf(t);e.splice(t,1)}},globalThis.VHt={XHt:{},uUt:!1,cUt:!1,lUt:new globalThis.aUt,HHt:0,init:function(t){this.runtime||(this.runtime=t,this.runtime.F3().addEventListener("instancedestroy",function(t){t=t.YB.yvt().ZHt;t&&t.Release2()}))},fUt:function(){for(var t in this.XHt)this.XHt[t].Sk()&&this.dUt(t)},CUt:function(t){var e,i;t&&!this.uUt&&((e=t.yvt().ZHt).name||(e.name="o"+t.CF()),this.XHt.hasOwnProperty(i=e.name)&&(console.error("Aekiro Hierarchy: GameObject already exist with name: %s !",i),e.name="o"+t.CF(),i=e.name),this.XHt[i]=t)},dUt:function(t){delete this.XHt[t]},pUt:function(t,e){if(!this.XHt[t])throw new Error("ProUI-goManager.setGoName() : game object to be renamed not found");if(this.XHt.hasOwnProperty(e))throw new Error("ProUI-goManager.setGoName() : game object already exist with name: "+e);this.XHt[e]=this.XHt[t],this.dUt(t)},zr:function(t){for(var e in this.XHt)if(this.XHt[e]==t)return e;return!1},mUt:function(t){for(var e in this.XHt)this.XHt[e]==t&&this.dUt(e)},Di:function(t,e,i,s){t=this.runtime.l5(this.runtime.W5t(t),e,i,s),e=this.runtime.U4();return e.c5(!0),e.c5(!1),t},clone:function(t,e,i,s,r,h,n){var a;if(!this.XHt[e])return(i="string"==typeof i?this.XHt[i]:i)&&(a=i.Cx(),r=(a=this.vUt(r,h,0,a.ag(),a.ug(),a.I5())).x,h=a.y),(a=this.SUt(t,e,i,s,r,h,n)).yvt().ZHt.children_update(),a.yvt().ZHt.updateZindex(),a.yvt().ZHt.lUt.oUt("cloned"),a;console.error("Aekiro GameObject: GameObject already exist with name: %s !",e)},SUt:function(t,e,i,s,r,h,n){this.uUt=!0;var a=this.Di(t.type,s);this.uUt=!1;try{l=JSON.parse(t.json)}catch(t){return void console.error("Failed to load from JSON string: ",t)}a.Eg(l,!0);var o,l=a.yvt().ZHt,l=(a.yvt().gUt=t.gUt,a.NB().aEt(l.acts.wgt,s),l.name="",l.TUt="",e&&(l.name=e),this.CUt(a),i&&i.yvt().ZHt.children_add(a),a.Cx());l.og(r,!0),l.fg(h,!0),l.f7(),n&&n(a),a.Tq();for(var u=0,c=t.children.length;u<c;u++)o=t.children[u],this.SUt(o,null,a,s,o.x,o.y,n);return a},vUt:function(t,e,i,s,r,h){var n={};return n.x=(t-s)*Math.cos(h)+(e-r)*Math.sin(h),n.y=-(t-s)*Math.sin(h)+(e-r)*Math.cos(h),n.angle=i-h,n},YHt:function(){var t=this.runtime.gxt||this.runtime._pluginManager,t=C33?.gN?.KB?C33.gN.KB(C33.hot.ZHt):t._behaviorsByCtor.get(C33.hot.ZHt);if(t)for(var e=t.r5(),i=e.length,s=0;s<i;s++)e[s].Sk()||this.CUt(e[s])},zHt:function(){var t,e,i,s={};for(t in this.XHt)(i=(e=this.XHt[t]).yvt().ZHt).TUt&&this.XHt[i.TUt]&&this.XHt[i.TUt].yvt().ZHt.children_add(e),i.parentSameLayer&&(s[t]=e);for(t in s)(i=(e=s[t]).yvt().ZHt).children_addFromLayer(i.Cx().mx());for(t in this.XHt)this.XHt[t].yvt().ZHt.children_update();this.lUt.oUt("childrenRegistred")},qHt:function(){for(var t in this.XHt)this.XHt[t].yvt().ZHt.Q7()}},globalThis.iUt.button=class aekiro_button extends C33.eyt{constructor(t,e){super(t)}_Ut(){this.EUt=this.Dx().prt(C33.Mq.$Ht),this.EUt&&(this.EUt=this.EUt.UN().NB()),this.EUt.eUt(this.qB(),[C33.Mq.Qst,C33.Mq.NinePatch,C33.Mq.TiledBg],"Pro UI: Button behavior is only applicable to Sprite, 9-patch or tiled backgrounds objects."),this.inst=this.qB(),this.yUt=this.inst.Cx(),this.WHt=globalThis.VHt,this.AUt=globalThis.IUt.AUt,this.RUt=globalThis.RUt,(this.qB().yvt().KHt=this).MUt=this.qB().YN().constructor==C33.Mq.Qst,this.wUt={bUt:0,OUt:1,GUt:2,DISABLED:3,PUt:4},this.LUt=C33.di.yi,this.xUt=!1,this.NUt=!1,this.DUt=!1,this.FUt=[],this.BUt=[],this.initProps={v8t:null,animationName:null,color:null},this.$Ut={x:0,y:0}}hyt(){this.ZHt=this.qB().yvt().ZHt,this.kUt=this.qB().NB(),this.WUt=this.kUt.aEt,this.VUt=this.kUt.oEt,this.HUt=this.qB().YN().constructor.mrt,this.UUt=this.qB().YN().constructor.vrt,this.jUt(),this.XUt()}jUt(){this.YUt=!0,this.MUt&&(""!=this.frame_normal||""!=this.frame_hover||""!=this.frame_clicked||""!=this.frame_disabled)||(this.YUt=!1),this.state=this.isEnabled?this.wUt.bUt:this.wUt.DISABLED,this.qUt(),this.zUt(),this.JUt(),this.KUt(),this.ZUt()}QUt(){var t=this.initProps.color;this.initProps.color=new C33.$a,this.initProps.color.Fo(t)}tjt(){this.ejt(this.state),this.setColor(this.state)}XUt(){this.ijt=!0,this.eEt()}sjt(t){this.isEnabled!=t&&(this.isEnabled=t,this.state=t?this.wUt.bUt:this.wUt.DISABLED,this.ejt(this.state),this.setColor(this.state))}rjt(t,e){var i;return t=(t=null==t?"":t).split("/"),t=isNaN(parseInt(t[0]))?(i=t[0],parseInt(t[1])):(i=t[1],parseInt(t[0])),{f:t=isNaN(t)?e?e.f:this.initProps.v8t:t,a:i=isNaN(i)&&i?i:e?e.a:this.initProps.animationName}}hjt(t,e){return t=t?(t=t.split(","),new C33.$a(t[0]/255,t[1]/255,t[2]/255,1)):void 0!==e?e:this.initProps.color}zUt(){var t=this.qB().yvt(),e=(t.QHt||(t.QHt={}),globalThis.sUt);this.QHt=t.QHt,this.QHt.click=new e(this.clickSound,this.Dx()),this.QHt.njt=new e(this.hoverSound,this.Dx()),this.QHt.focus=new e(this.focusSound,this.Dx())}ZUt(){this.ajt=[],this.ajt[this.wUt.bUt]=this.hjt(this.color_normal),this.ajt[this.wUt.OUt]=this.hjt(this.color_hover,null),this.ajt[this.wUt.GUt]=this.hjt(this.color_clicked,null),this.ajt[this.wUt.DISABLED]=this.hjt(this.color_disabled),this.ajt[this.wUt.PUt]=this.hjt(this.color_focus,null)}setColor(t){var e;this.DUt?this.state==this.wUt.bUt?e=this.ajt[this.wUt.PUt]||this.ajt[this.wUt.bUt]:(e=this.ajt[t]||this.ajt[this.wUt.PUt],this.ajt[t]||this.ajt[this.wUt.PUt]||(e=this.ajt[this.wUt.bUt])):e=this.ajt[t],e&&(this.yUt.M7(e),this.yUt.f7())}qUt(){this.MUt&&(this.initProps.v8t=null===this.initProps.v8t?this.kUt.oEt(this.UUt.f9t):this.initProps.v8t,this.initProps.animationName=this.initProps.animationName||this.kUt.oEt(this.UUt.p9t)),this.initProps.color=this.initProps.color||this.yUt.R7()}JUt(){this.YUt&&(this.BUt[this.wUt.bUt]=this.rjt(this.frame_normal),this.BUt[this.wUt.OUt]=this.rjt(this.frame_hover,{f:null,a:null}),this.BUt[this.wUt.GUt]=this.rjt(this.frame_clicked,{f:null,a:null}),this.BUt[this.wUt.DISABLED]=this.rjt(this.frame_disabled),this.BUt[this.wUt.PUt]=this.rjt(this.frame_focus,{f:null,a:null}))}ejt(t){var e;this.YUt&&((t=this.DUt?this.state==this.wUt.bUt?(e=(null===this.BUt[this.wUt.PUt].f?this.BUt[this.wUt.bUt]:this.BUt[this.wUt.PUt]).f,this.BUt[this.wUt.PUt].a||this.BUt[this.wUt.bUt].a):null!=this.BUt[t].f||this.BUt[t].a?(e=(null===this.BUt[t].f?this.BUt[this.wUt.PUt]:this.BUt[t]).f,this.BUt[t].a||this.BUt[this.wUt.PUt].a):(e=this.BUt[this.wUt.bUt].f,this.BUt[this.wUt.bUt].a):(e=this.BUt[t].f,this.BUt[t].a))&&this.kUt.aEt(this.HUt.L8t,t,0),null!==e)&&this.kUt.aEt(this.HUt.x8t,e,0)}KUt(){this.ojt={x:0,y:0,width:0,height:0},this.ljt={x:0,y:0,width:0,height:0},this.ujt=new Tween.Tween(this.ojt)}cjt(t){this.fjt={x:this.ojt.x,y:this.ojt.y,width:this.ojt.width,height:this.ojt.height},1==t?this.ujt.easing(Tween.Easing.Quadratic.Out).to(this.ljt,200):2==t?this.ujt.easing(Tween.Easing.Elastic.Out).to(this.ljt,500):3!=t&&4!=t&&5!=t&&6!=t||this.ujt.easing(Tween.Easing.Quadratic.Out).to(this.ljt,100)}djt(t,e){var i=this.yUt,s={x:0,y:0,width:0,height:0},r=.1;return"click"==e?r=this.Cjt:"hover"==e?r=this.pjt:"focus"==e&&(r=this.mjt),1==t||2==t?(s.width=i.tp()*r,s.height=i.cp()*r):3==t?s.y=i.cp()*r:4==t?s.y=-i.cp()*r:5==t?s.x=-i.tp()*r:6==t&&(s.x=i.tp()*r),s}vjt(t,e){this.yUt.k7(t,e)&&this.Sjt(t,e)}gjt(t,e){this.LUt||(this.yUt.k7(t,e)?this.NUt||this.Tjt(t,e):this.NUt&&this._jt())}Ejt(t){this.isEnabled&&t!=this.DUt&&((this.DUt=t)?(this.ejt(this.state),this.setColor(this.state),this.QHt.focus.play(),0<this.focusAnimation&&(this.ujt.stop(),this.yjt=this.djt(this.focusAnimation,"focus"),this.ljt.width+=this.yjt.width,this.ljt.height+=this.yjt.height,this.ljt.x+=this.yjt.x,this.ljt.y+=this.yjt.y,this.cjt(this.focusAnimation),this.eEt(),this.ujt.start(1e3*this.Dx().vL())),this.Ajt&&this.Ajt()):(this.ejt(this.wUt.bUt),this.setColor(this.wUt.bUt),this.ejt(this.state),this.setColor(this.state),0<this.focusAnimation&&(this.ujt.stop(),this.ljt.width-=this.yjt.width,this.ljt.height-=this.yjt.height,this.ljt.x-=this.yjt.x,this.ljt.y-=this.yjt.y,this.cjt(this.focusAnimation),this.eEt(),this.ujt.start(1e3*this.Dx().vL())),this.Ijt&&this.Ijt()))}Tjt(t,e){this.Rjt(t,e)&&!this.xUt&&(this.NUt=!0,this.state=this.wUt.OUt,this.ejt(this.state),this.setColor(this.state),this.QHt.njt.play(),this.Mjt&&this.Mjt(),0<this.hoverAnimation)&&(this.yUt,this.ujt.stop(),this.wjt=this.djt(this.hoverAnimation,"hover"),this.ljt.width+=this.wjt.width,this.ljt.height+=this.wjt.height,this.ljt.x+=this.wjt.x,this.ljt.y+=this.wjt.y,this.cjt(this.hoverAnimation),this.eEt(),this.ujt.start(1e3*this.Dx().vL()))}async Sjt(t,e){this.Rjt(t,e)&&!this.xUt&&(this.xUt=!0,this.$Ut.x=t,this.$Ut.y=e,0<this.clickAnimation&&(this.ujt.stop(),this.bjt=this.djt(this.clickAnimation,"click"),this.ljt.width+=this.bjt.width,this.ljt.height+=this.bjt.height,this.ljt.x+=this.bjt.x,this.ljt.y+=this.bjt.y,this.cjt(this.clickAnimation),this.eEt(),this.ujt.start(1e3*this.Dx().vL())),!this.DUt&&0<this.focusAnimation&&(this.ujt.stop(),this.yjt=this.djt(this.focusAnimation,"focus"),this.ljt.width+=this.yjt.width,this.ljt.height+=this.yjt.height,this.ljt.x+=this.yjt.x,this.ljt.y+=this.yjt.y,this.cjt(this.focusAnimation),this.eEt(),this.ujt.start(1e3*this.Dx().vL())),this.DUt||this.Ajt&&this.Ajt(),this.DUt=!0,this.state=this.wUt.GUt,this.ejt(this.state),this.setColor(this.state),this.QHt.click.play())}async Ojt(t,e){if(this.xUt){if(this.xUt=!1,0<this.clickAnimation&&this.state!=this.wUt.bUt&&(this.ujt.stop(),this.ljt.width-=this.bjt.width,this.ljt.height-=this.bjt.height,this.ljt.x-=this.bjt.x,this.ljt.y-=this.bjt.y,this.cjt(this.clickAnimation),this.eEt(),this.ujt.start(1e3*this.Dx().vL())),this.yUt.k7(t,e)){if(this.LUt?this.state=this.wUt.bUt:this.state=this.wUt.OUt,this.Gjt()&&(10<Math.abs(this.$Ut.x-t)||10<Math.abs(this.$Ut.y-e)))return;this.Pjt()}else this.state=this.wUt.bUt;this.ejt(this.state),this.setColor(this.state)}}Pjt(){for(var t=0,e=this.FUt.length;t<e;t++)this.FUt[t]();this.Ljt&&this.Ljt()}_jt(){this.NUt=!1,this.state!=this.wUt.DISABLED&&(this.state=this.wUt.bUt),this.ejt(this.state),this.setColor(this.state),0<this.hoverAnimation&&(this.ljt.width-=this.wjt.width,this.ljt.height-=this.wjt.height,this.ljt.x-=this.wjt.x,this.ljt.y-=this.wjt.y),0<this.clickAnimation&&this.xUt&&(this.ljt.width-=this.bjt.width,this.ljt.height-=this.bjt.height,this.ljt.x-=this.bjt.x,this.ljt.y-=this.bjt.y),(0<this.hoverAnimation||0<this.clickAnimation&&this.xUt)&&(this.ujt.stop(),this.ujt.easing(Tween.Easing.Quadratic.Out).to(this.ljt,100),this.eEt(),this.ujt.start(1e3*this.Dx().vL())),this.xjt&&this.xjt()}Njt(t){this.ignoreInput=t}QJ(){var t;this.ijt?(this.tjt(),this.$_t(),this.ijt=!1):(this.Djt&&(this.Djt=!1),this.ujt.isPlaying&&(this.ujt.update(1e3*this.Dx().vL()),this.Djt=!0),this.Djt?(t=this.yUt,this.yUt.m7(this.ojt.x-this.fjt.x,this.ojt.y-this.fjt.y),this.yUt.DR(t.tp()+this.ojt.width-this.fjt.width,t.cp()+this.ojt.height-this.fjt.height),this.yUt.f7(),this.fjt={x:this.ojt.x,y:this.ojt.y,width:this.ojt.width,height:this.ojt.height}):this.$_t())}Rjt(t,e){var i;return void 0!==t&&void 0!==e||(t=this.yUt.T7().gl()+10,e=this.yUt.T7().Tl()+10),1!==this.ignoreInput&&!this.EUt.ignoreInput&&(0==this.ignoreInput||(i=this.yUt.mx().uD()&&this.yUt.uD(),t=this.Fjt(t,e),e=!1,2===this.ignoreInput&&this.RUt&&(e=this.RUt.Bjt(this.yUt.mx().f4())),this.isEnabled&&i&&!e&&t))}Fjt(t,e){var i=!0,s=this.AUt["l"+this.inst.Cx().mx().f4()];return i=s?s.Cx().k7(t,e):i}Gjt(){return!!this.AUt["l"+this.inst.Cx().mx().f4()]}$jt(e){null==e&&(e=20);var i=this.AUt["l"+this.inst.Cx().mx().f4()];return!!i&&new Promise(t=>{setTimeout(()=>{i.yvt().aekiro_scrollView.isMoving()?(console.log("moving"),t(!0)):t(!1)},e)})}lh(){super.lh()}},globalThis.iUt.button.Iq={Tjt(){return!0},_jt(){return!0},qu(){return this.isEnabled},kjt(){return this.Rjt()},Wjt(){return!0},Vjt(){return!0},Kgt(){return this.DUt},Hjt(){return!0}},globalThis.iUt.button.mrt={sjt(t){this.sjt(t)},Ujt(t){this.Ejt(t)},jjt(t){this.Njt(t)},Xjt(t){this.QHt.click.tUt(t)},Yjt(t){this.QHt.njt.tUt(t)},qjt(){var t,e;this.xUt||(t=this.yUt.T7().gl()+10,e=this.yUt.T7().Tl()+10,this.Sjt(t,e),setTimeout(()=>{t=this.yUt.T7().gl()-50,e=this.yUt.T7().Tl()-50,this.Ojt(t,e),this.Pjt()},100))},zjt(t){this.frame_normal=t,this.JUt(),this.ejt(this.state)},Jjt(t){this.frame_hover=t,this.JUt()},Kjt(t){this.frame_clicked=t,this.JUt()},Zjt(t){this.frame_disabled=t,this.JUt()},Qjt(t){this.frame_focus=t,this.JUt()},tXt(t){this.clickAnimation=t,this.KUt()},eXt(t){this.hoverAnimation=t,this.KUt()},iXt(t){this.focusAnimation=t,this.KUt()},sXt(t){this.color_normal=t,this.ZUt()},rXt(t){this.color_hover=t,this.ZUt()},hXt(t){this.color_clicked=t,this.ZUt()},nXt(t){this.color_focus=t,this.ZUt()}},globalThis.iUt.aXt=class aekiro_checkbox extends globalThis.iUt.button{constructor(t,e){super(t,e)}oXt(){this._Ut(),this.BUt=[[],[]]}JUt(){var t;this.YUt=!0,!this.MUt||""==this.frame_normal&&""==this.frame_hover&&""==this.frame_disabled?this.YUt=!1:(this.lXt=this.kUt.oEt(this.UUt.f9t),this.uXt=this.kUt.oEt(this.UUt.p9t),t=this.frame_normal.split(","),this.BUt[0][this.wUt.bUt]=this.rjt(t[0]),this.BUt[1][this.wUt.bUt]=this.rjt(t[1]),t=this.frame_hover.split(","),this.BUt[0][this.wUt.OUt]=this.rjt(t[0],{f:null,a:null}),this.BUt[1][this.wUt.OUt]=this.rjt(t[1],{f:null,a:null}),t=this.frame_disabled.split(","),this.BUt[0][this.wUt.DISABLED]=this.rjt(t[0]),this.BUt[1][this.wUt.DISABLED]=this.rjt(t[1]),t=this.frame_focus.split(","),this.BUt[0][this.wUt.PUt]=this.rjt(t[0],{f:null,a:null}),this.BUt[1][this.wUt.PUt]=this.rjt(t[1],{f:null,a:null}))}ejt(t){var e,i;this.YUt&&(t==this.wUt.GUt&&(t=this.wUt.bUt),i=this.value?1:0,(i=this.DUt?this.state==this.wUt.bUt?(e=(null===this.BUt[i][this.wUt.PUt].f?this.BUt[i][this.wUt.bUt]:this.BUt[i][this.wUt.PUt]).f,this.BUt[i][this.wUt.PUt].a||this.BUt[i][this.wUt.bUt].a):null!=this.BUt[i][t].f||this.BUt[i][t].a?(e=(null===this.BUt[i][t].f?this.BUt[i][this.wUt.PUt]:this.BUt[i][t]).f,this.BUt[i][t].a||this.BUt[i][this.wUt.PUt].a):(e=this.BUt[i][this.wUt.bUt].f,this.BUt[i][this.wUt.bUt].a):(e=this.BUt[i][t].f,this.BUt[i][t].a))&&this.kUt.aEt(this.HUt.L8t,i,0),null!==e)&&this.kUt.aEt(this.HUt.x8t,e,0)}ZUt(){var t;this.cXt=this.yUt.R7(),this.ajt=[[],[]],t=this.color_normal.split(";"),this.ajt[0][this.wUt.bUt]=this.hjt(t[0]),this.ajt[1][this.wUt.bUt]=this.hjt(t[1],this.ajt[0][this.wUt.bUt]),t=this.color_hover.split(";"),this.ajt[0][this.wUt.OUt]=this.hjt(t[0],null),this.ajt[1][this.wUt.OUt]=this.hjt(t[1],this.ajt[0][this.wUt.OUt]),t=this.color_clicked.split(";"),this.ajt[0][this.wUt.GUt]=this.hjt(t[0],null),this.ajt[1][this.wUt.GUt]=this.hjt(t[1],this.ajt[0][this.wUt.GUt]),t=this.color_disabled.split(";"),this.ajt[0][this.wUt.DISABLED]=this.hjt(t[0]),this.ajt[1][this.wUt.DISABLED]=this.hjt(t[1]),this.ajt[0][this.wUt.DISABLED],t=this.color_focus.split(";"),this.ajt[0][this.wUt.PUt]=this.hjt(t[0],null),this.ajt[1][this.wUt.PUt]=this.hjt(t[1],this.ajt[0][this.wUt.PUt])}setColor(t){var e,i=this.value?1:0;this.DUt?this.state==this.wUt.bUt?e=this.ajt[i][this.wUt.PUt]||this.ajt[i][this.wUt.bUt]:(e=this.ajt[i][t]||this.ajt[i][this.wUt.PUt],this.ajt[i][t]||this.ajt[i][this.wUt.PUt]||(e=this.ajt[i][this.wUt.bUt])):e=this.ajt[i][t],e&&(this.yUt.M7(e),this.yUt.f7())}fXt(t){return null!=t&&""!==t}dXt(t){this.value!=(t=(t=!!t)?1:0)&&(this.value=t,this.ejt(this.state),this.setColor(this.state))}},globalThis.IUt={AUt:{},add:function(t){this.AUt["l"+t.Cx().mx().f4()]=t},remove:function(t){for(var e in this.AUt)this.AUt[e]==t&&delete this.AUt[e]},CXt:function(t,e,i){for(var s,r=t.Dx().BL().PY(),h=!1,n=t.Cx().mx().f4()+1,a=r;n<a;n++)if((s=this.AUt["l"+n])&&s.Cx().mx().uD()&&s.Cx().k7(e,i)){h=!0;break}return h}},globalThis.RUt={pXt:[],mXt:function(t){this.pXt.push(t)},vXt:function(t){t=this.pXt.indexOf(t);-1!=t&&this.pXt.splice(t,1)},SXt:function(){return this.pXt.length},gXt:function(){for(var t=0;t<this.pXt.length;t++)if(this.pXt[t].yvt().aekiro_dialog.isModal)return!0;return!1},TXt:function(t){for(var e=0,i=this.pXt.length;e<i;e++)if(t<this.pXt[e].Cx().mx().f4())return!0;return!1},Bjt:function(t){for(var e,i=0,s=this.pXt.length;i<s;i++)if(t<(e=this.pXt[i]).Cx().mx().f4()&&e.yvt().aekiro_dialog.isModal)return!0;return!1}}}{let C33=self.We;C33.Mq.$Ht.Iq={_Xt(){return globalThis.RUt.SXt()},EXt(){return!0}}}{let C33=self.We;C33.Mq.$Ht.mrt={yXt(t){this.ignoreInput=t},yIt(t,e,i,s,r,h){t=JSON.parse(t),globalThis.VHt.clone(t,r,h,e,i,s).yvt().ZHt.updateZindex()},AXt(t){this.JHt(t)},ORt(){this.jHt()}}}{let C33=self.We;C33.Mq.$Ht.vrt={}}{let C33=self.We;C33.Mq.IXt=class Chadori_CloudSave_Plugin extends C33.YTt{constructor(t){super(t)}lh(){super.lh()}}}{let C33=self.We;C33.Mq.IXt.lIt=class Chadori_CloudSave_Type extends C33.G_t{constructor(t){super(t)}lh(){super.lh()}m_t(){}}}{let isCloudSaveOverwrite2=function(t){switch(t){case"merge":return!1;case"overwrite":return!0;default:return!1}},C33=(isCloudSaveOverwrite=isCloudSaveOverwrite2,self.We),DOM_COMPONENT_ID2="chadori-mobile-cloud-save",map=(C33.Mq.IXt.Instance=class Chadori_CloudSave_Instance extends C33.D_t{constructor(t,e){super(t,DOM_COMPONENT_ID2),this.zLt=!1,e&&(this.zLt=e[0]),this.RXt=!1,this.MXt=!1,this._K=!1,this.wXt="",this.KLt=!1,this.bXt=!1,this.OXt={},this.GXt={},this.Y_t([["on-mobile-sdk",t=>this.PXt(...t)],["on-initialized",t=>this.LXt(...t)],["on-saved",t=>this.xXt(...t)],["on-save-failed",t=>this.NXt(...t)],["on-loaded",t=>this.DXt(...t)],["on-load-failed",t=>this.FXt(...t)],["on-update",t=>this.BXt(...t)],["on-debugger",t=>this.$Xt(...t)]]),this.kXt=C33.Mq.IXt.Iq,this.WXt()}lh(){super.lh()}_g(){return{}}Eg(t){}VXt(t){this.zLt&&console.log("[Cloud Save]",t)}HXt(t){return 0!==t}PXt(){this.RXt=!0}BXt(){this.FF(this.kXt.UXt)}$Xt(){this.KLt=!0,this.FF(this.kXt.jXt)}xXt(t){this.OXt=t,this.FF(this.kXt.XXt)}NXt(t){this.wXt=t,this.FF(this.kXt.YDt),this.FF(this.kXt.gHt)}DXt(t){this.OXt=t,this.FF(this.kXt.YXt)}FXt(t){this.wXt=t,this.FF(this.kXt.HDt),this.FF(this.kXt.gHt)}LXt(t){this._K||(this.bXt=t,this.MXt=!1,this._K=!0,this.FF(this.kXt.qXt))}WXt(){this.q_t("start-sdk",[this.zLt])}Crt(){this.RXt?this._K?this.VXt("SDK has already been initialized."):this.MXt?this.VXt("SDK initialization is already in progress."):(this.MXt=!0,this.q_t("initialize",[])):this.VXt("SDK is not ready.")}zXt(t,e){this._K&&this.q_t("save",[t,e])}XY(){this._K&&this.q_t("load",[])}JXt(t,e){this.GXt[t]=e}KXt(t){t=this.HXt(t);this.zXt(this.GXt,t),this.GXt={}}ZXt(t,e){e=this.HXt(e),t=JSON.parse(t);this.zXt(t,e)}QXt(){return"number"==typeof this.OXt.timestamp?this.OXt.timestamp:0}Vit(t){return"number"==typeof this.OXt[t]||"string"==typeof this.OXt[t]?this.OXt[t]:""}v_t(){return self.tYt}},new WeakMap);self.tYt=class ICloudSaveInstance extends self.ZD{constructor(){super(),map.set(this,self.ZD.sF().NB())}eYt(){return map.get(this)._K}iYt(){return map.get(this).bXt}sYt(){return map.get(this).KLt}rYt(){return map.get(this).QXt()}data(){return map.get(this).OXt}error(){return map.get(this).wXt}initialize(){map.get(this).Crt()}save(t,e){e=isCloudSaveOverwrite2(e);map.get(this).zXt(t,e)}load(){map.get(this).XY()}}}self.We.Mq.IXt.Iq={hYt(){return this.bXt},UXt(){return!0},qXt(){return!0},YXt(){return!0},XXt(){return!0},gHt(){return!0},jXt(){return!0},ySt(){return this.KLt},HDt(){return!0},YDt(){return!0},nYt(){return this._K}},self.We.Mq.IXt.mrt={aYt(){this.Crt()},_W(){this.XY()},oYt(t,e){this.ZXt(t,e)},JXt(t,e){this.JXt(t,e)},KXt(t){this.KXt(t)}},self.We.Mq.IXt.vrt={lYt(){return this.QXt()},uYt(){return JSON.stringify(this.OXt)},ni(t){return this.Vit(t)},Error(){return JSON.stringify(this.wXt)}};{let C33=self.We;C33.Mq.cYt=class FirestoreBasicPlugin extends C33.YTt{constructor(t){super(t)}lh(){super.lh()}}}{let C33=self.We;C33.Mq.cYt.lIt=class FirestoreBasicType extends C33.G_t{constructor(t){super(t)}lh(){super.lh()}m_t(){}}}{let DOM_COMPONENT_ID="sparsha_firebase_firestorebasic",C3=self.We;C3.Mq.cYt.Instance=class FirestoreBasicInstance extends C3.D_t{constructor(t,e){super(t,DOM_COMPONENT_ID),e&&(this.fYt=this.i3.gq(e[0]),this.dYt=this.fYt.dh,this.CYt=e[1],this.pYt=e[2]),this.mYt={},this.vYt="",this.SYt={},this.gYt={},this.TYt={};var i=this;this.X_t("on_complete"+this.wi.TRt,function(t){var e="",e="CustomGetDoc"===t.action?"Custom":"User-Account";i.gYt[t.id]=t.readData,t.noExist&&(i.gYt[t.id]={}),i.TYt[t.id]=t.noExist,i._Yt(e,"read",t.id,t.locationLink,t.readData)})}_Yt(t,e,i,s,r){var h=this.fYt.yvt().get("enableDebug");switch(this.mYt[e+i]=1,e){case"write":h&&console.log("%cWRITE SUCCESSFUL - FIRESTORE BASIC\nsdkObject: "+this.dYt+"\ncategory: "+t+"\nid: "+i+"\nlocation: "+s+"\ndata: "+r+"\n ","color: #7463db"),this.FF(C3.Mq.cYt.Iq.EYt);break;case"read":h&&(this.TYt[i]?console.log("%cREAD DOES NOT EXIST - FIRESTORE BASIC\nsdkObject: "+this.dYt+"\ncategory: "+t+"\nid: "+i+"\nlocation: "+s+"\n ","color: #ff0000"):console.log("%cREAD SUCCESSFUL - FIRESTORE BASIC\nsdkObject: "+this.dYt+"\ncategory: "+t+"\nid: "+i+"\nlocation: "+s+"\ndata:","color: #00a8a8",r)),this.FF(C3.Mq.cYt.Iq.yYt);break;case"increment":h&&console.log("%cINCREMENT SUCCESSFUL - FIRESTORE BASIC\nsdkObject: "+this.dYt+"\ncategory: "+t+"\nid: "+i+"\nlocation: "+s+"\nvalue: "+r+"\n ","color: #7463db"),this.FF(C3.Mq.cYt.Iq.AYt);break;case"remove":h&&console.log("%cREMOVE SUCCESSFUL - FIRESTORE BASIC\nsdkObject: "+this.dYt+"\ncategory: "+t+"\nid: "+i+"\nlocation: "+s+"\n ","color: #7463db"),this.FF(C3.Mq.cYt.Iq.IYt)}this.mYt[e+i]=0}RYt(keys,separator,data,enforceString){keys="'"+keys+"'",keys=keys.replace(/ /g,""),keys=keys.replace(/,/g,"','"),keys=eval("["+keys+"]");for(var n=keys.length,SendData=(data=data.toString(),data=data.replace(/\t/g,"\t"),data=data.replace(/\\/g,"\\\\"),data=data.replace(/'/g,"\\'"),data="'"+data+"'",data=data.replace(/\n/g,"\\n"),data=data.replace(eval("/"+separator+"/g"),"','"),data=eval("["+data+"]"),{}),i=0;i<n;i++)enforceString||0!=isNaN(data[i])||"0x"==data[i].substring(0,2)||(data[i]=parseFloat(data[i])),SendData[keys[i]]=data[i];return SendData}MYt(keys){return keys="'"+keys+"'",keys=keys.replace(/ /g,""),keys=keys.replace(/,/g,"','"),keys=eval("["+keys+"]"),keys}wYt(t,e,i){var s=this.fYt.yvt().get("enableDebug");this.bYt={},this.OYt={},this.vYt=t,this.SYt[i+e]=t,s&&console.error("ERROR REPORT - FIRESTORE BASIC\nsdkObject:"+this.dYt+"\naction-category: "+i+"\nid: "+e+"\nerror: "+t),this.bYt[i]=1,this.OYt[i+e]=1,this.FF(C3.Mq.cYt.Iq.gHt),this.FF(C3.Mq.cYt.Iq.GYt),this.bYt[i]=0,this.OYt[i+e]=0}lh(){super.lh()}_g(){return{}}Eg(t){}hEt(){return[{title:"FirestoreBasic",properties:[]}]}Jrt(t){return 0}iht(t,e){}}}self.We.Mq.cYt.Iq={EYt(t){return void 0!==this.mYt["write"+t]&&1===this.mYt["write"+t]},yYt(t){return void 0!==this.mYt["read"+t]&&1===this.mYt["read"+t]},PYt(t){return void 0!==this.TYt[t]&&1!==this.TYt[t]},GYt(t,e){var i=["read","write","increment","remove"];return void 0!==this.OYt[i[t]+e]&&1===this.OYt[i[t]+e]},gHt(t){var e=["read","write","increment","remove"];return void 0!==this.bYt[e[t]]&&1===this.bYt[e[t]]},AYt(t){return void 0!==this.mYt["increment"+t]&&1===this.mYt["increment"+t]},IYt(t){return void 0!==this.mYt["remove"+t]&&1===this.mYt["remove"+t]}},self.We.Mq.cYt.mrt={async LYt(t,e,i,s,r,h,n){e={action:"CustomSetDoc",sdkName:this.dYt,locationLink:t,dataObj:this.RYt(e,i,s,h),replace:r},i=await this.z_t("domAsync_sparsha_fFirstore",e);i.success?this._Yt("Custom","write",n,t+"/",s):this.wYt(i.error,n,"write")},async xYt(t,e,i,s,r,h){var n=this.fYt.yvt().get("authExpBasic").myUID,t={action:"UserSetDoc",sdkName:this.dYt,locationLink:this.CYt+"/"+n,dataObj:this.RYt(t,e,i,r),replace:s},e=await this.z_t("domAsync_sparsha_fFirstore",t);e.success?this._Yt("User-Account","write",h,this.CYt+"/"+n+"/",i):this.wYt(e.error,h,"write")},async NYt(t,e,i){var s={action:"CustomGetDoc",sdkName:this.dYt,uid:this.wi.TRt,locationLink:t,sync:e,id:i},s=await this.z_t("domAsync_sparsha_fFirstore",s);s.success?(this.gYt[s.id]=s.readData,this.TYt[s.id]=s.noExist,e||this._Yt("Custom","read",i,t,s.readData)):this.wYt(s.error,i,"read")},async DYt(t,e){var i=this.fYt.yvt().get("authExpBasic").myUID,s={action:"UserGetDoc",sdkName:this.dYt,uid:this.wi.TRt,locationLink:this.CYt+"/"+i,sync:t,id:e},s=await this.z_t("domAsync_sparsha_fFirstore",s);s.success?(this.gYt[s.id]=s.readData,this.TYt[s.id]=s.noExist,t||this._Yt("User-Account","read",e,this.CYt+"/"+i,s.readData)):this.wYt(s.error,e,"read")},async FYt(t,e){var i={action:"CustomRemoveDoc",sdkName:this.dYt,locationLink:t},i=await this.z_t("domAsync_sparsha_fFirstore",i);i.success?this._Yt("Custom","remove",e,t+"/"):this.wYt(i.error,e,"remove")},async BYt(t){var e=this.fYt.yvt().get("authExpBasic").myUID,e={action:"UserRemoveDoc",sdkName:this.dYt,locationLink:this.CYt+"/"+e},e=await this.z_t("domAsync_sparsha_fFirstore",e);e.success?this._Yt("User-Account","remove",t,locationLink+"/"):this.wYt(e.error,t,"remove")},async $Yt(t,e,i){e={action:"CustomRemoveField",sdkName:this.dYt,locationLink:t,fields:this.MYt(e)},e=await this.z_t("domAsync_sparsha_fFirstore",e);e.success?this._Yt("Custom","remove",i,t+"/"):this.wYt(e.error,i,"remove")},async kYt(t,e){var i=this.fYt.yvt().get("authExpBasic").myUID,i={action:"UserRemoveField",sdkName:this.dYt,locationLink:this.CYt+"/"+i,fields:this.MYt(t)},t=await this.z_t("domAsync_sparsha_fFirstore",i);t.success?this._Yt("User-Account","remove",e,locationLink+"/"):this.wYt(t.error,e,"remove")},async WYt(locationLink,fields,increments,id){var options_DOM={action:"CustomIncrement",sdkName:this.dYt,locationLink:locationLink,fields:this.MYt(fields),increments:eval("["+increments+"]")},res=await this.z_t("domAsync_sparsha_fFirstore",options_DOM);res.success?this._Yt("Custom","increment",id,locationLink+"/",increments):this.wYt(res.error,id,"increment")},async VYt(fields,increments,id){var myUID=this.fYt.yvt().get("authExpBasic").myUID,options_DOM={action:"UserIncrement",sdkName:this.dYt,locationLink:this.CYt+"/"+myUID,fields:this.MYt(fields),increments:eval("["+increments+"]")},res=await this.z_t("domAsync_sparsha_fFirstore",options_DOM);res.success?this._Yt("User-Account","increment",id,locationLink+"/",increments):this.wYt(res.error,id,"increment")},async HYt(t,e,i,s){var r=this.fYt.yvt().get("authExpBasic").myUID,t={action:"UserGetLeaderboard",sdkName:this.dYt,uid:this.wi.TRt,locationLink:this.pYt,orderChild:t,size:e,sync:i,id:s},e=await this.z_t("domAsync_sparsha_fFirstore",t);e.success?(this.gYt[e.id]=e.readData,this.TYt[e.id]=e.noExist,i||this._Yt("User-Account","read",s,this.CYt+"/"+r,e.readData)):this.wYt(e.error,s,"read")},async UYt(t,e,i,s,r,h){var n=this.fYt.yvt().get("authExpBasic").myUID,t={action:"UserSetLeaderboard",sdkName:this.dYt,locationLink:this.pYt+"/"+n,dataObj:this.RYt(t,e,i,r),replace:s},e=await this.z_t("domAsync_sparsha_fFirstore",t);e.success?this._Yt("User-Account","write",h,this.CYt+"/"+n+"/",i):this.wYt(e.error,h,"write")},async jYt(t,e,i,s,r){this.fYt.yvt().get("authExpBasic").myUID;e={action:"CustomGetLeaderboard",sdkName:this.dYt,uid:this.wi.TRt,locationLink:t,orderChild:e,size:i,sync:s,id:r},i=await this.z_t("domAsync_sparsha_fFirstore",e);i.success?(this.gYt[i.id]=i.readData,this.TYt[i.id]=i.noExist,s||this._Yt("Custom","read",r,t,i.readData)):this.wYt(i.error,r,"read")}},self.We.Mq.cYt.vrt={error(){return this.vYt},XYt(t,e){return void 0!==this.SYt[t+e]?this.SYt[t+e]:""},YYt(t){return void 0!==this.gYt[t]?JSON.stringify(this.gYt[t]):""},qYt(t,e){return void 0!==this.gYt[e]&&void 0!==this.gYt[e][t]?this.gYt[e][t]:""},zYt(t,e,i){if(void 0!==this.gYt[i])for(var s=0;s<this.gYt[i].length;s++)if(void 0!==this.gYt[i][s]&&this.gYt[i][s][t]===e)return s+1;return 0},JYt(t,e,i){return void 0!==this.gYt[i]&&void 0!==this.gYt[i][t]&&void 0!==this.gYt[i][t][e]?this.gYt[i][t][e]:""},KYt(t,e){if(void 0!==this.gYt[e])for(var i=0;i<this.gYt[e].length;i++)if(void 0!==this.gYt[e][i]&&this.gYt[e][i]["~docName"]===t)return i+1;return 0},ZYt(t){var e=this.fYt.yvt().get("authExpBasic").myUID;if(void 0!==this.gYt[t])for(var i=0;i<this.gYt[t].length;i++)if(void 0!==this.gYt[t][i]&&this.gYt[t][i]["~docName"]===e)return i+1;return 0}};{let C33=self.We;C33.Mq.QYt=class FirebaseSDKPlugin extends C33.YTt{constructor(t){super(t)}lh(){super.lh()}}}{let C33=self.We;C33.Mq.QYt.lIt=class FirebaseSDKType extends C33.G_t{constructor(t){super(t)}lh(){super.lh()}m_t(){}}}{globalThis.tqt=void 0;let C33=self.We,DOM_COMPONENT_ID2="sparsha_firebase_sdk";C33.Mq.QYt.Instance=class FirebaseSDKInstance extends C33.D_t{constructor(t,e){super(t,DOM_COMPONENT_ID2);var i,t="",s=(e&&(this.debug=e[0],i=e[1],this.eqt=e[2],this.autoLoad=e[3],t=e[4],this.iqt=e[5],this.sqt=e[6],this.rqt=e[7],this.hqt=e[8],this.nqt=e[9],this.aqt=e[10],this.oqt=e[11],this.lqt=e[12],this.captchaType=e[13],this.uqt=e[14],this.autoRefCapToken=e[15],this.cqt=e[16],this.remoteConfigTime=e[17],this.remoteConfigDefault=e[18],this.remove_app=e[19],this.remove_auth=e[20],this.remove_database=e[21],this.remove_firestore=e[22],this.remove_storage=e[23],this.remove_analytics=e[24],this.remove_appcheck=e[25],this.fqt=!1,this.dqt=!1),this.Cqt=C33.Mq.QYt.Iq,this.dYt=this.wct.dh,t?(this.pqt=t.replace("apiKey:",'"apiKey":').replace("authDomain:",'"authDomain":').replace("databaseURL:",'"databaseURL":').replace("projectId:",'"projectId":').replace("storageBucket:",'"storageBucket":').replace("messagingSenderId:",'"messagingSenderId":').replace("appId:",'"appId":').replace("measurementId:",'"measurementId":').replace(";",""),this.pqt=JSON.parse("{"+this.pqt.split("{").pop())):this.pqt={},this.mqt=0,this.vqt={},this.Sqt={},this.gqt={},this.Tqt={},this._qt={},this.Eqt=0,this.wct.yvt().set("enableDebug",this.debug),this.wct.yvt().set("remoteConfigDefault",JSON.parse(this.remoteConfigDefault)),this.wct.yvt().set("configJSON",this.pqt),(-1==i||(this.yqt=this.i3.gq(i),this.Aqt=this.yqt.dh,this.Aqt==this.dYt))&&(globalThis.tqt=this.dYt),this.Iqt=0,this.autoLoad&&this.Rqt("init"),this);this.X_t("run_sparsha_fSDK"+this.wi.TRt,function(t){"success"!==t.status||"init"!==t.action&&"reconnect"!==t.action||s.Iqt&&(s.wct.yvt().set("authExpBasic",t.userBasic),s.wct.yvt().set("authExpPro",t.userPro),s.Iqt=0,"init"===t.action?(s.debug&&console.log("FIREBASE SDK LOADED\nsdkObject: "+s.dYt),s.FF(s.Cqt.YXt)):(s.debug&&console.log("FIREBASE SDK RECONNECTED\nsdkObject: "+s.dYt),s.FF(s.Cqt.Mqt)))})}lh(){super.lh()}_g(){return{}}Eg(t){}Rqt(t){t={action:t,sdkName:this.dYt,plugin_uid:this.wi.TRt,recaptchatoken:this.uqt,captchaType:this.captchaType,autoRefCapToken:this.autoRefCapToken,remove_app:this.remove_app,remove_auth:this.remove_auth,remove_database:this.remove_database,remove_storage:this.remove_storage,remove_firestore:this.remove_firestore,remove_analytics:this.remove_analytics,remove_appcheck:this.remove_appcheck,enable_auth:this.sqt,enable_database:this.rqt,enable_storage:this.nqt,enable_appcheck:this.lqt,enable_firestore:this.hqt,enable_analytics:this.aqt,enable_messaging:this.fqt,enable_remoteconfig:this.cqt,enable_performance:this.oqt,remoteConfigTime:this.remoteConfigTime,remoteConfigDefault:JSON.parse(this.remoteConfigDefault),firebaseConfig:this.pqt,version:this.iqt,debug:this.debug,autoLoad:this.autoLoad,tseconds:this.eqt};this.Iqt=1,this.q_t("domSync_sparsha_fSDK",t)}}}self.We.Mq.QYt.Iq={wqt(){return!!this.mqt},YXt(){return!0},bqt(){return!0},Oqt(){return!0},Mqt(){return!0}},self.We.Mq.QYt.mrt={Gqt(t){t&&(this.pqt=t.replace("apiKey:",'"apiKey":').replace("authDomain:",'"authDomain":').replace("databaseURL:",'"databaseURL":').replace("projectId:",'"projectId":').replace("storageBucket:",'"storageBucket":').replace("messagingSenderId:",'"messagingSenderId":').replace("appId:",'"appId":').replace("measurementId:",'"measurementId":').replace(";",""),this.pqt=JSON.parse("{"+this.pqt.split("{").pop()),this.wct.yvt().set("configJSON",this.pqt)),!1===this.autoLoad&&this.Rqt("init")},Pqt(){var t={action:"disconnect",sdkName:this.dYt};this.q_t("domSync_sparsha_fSDK",t),this.debug&&console.log("FIREBASE DISCONNECTED\nsdkObject: "+this.dYt)},Lqt(t){t&&(this.pqt=t.replace("apiKey:",'"apiKey":').replace("authDomain:",'"authDomain":').replace("databaseURL:",'"databaseURL":').replace("projectId:",'"projectId":').replace("storageBucket:",'"storageBucket":').replace("messagingSenderId:",'"messagingSenderId":').replace("appId:",'"appId":').replace("measurementId:",'"measurementId":').replace(";",""),this.pqt=JSON.parse("{"+this.pqt.split("{").pop()),this.wct.yvt().set("configJSON",this.pqt)),this.Rqt("reconnect")}},self.We.Mq.QYt.vrt={};{let C33=self.We;C33.Mq.xqt=class FirebaseAuthPlugin extends C33.YTt{constructor(t){super(t)}lh(){super.lh()}}}{let C33=self.We;C33.Mq.xqt.lIt=class FirebaseAuthType extends C33.G_t{constructor(t){super(t)}lh(){super.lh()}m_t(){}}}{let C33=self.We,DOM_COMPONENT_ID2="sparsha_firebase_auth";C33.Mq.xqt.Instance=class FirebaseAuthInstance extends C33.D_t{constructor(t,e){super(t,DOM_COMPONENT_ID2),e&&(this.fYt=this.i3.gq(e[0]),this.dYt=this.fYt.dh,this.Cqt=C33.Mq.xqt.Iq,this.Nqt="",this.Dqt="",this.Fqt="",this.Bqt={},this.$qt={},this.OYt={});var i=this;this.X_t("run_sparsha_fAuthBasic"+this.wi.TRt,function(t){"PopupOauthSafe"===t.action&&i.kqt(t,t.providerNo)})}lh(){super.lh()}_g(){return{}}Eg(t){}kqt(t,e){var i,s=this.fYt.yvt().get("enableDebug"),r=["google","facebook","apple","twitter","github","microsoft","yahoo"];t.success?(t.userPro.userCredential=t.cred,t.userPro.addInfoJSON=t.addInfoJSON,t.userPro.isNewUser=t.isNewUser,1===e&&t.picChange?(t.userBasic.photoURL=t.newPicUrl,s&&console.log("PHOTO-URL UPDATED\nsdkObject: "+this.dYt+"\nNew PhotoURL:"+t.newPicUrl+"\n ")):1===e&&(i={code:t.errorCode,message:t.errorMessage},this.Wqt(i,"popup-"+r[e])),this.fYt.yvt().set("authExpBasic",t.userBasic),this.fYt.yvt().set("authExpPro",t.userPro),this.FF(this.Cqt.Vqt)):(i={code:t.errorCode,message:t.errorMessage},this.Wqt(i,"popup-"+r[e]))}Wqt(t,e){var i=this.fYt.yvt().get("enableDebug");this.OYt={},this.Nqt=t.code,this.Dqt=t.message,this.Bqt[e]=this.Nqt,this.$qt[e]=this.Dqt,this.Fqt=e,i&&console.error("ERROR REPORT - AUTH BASIC\nsdkObject: "+this.dYt+"\nerrorActionCode: "+this.Fqt+"\nerrorcode: "+t.code+"\nerrormessage: "+t.message+"\n "),this.OYt[e]=1,this.FF(C33.Mq.xqt.Iq.Hqt),this.FF(C33.Mq.xqt.Iq.GYt),this.OYt[e]=0}}}self.We.Mq.xqt.Iq={Uqt(){return!!this.fYt.yvt().get("authExpBasic").isEmailVerified},jqt(){return!0},Xqt(){return!0},Yqt(){return!0},qqt(){return!0},zqt(){return!0},Jqt(){return!0},Kqt(){return!0},Zqt(){var t=this.fYt.yvt().get("authExpBasic");return null!=t&&1==t.isSignedIn},Qqt(){return!0},tzt(){return!0},ezt(){return!0},Hqt(){return!0},GYt(t){var e=["sign-up-email","sign-in-email","sign-up-name","sign-in-name","update-email","update-password","verify-email","reset-password","render-recaptcha","get-otp","submit-otp","popup-google","popup-facebook","popup-apple","popup-twitter","popup-github","popup-microsoft","popup-yahoo","update-profile","delete-user","sign-out"];return void 0!==this.OYt[e[t]]&&1==this.OYt[e[t]]},Vqt(){return!0},izt(){var t=this.fYt.yvt().get("authExpBasic");return null!=t&&!0===t.isNewUser}},self.We.Mq.xqt.mrt={async szt(t,e){var t={action:"Signupemail",sdkName:this.dYt,email:t,password:e},e=await this.z_t("domAsync_sparsha_fAuth",t);e.success?(e.userPro.userCredential=e.cred,e.userPro.addInfoJSON=e.addInfoJSON,e.userPro.isNewUser=!0,this.fYt.yvt().set("authExpBasic",e.userBasic),this.fYt.yvt().set("authExpPro",e.userPro),this.FF(this.Cqt.Vqt)):(t={code:e.errorCode,message:e.errorMessage},this.Wqt(t,"sign-up-email"))},async rzt(t,e){var t={action:"Signinemail",sdkName:this.dYt,email:t,password:e},e=await this.z_t("domAsync_sparsha_fAuth",t);e.success?(e.userPro.userCredential=e.cred,e.userPro.addInfoJSON=e.addInfoJSON,e.userPro.isNewUser=!1,this.fYt.yvt().set("authExpBasic",e.userBasic),this.fYt.yvt().set("authExpPro",e.userPro),this.FF(this.Cqt.Vqt)):(t={code:e.errorCode,message:e.errorMessage},this.Wqt(t,"sign-in-email"))},async hzt(){var t=this.fYt.yvt().get("enableDebug"),e={action:"VerifyEmail",sdkName:this.dYt},e=await this.z_t("domAsync_sparsha_fAuth",e);e.success?(t&&console.log("VERIFICATION EMAIL SENT\nsdkObject: "+this.dYt+"\n "),this.FF(this.Cqt.jqt)):(t={code:e.errorCode,message:e.errorMessage},this.Wqt(t,"verify-email"))},async nzt(t){var e,i=this.fYt.yvt().get("enableDebug"),s={action:"UpdateEmail",sdkName:this.dYt,newEmail:t},s=await this.z_t("domAsync_sparsha_fAuth",s);s.success?((e=this.fYt.yvt().get("authExpBasic")).myEmail=t,this.fYt.yvt().set("authExpBasic",e),i&&console.log("EMAIL UPDATED\nsdkObject: "+this.dYt+"\nNew email: "+t+"\n "),this.FF(this.Cqt.Xqt)):(e={code:s.errorCode,message:s.errorMessage},this.Wqt(e,"update-email"))},async azt(t,e,i){var s,r=this.fYt.yvt().get("enableDebug"),e={action:"Signupname",sdkName:this.dYt,username:t,password:e,domain:i},i=await this.z_t("domAsync_sparsha_fAuth",e);i.success?(i.userPro.userCredential=i.cred,i.userPro.addInfoJSON=i.addInfoJSON,i.userPro.isNewUser=!0,i.nameChange?(i.userBasic.username=t,r&&console.log("USERNAME UPDATED\nsdkObject: "+this.dYt+"\nNew Username:"+t+"\n ")):(s={code:i.errorCode,message:i.errorMessage},this.Wqt(s,"sign-up-name")),this.fYt.yvt().set("authExpBasic",i.userBasic),this.fYt.yvt().set("authExpPro",i.userPro),this.FF(this.Cqt.Vqt)):(s={code:i.errorCode,message:i.errorMessage},this.Wqt(s,"sign-up-name"))},async ozt(t,e,i){t={action:"Signinname",sdkName:this.dYt,username:t,password:e,domain:i},e=await this.z_t("domAsync_sparsha_fAuth",t);e.success?(e.userPro.userCredential=e.cred,e.userPro.addInfoJSON=e.addInfoJSON,e.userPro.isNewUser=!1,this.fYt.yvt().set("authExpBasic",e.userBasic),this.fYt.yvt().set("authExpPro",e.userPro),this.FF(this.Cqt.Vqt)):(i={code:e.errorCode,message:e.errorMessage},this.Wqt(i,"sign-in-name"))},async lzt(t){var e=this.fYt.yvt().get("enableDebug"),t={action:"ResetPassword",sdkName:this.dYt,email:t},t=await this.z_t("domAsync_sparsha_fAuth",t);t.success?(e&&console.log("PASSWORD RESET EMAIL SENT\nsdkObject: "+this.dYt+"\n "),this.FF(this.Cqt.Yqt)):(e={code:t.errorCode,message:t.errorMessage},this.Wqt(e,"reset-password"))},async uzt(t){var e=this.fYt.yvt().get("enableDebug"),i={action:"UpdatePassword",sdkName:this.dYt,password:t},i=await this.z_t("domAsync_sparsha_fAuth",i);i.success?(e&&console.log("PASSWORD UPDATED\nsdkObject: "+this.dYt+"\nNew password: "+t+"\n "),this.FF(this.Cqt.qqt)):(e={code:i.errorCode,message:i.errorMessage},this.Wqt(e,"update-password"))},async czt(t){var e=this.fYt.yvt().get("enableDebug"),t={action:"SendPhoneNumber",sdkName:this.dYt,phoneNumber:t},t=await this.z_t("domAsync_sparsha_fAuth",t);t.success?(e&&console.log("OTP SENT TO PHONE\nsdkObject: "+this.dYt+"\n "),this.FF(this.Cqt.Jqt)):(e={code:t.errorCode,message:t.errorMessage},this.Wqt(e,"get-otp"))},async fzt(t){var t={action:"SubmitOtp",sdkName:this.dYt,otp:t},t=await this.z_t("domAsync_sparsha_fAuth",t);t.success?(t.userPro.userCredential=t.cred,t.userPro.addInfoJSON=t.addInfoJSON,t.userBasic.isNewUser=t.isNewUser,this.fYt.yvt().set("authExpBasic",t.userBasic),this.fYt.yvt().set("authExpPro",t.userPro),this.FF(this.Cqt.Vqt)):(t={code:t.errorCode,message:t.errorMessage},this.Wqt(t,"submit-otp"))},async dzt(t){var e=this.fYt.yvt().get("enableDebug"),t=0==t?"Light":"Dark",t={action:"RenderRecaptcha",sdkName:this.dYt,theme:t},t=await this.z_t("domAsync_sparsha_fAuth",t);t.success?(e&&console.log("reCaptcha VERIFIED\nsdkObject: "+this.dYt+"\n "),this.FF(this.Cqt.Kqt)):(e={code:t.errorCode,message:t.errorMessage},this.Wqt(e,"render-recaptcha"))},Czt(){var t={action:"RemoveRecaptcha",sdkName:this.dYt};this.q_t("domSync_sparsha_fAuth",t)},async pzt(){var t={action:"SignOut",sdkName:this.dYt},t=await this.z_t("domAsync_sparsha_fAuth",t);t.success?(this.fYt.yvt().set("authExpPro",{}),this.fYt.yvt().set("authExpBasic",{}),this.FF(this.Cqt.Qqt)):(t={code:t.errorCode,message:t.errorMessage},this.Wqt(t,"sign-out"))},async mzt(t,e){var i=this.fYt.yvt().get("enableDebug"),s=this.fYt.yvt().get("authExpBasic"),r={},h=""!=t&&""!=e?(r={displayName:t,photoURL:e},"BOTH"):""==t&&""!=e?(r={photoURL:e},"PHOTO"):""!=t&&""==e?(r={displayName:t},"NAME"):"NONE";"NONE"!=h&&(r={action:"UpdateUsername",sdkName:this.dYt,updateProfOb:r},(r=await this.z_t("domAsync_sparsha_fAuth",r)).success?("BOTH"==h?(s.username=t,s.photoURL=e,i&&console.log("PROFILE UPDATED\nsdkObject: "+this.dYt+"\nNew Username: "+t+"\nNew PhotoURL: "+e+"\n ")):"PHOTO"==h?(s.photoURL=e,i&&console.log("PROFILE UPDATED\nsdkObject: "+this.dYt+"\nNew PhotoURL: "+e+"\n ")):"NAME"==h&&(s.username=t,i)&&console.log("PROFILE UPDATED\nsdkObject: "+this.dYt+"\nNew Username: "+t+"\n "),this.fYt.yvt().set("authExpBasic",s),this.FF(this.Cqt.tzt)):(e={code:r.errorCode,message:r.errorMessage},this.Wqt(e,"update-profile")))},async vzt(){var t=this.fYt.yvt().get("enableDebug"),e={action:"DeleteUser",sdkName:this.dYt},e=await this.z_t("domAsync_sparsha_fAuth",e);e.success?(this.fYt.yvt().set("authExpPro",{}),this.fYt.yvt().set("authExpBasic",{}),t&&console.log("USER DELETED\nsdkObject: "+this.dYt+"\n "),this.FF(this.Cqt.ezt)):(t={code:e.errorCode,message:e.errorMessage},this.Wqt(t,"delete-user"))},Szt(){this.Nqt="",this.Dqt="",this.Fqt="",this.Bqt={},this.$qt={}},async gzt(t,e){e={action:"PopupOauth",sdkName:this.dYt,providerNo:t,googlePromptSelect:e},e=await this.z_t("domAsync_sparsha_fAuth",e);this.kqt(e,t)},Tzt(t,e,i){t={action:"PopupOauthSafe",plugin_uid:this.wi.TRt,sdkName:this.dYt,providerNo:t,buttonId:e,googlePromptSelect:i};this.q_t("domSync_sparsha_fAuth",t)}},self.We.Mq.xqt.vrt={userName(){return this.fYt.yvt().get("authExpBasic").username},_zt(){return this.fYt.yvt().get("authExpBasic").myUID},email(){return this.fYt.yvt().get("authExpBasic").myEmail},Ezt(){return this.fYt.yvt().get("authExpBasic").photoURL},provider(){return this.fYt.yvt().get("authExpBasic").providerID},yzt(){return this.fYt.yvt().get("authExpBasic").phoneNo},errorCode(){return this.Nqt},errorMessage(){return this.Dqt},Azt(){return this.Fqt},Izt(t){return null!=this.Bqt[t]?this.Bqt[t]:""},Rzt(t){return null!=this.$qt[t]?this.$qt[t]:""}};{let C33=self.We;C33.Mq.Text=class TextPlugin extends C33.YTt{constructor(t){super(t)}lh(){super.lh()}}}{let C33=self.We;C33.Mq.Text.lIt=class TextType extends C33.G_t{constructor(t){super(t)}lh(){super.lh()}m_t(){}YY(t){}QY(){}}}{let C33=self.We,C3X=self.Ze,TEMP_COLOR_ARRAY=[0,0,0],TEXT=0,ENABLE_BBCODE=1,FONT=2,SIZE=3,LINE_HEIGHT=4,BOLD=5,ITALIC=6,COLOR=7,HORIZONTAL_ALIGNMENT=8,VERTICAL_ALIGNMENT=9,WRAPPING=10,TEXT_DIRECTION=11,ICON_SET=12,INITIALLY_VISIBLE=13,ORIGIN=14,READ_ALOUD=15,HORIZONTAL_ALIGNMENTS=["left","center","right"],VERTICAL_ALIGNMENTS=["top","center","bottom"],TEXT_DIRECTIONS=["ltr","rtl"],WORD_WRAP_MODES=["word","cjk","character"],tempRect=new C33.Rect,tempQuad=new C33.Jl,tempColor=new C33.$a,tempVec2=C33.oh(C33.qo),BBCODE_TAG_TO_HTML=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]),map=(C33.Mq.Text.Instance=class TextInstance extends C33.uEt{constructor(t,e){super(t),this.s3="",this.Mzt=!0,this.wzt="Arial",this.bzt=12,this.Ozt=0,this.TI=!1,this._I=!1,this.YS=C33.oh(C33.$a),this.MI=0,this.wI=0,this.GI="word",this.LI=0,this.Gzt="auto",this.Pzt=1,this.Lzt=null,this.xzt="",this.Nzt=!1,this.Dzt=!1,this.Fzt=null,this.Bzt=-1,this.$zt=-1,this.kzt=0,this.Wzt=C33.oh(C33.J1.mS,this.i3.OS(),{timeout:5}),this.Wzt.nR=()=>this.i3.Ex(),this.Vzt=()=>this.Hzt(),this.Uzt=!1,e&&(this.s3=e[TEXT],this.Mzt=!!e[ENABLE_BBCODE],this.wzt=e[FONT],this.bzt=e[SIZE],this.Ozt=e[LINE_HEIGHT],this.TI=!!e[BOLD],this._I=!!e[ITALIC],this.MI=e[HORIZONTAL_ALIGNMENT],this.wI=e[VERTICAL_ALIGNMENT],this.GI=WORD_WRAP_MODES[e[WRAPPING]],this.LI=e[TEXT_DIRECTION],this.jzt(this.i3.gq(e[ICON_SET])),t=e[COLOR],this.YS.ja(t[0],t[1],t[2]),this.Cx().oD(e[INITIALLY_VISIBLE]),this.Dzt=!!e[READ_ALOUD]),this.Xzt(),this.Yzt()}lh(){this.jzt(null),this.qzt(),this.Fzt&&(this.Fzt.lh(),this.Fzt=null),this.Wzt.lh(),this.Wzt=null,super.lh()}Xzt(){var t=this.Wzt;t.n3(this.s3),t.uR(this.Mzt),this.Wzt.dI()&&this.Lzt?this.Wzt.ZC(this.Dx().LDt(this.Lzt)):this.Wzt.ZC(null),t.cR("nearest"!==this.i3.L4()),t.fR(this.wzt),t.mR(this.Ozt),t.SR(this.TI),t.TR(this._I),t.KS(this.YS),t.MR(HORIZONTAL_ALIGNMENTS[this.MI]),t.bR(VERTICAL_ALIGNMENTS[this.wI]),t.GR(this.GI),t.LR(TEXT_DIRECTIONS[this.LI])}zzt(){var t=this.Cx(),e=(this.Wzt.dR(this.bzt),this.Wzt.pR(t.qwt()),t.mx());let i;"auto"===this.Gzt?i=e.Gj(t.S7()):"fixed"===this.Gzt&&(i=this.Pzt),t.MB()&&i!==this.Wzt.FR()&&t.Kbt(!0),this.Wzt.DR(t.tp(),t.cp(),i)}jzt(t){t&&(t.uU()||t.YN().constructor!==C33.Mq.Qst)||t!==this.Lzt&&(this.Lzt&&this.Lzt.F3().removeEventListener("animationframeimagechange",this.Vzt),this.Lzt=t,this.Lzt&&this.Lzt.F3().addEventListener("animationframeimagechange",this.Vzt),this.Xzt(),this.Nzt=!1,this.i3.Ex())}Hzt(){this.i3.xDt(this.Lzt),this.i3.Ex(),this.Uzt=!0}Yzt(){if(this.Dzt){let t=this.s3;this.Mzt&&(t=C33.Lr.XC(t)),this.Fzt?this.Fzt.n3(t):this.Fzt=C33.oh(C33.e3,this.i3,t)}else this.Fzt&&(this.Fzt.lh(),this.Fzt=null)}Jg(t){var e,i,s,r,h,n,a,o=this.Cx(),l=(this.zzt(),this.Uzt&&(this.Uzt=!1,this.Wzt.dI())&&this.Lzt&&this.Wzt.ZC(this.Dx().LDt(this.Lzt)),this.Wzt.T_());l&&(e=o.mx(),0===o.I5()&&0===e.I5()&&0===o.S7()&&!o.MB()&&e.KU()?(i=o.E7(),[n,a]=e.zD(i.Qh(),i.tn()),[i,s]=e.zD(i.hn(),i.nn()),r=n-Math.round(n),h=a-Math.round(a),[n,a]=(tempRect.set(n,a,i,s),tempRect.offset(-r,-h),tempQuad.vu(tempRect),t.Bb(t.sO())),this.i3.K6().r9(t,n,a),t.Ab(l),t.Mv(tempQuad,this.Wzt.CM()),e.n9(t)):(t.Ab(l),o.MB()?this.i8t(o,t):this.s8t(o,t)))}s8t(t,e){let i=t.E7();this.i3.N4()&&(i=this.Jzt(i)),e.Mv(i,this.Wzt.CM())}i8t(e,t){var i=e.Jbt();if(e.Zbt()){e.bbt(tempRect,tempQuad,!1);let t=tempQuad;this.i3.N4()&&(t=this.Jzt(t)),i.zg(e.wB(),t,this.Wzt.CM()),e.Kbt(!1)}i.Jg(t)}Jzt(t){var e=t.Qh()-Math.round(t.Qh()),i=t.tn()-Math.round(t.tn());return 0==e&&0==i?t:(tempQuad._(t),tempQuad.offset(-e,-i),tempQuad)}gEt(){var t=this.Wzt.T_();return t?[t.tp(),t.cp()]:[100,100]}TEt(){return this.Wzt.CM()}yEt(){return!1}_g(){var t={t:this.s3,c:this.YS.toJSON(),fn:this.wzt,ps:this.bzt};return this.Mzt&&(t.bbc=this.Mzt),0!==this.MI&&(t.ha=this.MI),0!==this.wI&&(t.va=this.wI),"word"!==this.GI&&(t.wr=this.GI),0!==this.Ozt&&(t.lho=this.Ozt),this.TI&&(t.b=this.TI),this._I&&(t.i=this._I),-1!==this.$zt&&(t.tw={st:this.Bzt,en:this.$zt,l:this.kzt}),this.Lzt&&(t.ioc=this.Lzt.SU()),"fixed"===this.Gzt&&(t.fs=this.Pzt),t}Eg(t){var e;this.qzt(),this.s3=t.t,this.YS.Fo(t.c),this.wzt=t.fn,this.bzt=t.ps,this.Mzt=!!t.hasOwnProperty("bbc")&&t.bbc,this.MI=t.hasOwnProperty("ha")?t.ha:0,this.wI=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")?(e=t.wr,this.GI="boolean"==typeof e?e?"word":"character":e):this.GI="word",this.Ozt=t.hasOwnProperty("lho")?t.lho:0,this.TI=!!t.hasOwnProperty("b")&&t.b,this._I=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")&&(e=t.tw,this.Bzt=e.st,this.$zt=e.en,this.kzt=e.l),t.hasOwnProperty("ioc")?(e=this.Dx().gq(t.ioc))&&this.jzt(e):this.jzt(null),t.hasOwnProperty("fs")?(this.Gzt="fixed",this.Pzt=t.fs):this.Gzt="auto",this.Xzt(),this.Yzt(),this.Nzt=!1,-1!==this.$zt&&this.eEt()}Jrt(t){switch(t){case TEXT:return this.NR();case ENABLE_BBCODE:return this.Mzt;case FONT:return this.Kzt();case SIZE:return this.Zzt();case LINE_HEIGHT:return this.Qzt();case BOLD:return this.tJt();case ITALIC:return this.eJt();case COLOR:return TEMP_COLOR_ARRAY[0]=this.YS.Qa(),TEMP_COLOR_ARRAY[1]=this.YS.eo(),TEMP_COLOR_ARRAY[2]=this.YS.io(),TEMP_COLOR_ARRAY;case HORIZONTAL_ALIGNMENT:return this.iJt();case VERTICAL_ALIGNMENT:return this.sJt();case WRAPPING:return this.rJt();case READ_ALOUD:return this.hJt()}}iht(t,e){switch(t){case TEXT:this.nJt(e);break;case ENABLE_BBCODE:this.Mzt!==!!e&&(this.Mzt=!!e,this.Xzt());break;case FONT:this.aJt(e);break;case SIZE:this.oJt(e);break;case LINE_HEIGHT:this.lJt(e);break;case BOLD:this.uJt(e);break;case ITALIC:this.cJt(e);break;case COLOR:var i=this.YS,s=e;i.Qa()===s[0]&&i.eo()===s[1]&&i.io()===s[2]||(this.YS.ja(s[0],s[1],s[2]),this.Xzt());break;case HORIZONTAL_ALIGNMENT:this.fJt(e);break;case VERTICAL_ALIGNMENT:this.dJt(e);break;case WRAPPING:this.CJt(e)}}nEt(t,e,i,s){0===e&&0===i&&0===s||t===COLOR&&(this.YS.Xa(e,i,s),this.Xzt())}nJt(t){this.s3!==t&&(this.s3=t,this.Wzt.n3(t),this.Yzt(),this.Nzt=!1,this.i3.Ex())}NR(){return this.s3}pJt(t,e){this.zzt(),this.nJt(t),this.Bzt=this.i3.vL(),this.$zt=this.Bzt+e/this.c6().vF(),this.kzt=this.Wzt.WR(),this.Wzt.ER(0),this.eEt()}qzt(){this.Bzt=-1,this.$zt=-1,this.kzt=0,this.Wzt.ER(-1),this.$_t()}mJt(){-1!==this.$zt&&(this.qzt(),this.FF(C33.Mq.Text.Iq.vJt),this.i3.Ex())}aJt(t){this.wzt!==t&&(this.wzt=t,this.Wzt.fR(t),this.i3.Ex())}Kzt(){return this.wzt}uJt(t){this.TI!==(t=!!t)&&(this.TI=t,this.Wzt.SR(t),this.i3.Ex())}tJt(){return this.TI}cJt(t){this._I!==(t=!!t)&&(this._I=t,this.Wzt.TR(t),this.i3.Ex())}eJt(){return this._I}oJt(t){this.bzt!==t&&(this.bzt=t,this.i3.Ex())}Zzt(){return this.bzt}SJt(t){this.YS.lo(t)||(this.YS.Za(t),this.Wzt.KS(this.YS),this.i3.Ex())}gJt(){return this.YS}lJt(t){this.Ozt!==t&&(this.Ozt=t,this.Xzt(),this.i3.Ex())}Qzt(){return this.Ozt}fJt(t){this.MI!==t&&(this.MI=t,this.Xzt(),this.i3.Ex())}iJt(){return this.MI}dJt(t){this.wI!==t&&(this.wI=t,this.Xzt(),this.i3.Ex())}sJt(){return this.wI}TJt(t){this.CJt(WORD_WRAP_MODES[t])}CJt(t){this.GI!==t&&(this.GI=t,this.Xzt(),this.i3.Ex())}rJt(){return this.GI}_Jt(t){this.LI!==t&&(this.LI=t,this.Xzt(),this.i3.Ex())}EJt(){return this.LI}yJt(t){this.Dzt=!!t,this.Yzt()}hJt(){return this.Dzt}AJt(t){this.Gzt!==t&&(this.Gzt=t,this.i3.Ex())}IJt(){return this.Gzt}RJt(t){this.Pzt!==t&&(this.Pzt=t,"fixed"===this.Gzt)&&this.i3.Ex()}MJt(){return this.Pzt}wJt(){return this.zzt(),this.Wzt.BR()}bJt(){return this.zzt(),this.Wzt.kR()}OJt(t,e){this.zzt();var i=this.Cx(),t=(tempVec2.set(t-i.ag(),e-i.ug()),tempVec2.rotate(-i.I5()),tempVec2.offset(i.tp()*i.y$(),i.cp()*i.I$()),tempVec2.Mt(i.tp(),i.cp()),tempVec2.scale(this.Wzt.tp(),this.Wzt.cp()),this.Wzt.HR(tempVec2.Qo(),tempVec2.el()));if(t){e=t.Qp("tag");if(e)return e.kC}return""}GJt(t,e,i){e=this.OJt(e,i);return e&&C33.gr(t,e)}PJt(t,e){this.zzt(),e=Math.floor(e);var i,s,r,h,t=this.Wzt.jR(t,e);return t?(e=this.Cx(),i=this.Wzt.IR(),s=t.qp(),r=t.Jp()-(t.cp()-t.Cp())*i,h=t.tp()*i/this.Wzt.tp()*e.tp(),t=t.cp()*i/this.Wzt.cp()*e.cp(),tempVec2.set(s,r),tempVec2.Mt(this.Wzt.tp(),this.Wzt.cp()),tempVec2.scale(e.tp(),e.cp()),tempVec2.offset(-e.tp()*e.y$(),-e.cp()*e.I$()),tempVec2.rotate(e.I5()),tempVec2.offset(e.ag(),e.ug()),{x:tempVec2.Qo(),y:tempVec2.el(),width:h,height:t}):null}LJt(t){return this.zzt(),this.Wzt.YR(t)}xJt(t){let e=BBCODE_TAG_TO_HTML.get(t);return null===e?"":`</${(e=e||"span")||"span"}>`}NJt(t,e){let i=BBCODE_TAG_TO_HTML.get(t);if(null===i)return"";switch(i=i||"span",t){case"color":return`<${i} style="color: ${e}">`;case"font":return`<${i} style="font-family: '${e}'">`;case"opacity":return`<${i} style="opacity: ${e}%">`;case"size":return`<${i} style="font-size: ${e}pt">`;case"background":return`<${i} style="background-color: ${e}">`;case"hide":return`<${i} style="visibility: hidden">`;case"class":return`<${i} class="${e}">`;case"tag":return`<${i} data-tag="${e}">`;default:return`<${i}>`}}async DJt(){if(!this.Nzt){var t=new C33.Lr(this.s3,{MC:!0}).BC();let h=new Map,e='<span class="c3-text"';var i=[],n=(i.push(`font-family: '${this.Kzt()}';`),this.tJt()&&i.push("font-weight: bold;"),this.eJt()&&i.push("font-style: italic;"),"character"===this.rJt()&&i.push("word-break: break-all;"),e+=` style="${i.join(" ")}">`,this.Lzt?this.Dx().LDt(this.Lzt):null);if(this.Lzt){var s,a=C33.oh(C33.f0),o=[];let r=new Map;for(s of t)if(s.lp()){var l=s.n1(n);if(l){let e=l.X1().T$().Xyt();if(r.has(e))continue;r.set(e,null),o.push(a.ac(async()=>{var t=await e.rV();r.set(e,t)}))}}await Promise.all(o);var u,c,f=[];for(u of t)if(u.lp()){let s=u.n1(n);if(s){let e=s.X1(),i=e.T$().Xyt();f.push(a.ac(async()=>{var t=await e.T$().qyt(r.get(i));h.set(s,t)}))}}await Promise.all(f);for(c of r.values())c instanceof ImageBitmap&&c.close&&c.close()}var r,d=new Map;for(r of t){var C,p,m,v=r.e1(),S=[...d.keys()];S.reverse();for(C of S)v.has(C)&&v.get(C)===d.get(C)||(d.delete(C),e+=this.xJt(C));for([p,m]of v)d.has(p)||(d.set(p,m),e+=this.NJt(p,m));if(r.np()&&(e+=C33.zd(C33.Yd(r.Rp().join("")),"\n","<br>")),r.lp()&&n){S=r.n1(n);if(S){var g=h.get(S);if(g){var T=[];let t="0.2em";var _=v.get("iconoffsety");_&&(_=_.trim(),t=_.endsWith("%")?parseFloat(_)/100+"em":_+"px"),T.push("top: "+t),"nearest"===this.i3.L4()&&T.push("image-rendering: pixelated"),e+=`<img class="c3-text-icon" data-icon="${r.h1()}" width="${S.tp()}" height="${S.cp()}" style="${T.join(";")}" src="${g}">`}}}}var E,i=[...d.keys()];i.reverse();for(E of i)e+=this.xJt(E);e+="</span>",this.xzt=e,this.Nzt=!0}return this.xzt}QJ(){var t=this.i3.vL();t>=this.$zt?(this.qzt(),this.FF(C33.Mq.Text.Iq.vJt),this.i3.Ex()):(t=C33.Gh(this.Bzt,this.$zt,t,0,this.kzt),(t=Math.floor(t))!==this.Wzt.yR()&&(this.Wzt.ER(t),this.i3.Ex()))}hEt(){var t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.NR(),P8t:t=>this.nJt(t)},{name:t+".properties.font.name",value:this.Kzt(),P8t:t=>this.aJt(t)},{name:t+".properties.size.name",value:this.Zzt(),P8t:t=>this.oJt(t)},{name:t+".properties.line-height.name",value:this.Qzt(),P8t:t=>this.lJt(t)},{name:t+".properties.bold.name",value:this.tJt(),P8t:t=>this.uJt(t)},{name:t+".properties.italic.name",value:this.eJt(),P8t:t=>this.cJt(t)}]}]}v_t(){return self.FJt}},new WeakMap),SCRIPT_HORIZONTAL_ALIGNMENTS=new Map([["left",0],["center",1],["right",2]]),SCRIPT_VERTICAL_ALIGNMENTS=new Map([["top",0],["center",1],["bottom",2]]),SCRIPT_TEXT_DIRECTIONS=["ltr","rtl"],VALID_RESOLUTION_MODES=new Set(["auto","fixed"]);self.FJt=class ITextInstance extends self.OB{constructor(){super(),map.set(this,self.ZD.sF().NB())}get text(){return map.get(this).NR()}set text(t){C3X.Ms(t);var e=map.get(this);e.qzt(),e.nJt(t)}BJt(t,e){C3X.Ms(t),C3X.ys(e);var i=map.get(this);i.qzt(),i.pJt(t,e)}$Jt(){map.get(this).mJt()}set l9(t){C3X.Ms(t),map.get(this).aJt(t)}get l9(){return map.get(this).Kzt()}set c9(t){map.get(this).uJt(t)}get c9(){return map.get(this).tJt()}set f9(t){map.get(this).cJt(t)}get f9(){return map.get(this).eJt()}set u9(t){C3X.ys(t),map.get(this).oJt(t)}get u9(){return map.get(this).Zzt()}set kJt(t){if(C3X.Vs(t),t.length<3)throw new Error("expected 3 elements");tempColor.ja(t[0],t[1],t[2]),map.get(this).SJt(tempColor)}get kJt(){var t=map.get(this).gJt();return[t.Qa(),t.eo(),t.io()]}set lineHeight(t){C3X.ys(t),map.get(this).lJt(t)}get lineHeight(){return map.get(this).Qzt()}set p9(t){C3X.Ms(t);t=SCRIPT_HORIZONTAL_ALIGNMENTS.get(t);if(void 0===t)throw new Error("invalid mode");map.get(this).fJt(t)}get p9(){return HORIZONTAL_ALIGNMENTS[map.get(this).iJt()]}set verticalAlign(t){C3X.Ms(t);t=SCRIPT_VERTICAL_ALIGNMENTS.get(t);if(void 0===t)throw new Error("invalid mode");map.get(this).dJt(t)}get verticalAlign(){return VERTICAL_ALIGNMENTS[map.get(this).sJt()]}set m9(t){if(!WORD_WRAP_MODES.includes(t))throw new Error("invalid mode");map.get(this).CJt(t)}get m9(){return map.get(this).rJt()}set v9(t){C3X.Ms(t);t=SCRIPT_TEXT_DIRECTIONS.indexOf(t);if(-1===t)throw new Error("invalid text direction");map.get(this)._Jt(t)}get v9(){return SCRIPT_TEXT_DIRECTIONS[map.get(this).EJt()]}set WJt(t){map.get(this).yJt(!!t)}get WJt(){return map.get(this).hJt()}VJt(t){C3X.ys(t);var e=map.get(this);e.AJt("fixed"),e.RJt(t)}HJt(){map.get(this).AJt("auto")}get T9(){return map.get(this).wJt()}get _9(){return map.get(this).bJt()}UJt(){var t=map.get(this);return[t.wJt(),t.bJt()]}jJt(t,e,i){return C3X.Ms(t),C3X.ys(e),C3X.ys(i),map.get(this).GJt(t,e,i)}XJt(t,e){return C3X.ys(t),C3X.ys(e),map.get(this).OJt(t,e)}YJt(t,e=0){return C3X.Ms(t),C3X.ys(e),map.get(this).PJt(t,e)}qJt(t){return C3X.Ms(t),map.get(this).LJt(t)}zJt(t){var e=map.get(this),t=e.Dx().dN(t);e.jzt(t)}JJt(){return map.get(this).DJt()}}}{let C33=self.We;C33.Mq.Text.Iq={KJt(t,e){return e?this.s3===t:C33.gr(this.s3,t)},ZJt(){return-1!==this.$zt},vJt(){return!0},QJt(t,e,i){return this.GJt(t,e,i)}}}{let C33=self.We,tempColor=C33.oh(C33.$a);C33.Mq.Text.mrt={n3(t){this.qzt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.nJt(t.toString())},tKt(t){this.qzt(),(t=(t="number"==typeof t&&t<1e9?Math.round(1e10*t)/1e10:t).toString())&&this.nJt(this.s3+t)},eKt(t,e){this.qzt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.pJt(t.toString(),e)},iKt(t,e){let i=!1,s=!1;switch(e){case 1:i=!0;break;case 2:s=!0;break;case 3:i=!0,s=!0}t===this.wzt&&i===this.TI&&s===this._I||(this.aJt(t),this.uJt(i),this.cJt(s))},dR(t){this.oJt(t)},sKt(t){tempColor.vo(t),tempColor.ph(),this.SJt(tempColor)},rKt(t,e){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},c9t(t){this.Cx().JS(t),this.i3.Ex()},hKt(){this.mJt()},mR(t){this.lJt(t)},nKt(t){this.fJt(t)},aKt(t){this.dJt(t)},oKt(t){this.TJt(t)},LR(t){this._Jt(t)},lKt(t){this.jzt(t)},uKt(){return this.DJt()},cKt(t){this.yJt(t)},fKt(t,e){this.AJt(["auto","fixed"][t]),this.RJt(e)}}}{let C33=self.We;C33.Mq.Text.vrt={Text(){return this.s3},dKt(){return this.Mzt?C33.Lr.XC(this.s3):this.s3},CKt(){return this.wzt},pKt(){return this.bzt},mKt(){return this.wJt()},vKt(){return this.bJt()},SKt(){return this.Ozt},gKt(t,e){return this.OJt(t,e)},TKt(t){return this.LJt(t)},_Kt(t,e){t=this.PJt(t,e);return t?t.x:0},EKt(t,e){t=this.PJt(t,e);return t?t.y:0},yKt(t,e){t=this.PJt(t,e);return t?t.width:0},AKt(t,e){t=this.PJt(t,e);return t?t.height:0},IKt(){return this.xzt}}}{let C33=self.We,DOM_COMPONENT_ID2="button";C33.Mq.RKt=class ButtonPlugin extends C33.E_t{constructor(t){super(t,DOM_COMPONENT_ID2),this.R_t("click",(t,e)=>t.MKt(e))}lh(){super.lh()}}}{let C33=self.We;C33.Mq.RKt.lIt=class ButtonType extends C33.G_t{constructor(t){super(t)}lh(){super.lh()}m_t(){}}}{let C33=self.We,C3X=self.Ze,TYPE=0,TEXT=1,TOOLTIP=2,INITIALLY_VISIBLE=3,ENABLE=4,AUTO_FONT_SIZE=5,CHECKED=6,ID=7,CLASS_NAME=8,DOM_COMPONENT_ID2="button",map=(C33.Mq.RKt.Instance=class ButtonInstance extends C33.REt{constructor(t,e){super(t,DOM_COMPONENT_ID2),this.s3="OK",this.wKt=!1,this.bKt=!1,this.OKt="",this.r3="",this.GKt="",this.Y1t=!0,this.OEt=!0,e&&(this.wKt=1===e[TYPE],this.s3=e[TEXT],this.OKt=e[TOOLTIP],this.Cx().oD(e[INITIALLY_VISIBLE]),this.Y1t=e[ENABLE],this.OEt=e[AUTO_FONT_SIZE],this.bKt=e[CHECKED],this.r3=e[ID],this.GKt=e[CLASS_NAME]),this.WEt({id:this.r3,className:this.GKt})}lh(){super.lh()}VEt(){return{text:this.s3,isCheckbox:this.wKt,isChecked:this.bKt,title:this.OKt,isVisible:this.Cx().uD(),isEnabled:this.Y1t}}async MKt(t){this.bKt=t.isChecked,this.x_t("click",!0),await this.$F(C33.Mq.RKt.Iq.Hjt)}nJt(t){this.s3!==t&&(this.s3=t,this.XEt())}PKt(){return this.s3}LKt(t){this.OKt!==t&&(this.OKt=t,this.XEt())}xKt(){return this.OKt}LSt(t){this.Y1t!==(t=!!t)&&(this.Y1t=t,this.XEt())}xSt(){return this.Y1t}NKt(t){this.wKt&&this.bKt!==(t=!!t)&&(this.bKt=t,this.XEt())}DKt(){return this.bKt}Jg(t){}_g(){return{text:this.s3,checked:this.bKt,title:this.OKt,enabled:this.Y1t}}Eg(t){this.s3=t.text,this.bKt=t.checked,this.OKt=t.title,this.Y1t=t.enabled,this.XEt()}Jrt(t){switch(t){case TEXT:return this.PKt();case TOOLTIP:return this.xKt();case ENABLE:return this.xSt();case AUTO_FONT_SIZE:return this.OEt;case CHECKED:return this.DKt()}}iht(t,e){switch(t){case TEXT:this.nJt(e);break;case TOOLTIP:this.LKt(e);break;case ENABLE:this.LSt(!!e);break;case AUTO_FONT_SIZE:this.OEt=!!e;break;case CHECKED:this.NKt(!!e)}}hEt(){var t="plugins.button";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.PKt(),P8t:t=>this.nJt(t)},{name:t+".properties.enabled.name",value:this.xSt(),P8t:t=>this.LSt(t)},{name:t+".properties.checked.name",value:this.DKt(),P8t:t=>this.NKt(t)}]}]}v_t(){return self.FKt}},new WeakMap);self.FKt=class IButtonInstance extends self.PB{constructor(){super(),map.set(this,self.ZD.sF().NB())}set text(t){C3X.Ms(t),map.get(this).nJt(t)}get text(){return map.get(this).PKt()}set BKt(t){C3X.Ms(t),map.get(this).LKt(t)}get BKt(){return map.get(this).xKt()}set isEnabled(t){map.get(this).LSt(t)}get isEnabled(){return map.get(this).xSt()}set isChecked(t){map.get(this).NKt(t)}get isChecked(){return map.get(this).DKt()}}}{let C33=self.We;C33.Mq.RKt.Iq={Hjt(){return!0},$Kt(){return this.bKt},KJt(t,e){return e?this.s3===t:C33.gr(this.s3,t)}}}{let C33=self.We;C33.Mq.RKt.mrt={n3(t){this.nJt(t)},kKt(t){this.LKt(t)},WKt(t){this.NKt(0!==t)},VKt(){this.wKt&&(this.bKt=!this.bKt,this.XEt())}}}{let C33=self.We;C33.Mq.RKt.vrt={Text(){return this.s3}}}{let C33=self.We;C33.hot.Tween=class TweenBehavior extends C33.qEt{constructor(t){super(t)}lh(){super.lh()}}}{let C33=self.We;C33.hot.Tween.lIt=class TweenType extends C33.QEt{constructor(t){super(t)}lh(){super.lh()}m_t(){}}}{let C33=self.We,NAMESPACE=C33.hot.Tween,ENABLED=0;NAMESPACE.Instance=class TweenInstance extends C33.eyt{constructor(t,e){super(t),this.HKt=!1,this.xu=!0,e&&(this.HKt=!1,this.xu=!!e[ENABLED]),this.UKt=new Map,this.jKt=[],this.XKt=new Map,this.YKt=null,this.qKt=null,this.zKt=null,this.JKt=null,this.KKt="",this.ZKt=[],this.iJ=t=>this.sJ(),this.Dx().F3().addEventListener("afterload",this.iJ)}lh(){this.Dx().F3().removeEventListener("afterload",this.iJ),this.iJ=null,this.YKt&&(this.QKt(this.YKt),this.YKt=null),this.tZt(),this.eZt=null,this.iZt(),this.jKt=null,this.sZt(),this.XKt=null,this.ZKt=null,super.lh()}uot(t){this.ZKt.push(t)}cot(){this.ZKt.pop()}rZt(){return this.ZKt[this.ZKt.length-1]}tTt(t){this.xu=!!t,t?this.XKt&&this.XKt.size&&this.sEt():this.k_t();for(var e of this.hZt())t?this.nZt(e)&&e.H$():((e.IsPlaying()||e.zQ())&&this.aZt(e),e.V$());t&&this.iZt()}qu(){return this.xu}aZt(t){this.jKt.push(t)}nZt(t){return this.jKt.includes(t)}iZt(){C33.Dn(this.jKt)}oZt(){return this.YKt}fet(){var t=this.qB();return!!t&&!t.Sk()}lZt(t,e,i=!1){e=e?this.uZt(e,i):this.hZt(i);if(e&&e.length)for(var s of e)if(s.U$(t))return s}cZt(t,e){for(var i of this.UKt.values())for(var s of i)if(!s.k$()&&s.U$(t)&&e(s))return!0;for(var r of this.XKt.values())for(var h of r)if(!h.k$()&&h.U$(t)&&e(h))return!0;return!1}fZt(t){for(var e of this.UKt.values())for(var i of e)if(!i.k$()&&t(i))return!0;for(var s of this.XKt.values())for(var r of s)if(!r.k$()&&t(r))return!0;return!1}dZt(t,e){return this.lZt(t,e,!0)}*CZt(t,e,i=!1){e=e?this.uZt(e,i):this.hZt(i);if(e&&e.length)for(var s of e)s.U$(t)&&(yield s)}*pZt(t,e){yield*this.CZt(t,e,!0)}uZt(i,t){if(t){let t=this.UKt.get(i),e=this.XKt.get(i);return t=t||[],e=e||[],t.concat(e).filter(t=>t).filter(t=>!t.k$())}{let t=this.UKt.get(i);return(t=t||[]).filter(t=>t).filter(t=>!t.k$())}}hZt(t){var e;return t?(t=[...this.UKt.values()].flat(),e=[...this.XKt.values()].flat(),t.concat(e).filter(t=>t).filter(t=>!t.k$())):[...this.UKt.values()].flat().filter(t=>t).filter(t=>!t.k$())}mZt(){return this.hZt(!0)}_g(t=0){return{s:!1,e:!!this.xu,at:this.vZt(),dt:this.SZt(),wt:this.gZt(),ft:this.TZt()}}Eg(t,e="full"){t&&(this.qKt=t.at,this.zKt=t.dt,this.JKt=t.wt,this.KKt=t.ft,this.HKt=!1,this.xu=!!t.e,"state"===e)&&this.sJ()}sJ(){var t=this.Dx().IQ();if(this._Zt(this.qKt,this.UKt,t),this.zKt){C33.Dn(this.jKt);for(var e of this.zKt)this.EZt(this.jKt,e,t)}this._Zt(this.JKt,this.XKt,t),this.YKt=this.yZt(this.KKt,t),this.xu?this.XKt&&this.XKt.size&&this.sEt():this.k_t()}_Zt(e,i,s){if(e)for(var r in e){let t=i.get(r);var h,n;t?C33.Dn(t):t=[];for(h of e[r])this.EZt(t,h.name,s)?this.AZt(h.name,h,s):(n=C33.jht.Cot({runtime:this.Dx(),json:h}),C33.jht.Pet(n,this.qB().CF()),n.Xat(t=>this.IZt(t)),s.xJ(n),this.EZt(t,n,s));i.set(r,t)}}yZt(t,e){return e.GJ(t)}EZt(t,e,i){return!("string"==typeof e&&!(e=this.yZt(e,i))||!t.push(e))}AZt(t,e,i){"string"==typeof t?(i=this.yZt(t,i))&&(i.DX(e),C33.jht.Pet(i,this.qB().CF())):(t.DX(e),C33.jht.Pet(t,this.qB().CF()))}vZt(){var t,e,i={};for([t,e]of this.UKt)i[t]=e.filter(t=>!t.k$()).map(t=>t.NX());return i}SZt(){return this.jKt.filter(t=>!t.k$()).map(t=>t.qc())}gZt(){var t,e,i={};for([t,e]of this.XKt)i[t]=e.map(t=>t.NX());return i}TZt(){return this.YKt?this.YKt.qc():""}tEt(){this.sZt()}RZt(t){var e=NAMESPACE.wZt.MZt(t.property,t.got,t.Tot,t.ease,t.resultMode,this.qB()),i=NAMESPACE.OZt.bZt(t.property),i=(NAMESPACE.OZt.GZt(i)||this.PZt(t.property),C33.jht.Cot({runtime:this.Dx(),id:i,tags:t.tags,time:t.time,YB:this.qB(),mot:!!t.mot,loop:!!t.loop,pingPong:!!t.pingPong,repeatCount:t.repeatCount,initialValueMode:t.initialValueMode,pot:e}));return i.Xat(t=>this.IZt(t)),this.LZt(i,t.property),i}xZt(t){var e=t.p6();this.UKt.has(e)&&(e=this.UKt.get(e))&&-1!==(t=e.indexOf(t))&&e.splice(t,1)}o6(t,e=!1){this.xZt(t),t.k$()||this.NZt(t)||(t.V$(e),this.DZt(t))}PZt(t,e=!1){if(C33.vs(t)){t=NAMESPACE.OZt.bZt(t);if(this.UKt.has(t)){var i,t=this.UKt.get(t),s=this.oZt();for(i of t)i===s||i.k$()||this.NZt(i)||(i.V$(e),i.lh());C33.Dn(t)}}else{var r,h,n=this.oZt();for(r of this.hZt())r===n||r.k$()||this.NZt(r)||(r.V$(e),r.lh());for(h of this.UKt.keys())C33.Dn(this.UKt.get(h)),this.UKt.delete(h);this.UKt.clear()}}QKt(t){this.o6(t,!0)}tZt(){this.PZt(NaN,!0)}Jrt(t){if(t===ENABLED)return this.xu}iht(t,e){t===ENABLED&&(this.xu=!!e)}FZt(t){var e;for(e of t.c6().Yst()){var i=e.XB();if(i.GIt()===this.constructor)return i}}FF(t,e,i,s){return this.i3?super.FF(t):e.FF(t,i,s)}IZt(t){this.YKt=t,NAMESPACE.Iq.BZt(t);let e,i;if(this.Dx())e=this.wi,i=this.i3,this.FF(NAMESPACE.Iq.$Zt),this.FF(NAMESPACE.Iq.kZt),this.o6(t);else{if(!(e=t.c6()))return;if(e&&e.Sk())return;i=e.Dx();var s=this.FZt(t);this.FF(NAMESPACE.Iq.$Zt,i,e,s),this.FF(NAMESPACE.Iq.kZt,i,e,s),t.V$()}this.YKt=null,NAMESPACE.Iq.BZt(null),t.d6()&&i.aF(e)}LZt(t,e){e=NAMESPACE.OZt.bZt(e);this.UKt.has(e)||this.UKt.set(e,[]),this.UKt.get(e).push(t)}DZt(t){var e=t.p6();this.XKt.has(e)||this.XKt.set(e,[]),this.XKt.get(e).push(t),this.rEt()||this.sEt()}NZt(t){var e=t.p6();return!!this.XKt.has(e)&&this.XKt.get(e).includes(t)}sZt(){if(this.XKt.size){for(var t of this.XKt.values()){for(var e of t)e.k$()||e.lh();C33.Dn(t)}this.XKt.clear(),this.rEt()&&this.k_t()}}hEt(){return[{title:"$"+this.XB().qc(),properties:[{name:"behaviors.tween.properties.enabled.name",value:this.qu(),P8t:t=>this.tTt(t)}]}]}v_t(){return self.WZt}}}{let C33=self.We,finishingTween=null;C33.hot.Tween.Iq={rot(){return!0},not(t){var e=this.rZt();return!!e&&e.U$(t)},aot(t){var e=this.rZt();return!!e&&(e.$Q()===t||2===t)},oot(t,e){var i=this.rZt();return!!i&&(i.$Q()===e||2===e)&&i.U$(t)},BZt(t){finishingTween=t},$Zt(t){return finishingTween.U$(t)},kZt(){return!0},IsPlaying(t){return this.cZt(t,C33.jht.IsPlaying)},VZt(){return this.fZt(C33.jht.IsPlaying)},s6(t){return this.cZt(t,C33.jht.s6)},HZt(){return this.fZt(C33.jht.s6)},c$(t,e){return 0===e?this.cZt(t,C33.jht.fot):1===e&&this.cZt(t,C33.jht.dot)},UZt(t){return 0===t?this.fZt(C33.jht.fot):1===t&&this.fZt(C33.jht.dot)}}}{let C33=self.We,Ease=self.uc,NAMESPACE=C33.hot.Tween;NAMESPACE.mrt={tTt(t){this.tTt(!!t)},async jZt(...t){this.qu()&&this.fet()&&(t=this.RZt(NAMESPACE.YZt.XZt(this,...t))).Play()&&await t.e6()},async qZt(...t){this.qu()&&this.fet()&&(t=this.RZt(NAMESPACE.YZt.zZt(this,...t))).Play()&&await t.e6()},async JZt(...t){this.qu()&&this.fet()&&(t=this.RZt(NAMESPACE.YZt.KZt(this,...t))).Play()&&await t.e6()},ZZt(t){if(this.qu()&&this.fet())for(var e of this.CZt(t))e.V$()},QZt(){if(this.qu()&&this.fet())for(var t of this.hZt())t.V$()},tQt(t){if(this.qu()&&this.fet())for(var e of this.CZt(t))e.H$()},eQt(){if(this.qu()&&this.fet())for(var t of this.hZt())t.H$()},iQt(t){if(this.qu()&&this.fet())for(var e of this.CZt(t))this.o6(e)},sQt(){if(this.qu()&&this.fet())for(var t of this.hZt())this.o6(t)},rQt(t,e,i){if(this.qu()&&this.fet()){var s,r=C33.hot.Tween.OZt.hQt(e);for(s of this.CZt(t))s.Kat([r]),s.Zat(i,r)}},nQt(t,e,i,s){if(this.qu()&&this.fet()){var r,h=C33.hot.Tween.OZt.aQt(e);for(r of this.CZt(t))r.Kat(h),r.Zat(i,h[0]),r.Zat(s,h[1])}},oQt(t,e){if(this.qu()&&this.fet())for(var i of this.CZt(t,"value"))i.zat(e,"value")},lQt(t,e){if(this.qu()&&this.fet())for(var i of this.CZt(t,"value"))i.Kat(["value"]),i.Zat(e,"value")},uQt(t,e){if(this.qu()&&this.fet()){var i,s=Ease.Oc(e);for(i of this.CZt(t))i.u6(s)}},cQt(t){if(this.qu()&&this.fet()){var e,i=Ease.Oc(t);for(e of this.hZt())e.u6(i)}},fQt(t,e){if(this.qu()&&this.fet())for(var i of this.CZt(t))i.j$(e)},dQt(t){if(this.qu()&&this.fet())for(var e of this.hZt())e.j$(t)},CQt(t,e){if(this.qu()&&this.fet())for(var i of this.CZt(t))i.Z$(e)},pQt(t){if(this.qu()&&this.fet())for(var e of this.hZt())e.Z$(t)},mQt(t,e){if(this.qu()&&this.fet())for(var i of this.CZt(t))i.C6(!!e)},vQt(t){if(this.qu()&&this.fet())for(var e of this.hZt())e.C6(!!t)}}}{let C33=self.We;C33.hot.Tween.vrt={SQt(t){t=this.dZt(t);return t?t.qO():0},BHt(t){t=this.dZt(t);return t?t.qO()/t.Y$():0},yrt(t){t=this.dZt(t);return t?t.Q$():0},gQt(t){t=this.dZt(t,"value");return t?t.v6("value").m6():0},ITt(){let t=this.oZt();return(t=t||this.rZt())?t.HQ():""}}}{let C33=self.We,Ease=self.uc,PAIR_PROPERTIES=["position","size","scale"],SINGLE_PROPERTIES=["offsetX","offsetY","offsetWidth","offsetHeight","offsetAngle","offsetOpacity","offsetColor","offsetZElevation","offsetScaleX","offsetScaleY"],VALUE_PROPERTIES=["value"],PROPERTY_INDEX_TO_NAME=[].concat(PAIR_PROPERTIES).concat(SINGLE_PROPERTIES).concat(VALUE_PROPERTIES),PROPERTY_PAIR_TO_REAL_PROPERTIES={position:["offsetX","offsetY"],size:["offsetWidth","offsetHeight"],scale:["offsetScaleX","offsetScaleY"]},ALL_REAL_PROPERTIES=Object.assign({},PROPERTY_INDEX_TO_NAME.reduce((t,e)=>Object.assign({},t,{[e]:[e]}),{}),PROPERTY_PAIR_TO_REAL_PROPERTIES);C33.hot.Tween.OZt=class Maps{constructor(){}static TQt(){return[...Ease.Sc()]}static Oc(t){return[...Ease.Sc()][t]}static bZt(t){return PROPERTY_INDEX_TO_NAME[t]}static _Qt(t){return PROPERTY_INDEX_TO_NAME.indexOf(t)}static EQt(t){return PAIR_PROPERTIES[t]}static hQt(t){return SINGLE_PROPERTIES[t]}static yQt(t){return VALUE_PROPERTIES[t]}static AQt(t){return PROPERTY_PAIR_TO_REAL_PROPERTIES[t]}static aQt(t){return C33.Rs(t)?ALL_REAL_PROPERTIES[t]:ALL_REAL_PROPERTIES[PROPERTY_INDEX_TO_NAME[t]]}static IQt(t){return!!PROPERTY_PAIR_TO_REAL_PROPERTIES[t]}static RQt(t){return"offsetColor"===t}static MQt(t){return"offsetAngle"===t}static wQt(t){return"offsetOpacity"===t}static GZt(t){return"value"===t}}}{let C33=self.We,NAMESPACE=C33.hot.Tween,TWEEN_CONFIGURATIONS=new Map;NAMESPACE.wZt=class Config{constructor(){}static MZt(t,e,i,s,r,h){0===TWEEN_CONFIGURATIONS.size&&this.bQt();var n=NAMESPACE.GQt.OQt(t),n=TWEEN_CONFIGURATIONS.get(n);return C33.vs(t)&&(t=NAMESPACE.OZt.bZt(t)),this.PQt(n,t,e,i,s,r,h)}static LQt(t,e){return C33.hot.Tween.MZt(t).xQt(e)}static bQt(){var t=NAMESPACE.GQt,e=NAMESPACE.NQt;this.DQt(t.FQt,this.BQt,e.$Qt),this.DQt(t.COLOR,this.kQt,e.WQt),this.DQt(t.VQt,this.HQt,e.UQt),this.DQt(t.jQt,this.XQt,e.$Qt),this.DQt(t.YQt,this.qQt,e.$Qt)}static DQt(t,e,i){TWEEN_CONFIGURATIONS.set(t,this.zQt(t,e,i))}static zQt(t,e,i){return{name:t,JQt:e,xQt:i}}static PQt(t,e,i,s,r,h,n){return t.JQt(e,t.xQt(i),t.xQt(s),r,h,n)}static BQt(t,i,s,r,h,e){return NAMESPACE.OZt.AQt(t).map((t,e)=>({vot:"world-instance",property:t,type:"float",valueType:"numeric",got:i[e],Tot:s[e],ease:NAMESPACE.OZt.Oc(r),resultMode:h}))}static kQt(t,e,i,s,r,h){return C33.Mq.Text&&h.YN()instanceof C33.Mq.Text?{vot:"plugin",Sot:[7],property:"color",type:"color",valueType:"color",got:e,Tot:i,ease:NAMESPACE.OZt.Oc(s),resultMode:r}:{vot:"world-instance",property:t,type:"color",valueType:"color",got:e,Tot:i,ease:NAMESPACE.OZt.Oc(s),resultMode:r}}static HQt(t,e,i,s,r,h){return{vot:"world-instance",property:t,type:"angle",valueType:"angle",got:e,Tot:i,ease:NAMESPACE.OZt.Oc(s),resultMode:r}}static qQt(t,e,i,s,r,h){return{vot:"world-instance",property:t,type:"float",valueType:"numeric",got:e,Tot:i,ease:NAMESPACE.OZt.Oc(s),resultMode:r}}static XQt(t,e,i,s,r,h){return{vot:"value",property:t,type:"float",valueType:"numeric",got:e,Tot:i,ease:NAMESPACE.OZt.Oc(s),resultMode:r}}}}{let C33=self.We,NAMESPACE=C33.hot.Tween,COMMON_FIXED_ARGS={resultMode:"absolute"},COMMON_VARIABLE_ARGS=Object.assign({},COMMON_FIXED_ARGS,{tags:"",property:"",time:0,ease:0,mot:0,loop:!1,pingPong:!1,repeatCount:1}),ONE_PROPERTY_ARGS=Object.assign({},COMMON_VARIABLE_ARGS,{initialValueMode:"current-state",got:0,Tot:0}),TWO_PROPERTIES_ARGS=Object.assign({},COMMON_VARIABLE_ARGS,{initialValueMode:"current-state",got:[0,0],Tot:[0,0]}),COLOR_PROPERTY_ARGS=Object.assign({},COMMON_VARIABLE_ARGS,{initialValueMode:"current-state",got:[0,0,0],Tot:[0,0,0]}),VALUE_PROPERTY_ARGS=Object.assign({},ONE_PROPERTY_ARGS,{initialValueMode:"start-value"}),X=0,Y=1,R=0,G=1,B=2;NAMESPACE.YZt=class TweenArguments{constructor(){}static KQt(t,e,i,s,r,h,n,a){t.tags=e,t.time=i,t.ease=s,t.mot=r,t.loop=h,t.pingPong=n,t.repeatCount=a}static XZt(t,e,i,s,r,h,n,a,o,l){var i="string"==typeof i?i:NAMESPACE.OZt.hQt(i),u=NAMESPACE.OZt.RQt(i)?COLOR_PROPERTY_ARGS:ONE_PROPERTY_ARGS;return this.KQt(u,e,r,h,n,a,o,l),NAMESPACE.OZt.RQt(i)?(COLOR_PROPERTY_ARGS.Tot[R]=C33.Uh(s),COLOR_PROPERTY_ARGS.Tot[G]=C33.jh(s),COLOR_PROPERTY_ARGS.Tot[B]=C33.Xh(s),COLOR_PROPERTY_ARGS.property=NAMESPACE.OZt._Qt(i)):NAMESPACE.OZt.wQt(i)?ONE_PROPERTY_ARGS.Tot=s/100:ONE_PROPERTY_ARGS.Tot=s,u.property=NAMESPACE.OZt._Qt(i),u}static zZt(t,e,i,s,r,h,n,a,o,l,u){this.KQt(TWO_PROPERTIES_ARGS,e,h,n,a,o,l,u);e="string"==typeof i?i:NAMESPACE.OZt.EQt(i);return TWO_PROPERTIES_ARGS.Tot[X]=s,TWO_PROPERTIES_ARGS.Tot[Y]=r,TWO_PROPERTIES_ARGS.property=NAMESPACE.OZt._Qt(e),TWO_PROPERTIES_ARGS}static KZt(t,e,i,s,r,h,n,a,o,l){return this.KQt(VALUE_PROPERTY_ARGS,e,r,h,n,a,o,l),VALUE_PROPERTY_ARGS.got=i,VALUE_PROPERTY_ARGS.Tot=s,VALUE_PROPERTY_ARGS.property=NAMESPACE.OZt._Qt("value"),VALUE_PROPERTY_ARGS}}}{let C33=self.We,NAMESPACE=C33.hot.Tween,TYPE_CHECK_OBJECTS=[];NAMESPACE.GQt=class PropertyTypes{constructor(){}static OQt(t){var e,i;0===TYPE_CHECK_OBJECTS.length&&((e=TYPE_CHECK_OBJECTS).push({UM:NAMESPACE.OZt.IQt,result:this.FQt}),e.push({UM:NAMESPACE.OZt.RQt,result:this.COLOR}),e.push({UM:NAMESPACE.OZt.MQt,result:this.VQt}),e.push({UM:NAMESPACE.OZt.GZt,result:this.jQt}),e.push({UM:()=>!0,result:this.YQt})),C33.vs(t)&&(t=C33.hot.Tween.OZt.bZt(t));for(i of TYPE_CHECK_OBJECTS)if(i.UM(t))return i.result}static get FQt(){return"pair"}static get COLOR(){return"color"}static get VQt(){return"angle"}static get jQt(){return"value"}static get YQt(){return"other"}}}{let C33=self.We,NAMESPACE=C33.hot.Tween;NAMESPACE.NQt=class ValueGetters{constructor(){}static UQt(t){t=C33.Sh(parseFloat(t));return C33.mh(t)}static WQt(t){return t.slice(0)}static $Qt(t){return t}}}{let getIndexForEase2=function(t){C3X.Ms(t);var e=Ease.dc(t);let i;if(-1===(i=e?Ease.Gc(e,null):Ease.Gc(t,null)))throw new Error(`invalid ease name '${t}'`);return i},ValidateTags2=function(t,e=!1){if(!(e&&null==t||"string"==typeof t||Array.isArray(t)))throw new Error("invalid tags")},C33=(getIndexForEase=getIndexForEase2,ValidateTags=ValidateTags2,self.We),C3X=self.Ze,IBehaviorInstance=self.WB,Ease=self.uc,NAMESPACE=C33.hot.Tween,map=new WeakMap,TWEEN_PROPERTIES=new Map([["x",{name:"offsetX",type:"one"}],["y",{name:"offsetY",type:"one"}],["width",{name:"offsetWidth",type:"one"}],["height",{name:"offsetHeight",type:"one"}],["angle",{name:"offsetAngle",type:"one"}],["opacity",{name:"offsetOpacity",type:"one"}],["color",{name:"offsetColor",type:"color"}],["z-elevation",{name:"offsetZElevation",type:"one"}],["x-scale",{name:"offsetScaleX",type:"one"}],["y-scale",{name:"offsetScaleY",type:"one"}],["position",{name:"position",type:"two"}],["size",{name:"size",type:"two"}],["scale",{name:"scale",type:"two"}],["value",{name:"value",type:"value"}]]),TWEEN_OPTS={tags:"",ZQt:!1,loop:!1,pingPong:!1,repeatCount:1,got:0},I_TWEEN_OPTS={a6:getIndexForEase2};self.WZt=class ITweenBehaviorInstance extends IBehaviorInstance{constructor(){super(),map.set(this,IBehaviorInstance.sF().NB())}QQt(t,e,i,s,r){var h=map.get(this);if(!h.qu()||!h.fet())return null;var n=TWEEN_PROPERTIES.get(t);if(!n)throw new Error("invalid tween property");"one"===n.type||"value"===n.type?C3X.Ss(e):(C3X.Vs(e),"two"===n.type?(C3X.Ss(e[0]),C3X.Ss(e[1])):"color"===n.type&&(C3X.Ss(e[0]),C3X.Ss(e[1]),C3X.Ss(e[2]))),"angle"===t?e=C33.gh(e):"opacity"===t?e*=100:"color"===t&&(e=C33.Hh(e[0],e[1],e[2]));t=getIndexForEase2(s);C3X.ys(i),r=Object.assign({},TWEEN_OPTS,r),"value"===n.type&&C3X.Ss(r.got),ValidateTags2(r.tags,!0);let a;if("one"===n.type||"color"===n.type?a=h.RZt(NAMESPACE.YZt.XZt(h,r.tags,n.name,e,i,t,!!r.ZQt,!!r.loop,!!r.pingPong,r.repeatCount)):"two"===n.type?a=h.RZt(NAMESPACE.YZt.zZt(h,r.tags,n.name,e[0],e[1],i,t,!!r.ZQt,!!r.loop,!!r.pingPong,r.repeatCount)):"value"===n.type&&(a=h.RZt(NAMESPACE.YZt.KZt(h,r.tags,r.got,e,i,t,!!r.ZQt,!!r.loop,!!r.pingPong,r.repeatCount))),a.Play())return a._ot(h,I_TWEEN_OPTS);throw new Error("failed to start tween")}*tte(){var t,e=map.get(this);for(t of e.hZt())yield t._ot(e,I_TWEEN_OPTS)}*ete(t){ValidateTags2(t);var e,i=map.get(this);for(e of i.CZt(t))yield e._ot(i,I_TWEEN_OPTS)}get isEnabled(){return map.get(this).qu()}set isEnabled(t){map.get(this).tTt(t)}}}{let C33=self.We;C33.hot.KHt=class aekiro_buttonBehavior extends C33.qEt{constructor(t){super(t);t=this.i3.F3();this.Tf=new C33.vf(C33.cf.mf(t,"pointerdown",t=>this.K9t(t.data)),C33.cf.mf(t,"pointermove",t=>this.Z9t(t.data)),C33.cf.mf(t,"pointerup",t=>this.Q9t(t.data,!1)),C33.cf.mf(t,"pointercancel",t=>this.Q9t(t.data,!0)))}lh(){this.Tf.lh(),this.Tf=null,super.lh()}K9t(t){this.ite(t.pointerId.toString(),t.clientX-this.i3.VD(),t.clientY-this.i3.HD())}Z9t(t){this.ste(t.pointerId.toString(),t.clientX-this.i3.VD(),t.clientY-this.i3.HD())}Q9t(t){this.rte(t.pointerId.toString(),t.clientX-this.i3.VD(),t.clientY-this.i3.HD())}hte(){var t;return this.EUt||(t=this.Dx().prt(C33.Mq.$Ht))&&(this.EUt=t.UN().NB()),this.EUt}async ite(t,e,i){var s,r=this.hte().kHt,h=[];for(s of this.r5()){var n=s.Cx(),a=s.lot(C33.hot.KHt),[o,l]=n.mx().WD(e,i,n.S7());a.Ejt(!1),r?n.k7(o,l)&&h.push(s):a.vjt&&await a.vjt(o,l,t)}if(r){h.sort(function(t,e){return t.Cx().S7()-e.Cx().S7()});var u,c,f=h.filter(t=>t.Cx().uD()&&t.Cx().mx().uD()),f=f[f.length-1],d=[];f&&d.push(f);for(u of h)0==u.yvt().KHt.ignoreInput&&d.push(u);for(c of d){var C=c.Cx(),p=c.lot(C33.hot.KHt),[C,m]=C.mx().WD(e,i,C.S7());p.vjt&&await p.vjt(C,m,t)}}}ste(t,e,i){var s;for(s of this.r5()){var r=s.lot(C33.hot.KHt),h=s.Cx(),[h,n]=h.mx().WD(e,i,h.S7());r.gjt&&r.gjt(h,n,t)}}async rte(t,e,i){var s;for(s of this.r5()){var r=s.lot(C33.hot.KHt),h=s.Cx(),[h,n]=h.mx().WD(e,i,h.S7());r.Ojt&&await r.Ojt(h,n)}}}}{let C33=self.We;C33.hot.KHt.lIt=class aekiro_buttonType extends C33.QEt{constructor(t){super(t)}lh(){super.lh()}m_t(){}}}{let C33=self.We;C33.hot.KHt.Instance=class aekiro_buttonInstance extends globalThis.iUt.button{constructor(t,e){super(t,e),this.isEnabled=e[0],this.frame_normal=e[1],this.frame_hover=e[2],this.frame_clicked=e[3],this.frame_disabled=e[4],this.frame_focus=e[5],this.clickSound=e[6],this.hoverSound=e[7],this.focusSound=e[8],this.clickAnimation=e[9],this.hoverAnimation=e[10],this.focusAnimation=e[11],this.color_normal=e[12],this.color_hover=e[13],this.color_clicked=e[14],this.color_disabled=e[15],this.color_focus=e[16],this.Cjt=e[17],this.pjt=e[18],this.mjt=e[19],this.ignoreInput=e[20],this._Ut()}Ljt(){this.FF(C33.hot.KHt.Iq.Hjt),this.EUt.FF(C33.Mq.$Ht.Iq.EXt)}Mjt(){this.FF(C33.hot.KHt.Iq.Tjt)}xjt(){this.FF(C33.hot.KHt.Iq._jt)}Ajt(){this.FF(C33.hot.KHt.Iq.Wjt)}Ijt(){this.FF(C33.hot.KHt.Iq.Vjt)}lh(){super.lh()}_g(){return{isEnabled:this.isEnabled,frame_normal:this.frame_normal,frame_hover:this.frame_hover,frame_clicked:this.frame_clicked,frame_disabled:this.frame_disabled,frame_focus:this.frame_focus,clickSound:this.clickSound,hoverSound:this.hoverSound,focusSound:this.focusSound,clickAnimation:this.clickAnimation,hoverAnimation:this.hoverAnimation,focusAnimation:this.focusAnimation,color_normal:this.color_normal,color_hover:this.color_hover,color_clicked:this.color_clicked,color_disabled:this.color_disabled,color_focus:this.color_focus,ignoreInput:this.ignoreInput,initProps:this.initProps}}Eg(t){this.isEnabled=t.isEnabled,this.frame_normal=t.frame_normal,this.frame_hover=t.frame_hover,this.frame_clicked=t.frame_clicked,this.frame_disabled=t.frame_disabled,this.frame_focus=t.frame_focus,this.clickSound=t.clickSound,this.hoverSound=t.hoverSound,this.focusSound=t.focusSound,this.clickAnimation=t.clickAnimation,this.hoverAnimation=t.hoverAnimation,this.focusAnimation=t.focusAnimation,this.color_normal=t.color_normal,this.color_hover=t.color_hover,this.color_clicked=t.color_clicked,this.color_disabled=t.color_disabled,this.color_focus=t.color_focus,this.ignoreInput=t.ignoreInput,this.initProps=t.initProps,this.QUt(),this.jUt()}}}{let C33=self.We;C33.hot.KHt.Iq={},Object.assign(C33.hot.KHt.Iq,globalThis.iUt.button.Iq)}{let C33=self.We;C33.hot.KHt.mrt={},Object.assign(self.We.hot.KHt.mrt,globalThis.iUt.button.mrt)}{let C33=self.We;C33.hot.KHt.vrt={}}{let C33=self.We;C33.hot.nte=class AnchorBehavior extends C33.qEt{constructor(t){super(t)}lh(){super.lh()}}}{let C33=self.We;C33.hot.nte.lIt=class AnchorType extends C33.QEt{constructor(t){super(t)}lh(){super.lh()}m_t(){}}}{let C33=self.We,C3X=self.Ze,IBehaviorInstance=self.WB,ANCHOR_LEFT=0,ANCHOR_TOP=1,ANCHOR_RIGHT=2,ANCHOR_BOTTOM=3,ENABLE=4,map=(C33.hot.nte.Instance=class AnchorInstance extends C33.eyt{constructor(t,e){super(t),this.ate=2,this.ote=2,this.lte=0,this.ute=0,this.Y1t=!0;t=this.wi.Cx().T7(),this.cte=t.gl(),this.fte=t.Tl(),this.dte=this.i3.O4()-t.gl(),this.Cte=this.i3.P4()-t.Tl(),this.pte=this.i3.O4()-t._l(),this.mte=this.i3.P4()-t.El(),e&&(this.ate=e[ANCHOR_LEFT],this.ote=e[ANCHOR_TOP],this.lte=e[ANCHOR_RIGHT],this.ute=e[ANCHOR_BOTTOM],this.Y1t=!!e[ENABLE]),t=this.i3.F3();this.Tf=new C33.vf(C33.cf.mf(t,"layoutchange",()=>this.vte())),this.Y1t&&this.eEt()}lh(){super.lh()}_g(){return{xl:this.cte,yt:this.fte,xr:this.dte,yb:this.Cte,rd:this.pte,bd:this.mte,al:this.ate,at:this.ote,ar:this.lte,ab:this.ute,e:this.Y1t}}Eg(t){this.cte=t.xl,this.fte=t.yt,this.dte=t.xr,this.Cte=t.yb,this.pte=t.rd,this.mte=t.bd,this.ate=t.al,this.ote=t.at,this.lte=t.ar,this.ute=t.ab,this.Y1t=t.e,this.Y1t?this.eEt():this.$_t()}LSt(t){this.Y1t&&!t?(this.Y1t=!1,this.$_t()):!this.Y1t&&t&&(t=this.wi.Cx().T7(),this.cte=t.gl(),this.fte=t.Tl(),this.dte=this.i3.O4()-t.gl(),this.Cte=this.i3.P4()-t.Tl(),this.pte=this.i3.O4()-t._l(),this.mte=this.i3.P4()-t.El(),this.Y1t=!0,this.eEt())}xSt(){return this.Y1t}HEt(){var t,e,i;this.Y1t&&(e=(t=this.wi.Cx()).mx().$D(),0===this.ate?0!=(i=e.gl()+this.cte-t.T7().gl())&&(t.cht(i),t.f7()):1===this.ate&&0!=(i=e._l()-this.dte-t.T7().gl())&&(t.cht(i),t.f7()),0===this.ote?0!=(i=e.Tl()+this.fte-t.T7().Tl())&&(t.fht(i),t.f7()):1===this.ote&&0!=(i=e.El()-this.Cte-t.T7().Tl())&&(t.fht(i),t.f7()),1===this.lte&&0!=(i=e._l()-this.pte-t.T7()._l())&&(t.cht(t.y$()*i),t.op(Math.max(t.tp()+i),0),t.f7(),this.pte=e._l()-t.T7()._l()),1===this.ute)&&0!=(i=e.El()-this.mte-t.T7().El())&&(t.fht(t.I$()*i),t.ep(Math.max(t.cp()+i,0)),t.f7(),this.mte=e.El()-t.T7().El())}QJ(){this.HEt()}vte(){this.HEt()}Jrt(t){switch(t){case ANCHOR_LEFT:return this.ate;case ANCHOR_TOP:return this.ote;case ANCHOR_RIGHT:return this.lte;case ANCHOR_BOTTOM:return this.ute;case ENABLE:return this.Y1t}}iht(t,e){switch(t){case ANCHOR_LEFT:this.ate=e;break;case ANCHOR_TOP:this.ote=e;break;case ANCHOR_RIGHT:this.lte=e;break;case ANCHOR_BOTTOM:this.ute=e;break;case ENABLE:this.Y1t=!!e,this.Y1t?this.eEt():this.$_t()}}hEt(){return[{title:"$"+this.XB().qc(),properties:[{name:"behaviors.anchor.properties.enabled.name",value:this.xSt(),P8t:t=>this.LSt(t)}]}]}v_t(){return self.Ste}},new WeakMap);self.Ste=class IAnchorBehaviorInstance extends IBehaviorInstance{constructor(){super(),map.set(this,IBehaviorInstance.sF().NB())}get isEnabled(){return map.get(this).xSt()}set isEnabled(t){map.get(this).LSt(t)}}}{let C33=self.We;C33.hot.nte.Iq={qu(){return this.xSt()}}}{let C33=self.We;C33.hot.nte.mrt={tTt(t){this.LSt(0!==t)}}}{let C33=self.We;C33.hot.nte.vrt={}}{let unaryminus2=function(t){return"number"==typeof t?-t:t},bothNumbers2=function(t,e){return"number"==typeof t&&"number"==typeof e},add2=function(t,e){return bothNumbers2(t,e)?t+e:t},subtract2=function(t,e){return bothNumbers2(t,e)?t-e:t},multiply2=function(t,e){return bothNumbers2(t,e)?t*e:t},divide2=function(t,e){return bothNumbers2(t,e)?t/e:t},mod2=function(t,e){return bothNumbers2(t,e)?t%e:t},pow2=function(t,e){return bothNumbers2(t,e)?Math.pow(t,e):t},and2=function(i,s){if("string"!=typeof i&&"string"!=typeof s)return i&&s?1:0;{let t,e;return t="number"==typeof i?(Math.round(1e10*i)/1e10).toString():i,e="number"==typeof s?(Math.round(1e10*s)/1e10).toString():s,t+e}},or2=function(t,e){return bothNumbers2(t,e)?t||e?1:0:t},C33=(unaryminus=unaryminus2,bothNumbers=bothNumbers2,add=add2,subtract=subtract2,multiply=multiply2,divide=divide2,mod=mod2,pow=pow2,and=and2,or=or2,self.We);self.o2t=[()=>"Layer",()=>0,()=>6,t=>{let e=t.S2t(0).Bmt();return()=>e("Layer")},t=>{let e=t.S2t(0).Bmt(),i=t.S2t(1).Bmt();return()=>e(i())},()=>"Water_Price",()=>.1,()=>"Electric_Price",()=>"Gas_Price",()=>1,t=>{let e=t.S2t(0);return()=>e.Umt()},()=>"Name",t=>{let e=t.S2t(0);return()=>"Привет, "+e.Umt()},()=>"Get_Date",t=>{let e=t.S2t(0).Bmt();return()=>e()},()=>"Water",t=>{let e=t.S2t(0),i=t.S2t(1);return()=>e.Umt(1)+30*i.Umt()},t=>{let e=t.S2t(0);return()=>e.Umt(1)},()=>"",t=>{let e=t.S2t(0),i=t.S2t(1);return()=>e.Umt(i.Umt(),1)},t=>{let e=t.S2t(0);return()=>e.qmt()},()=>"Electric",()=>"Gas",t=>{let e=t.S2t(0).a2t();return()=>e.Vit()},t=>{let e=t.S2t(0);return()=>e.Umt()/15},t=>{let e=t.S2t(0).Bmt();return()=>e("Main")},t=>{let e=t.S2t(0);return()=>e.Umt("2")},t=>{let e=t.S2t(0);return()=>e.Umt()+30},()=>2,()=>.3,t=>{let e=t.S2t(0);return()=>e.Umt()-250},()=>100,()=>.2,t=>{let e=t.S2t(0);return()=>e.Umt("State_Full")},()=>70,()=>"Login"]}}}),import_c3runtime=__toESM(require_c3runtime()),C32=self.We;self.T5t=function(){return[C32.Mq.Date,C32.Mq.Qst,C32.hot.Tween,C32.Mq.Touch,C32.Mq.gVt,C32.Mq.rHt,C32.hot.KHt,C32.Mq.$Ht,C32.Mq.IXt,C32.Mq.cYt,C32.Mq.QYt,C32.Mq.xqt,C32.Mq.Text,C32.hot.nte,C32.Mq.RKt,C32.Mq.Rq.Iq.Aq,C32.Mq.Rq.Iq.E7t,C32.Mq.Rq.mrt.mBt,C32.Mq.Rq.vrt.h6t,C32.Mq.Qst.mrt.DR,C32.Mq.Rq.mrt.P7t,C32.Mq.Date.vrt._6t,C32.Mq.Date.vrt.z6t,C32.Mq.Date.vrt.E6t,C32.Mq.Date.vrt.y6t,C32.Mq.rHt.mrt.wHt,C32.Mq.Rq.mrt.On,C32.Mq.Qst.Iq.J8t,C32.Mq.Qst.mrt.l9t,C32.Mq.xqt.vrt.Ezt,C32.Mq.Text.Iq.U$,C32.Mq.Text.mrt.n3,C32.Mq.xqt.vrt.userName,C32.Mq.Rq.Iq.Ldt,C32.Mq.rHt.Iq.EHt,C32.Mq.gVt.mrt.YVt,C32.Mq.rHt.vrt.DHt,C32.Mq.gVt.mrt.UVt,C32.Mq.gVt.Iq.BVt,C32.Mq.Qst.Iq.z8t,C32.Mq.Rq.mrt.$7t,C32.Mq.Qst.vrt.S9t,C32.Mq.gVt.vrt.JVt,C32.Mq.Qst.vrt.g9t,C32.Mq.Qst.mrt.K7,C32.Mq.Qst.mrt.lTt,C32.Mq.Qst.mrt.s9t,C32.Mq.gVt.Iq.DVt,C32.Mq.Qst.Iq.hTt,C32.Mq.gVt.vrt.MVt,C32.Mq.Qst.mrt.x8t,C32.Mq.Qst.mrt.oD,C32.Mq.Qst.mrt.vTt,C32.Mq.Qst.vrt.rgt,C32.Mq.Qst.mrt.ep,C32.hot.Tween.mrt.jZt,C32.Mq.Qst.vrt.f9t,C32.Mq.Touch.Iq.nWt,C32.Mq.Rq.Iq.r7t,C32.Mq.Touch.vrt.QSt,C32.Mq.Touch.vrt.tgt,C32.Mq.Qst.vrt.ngt,C32.Mq.Qst.mrt.JSt,C32.hot.Tween.mrt.qZt,C32.Mq.Qst.vrt.QSt,C32.Mq.Qst.vrt.tgt,C32.Mq.Qst.vrt.p9t,C32.Mq.Rq.Iq.c0,C32.Mq.Qst.Iq.uD,C32.hot.KHt.Iq.Hjt,C32.hot.KHt.mrt.sjt,C32.Mq.RKt.mrt.tTt,C32.Mq.Qst.mrt.Tb,C32.Mq.xqt.Iq.Vqt,C32.Mq.Rq.mrt.sBt,C32.Mq.xqt.Iq.Hqt,C32.Mq.RKt.Iq.Hjt,C32.Mq.xqt.mrt.Tzt,C32.hot.KHt.mrt.qjt,C32.Mq.QYt.Iq.YXt]},self.F5t=[{Date:0},{gte:0},{lIt:0},{Tte:0},{_te:0},{Tween:0},{Ete:0},{Touch:0},{yte:0},{rHt:0},{Ate:0},{Ite:0},{RKt:0},{Rte:0},{Mte:0},{wte:0},{bte:0},{Ote:0},{Gte:0},{Pte:0},{Lte:0},{Qst:0},{Text:0},{xte:0},{Nte:0},{Dte:0},{Fte:0},{Bte:0},{nte:0},{$te:0},{kte:0},{Wte:0},{Vte:0}],self.Hte={Date:class extends self.ZD{},Tte:class extends self.B8t{},Ete:class extends self.B8t{},Touch:class extends self.ZD{},yte:class extends self.LVt{},rHt:class extends self.ZD{},Ate:class extends self.LVt{},Ite:class extends self.LVt{},Rte:class extends self.B8t{},Mte:class extends self.ZD{},wte:class extends self.ZD{},bte:class extends self.ZD{},Ote:class extends self.ZD{},Gte:class extends self.ZD{},Pte:class extends self.B8t{},Lte:class extends self.B8t{},Qst:class extends self.B8t{},Text:class extends self.FJt{},Dte:class extends self.B8t{},Fte:class extends self.B8t{},Bte:class extends self.B8t{},$te:class extends self.B8t{},kte:class extends self.B8t{},RKt:class extends self.FKt{}};