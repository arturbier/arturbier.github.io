// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__commonJS=(t,s)=>function(){return s||(0,t[__getOwnPropNames(t)[0]])((s={exports:{}}).exports,s),s.exports},__copyProps=(t,s,e,i)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let r of __getOwnPropNames(s))__hasOwnProp.call(t,r)||r===e||__defProp(t,r,{get:()=>s[r],enumerable:!(i=__getOwnPropDesc(s,r))||i.enumerable});return t},__toESM=(t,s,e)=>(e=null!=t?__create(__getProtoOf(t)):{},__copyProps(!s&&t&&t.i?e:__defProp(e,"default",{value:t,enumerable:!0}),t)),require_c3runtime=__commonJS({"file-map:scripts/c3runtime.js"(exports,module){{let e=function(t){ARRAY_TYPE=t},n=function(t){return t*degree},h=function(t,s){return Math.abs(t-s)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(s))},u=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},p=function(t){var s=new ARRAY_TYPE(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},m=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},g=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},y=function(t,s,e,i){var r=new ARRAY_TYPE(4);return r[0]=t,r[1]=s,r[2]=e,r[3]=i,r},S=function(t,s,e,i,r){return t[0]=s,t[1]=e,t[2]=i,t[3]=r,t},w=function(t,s){if(t===s){var e=s[1];t[1]=s[2],t[2]=e}else t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3];return t},v=function(t,s){var e=s[0],i=s[1],r=s[2],n=s[3],h=e*n-r*i;return h?(h=1/h,t[0]=n*h,t[1]=-i*h,t[2]=-r*h,t[3]=e*h,t):null},b=function(t,s){var e=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=e,t},x=function(t){return t[0]*t[3]-t[2]*t[1]},C=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=e[0],a=e[1],l=e[2],u=e[3];return t[0]=i*o+n*a,t[1]=r*o+h*a,t[2]=i*l+n*u,t[3]=r*l+h*u,t},T=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=Math.sin(e),a=Math.cos(e);return t[0]=i*a+n*o,t[1]=r*a+h*o,t[2]=i*-o+n*a,t[3]=r*-o+h*a,t},M=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=e[0],a=e[1];return t[0]=i*o,t[1]=r*o,t[2]=n*a,t[3]=h*a,t},I=function(t,s){var e=Math.sin(s),i=Math.cos(s);return t[0]=i,t[1]=e,t[2]=-e,t[3]=i,t},G=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},_=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},P=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},R=function(t,s,e,i){return t[2]=i[2]/i[0],e[0]=i[0],e[1]=i[1],e[3]=i[3]-t[2]*e[1],[t,s,e]},A=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t},E=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t[3]=s[3]-e[3],t},O=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},F=function(t,s){var e=t[0],i=t[1],r=t[2],n=t[3],h=s[0],o=s[1],a=s[2],l=s[3];return Math.abs(e-h)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(i-o)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-l)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(l))},D=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t},L=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t[3]=s[3]+e[3]*i,t},k=function(){var t=new ARRAY_TYPE(6);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},N=function(t){var s=new ARRAY_TYPE(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},B=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},$=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},U=function(t,s,e,i,r,n){var h=new ARRAY_TYPE(6);return h[0]=t,h[1]=s,h[2]=e,h[3]=i,h[4]=r,h[5]=n,h},V=function(t,s,e,i,r,n,h){return t[0]=s,t[1]=e,t[2]=i,t[3]=r,t[4]=n,t[5]=h,t},W=function(t,s){var e=s[0],i=s[1],r=s[2],n=s[3],h=s[4],o=s[5],a=e*n-i*r;return a?(a=1/a,t[0]=n*a,t[1]=-i*a,t[2]=-r*a,t[3]=e*a,t[4]=(r*o-n*h)*a,t[5]=(i*h-e*o)*a,t):null},z=function(t){return t[0]*t[3]-t[1]*t[2]},j=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=s[4],a=s[5],l=e[0],u=e[1],c=e[2],f=e[3],d=e[4],p=e[5];return t[0]=i*l+n*u,t[1]=r*l+h*u,t[2]=i*c+n*f,t[3]=r*c+h*f,t[4]=i*d+n*p+o,t[5]=r*d+h*p+a,t},H=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=s[4],a=s[5],l=Math.sin(e),u=Math.cos(e);return t[0]=i*u+n*l,t[1]=r*u+h*l,t[2]=i*-l+n*u,t[3]=r*-l+h*u,t[4]=o,t[5]=a,t},q=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=s[4],a=s[5],l=e[0],u=e[1];return t[0]=i*l,t[1]=r*l,t[2]=n*u,t[3]=h*u,t[4]=o,t[5]=a,t},J=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=s[4],a=s[5],l=e[0],u=e[1];return t[0]=i,t[1]=r,t[2]=n,t[3]=h,t[4]=i*l+n*u+o,t[5]=r*l+h*u+a,t},Y=function(t,s){var e=Math.sin(s),i=Math.cos(s);return t[0]=i,t[1]=e,t[2]=-e,t[3]=i,t[4]=0,t[5]=0,t},X=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},K=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},Z=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},Q=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},tt=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t[4]=s[4]+e[4],t[5]=s[5]+e[5],t},st=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t[3]=s[3]-e[3],t[4]=s[4]-e[4],t[5]=s[5]-e[5],t},et=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*e,t[5]=s[5]*e,t},it=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t[3]=s[3]+e[3]*i,t[4]=s[4]+e[4]*i,t[5]=s[5]+e[5]*i,t},rt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},nt=function(t,s){var e=t[0],i=t[1],r=t[2],n=t[3],h=t[4],o=t[5],a=s[0],l=s[1],u=s[2],c=s[3],f=s[4],d=s[5];return Math.abs(e-a)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(i-l)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-u)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-c)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(h-f)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(o-d)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(d))},ht=function(){var t=new ARRAY_TYPE(9);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},ot=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},at=function(t){var s=new ARRAY_TYPE(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},lt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},ut=function(t,s,e,i,r,n,h,o,a){var l=new ARRAY_TYPE(9);return l[0]=t,l[1]=s,l[2]=e,l[3]=i,l[4]=r,l[5]=n,l[6]=h,l[7]=o,l[8]=a,l},ct=function(t,s,e,i,r,n,h,o,a,l){return t[0]=s,t[1]=e,t[2]=i,t[3]=r,t[4]=n,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t},ft=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},dt=function(t,s){if(t===s){var e=s[1],i=s[2],r=s[5];t[1]=s[3],t[2]=s[6],t[3]=e,t[5]=s[7],t[6]=i,t[7]=r}else t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8];return t},pt=function(t,s){var e=s[0],i=s[1],r=s[2],n=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=u*h-o*l,f=-u*n+o*a,d=l*n-h*a,p=e*c+i*f+r*d;return p?(p=1/p,t[0]=c*p,t[1]=(-u*i+r*l)*p,t[2]=(o*i-r*h)*p,t[3]=f*p,t[4]=(u*e-r*a)*p,t[5]=(-o*e+r*n)*p,t[6]=d*p,t[7]=(-l*e+i*a)*p,t[8]=(h*e-i*n)*p,t):null},mt=function(t,s){var e=s[0],i=s[1],r=s[2],n=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8];return t[0]=h*u-o*l,t[1]=r*l-i*u,t[2]=i*o-r*h,t[3]=o*a-n*u,t[4]=e*u-r*a,t[5]=r*n-e*o,t[6]=n*l-h*a,t[7]=i*a-e*l,t[8]=e*h-i*n,t},gt=function(t){var s=t[0],e=t[1],i=t[2],r=t[3],n=t[4],h=t[5],o=t[6],a=t[7],l=t[8];return s*(l*n-h*a)+e*(-l*r+h*o)+i*(a*r-n*o)},yt=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=e[0],d=e[1],p=e[2],m=e[3],g=e[4],y=e[5],S=e[6],w=e[7],v=e[8];return t[0]=f*i+d*h+p*l,t[1]=f*r+d*o+p*u,t[2]=f*n+d*a+p*c,t[3]=m*i+g*h+y*l,t[4]=m*r+g*o+y*u,t[5]=m*n+g*a+y*c,t[6]=S*i+w*h+v*l,t[7]=S*r+w*o+v*u,t[8]=S*n+w*a+v*c,t},St=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=e[0],d=e[1];return t[0]=i,t[1]=r,t[2]=n,t[3]=h,t[4]=o,t[5]=a,t[6]=f*i+d*h+l,t[7]=f*r+d*o+u,t[8]=f*n+d*a+c,t},wt=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=Math.sin(e),d=Math.cos(e);return t[0]=d*i+f*h,t[1]=d*r+f*o,t[2]=d*n+f*a,t[3]=d*h-f*i,t[4]=d*o-f*r,t[5]=d*a-f*n,t[6]=l,t[7]=u,t[8]=c,t},vt=function(t,s,e){var i=e[0],r=e[1];return t[0]=i*s[0],t[1]=i*s[1],t[2]=i*s[2],t[3]=r*s[3],t[4]=r*s[4],t[5]=r*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},bt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},xt=function(t,s){var e=Math.sin(s),i=Math.cos(s);return t[0]=i,t[1]=e,t[2]=0,t[3]=-e,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ct=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Tt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},Mt=function(t,s){var e=s[0],i=s[1],r=s[2],n=s[3],h=e+e,o=i+i,a=r+r,l=e*h,u=i*h,c=i*o,f=r*h,d=r*o,p=r*a,m=n*h,g=n*o,y=n*a;return t[0]=1-c-p,t[3]=u-y,t[6]=f+g,t[1]=u+y,t[4]=1-l-p,t[7]=d-m,t[2]=f-g,t[5]=d+m,t[8]=1-l-c,t},It=function(t,s){var e=s[0],i=s[1],r=s[2],n=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],S=e*o-i*h,w=e*a-r*h,v=e*l-n*h,b=i*a-r*o,x=i*l-n*o,C=r*l-n*a,T=u*m-c*p,M=u*g-f*p,I=u*y-d*p,G=c*g-f*m,_=c*y-d*m,P=f*y-d*g,R=S*P-w*_+v*G+b*I-x*M+C*T;return R?(R=1/R,t[0]=(o*P-a*_+l*G)*R,t[1]=(a*I-h*P-l*M)*R,t[2]=(h*_-o*I+l*T)*R,t[3]=(r*_-i*P-n*G)*R,t[4]=(e*P-r*I+n*M)*R,t[5]=(i*I-e*_-n*T)*R,t[6]=(m*C-g*x+y*b)*R,t[7]=(g*v-p*C-y*w)*R,t[8]=(p*x-m*v+y*S)*R,t):null},Gt=function(t,s,e){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/e,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},_t=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Pt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Rt=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t[4]=s[4]+e[4],t[5]=s[5]+e[5],t[6]=s[6]+e[6],t[7]=s[7]+e[7],t[8]=s[8]+e[8],t},At=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t[3]=s[3]-e[3],t[4]=s[4]-e[4],t[5]=s[5]-e[5],t[6]=s[6]-e[6],t[7]=s[7]-e[7],t[8]=s[8]-e[8],t},Et=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*e,t[5]=s[5]*e,t[6]=s[6]*e,t[7]=s[7]*e,t[8]=s[8]*e,t},Ot=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t[3]=s[3]+e[3]*i,t[4]=s[4]+e[4]*i,t[5]=s[5]+e[5]*i,t[6]=s[6]+e[6]*i,t[7]=s[7]+e[7]*i,t[8]=s[8]+e[8]*i,t},Ft=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},Dt=function(t,s){var e=t[0],i=t[1],r=t[2],n=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=s[0],f=s[1],d=s[2],p=s[3],m=s[4],g=s[5],y=s[6],S=s[7],w=s[8];return Math.abs(e-c)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(i-f)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(r-d)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-p)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(h-m)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(m))&&Math.abs(o-g)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(a-y)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(l-S)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(u-w)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(w))},Lt=function(){var t=new ARRAY_TYPE(16);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},kt=function(t){var s=new ARRAY_TYPE(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},Nt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},Bt=function(t,s,e,i,r,n,h,o,a,l,u,c,f,d,p,m){var g=new ARRAY_TYPE(16);return g[0]=t,g[1]=s,g[2]=e,g[3]=i,g[4]=r,g[5]=n,g[6]=h,g[7]=o,g[8]=a,g[9]=l,g[10]=u,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},$t=function(t,s,e,i,r,n,h,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=e,t[2]=i,t[3]=r,t[4]=n,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},Ut=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Vt=function(t,s){if(t===s){var e=s[1],i=s[2],r=s[3],n=s[6],h=s[7],o=s[11];t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=e,t[6]=s[9],t[7]=s[13],t[8]=i,t[9]=n,t[11]=s[14],t[12]=r,t[13]=h,t[14]=o}else t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15];return t},Wt=function(t,s){var e=s[0],i=s[1],r=s[2],n=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],S=e*o-i*h,w=e*a-r*h,v=e*l-n*h,b=i*a-r*o,x=i*l-n*o,C=r*l-n*a,T=u*m-c*p,M=u*g-f*p,I=u*y-d*p,G=c*g-f*m,_=c*y-d*m,P=f*y-d*g,R=S*P-w*_+v*G+b*I-x*M+C*T;return R?(R=1/R,t[0]=(o*P-a*_+l*G)*R,t[1]=(r*_-i*P-n*G)*R,t[2]=(m*C-g*x+y*b)*R,t[3]=(f*x-c*C-d*b)*R,t[4]=(a*I-h*P-l*M)*R,t[5]=(e*P-r*I+n*M)*R,t[6]=(g*v-p*C-y*w)*R,t[7]=(u*C-f*v+d*w)*R,t[8]=(h*_-o*I+l*T)*R,t[9]=(i*I-e*_-n*T)*R,t[10]=(p*x-m*v+y*S)*R,t[11]=(c*v-u*x-d*S)*R,t[12]=(o*M-h*G-a*T)*R,t[13]=(e*G-i*M+r*T)*R,t[14]=(m*w-p*b-g*S)*R,t[15]=(u*b-c*w+f*S)*R,t):null},zt=function(t,s){var e=s[0],i=s[1],r=s[2],n=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],S=e*o-i*h,w=e*a-r*h,v=e*l-n*h,b=i*a-r*o,x=i*l-n*o,C=r*l-n*a,T=u*m-c*p,M=u*g-f*p,I=u*y-d*p,G=c*g-f*m,_=c*y-d*m,P=f*y-d*g;return t[0]=o*P-a*_+l*G,t[1]=r*_-i*P-n*G,t[2]=m*C-g*x+y*b,t[3]=f*x-c*C-d*b,t[4]=a*I-h*P-l*M,t[5]=e*P-r*I+n*M,t[6]=g*v-p*C-y*w,t[7]=u*C-f*v+d*w,t[8]=h*_-o*I+l*T,t[9]=i*I-e*_-n*T,t[10]=p*x-m*v+y*S,t[11]=c*v-u*x-d*S,t[12]=o*M-h*G-a*T,t[13]=e*G-i*M+r*T,t[14]=m*w-p*b-g*S,t[15]=u*b-c*w+f*S,t},jt=function(t){var s=t[0],e=t[1],i=t[2],r=t[3],n=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[9],c=t[10],f=t[11],d=t[12],p=t[13],m=t[14],g=s*h-e*n,y=s*o-i*n,S=e*o-i*h,w=l*p-u*d,v=l*m-c*d,b=u*m-c*p;return a*(s*b-e*v+i*w)-r*(n*b-h*v+o*w)+t[15]*(l*S-u*y+c*g)-f*(d*S-p*y+m*g)},Ht=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],S=s[15],w=e[0],v=e[1],b=e[2],x=e[3];return t[0]=w*i+v*o+b*c+x*m,t[1]=w*r+v*a+b*f+x*g,t[2]=w*n+v*l+b*d+x*y,t[3]=w*h+v*u+b*p+x*S,w=e[4],v=e[5],b=e[6],x=e[7],t[4]=w*i+v*o+b*c+x*m,t[5]=w*r+v*a+b*f+x*g,t[6]=w*n+v*l+b*d+x*y,t[7]=w*h+v*u+b*p+x*S,w=e[8],v=e[9],b=e[10],x=e[11],t[8]=w*i+v*o+b*c+x*m,t[9]=w*r+v*a+b*f+x*g,t[10]=w*n+v*l+b*d+x*y,t[11]=w*h+v*u+b*p+x*S,w=e[12],v=e[13],b=e[14],x=e[15],t[12]=w*i+v*o+b*c+x*m,t[13]=w*r+v*a+b*f+x*g,t[14]=w*n+v*l+b*d+x*y,t[15]=w*h+v*u+b*p+x*S,t},qt=function(t,s,e){var i,r,n,h,o,a,l,u,c,f,d,p,m=e[0],g=e[1],y=e[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*y+s[12],t[13]=s[1]*m+s[5]*g+s[9]*y+s[13],t[14]=s[2]*m+s[6]*g+s[10]*y+s[14],t[15]=s[3]*m+s[7]*g+s[11]*y+s[15]):(i=s[0],r=s[1],n=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=i,t[1]=r,t[2]=n,t[3]=h,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=i*m+o*g+c*y+s[12],t[13]=r*m+a*g+f*y+s[13],t[14]=n*m+l*g+d*y+s[14],t[15]=h*m+u*g+p*y+s[15]),t},Jt=function(t,s,e){var i=e[0],r=e[1],n=e[2];return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*r,t[5]=s[5]*r,t[6]=s[6]*r,t[7]=s[7]*r,t[8]=s[8]*n,t[9]=s[9]*n,t[10]=s[10]*n,t[11]=s[11]*n,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},Yt=function(t,s,e,i){var r,n,h,o,a,l,u,c,f,d,p,m,g,y,S,w,v,b,x,C,T,M,I,G,_=i[0],P=i[1],R=i[2],A=Math.hypot(_,P,R);return A<EPSILON?null:(_*=A=1/A,P*=A,R*=A,r=Math.sin(e),h=1-(n=Math.cos(e)),o=s[0],a=s[1],l=s[2],u=s[3],c=s[4],f=s[5],d=s[6],p=s[7],m=s[8],g=s[9],y=s[10],S=s[11],w=_*_*h+n,v=P*_*h+R*r,b=R*_*h-P*r,x=_*P*h-R*r,C=P*P*h+n,T=R*P*h+_*r,M=_*R*h+P*r,I=P*R*h-_*r,G=R*R*h+n,t[0]=o*w+c*v+m*b,t[1]=a*w+f*v+g*b,t[2]=l*w+d*v+y*b,t[3]=u*w+p*v+S*b,t[4]=o*x+c*C+m*T,t[5]=a*x+f*C+g*T,t[6]=l*x+d*C+y*T,t[7]=u*x+p*C+S*T,t[8]=o*M+c*I+m*G,t[9]=a*M+f*I+g*G,t[10]=l*M+d*I+y*G,t[11]=u*M+p*I+S*G,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},Xt=function(t,s,e){var i=Math.sin(e),r=Math.cos(e),n=s[4],h=s[5],o=s[6],a=s[7],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=n*r+l*i,t[5]=h*r+u*i,t[6]=o*r+c*i,t[7]=a*r+f*i,t[8]=l*r-n*i,t[9]=u*r-h*i,t[10]=c*r-o*i,t[11]=f*r-a*i,t},Kt=function(t,s,e){var i=Math.sin(e),r=Math.cos(e),n=s[0],h=s[1],o=s[2],a=s[3],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=n*r-l*i,t[1]=h*r-u*i,t[2]=o*r-c*i,t[3]=a*r-f*i,t[8]=n*i+l*r,t[9]=h*i+u*r,t[10]=o*i+c*r,t[11]=a*i+f*r,t},Zt=function(t,s,e){var i=Math.sin(e),r=Math.cos(e),n=s[0],h=s[1],o=s[2],a=s[3],l=s[4],u=s[5],c=s[6],f=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=n*r+l*i,t[1]=h*r+u*i,t[2]=o*r+c*i,t[3]=a*r+f*i,t[4]=l*r-n*i,t[5]=u*r-h*i,t[6]=c*r-o*i,t[7]=f*r-a*i,t},Qt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ts=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ss=function(t,s,e){var i,r,n,h=e[0],o=e[1],a=e[2],l=Math.hypot(h,o,a);return l<EPSILON?null:(h*=l=1/l,o*=l,a*=l,i=Math.sin(s),n=1-(r=Math.cos(s)),t[0]=h*h*n+r,t[1]=o*h*n+a*i,t[2]=a*h*n-o*i,t[3]=0,t[4]=h*o*n-a*i,t[5]=o*o*n+r,t[6]=a*o*n+h*i,t[7]=0,t[8]=h*a*n+o*i,t[9]=o*a*n-h*i,t[10]=a*a*n+r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},es=function(t,s){var e=Math.sin(s),i=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},is=function(t,s){var e=Math.sin(s),i=Math.cos(s);return t[0]=i,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rs=function(t,s){var e=Math.sin(s),i=Math.cos(s);return t[0]=i,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ns=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=i+i,a=r+r,l=n+n,u=i*o,c=i*a,f=i*l,d=r*a,p=r*l,m=n*l,g=h*o,y=h*a,S=h*l;return t[0]=1-(d+m),t[1]=c+S,t[2]=f-y,t[3]=0,t[4]=c-S,t[5]=1-(u+m),t[6]=p+g,t[7]=0,t[8]=f+y,t[9]=p-g,t[10]=1-(u+d),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},hs=function(t,s){var e=new ARRAY_TYPE(3),i=-s[0],r=-s[1],n=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=i*i+r*r+n*n+h*h;return c>0?(e[0]=2*(o*h+u*i+a*n-l*r)/c,e[1]=2*(a*h+u*r+l*i-o*n)/c,e[2]=2*(l*h+u*n+o*r-a*i)/c):(e[0]=2*(o*h+u*i+a*n-l*r),e[1]=2*(a*h+u*r+l*i-o*n),e[2]=2*(l*h+u*n+o*r-a*i)),ns(t,s,e),t},os=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},as=function(t,s){var e=s[0],i=s[1],r=s[2],n=s[4],h=s[5],o=s[6],a=s[8],l=s[9],u=s[10];return t[0]=Math.hypot(e,i,r),t[1]=Math.hypot(n,h,o),t[2]=Math.hypot(a,l,u),t},ls=function(t,s){var e=new ARRAY_TYPE(3);as(e,s);var i=1/e[0],r=1/e[1],n=1/e[2],h=s[0]*i,o=s[1]*r,a=s[2]*n,l=s[4]*i,u=s[5]*r,c=s[6]*n,f=s[8]*i,d=s[9]*r,p=s[10]*n,m=h+u+p,g=0;return m>0?(g=2*Math.sqrt(m+1),t[3]=.25*g,t[0]=(c-d)/g,t[1]=(f-a)/g,t[2]=(o-l)/g):h>u&&h>p?(g=2*Math.sqrt(1+h-u-p),t[3]=(c-d)/g,t[0]=.25*g,t[1]=(o+l)/g,t[2]=(f+a)/g):u>p?(g=2*Math.sqrt(1+u-h-p),t[3]=(f-a)/g,t[0]=(o+l)/g,t[1]=.25*g,t[2]=(c+d)/g):(g=2*Math.sqrt(1+p-h-u),t[3]=(o-l)/g,t[0]=(f+a)/g,t[1]=(c+d)/g,t[2]=.25*g),t},us=function(t,s,e,i){s[0]=i[12],s[1]=i[13],s[2]=i[14];var r=i[0],n=i[1],h=i[2],o=i[4],a=i[5],l=i[6],u=i[8],c=i[9],f=i[10];e[0]=Math.hypot(r,n,h),e[1]=Math.hypot(o,a,l),e[2]=Math.hypot(u,c,f);var d=1/e[0],p=1/e[1],m=1/e[2],g=r*d,y=n*p,S=h*m,w=o*d,v=a*p,b=l*m,x=u*d,C=c*p,T=f*m,M=g+v+T,I=0;return M>0?(I=2*Math.sqrt(M+1),t[3]=.25*I,t[0]=(b-C)/I,t[1]=(x-S)/I,t[2]=(y-w)/I):g>v&&g>T?(I=2*Math.sqrt(1+g-v-T),t[3]=(b-C)/I,t[0]=.25*I,t[1]=(y+w)/I,t[2]=(x+S)/I):v>T?(I=2*Math.sqrt(1+v-g-T),t[3]=(x-S)/I,t[0]=(y+w)/I,t[1]=.25*I,t[2]=(b+C)/I):(I=2*Math.sqrt(1+T-g-v),t[3]=(y-w)/I,t[0]=(x+S)/I,t[1]=(b+C)/I,t[2]=.25*I),t},cs=function(t,s,e,i){var r=s[0],n=s[1],h=s[2],o=s[3],a=r+r,l=n+n,u=h+h,c=r*a,f=r*l,d=r*u,p=n*l,m=n*u,g=h*u,y=o*a,S=o*l,w=o*u,v=i[0],b=i[1],x=i[2];return t[0]=(1-(p+g))*v,t[1]=(f+w)*v,t[2]=(d-S)*v,t[3]=0,t[4]=(f-w)*b,t[5]=(1-(c+g))*b,t[6]=(m+y)*b,t[7]=0,t[8]=(d+S)*x,t[9]=(m-y)*x,t[10]=(1-(c+p))*x,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},fs=function(t,s,e,i,r){var n=s[0],h=s[1],o=s[2],a=s[3],l=n+n,u=h+h,c=o+o,f=n*l,d=n*u,p=n*c,m=h*u,g=h*c,y=o*c,S=a*l,w=a*u,v=a*c,b=i[0],x=i[1],C=i[2],T=r[0],M=r[1],I=r[2],G=(1-(m+y))*b,_=(d+v)*b,P=(p-w)*b,R=(d-v)*x,A=(1-(f+y))*x,E=(g+S)*x,O=(p+w)*C,F=(g-S)*C,D=(1-(f+m))*C;return t[0]=G,t[1]=_,t[2]=P,t[3]=0,t[4]=R,t[5]=A,t[6]=E,t[7]=0,t[8]=O,t[9]=F,t[10]=D,t[11]=0,t[12]=e[0]+T-(G*T+R*M+O*I),t[13]=e[1]+M-(_*T+A*M+F*I),t[14]=e[2]+I-(P*T+E*M+D*I),t[15]=1,t},ds=function(t,s){var e=s[0],i=s[1],r=s[2],n=s[3],h=e+e,o=i+i,a=r+r,l=e*h,u=i*h,c=i*o,f=r*h,d=r*o,p=r*a,m=n*h,g=n*o,y=n*a;return t[0]=1-c-p,t[1]=u+y,t[2]=f-g,t[3]=0,t[4]=u-y,t[5]=1-l-p,t[6]=d+m,t[7]=0,t[8]=f+g,t[9]=d-m,t[10]=1-l-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ps=function(t,s,e,i,r,n,h){var o=1/(e-s),a=1/(r-i),l=1/(n-h);return t[0]=2*n*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*n*a,t[6]=0,t[7]=0,t[8]=(e+s)*o,t[9]=(r+i)*a,t[10]=(h+n)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=h*n*2*l,t[15]=0,t},ms=function(t,s,e,i,r){var n=1/Math.tan(s/2);if(t[0]=n/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0){var h=1/(i-r);t[10]=(r+i)*h,t[14]=2*r*i*h}else t[10]=-1,t[14]=-2*i;return t},gs=function(t,s,e,i,r){var n=1/Math.tan(s/2);if(t[0]=n/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0){var h=1/(i-r);t[10]=r*h,t[14]=r*i*h}else t[10]=-1,t[14]=-i;return t},ys=function(t,s,e,i){var r=Math.tan(s.upDegrees*Math.PI/180),n=Math.tan(s.downDegrees*Math.PI/180),h=Math.tan(s.leftDegrees*Math.PI/180),o=Math.tan(s.rightDegrees*Math.PI/180),a=2/(h+o),l=2/(r+n);return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(h-o)*a*.5,t[9]=(r-n)*l*.5,t[10]=i/(e-i),t[11]=-1,t[12]=0,t[13]=0,t[14]=i*e/(e-i),t[15]=0,t},Ss=function(t,s,e,i,r,n,h){var o=1/(s-e),a=1/(i-r),l=1/(n-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+e)*o,t[13]=(r+i)*a,t[14]=(h+n)*l,t[15]=1,t},ws=function(t,s,e,i,r,n,h){var o=1/(s-e),a=1/(i-r),l=1/(n-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(s+e)*o,t[13]=(r+i)*a,t[14]=n*l,t[15]=1,t},vs=function(t,s,e,i){var r,n,h,o,a,l,u,c,f,d,p=s[0],m=s[1],g=s[2],y=i[0],S=i[1],w=i[2],v=e[0],b=e[1],x=e[2];return Math.abs(p-v)<EPSILON&&Math.abs(m-b)<EPSILON&&Math.abs(g-x)<EPSILON?Ut(t):(u=p-v,c=m-b,f=g-x,r=S*(f*=d=1/Math.hypot(u,c,f))-w*(c*=d),n=w*(u*=d)-y*f,h=y*c-S*u,(d=Math.hypot(r,n,h))?(r*=d=1/d,n*=d,h*=d):(r=0,n=0,h=0),o=c*h-f*n,a=f*r-u*h,l=u*n-c*r,(d=Math.hypot(o,a,l))?(o*=d=1/d,a*=d,l*=d):(o=0,a=0,l=0),t[0]=r,t[1]=o,t[2]=u,t[3]=0,t[4]=n,t[5]=a,t[6]=c,t[7]=0,t[8]=h,t[9]=l,t[10]=f,t[11]=0,t[12]=-(r*p+n*m+h*g),t[13]=-(o*p+a*m+l*g),t[14]=-(u*p+c*m+f*g),t[15]=1,t)},bs=function(t,s,e,i){var r=s[0],n=s[1],h=s[2],o=i[0],a=i[1],l=i[2],u=r-e[0],c=n-e[1],f=h-e[2],d=u*u+c*c+f*f;d>0&&(u*=d=1/Math.sqrt(d),c*=d,f*=d);var p=a*f-l*c,m=l*u-o*f,g=o*c-a*u;return(d=p*p+m*m+g*g)>0&&(p*=d=1/Math.sqrt(d),m*=d,g*=d),t[0]=p,t[1]=m,t[2]=g,t[3]=0,t[4]=c*g-f*m,t[5]=f*p-u*g,t[6]=u*m-c*p,t[7]=0,t[8]=u,t[9]=c,t[10]=f,t[11]=0,t[12]=r,t[13]=n,t[14]=h,t[15]=1,t},xs=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Cs=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Ts=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t[4]=s[4]+e[4],t[5]=s[5]+e[5],t[6]=s[6]+e[6],t[7]=s[7]+e[7],t[8]=s[8]+e[8],t[9]=s[9]+e[9],t[10]=s[10]+e[10],t[11]=s[11]+e[11],t[12]=s[12]+e[12],t[13]=s[13]+e[13],t[14]=s[14]+e[14],t[15]=s[15]+e[15],t},Ms=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t[3]=s[3]-e[3],t[4]=s[4]-e[4],t[5]=s[5]-e[5],t[6]=s[6]-e[6],t[7]=s[7]-e[7],t[8]=s[8]-e[8],t[9]=s[9]-e[9],t[10]=s[10]-e[10],t[11]=s[11]-e[11],t[12]=s[12]-e[12],t[13]=s[13]-e[13],t[14]=s[14]-e[14],t[15]=s[15]-e[15],t},Is=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*e,t[5]=s[5]*e,t[6]=s[6]*e,t[7]=s[7]*e,t[8]=s[8]*e,t[9]=s[9]*e,t[10]=s[10]*e,t[11]=s[11]*e,t[12]=s[12]*e,t[13]=s[13]*e,t[14]=s[14]*e,t[15]=s[15]*e,t},Gs=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t[3]=s[3]+e[3]*i,t[4]=s[4]+e[4]*i,t[5]=s[5]+e[5]*i,t[6]=s[6]+e[6]*i,t[7]=s[7]+e[7]*i,t[8]=s[8]+e[8]*i,t[9]=s[9]+e[9]*i,t[10]=s[10]+e[10]*i,t[11]=s[11]+e[11]*i,t[12]=s[12]+e[12]*i,t[13]=s[13]+e[13]*i,t[14]=s[14]+e[14]*i,t[15]=s[15]+e[15]*i,t},_s=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Ps=function(t,s){var e=t[0],i=t[1],r=t[2],n=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],y=t[15],S=s[0],w=s[1],v=s[2],b=s[3],x=s[4],C=s[5],T=s[6],M=s[7],I=s[8],G=s[9],_=s[10],P=s[11],R=s[12],A=s[13],E=s[14],O=s[15];return Math.abs(e-S)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(S))&&Math.abs(i-w)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(r-v)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(n-b)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(h-x)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(x))&&Math.abs(o-C)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(C))&&Math.abs(a-T)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(T))&&Math.abs(l-M)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(u-I)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(c-G)<=EPSILON*Math.max(1,Math.abs(c),Math.abs(G))&&Math.abs(f-_)<=EPSILON*Math.max(1,Math.abs(f),Math.abs(_))&&Math.abs(d-P)<=EPSILON*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(p-R)<=EPSILON*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(m-A)<=EPSILON*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(g-E)<=EPSILON*Math.max(1,Math.abs(g),Math.abs(E))&&Math.abs(y-O)<=EPSILON*Math.max(1,Math.abs(y),Math.abs(O))},Rs=function(){var t=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},As=function(t){var s=new ARRAY_TYPE(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Es=function(t){var s=t[0],e=t[1],i=t[2];return Math.hypot(s,e,i)},Os=function(t,s,e){var i=new ARRAY_TYPE(3);return i[0]=t,i[1]=s,i[2]=e,i},Fs=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Ds=function(t,s,e,i){return t[0]=s,t[1]=e,t[2]=i,t},Ls=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t},ks=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t},Ns=function(t,s,e){return t[0]=s[0]*e[0],t[1]=s[1]*e[1],t[2]=s[2]*e[2],t},Bs=function(t,s,e){return t[0]=s[0]/e[0],t[1]=s[1]/e[1],t[2]=s[2]/e[2],t},$s=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},Us=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},Vs=function(t,s,e){return t[0]=Math.min(s[0],e[0]),t[1]=Math.min(s[1],e[1]),t[2]=Math.min(s[2],e[2]),t},Ws=function(t,s,e){return t[0]=Math.max(s[0],e[0]),t[1]=Math.max(s[1],e[1]),t[2]=Math.max(s[2],e[2]),t},zs=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},js=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t},Hs=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t},qs=function(t,s){var e=s[0]-t[0],i=s[1]-t[1],r=s[2]-t[2];return Math.hypot(e,i,r)},Js=function(t,s){var e=s[0]-t[0],i=s[1]-t[1],r=s[2]-t[2];return e*e+i*i+r*r},Ys=function(t){var s=t[0],e=t[1],i=t[2];return s*s+e*e+i*i},Xs=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},Ks=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},Zs=function(t,s){var e=s[0],i=s[1],r=s[2],n=e*e+i*i+r*r;return n>0&&(n=1/Math.sqrt(n)),t[0]=s[0]*n,t[1]=s[1]*n,t[2]=s[2]*n,t},Qs=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},te=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=e[0],o=e[1],a=e[2];return t[0]=r*a-n*o,t[1]=n*h-i*a,t[2]=i*o-r*h,t},se=function(t,s,e,i){var r=s[0],n=s[1],h=s[2];return t[0]=r+i*(e[0]-r),t[1]=n+i*(e[1]-n),t[2]=h+i*(e[2]-h),t},ee=function(t,s,e,i){var r=Math.acos(Math.min(Math.max(Qs(s,e),-1),1)),n=Math.sin(r),h=Math.sin((1-i)*r)/n,o=Math.sin(i*r)/n;return t[0]=h*s[0]+o*e[0],t[1]=h*s[1]+o*e[1],t[2]=h*s[2]+o*e[2],t},ie=function(t,s,e,i,r,n){var h=n*n,o=h*(2*n-3)+1,a=h*(n-2)+n,l=h*(n-1),u=h*(3-2*n);return t[0]=s[0]*o+e[0]*a+i[0]*l+r[0]*u,t[1]=s[1]*o+e[1]*a+i[1]*l+r[1]*u,t[2]=s[2]*o+e[2]*a+i[2]*l+r[2]*u,t},re=function(t,s,e,i,r,n){var h=1-n,o=h*h,a=n*n,l=o*h,u=3*n*o,c=3*a*h,f=a*n;return t[0]=s[0]*l+e[0]*u+i[0]*c+r[0]*f,t[1]=s[1]*l+e[1]*u+i[1]*c+r[1]*f,t[2]=s[2]*l+e[2]*u+i[2]*c+r[2]*f,t},ne=function(t,s){s=s||1;var e=2*RANDOM()*Math.PI,i=2*RANDOM()-1,r=Math.sqrt(1-i*i)*s;return t[0]=Math.cos(e)*r,t[1]=Math.sin(e)*r,t[2]=i*s,t},he=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=e[3]*i+e[7]*r+e[11]*n+e[15];return h=h||1,t[0]=(e[0]*i+e[4]*r+e[8]*n+e[12])/h,t[1]=(e[1]*i+e[5]*r+e[9]*n+e[13])/h,t[2]=(e[2]*i+e[6]*r+e[10]*n+e[14])/h,t},oe=function(t,s,e){var i=s[0],r=s[1],n=s[2];return t[0]=i*e[0]+r*e[3]+n*e[6],t[1]=i*e[1]+r*e[4]+n*e[7],t[2]=i*e[2]+r*e[5]+n*e[8],t},ae=function(t,s,e){var i=e[0],r=e[1],n=e[2],h=e[3],o=s[0],a=s[1],l=s[2],u=r*l-n*a,c=n*o-i*l,f=i*a-r*o,d=r*f-n*c,p=n*u-i*f,m=i*c-r*u,g=2*h;return u*=g,c*=g,f*=g,d*=2,p*=2,m*=2,t[0]=o+u+d,t[1]=a+c+p,t[2]=l+f+m,t},le=function(t,s,e,i){var r=[],n=[];return r[0]=s[0]-e[0],r[1]=s[1]-e[1],r[2]=s[2]-e[2],n[0]=r[0],n[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),n[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t},ue=function(t,s,e,i){var r=[],n=[];return r[0]=s[0]-e[0],r[1]=s[1]-e[1],r[2]=s[2]-e[2],n[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),n[1]=r[1],n[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t},ce=function(t,s,e,i){var r=[],n=[];return r[0]=s[0]-e[0],r[1]=s[1]-e[1],r[2]=s[2]-e[2],n[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),n[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),n[2]=r[2],t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t},fe=function(t,s){var e=t[0],i=t[1],r=t[2],n=s[0],h=s[1],o=s[2],a=Math.sqrt((e*e+i*i+r*r)*(n*n+h*h+o*o)),l=a&&Qs(t,s)/a;return Math.acos(Math.min(Math.max(l,-1),1))},de=function(t){return t[0]=0,t[1]=0,t[2]=0,t},pe=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},me=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},ge=function(t,s){var e=t[0],i=t[1],r=t[2],n=s[0],h=s[1],o=s[2];return Math.abs(e-n)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(i-h)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(r-o)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(o))},ye=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},Se=function(t){var s=new ARRAY_TYPE(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},we=function(t,s,e,i){var r=new ARRAY_TYPE(4);return r[0]=t,r[1]=s,r[2]=e,r[3]=i,r},ve=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},be=function(t,s,e,i,r){return t[0]=s,t[1]=e,t[2]=i,t[3]=r,t},xe=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t},Ce=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t[3]=s[3]-e[3],t},Te=function(t,s,e){return t[0]=s[0]*e[0],t[1]=s[1]*e[1],t[2]=s[2]*e[2],t[3]=s[3]*e[3],t},Me=function(t,s,e){return t[0]=s[0]/e[0],t[1]=s[1]/e[1],t[2]=s[2]/e[2],t[3]=s[3]/e[3],t},Ie=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Ge=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},_e=function(t,s,e){return t[0]=Math.min(s[0],e[0]),t[1]=Math.min(s[1],e[1]),t[2]=Math.min(s[2],e[2]),t[3]=Math.min(s[3],e[3]),t},Pe=function(t,s,e){return t[0]=Math.max(s[0],e[0]),t[1]=Math.max(s[1],e[1]),t[2]=Math.max(s[2],e[2]),t[3]=Math.max(s[3],e[3]),t},Re=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},Ae=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t},Ee=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t[3]=s[3]+e[3]*i,t},Oe=function(t,s){var e=s[0]-t[0],i=s[1]-t[1],r=s[2]-t[2],n=s[3]-t[3];return Math.hypot(e,i,r,n)},Fe=function(t,s){var e=s[0]-t[0],i=s[1]-t[1],r=s[2]-t[2],n=s[3]-t[3];return e*e+i*i+r*r+n*n},De=function(t){var s=t[0],e=t[1],i=t[2],r=t[3];return Math.hypot(s,e,i,r)},Le=function(t){var s=t[0],e=t[1],i=t[2],r=t[3];return s*s+e*e+i*i+r*r},ke=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},Ne=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},Be=function(t,s){var e=s[0],i=s[1],r=s[2],n=s[3],h=e*e+i*i+r*r+n*n;return h>0&&(h=1/Math.sqrt(h)),t[0]=e*h,t[1]=i*h,t[2]=r*h,t[3]=n*h,t},$e=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},Ue=function(t,s,e,i){var r=e[0]*i[1]-e[1]*i[0],n=e[0]*i[2]-e[2]*i[0],h=e[0]*i[3]-e[3]*i[0],o=e[1]*i[2]-e[2]*i[1],a=e[1]*i[3]-e[3]*i[1],l=e[2]*i[3]-e[3]*i[2],u=s[0],c=s[1],f=s[2],d=s[3];return t[0]=c*l-f*a+d*o,t[1]=-u*l+f*h-d*n,t[2]=u*a-c*h+d*r,t[3]=-u*o+c*n-f*r,t},Ve=function(t,s,e,i){var r=s[0],n=s[1],h=s[2],o=s[3];return t[0]=r+i*(e[0]-r),t[1]=n+i*(e[1]-n),t[2]=h+i*(e[2]-h),t[3]=o+i*(e[3]-o),t},We=function(t,s){var e,i,r,n,h,o;s=s||1;do{h=(e=2*RANDOM()-1)*e+(i=2*RANDOM()-1)*i}while(h>=1);do{o=(r=2*RANDOM()-1)*r+(n=2*RANDOM()-1)*n}while(o>=1);var a=Math.sqrt((1-h)/o);return t[0]=s*e,t[1]=s*i,t[2]=s*r*a,t[3]=s*n*a,t},ze=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3];return t[0]=e[0]*i+e[4]*r+e[8]*n+e[12]*h,t[1]=e[1]*i+e[5]*r+e[9]*n+e[13]*h,t[2]=e[2]*i+e[6]*r+e[10]*n+e[14]*h,t[3]=e[3]*i+e[7]*r+e[11]*n+e[15]*h,t},je=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=e[0],o=e[1],a=e[2],l=e[3],u=l*i+o*n-a*r,c=l*r+a*i-h*n,f=l*n+h*r-o*i,d=-h*i-o*r-a*n;return t[0]=u*l+d*-h+c*-a-f*-o,t[1]=c*l+d*-o+f*-h-u*-a,t[2]=f*l+d*-a+u*-o-c*-h,t[3]=s[3],t},He=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},qe=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Je=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Ye=function(t,s){var e=t[0],i=t[1],r=t[2],n=t[3],h=s[0],o=s[1],a=s[2],l=s[3];return Math.abs(e-h)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(i-o)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-l)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(l))},Xe=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Ke=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},Ze=function(t,s,e){e*=.5;var i=Math.sin(e);return t[0]=i*s[0],t[1]=i*s[1],t[2]=i*s[2],t[3]=Math.cos(e),t},Qe=function(t,s){var e=2*Math.acos(s[3]),i=Math.sin(e/2);return i>EPSILON?(t[0]=s[0]/i,t[1]=s[1]/i,t[2]=s[2]/i):(t[0]=1,t[1]=0,t[2]=0),e},ti=function(t,s){var e=dot$2(t,s);return Math.acos(2*e*e-1)},si=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=e[0],a=e[1],l=e[2],u=e[3];return t[0]=i*u+h*o+r*l-n*a,t[1]=r*u+h*a+n*o-i*l,t[2]=n*u+h*l+i*a-r*o,t[3]=h*u-i*o-r*a-n*l,t},ei=function(t,s,e){e*=.5;var i=s[0],r=s[1],n=s[2],h=s[3],o=Math.sin(e),a=Math.cos(e);return t[0]=i*a+h*o,t[1]=r*a+n*o,t[2]=n*a-r*o,t[3]=h*a-i*o,t},ii=function(t,s,e){e*=.5;var i=s[0],r=s[1],n=s[2],h=s[3],o=Math.sin(e),a=Math.cos(e);return t[0]=i*a-n*o,t[1]=r*a+h*o,t[2]=n*a+i*o,t[3]=h*a-r*o,t},ri=function(t,s,e){e*=.5;var i=s[0],r=s[1],n=s[2],h=s[3],o=Math.sin(e),a=Math.cos(e);return t[0]=i*a+r*o,t[1]=r*a-i*o,t[2]=n*a+h*o,t[3]=h*a-n*o,t},ni=function(t,s){var e=s[0],i=s[1],r=s[2];return t[0]=e,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-e*e-i*i-r*r)),t},hi=function(t,s){var e=s[0],i=s[1],r=s[2],n=s[3],h=Math.sqrt(e*e+i*i+r*r),o=Math.exp(n),a=h>0?o*Math.sin(h)/h:0;return t[0]=e*a,t[1]=i*a,t[2]=r*a,t[3]=o*Math.cos(h),t},oi=function(t,s){var e=s[0],i=s[1],r=s[2],n=s[3],h=Math.sqrt(e*e+i*i+r*r),o=h>0?Math.atan2(h,n)/h:0;return t[0]=e*o,t[1]=i*o,t[2]=r*o,t[3]=.5*Math.log(e*e+i*i+r*r+n*n),t},ai=function(t,s,e){return oi(t,s),scale$2(t,t,e),hi(t,t),t},li=function(t,s,e,i){var r,n,h,o,a,l=s[0],u=s[1],c=s[2],f=s[3],d=e[0],p=e[1],m=e[2],g=e[3];return(n=l*d+u*p+c*m+f*g)<0&&(n=-n,d=-d,p=-p,m=-m,g=-g),1-n>EPSILON?(r=Math.acos(n),h=Math.sin(r),o=Math.sin((1-i)*r)/h,a=Math.sin(i*r)/h):(o=1-i,a=i),t[0]=o*l+a*d,t[1]=o*u+a*p,t[2]=o*c+a*m,t[3]=o*f+a*g,t},ui=function(t){var s=RANDOM(),e=RANDOM(),i=RANDOM(),r=Math.sqrt(1-s),n=Math.sqrt(s);return t[0]=r*Math.sin(2*Math.PI*e),t[1]=r*Math.cos(2*Math.PI*e),t[2]=n*Math.sin(2*Math.PI*i),t[3]=n*Math.cos(2*Math.PI*i),t},ci=function(t,s){var e=s[0],i=s[1],r=s[2],n=s[3],h=e*e+i*i+r*r+n*n,o=h?1/h:0;return t[0]=-e*o,t[1]=-i*o,t[2]=-r*o,t[3]=n*o,t},fi=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},di=function(t,s){var e,i=s[0]+s[4]+s[8];if(i>0)e=Math.sqrt(i+1),t[3]=.5*e,e=.5/e,t[0]=(s[5]-s[7])*e,t[1]=(s[6]-s[2])*e,t[2]=(s[1]-s[3])*e;else{var r=0;s[4]>s[0]&&(r=1),s[8]>s[3*r+r]&&(r=2);var n=(r+1)%3,h=(r+2)%3;e=Math.sqrt(s[3*r+r]-s[3*n+n]-s[3*h+h]+1),t[r]=.5*e,e=.5/e,t[3]=(s[3*n+h]-s[3*h+n])*e,t[n]=(s[3*n+r]+s[3*r+n])*e,t[h]=(s[3*h+r]+s[3*r+h])*e}return t},pi=function(t,s,e,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ANGLE_ORDER,n=Math.PI/360;s*=n,i*=n,e*=n;var h=Math.sin(s),o=Math.cos(s),a=Math.sin(e),l=Math.cos(e),u=Math.sin(i),c=Math.cos(i);switch(r){case"xyz":t[0]=h*l*c+o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c-h*a*u;break;case"xzy":t[0]=h*l*c-o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c+h*a*u;break;case"yxz":t[0]=h*l*c+o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c+h*a*u;break;case"yzx":t[0]=h*l*c+o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c-h*a*u;break;case"zxy":t[0]=h*l*c-o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c-h*a*u;break;case"zyx":t[0]=h*l*c-o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c+h*a*u;break;default:throw new Error("Unknown angle order "+r)}return t},mi=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},gi=function(t,s){return Math.abs($e(t,s))>=1-EPSILON},yi=function(){var t=new ARRAY_TYPE(8);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},Si=function(t){var s=new ARRAY_TYPE(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},wi=function(t,s,e,i,r,n,h,o){var a=new ARRAY_TYPE(8);return a[0]=t,a[1]=s,a[2]=e,a[3]=i,a[4]=r,a[5]=n,a[6]=h,a[7]=o,a},vi=function(t,s,e,i,r,n,h){var o=new ARRAY_TYPE(8);o[0]=t,o[1]=s,o[2]=e,o[3]=i;var a=.5*r,l=.5*n,u=.5*h;return o[4]=a*i+l*e-u*s,o[5]=l*i+u*t-a*e,o[6]=u*i+a*s-l*t,o[7]=-a*t-l*s-u*e,o},bi=function(t,s,e){var i=.5*e[0],r=.5*e[1],n=.5*e[2],h=s[0],o=s[1],a=s[2],l=s[3];return t[0]=h,t[1]=o,t[2]=a,t[3]=l,t[4]=i*l+r*a-n*o,t[5]=r*l+n*h-i*a,t[6]=n*l+i*o-r*h,t[7]=-i*h-r*o-n*a,t},xi=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},Ci=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Ti=function(t,s){var e=Xe();ls(e,s);var i=new ARRAY_TYPE(3);return os(i,s),bi(t,e,i),t},Mi=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},Ii=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Gi=function(t,s,e,i,r,n,h,o,a){return t[0]=s,t[1]=e,t[2]=i,t[3]=r,t[4]=n,t[5]=h,t[6]=o,t[7]=a,t},_i=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},Pi=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},Ri=function(t,s){var e=s[4],i=s[5],r=s[6],n=s[7],h=-s[0],o=-s[1],a=-s[2],l=s[3];return t[0]=2*(e*l+n*h+i*a-r*o),t[1]=2*(i*l+n*o+r*h-e*a),t[2]=2*(r*l+n*a+e*o-i*h),t},Ai=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=.5*e[0],a=.5*e[1],l=.5*e[2],u=s[4],c=s[5],f=s[6],d=s[7];return t[0]=i,t[1]=r,t[2]=n,t[3]=h,t[4]=h*o+r*l-n*a+u,t[5]=h*a+n*o-i*l+c,t[6]=h*l+i*a-r*o+f,t[7]=-i*o-r*a-n*l+d,t},Ei=function(t,s,e){var i=-s[0],r=-s[1],n=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*i+a*n-l*r,f=a*h+u*r+l*i-o*n,d=l*h+u*n+o*r-a*i,p=u*h-o*i-a*r-l*n;return ei(t,s,e),i=t[0],r=t[1],n=t[2],h=t[3],t[4]=c*h+p*i+f*n-d*r,t[5]=f*h+p*r+d*i-c*n,t[6]=d*h+p*n+c*r-f*i,t[7]=p*h-c*i-f*r-d*n,t},Oi=function(t,s,e){var i=-s[0],r=-s[1],n=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*i+a*n-l*r,f=a*h+u*r+l*i-o*n,d=l*h+u*n+o*r-a*i,p=u*h-o*i-a*r-l*n;return ii(t,s,e),i=t[0],r=t[1],n=t[2],h=t[3],t[4]=c*h+p*i+f*n-d*r,t[5]=f*h+p*r+d*i-c*n,t[6]=d*h+p*n+c*r-f*i,t[7]=p*h-c*i-f*r-d*n,t},Fi=function(t,s,e){var i=-s[0],r=-s[1],n=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*i+a*n-l*r,f=a*h+u*r+l*i-o*n,d=l*h+u*n+o*r-a*i,p=u*h-o*i-a*r-l*n;return ri(t,s,e),i=t[0],r=t[1],n=t[2],h=t[3],t[4]=c*h+p*i+f*n-d*r,t[5]=f*h+p*r+d*i-c*n,t[6]=d*h+p*n+c*r-f*i,t[7]=p*h-c*i-f*r-d*n,t},Di=function(t,s,e){var i=e[0],r=e[1],n=e[2],h=e[3],o=s[0],a=s[1],l=s[2],u=s[3];return t[0]=o*h+u*i+a*n-l*r,t[1]=a*h+u*r+l*i-o*n,t[2]=l*h+u*n+o*r-a*i,t[3]=u*h-o*i-a*r-l*n,o=s[4],a=s[5],l=s[6],u=s[7],t[4]=o*h+u*i+a*n-l*r,t[5]=a*h+u*r+l*i-o*n,t[6]=l*h+u*n+o*r-a*i,t[7]=u*h-o*i-a*r-l*n,t},Li=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=e[0],a=e[1],l=e[2],u=e[3];return t[0]=i*u+h*o+r*l-n*a,t[1]=r*u+h*a+n*o-i*l,t[2]=n*u+h*l+i*a-r*o,t[3]=h*u-i*o-r*a-n*l,o=e[4],a=e[5],l=e[6],u=e[7],t[4]=i*u+h*o+r*l-n*a,t[5]=r*u+h*a+n*o-i*l,t[6]=n*u+h*l+i*a-r*o,t[7]=h*u-i*o-r*a-n*l,t},ki=function(t,s,e,i){if(Math.abs(i)<EPSILON)return Mi(t,s);var r=Math.hypot(e[0],e[1],e[2]);i*=.5;var n=Math.sin(i),h=n*e[0]/r,o=n*e[1]/r,a=n*e[2]/r,l=Math.cos(i),u=s[0],c=s[1],f=s[2],d=s[3];t[0]=u*l+d*h+c*a-f*o,t[1]=c*l+d*o+f*h-u*a,t[2]=f*l+d*a+u*o-c*h,t[3]=d*l-u*h-c*o-f*a;var p=s[4],m=s[5],g=s[6],y=s[7];return t[4]=p*l+y*h+m*a-g*o,t[5]=m*l+y*o+g*h-p*a,t[6]=g*l+y*a+p*o-m*h,t[7]=y*l-p*h-m*o-g*a,t},Ni=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t[4]=s[4]+e[4],t[5]=s[5]+e[5],t[6]=s[6]+e[6],t[7]=s[7]+e[7],t},Bi=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=e[4],a=e[5],l=e[6],u=e[7],c=s[4],f=s[5],d=s[6],p=s[7],m=e[0],g=e[1],y=e[2],S=e[3];return t[0]=i*S+h*m+r*y-n*g,t[1]=r*S+h*g+n*m-i*y,t[2]=n*S+h*y+i*g-r*m,t[3]=h*S-i*m-r*g-n*y,t[4]=i*u+h*o+r*l-n*a+c*S+p*m+f*y-d*g,t[5]=r*u+h*a+n*o-i*l+f*S+p*g+d*m-c*y,t[6]=n*u+h*l+i*a-r*o+d*S+p*y+c*g-f*m,t[7]=h*u-i*o-r*a-n*l+p*S-c*m-f*g-d*y,t},$i=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*e,t[5]=s[5]*e,t[6]=s[6]*e,t[7]=s[7]*e,t},Ui=function(t,s,e,i){var r=1-i;return dot$1(s,e)<0&&(i=-i),t[0]=s[0]*r+e[0]*i,t[1]=s[1]*r+e[1]*i,t[2]=s[2]*r+e[2]*i,t[3]=s[3]*r+e[3]*i,t[4]=s[4]*r+e[4]*i,t[5]=s[5]*r+e[5]*i,t[6]=s[6]*r+e[6]*i,t[7]=s[7]*r+e[7]*i,t},Vi=function(t,s){var e=squaredLength$1(s);return t[0]=-s[0]/e,t[1]=-s[1]/e,t[2]=-s[2]/e,t[3]=s[3]/e,t[4]=-s[4]/e,t[5]=-s[5]/e,t[6]=-s[6]/e,t[7]=s[7]/e,t},Wi=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},zi=function(t,s){var e=squaredLength$1(s);if(e>0){e=Math.sqrt(e);var i=s[0]/e,r=s[1]/e,n=s[2]/e,h=s[3]/e,o=s[4],a=s[5],l=s[6],u=s[7],c=i*o+r*a+n*l+h*u;t[0]=i,t[1]=r,t[2]=n,t[3]=h,t[4]=(o-i*c)/e,t[5]=(a-r*c)/e,t[6]=(l-n*c)/e,t[7]=(u-h*c)/e}return t},ji=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},Hi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},qi=function(t,s){var e=t[0],i=t[1],r=t[2],n=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7];return Math.abs(e-u)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(i-c)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(r-f)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-d)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(h-p)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(o-m)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(y))},Ji=function(){var t=new ARRAY_TYPE(2);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t},Yi=function(t){var s=new ARRAY_TYPE(2);return s[0]=t[0],s[1]=t[1],s},Xi=function(t,s){var e=new ARRAY_TYPE(2);return e[0]=t,e[1]=s,e},Ki=function(t,s){return t[0]=s[0],t[1]=s[1],t},Zi=function(t,s,e){return t[0]=s,t[1]=e,t},Qi=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t},tr=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t},sr=function(t,s,e){return t[0]=s[0]*e[0],t[1]=s[1]*e[1],t},er=function(t,s,e){return t[0]=s[0]/e[0],t[1]=s[1]/e[1],t},ir=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},rr=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},nr=function(t,s,e){return t[0]=Math.min(s[0],e[0]),t[1]=Math.min(s[1],e[1]),t},hr=function(t,s,e){return t[0]=Math.max(s[0],e[0]),t[1]=Math.max(s[1],e[1]),t},ar=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},lr=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t},ur=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t},cr=function(t,s){var e=s[0]-t[0],i=s[1]-t[1];return Math.hypot(e,i)},fr=function(t,s){var e=s[0]-t[0],i=s[1]-t[1];return e*e+i*i},dr=function(t){var s=t[0],e=t[1];return Math.hypot(s,e)},pr=function(t){var s=t[0],e=t[1];return s*s+e*e},mr=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},gr=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},yr=function(t,s){var e=s[0],i=s[1],r=e*e+i*i;return r>0&&(r=1/Math.sqrt(r)),t[0]=s[0]*r,t[1]=s[1]*r,t},Sr=function(t,s){return t[0]*s[0]+t[1]*s[1]},wr=function(t,s,e){var i=s[0]*e[1]-s[1]*e[0];return t[0]=t[1]=0,t[2]=i,t},vr=function(t,s,e,i){var r=s[0],n=s[1];return t[0]=r+i*(e[0]-r),t[1]=n+i*(e[1]-n),t},br=function(t,s){s=s||1;var e=2*RANDOM()*Math.PI;return t[0]=Math.cos(e)*s,t[1]=Math.sin(e)*s,t},xr=function(t,s,e){var i=s[0],r=s[1];return t[0]=e[0]*i+e[2]*r,t[1]=e[1]*i+e[3]*r,t},Cr=function(t,s,e){var i=s[0],r=s[1];return t[0]=e[0]*i+e[2]*r+e[4],t[1]=e[1]*i+e[3]*r+e[5],t},Tr=function(t,s,e){var i=s[0],r=s[1];return t[0]=e[0]*i+e[3]*r+e[6],t[1]=e[1]*i+e[4]*r+e[7],t},Mr=function(t,s,e){var i=s[0],r=s[1];return t[0]=e[0]*i+e[4]*r+e[12],t[1]=e[1]*i+e[5]*r+e[13],t},Ir=function(t,s,e,i){var r=s[0]-e[0],n=s[1]-e[1],h=Math.sin(i),o=Math.cos(i);return t[0]=r*o-n*h+e[0],t[1]=r*h+n*o+e[1],t},Gr=function(t,s){var e=t[0],i=t[1],r=s[0],n=s[1],h=Math.sqrt((e*e+i*i)*(r*r+n*n)),o=h&&(e*r+i*n)/h;return Math.acos(Math.min(Math.max(o,-1),1))},_r=function(t){return t[0]=0,t[1]=0,t},Pr=function(t){return"vec2("+t[0]+", "+t[1]+")"},Rr=function(t,s){return t[0]===s[0]&&t[1]===s[1]},Ar=function(t,s){var e=t[0],i=t[1],r=s[0],n=s[1];return Math.abs(e-r)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(i-n)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(n))};setMatrixArrayType=e,toRadian=n,equals$9=h,create$8=u,clone$8=p,copy$8=m,identity$5=g,fromValues$8=y,set$8=S,transpose$2=w,invert$5=v,adjoint$2=b,determinant$3=x,multiply$8=C,rotate$4=T,scale$8=M,fromRotation$4=I,fromScaling$3=G,str$8=_,frob$3=P,LDU=R,add$8=A,subtract$6=E,exactEquals$8=O,equals$8=F,multiplyScalar$3=D,multiplyScalarAndAdd$3=L,create$7=k,clone$7=N,copy$7=B,identity$4=$,fromValues$7=U,set$7=V,invert$4=W,determinant$2=z,multiply$7=j,rotate$3=H,scale$7=q,translate$3=J,fromRotation$3=Y,fromScaling$2=X,fromTranslation$3=K,str$7=Z,frob$2=Q,add$7=tt,subtract$5=st,multiplyScalar$2=et,multiplyScalarAndAdd$2=it,exactEquals$7=rt,equals$7=nt,create$6=ht,fromMat4$1=ot,clone$6=at,copy$6=lt,fromValues$6=ut,set$6=ct,identity$3=ft,transpose$1=dt,invert$3=pt,adjoint$1=mt,determinant$1=gt,multiply$6=yt,translate$2=St,rotate$2=wt,scale$6=vt,fromTranslation$2=bt,fromRotation$2=xt,fromScaling$1=Ct,fromMat2d=Tt,fromQuat$1=Mt,normalFromMat4=It,projection=Gt,str$6=_t,frob$1=Pt,add$6=Rt,subtract$4=At,multiplyScalar$1=Et,multiplyScalarAndAdd$1=Ot,exactEquals$6=Ft,equals$6=Dt,create$5=Lt,clone$5=kt,copy$5=Nt,fromValues$5=Bt,set$5=$t,identity$2=Ut,transpose=Vt,invert$2=Wt,adjoint=zt,determinant=jt,multiply$5=Ht,translate$1=qt,scale$5=Jt,rotate$1=Yt,rotateX$3=Xt,rotateY$3=Kt,rotateZ$3=Zt,fromTranslation$1=Qt,fromScaling=ts,fromRotation$1=ss,fromXRotation=es,fromYRotation=is,fromZRotation=rs,fromRotationTranslation$1=ns,fromQuat2=hs,getTranslation$1=os,getScaling=as,getRotation=ls,decompose=us,fromRotationTranslationScale=cs,fromRotationTranslationScaleOrigin=fs,fromQuat=ds,frustum=ps,perspectiveNO=ms,perspectiveZO=gs,perspectiveFromFieldOfView=ys,orthoNO=Ss,orthoZO=ws,lookAt=vs,targetTo=bs,str$5=xs,frob=Cs,add$5=Ts,subtract$3=Ms,multiplyScalar=Is,multiplyScalarAndAdd=Gs,exactEquals$5=_s,equals$5=Ps,create$4=Rs,clone$4=As,length$4=Es,fromValues$4=Os,copy$4=Fs,set$4=Ds,add$4=Ls,subtract$2=ks,multiply$4=Ns,divide$2=Bs,ceil$2=$s,floor$2=Us,min$2=Vs,max$2=Ws,round$2=zs,scale$4=js,scaleAndAdd$2=Hs,distance$2=qs,squaredDistance$2=Js,squaredLength$4=Ys,negate$2=Xs,inverse$2=Ks,normalize$4=Zs,dot$4=Qs,cross$2=te,lerp$4=se,slerp$1=ee,hermite=ie,bezier=re,random$3=ne,transformMat4$2=he,transformMat3$1=oe,transformQuat$1=ae,rotateX$2=le,rotateY$2=ue,rotateZ$2=ce,angle$1=fe,zero$2=de,str$4=pe,exactEquals$4=me,equals$4=ge,create$3=ye,clone$3=Se,fromValues$3=we,copy$3=ve,set$3=be,add$3=xe,subtract$1=Ce,multiply$3=Te,divide$1=Me,ceil$1=Ie,floor$1=Ge,min$1=_e,max$1=Pe,round$1=Re,scale$3=Ae,scaleAndAdd$1=Ee,distance$1=Oe,squaredDistance$1=Fe,length$3=De,squaredLength$3=Le,negate$1=ke,inverse$1=Ne,normalize$3=Be,dot$3=$e,cross$1=Ue,lerp$3=Ve,random$2=We,transformMat4$1=ze,transformQuat=je,zero$1=He,str$3=qe,exactEquals$3=Je,equals$3=Ye,create$2=Xe,identity$1=Ke,setAxisAngle=Ze,getAxisAngle=Qe,getAngle=ti,multiply$2=si,rotateX$1=ei,rotateY$1=ii,rotateZ$1=ri,calculateW=ni,exp=hi,ln=oi,pow=ai,slerp=li,random$1=ui,invert$1=ci,conjugate$1=fi,fromMat3=di,fromEuler=pi,str$2=mi,equals$2=gi,create$1=yi,clone$1=Si,fromValues$1=wi,fromRotationTranslationValues=vi,fromRotationTranslation=bi,fromTranslation=xi,fromRotation=Ci,fromMat4=Ti,copy$1=Mi,identity=Ii,set$1=Gi,getDual=_i,setDual=Pi,getTranslation=Ri,translate=Ai,rotateX=Ei,rotateY=Oi,rotateZ=Fi,rotateByQuatAppend=Di,rotateByQuatPrepend=Li,rotateAroundAxis=ki,add$1=Ni,multiply$1=Bi,scale$1=$i,lerp$1=Ui,invert=Vi,conjugate=Wi,normalize$1=zi,str$1=ji,exactEquals$1=Hi,equals$1=qi,create=Ji,clone=Yi,fromValues=Xi,copy=Ki,set=Zi,add=Qi,subtract=tr,multiply=sr,divide=er,ceil=ir,floor=rr,min=nr,max=hr,round=ar,scale=lr,scaleAndAdd=ur,distance=cr,squaredDistance=fr,length=dr,squaredLength=pr,negate=mr,inverse=gr,normalize=yr,dot=Sr,cross=wr,lerp=vr,random=br,transformMat2=xr,transformMat2d=Cr,transformMat3=Tr,transformMat4=Mr,rotate=Ir,angle=Gr,zero=_r,str=Pr,exactEquals=Rr,equals=Ar,EPSILON=1e-6,ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,RANDOM=Math.random,ANGLE_ORDER="zyx",degree=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),common={__proto__:null,EPSILON:EPSILON,get h(){return ARRAY_TYPE},o:RANDOM,l:ANGLE_ORDER,u:e,m:n,equals:h},mul$8=C,sub$6=E,mat2=Object.freeze({__proto__:null,create:u,clone:p,S:m,identity:g,v:y,set:S,C:w,T:v,M:b,I:x,multiply:C,rotate:T,scale:M,G:I,_:G,P:_,R:P,A:R,add:A,O:E,F:O,equals:F,D:D,L:L,mul:mul$8,sub:sub$6}),mul$7=j,sub$5=st,mat2d=Object.freeze({__proto__:null,create:k,clone:N,S:B,identity:$,v:U,set:V,T:W,I:z,multiply:j,rotate:H,scale:q,translate:J,G:Y,_:X,N:K,P:Z,R:Q,add:tt,O:st,D:et,L:it,F:rt,equals:nt,mul:mul$7,sub:sub$5}),mul$6=yt,sub$4=At,mat3=Object.freeze({__proto__:null,create:ht,B:ot,clone:at,S:lt,v:ut,set:ct,identity:ft,C:dt,T:pt,M:mt,I:gt,multiply:yt,translate:St,rotate:wt,scale:vt,N:bt,G:xt,_:Ct,$:Tt,U:Mt,V:It,W:Gt,P:_t,R:Pt,add:Rt,O:At,D:Et,L:Ot,F:Ft,equals:Dt,mul:mul$6,sub:sub$4}),perspective=ms,ortho=Ss,mul$5=Ht,sub$3=Ms,mat4=Object.freeze({__proto__:null,create:Lt,clone:kt,S:Nt,v:Bt,set:$t,identity:Ut,C:Vt,T:Wt,M:zt,I:jt,multiply:Ht,translate:qt,scale:Jt,rotate:Yt,j:Xt,H:Kt,J:Zt,N:Qt,_:ts,G:ss,Y:es,X:is,K:rs,Z:ns,tt:hs,st:os,et:as,it:ls,rt:us,nt:cs,ht:fs,U:ds,ot:ps,lt:ms,perspective:perspective,ut:gs,ct:ys,ft:Ss,dt:ortho,gt:ws,yt:vs,St:bs,P:xs,R:Cs,add:Ts,O:Ms,D:Is,L:Gs,F:_s,equals:Ps,mul:mul$5,sub:sub$3}),sub$2=ks,mul$4=Ns,div$2=Bs,dist$2=qs,sqrDist$2=Js,len$4=Es,sqrLen$4=Ys,t=Rs(),forEach$2=function(s,e,i,r,n,h){var o,a;for(e||(e=3),i||(i=0),a=r?Math.min(r*e+i,s.length):s.length,o=i;o<a;o+=e)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],n(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2];return s},vec3=Object.freeze({__proto__:null,create:Rs,clone:As,length:Es,v:Os,S:Fs,set:Ds,add:Ls,O:ks,multiply:Ns,wt:Bs,ceil:$s,floor:Us,min:Vs,max:Ws,round:zs,scale:js,vt:Hs,bt:qs,xt:Js,Ct:Ys,Tt:Xs,inverse:Ks,normalize:Zs,Mt:Qs,It:te,Gt:se,_t:ee,Pt:ie,Rt:re,random:ne,At:he,Et:oe,Ot:ae,j:le,H:ue,J:ce,angle:fe,Ft:de,P:pe,F:me,equals:ge,sub:sub$2,mul:mul$4,div:div$2,Dt:dist$2,Lt:sqrDist$2,kt:len$4,Nt:sqrLen$4,forEach:forEach$2}),sub$1=Ce,mul$3=Te,div$1=Me,dist$1=Oe,sqrDist$1=Fe,len$3=De,sqrLen$3=Le,forEach$1=function(){var t=ye();return function(s,e,i,r,n,h){var o,a;for(e||(e=4),i||(i=0),a=r?Math.min(r*e+i,s.length):s.length,o=i;o<a;o+=e)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],t[3]=s[o+3],n(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2],s[o+3]=t[3];return s}}(),vec4=Object.freeze({__proto__:null,create:ye,clone:Se,v:we,S:ve,set:be,add:xe,O:Ce,multiply:Te,wt:Me,ceil:Ie,floor:Ge,min:_e,max:Pe,round:Re,scale:Ae,vt:Ee,bt:Oe,xt:Fe,length:De,Ct:Le,Tt:ke,inverse:Ne,normalize:Be,Mt:$e,It:Ue,Gt:Ve,random:We,At:ze,Ot:je,Ft:He,P:qe,F:Je,equals:Ye,sub:sub$1,mul:mul$3,div:div$1,Dt:dist$1,Lt:sqrDist$1,kt:len$3,Nt:sqrLen$3,forEach:forEach$1}),clone$2=Se,fromValues$2=we,copy$2=ve,set$2=be,add$2=xe,mul$2=si,scale$2=Ae,dot$2=$e,lerp$2=Ve,length$2=De,len$2=length$2,squaredLength$2=Le,sqrLen$2=squaredLength$2,normalize$2=Be,exactEquals$2=Je,rotationTo=function(){var t=Rs(),s=Os(1,0,0),e=Os(0,1,0);return function(i,r,n){var h=Qs(r,n);return h<-.999999?(te(t,s,r),len$4(t)<1e-6&&te(t,e,r),Zs(t,t),Ze(i,t,Math.PI),i):h>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(te(t,r,n),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+h,normalize$2(i,i))}}(),sqlerp=function(){var t=Xe(),s=Xe();return function(e,i,r,n,h,o){return li(t,i,h,o),li(s,r,n,o),li(e,t,s,2*o*(1-o)),e}}(),setAxes=function(){var t=ht();return function(s,e,i,r){return t[0]=i[0],t[3]=i[1],t[6]=i[2],t[1]=r[0],t[4]=r[1],t[7]=r[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],normalize$2(s,di(s,t))}}(),quat=Object.freeze({__proto__:null,create:Xe,identity:Ke,Bt:Ze,$t:Qe,Ut:ti,multiply:si,j:ei,H:ii,J:ri,Vt:ni,exp:hi,Wt:oi,pow:ai,_t:li,random:ui,T:ci,zt:fi,jt:di,Ht:pi,P:mi,clone:clone$2,v:fromValues$2,S:copy$2,set:set$2,add:add$2,mul:mul$2,scale:scale$2,Mt:dot$2,Gt:lerp$2,length:length$2,kt:len$2,Ct:squaredLength$2,Nt:sqrLen$2,normalize:normalize$2,F:exactEquals$2,equals:gi,qt:rotationTo,Jt:sqlerp,Yt:setAxes}),getReal=copy$2,setReal=copy$2,mul$1=Bi,dot$1=dot$2,length$1=length$2,len$1=length$1,squaredLength$1=squaredLength$2,sqrLen$1=squaredLength$1,quat2=Object.freeze({__proto__:null,create:yi,clone:Si,v:wi,Xt:vi,Z:bi,N:xi,G:Ci,B:Ti,S:Mi,identity:Ii,set:Gi,Kt:getReal,Zt:_i,Qt:setReal,ts:Pi,st:Ri,translate:Ai,j:Ei,H:Oi,J:Fi,ss:Di,es:Li,rs:ki,add:Ni,multiply:Bi,mul:mul$1,scale:$i,Mt:dot$1,Gt:Ui,T:Vi,zt:Wi,length:length$1,kt:len$1,Ct:squaredLength$1,Nt:sqrLen$1,normalize:zi,P:ji,F:Hi,equals:qi}),len=dr,sub=tr,mul=sr,div=er,dist=cr,sqrDist=fr,sqrLen=pr,forEach=function(){var t=Ji();return function(s,e,i,r,n,h){var o,a;for(e||(e=2),i||(i=0),a=r?Math.min(r*e+i,s.length):s.length,o=i;o<a;o+=e)t[0]=s[o],t[1]=s[o+1],n(t,t,h),s[o]=t[0],s[o+1]=t[1];return s}}(),vec2=Object.freeze({__proto__:null,create:Ji,clone:Yi,v:Xi,S:Ki,set:Zi,add:Qi,O:tr,multiply:sr,wt:er,ceil:ir,floor:rr,min:nr,max:hr,round:ar,scale:lr,vt:ur,bt:cr,xt:fr,length:dr,Ct:pr,Tt:mr,inverse:gr,normalize:yr,Mt:Sr,It:wr,Gt:vr,random:br,ns:xr,hs:Cr,Et:Tr,At:Mr,rotate:Ir,angle:Gr,Ft:_r,P:Pr,F:Rr,equals:Ar,kt:len,sub:sub,mul:mul,div:div,Dt:dist,Lt:sqrDist,Nt:sqrLen,forEach:forEach}),globalThis.ls=common,globalThis.ls.us=mat2,globalThis.ls.cs=mat2d,globalThis.ls.fs=mat3,globalThis.ls.ds=mat4,globalThis.ls.ps=quat,globalThis.ls.gs=quat2,globalThis.ls.ys=vec2,globalThis.ls.Ss=vec3,globalThis.ls.ws=vec4}var t,EPSILON,ARRAY_TYPE,RANDOM,ANGLE_ORDER,degree,common,mul$8,sub$6,mat2,mul$7,sub$5,mat2d,mul$6,sub$4,mat3,perspective,ortho,mul$5,sub$3,mat4,sub$2,mul$4,div$2,dist$2,sqrDist$2,len$4,sqrLen$4,forEach$2,vec3,sub$1,mul$3,div$1,dist$1,sqrDist$1,len$3,sqrLen$3,forEach$1,vec4,clone$2,fromValues$2,copy$2,set$2,add$2,mul$2,scale$2,dot$2,lerp$2,length$2,len$2,squaredLength$2,sqrLen$2,normalize$2,exactEquals$2,rotationTo,sqlerp,setAxes,quat,getReal,setReal,mul$1,dot$1,length$1,len$1,squaredLength$1,sqrLen$1,quat2,len,sub,mul,div,dist,sqrDist,sqrLen,forEach,vec2,setMatrixArrayType,toRadian,equals$9,create$8,clone$8,copy$8,identity$5,fromValues$8,set$8,transpose$2,invert$5,adjoint$2,determinant$3,multiply$8,rotate$4,scale$8,fromRotation$4,fromScaling$3,str$8,frob$3,LDU,add$8,subtract$6,exactEquals$8,equals$8,multiplyScalar$3,multiplyScalarAndAdd$3,create$7,clone$7,copy$7,identity$4,fromValues$7,set$7,invert$4,determinant$2,multiply$7,rotate$3,scale$7,translate$3,fromRotation$3,fromScaling$2,fromTranslation$3,str$7,frob$2,add$7,subtract$5,multiplyScalar$2,multiplyScalarAndAdd$2,exactEquals$7,equals$7,create$6,fromMat4$1,clone$6,copy$6,fromValues$6,set$6,identity$3,transpose$1,invert$3,adjoint$1,determinant$1,multiply$6,translate$2,rotate$2,scale$6,fromTranslation$2,fromRotation$2,fromScaling$1,fromMat2d,fromQuat$1,normalFromMat4,projection,str$6,frob$1,add$6,subtract$4,multiplyScalar$1,multiplyScalarAndAdd$1,exactEquals$6,equals$6,create$5,clone$5,copy$5,fromValues$5,set$5,identity$2,transpose,invert$2,adjoint,determinant,multiply$5,translate$1,scale$5,rotate$1,rotateX$3,rotateY$3,rotateZ$3,fromTranslation$1,fromScaling,fromRotation$1,fromXRotation,fromYRotation,fromZRotation,fromRotationTranslation$1,fromQuat2,getTranslation$1,getScaling,getRotation,decompose,fromRotationTranslationScale,fromRotationTranslationScaleOrigin,fromQuat,frustum,perspectiveNO,perspectiveZO,perspectiveFromFieldOfView,orthoNO,orthoZO,lookAt,targetTo,str$5,frob,add$5,subtract$3,multiplyScalar,multiplyScalarAndAdd,exactEquals$5,equals$5,create$4,clone$4,length$4,fromValues$4,copy$4,set$4,add$4,subtract$2,multiply$4,divide$2,ceil$2,floor$2,min$2,max$2,round$2,scale$4,scaleAndAdd$2,distance$2,squaredDistance$2,squaredLength$4,negate$2,inverse$2,normalize$4,dot$4,cross$2,lerp$4,slerp$1,hermite,bezier,random$3,transformMat4$2,transformMat3$1,transformQuat$1,rotateX$2,rotateY$2,rotateZ$2,angle$1,zero$2,str$4,exactEquals$4,equals$4,create$3,clone$3,fromValues$3,copy$3,set$3,add$3,subtract$1,multiply$3,divide$1,ceil$1,floor$1,min$1,max$1,round$1,scale$3,scaleAndAdd$1,distance$1,squaredDistance$1,length$3,squaredLength$3,negate$1,inverse$1,normalize$3,dot$3,cross$1,lerp$3,random$2,transformMat4$1,transformQuat,zero$1,str$3,exactEquals$3,equals$3,create$2,identity$1,setAxisAngle,getAxisAngle,getAngle,multiply$2,rotateX$1,rotateY$1,rotateZ$1,calculateW,exp,ln,pow,slerp,random$1,invert$1,conjugate$1,fromMat3,fromEuler,str$2,equals$2,create$1,clone$1,fromValues$1,fromRotationTranslationValues,fromRotationTranslation,fromTranslation,fromRotation,fromMat4,copy$1,identity,set$1,getDual,setDual,getTranslation,translate,rotateX,rotateY,rotateZ,rotateByQuatAppend,rotateByQuatPrepend,rotateAroundAxis,add$1,multiply$1,scale$1,lerp$1,invert,conjugate,normalize$1,str$1,exactEquals$1,equals$1,create,clone,fromValues,copy,set,add,subtract,multiply,divide,ceil,floor,min,max,round,scale,scaleAndAdd,distance,squaredDistance,length,squaredLength,negate,inverse,normalize,dot,cross,lerp,random,transformMat2,transformMat2d,transformMat3,transformMat4,rotate,angle,zero,str,exactEquals,equals,tmpPoint1,tmpPoint2,tmpLine1,tmpLine2,lineInt,lineSegmentsIntersect,triangleArea,isLeft,isLeftOn,isRight,isRightOn,collinear,sqdist,polygonAt,polygonClear,polygonAppend,polygonMakeCCW,polygonReverse,polygonIsReflex,polygonCanSee,polygonCanSee2,polygonCopy,polygonGetCutEdges,polygonDecomp,polygonSlice,polygonIsSimple,getIntersectionPoint,polygonQuickDecomp,polygonRemoveCollinearPoints,polygonRemoveDuplicatePoints,scalar_eq,points_eq,ReadBrandList,RunTest,GetWindowsNTVersionName,s,a,c,i,l,f,d,r,a,o,assertFail,isValidTypeChange,logDefendedObjectWarning,CheckDefendedObjectsUsedCorrectly,getObjectPropertySet,VerifyObjectPropertiesConsistent,isNegativeZero,padTwoDigits,hueToRGB,RequireStringOrNumber,SetNewCallback,DoAsyncifiedWork,DoNextAsyncifiedJob,ClearTimeCache,CheckActiveIdleTimeouts,lookupHtmlEntity,bbToHtmlReplacerFunc,IsWordBreakWhiteSpace,IsOpeningCJKPunctiationChar,IsContinuingCJKPunctuationChar,WordBreakTrimEnd,IsNewline,PlaneFromPoints,IsInFrontOfPlane,IsPointInFrontOfPlane,interpolateQuad,GetFormatSpecifiers,fillOrStrokeRect,ptToPx,getOffsetParam,CheckPendingPolls,UpdateLayoutEndValues,makeNullFilledArray,GetFragmentInputStructDeclaration,HashPipelineState,SortZOrderList,GetDispatcher,MakeIWorldInstanceClass,GetDispatcher,GetTimelineState,GetTimelineState,GetTweenState,IsStaticTextureDataType,getActual,GetTypeFromFileExtension,AddScript,SortByInstLastCachedZIndex,SortByInstLastCachedZIndex,SortByInstZElevation,vec3EqualsXYZ,MaybePrepareLayerDraw,SortSolArray,IsSolArrayIdentical,NoActions,WrapIndex,GetExpressionFunc,EvalParams,EvalParams,GetInst,GetWorldInfo,GetInst_SDKv2,GetWorldInfo_SDKv2,GetObjectClass,GetLayer,CollMemory_Add,CollMemory_Remove,CollMemory_RemoveInstance,CollMemory_Get,DoOverlapCondition,FinishCollisionConditionPicking,FinishCollisionCondition,PickByUID_Normal,PickByUID_Inverted,GetNextParamMap,ValidateInternalAPIToken,ForEachOrdered_SortInstances,SortZOrderList,SortInstancesByValue,CloneDrawable,ClonePolyArray,SortByInstanceZIndex,arrToColor,arrToColor2,ValidateLineCap,ValidatePoly,RgbToColor,RgbToColor2,GetParticleEngine,randomOffset,WrapModeToStr,ResizeArray,DoForEachTrigger,CompareValues,IsExpressionType,GetTouchSdkInstance,GetMouseSdkInstance,GetKeyboardSdkInstance,StringFromCharCode,getIndexForEase,ValidateTags,unaryminus,bothNumbers,add,subtract,multiply,divide,mod,pow,and,or;{let Er=function(t,s,e){e=e||0;var i,r,n,h,o,a,l,u=[0,0];return i=t[1][1]-t[0][1],r=t[0][0]-t[1][0],n=i*t[0][0]+r*t[0][1],h=s[1][1]-s[0][1],o=s[0][0]-s[1][0],a=h*s[0][0]+o*s[0][1],nn(l=i*o-h*r,0,e)||(u[0]=(o*n-r*a)/l,u[1]=(i*a-h*n)/l),u},Or=function(t,s,e,i){var r=s[0]-t[0],n=s[1]-t[1],h=i[0]-e[0],o=i[1]-e[1];if(h*n-o*r===0)return!1;var a=(r*(e[1]-t[1])+n*(t[0]-e[0]))/(h*n-o*r),l=(h*(t[1]-e[1])+o*(e[0]-t[0]))/(o*r-h*n);return a>=0&&a<=1&&l>=0&&l<=1},Fr=function(t,s,e){return(s[0]-t[0])*(e[1]-t[1])-(e[0]-t[0])*(s[1]-t[1])},Dr=function(t,s,e){return Fr(t,s,e)>0},Lr=function(t,s,e){return Fr(t,s,e)>=0},kr=function(t,s,e){return Fr(t,s,e)<0},Nr=function(t,s,e){return Fr(t,s,e)<=0},Br=function(t,s,e,i){if(i){var r=tmpPoint1,n=tmpPoint2;r[0]=s[0]-t[0],r[1]=s[1]-t[1],n[0]=e[0]-s[0],n[1]=e[1]-s[1];var h=r[0]*n[0]+r[1]*n[1],o=Math.sqrt(r[0]*r[0]+r[1]*r[1]),a=Math.sqrt(n[0]*n[0]+n[1]*n[1]);return Math.acos(h/(o*a))<i}return 0===Fr(t,s,e)},$r=function(t,s){var e=s[0]-t[0],i=s[1]-t[1];return e*e+i*i},Ur=function(t,s){var e=t.length;return t[s<0?s%e+e:s%e]},Vr=function(t){t.length=0},Wr=function(t,s,e,i){for(var r=e;r<i;r++)t.push(s[r])},zr=function(t){for(var s=0,e=t,i=1;i<t.length;++i)(e[i][1]<e[s][1]||e[i][1]===e[s][1]&&e[i][0]>e[s][0])&&(s=i);return!Dr(Ur(t,s-1),Ur(t,s),Ur(t,s+1))&&(jr(t),!0)},jr=function(t){for(var s=[],e=t.length,i=0;i!==e;i++)s.push(t.pop());for(i=0;i!==e;i++)t[i]=s[i]},Hr=function(t,s){return kr(Ur(t,s-1),Ur(t,s),Ur(t,s+1))},qr=function(t,s,e){var i,r,n=tmpLine1,h=tmpLine2;if(Lr(Ur(t,s+1),Ur(t,s),Ur(t,e))&&Nr(Ur(t,s-1),Ur(t,s),Ur(t,e)))return!1;r=$r(Ur(t,s),Ur(t,e));for(var o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&Lr(Ur(t,s),Ur(t,e),Ur(t,o+1))&&Nr(Ur(t,s),Ur(t,e),Ur(t,o))&&(n[0]=Ur(t,s),n[1]=Ur(t,e),h[0]=Ur(t,o),h[1]=Ur(t,o+1),i=Er(n,h),$r(Ur(t,s),i)<r))return!1;return!0},Jr=function(t,s,e){for(var i=0;i!==t.length;++i)if(i!==s&&i!==e&&(i+1)%t.length!==s&&(i+1)%t.length!==e&&Or(Ur(t,s),Ur(t,e),Ur(t,i),Ur(t,i+1)))return!1;return!0},Yr=function(t,s,e,i){var r=i||[];if(Vr(r),s<e)for(var n=s;n<=e;n++)r.push(t[n]);else{for(n=0;n<=e;n++)r.push(t[n]);for(n=s;n<t.length;n++)r.push(t[n])}return r},Xr=function(t){for(var s=[],e=[],i=[],r=[],n=Number.MAX_VALUE,h=0;h<t.length;++h)if(Hr(t,h))for(var o=0;o<t.length;++o)if(qr(t,h,o)){e=Xr(Yr(t,h,o,r)),i=Xr(Yr(t,o,h,r));for(var a=0;a<i.length;a++)e.push(i[a]);e.length<n&&(s=e,n=e.length,s.push([Ur(t,h),Ur(t,o)]))}return s},Kr=function(t){var s=Xr(t);return s.length>0?Zr(t,s):[t]},Zr=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var e=[t],i=0;i<s.length;i++)for(var r=s[i],n=0;n<e.length;n++){var h=Zr(e[n],r);if(h){e.splice(n,1),e.push(h[0],h[1]);break}}return e}return r=s,i=t.indexOf(r[0]),n=t.indexOf(r[1]),-1!==i&&-1!==n&&[Yr(t,i,n),Yr(t,n,i)]},Qr=function(t){var s,e=t;for(s=0;s<e.length-1;s++)for(var i=0;i<s-1;i++)if(Or(e[s],e[s+1],e[i],e[i+1]))return!1;for(s=1;s<e.length-2;s++)if(Or(e[0],e[e.length-1],e[s],e[s+1]))return!1;return!0},tn=function(t,s,e,i,r){r=r||0;var n=s[1]-t[1],h=t[0]-s[0],o=n*t[0]+h*t[1],a=i[1]-e[1],l=e[0]-i[0],u=a*e[0]+l*e[1],c=n*l-a*h;return nn(c,0,r)?[0,0]:[(l*o-h*u)/c,(n*u-a*o)/c]},sn=function(t,s,e,i,r,n,h){n=n||100,h=h||0,r=r||25,s=void 0!==s?s:[],e=e||[],i=i||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],S=[],w=t,v=t;if(v.length<3)return s;if(++h>n)return console.warn("quickDecomp: max level ("+n+") reached."),s;for(var b=0;b<t.length;++b)if(Hr(w,b)){e.push(w[b]),u=c=Number.MAX_VALUE;for(var x=0;x<t.length;++x)Dr(Ur(w,b-1),Ur(w,b),Ur(w,x))&&Nr(Ur(w,b-1),Ur(w,b),Ur(w,x-1))&&(l=tn(Ur(w,b-1),Ur(w,b),Ur(w,x),Ur(w,x-1)),kr(Ur(w,b+1),Ur(w,b),l)&&(f=$r(w[b],l))<c&&(c=f,a=l,m=x)),Dr(Ur(w,b+1),Ur(w,b),Ur(w,x+1))&&Nr(Ur(w,b+1),Ur(w,b),Ur(w,x))&&(l=tn(Ur(w,b+1),Ur(w,b),Ur(w,x),Ur(w,x+1)),Dr(Ur(w,b-1),Ur(w,b),l)&&(f=$r(w[b],l))<u&&(u=f,o=l,p=x));if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,i.push(l),b<p?(Wr(y,w,b,p+1),y.push(l),S.push(l),0!==m&&Wr(S,w,m,w.length),Wr(S,w,0,b+1)):(0!==b&&Wr(y,w,b,w.length),Wr(y,w,0,p+1),y.push(l),S.push(l),Wr(S,w,m,b+1));else{if(m>p&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(x=m;x<=p;++x)Lr(Ur(w,b-1),Ur(w,b),Ur(w,x))&&Nr(Ur(w,b+1),Ur(w,b),Ur(w,x))&&(f=$r(Ur(w,b),Ur(w,x)))<d&&Jr(w,b,x)&&(d=f,g=x%t.length);b<g?(Wr(y,w,b,g+1),0!==g&&Wr(S,w,g,v.length),Wr(S,w,0,b+1)):(0!==b&&Wr(y,w,b,v.length),Wr(y,w,0,g+1),Wr(S,w,g,b+1))}return y.length<S.length?(sn(y,s,e,i,r,n,h),sn(S,s,e,i,r,n,h)):(sn(S,s,e,i,r,n,h),sn(y,s,e,i,r,n,h)),s}return s.push(t),s},en=function(t,s){for(var e=0,i=t.length-1;t.length>3&&i>=0;--i)Br(Ur(t,i-1),Ur(t,i),Ur(t,i+1),s)&&(t.splice(i%t.length,1),e++);return e},rn=function(t,s){for(var e=t.length-1;e>=1;--e)for(var i=t[e],r=e-1;r>=0;--r)hn(i,t[r],s)&&t.splice(e,1)},nn=function(t,s,e){return e=e||0,Math.abs(t-s)<=e},hn=function(t,s,e){return nn(t[0],s[0],e)&&nn(t[1],s[1],e)};lineInt=Er,lineSegmentsIntersect=Or,triangleArea=Fr,isLeft=Dr,isLeftOn=Lr,isRight=kr,isRightOn=Nr,collinear=Br,sqdist=$r,polygonAt=Ur,polygonClear=Vr,polygonAppend=Wr,polygonMakeCCW=zr,polygonReverse=jr,polygonIsReflex=Hr,polygonCanSee=qr,polygonCanSee2=Jr,polygonCopy=Yr,polygonGetCutEdges=Xr,polygonDecomp=Kr,polygonSlice=Zr,polygonIsSimple=Qr,getIntersectionPoint=tn,polygonQuickDecomp=sn,polygonRemoveCollinearPoints=en,polygonRemoveDuplicatePoints=rn,scalar_eq=nn,points_eq=hn,tmpPoint1=[],tmpPoint2=[],tmpLine1=[],tmpLine2=[],self.vs={bs:Kr,xs:sn,Cs:Qr,Ts:en,Ms:rn,Is:zr}}{let on=!1,an=!1,un="dev";const cn=Symbol("Construct internal API token");let fn=16;const dn=self.Gs=class{constructor(){throw TypeError("static class can't be instantiated")}static _s(){if(fn<=0)throw new Error("cannot obtain internal API token");return--fn,cn}static Ps(){on=!0}static Rs(){return on}static As(){an=!0}static Es(){return an}static Os(t){un=t}static Fs(){return un}static Ds(){return"final"===un}};dn.Ls=!1,dn.ks=!1,dn.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Ns={}}{const pn=self.Gs;pn.Bs=class{constructor(t){this.$s=t,this.Us=new Map,this.Vs()}Vs(){let t=this.$s;(t.startsWith("?")||t.startsWith("#"))&&(t=t.substr(1));const s=t.split("&");for(const t of s)this.Ws(t)}Ws(t){if(!t)return;if(!t.includes("="))return void this.Us.set(t,null);const s=t.indexOf("="),e=decodeURIComponent(t.substring(0,s)),i=decodeURIComponent(t.substring(s+1));this.Us.set(e,i)}zs(){for(const t of this.Us)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}js(t){return this.Us.has(t)}Hs(t){const s=this.Us.get(t);return void 0===s?null:s}qs(){history.replaceState("",document.title,location.pathname+location.search)}Js(t){this.$s=t,this.Us.clear(),this.Vs()}},pn.Ys=new pn.Bs(location.search),pn.Xs=new pn.Bs(location.hash),pn.Ys.js("perf")&&(pn.Ks=!0),"dev"!==pn.Ys.Hs("mode")&&pn.Os("final")}{let mn=function(t){const s=parseFloat(t);return Sn.get(s)||(s>=13?"11":"NT "+t)};GetWindowsNTVersionName=mn;const gn=self.Gs,yn="(unknown)";gn.Zs={Qs:yn,te:yn,se:yn,ee:yn,ie:NaN,re:yn,ne:"browser",he:!0,oe:!1,ae:!1,le:!1,ue:async()=>{}};const Sn=new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]]),wn=navigator.userAgent,vn=navigator.userAgentData;if(vn&&vn.brands.length>0){let xn=function(t){let s="",e="",i="",r="";for(const n of t){const t=Cn.get(n.brand);!s&&t&&(s=t,e=n.version);const h=Tn.get(n.brand);!i&&h&&(i=h,r=n.version)}s||"Chromium"!==i||(gn.Zs.se="Chromium",gn.Zs.ee=r),gn.Zs.se=s||yn,gn.Zs.ee=e||yn,gn.Zs.re=i||yn};ReadBrandList=xn,gn.Zs.Qs=vn.platform,gn.Zs.oe=vn.mobile,gn.Zs.he=!gn.Zs.oe;const Cn=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),Tn=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);xn(vn.brands);let Mn=!1;gn.Zs.ue=async()=>{if(!Mn)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);xn(t.fullVersionList),"Windows"===gn.Zs.Qs?gn.Zs.te=mn(t.platformVersion):gn.Zs.te=t.platformVersion,Mn=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let In=function(t,s){const e=Array.isArray(t)?t:[t];for(const t of e){const e=t.exec(wn);if(e){s(e);break}}};RunTest=In,In(/windows\s+nt\s+([\d\.]+)/i,t=>{gn.Zs.Qs="Windows";const s=t[1];gn.Zs.te=mn(s)}),In(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{gn.Zs.Qs="macOS",gn.Zs.te=t[1].replace(/_/g,".")}),In(/CrOS/,()=>{gn.Zs.Qs="Chrome OS"}),In(/linux|openbsd|freebsd|netbsd/i,()=>{gn.Zs.Qs="Linux"}),In(/android/i,()=>{gn.Zs.Qs="Android"}),In(/android\s+([\d\.]+)/i,t=>{gn.Zs.Qs="Android",gn.Zs.te=t[1]}),gn.Zs.Qs===yn&&(In(/(iphone|ipod|ipad)/i,t=>{gn.Zs.Qs="iOS"}),In([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{gn.Zs.Qs="iOS",gn.Zs.te=t[1].replace(/_/g,".")}));const Gn=/chrome\//i.test(wn),_n=/chromium\//i.test(wn),Pn=/edg\//i.test(wn),Rn=/OPR\//.test(wn),An=/nwjs/i.test(wn),En=/safari\//i.test(wn),On=/webkit/i.test(wn);Pn||Rn||In(/chrome\/([\d\.]+)/i,t=>{gn.Zs.se="Chrome",gn.Zs.ee=t[1],gn.Zs.re="Chromium"}),In(/edg\/([\d\.]+)/i,t=>{gn.Zs.se="Edge",gn.Zs.ee=t[1],gn.Zs.re="Chromium"}),In(/OPR\/([\d\.]+)/,t=>{gn.Zs.se="Opera",gn.Zs.ee=t[1],gn.Zs.re="Chromium"}),In(/chromium\/([\d\.]+)/i,t=>{gn.Zs.se="Chromium",gn.Zs.ee=t[1],gn.Zs.re="Chromium"}),In(/nwjs\/[0-9.]+/i,t=>{gn.Zs.se="NW.js",gn.Zs.ee=t[1],gn.Zs.re="Chromium",gn.Zs.ne="nwjs"}),In(/firefox\/([\d\.]+)/i,t=>{gn.Zs.se="Firefox",gn.Zs.ee=t[1],gn.Zs.re="Gecko"}),!En||Gn||_n||Pn||Rn||An||(gn.Zs.se="Safari",gn.Zs.re="WebKit",In(/version\/([\d\.]+)/i,t=>{gn.Zs.ee=t[1]}),In(/crios\/([\d\.]+)/i,t=>{gn.Zs.se="Chrome for iOS",gn.Zs.ee=t[1]}),In(/fxios\/([\d\.]+)/i,t=>{gn.Zs.se="Firefox for iOS",gn.Zs.ee=t[1]}),In(/edgios\/([\d\.]+)/i,t=>{gn.Zs.se="Edge for iOS",gn.Zs.ee=t[1]})),gn.Zs.re===yn&&On&&(gn.Zs.re="WebKit"),"Android"===gn.Zs.Qs&&"Safari"===gn.Zs.se&&(gn.Zs.se="Stock");const Fn=new Set(["Windows","macOS","Linux","Chrome OS"]).has(gn.Zs.Qs)||"nwjs"===gn.Zs.ne;gn.Zs.he=Fn,gn.Zs.oe=!Fn}"Chrome"===gn.Zs.se&&"browser"===gn.Zs.ne&&/wv\)/.test(wn)&&(gn.Zs.ne="webview"),"nwjs"!==gn.Zs.ne&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(gn.Zs.ne="webapp"),gn.Zs.ie=parseFloat(gn.Zs.ee);const bn="macOS"===gn.Zs.Qs&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2;bn&&(gn.Zs.Qs="iOS",gn.Zs.te=gn.Zs.ee,gn.Zs.he=!1,gn.Zs.oe=!0,gn.Zs.le=!0),gn.Zs.ae="macOS"===gn.Zs.Qs||"iOS"===gn.Zs.Qs}{let Dn=function(t){return new Promise((s,e)=>{t.onsuccess=()=>s(t.result),t.onerror=()=>e(t.error)})},Ln=function(t){return new Promise((s,e)=>{t.oncomplete=()=>s(),t.onerror=()=>e(t.error),t.onabort=()=>e(t.error)})},kn=function(t,s){return qn(t,s)},Nn=function(t,s){return qn(t,s,!0)},Bn=function(t){$n(t);let s=zn.get(t);return s instanceof Promise||(s=Jn(t),zn.set(t,s),s.catch(s=>zn.delete(t))),s},$n=function(t){if("string"!=typeof t)throw new TypeError("expected string")},Un=function(t,s){const e=t.objectStore(Wn).openCursor();return new Promise(t=>{const i=[];e.onsuccess=e=>{const r=e.target.result;if(r){switch(s){case"entries":i.push([r.key,r.value]);break;case"keys":i.push(r.key);break;case"values":i.push(r.value)}r.continue()}else t(i)}})};s=Dn,a=Ln,c=kn,i=Nn,l=Bn,f=$n,d=Un;const Vn=2,Wn="keyvaluepairs",zn=new Map,jn="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,Hn="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function qn(t,s,e=!1,i=!0){const r=await Bn(t);try{return s(r.transaction([Wn],e?"readwrite":"readonly"))}catch(r){if(i&&"InvalidStateError"===r.name)return zn.delete(t),qn(t,s,e,!1);throw r}}async function Jn(t){$n(t);const s=indexedDB.open(t,Vn);return s.addEventListener("upgradeneeded",s=>{try{s.target.result.createObjectStore(Wn)}catch(s){console.error(`Failed to create objectstore for database ${t}`,s)}}),Dn(s)}class Yn{constructor(t){$n(t),this.name=t}async ready(){await Bn(this.name)}set(t,s){return $n(t),Nn(this.name,async e=>{const i=Dn(e.objectStore(Wn).put(s,t)),r=Ln(e);await Promise.all([r,i])})}get(t){return $n(t),kn(this.name,async s=>{const e=Dn(s.objectStore(Wn).get(t)),i=Ln(s),[r,n]=await Promise.all([i,e]);return n})}delete(t){return $n(t),Nn(this.name,async s=>{const e=Dn(s.objectStore(Wn).delete(t)),i=Ln(s);await Promise.all([i,e])})}clear(){return Nn(this.name,async t=>{const s=Dn(t.objectStore(Wn).clear()),e=Ln(t);await Promise.all([e,s])})}keys(){return kn(this.name,async t=>{let s;s=Hn?Dn(t.objectStore(Wn).getAllKeys()):Un(t,"keys");const e=Ln(t),[i,r]=await Promise.all([e,s]);return r})}values(){return kn(this.name,async t=>{let s;s=jn?Dn(t.objectStore(Wn).getAll()):Un(t,"values");const e=Ln(t),[i,r]=await Promise.all([e,s]);return r})}entries(){return kn(this.name,async t=>{const s=Un(t,"entries"),e=Ln(t),[i,r]=await Promise.all([e,s]);return r})}}self.ce=Yn}{let Xn=function(t){throw new Error(`"${t}" is not implemented`)},Kn=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},Zn=function(t){return"object"==typeof t?new Promise(s=>{const{port1:e,port2:i}=new MessageChannel;i.onmessage=t=>s(t.data),e.postMessage(t)}):Promise.resolve(t)};r=Xn,a=Kn,o=Zn;const Qn=self.ce,th=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];class sh{constructor(t){this.fe=t,this.de=!this.fe,this.de||"undefined"!=typeof indexedDB||(this.de=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.pe=new Map}me(t){if(!this.de)for(const s of th)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.de=!0;break}}async ge(t){const s=this.pe.get(t),e=await Zn(s);return void 0===e?null:e}async ye(t,s){s=await Zn(s),this.pe.set(t,s)}Se(t){this.pe.delete(t)}we(){this.pe.clear()}ve(){return Array.from(this.pe.keys())}be(){return this.de}xe(){return this.pe}Ce(t){this.pe=t}async getItem(t,s){if(Kn(s),this.de)return await this.ge(t);let e;try{e=await this.fe.get(t)}catch(s){return this.me(s),this.de?await this.ge(t):(console.error(`Error reading '${t}' from storage, returning null: `,s),null)}return void 0===e?null:e}async setItem(t,s,e){if(Kn(e),void 0===s&&(s=null),this.de)await this.ye(t,s);else try{await this.fe.set(t,s)}catch(e){if(this.me(e),!this.de)throw e;await this.ye(t,s)}}async removeItem(t,s){if(Kn(s),this.de)this.Se(t);else try{await this.fe.delete(t)}catch(s){this.me(s),this.de?this.Se(t):console.error(`Error removing '${t}' from storage: `,s)}}async clear(t){if(Kn(t),this.de)this.we();else try{await this.fe.clear()}catch(t){this.me(t),this.de?this.we():console.error("Error clearing storage: ",t)}}async keys(t){if(Kn(t),this.de)return this.ve();let s=[];try{s=await this.fe.keys()}catch(t){if(this.me(t),this.de)return this.ve();console.error("Error getting storage keys: ",t)}return s}ready(t){return Kn(t),this.de?Promise.resolve(!0):this.fe.ready()}Te(t){if(t.Me)return new sh(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const e=new Qn(s);return new sh(e)}}length(t){Xn("localforage.length()")}key(t,s){Xn("localforage.key()")}iterate(t,s){Xn("localforage.iterate()")}Ie(t){Xn("localforage.setDriver()")}config(t){Xn("localforage.config()")}Ge(t){Xn("localforage.defineDriver()")}_e(){Xn("localforage.driver()")}supports(t){Xn("localforage.supports()")}dropInstance(){Xn("localforage.dropInstance()")}}self.localforage=new sh(new Qn("localforage"))}{const eh=self.Gs;if(eh.Pe={},eh.Pe.Re=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");return void 0!==t.animate&&void 0!==t.animate([{opacity:"0"},{opacity:"1"}],1e3).reverse}catch(t){return!1}})(),eh.Pe.Ae="undefined"!=typeof HTMLDialogElement,eh.Pe.Ee=!!self.requestIdleCallback,eh.Pe.ImageBitmap=!!self.createImageBitmap,eh.Pe.ImageBitmapOptions=!1,eh.Pe.Oe=!1,eh.Pe.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{eh.Pe.ImageBitmapOptions=!0}).catch(()=>{eh.Pe.ImageBitmapOptions=!1})}catch(ih){eh.Pe.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{eh.Pe.Oe=10===t.width&&10===t.height}).catch(()=>{eh.Pe.Oe=!1})}catch(rh){eh.Pe.Oe=!1}}if(eh.Pe.Fe=!(!navigator.clipboard||!navigator.clipboard.readText),eh.Pe.De=!(!navigator.permissions||!navigator.permissions.query),eh.Pe.Le=!1,eh.Pe.De){const nh={name:"clipboard-read"};navigator.permissions.query(nh).then(()=>{eh.Pe.Le=!0}).catch(()=>{eh.Pe.Le=!1})}eh.Pe.ke=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),eh.Pe.Ne="undefined"!=typeof Proxy,eh.Pe.Be="undefined"!=typeof document&&void 0!==document.createElement("a").download,eh.Pe.$e="function"==typeof fetch,eh.Pe.Ue=!!(self.isSecureContext&&"Opera"!==eh.Zs.se&&navigator.storage&&navigator.storage.persist),eh.Pe.Ve=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),eh.Pe.We=(()=>{if("undefined"==typeof document)return!1;if("iOS"===eh.Zs.Qs)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),eh.Pe.ImageDecoder=void 0!==self.ImageDecoder,eh.Pe.ze=!!self.VideoEncoder,eh.Pe.je=!!self.showOpenFilePicker,eh.Pe.He=!!self.queryLocalFonts,eh.Pe.UserActivation=!!navigator.userActivation,eh.Pe.qe=!1,(async()=>{let t;"undefined"==typeof document?t=new OffscreenCanvas(32,32):(t=document.createElement("canvas"),t.width=32,t.height=32);const s=t.getContext("2d");s.fillStyle="blue",s.fillRect(0,0,32,32);let e=null;try{t.convertToBlob?e=await t.convertToBlob({type:"image/webp",quality:1}):t.toBlob&&(e=await new Promise(s=>t.toBlob(s,"image/webp",1))),eh.Pe.qe=e&&"image/webp"===e.type}catch(t){eh.Pe.qe=!1}})()}{const hh=self.Gs;String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(hh.Je(t),"g"),s)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((t,s)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((s,e)=>t({usage:s,quota:e}),s))})}{let oh=function(t){let s="Assertion failure: "+t+"\n\nStack trace:\n"+ah.Ye();console.error(s)};assertFail=oh;const ah=self.Gs;self.assert=function(t,s){t||oh(s)}}{const lh=self.Gs,uh=self.Ns;lh.Xe=function(t){return"number"==typeof t},lh.Ke=function(t){return lh.Xe(t)&&isFinite(t)},lh.Ze=function(t){if(!lh.Xe(t))throw new TypeError("expected number")},lh.Qe=function(t){lh.ti(t)},lh.si=function(t,s,e){if(!lh.Xe(t)||isNaN(t)||s>t||e<t)throw new RangeError("number outside of range")},lh.ei=function(...t){for(let s of t);},lh.ii=function(t){if(!lh.Ke(t))throw new TypeError("expected finite number")},lh.ri=function(t){lh.ti(t)},lh.ni=function(...t){for(let s of t);},lh.hi=function(t){return"string"==typeof t},lh.oi=function(t){if(!lh.hi(t))throw new TypeError("expected string")},lh.ai=function(t){lh.ti(t)},lh.li=function(...t){for(let s of t);},lh.ci=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},lh.fi=function(t){if(!lh.ci(t))throw new TypeError("expected simple object")},lh.di=function(t){if(!lh.ti(t)&&!lh.ci(t))throw new TypeError("expected simple object")},lh.pi=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},lh.mi=function(t){if(!lh.pi(t))throw new TypeError("expected object")},lh.gi=function(t){lh.ti(t)},lh.yi=function(...t){for(let s of t);},lh.Si=function(t){return lh.wi(t,Blob)&&"string"==typeof t.name},lh.bi=function(t){if(!lh.Si(t))throw new TypeError("expected file")},lh.xi=function(t){lh.ti(t)},lh.Ci=function(t){return Array.isArray(t)},lh.Ti=function(t){if(!lh.Ci(t))throw new TypeError("expected array")},lh.Mi=function(t){lh.ti(t)},lh.Ii=function(...t){for(let s of t);},lh.Gi=function(t){return!(!lh.Ci(t)||t.length&&!lh.Ci(t[0]))},lh._i=function(t){if(!lh.Gi(t))throw new TypeError("expected 2d array");for(let s of t)if(!lh.Ci(s))throw new TypeError("expected 2d array")},lh.Pi=function(t){lh.ti(t)},lh.Ri=function(t){return"function"==typeof t},lh.Ai=function(t,s){if(!lh.Ri(t))throw new TypeError("expected function");if(!lh.ti(s)&&t!==s)throw new TypeError("expected same function reference")},lh.Ei=function(t){lh.ti(t)},lh.Oi=function(...t){for(let s of t);},lh.Fi=function(t,...s){if(!lh.Ri(t))throw new TypeError("expected function");if(!s.length)throw new Error("missing comparison functions");for(let e of s)if(!lh.ti(e)&&t===e)return;throw new TypeError("expected same function reference")},lh.Di=function(...t){if(!lh.ti(t))for(let s of t);},lh.Li=function(t,s){return t instanceof s},lh.ki=function(t,...s){for(let e of s)if(lh.Li(t,e))return!0;return!1},lh.Ni=function(t,s){if(!lh.Li(t,s))throw new TypeError("unexpected type")},lh.Bi=function(t,s){lh.ti(t)},lh.$i=function(t,...s){for(let t of s);},lh.Ui=function(t,...s){if(!lh.ki(t,...s))throw new TypeError("unexpected type")},lh.Vi=function(t,...s){if(!lh.ti(t)&&!lh.ki(t,...s))throw new TypeError("unexpected type")},lh.Wi=function(t,s){for(let e of t)if(!lh.Li(e,s))return!1;return!0},lh.zi=function(t){for(let s of t)if(!lh.Ke(s))return!1;return!0},lh.ji=function(t,s){for(let s of t);},lh.Hi=function(t,s){if(!lh.ti(t))for(let s of t);},lh.Ji=function(t,s){if(!lh.ti(t))for(let s of t);},lh.Yi=function(t,...s){for(let s of t);},lh.Xi=function(t,...s){if(!lh.ti(t))for(let s of t);},lh.Ki=function(t,s){return!(lh.ti(t)||!lh.hi(t.nodeName))&&(!s||lh.Zi(t.nodeName,s))},lh.Qi=function(t,s){if(lh.ti(t)||!lh.hi(t.nodeName))throw new TypeError("expected DOM node");if(s&&!lh.Zi(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},lh.tr=function(t,s){lh.ti(t)},lh.sr=function(t,s){return!(lh.ti(t)||!lh.hi(t.tagName))&&(!s||lh.Zi(t.tagName,s))},lh.er=function(t,s){if(lh.ti(t)||!lh.hi(t.tagName))throw new TypeError("expected HTML element");if(s&&!lh.Zi(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},lh.ir=function(t,s){lh.ti(t)},lh.rr=function(t){return lh.sr(t,"img")||lh.sr(t,"canvas")||lh.sr(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},lh.nr=function(t){if(!lh.rr(t))throw new TypeError("expected drawable")},lh.hr=function(t){lh.ti(t)},lh.ar=function(t){return t instanceof ImageData||lh.rr(t)},lh.lr=function(t){if(!lh.ar(t))throw new TypeError("expected drawable or image data")},lh.ur=function(t){if(!lh.ti(t)&&!lh.ar(t))throw new TypeError("expected drawable or image data")},lh.cr=function(t){return"string"==typeof t||lh.dr&&t instanceof lh.dr||t instanceof lh.pr},lh.mr=function(t){if(!lh.cr(t))throw new TypeError("expected string-like")},lh.gr=function(t){lh.ti(t)},lh.yr=function(...t){for(let s of t);},lh.Sr=function(){throw new Error("must be overridden")},lh.wr=function(){throw new Error("not yet implemented")},lh.vr=function(t){return t.constructor===function*(){}.constructor},lh.br=function(t){if(!lh.vr(t))throw new Error("expected generator function")},lh.Cr=function(t){return"function"===t[Symbol.iterator]},lh.Tr=function(t){if(!lh.Cr(t))throw new Error("expected iterable")},lh.Mr=function(t){return!lh.ti(t)},lh.ti=function(t){return null==t},lh.Ir=function(t){let s=t[0].constructor;for(let e of t)if(e.constructor!==s)return!1;return s},lh.Gr=function(t,s){for(let e of t)if(!(e instanceof s))return!1;return!0};const ch=Object.getPrototypeOf(Uint8Array);lh._r=function(t){return lh.Li(t,ch)},lh.Pr=function(t){},lh.Rr=function(t){lh.Ar(t,ch)},lh.Er=function(t,...s){if(!lh.Or(t,...s))throw new TypeError("unexpected type")},lh.Or=function(t,...s){for(const e of s)if(lh.wi(t,e))return!0;return!1},lh.Ar=function(t,s){if(!lh.wi(t,s))throw new TypeError("unexpected type")},lh.wi=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},uh.Ze=lh.Ze,uh.Qe=lh.Qe,uh.ii=lh.ii,uh.ri=lh.ri,uh.oi=lh.oi,uh.ai=lh.ai,uh.mi=lh.mi,uh.gi=lh.gi,uh.Ti=lh.Ti,uh.Mi=lh.Mi,uh.Ai=lh.Ai,uh.Ei=lh.Ei,uh.Ni=lh.Ni,uh.Bi=lh.Bi,uh.ti=lh.ti}{let fh=function(t,s){let e=yh.getType(t),i=yh.getType(s);return"null"===e||"null"===i||"undefined"!==e&&"undefined"!==i&&e===i},dh=function(t){console.warn("[Defence] "+t+" @",yh.Ye())},ph=function(){if(Mh=-1,vh.size>0||bh.size>0){let t=[...new Set([...vh.keys()].map(t=>yh.getName(t)))].join(",");console.warn(`An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: ${t}`),vh.clear(),bh.clear()}},mh=function(t){let s=new Set;for(let e in t)s.add(e);return s},gh=function(t,s){let e=mh(s),i=Ih.get(t);if(i){let s=[];for(let t of i.values())e.has(t)?e.delete(t):s.push(t);yh.Fr(s,[...e]),s.length&&console.warn(`[Defence] '${yh.getName(t)}' constructor creates inconsistent properties: ${s.join(", ")}`)}else Ih.set(t,e)};isValidTypeChange=fh,logDefendedObjectWarning=dh,CheckDefendedObjectsUsedCorrectly=ph,getObjectPropertySet=mh,VerifyObjectPropertiesConsistent=gh;const yh=self.Gs,Sh=new Map;let wh;yh.Dr=function(t,s){console.log(`%c${t}`,`font-weight: bold; color:${s}`)},yh.Lr=function(t,...s){Sh.has(t)||Sh.set(t,-1),-1===Sh.get(t)&&Sh.set(t,requestAnimationFrame(()=>{console.log(`%c${t}`,"font-weight: bold",...s),Sh.set(t,-1)}))},yh.kr=function(t){performance.mark(t),wh||(wh=new Map),wh.has(t)||wh.set(t,{Nr:0,total:0,Br:0,$r:1,toString:function(){return`${t} :: current => ${this.Nr.toPrecision(3)} :: average => ${this.Br.toPrecision(3)} :: calls => ${this.$r}`}})},yh.Ur=function(t){performance.measure(`measure-${t}`,t);const s=performance.getEntriesByName(`measure-${t}`)[0],e=wh.get(t);e.Nr=s.duration,e.total+=e.Nr,e.Br=e.total/e.$r,console.log(e.toString()),e.$r++,performance.clearMarks(t),performance.clearMeasures(`measure-${t}`)},yh.Ye=function(){return(new Error).stack},yh.Vr=function(){},yh.cast=function(t,s){return t&&t instanceof s?t:null},yh.getName=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":yh.Xe(t)?"<number>":yh.hi(t)?"<string>":yh.Ci(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":yh.Ri(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},yh.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},yh.range=function*(t,s){if(!isFinite(Math.abs(t-s)))throw new Error("Invalid parameters");if(t>s)for(let e=t-1;e>=s;e--)yield e;else for(let e=t;e<s;e++)yield e};let vh=new Map,bh=new Map,xh=new WeakMap,Ch=new WeakMap;yh.Wr={};const Th=new Set(["then","splice"]);yh.Wr.get=function(t,s){return s in t||"symbol"==typeof s||Th.has(s)||dh(`Accessed missing property '${s}' from defended object '${yh.getName(t)}', returning undefined`),Ch.has(t)&&"symbol"!=typeof s&&!Th.has(s)&&dh(`Accessed property '${s}' on a released object '${yh.getName(t)}'\nObject was originally released at: ${Ch.get(t)})\nCall stack at access: `),t[s]},yh.Wr.set=function(t,s,e){return s in t||vh.has(t)||dh(`Set non-existent property '${s}' to '${e}' on defended object '${yh.getName(t)}'`),fh(t[s],e)||vh.has(t)||dh(`Set '${yh.getType(t[s])}' property '${s}' to type '${yh.getType(e)}' on defended object '${yh.getName(t)}'`),Ch.has(t)&&dh(`Set property '${s}' on a released object '${yh.getName(t)}'\nObject was originally released at: ${Ch.get(t)})\nCall stack at access: `),t[s]=e,!0},yh.Wr.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${yh.getName(t)}'`)},yh.Wr.defineProperty=function(t,s,e){throw new ReferenceError(`Cannot define property '${s}' on defended object '${yh.getName(t)}'`)},yh.Wr.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${yh.getName(t)}'`)};let Mh=-1;yh.zr=class{constructor(){if(!yh.ks||!yh.Pe.Ne)return;let t=new.target,s=Object.create(t.prototype),e=new Proxy(s,yh.Wr);return vh.set(s,e),bh.set(e,s),xh.set(e,s),-1===Mh&&(Mh=requestAnimationFrame(ph)),e}},yh.jr=function(t){if(yh.ks&&yh.Pe.Ne&&t instanceof yh.zr){if(!bh.has(t))return t;let s=bh.get(t);return bh.delete(t),vh.delete(s),t}return yh.Ls?Object.seal(t):t},yh.Hr=function(t,...s){let e;try{e=new t(...s)}catch(t){throw bh.clear(),vh.clear(),t}return yh.ks&&gh(t,e),yh.jr(e)},yh.qr=function(t){let s=xh.get(t);s&&Ch.set(s,yh.Ye())},yh.Jr=function(t){let s=xh.get(t);return!!s&&!!Ch.get(s)};let Ih=new Map;yh.Yr=class{constructor(t){this.Xr="",t&&this.start(t)}start(t){yh.Ks&&(this.Xr=t,performance.mark(this.Xr+"-Start"))}end(){yh.Ks&&(performance.mark(this.Xr+"-End"),performance.measure(this.Xr,this.Xr+"-Start",this.Xr+"-End"))}next(t){yh.Ks&&(this.end(),this.Xr=t,performance.mark(this.Xr+"-Start"))}}}{let Gh=function(t){return 0===t&&1/t<0};isNegativeZero=Gh;const _h=self.Gs,Ph=2*Math.PI,Rh=Math.PI/180,Ah=180/Math.PI;_h.wrap=function(t,s,e){t=Math.floor(t),s=Math.floor(s);const i=(e=Math.floor(e))-s;if(0===i)return e;if(t<s){const r=e-(s-t)%i;return r===e?0:r}return s+(t-s)%i},_h.Kr=function(t,s,e,i,r){const n=e-s;return 0===n&&0===i?t:(t-s)*(r-i)/n+i},_h.normalize=function(t,s,e){return s-e===0?1:(t-s)/(e-s)},_h.Zr=function(t,s,e){return t<s?s:t>e?e:t},_h.Qr=function(t){return(t%=Ph)<0&&(t+=Ph),t},_h.tn=function(t){return t*Rh},_h.sn=function(t){return t*Ah},_h.en=function(t,s){return Math.sqrt(t*t+s*s)},_h.rn=function(t,s,e){return Math.sqrt(t*t+s*s+e*e)},_h.nn=function(t,s,e,i){return _h.en(e-t,i-s)},_h.hn=function(t,s,e,i){const r=e-t,n=i-s;return r*r+n*n},_h.an=function(t,s,e,i){return Math.atan2(i-s,e-t)},_h.ln=function(t,s){if(t===s)return 0;let e=Math.sin(t),i=Math.cos(t),r=e*Math.sin(s)+i*Math.cos(s);return r>=1?0:r<=-1?Math.PI:Math.acos(r)},_h.un=function(t,s,e){let i=Math.sin(t),r=Math.cos(t),n=Math.sin(s),h=Math.cos(s);return Math.acos(i*n+r*h)>e?r*n-i*h>0?_h.Qr(t+e):_h.Qr(t-e):_h.Qr(s)},_h.cn=function(t,s){let e=Math.sin(t);return Math.cos(t)*Math.sin(s)-e*Math.cos(s)<=0},_h.fn=function(t,s,e,i=0){let r=_h.ln(t,s);const n=Ph*i;return _h.cn(s,t)?_h.Qr(t+(r+n)*e):_h.Qr(t-(r+n)*e)},_h.dn=function(t,s,e,i=0){const r=_h.ln(t,s),n=Ph*i;return _h.cn(s,t)?_h.Qr(t+(r+n)*e):_h.Qr(t+(Ph-r+n)*e)},_h.pn=function(t,s,e,i=0){const r=_h.ln(t,s),n=Ph*i;return _h.cn(s,t)?_h.Qr(t-(-Ph+r-n)*e):_h.Qr(t-(r+n)*e)},_h.mn=function(t,s){const e=_h.ln(t,s);return _h.cn(t,s)?_h.Qr(s-e):_h.Qr(s+e)},_h.Gt=function(t,s,e){return t+e*(s-t)},_h.gn=function(t,s,e){return t===s?0:(e-t)/(s-t)},_h.yn=function(t,s,e,i,r){return _h.Gt(i,r,_h.gn(t,s,e))},_h.Sn=function(t,s,e,i){return _h.Gt(_h.Gt(t,s,i),_h.Gt(s,e,i),i)},_h.wn=function(t,s,e,i,r){return _h.Gt(_h.Sn(t,s,e,r),_h.Sn(s,e,i,r),r)},_h.vn=function(t,s,e){return(t+s+(t-s)*Math.cos(e*Math.PI))/2},_h.bn=function(t){return t>0&&!(t-1&t)},_h.xn=function(t){--t;for(let s=1;s<32;s<<=1)t|=t>>s;return t+1},_h.Cn=function(t,s){return Math.round(t*s)/s},_h.Tn=function(t,s){return Math.floor(t*s)/s},_h.Mn=function(t,s){s=Math.max(Math.floor(s),0);const e=Math.pow(10,s);return Math.round(t*e)/e},_h.In=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},_h.toFixed=function(t,s){let e=t.toFixed(s),i=e.length-1;for(;i>=0&&"0"===e.charAt(i);--i);return i>=0&&"."===e.charAt(i)&&--i,i<0?e:e.substr(0,i+1)},_h.Gn=function(t,s,e){return _h.Zr(t,0,255)|_h.Zr(s,0,255)<<8|_h.Zr(e,0,255)<<16};const Eh=1024,Oh=1023,Fh=16384,Dh=8191,Lh=-8192;_h._n=function(t,s,e,i){return(t=_h.Zr(Math.floor(1024*t),-8192,8191))<0&&(t+=16384),(s=_h.Zr(Math.floor(1024*s),-8192,8191))<0&&(s+=16384),(e=_h.Zr(Math.floor(1024*e),-8192,8191))<0&&(e+=16384),-(16384*t*16384*1024+16384*s*1024+1024*e+(i=_h.Zr(Math.floor(1023*i),0,1023)))},_h.Pn=function(t,s,e){return _h._n(t,s,e,1)},_h.Rn=function(t){if(t>=0)return(255&t)/255;{let s=Math.floor(-t/274877906944);return s>8191&&(s-=16384),s/1024}},_h.An=function(t){if(t>=0)return((65280&t)>>8)/255;{let s=Math.floor(-t%274877906944/16777216);return s>8191&&(s-=16384),s/1024}},_h.En=function(t){if(t>=0)return((16711680&t)>>16)/255;{let s=Math.floor(-t%16777216/1024);return s>8191&&(s-=16384),s/1024}},_h.On=function(t){return Gh(t)?0:t>=0?1:Math.floor(-t%1024)/1023},_h.Fn=function(t,s){for(t=Math.floor(t),s=Math.floor(s);0!==s;){let e=s;s=t%s,t=e}return t};const kh=[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]];_h.Dn=function(t,s){if((t=Math.floor(t))===(s=Math.floor(s)))return[1,1];for(let e of kh){let i=t/e[0]*e[1];if(Math.abs(s-i)<1)return e.slice(0);if(i=t/e[1]*e[0],Math.abs(s-i)<1)return[e[1],e[0]]}let e=_h.Fn(t,s);return[t/e,s/e]},_h.Ln=function(t,s,e,i,r,n,h,o){const a=Math.min(t,e),l=Math.max(t,e),u=Math.min(r,h),c=Math.max(r,h);if(l<u||a>c)return!1;const f=Math.min(s,i),d=Math.max(s,i),p=Math.min(n,o),m=Math.max(n,o);if(d<p||f>m)return!1;const g=r-t+h-e,y=n-s+o-i,S=e-t,w=i-s,v=h-r,b=o-n,x=Math.abs(w*v-b*S),C=v*y-b*g;if(Math.abs(C)>x)return!1;const T=S*y-w*g;return Math.abs(T)<=x},_h.kn=function(t,s,e,i,r,n,h,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(n<f||r>d)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||h>m)return!1;const g=a-t+u-e,y=l-s+c-i,S=e-t,w=i-s,v=u-a,b=c-l,x=Math.abs(w*v-b*S),C=v*y-b*g;if(Math.abs(C)>x)return!1;const T=S*y-w*g;return Math.abs(T)<=x},_h.Nn=function(t,s,e,i,r){const n=Math.min(t,e),h=Math.max(t,e),o=Math.min(s,i),a=Math.max(s,i),l=r.Bn(),u=r.$n(),c=r.Un(),f=r.Vn(),d=r.Wn(),p=r.zn(),m=r.jn(),g=r.Hn();return _h.kn(t,s,e,i,n,h,o,a,l,u,c,f)||_h.kn(t,s,e,i,n,h,o,a,c,f,d,p)||_h.kn(t,s,e,i,n,h,o,a,d,p,m,g)||_h.kn(t,s,e,i,n,h,o,a,m,g,l,u)},_h.qn=function(t,s,e,i,r){const n=Math.min(t,e),h=Math.max(t,e),o=Math.min(s,i),a=Math.max(s,i);let l=0;for(let u=r.length-4;l<=u;l+=2)if(_h.kn(t,s,e,i,n,h,o,a,r[l],r[l+1],r[l+2],r[l+3]))return!0;return _h.kn(t,s,e,i,n,h,o,a,r[l],r[l+1],r[0],r[1])};const Nh=2,Bh=1e-6;_h.Jn=function(t,s,e,i,r,n,h,o){const a=e-t,l=o-n,u=a*l-(i-s)*(h-r);if(0===u)return 2;const c=((s-i)*(h-t)+a*(o-s))/u;return 0<c&&c<1.000001?(l*(h-t)+(r-h)*(o-s))/u:2},_h.Yn=function(t,s,e,i,r,n,h,o,a){const l=(h-r)*a,u=(o-n)*a;return _h.Jn(t,s,e,i,r-l,n-u,h+l,o+u)},_h.Xn=function(t,s,e,i,r,n,h,o){const a=r-e,l=n-i,u=h-e,c=o-i,f=t-e,d=s-i,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,S=u*f+c*d,w=1/(p*y-m*m),v=(y*g-m*S)*w,b=(p*S-m*g)*w;return v>=0&&b>=0&&v+b<=1},_h.Kn=function(t,s,e,i,r,n,h,o){const a=r-e,l=n-i,u=h-e,c=o-i,f=t-e,d=s-i,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,S=f*u+d*c,w=p*g-m*m,v=(g*y-m*S)/w,b=(p*S-m*y)/w;return[1-v-b,v,b]},_h.Zn=function(t,s,e,i,r,n,h,o,a,l,u,c){return[t*i+s*h+e*l,t*r+s*o+e*u,t*n+s*a+e*c]}}{const $h=self.Gs;let Uh=null,Vh="";if("undefined"!=typeof document){Uh=document;const Jh=document.querySelector("base");Vh=Jh&&Jh.hasAttribute("href")?Jh.getAttribute("href"):"",Vh&&(Vh.startsWith("/")&&(Vh=Vh.substr(1)),Vh.endsWith("/")||(Vh+="/"))}$h.Qn=function(){return Vh},$h.th=function(){if(!Uh)return"";const t=Uh.location;return $h.sh(t.origin+t.pathname)+Vh},$h.sh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},$h.eh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},$h.ih=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},$h.rh=function(t,s){const e=t.lastIndexOf(".");return-1===e?t+"."+s:t.substr(0,e+1)+s},$h.nh=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},$h.hh=function(t){return t.replace(/\\/g,"/")},$h.oh=function(t,s){return s===(t?$h.ih(t).slice(1):"")},$h.ah=function(t,s){let e,i;return $h.Si(t)&&(e=$h.nh(t.name)),$h.hi(t)&&(e=$h.nh(t)),$h.Si(s)&&(i=$h.nh(s.name)),$h.hi(s)&&(i=$h.nh(s)),e===i},$h.uh=function(t){t=$h.hh(t);let s=/^\w\:\//.exec(t);s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=t.replace(/\/{2,}/g,"/")).length>1&&"/"===t.slice(-1)&&(t=t.slice(0,-1));const e=t.lastIndexOf("/")+1;let i,r="",n=t,h="";e>0&&(r=t.slice(0,e),n=t.slice(e)),i=n;const o=n.lastIndexOf(".");return o>0&&(h=n.slice(o),i=n.slice(0,-h.length)),{dir:r,fh:n,name:i,root:s,ext:h,dh:s+r+n}},$h.ph=function(t,s){return new Promise((e,i)=>{self.setTimeout(e,t,s)})},$h.mh=function(t){try{t()}catch(t){$h.Ls&&console.warn("Swallowed exception: ",t)}},$h.gh=function(){},$h.Zi=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},$h.yh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},$h.Sh=function(t,s,e){t[e++]=s[0],t[e++]=s[1],t[e++]=s[2],t[e++]=s[3],t[e++]=s[4],t[e++]=s[5],t[e++]=s[6],t[e++]=s[7],t[e++]=s[8],t[e++]=s[9],t[e++]=s[10],t[e++]=s[11],t[e++]=s[12],t[e++]=s[13],t[e++]=s[14],t[e]=s[15]},$h.wh=function(t,s){t.length=s},$h.bh=function(t){t&&0!==t.length&&$h.wh(t,0)},$h.xh=function(t){if(t){for(let s=0;s<t.length;s++){let e=t[s];$h.wh(e,0)}$h.wh(t,0)}},$h.Ch=function(t,s,e){s|=0;const i=t.length;if(!(s<=i))for(let r=i;r<s;++r)t.push(e)},$h.Th=function(t,s,e){s|=0;const i=t.length;s<i?$h.wh(t,s):s>i&&$h.Ch(t,s,e)},$h.Mh=function(t,s){$h.bh(t),$h.Fr(t,s)},$h.Fr=function(t,s){if(s.length<1e4)t.push(...s);else for(let e=0,i=s.length;e<i;++e)t.push(s[e])},$h.Ih=function(t,s){if((s=Math.floor(s))<0||s>=t.length)return;let e=t.length-1;for(let i=s;i<e;++i)t[i]=t[i+1];$h.wh(t,e)},$h.Gh=function(t,s){let e=t.indexOf(s);e>=0&&t.splice(e,1)},$h._h=function(t,s){let e=t.length;if(s.length!==e)return!1;for(let i=0;i<e;++i)if(t[i]!==s[i])return!1;return!0},$h.Ph=function(t,s){let e=[],i=0;for(let r=0,n=t.length;r<n;++r){let n=t[r];s(n)?e.push(n):(t[i]=n,++i)}return $h.wh(t,i),e},$h.Rh=function(t,s){const e=t.length;let i=0;for(let e=0,r=t.length;e<r;++e){let r=t[e];s.has(r)||(t[i++]=r)}return $h.wh(t,i),e-i},$h.Ah=function(t,s){return t===Math.floor(t)&&t>=0&&t<s.length},$h.Eh=function(t,s){if(!$h.Ah(t,s))throw new RangeError("array index out of bounds")},$h.Oh=function(t){return t.slice()},$h.Fh=function(t,s){let e=[];for(let i of t)if($h.pi(i)){let t=s(i);if(!t)throw new Error("missing clone");if(t.constructor!==i.constructor)throw new Error("object is not a clone");e.push(t)}else $h.Ci(i)?e.push($h.Fh(i,s)):e.push(i);return e},$h.Dh=function(t){let s=[];for(let e of t)s.push(e.slice());return s},$h.Lh=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},$h.kh=function(t,s,e){const i=new Set;for(const r of t.values())s(r)&&(e?i.add(e(r)):i.add(r));return i},$h.Nh=function(t,s){return t.union?t.union(s):new Set([...t,...s])},$h.Bh=function(t,s){for(const e of s)t.add(e);return t},$h.$h=function(t){for(let s of t)return s;return null},$h.xor=function(t,s){return!t!=!s},$h.compare=function(t,s,e){switch(s){case 0:return t===e;case 1:return t!==e;case 2:return t<e;case 3:return t<=e;case 4:return t>e;case 5:return t>=e;default:return!1}},$h.Uh=function(t){for(let s in t)if(t.hasOwnProperty(s))return!0;return!1},$h.Vh=function(t,s){return t.length?new Promise((e,i)=>{const r=[];let n=0,h=!1;for(let o=0,a=t.length;o<a;++o)r.push(void 0),t[o].then(i=>{h||(r[o]=i,++n,n===t.length?e(r):s(n,t.length))}).catch(t=>{h=!0,i(t)})}):Promise.resolve([])};let Wh=[];$h.Wh=function(t){Wh.push(t)},$h.zh=function(){let t=0;for(let s of Wh)t+=s();return Math.floor(t)};let zh=1;const jh=new Map,Hh=new MessageChannel;Hh.port2.onmessage=function(t){const s=t.data,e=jh.get(s);jh.delete(s),e&&e(performance.now())},$h.jh=function(t){const s=zh++;return jh.set(s,t),Hh.port1.postMessage(s),s},$h.Hh=function(t){jh.delete(t)},$h.qh=$h.jh,$h.Jh=function(){return new Promise(t=>$h.qh(t))};const qh=new Set;$h.Yh=function(t){const s=self.requestAnimationFrame(async e=>{await $h.Jh(),qh.has(s)&&(qh.delete(s),t(e))});return qh.add(s),s},$h.Xh=function(t){qh.has(t)&&(self.cancelAnimationFrame(t),qh.delete(t))}}{const Yh=self.Gs;Yh.Kh=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},Yh.Zh=function(t){return!Yh.Kh(t)},Yh.Qh=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} ${t.statusText}`)},Yh.so=function(t,s){return fetch(t,s).then(t=>(Yh.Qh(t),t))},Yh.eo=function(t){return Yh.so(t).then(t=>t.text())},Yh.io=function(t){return Yh.so(t).then(t=>t.json())},Yh.ro=function(t){return Yh.so(t).then(t=>t.blob())},Yh.no=function(t){return Yh.so(t).then(t=>t.arrayBuffer())},Yh.ho=function(t){return new Promise((s,e)=>{const i=new Image;i.onload=()=>s(i),i.onerror=t=>e(t),i.src=t})},Yh.oo=function(t){return"function"==typeof t.arrayBuffer?t.arrayBuffer():new Promise((s,e)=>{const i=new FileReader;i.onload=()=>s(i.result),i.onerror=()=>e(i.error),i.readAsArrayBuffer(t)})},Yh.ao=function(t){return"function"==typeof t.text?t.text():new Promise((s,e)=>{const i=new FileReader;i.onload=()=>s(i.result),i.onerror=()=>e(i.error),i.readAsText(t)})},Yh.lo=function(t){return Yh.ao(t).then(t=>JSON.parse(t))},Yh.uo=async function(t,s){let e=URL.createObjectURL(t);try{const t=await Yh.ho(e);return URL.revokeObjectURL(e),e="",s&&"function"==typeof t.decode&&await t.decode(),t}finally{e&&URL.revokeObjectURL(e)}},Yh.co=function(t,s){if("undefined"!=typeof document&&"function"==typeof document.createElement){const e=document.createElement("canvas");return e.width=t,e.height=s,e}return new OffscreenCanvas(t,s)},Yh.fo=function(t,s,e){if("number"!=typeof e&&(e=1),s=s||"image/png",e=Yh.Zr(e,0,1),t.convertToBlob)return t.convertToBlob({type:s,quality:e});if(t.toBlob)return new Promise(i=>t.toBlob(i,s,e));throw new Error("could not convert canvas to blob")},Yh.do=function(t,s,e){const i=Yh.co(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),Yh.fo(i,s,e)},Yh.po=function(t,s,e){if(Yh.Pe.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>Yh.do(t,s,e));if(Yh.Pe.ImageBitmap)return createImageBitmap(t).then(t=>Yh.do(t,s,e));{const i=Yh.co(t.width,t.height);return i.getContext("2d").putImageData(t,0,0),Yh.fo(i,s,e)}},Yh.mo=function(t,s){t.clear();for(const e of s)t.add(e)},Yh.yo=function(t){const s=Object.create(null);for(const[e,i]of t.entries())s[e]=i;return s},Yh.So=function(t,s){s.clear();for(const[e,i]of Object.entries(t))s.set(e,i)},Yh.wo=function t(s){if("object"==typeof s&&null!==s){if(s instanceof Set)return{_c3type_:"set",data:[...s].map(s=>t(s))};if(s instanceof Map)return{_c3type_:"map",data:[...s].map(s=>[s[0],t(s[1])])};{const e=Object.create(null);for(const[i,r]of Object.entries(s))e[i]=t(r);return e}}return s},Yh.vo=function t(s){if("object"==typeof s&null!==s){if("set"===s._c3type_)return new Set(s.data.map(s=>t(s)));if("map"===s._c3type_)return new Map(s.data.map(s=>[s[0],t(s[1])]));{const e=Object.create(null);for(const[i,r]of Object.entries(s))e[i]=t(r);return e}}return s},Yh.bo=function(t){if(t.startsWith("--"))return t;let s="",e=!1,i=0;for(const r of t)"-"===r?i>0&&(e=!0):e?(s+=r.toUpperCase(),e=!1):s+=r,++i;return s},Yh.xo=function(t){return"object"==typeof t&&"function"==typeof t.next},Yh.Co=function(t,s){const e=[];if("function"==typeof s)for(let i=0;i<t;++i)e.push(s());else for(let i=0;i<t;++i)e.push(s);return e}}{let Xh=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},Kh=function(t,s,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+6*(s-t)*e:e<.5?s:e<2/3?t+(s-t)*(2/3-e)*6:t};padTwoDigits=Xh,hueToRGB=Kh;const Zh=self.Gs,Qh=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,to=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;Zh.To=class{constructor(t,s,e,i){this.Mo=NaN,this.Io=NaN,this.Go=NaN,this._o=NaN,this.Mo=0,this.Io=0,this.Go=0,this._o=0,t instanceof Zh.To?this.set(t):this.Po(t||0,s||0,e||0,i||0)}Ro(t,s,e){return this.Mo=+t,this.Io=+s,this.Go=+e,this.Zr(),this}Po(t,s,e,i){return this.Mo=+t,this.Io=+s,this.Go=+e,this._o=+i,this.Zr(),this}set(t){return this.Mo=t.Mo,this.Io=t.Io,this.Go=t.Go,this._o=t._o,this}S(t){return this.set(t)}add(t){this.Mo+=t.Mo,this.Io+=t.Io,this.Go+=t.Go,this._o+=t._o,this.Zr()}Ao(t,s,e,i=0){this.Mo+=+t,this.Io+=+s,this.Go+=+e,this._o+=+i,this.Zr()}Eo(t){this.Oo(Math.max(this.Mo,t.Mo)-Math.min(this.Mo,t.Mo)),this.Fo(Math.max(this.Io,t.Io)-Math.min(this.Io,t.Io)),this.Do(Math.max(this.Go,t.Go)-Math.min(this.Go,t.Go)),this.Lo(Math.max(this._o,t._o)-Math.min(this._o,t._o)),this.Zr()}ko(t){this.Mo=t.Mo,this.Io=t.Io,this.Go=t.Go}Oo(t){this.Mo=Zh.Zr(+t,0,1)}No(){return this.Mo}Fo(t){this.Io=Zh.Zr(+t,0,1)}Bo(){return this.Io}Do(t){this.Go=Zh.Zr(+t,0,1)}$o(){return this.Go}Lo(t){this._o=Zh.Zr(+t,0,1)}Uo(){return this._o}clone(){return Zh.Hr(Zh.To,this.Mo,this.Io,this.Go,this._o)}toArray(){return[this.Mo,this.Io,this.Go,this._o]}Vo(){return new Float64Array(this.toArray())}Wo(t,s){t[s++]=this.Mo,t[s++]=this.Io,t[s++]=this.Go,t[s]=this._o}zo(t,s){const e=this.Mo,i=this.Io,r=this.Go,n=this._o;for(let h=0;h<4;++h)t[s++]=e,t[s++]=i,t[s++]=r,t[s++]=n}jo(t,s){t[s++]=this.Mo,t[s++]=this.Io,t[s]=this.Go}equals(t){return this.Mo===t.Mo&&this.Io===t.Io&&this.Go===t.Go&&this._o===t._o}Ho(t){return this.Mo===t.Mo&&this.Io===t.Io&&this.Go===t.Go}qo(t,s,e){return this.Mo===t&&this.Io===s&&this.Go===e}Jo(t,s,e,i){return this.Mo===t&&this.Io===s&&this.Go===e&&this._o===i}Yo(t,s){return t[s]===Math.fround(this.Mo)&&t[s+1]===Math.fround(this.Io)&&t[s+2]===Math.fround(this.Go)&&t[s+3]===Math.fround(this._o)}Xo(t,s){return t[s]===Math.fround(this.Mo)&&t[s+1]===Math.fround(this.Io)&&t[s+2]===Math.fround(this.Go)}multiply(t){this.Mo*=t.Mo,this.Io*=t.Io,this.Go*=t.Go,this._o*=t._o}Ko(t){this.Mo*=t,this.Io*=t,this.Go*=t,this._o*=t}Zo(){return this.Mo*=this._o,this.Io*=this._o,this.Go*=this._o,this}Qo(){return this.Mo/=this._o,this.Io/=this._o,this.Go/=this._o,this}Zr(){return this.Mo=Zh.Zr(this.Mo,0,1),this.Io=Zh.Zr(this.Io,0,1),this.Go=Zh.Zr(this.Go,0,1),this._o=Zh.Zr(this._o,0,1),this}ta(t){this.Mo=Zh.Rn(t),this.Io=Zh.An(t),this.Go=Zh.En(t),this._o=Zh.On(t)}sa(t,s,e){return`rgb(${100*(Zh.Ke(t)?t:this.No())}%, ${100*(Zh.Ke(s)?s:this.Bo())}%, ${100*(Zh.Ke(e)?e:this.$o())}%)`}ea(t,s,e,i){return`rgba(${100*(Zh.Ke(t)?t:this.No())}%, ${100*(Zh.Ke(s)?s:this.Bo())}%, ${100*(Zh.Ke(e)?e:this.$o())}%, ${Zh.Ke(i)?i:this.Uo()})`}ia(t=!1){const s=Math.round(255*this.No()),e=Math.round(255*this.Bo()),i=Math.round(255*this.$o());let r="#"+Xh(s.toString(16))+Xh(e.toString(16))+Xh(i.toString(16));return t&&(r+=Xh(Math.round(255*this.Uo()).toString(16))),r}ra(t){if("string"!=typeof t)return!1;let s,e,i,r;if("#"===(t=t.trim()).charAt(0)&&(t=t.substr(1)),3===t.length||4===t.length)s=parseInt(t[0],16)/15,e=parseInt(t[1],16)/15,i=parseInt(t[2],16)/15,4===t.length&&(r=parseInt(t[3],16)/15);else{if(6!==t.length&&8!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,e=parseInt(t.substr(2,2),16)/255,i=parseInt(t.substr(4,2),16)/255,8===t.length&&(r=parseInt(t.substr(6,2),16)/255)}return!!(Number.isFinite(s)&&Number.isFinite(e)&&Number.isFinite(i))&&(this.Ro(s,e,i),Number.isFinite(r)?this.Lo(r):this.Lo(1),!0)}na(){return`${Math.round(255*this.No())}, ${Math.round(255*this.Bo())}, ${Math.round(255*this.$o())}`}ha(){return[Math.round(255*this.No()),Math.round(255*this.Bo()),Math.round(255*this.$o())]}oa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const e=parseInt(s[0].trim(),10)/255,i=parseInt(s[1].trim(),10)/255,r=parseInt(s[2].trim(),10)/255;return isFinite(e)&&this.Oo(e),isFinite(i)&&this.Fo(i),isFinite(r)&&this.Do(r),this.Lo(1),!0}aa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const e=parseInt(s[0].trim(),10)/100,i=parseInt(s[1].trim(),10)/100,r=parseInt(s[2].trim(),10)/100;return isFinite(e)&&this.Oo(e),isFinite(i)&&this.Fo(i),isFinite(r)&&this.Do(r),this.Lo(1),!0}la(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const e=parseInt(s[0].trim(),10)/255,i=parseInt(s[1].trim(),10)/255,r=parseInt(s[2].trim(),10)/255,n=parseFloat(s[3].trim());return isFinite(e)&&this.Oo(e),isFinite(i)&&this.Fo(i),isFinite(r)&&this.Do(r),isFinite(n)&&this.Lo(n),!0}ua(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const e=parseInt(s[0].trim(),10)/100,i=parseInt(s[1].trim(),10)/100,r=parseInt(s[2].trim(),10)/100,n=parseFloat(s[3].trim());return isFinite(e)&&this.Oo(e),isFinite(i)&&this.Fo(i),isFinite(r)&&this.Do(r),isFinite(n)&&this.Lo(n),!0}ca(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.aa(t):this.oa(t);if(t.startsWith("rgba("))return t.includes("%")?this.ua(t):this.la(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.fa(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.aa(t):4===s.length&&this.ua(t):3===s.length?this.oa(t):4===s.length&&this.la(t)}}return this.ra(t)}toJSON(){return[this.Mo,this.Io,this.Go,this._o]}da(t,s,e,i){let r,n,h;if(t%=360,s=Zh.Zr(s,0,100),e=Zh.Zr(e,0,100),i=Zh.Zr(i,0,1),t/=360,e/=100,0==(s/=100))r=n=h=e;else{const i=e<.5?e*(1+s):e+s-e*s,o=2*e-i;r=Kh(o,i,t+1/3),n=Kh(o,i,t),h=Kh(o,i,t-1/3)}return this.Oo(r),this.Fo(n),this.Do(h),this.Lo(i),this}fa(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),e=Qh.exec(s),i=to.exec(s);return e&&4===e.length?(this.da(+e[1],+e[2],+e[3],1),!0):!(!i||5!==i.length||(this.da(+e[1],+e[2],+e[3],+e[4]),0))}pa(){const t=this.Mo,s=this.Io,e=this.Go,i=this._o;return`hsla(${Zh.To.ma(t,s,e)}, ${Zh.To.ga(t,s,e)}%, ${Zh.To.ya(t,s,e)}%, ${i})`}Sa(){const t=this.Mo,s=this.Io,e=this.Go;return[Zh.To.ma(t,s,e),Zh.To.ga(t,s,e),Zh.To.ya(t,s,e),this._o]}wa(t){Array.isArray(t)&&(t.length<3||(this.Mo=t[0],this.Io=t[1],this.Go=t[2],t.length>=4?this._o=t[3]:this._o=1))}set r(t){this.Oo(t)}get r(){return this.No()}set g(t){this.Fo(t)}get g(){return this.Bo()}set b(t){this.Do(t)}get b(){return this.$o()}set a(t){this.Lo(t)}get a(){return this.Uo()}va(t,s){switch(t){case 0:this.Oo(s);break;case 1:this.Fo(s);break;case 2:this.Do(s);break;case 3:this.Lo(s);break;default:throw new RangeError("invalid color index")}}ba(t){switch(t){case 0:return this.No();case 1:return this.Bo();case 2:return this.$o();case 3:return this.Uo();default:throw new RangeError("invalid color index")}}static xa(t,s){let e,i;if(Array.isArray(t))e=new Zh.To,e.wa(t);else{if(!(t instanceof Zh.To))throw new Error("unexpected type");e=t}if(Array.isArray(s))i=new Zh.To,i.wa(s);else{if(!(s instanceof Zh.To))throw new Error("unexpected type");i=s}return e.equals(i)}static Ca(t,s){return Zh.Zr(Math.max(t,s)-Math.min(t,s),0,1)}static Ta(t,s){const e=new Zh.To;return e.Oo(Math.max(t.Mo,s.Mo)-Math.min(t.Mo,s.Mo)),e.Fo(Math.max(t.Io,s.Io)-Math.min(t.Io,s.Io)),e.Do(Math.max(t.Go,s.Go)-Math.min(t.Go,s.Go)),e.Lo(Math.max(t._o,s._o)-Math.min(t._o,s._o)),e}static Ma(t,s){const e=new Zh.To(0,0,0,1);return e.Oo(Math.max(t.Mo,s.Mo)-Math.min(t.Mo,s.Mo)),e.Fo(Math.max(t.Io,s.Io)-Math.min(t.Io,s.Io)),e.Do(Math.max(t.Go,s.Go)-Math.min(t.Go,s.Go)),e}static ma(t,s,e){const i=Math.max(t,s,e),r=Math.min(t,s,e);if(i===r)return 0;let n=0;switch(i){case t:n=(s-e)/(i-r)+(s<e?6:0);break;case s:n=(e-t)/(i-r)+2;break;case e:n=(t-s)/(i-r)+4}return Math.round(n/6*360)}static ga(t,s,e){const i=Math.max(t,s,e),r=Math.min(t,s,e);if(i===r)return 0;const n=i-r,h=(i+r)/2>.5?n/(2-i-r):n/(i+r);return Math.round(100*h)}static ya(t,s,e){const i=Math.max(t,s,e),r=(i+Math.min(t,s,e))/2;return i?Math.round(100*r):0}},Zh.To.Ia=Object.freeze(Zh.Hr(Zh.To,1,1,1,1)),Zh.To.Ga=Object.freeze(Zh.Hr(Zh.To,0,0,0,1)),Zh.To._a=Object.freeze(Zh.Hr(Zh.To,0,0,0,0))}{const so=self.Gs;so.Pa=class{constructor(t,s){this.Ra=0,this.Aa=0,t instanceof so.Pa?this.S(t):this.set(t||0,s||0)}set(t,s){this.Ra=+t,this.Aa=+s}S(t){this.Ra=t.Ra,this.Aa=t.Aa}equals(t){return this.Ra===t.Ra&&this.Aa===t.Aa}Ea(t,s){return this.Ra===t&&this.Aa===s}Yo(t,s){return t[s]===Math.fround(this.Ra)&&t[s+1]===Math.fround(this.Aa)}Oa(t){this.Ra=+t}Fa(){return this.Ra}Da(t){this.Aa=+t}La(){return this.Aa}toArray(){return[this.Ra,this.Aa]}Vo(){return new Float64Array(this.toArray())}Wo(t,s){t[s++]=this.Ra,t[s]=this.Aa}offset(t,s){this.Ra+=+t,this.Aa+=+s}scale(t,s){this.Ra*=t,this.Aa*=s}wt(t,s){this.Ra/=t,this.Aa/=s}round(){this.Ra=Math.round(this.Ra),this.Aa=Math.round(this.Aa)}floor(){this.Ra=Math.floor(this.Ra),this.Aa=Math.floor(this.Aa)}ceil(){this.Ra=Math.ceil(this.Ra),this.Aa=Math.ceil(this.Aa)}angle(){return so.an(0,0,this.Ra,this.Aa)}ka(){return this.Ra*this.Ra+this.Aa*this.Aa}length(){return so.en(this.Ra,this.Aa)}Na(t,s){const e=this.Ra*s-this.Aa*t;this.Aa=this.Aa*s+this.Ra*t,this.Ra=e}rotate(t){0!==t&&this.Na(Math.sin(t),Math.cos(t))}Ba(t,s,e){0===t||s===this.Ra&&e===this.Aa||(this.Ra-=s,this.Aa-=e,this.Na(Math.sin(t),Math.cos(t)),this.Ra+=+s,this.Aa+=+e)}move(t,s){0!==s&&(this.Ra+=Math.cos(t)*s,this.Aa+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.Ra/=t,this.Aa/=t)}Zr(t,s){this.Ra=so.Zr(this.Ra,t,s),this.Aa=so.Zr(this.Aa,t,s)}Mt(t){return this.Ra*t.Ra+this.Aa*t.Aa}reverse(){this.Ra=-this.Ra,this.Aa=-this.Aa}$a(){let t=this.Ra;return this.Ra=this.Aa,this.Aa=-t,this}}}{const eo=self.Gs;eo.Rect=class{constructor(t,s,e,i){this.Ua=NaN,this.Va=NaN,this.Wa=NaN,this.za=NaN,this.Ua=0,this.Va=0,this.Wa=0,this.za=0,t instanceof eo.Rect?this.S(t):this.set(t||0,s||0,e||0,i||0)}set(t,s,e,i){this.Ua=+t,this.Va=+s,this.Wa=+e,this.za=+i}ja(t,s,e,i){t=+t,s=+s,this.Ua=t,this.Va=s,this.Wa=t+ +e,this.za=s+ +i}S(t){this.Ua=+t.Ua,this.Va=+t.Va,this.Wa=+t.Wa,this.za=+t.za}clone(){return new eo.Rect(this.Ua,this.Va,this.Wa,this.za)}static Ha(t,s){const e=new eo.Rect;return e.qa(Math.min(t.Ua,s.Ua)),e.Ja(Math.min(t.Va,s.Va)),e.Ya(Math.max(t.Wa,s.Wa)),e.Xa(Math.max(t.za,s.za)),e}static Ka(t){return new eo.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.Ua===t.Ua&&this.Va===t.Va&&this.Wa===t.Wa&&this.za===t.za}Za(t,s,e,i){return this.Ua===t&&this.Va===s&&this.width()===e&&this.height()===i}Yo(t,s){return t[s]===Math.fround(this.Ua)&&t[s+1]===Math.fround(this.Va)&&t[s+2]===Math.fround(this.Wa)&&t[s+3]===Math.fround(this.za)}qa(t){this.Ua=+t}Qa(){return this.Ua}Ja(t){this.Va=+t}tl(){return this.Va}Ya(t){this.Wa=+t}sl(){return this.Wa}Xa(t){this.za=+t}el(){return this.za}toArray(){return[this.Ua,this.Va,this.Wa,this.za]}Vo(){return new Float64Array(this.toArray())}il(){return new DOMRect(this.Ua,this.Va,this.width(),this.height())}static rl(t){return eo.Hr(eo.Rect,t.left,t.top,t.right,t.bottom)}Wo(t,s){t[s++]=this.Ua,t[s++]=this.Va,t[s++]=this.Wa,t[s]=this.za}nl(t,s){t[s++]=this.Ua,t[s++]=this.Va,t[s++]=this.Wa,t[s++]=this.Va,t[s++]=this.Wa,t[s++]=this.za,t[s++]=this.Ua,t[s]=this.za}hl(t,s,e){t[s++]=this.Ua,t[s++]=this.Va,t[s++]=e,t[s++]=this.Wa,t[s++]=this.Va,t[s++]=e,t[s++]=this.Wa,t[s++]=this.za,t[s++]=e,t[s++]=this.Ua,t[s++]=this.za,t[s]=e}width(){return this.Wa-this.Ua}height(){return this.za-this.Va}ol(){return(this.Ua+this.Wa)/2}al(){return(this.Va+this.za)/2}offset(t,s){t=+t,s=+s,this.Ua+=t,this.Va+=s,this.Wa+=t,this.za+=s}offsetLeft(t){this.Ua+=+t}offsetTop(t){this.Va+=+t}ll(t){this.Wa+=+t}ul(t){this.za+=+t}cl(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.Va<this.za?this.Ua<this.Wa?this.za=this.Va+this.width():this.za=this.Va-this.width():this.Ua<this.Wa?this.za=this.Va-this.width():this.za=this.Va+this.width()}fl(t,s){t=+t,s=+s,this.Ua-=t,this.Va-=s,this.Wa+=t,this.za+=s}dl(t,s){t=+t,s=+s,this.Ua+=t,this.Va+=s,this.Wa-=t,this.za-=s}multiply(t,s){this.Ua*=t,this.Va*=s,this.Wa*=t,this.za*=s}wt(t,s){this.Ua/=t,this.Va/=s,this.Wa/=t,this.za/=s}pl(t){this.Ua=+t-this.Ua,this.Wa=+t-this.Wa}ml(t){this.Va=+t-this.Va,this.za=+t-this.za}gl(t,s){const e=this.width(),i=this.height(),r=this.Qa()+e*t,n=this.tl()+i*s;this.ja(r-i*s,n-e*t,i,e)}yl(){const t=this.Ua;this.Ua=this.Wa,this.Wa=t}Sl(){const t=this.Va;this.Va=this.za,this.za=t}wl(t){const s=this.Va;this.Va=+t-this.za,this.za=+t-s}round(){this.Ua=Math.round(this.Ua),this.Va=Math.round(this.Va),this.Wa=Math.round(this.Wa),this.za=Math.round(this.za)}vl(){this.Ua=Math.ceil(this.Ua),this.Va=Math.ceil(this.Va),this.Wa=Math.floor(this.Wa),this.za=Math.floor(this.za)}bl(){this.Ua=Math.floor(this.Ua),this.Va=Math.floor(this.Va),this.Wa=Math.ceil(this.Wa),this.za=Math.ceil(this.za)}floor(){this.Ua=Math.floor(this.Ua),this.Va=Math.floor(this.Va),this.Wa=Math.floor(this.Wa),this.za=Math.floor(this.za)}ceil(){this.Ua=Math.ceil(this.Ua),this.Va=Math.ceil(this.Va),this.Wa=Math.ceil(this.Wa),this.za=Math.ceil(this.za)}Zr(t,s,e,i){this.Ua=Math.max(this.Ua,+t),this.Va=Math.max(this.Va,+s),this.Wa=Math.min(this.Wa,+e),this.za=Math.min(this.za,+i)}xl(t,s,e,i){t=+t,s=+s,e=+e,i=+i,this.Ua=eo.Zr(this.Ua,t,e),this.Va=eo.Zr(this.Va,s,i),this.Wa=eo.Zr(this.Wa,t,e),this.za=eo.Zr(this.za,s,i)}normalize(){this.Ua>this.Wa&&this.yl(),this.Va>this.za&&this.Sl()}Cl(t){return!(t.Wa<this.Ua||t.za<this.Va||t.Ua>this.Wa||t.Va>this.za)}Tl(t,s,e){return!(t.Wa+s<this.Ua||t.za+e<this.Va||t.Ua+s>this.Wa||t.Va+e>this.za)}Ml(t,s){return t>=this.Ua&&t<=this.Wa&&s>=this.Va&&s<=this.za}Il(t){return t.Ua>=this.Ua&&t.Va>=this.Va&&t.Wa<=this.Wa&&t.za<=this.za}Gl(t){t.Ua<this.Ua&&(this.Ua=+t.Ua),t.Va<this.Va&&(this.Va=+t.Va),t.Wa>this.Wa&&(this.Wa=+t.Wa),t.za>this.za&&(this.za=+t.za)}_l(t){this.Ua=eo.Gt(t.Ua,t.Wa,this.Ua),this.Va=eo.Gt(t.Va,t.za,this.Va),this.Wa=eo.Gt(t.Ua,t.Wa,this.Wa),this.za=eo.Gt(t.Va,t.za,this.za)}}}{const io=self.Gs;io.Pl=class{constructor(t,s,e,i,r,n,h,o){this.Rl=NaN,this.Al=NaN,this.El=NaN,this.Ol=NaN,this.Fl=NaN,this.Dl=NaN,this.Ll=NaN,this.kl=NaN,this.Rl=0,this.Al=0,this.El=0,this.Ol=0,this.Fl=0,this.Dl=0,this.Ll=0,this.kl=0,t instanceof io.Pl?this.S(t):this.set(t||0,s||0,e||0,i||0,r||0,n||0,h||0,o||0)}set(t,s,e,i,r,n,h,o){this.Rl=+t,this.Al=+s,this.El=+e,this.Ol=+i,this.Fl=+r,this.Dl=+n,this.Ll=+h,this.kl=+o}Nl(t,s,e,i){this.set(t,s,e,s,e,i,t,i)}S(t){this.Rl=t.Rl,this.Al=t.Al,this.El=t.El,this.Ol=t.Ol,this.Fl=t.Fl,this.Dl=t.Dl,this.Ll=t.Ll,this.kl=t.kl}equals(t){return this.Rl===t.Rl&&this.Al===t.Al&&this.El===t.El&&this.Ol===t.Ol&&this.Fl===t.Fl&&this.Dl===t.Dl&&this.Ll===t.Ll&&this.kl===t.kl}Bl(t){this.Rl=+t}Bn(){return this.Rl}$l(t){this.Al=+t}$n(){return this.Al}Ul(t){this.El=+t}Un(){return this.El}Vl(t){this.Ol=+t}Vn(){return this.Ol}Wl(t){this.Fl=+t}Wn(){return this.Fl}zl(t){this.Dl=+t}zn(){return this.Dl}jl(t){this.Ll=+t}jn(){return this.Ll}Hl(t){this.kl=+t}Hn(){return this.kl}ql(){return new DOMQuad(new DOMPoint(this.Rl,this.Al),new DOMPoint(this.El,this.Ol),new DOMPoint(this.Fl,this.Dl),new DOMPoint(this.Ll,this.kl))}static Jl(t){return io.Hr(io.Pl,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.Rl,this.Al,this.El,this.Ol,this.Fl,this.Dl,this.Ll,this.kl]}Vo(){return new Float64Array(this.toArray())}Wo(t,s){t[s++]=this.Rl,t[s++]=this.Al,t[s++]=this.El,t[s++]=this.Ol,t[s++]=this.Fl,t[s++]=this.Dl,t[s++]=this.Ll,t[s]=this.kl}Yl(t,s,e){t[s++]=this.Rl,t[s++]=this.Al,t[s++]=e,t[s++]=this.El,t[s++]=this.Ol,t[s++]=e,t[s++]=this.Fl,t[s++]=this.Dl,t[s++]=e,t[s++]=this.Ll,t[s++]=this.kl,t[s]=e}offset(t,s){t=+t,s=+s,this.Rl+=t,this.Al+=s,this.El+=t,this.Ol+=s,this.Fl+=t,this.Dl+=s,this.Ll+=t,this.kl+=s}round(){this.Rl=Math.round(this.Rl),this.Al=Math.round(this.Al),this.El=Math.round(this.El),this.Ol=Math.round(this.Ol),this.Fl=Math.round(this.Fl),this.Dl=Math.round(this.Dl),this.Ll=Math.round(this.Ll),this.kl=Math.round(this.kl)}floor(){this.Rl=Math.floor(this.Rl),this.Al=Math.floor(this.Al),this.El=Math.floor(this.El),this.Ol=Math.floor(this.Ol),this.Fl=Math.floor(this.Fl),this.Dl=Math.floor(this.Dl),this.Ll=Math.floor(this.Ll),this.kl=Math.floor(this.kl)}ceil(){this.Rl=Math.ceil(this.Rl),this.Al=Math.ceil(this.Al),this.El=Math.ceil(this.El),this.Ol=Math.ceil(this.Ol),this.Fl=Math.ceil(this.Fl),this.Dl=Math.ceil(this.Dl),this.Ll=Math.ceil(this.Ll),this.kl=Math.ceil(this.kl)}Xl(t){this.Rl=t.Ua,this.Al=t.Va,this.El=t.Wa,this.Ol=t.Va,this.Fl=t.Wa,this.Dl=t.za,this.Ll=t.Ua,this.kl=t.za}Kl(t,s){0===s?this.Xl(t):this.Zl(t,Math.sin(s),Math.cos(s))}Zl(t,s,e){const i=t.Ua*s,r=t.Va*s,n=t.Wa*s,h=t.za*s,o=t.Ua*e,a=t.Va*e,l=t.Wa*e,u=t.za*e;this.Rl=o-r,this.Al=a+i,this.El=l-r,this.Ol=a+n,this.Fl=l-h,this.Dl=u+n,this.Ll=o-h,this.kl=u+i}Ql(t){t.set(Math.min(this.Rl,this.El,this.Fl,this.Ll),Math.min(this.Al,this.Ol,this.Dl,this.kl),Math.max(this.Rl,this.El,this.Fl,this.Ll),Math.max(this.Al,this.Ol,this.Dl,this.kl))}Ml(t,s){let e=this.El-this.Rl,i=this.Ol-this.Al;const r=this.Fl-this.Rl,n=this.Dl-this.Al,h=t-this.Rl,o=s-this.Al;let a=e*e+i*i,l=e*r+i*n,u=e*h+i*o;const c=r*r+n*n,f=r*h+n*o;let d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return p>=0&&m>0&&p+m<1||(e=this.Ll-this.Rl,i=this.kl-this.Al,a=e*e+i*i,l=e*r+i*n,u=e*h+i*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d,p>=0&&m>0&&p+m<1)}ol(){return(this.Rl+this.El+this.Fl+this.Ll)/4}al(){return(this.Al+this.Ol+this.Dl+this.kl)/4}tu(t,s,e,i){return!(!this.Ml(t,s)&&!this.Ml(e,i))||io.Nn(t,s,e,i,this)}su(t){let s=t.ol(),e=t.al();if(this.Ml(s,e))return!0;if(s=this.ol(),e=this.al(),t.Ml(s,e))return!0;const i=this.Rl,r=this.Al,n=this.El,h=this.Ol,o=this.Fl,a=this.Dl,l=this.Ll,u=this.kl;return io.Nn(i,r,n,h,t)||io.Nn(n,h,o,a,t)||io.Nn(o,a,l,u,t)||io.Nn(l,u,i,r,t)}eu(){const t=this.Rl,s=this.Al;this.Rl=this.El,this.Al=this.Ol,this.El=this.Fl,this.Ol=this.Dl,this.Fl=this.Ll,this.Dl=this.kl,this.Ll=t,this.kl=s}iu(){this.ru(0,2),this.ru(1,3),this.ru(6,4),this.ru(7,5)}nu(){this.ru(0,6),this.ru(1,7),this.ru(2,4),this.ru(3,5)}hu(){this.ru(2,6),this.ru(3,7)}ru(t,s){const e=this.ou(t);this.au(t,this.ou(s)),this.au(s,e)}ou(t){switch(t){case 0:return this.Rl;case 1:return this.Al;case 2:return this.El;case 3:return this.Ol;case 4:return this.Fl;case 5:return this.Dl;case 6:return this.Ll;case 7:return this.kl;default:throw new RangeError("invalid quad point index")}}au(t,s){switch(s=+s,t){case 0:this.Rl=s;break;case 1:this.Al=s;break;case 2:this.El=s;break;case 3:this.Ol=s;break;case 4:this.Fl=s;break;case 5:this.Dl=s;break;case 6:this.Ll=s;break;case 7:this.kl=s;break;default:throw new RangeError("invalid quad point index")}}wt(t,s){this.Rl/=t,this.Al/=s,this.El/=t,this.Ol/=s,this.Fl/=t,this.Dl/=s,this.Ll/=t,this.kl/=s}}}{const ro=self.Gs,no=self.assert,ho=[0,0,1,0,1,1,0,1],oo=ro.Hr(ro.Pl);ro.lu=class extends ro.zr{constructor(t,s=!0){super(),t||(t=ho),this.uu=Float64Array.from(t),this.cu=new ro.Rect,this.fu=!0,this.du=s}qr(){}pu(){return this.uu}mu(){return this.uu.length/2}gu(t){this.uu.length===t.length?this.uu.set(t):this.uu=Float64Array.from(t),this.fu=!0}yu(){this.gu(ho)}S(t){this.gu(t.uu)}Su(){this.fu=!0}wu(){if(!this.fu)return;const t=this.uu;let s=t[0],e=t[1],i=s,r=e;for(let n=0,h=t.length;n<h;n+=2){const h=t[n],o=t[n+1];h<s&&(s=h),h>i&&(i=h),o<e&&(e=o),o>r&&(r=o)}this.cu.set(s,e,i,r),this.fu=!1}Xl(t,s,e){let i=this.uu;8!==i.length&&(i=new Float64Array(8),this.uu=i),i[0]=t.Qa()-s,i[1]=t.tl()-e,i[2]=t.sl()-s,i[3]=t.tl()-e,i[4]=t.sl()-s,i[5]=t.el()-e,i[6]=t.Qa()-s,i[7]=t.el()-e,this.cu.S(t),0===s&&0===e||this.cu.offset(-s,-e),this.fu=!1}vu(t,s,e){oo.S(t),oo.offset(s,e),this.gu(oo.toArray()),this.fu=!0}transform(t,s,e){let i=0,r=1;0!==e&&(i=Math.sin(e),r=Math.cos(e)),this.bu(t,s,i,r)}bu(t,s,e,i){const r=this.uu;for(let n=0,h=r.length;n<h;n+=2){const h=n+1,o=r[n]*t,a=r[h]*s;r[n]=o*i-a*e,r[h]=a*i+o*e}this.fu=!0}offset(t,s){const e=this.uu;for(let i=0,r=e.length;i<r;i+=2)e[i]+=t,e[i+1]+=s}Ml(t,s){const e=this.uu;if(t===e[0]&&s===e[1])return!0;this.wu();const i=this.cu,r=i.Qa()-110,n=i.tl()-101,h=i.sl()+131,o=i.el()+120;let a=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0;r<t?(a=r,u=t):(a=t,u=r),n<s?(l=n,c=s):(l=s,c=n),h<t?(f=h,p=t):(f=t,p=h),o<s?(d=o,m=s):(d=s,m=o);let g=0,y=0;for(let i=0,S=e.length;i<S;i+=2){const w=(i+2)%S,v=e[i],b=e[i+1],x=e[w],C=e[w+1];ro.kn(r,n,t,s,a,u,l,c,v,b,x,C)&&++g,ro.kn(h,o,t,s,f,p,d,m,v,b,x,C)&&++y}return g%2==1||y%2==1}xu(t,s,e){const i=t.uu,r=this.uu;if(this.Ml(i[0]+s,i[1]+e))return!0;if(t.Ml(r[0]-s,r[1]-e))return!0;for(let t=0,n=r.length;t<n;t+=2){const h=(t+2)%n,o=r[t],a=r[t+1],l=r[h],u=r[h+1];let c=0,f=0,d=0,p=0;o<l?(c=o,d=l):(c=l,d=o),a<u?(f=a,p=u):(f=u,p=a);for(let t=0,r=i.length;t<r;t+=2){const n=(t+2)%r,h=i[t]+s,m=i[t+1]+e,g=i[n]+s,y=i[n+1]+e;if(ro.kn(o,a,l,u,c,d,f,p,h,m,g,y))return!0}}return!1}tu(t,s,e,i,r,n){if(this.Ml(e-t,i-s))return!0;if(this.Ml(r-t,n-s))return!0;let h=0,o=0,a=0,l=0;e<r?(h=e,a=r):(h=r,a=e),i<n?(o=i,l=n):(o=n,l=i);const u=this.uu;for(let c=0,f=u.length;c<f;c+=2){const d=(c+2)%f,p=u[c]+t,m=u[c+1]+s,g=u[d]+t,y=u[d+1]+s;if(ro.kn(e,i,r,n,h,a,o,l,p,m,g,y))return!0}return!1}iu(t){const s=this.uu;for(let e=0,i=s.length;e<i;e+=2)s[e]=2*t-s[e];this.fu=!0}nu(t){const s=this.uu;for(let e=0,i=s.length;e<i;e+=2){const i=e+1;s[i]=2*t-s[i]}this.fu=!0}hu(){const t=this.uu;for(let s=0,e=t.length;s<e;s+=2){const e=s+1,i=t[s];t[s]=t[e],t[e]=i}this.fu=!0}Cu(){const t=this.uu;let s=0;for(let e=0,i=t.length;e<i;e+=2)s+=t[e];return s/this.mu()}Tu(){const t=this.uu;let s=0;for(let e=0,i=t.length;e<i;e+=2)s+=t[e+1];return s/this.mu()}Mu(){return this.uu}Iu(){return this.mu()}Gu(){return this.du}}}{const ao=self.Gs;ao._u=class extends ao.zr{constructor(t){if(super(),this.Pu=new Map,t)for(const[s,e,i]of t)this.Set(s,e,i)}qr(){this.Ru(),this.Pu=null}Au(){return 0===this.Pu.size}Ru(){const t=this.Pu;for(const s of t.values())s.clear();t.clear()}Set(t,s,e){const i=this.Pu;let r=i.get(t);r||(r=new Map,i.set(t,r)),r.set(s,e)}Hs(t,s){const e=this.Pu.get(t);return e?e.get(s):e}js(t,s){const e=this.Pu.get(t);return!!e&&e.has(s)}Eu(t,s){const e=this.Pu,i=e.get(t);if(!i)return!1;const r=i.delete(s);return r&&0===i.size&&e.delete(t),r}Ou(t){const s=this.Pu,e=s.get(t);e&&(e.clear(),s.delete(t));for(const[e,i]of s.entries())i.delete(t)&&0===i.size&&s.delete(e)}Fu(){let t=0;for(const s of this.Pu.values())t+=s.size;return t}*values(){for(const t of this.Pu.values())yield*t.values()}*Du(){for(const[t,s]of this.Pu.entries())for(const e of s.keys())yield[t,e]}*entries(){for(const[t,s]of this.Pu.entries())for(const[e,i]of s.entries())yield[t,e,i]}}}{const lo=self.Gs;lo.Lu=class extends lo.zr{constructor(){super(),this.ku=new Set,this.Nu=[],this.Bu=!1}qr(){this.Ru()}Ru(){this.ku.clear(),lo.bh(this.Nu),this.Bu=!1}$u(t){this.ku.has(t)||(this.ku.add(t),this.Bu||this.Nu.push(t))}js(t){return this.ku.has(t)}Eu(t){this.ku.delete(t)&&(this.Bu=!0)}Fu(){return this.ku.size}Au(){return 0===this.ku.size}Uu(){return this.Bu&&(this.Vu(),this.Bu=!1),this.Nu}Vu(){const t=this.Nu;lo.bh(t);for(const s of this.ku)t.push(s)}}}{const uo=self.Gs,co=new Map,fo=new Map,po=new Map,mo=new Map,go=new Map,yo=new Map,So=new Map,wo=new Map,vo=new Map;vo.set("linear","noease"),vo.set("default","noease");const bo=["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"],xo=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Co=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]);self.Wu=class t{constructor(){}static zu(){return"default"}static ju(){return"noease"}static Hu(t){return Co.get(t)}static qu(s,...e){let i,r;this.Ju(),s?(po.has(s)||po.set(s,new Map),i=po.get(s),r=[...i.keys()].filter(e=>!t.Yu(e,s)||t.Yu(e,s).transition.Xu())):(i=go,r=[...i.keys()]);const n=r.sort();return[...fo.keys()].concat(n).filter(t=>!e.includes(t))}static Ku(){this.Ju();const t=[...go.keys()];return t.sort(),[...fo.keys()].concat(t)}static Zu(){this.Ju();const t=[...go.keys()];return t.sort(),t}static Qu(t){for(const s of bo)if(self.lang(`ui.bars.timeline.eases.${s}`)===t)return!0;for(const s of xo)if(self.lang(`ui.bars.timeline.short-eases.${s}`)===t)return!0}static tc(t){return this.Ju(),[...fo.keys()].includes(t)}static sc(s){const e=vo.get(s);return e?co.get(e):t.tc(s)?co.get(s):So.has(s)?So.get(s):void 0}static ec(t){return this.Ju(),wo.get(t)}static rc(s,e){this.Ju();const i=t.sc(s);if(i)return i;if(!e)throw new Error("missing ease function");return po.get(e).get(s)}static Yu(t,s){this.Ju();const e=mo.get(s);if(e)return e.get(t)}static nc(s,e){return this.Ju(),!!t.sc(s)||!!po.get(e).get(s)}static hc(s){this.Ju();return t.sc(s)||go.get(s)}static oc(t){return this.Ju(),yo.get(t)}static ac(t){return this.Ju(),this.Ku()[t]}static lc(t,s){return this.Ju(),this.qu(s).indexOf(t)}static uc(t){return this.lc(t)}static Ju(){0===co.size&&(this.cc("default",()=>{}),this.cc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.cc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.cc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.cc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.cc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.cc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.cc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.cc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.cc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.cc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.cc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.cc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.cc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.cc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.cc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.cc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.cc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.cc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.cc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.cc("easeinquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.cc("easeoutquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.cc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.cc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.cc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.cc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.cc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.cc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.cc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.cc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.cc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.cc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.fc("cubicbezier",this.dc),this.fc("spline",this.mc))}static cc(s,e,i=!1){if("function"==typeof e)t.yc(s,e,"predefined");else{if(!uo.Ci(e))throw new Error("unexpected arguments");if(self.Sc){const r=uo.Hr(self.Sc,s,i);r.wc(e),t.yc(s,(t,s,e,i)=>r.vc(t,s,e,i),"predefined"),wo.set(s,r)}else{const r=uo.Hr(uo.bc,[s,e.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);r.xc(i),t.yc(s,(t,s,e,i)=>r.vc(t,s,e,i),"predefined")}}}static fc(s,e){t.yc(s,e,"private")}static Cc(s,e,i,r){this.Ju(),t.yc(s,e,"custom",i,r)}static Tc(t,s){if(this.tc(t))return;if([...So.keys()].includes(t))return;const e=po.get(s);e&&e.delete(t);const i=mo.get(s);i&&i.delete(t)}static yc(t,s,e,i,r){switch(e){case"predefined":co.set(t,s),fo.set(t,s);break;case"custom":i?(po.has(i)||po.set(i,new Map),mo.has(i)||mo.set(i,new Map),po.get(i).set(t,s),mo.get(i).set(t,r)):(go.set(t,s),yo.set(t,r));break;case"private":co.set(t,s),So.set(t,s);break;default:throw new Error("unexpected ease mode")}}static Mc(t,s,e,i){return 0===i?s:e*t/i+s}static dc(t,s,e,i,r){return s+3*t*(e-s)+3*t**2*(s+i-2*e)+t**3*(r-s+3*e-3*i)}static mc(t,s,e,i,r,n,h,o,a,l){if(i===r&&n===h)return t;const u=Do(t,s,i,n,o,l),c=Ro(e,r,h,a),f=Ao(e,r,h,a),d=Eo(e,r,h,a);return Oo(u,c,f,d)}static Ic(t,s,e,i){const r=[],n=Ro(t,s,e,i),h=Ao(t,s,e,i),o=Eo(t,s,e,i);for(let t=0;t<To;++t){const s=Oo(t*Mo,n,h,o);r.push(s)}return r}};const To=11,Mo=1/(To-1),Io=4,Go=.01,_o=1e-7,Po=10,Ro=(t,s,e,i)=>i-3*e+3*s-t,Ao=(t,s,e,i)=>3*e-6*s+3*t,Eo=(t,s,e,i)=>3*(s-t),Oo=(t,s,e,i)=>((s*t+e)*t+i)*t,Fo=(t,s,e,i)=>3*s*t*t+2*e*t+i,Do=(t,s,e,i,r,n)=>{if(1==t)return 1;let h=0,o=1,a=n[o],l=To-1;for(n[To-1];o!=l&&a<=t;)o++,a=n[o],h+=Mo;o--,a=n[o];let u=h+(t-a)/(n[o+1]-a)*Mo;const c=Ro(s,e,i,r),f=Ao(s,e,i,r),d=Eo(s,e,i,r),p=Fo(u,c,f,d);if(0===p)return u;if(p>=.01){for(let s=0;s<4;++s)u-=(Oo(u,c,f,d)-t)/Fo(u,c,f,d);return u}{let s,e,i=h,r=h+Mo,n=0;do{u=i+(r-i)/2;let h=Oo(u,c,f,d)-t;h>0?r=u:i=u,s=Math.abs(h)>1e-7,e=++n<10}while(s&&e);return u}}}{let Lo=function(t){ko.hi(t)};RequireStringOrNumber=Lo;const ko=self.Gs;ko.Gc=class{constructor(t){this._c=[],this.Xr=t||"",this.Pc=0}qr(){this.Ru(),this._c=null}Rc(){return this.Xr}Ru(){ko.xh(this._c),this.Pc=0}Ac(){return this.Pc}Ec(t=Math.random()*this.Ac()){let s=0;for(const[e,i]of this._c)if(s+=e,t<s)return i;return 0}Oc(){return!!this._c.length}Fc(t,s){Lo(s),this.Pc+=t,this._c.push([t,s])}Dc(t,s){Lo(s);const e=0===t;for(let i=0;i<this._c.length;i++){const r=this._c[i],n=e||r[0]===t,h=r[1]===s;if(n&&h){this._c.splice(i,1),this.Pc-=r[0];break}}}Lc(){return JSON.stringify(this._c)}static kc(t,s){const e=new ko.Gc(s),i=JSON.parse(t);for(const t of i){const s=t[0],i=t[1];e.Fc(s,i)}return e}}}{const No=self.Gs;let Bo=0;No.Nc=class{constructor(t,s){this.Bc=t,this.$c=s,this.Uc=Bo++,this.Bc.Vc("runtime","screen-reader-text",{type:"create",id:this.Uc,text:this.$c})}qr(){this.Bc.Vc("runtime","screen-reader-text",{type:"release",id:this.Uc}),this.Bc=null,this.$c="",this.Uc=-1}Wc(t){this.$c!==t&&(this.$c=t,this.Bc.Vc("runtime","screen-reader-text",{type:"update",id:this.Uc,text:this.$c}))}}}{const $o=self.Gs;$o.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.zc=!1,this.jc=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.jc)throw new Error(`cannot stop async event '${this.type}' propagation`);this.zc=!0}}}{const Uo=self.Gs,Vo=self.assert;Uo.Event.Hc=class extends Uo.zr{constructor(t){super(),this.qc=t,this.Jc=[],this.Yc=new Set,this.Xc=[],this.Kc=new Set,this.Zc=0,this.Qc=[]}qr(){this.Zc>0||(Uo.bh(this.Jc),this.Yc.clear(),Uo.bh(this.Xc),this.Kc.clear(),Uo.bh(this.Qc),Uo.qr(this))}tf(t,s){if(this.sf())this.Qc.push({ef:"add",if:t,capture:s});else if(s){if(this.Yc.has(t))return;this.Jc.push(t),this.Yc.add(t)}else{if(this.Kc.has(t))return;this.Xc.push(t),this.Kc.add(t)}}rf(t,s){this.sf()?this.Qc.push({ef:"remove",if:t,capture:s}):s?this.Yc.has(t)&&(this.Yc.delete(t),Uo.Gh(this.Jc,t)):this.Kc.has(t)&&(this.Kc.delete(t),Uo.Gh(this.Xc,t))}nf(){return!this.Jc.length&&!this.Xc.length}sf(){return this.Zc>0}hf(){const t=new Set,s=new Set;for(const e of this.Qc)if("add"===e.ef)this.tf(e.if,e.capture),e.capture?s.delete(e.if):t.delete(e.if);else{if("remove"!==e.ef)throw new Error("invalid op");e.capture?(this.Yc.delete(e.if),s.add(e.if)):(this.Kc.delete(e.if),t.add(e.if))}Uo.Rh(this.Xc,t),Uo.Rh(this.Jc,s),Uo.bh(this.Qc)}af(t){this.lf();let s=!1;for(let e=0,i=this.Jc.length;e<i;++e)if(this.Jc[e](t),t.zc){s=!0;break}if(!s)for(let s=0,e=this.Xc.length;s<e&&(this.Xc[s](t),!t.zc);++s);return this.uf(),!t.defaultPrevented}cf(t){this.lf();for(let s=0,e=this.Jc.length;s<e;++s)this.Jc[s](t);for(let s=0,e=this.Xc.length;s<e;++s)this.Xc[s](t);return this.uf(),!0}lf(){this.Zc++}uf(){this.Zc--,0===this.Zc&&this.Qc.length>0&&this.hf()}ff(t){t?this.lf():this.uf()}df(t){let s=[];for(let e=0,i=this.Jc.length;e<i;++e){let i=this.Jc[e];s.push(Uo.pf(()=>i(t)))}for(let e=0,i=this.Xc.length;e<i;++e){let i=this.Xc[e];s.push(Uo.pf(()=>i(t)))}return Promise.all(s).then(()=>!t.defaultPrevented)}mf(t){const s=[];this.lf();for(let e=0,i=this.Jc.length;e<i;++e){const i=this.Jc[e](t);i instanceof Promise&&s.push(i)}for(let e=0,i=this.Xc.length;e<i;++e){const i=this.Xc[e](t);i instanceof Promise&&s.push(i)}return this.uf(),s.length?Promise.all(s).then(()=>!t.defaultPrevented):!t.defaultPrevented}async gf(t){return await this.mf(t)}async yf(t){this.lf();for(let s=0,e=this.Jc.length;s<e;++s){const e=this.Jc[s](t);e instanceof Promise&&await e}for(let s=0,e=this.Xc.length;s<e;++s){const e=this.Xc[s](t);e instanceof Promise&&await e}return this.uf(),!t.defaultPrevented}*Sf(t){this.lf();for(let s=0,e=this.Jc.length;s<e;++s){const e=this.Jc[s](t);Uo.xo(e)&&(yield*e)}for(let s=0,e=this.Xc.length;s<e;++s){const e=this.Xc[s](t);Uo.xo(e)&&(yield*e)}this.uf()}}}{const Wo=self.Gs;Wo.Event.wf=class extends Wo.zr{constructor(){super(),this.vf=new Map,this.bf=!1}qr(){if(this.bf)throw new Error("already released");this.xf(),this.bf=!0,Wo.qr(this)}Jr(){return this.bf}xf(){if(this.vf){for(let t of this.vf.values())t.qr();this.vf.clear()}}Cf(t,s){let e=this.vf.get(t);return e||(s?(e=Wo.Hr(Wo.Event.Hc,t),this.vf.set(t,e),e):null)}Tf(t){return this.vf.has(t)}addEventListener(t,s,e){this.Cf(t,!0).tf(s,!!e)}removeEventListener(t,s,e){let i=this.Cf(t,!1);i&&(i.rf(s,!!e),i.nf()&&this.vf.delete(t))}dispatchEvent(t){const s=this.Cf(t.type,!1);return!s||(t.cancelable?s.af(t):s.cf(t))}Mf(t){const s=this.Cf(t.type,!1);return s?(t.jc=!0,s.df(t)):Promise.resolve(!0)}async If(t){const s=this.Cf(t.type,!1);if(!s)return!0;this.vf.delete(t.type),t.jc=!0;const e=await s.df(t);return s.qr(),e}async Gf(t){const s=this.Cf(t.type,!1);return!s||await s.gf(t)}_f(t){const s=this.Cf(t.type,!1);return!s||s.mf(t)}async Pf(t){const s=this.Cf(t.type,!1);return!s||await s.yf(t)}Rf(t){const s=this.Cf(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.Sf(t)}ff(t){for(const s of this.vf.values())s.ff(t)}}}{let zo=function(t){Qo=Ko&&0===ta?requestIdleCallback(jo,{timeout:35}):setTimeout(jo,ta>0?1:t)},jo=function(t){if(Qo=-1,!Zo.length)return;let s=performance.now(),e=s,i=0,r=0;do{Ho(Zo.shift()),e=performance.now(),++i,r=(e-s)/i*1.1}while(Zo.length&&(Ko&&0===ta&&void 0!==t?r<t.timeRemaining():e-s+r<12));if(-1===Qo&&Zo.length){let t=e-s;zo(Math.max(16-t,4))}},Ho=function(t){let s;try{s=t.if()}catch(s){return void t.reject(s)}t.resolve(s)};SetNewCallback=zo,DoAsyncifiedWork=jo,DoNextAsyncifiedJob=Ho;const qo=self.Gs,Jo=12,Yo=16,Xo=35,Ko="undefined"!=typeof requestIdleCallback;let Zo=[],Qo=-1,ta=0,sa=qo.Ys.js("disable-asyncify");sa&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),qo.pf=function(t){let s=null;return qo.Ls&&(s=qo.Ye()),new Promise((e,i)=>{Zo.push({if:t,resolve:e,reject:i,stack:s}),sa?Ho(Zo.pop()):-1===Qo&&zo(16)})},qo.pf.Af=function(t){if(t)++ta;else if(--ta,ta<0)throw new Error("already turned off high throughput mode")}}{let ea=function(){oa=-1},ia=function(){aa=-1,la=-1;let t=Date.now();for(let s of ua)if(s.Ef(t)){let t=s.Of();(-1===la||t<la)&&(la=t)}else ua.delete(s);if(-1!==la){let s=Math.max(la-t+100,1e3);aa=self.setTimeout(ia,s)}};ClearTimeCache=ea,CheckActiveIdleTimeouts=ia;const ra=self.Gs,na=1e3,ha=100;let oa=-1;ra.Ff=function(){return-1===oa&&(oa=Date.now(),self.setTimeout(ea,16)),oa};let aa=-1,la=-1,ua=new Set;ra.Df=class{constructor(t,s){this.Lf=t,this.kf=1e3*s,this.Nf=0,this.Bf=!1}$f(){let t=ra.Ff();this.Nf=t+this.kf,this.Bf||(ua.add(this),this.Bf=!0),-1===aa?(la=this.Nf,aa=self.setTimeout(ia,this.kf+100)):this.Nf<la&&la>t+1e3&&(self.clearTimeout(aa),la=this.Nf,aa=self.setTimeout(ia,this.kf+100))}Ef(t){return!(t>=this.Nf&&(this.Lf()?(this.Nf=t+this.kf,0):(this.Bf=!1,1)))}Of(){return this.Nf}Uf(){this.Bf&&(ua.delete(this),this.Bf=!1,0===ua.size&&-1!==aa&&(self.clearTimeout(aa),aa=-1,la=-1))}qr(){this.Uf(),this.Lf=null}}}{const ca=self.Gs;ca.Vf=class t{constructor(t){this.Wf=!1,this.zf=t}jf(){this.Wf||(this.Wf=!0,this.zf&&(this.zf(),this.zf=null))}Hf(){return this.Wf}qr(){this.jf()}static qr(s){return new t(()=>s.qr())}static qf(t,s,e,i,r){if("string"!=typeof s&&!Array.isArray(s))throw new TypeError("expected string or array");if(null==i)i=!1;else if("boolean"!=typeof i&&"object"!=typeof i)throw new TypeError("invalid event listener options");if(r&&(e=e.bind(r)),Array.isArray(s)||s.includes(" ")){"string"==typeof s&&(s=s.split(" "));const r=new ca.Jf;for(const n of s)t.addEventListener(n,e,i),r.$u(ca.Hr(ca.Vf,()=>t.removeEventListener(n,e,i)));return r}return t.addEventListener(s,e,i),ca.Hr(ca.Vf,()=>t.removeEventListener(s,e,i))}},ca.Yf=class extends ca.Vf{Xf(t){this.zf=t}},ca.Jf=class extends ca.Vf{constructor(...t){super(),this.Kf=new Set;for(let s of t)this.$u(s)}$u(...t){if(this.Wf)throw new Error("already disposed");for(let s of t)this.Kf.add(s)}Zf(t){if(this.Wf)throw new Error("already disposed");this.Kf.delete(t)}Qf(){if(this.Wf)throw new Error("already disposed");if(this.Kf){for(let t of this.Kf)t.jf();this.Kf.clear()}}Hf(){return this.Wf}jf(){if(this.Wf)throw new Error("already disposed");this.Wf=!0;for(let t of this.Kf)t.jf();this.Kf.clear(),this.Kf=null}qr(){this.jf()}}}{const fa=self.Gs;fa.td=class extends fa.zr{constructor(){super(),this.sd=0,this.Aa=0,this.ed=0,this.rd=0}$u(t){t=+t,this.Aa=t-this.sd,this.ed=this.rd+this.Aa,this.sd=this.ed-this.rd-this.Aa,this.rd=this.ed}nd(t){this.rd-=+t}Hs(){return this.rd}$f(){this.sd=0,this.Aa=0,this.ed=0,this.rd=0}Set(t){this.sd=0,this.Aa=0,this.ed=0,this.rd=+t}hd(t){this.sd=t.sd,this.Aa=t.Aa,this.ed=t.ed,this.rd=t.rd}qr(){}}}{const da=self.Gs,pa={},ma=!0,ga=!1;pa.od=function(t){this.ad=t,this.right=this.ad.ld,this.left=this.ad.ld,this.parent=null,this.color=!1,this.key=null},pa.ud=function(t){this.size=0,this.ld=new pa.od(this),this.ld.color=!1,this.root=this.ld,this.root.parent=this.ld,this.compare=t||this.fd},pa.ud.prototype.fd=function(t,s){return t<s?-1:s<t?1:0},pa.ud.prototype.clone=function(){var t=new pa.ud(this.compare);return t.dd(this),t},pa.ud.prototype.clear=function(){this.size=0,this.ld=new pa.od(this),this.ld.color=!1,this.root=this.ld,this.root.parent=this.ld},pa.ud.prototype.pd=function(t){var s=t.right;t.right=s.left,s.left!=this.ld&&(s.left.parent=t),s.parent=t.parent,t.parent==this.ld?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,s.left=t,t.parent=s},pa.ud.prototype.md=function(t){var s=t.left;t.left=s.right,s.right!=this.ld&&(s.right.parent=t),s.parent=t.parent,t.parent==this.ld?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,s.right=t,t.parent=s},pa.ud.prototype.gd=function(t){if(this.contains(t))this.yd(t).key=t;else{var s=new pa.od(this);s.key=t;for(var e=this.ld,i=this.root;i!=this.ld;)e=i,i=this.compare(s.key,i.key)<0?i.left:i.right;s.parent=e,e==this.ld?this.root=s:this.compare(s.key,e.key)<0?e.left=s:e.right=s,s.left=this.ld,s.right=this.ld,s.color=ma,this.Sd(s),this.size++}},pa.ud.prototype.Sd=function(t){for(;t!=this.ld&&t!=this.root&&t.parent.color==ma;){var s;t.parent==t.parent.parent.left?(s=t.parent.parent.right).color==ma?(t.parent.color=!1,s.color=!1,t.parent.parent.color=ma,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.pd(t)),t.parent.color=!1,t.parent.parent.color=ma,t.parent.parent!=this.ld&&this.md(t.parent.parent)):(s=t.parent.parent.left).color==ma?(t.parent.color=!1,s.color=!1,t.parent.parent.color=ma,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.md(t)),t.parent.color=!1,t.parent.parent.color=ma,t.parent.parent!=this.ld&&this.pd(t.parent.parent))}this.root.color=!1},pa.ud.prototype.wd=function(t){var s,e;(e=(s=t.left==this.ld||t.right==this.ld?t:this.vd(t)).left!=this.ld?s.left:s.right).parent=s.parent,s.parent==this.ld?this.root=e:s==s.parent.left?s.parent.left=e:s.parent.right=e,s!=t&&(t.key=s.key),0==s.color&&this.bd(e),this.size--},pa.ud.prototype.bd=function(t){for(;t!=this.root&&0==t.color;){var s;t==t.parent.left?((s=t.parent.right).color==ma&&(s.color=!1,t.parent.color=ma,this.pd(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=ma,t=t.parent):(0==s.right.color&&(s.left.color=!1,s.color=ma,this.md(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.pd(t.parent),t=this.root)):((s=t.parent.left).color==ma&&(s.color=!1,t.parent.color=ma,this.md(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=ma,t=t.parent):(0==s.left.color&&(s.right.color=!1,s.color=ma,this.pd(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.md(t.parent),t=this.root))}t.color=!1},pa.ud.prototype.remove=function(t){var s=this.yd(t);if(s!=this.ld){var e=s.key;return this.wd(s),e}return null},pa.ud.prototype.xd=function(t,s){this.remove(s)},pa.ud.prototype.min=function(t){for(;t.left!=this.ld;)t=t.left;return t},pa.ud.prototype.max=function(t){for(;t.right!=this.ld;)t=t.right;return t},pa.ud.prototype.vd=function(t){if(t.right!=this.ld)return this.min(t.right);for(var s=t.parent;s!=this.ld&&t==s.right;)t=s,s=s.parent;return s},pa.ud.prototype.Cd=function(t){if(t.left!=this.ld)return this.max(t.left);for(var s=t.parent;s!=this.ld&&t==s.left;)t=s,s=s.parent;return s},pa.ud.prototype.Td=function(t){if(this.size>0){var s=this.yd(t);if(s==this.ld)return null;if(s.right!=this.ld)return this.min(s.right).key;for(var e=s.parent;e!=this.ld&&s==e.right;)s=e,e=e.parent;return e!=this.ld?e.key:null}return null},pa.ud.prototype.Md=function(t){if(this.size>0){var s=this.yd(t);if(s==this.ld)return null;if(s.left!=this.ld)return this.max(s.left).key;for(var e=s.parent;e!=this.ld&&s==e.left;)s=e,e=e.parent;return e!=this.ld?e.key:null}return null},pa.ud.prototype.Id=function(){return this.min(this.root).key},pa.ud.prototype.Gd=function(){return this.max(this.root).key},pa.ud.prototype.yd=function(t){for(var s=this.root;s!=this.ld&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},pa.ud.prototype.contains=function(t){return null!=this.yd(t).key},pa.ud.prototype.getValues=function(){var t=[];return this.forEach(function(s){t.push(s)}),t},pa.ud.prototype.dd=function(t){if("array"==pa._d(t))for(var s=0;s<t.length;s++)this.gd(t[s]);else if("function"==pa._d(t.forEach))t.forEach(this.gd,this);else if("function"==pa._d(t.getValues)){var e=t.getValues();for(s=0;s<e.length;s++)this.gd(e[s])}else if("object"==pa._d(t))for(var i in t)this.gd(t[i])},pa.ud.prototype.Pd=function(t){if("array"==pa._d(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==pa._d(t.forEach))t.forEach(this.xd,this);else if("function"==pa._d(t.getValues)){var e=t.getValues();for(s=0;s<e.length;s++)this.remove(e[s])}else if("object"==pa._d(t))for(var i in t)this.remove(t[i])},pa.ud.prototype.Rd=function(t){if("array"==pa._d(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==pa._d(t.forEach))return t.every(this.contains,this);if("function"==pa._d(t.getValues)){var e=t.getValues();for(s=0;s<e.length;s++)if(!this.contains(e[s]))return!1;return!0}if("object"==pa._d(t)){for(var i in t)if(!this.contains(t[i]))return!1;return!0}},pa.ud.prototype.range=function(t,s){var e=[];return this.Ad(function(t){e.push(t)},t,s),e},pa.ud.prototype.Ed=function(t,s){if(!this.Od())for(var e=this.min(this.root);e!=this.ld;){if(t.call(s,e.key,this))return;e=this.vd(e)}},pa.ud.prototype.Fd=function(t,s,e){if(!this.Od())for(var i=this.yd(s);i!=this.ld;){if(t.call(e,i.key,this))return;i=this.vd(i)}},pa.ud.prototype.traverseTo=function(t,s,e){if(!this.Od())for(var i=this.min(this.root),r=this.yd(s);i!=r;){if(t.call(e,i.key,this))return;i=this.vd(i)}},pa.ud.prototype.Ad=function(t,s,e,i){if(!this.Od())for(var r=this.yd(s),n=this.yd(e);r!=n;){if(t.call(i,r.key,this))return;r=this.vd(r)}},pa.ud.prototype.Dd=function(t,s){if(!this.Od())for(var e=this.max(this.root);e!=this.ld;){if(t.call(s,e.key,this))return;e=this.Cd(e)}},pa.ud.prototype.forEach=function(t,s){if(!this.Od())for(var e=this.min(this.root);e!=this.ld;e=this.vd(e))t.call(s,e.key,e.key,this)},pa.ud.prototype.some=function(t,s){if(this.Od())return!1;for(var e=this.min(this.root);e!=this.ld;e=this.vd(e))if(t.call(s,e.key,e.key,this))return!0;return!1},pa.ud.prototype.every=function(t,s){if(this.Od())return!1;for(var e=this.min(this.root);e!=this.ld;e=this.vd(e))if(!t.call(s,e.key,e.key,this))return!1;return!0},pa.ud.prototype.map=function(t,s){var e=[];if(this.Od())return e;for(var i=this.min(this.root);i!=this.ld;i=this.vd(i))e.push(t.call(s,i.key,i.key,this));return e},pa.ud.prototype.filter=function(t,s){var e=[];if(this.Od())return e;for(var i=this.min(this.root);i!=this.ld;i=this.vd(i))t.call(s,i.key,i.key,this)&&e.push(i.key);return e},pa.ud.prototype.Ld=function(){return this.size},pa.ud.prototype.Od=function(){return 0==this.size},pa.ud.prototype.isSubsetOf=function(t){var s=pa.Ld(t);if(this.Ld()>s)return!1;var e=0;if(this.Od())return!0;for(var i=this.min(this.root);i!=this.ld;i=this.vd(i))pa.contains.call(t,t,i.key)&&e++;return e==this.Ld()},pa.ud.prototype.intersection=function(t){var s=new pa.ud(this.compare);if(this.Od())return s;for(var e=this.min(this.root);e!=this.ld;e=this.vd(e))t.contains.call(t,e.key,e.key,this)&&s.gd(e.key);return s},da.ud=class extends da.zr{constructor(t){super(),this.kd=new pa.ud(t),this.Nd=!1,this.Bd=new Set,this.$d=new Set}$u(t){this.Nd?this.kd.contains(t)?this.$d.delete(t):this.Bd.add(t):this.kd.gd(t)}Zf(t){this.Nd?this.kd.contains(t)?this.$d.add(t):this.Bd.delete(t):this.kd.remove(t)}js(t){return this.Nd?!!this.Bd.has(t)||!this.$d.has(t)&&this.kd.contains(t):this.kd.contains(t)}Ru(){this.kd.clear(),this.Bd.clear(),this.$d.clear()}toArray(){if(this.Nd)throw new Error("cannot be used in queueing mode");return this.kd.getValues()}Fu(){return this.kd.Ld()+this.Bd.size-this.$d.size}Au(){return 0===this.Fu()}Ud(){if(this.Au())throw new Error("empty set");if(this.Nd)throw new Error("cannot be used in queueing mode");const t=this.kd;return t.min(t.root).key}Vd(){if(this.Au())throw new Error("empty set");if(this.Nd)throw new Error("cannot be used in queueing mode");const t=this.Ud();return this.Zf(t),t}Wd(t){if(t=!!t,this.Nd!==t&&(this.Nd=t,!t)){for(const t of this.$d)this.kd.remove(t);this.$d.clear();for(const t of this.Bd)this.kd.gd(t);this.Bd.clear()}}zd(t){this.kd.forEach(t)}*values(){if(this.Au())return;const t=this.kd;for(let s=t.min(t.root);s!=t.ld;s=t.vd(s))yield s.key}[Symbol.iterator](){return this.values()}}}{const ya=self.Gs;ya.jd=class{constructor(t=ya.hardwareConcurrency){this.Hd=t,this.qd=[],this.Jd=0}$u(t,s){return new Promise((e,i)=>{const r={if:t,resolve:e,reject:i,Yd:s};s?.signal&&s.signal.aborted?i(new Error("abort")):(s?.signal&&(r.onabort=()=>{const t=this.qd.indexOf(r);-1!==t&&(this.qd.splice(t,1),i(new Error("abort")))},s.signal.addEventListener("abort",r.onabort)),this.qd.push(r),this.Xd())})}Kd(t){for(let s=0,e=this.qd.length;s<e;++s)if(this.qd[s].if===t)return s;return-1}Zd(t,s){const e=this.Kd(t);if(-1===e)throw new Error("cannot find promise to resolve");this.qd[e].resolve(s),this.qd.splice(e,1)}Qd(t,s){const e=this.Kd(t);if(-1===e)throw new Error("cannot find promise to reject");this.qd[e].reject(s),this.qd.splice(e,1)}async Xd(){if(!this.qd.length)return;if(this.Jd>=this.Hd)return;this.Jd++;const t=this.qd.shift();t.Yd?.signal&&t.onabort&&t.Yd.signal.removeEventListener("abort",t.onabort);try{const s=await t.if();t.resolve(s)}catch(s){t.reject(s)}this.Jd--,this.Xd()}}}{const Sa=self.Gs;Sa.tp=class{constructor(t,s,e){this.Lf=t,this.sp=s,this.ep=e||2*s,this.ip=-1,this.rp=-1/0,this.np=()=>this.hp(),this.op=!1,this.ap=!1,this.lp=null}up(t){this.ap=!!t}cp(){return void 0!==Sa.fp&&Sa.fp.pp()?this.ep:this.sp}mp(...t){if(-1!==this.ip)return;this.lp=t;let s=Sa.Ff(),e=s-this.rp,i=this.cp();e>=i&&this.ap?(this.rp=s,this.gp()):this.ip=self.setTimeout(this.np,Math.max(i-e,4))}gp(){this.op=!0;const t=this.lp;this.lp=null,t?this.Lf(...t):this.Lf(),this.op=!1}$f(){this.op||(this.yp(),this.lp=null,this.rp=Sa.Ff())}hp(){this.ip=-1,this.rp=Sa.Ff(),this.gp()}yp(){-1!==this.ip&&(self.clearTimeout(this.ip),this.ip=-1)}qr(){this.yp(),this.Lf=null,this.lp=null,this.np=null}}}{const wa=self.Gs;wa.Sp=class{constructor(){this.wp=new Map,this.vp=!1,this.bp=null,this.xp=null,this.Cp=null,this.Tp=null}Mp(t){this.vp=!!t}Ip(){return this.vp}Gp(t){this.bp=t}_p(t){if(!this.bp)throw new Error("no get base size callback set");return this.bp(t)}Pp(t){this.xp=t}Rp(t,s,e,i,r,n){if(!this.xp)throw new Error("no raster at size callback set");return this.xp(t,s,e,i,r,n)}Ap(t){this.Cp=t}Ep(t){if(!this.Cp)throw new Error("no release result callback set");this.Cp(t)}Op(t){this.Tp=t}Fp(){if(!this.Tp)throw new Error("no redraw callback set");this.Tp()}Dp(t){let s=this.wp.get(t);return s||(s=wa.Hr(wa.Lp,this,t),this.wp.set(t,s)),s.kp(),s}Np(t){this.wp.delete(t.Bp())}$p(){for(const t of this.wp.values())t.Up(),t.Vp()}}}{const va=self.Gs,ba=4096;va.Lp=class{constructor(t,s){this.Wp=t,this.zp=s,this.jp=0,this.Hp=0,this.qp=0,this.Jp=this.Wp._p(s).then(t=>{this.Wp&&(this.Hp=t[0],this.qp=t[1],this.Wp.Fp())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.Yp=!0,this.Wp&&this.Wp.Fp()}),this.Xp=0,this.Kp=0,this.Zp=0,this.Qp=0,this.tm=!1,this.sm=null,this.im=!1,this.Yp=!1}qr(){if(this.jp<=0)throw new Error("already released");this.jp--,0===this.jp&&this.rm()}Up(){this.sm&&(this.Wp.Ep(this.sm),this.sm=null)}rm(){this.Up(),this.Wp.Np(this),this.Wp=null}Bp(){return this.zp}kp(){this.jp++}nm(){return this.jp>0}hm(){return this.sm}Vp(){this.im=!0}async om(t,s,e){if(0===s||0===e||this.Yp)return;if(this.tm)return;let i=va.xn(Math.ceil(s)),r=va.xn(Math.ceil(e));const n=Math.max(i,r);if(n>4096){const t=4096/n;s*=t,e*=t,i=Math.min(Math.ceil(i*t),4096),r=Math.min(Math.ceil(r*t),4096)}if(s<i&&e<r){const t=s/e;i/r>t?(s=r*t,e=r):(s=i,e=i/t)}if(this.Wp.Ip()&&(i=Math.ceil(s),r=Math.ceil(e)),i<=this.Xp&&r<=this.Kp&&!this.im)return;this.tm=!0,this.Xp=i,this.Kp=r;const h=await this.Wp.Rp(this.zp,t,this.Xp,this.Kp,s,e);this.Wp&&(this.Up(),this.sm=h,this.Zp=s,this.Qp=e,this.tm=!1,this.im=!1,this.Wp.Fp())}am(){return this.Jp}lm(){return this.Hp}um(){return this.qp}fm(){return this.Zp}dm(){return this.Qp}pm(){return this.Yp}}}{let xa=function(t){return _a.get(t)};lookupHtmlEntity=xa;const Ca=self.Gs;Ca.gm="\ufeff";const Ta=new Set("0123456789");Ca.ym=function(t){return Ta.has(t)};const Ma=new Set(" \t\n\r\u2028\u2029");Ca.Sm=function(t){return Ma.has(t)},Ca.wm=function(t){return[...t].filter(t=>!Ca.Sm(t)).join("")},Ca.vm=function(t){for(const s of t)if(!Ca.Sm(s))return!1;return!0},Ca.bm=function(t){for(const s of t)if(!Ca.Sm(s))return!1;return!0},Ca.xm=function(t){return 1===t.length&&t.charCodeAt(0)<32},Ca.Cm=function(t){return[...t].filter(t=>!Ca.xm(t)).join("")};let Ia=null;try{Ia=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}Ca.Tm=function(t){return!Ca.Sm(t)&&Ia&&Ia.test(t)};const Ga=new Set("0123456789.+-e");Ca.Mm=function(t){if(!(t=t.trim()).length)return!1;let s=t.charAt(0);if("-"!==s&&!Ta.has(s))return!1;for(let s of t)if(!Ga.has(s))return!1;return!0},Ca.Im=function(t){let s=t.length;for(;s>0;){let e=t.charAt(s-1);if(!Ca.ym(e))break;--s}return t.substr(0,s)},Ca.Gm=function(t){let s=Ca.Im(t),e=t.substr(s.length);return e=e?(parseInt(e,10)+1).toString():"2",s+e};const _a=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]]),Pa=/[&<>"']/g;Ca._m=function(t){return t.replace(Pa,xa)},Ca.Pm=function(t){let s=Ca.Rm(t,"\\","\\\\");return s=Ca.Rm(s,'"','\\"'),s=Ca.Rm(s,"\t","\\t"),s=Ca.Rm(s,"\r",""),Ca.Rm(s,"\n","\\n")},Ca.Am=function(t){let s=Ca.Rm(t,"&","&amp;");return s=Ca.Rm(s,"<","&lt;"),s=Ca.Rm(s,">","&gt;"),Ca.Rm(s,'"',"&quot;")};const Ra=/[-[\]{}()*+?.,\\^$|#\s]/g;Ca.Je=function(t){return t.replace(Ra,"\\$&")},Ca.Em=function(t,s){let e=0;for(const i of t)i===s&&++e;return e},Ca.Om=function(t,s){let e=0,i=0;for(;e<s;){if(e=t.indexOf("\n",e),-1===e)return i;i++,e++}return i},Ca.Fm=function(t,s,e=!1){if(!s)return[];e||(t=t.toLowerCase(),s=s.toLowerCase());const i=s.length;let r=0,n=0,h=[];for(;(n=t.indexOf(s,r))>-1;)h.push(n),r=n+i;return h},Ca.Rm=function(t,s,e){return t.replaceAll(s,()=>e)},Ca.Dm=function(t,s,e){return t.replace(new RegExp(Ca.Je(s),"gi"),()=>e)},Ca.Lm=function(t,s){"string"==typeof s?t.textContent=s:s.km()?t.textContent=s.toString():(t.innerHTML=s.Nm(),s instanceof Ca.pr&&s.Bm(t))},Ca.$m=function(t,s){return t instanceof Ca.dr||t instanceof Ca.pr?t.equals(s):s instanceof Ca.dr||s instanceof Ca.pr?s.equals(t):t===s},Ca.Um=function(t,...s){let e=t;for(let i=0,r=s.length;i<r;++i){const r=`{${i}}`;if(!t.includes(r))throw new Error(`missing placeholder '${r}' in string substitution`);e=e.replace(r,s[i].toString())}return e},Ca.Vm=function(t,...s){let e=t,i=-1,r=-1;for(let n=0,h=s.length;n<h;++n){const h=`{${n}}`;t.includes(h)?(r=n,e=e.replace(h,s[n].toString())):-1===i&&(i=n)}if(i>=0&&r>=0&&i<r)throw new Error(`missing placeholder '${i}' in string substitution`);return e},Ca.Wm=function(t,s){let e=t;for(let[t,i]of Object.entries(s))e=e.replaceAll(t,i.toString());return e},Ca.zm=function(t,s){return t>s?1:t<s?-1:0},Ca.jm=function(t,s){let e=t.toLowerCase(),i=s.toLowerCase();return e>i?1:e<i?-1:0};const Aa=new self.Intl.Segmenter;Ca.Hm=function(t){if(1===t.length)return[t];const s=[];for(const e of Aa.segment(t))s.push(e.segment);return s},Ca.qm=function*(t){for(const s of Aa.segment(t))yield s.segment},Ca.Jm=function(t){let s=0;for(const e of Aa.segment(t))++s;return s};const Ea=1024,Oa=1048576,Fa=1073741824,Da=1099511627776;Ca.Ym=function(t,s){let e="common."+(s?"dataRates":"dataSizes")+".";const i=self.Xm;if(t<1024)return i(e+"bytes",t);if(t<1048576){let s=t/1024;return s=s<10?Math.round(10*s)/10:Math.round(s),i(e+"kilobytes",s)}if(t<Fa){let s=t/1048576;return s=s<10?Math.round(10*s)/10:Math.round(s),i(e+"megabytes",s)}if(t<Da){let s=t/Fa;return s=s<10?Math.round(10*s)/10:Math.round(s),i(e+"gigabytes",s)}{let s=t/Da;return s=s<10?Math.round(10*s)/10:Math.round(s),i(e+"terabytes",s)}};const La={Km:!1,Zm:!0,Qm:!0,tg:!0,sg:!0};Ca.eg=function(t,s){s=Object.assign({},La,s),Ca.rg.ig("common.time");const e=[],i=self.lang,r=self.ng;if(s.Zm){const s=Math.floor(t/86400);s>0&&(t-=24*s*3600,e.push(r(".days",null,s)))}if(s.Qm){const s=Math.floor(t/3600);(s>0||e.length)&&(t-=3600*s,e.push(r(".hours",null,s)))}if(s.tg){const i=Math.floor(t/60);(i>0||e.length||!s.sg)&&(t-=60*i,e.push(r(".minutes",null,i)))}if(s.sg){const s=Math.floor(t%60);e.push(r(".seconds",null,s))}const n=(s.Km?i(".approx-prefix"):"")+e.join(i(".separator"));return Ca.rg.hg(),n},Ca.og=function(t,s){let e=t<0?"-":"",i=(t=Math.abs(t)).toString(),r=s-i.length;for(let t=0;t<r;++t)e+="0";return e+i},Ca.ag=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},Ca.lg=function(t,s){let e=t.split(".").map(t=>t.trim()),i=s.split(".").map(t=>t.trim());Ca.Th(e,4,"0"),Ca.Th(i,4,"0"),e=e.map(t=>parseInt(t,10)),i=i.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const s=e[t]-i[t];if(0!==s)return s<0?-1:1}return 0},Ca.ug=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random());return("x"===t?s:3&s|8).toString(16)})},Ca.cg=function(t,s){if(t.length!==s.length)throw new Error("strings must be same length");let e=0;for(let i=0,r=t.length;i<r;++i)t.charAt(i)!==s.charAt(i)&&++e;return e},Ca.fg=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let e,i,r,n,h,o;for(t.length>s.length&&(e=t,t=s,s=e),o=Array(t.length+1),i=0;i<=t.length;i++)o[i]=i;for(i=1;i<=s.length;i++){for(n=i,r=1;r<=t.length;r++)h=s[i-1]===t[r-1]?o[r-1]:Math.min(o[r-1]+1,Math.min(n+1,o[r]+1)),o[r-1]=n,n=h;o[t.length]=n}return o[t.length]},Ca.dg=function(t){return(new TextEncoder).encode(t).length}}{let ka=function(t,s,e){const i=$a.get(e);if(!i)return"class"===e?s?"</span>":`<span class="bbclass${Ha++}">`:t;if("string"==typeof i){if("a"===i&&0===za.length||"abbr"===i&&0===ja.length)return t;if("a"!==i||s){if("abbr"!==i||s)return"<"+s+i+">";{const t=parseInt(e.substring(3),10)-1;if(t<0||t>=ja.length)throw new Error("invalid bbcode tip substitution");const s=ja[t];let i="";if("string"==typeof s?i=s:"function"==typeof s&&(i=s()),"string"!=typeof i)throw new TypeError("invalid bbcode tip");return`<abbr title="${Na.Rm(i,'"',"&quot;")}">`}}{const t=parseInt(e.substring(1),10)-1;if(t<0||t>=za.length)throw new Error("invalid bbcode link substitution");const s=za[t];if("string"==typeof s)return`<a href="${za[t]}">`;if("function"==typeof s)return`<a class="bblink${t}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(i)){let t=i[0],e=i[1];return s?"</"+t+">":`<${t} class="${e}">`}};bbToHtmlReplacerFunc=ka;const Na=self.Gs,Ba=self.assert,$a=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),Ua=new Set(["icon"]),Va=/\[(\/?)([a-zA-Z0-9]+)\]/g,Wa=/\[(\/?)([^\[\n]*?)\]/g;let za=null,ja=null,Ha=0;const qa=/\n/g;Na.pr=class{constructor(t,s){if(this.pg=s&&s.mg?t:Na._m(t),this.gg="",this.yg=!1,this.Sg=[],this.wg=[],s){if(this.yg=!!s.vg,s.links){if(s.links.length>9)throw new Error("too many links");this.Sg=s.links}if(s.bg){if(s.bg.length>9)throw new Error("too many tips");this.wg=s.bg}}this.xg=this.pg.includes("["),this.Cg=this.yg&&this.pg.includes("\n"),this.Tg=!this.xg&&!this.Cg&&!this.pg.includes("&"),this.Mg=!1,this.Ig=[]}toString(){return this.pg}valueOf(){return this.pg}km(){return this.Tg}Gg(){return this.xg?this.pg.replace(Va,""):this.pg}Nm(){if(this.Tg)return this.pg;if(!this.gg&&this.pg){let t=this.pg;this.xg&&(Ha=0,za=this.Sg,ja=this.wg,t=t.replace(Va,ka),za=null,ja=null),this.Cg&&(t=t.replace(qa,"<br>")),this.gg=t}return this.gg}Bm(t){if(this.Sg.length)for(let s=0,e=this.Sg.length;s<e;++s){const e=this.Sg[s];if("function"!=typeof e)continue;const i=t.querySelector(".bblink"+s);if(!i)throw new Error("unable to attach BBString link handler");i.onclick=e}}equals(t){return t instanceof Na.dr?this.Nm()===t.Nm():t instanceof Na.pr?this.pg===t.pg:this.pg===t}_g(){if(this.Mg)return this.Ig;const t=[],s=this.pg,e=[];Wa.lastIndex=0;let i=0,r=null;for(;null!==(r=Wa.exec(s));){const n=r.index;if(n>0&&"\\"===s.charAt(n-1))continue;const h=r[0],o=r[1],a=r[2],l=s.substring(i,n);if(i=n+h.length,l&&t.push({text:l,Pg:e.slice(0)}),a)if(o){const t=a.toLowerCase();for(let s=e.length-1;s>=0;--s)if(e[s].tag===t){e.splice(s,1);break}}else{let s=a,i=null;const r=a.indexOf("=");if(-1!==r?(s=a.substring(0,r).toLowerCase(),i=a.substring(r+1)):s=s.toLowerCase(),Ua.has(s)){if("icon"!==s)throw new Error(`unknown self-closing tag ${s}`);t.push({icon:i,Pg:e.slice(0)})}else e.push({tag:s,Rg:i})}}i<s.length&&t.push({text:s.substring(i),Pg:e.slice(0)});for(const s of t)s.text&&(s.text=this.Ag(s.text));return this.Ig=t.map(t=>t.icon?Na.Hr(Na.Eg,{icon:t.icon,Pg:t.Pg}):Na.Hr(Na.Og,{Fg:Na.Hm(t.text),Pg:t.Pg})),this.Mg=!0,this.Ig}Ag(t){return t=Na.Rm(t,"\\[","["),Na.Rm(t,"\\\\","\\")}static Dg(t){return Na.Hr(Na.pr,t,{mg:!0}).Gg()}static Lg(t){return t.replace(Wa,"")}}}{let Ja=function(t){return""!==t&&""!==t&&Qa.Sm(t)},Ya=function(t){return tl.has(t)},Xa=function(t){return Qa.Tm(t)&&!Ya(t)},Ka=function(t){for(;t.length>0&&Ja(t.at(-1));)t.pop()},Za=function(t){return"\n"===t||"\r\n"===t};IsWordBreakWhiteSpace=Ja,IsOpeningCJKPunctiationChar=Ya,IsContinuingCJKPunctuationChar=Xa,WordBreakTrimEnd=Ka,IsNewline=Za;const Qa=self.Gs,tl=new Set("");class sl{constructor(){this.kg=[],this.width=0,this.height=0,this.fontBoundingBoxAscent=0,this.fontBoundingBoxDescent=0,this.Ng=0,this.Bg=!1}static $g(t,s,e,i,r,n){const h=new sl;return h.kg.push(t),h.width=s,h.height=e,h.fontBoundingBoxAscent=i,h.fontBoundingBoxDescent=r,h.Ng=n,h}hd(t){this.kg=t.kg.map(t=>t.Ug()),this.width=t.width,this.height=t.height,this.fontBoundingBoxAscent=t.fontBoundingBoxAscent,this.fontBoundingBoxDescent=t.fontBoundingBoxDescent,this.Ng=t.Ng,this.Bg=t.Bg}$f(){this.kg=[],this.width=0,this.height=0,this.fontBoundingBoxAscent=0,this.fontBoundingBoxDescent=0,this.Ng=0,this.Bg=!1}Vg(t,s){s||(this.width=t.width),this.height=t.height||0,this.fontBoundingBoxAscent=t.fontBoundingBoxAscent||0,this.fontBoundingBoxDescent=t.fontBoundingBoxDescent||0,this.Ng=t.Ng||0,this.Bg=!0}Wg(t){const s=this.kg.length?this.kg.at(-1):null;let e=0;s&&s.zg()&&t[0].zg()&&t[0].jg()===s.jg()&&(s.Hg(t[0].qg()),e=1);for(let s=t.length;e<s;++e){const s=t[e];this.kg.push(s.Ug())}this.Bg=!1}}Qa.Jg=class{constructor(){this.Yg=[],this.Xg=null,this.Kg=new sl,this.Zg=new sl,this.Qg=!1}ty(){return this.Yg}sy(){return this.Yg.length}ey(t){this.Xg=t}Jg(t,s,e,i,r){if("string"==typeof t&&(t=[Qa.Hr(Qa.Og,{Fg:Qa.Hm(t)})]),Qa.bh(this.Yg),!t.length||1===t.length&&t[0].zg()&&t[0].Au()||e<2)return;if(1===t.length){const i=t[0];if(i.zg()&&i.iy()<=100&&!i.ny()){let{width:t,height:n,fontBoundingBoxAscent:h,fontBoundingBoxDescent:o,Ng:a}=s(i);if(t+=r,i.hy(t),i.oy(n),i.ly(h||0),i.uy(o||0),i.py(a||0),t<=e)return void this.my(sl.$g(i,t,n,h,o,a))}}let n,h=4;"word"===i?n=this.gy(t):"cjk"===i?(n=this.yy(t),h=8):(n=this.Sy(t),h=8),this.wy(n,s,e,h,r)}gy(t){const s=[];let e=[],i=!1;for(const r of t){const t=r.jg();if(r.vy())e.length>0&&s.push(e),s.push([r]),e=[];else for(const n of r.qg())if(Za(n))e.length>0&&s.push(e),s.push([Qa.Hr(Qa.Og,{Fg:["\n"],Pg:t})]),e=[];else if(0===e.length)e.push(Qa.Hr(Qa.Og,{Fg:[n],Pg:t})),i=Ja(n);else{const r=Ja(n);if(r===i){const s=e.at(-1);s.jg()===t?s.by(n):e.push(Qa.Hr(Qa.Og,{Fg:[n],Pg:t}))}else s.push(e),e=[Qa.Hr(Qa.Og,{Fg:[n],Pg:t})],i=r}}return e.length>0&&s.push(e),s}yy(t){const s=[];let e=[],i=!1;for(const r of t){const t=r.jg();if(r.vy())e.length>0&&s.push(e),s.push([r]),e=[];else for(const n of r.qg())if(Za(n))e.length>0&&s.push(e),s.push([Qa.Hr(Qa.Og,{Fg:["\n"],Pg:t})]),e=[];else if(0===e.length)e.push(Qa.Hr(Qa.Og,{Fg:[n],Pg:t})),i=Ya(n);else if(i||Xa(n)){const s=e.at(-1);s.jg()===t?s.by(n):e.push(Qa.Hr(Qa.Og,{Fg:[n],Pg:t})),i=Ya(n)}else s.push(e),e=[Qa.Hr(Qa.Og,{Fg:[n],Pg:t})],i=Ya(n)}return e.length>0&&s.push(e),s}Sy(t){const s=[];for(const e of t)if(e.zg()){const t=e.qg();Qa.Fr(s,t.map(t=>[Qa.Hr(Qa.Og,{Fg:[t],Pg:e.jg()})]))}else s.push([e]);return s}xy(t,s){let e=0,i=0,r=0,n=0,h=0;for(const o of t){if(-1===o.Cy()){const t=s(o);o.oy(t.height),o.ly(t.fontBoundingBoxAscent||0),o.uy(t.fontBoundingBoxDescent||0),o.py(t.Ng||0),o.zg()?o.hy(t.width):o.vy()&&o.Ty(this.Xg)}e+=o.Cy(),i=Math.max(i,o.My()),r=Math.max(r,o.Iy()),n=Math.max(n,o.Gy()),h=Math.max(h,o._y())}return{width:e,height:i,fontBoundingBoxAscent:r,fontBoundingBoxDescent:n,Ng:h}}Py(){this.Kg.$f(),this.Zg.$f()}my(t){this.Yg.push(new Qa.Jg.Ry(t)),this.Py()}Ay(t){return 1===t.length&&t[0].zg()&&1===t[0].iy()&&Za(t[0].qg()[0])}Ey(t){return t[0].zg()&&Qa.bm(t[0].qg())}wy(t,s,e,i,r){let n=0;for(;n<t.length;)n=this.Oy(t,n,s,e,i);if(this.Zg.kg.length>0){if(!this.Zg.Bg){const t=this.xy(this.Zg.kg,s);this.Zg.Vg(t)}this.my(this.Zg)}this.Fy(s,r),this.Py(),this.Qg=!1}Oy(t,s,e,i,r){const n=this.Kg,h=this.Zg,o=t[s];if(this.Ay(o)){if(!h.Bg){const t=e(Qa.Hr(Qa.Og,{Fg:[" "],Pg:o[0].jg()}));h.Vg(t,!0)}return this.my(h),s+1}const a=this.Dy(t,s,r),l=this.xy(h.kg,e);return h.Vg(l),l.width>=i?this.Ly(t,s,e,i):(n.hd(h),this.Qg&&this.my(n),a+1)}Dy(t,s,e){const i=this.Zg;this.Qg=!1;let r=s,n=0;for(let s=t.length;r<s;++r){const s=t[r];if(this.Ay(s)){this.Qg=!0;break}if(i.Wg(s),!this.Ey(s)&&(++n,n===e))break}return r}Ly(t,s,e,i){const r=this.Kg,n=this.Zg;n.hd(r);let h=s;for(let s=t.length;h<s;++h){const o=t[h];if(this.Ay(o))return this.my(r),h+1;if(n.Wg(o),!this.Ey(o)||0===r.kg.length){const o=this.xy(n.kg,e);if(n.Vg(o),o.width>=i){let e;return r.kg.length>0?e=r:(e=n,++h,h<s&&this.Ey(t[h])&&++h),this.my(e),h}r.hd(n)}}return h}Fy(t,s){for(const e of this.Yg){const i=e.ky();if(!i.length)continue;let r=i.at(-1);if(r.zg()){const n=r.qg(),h=n.slice(0);if(Ka(h),0===h.length)e.Ny(-r.Cy()),i.pop();else if(h.length<n.length){r.By(h);const s=t(r).width,i=r.Cy()-s;r.hy(s),e.Ny(-i)}0!==s&&i.length>0&&(r=i.at(-1),r.Ny(s),e.Ny(s))}}}Ru(){Qa.bh(this.Yg)}$y(){return this.Yg.reduce((t,s)=>Math.max(t,s.Cy()),0)}Uy(){return this.Yg.reduce((t,s)=>t+s.My(),0)}}}{const el=self.Gs;el.Jg.Ry=class{constructor(t){this.Ig=t.kg,this.Vy=t.width,this.Wy=t.height,this.zy=t.fontBoundingBoxAscent,this.jy=t.fontBoundingBoxDescent,this.Hy=t.Ng,this.qy=0,this.Jy=0}kg(){return this.Ig.values()}*Yy(){const t=this.Ig;for(let s=t.length-1;s>=0;--s)yield t[s]}ky(){return this.Ig}Ny(t){this.Vy+=t}Cy(){return this.Vy}My(){return this.Wy}Xy(){return this.zy}Gy(){return this.jy}_y(){return this.Hy}Ky(t){this.qy=t}Zy(){return this.qy}Qy(t){this.Jy=t}tS(){return this.Jy}}}{const il=self.Gs;il.sS=class{constructor(t){this.eS=t.Pg||[],this.Vy=t.width||-1,this.Wy=t.height||-1,this.zy=t.fontBoundingBoxAscent||-1,this.jy=t.fontBoundingBoxDescent||-1,this.Hy=t.Ng||-1,this.qy=0,this.Jy=0}zg(){return!1}vy(){return!1}jg(){return this.eS}iS(t){const s=this.eS;for(let e=s.length-1;e>=0;--e){const i=s[e];if(i.tag===t)return i}return null}rS(t){return!!this.iS(t)}nS(){const t=new Map;for(const s of this.eS)t.set(s.tag,s.Rg);return t}Ny(t){this.Vy+=t}hy(t){this.Vy=t}Cy(){return this.Vy}oy(t){this.Wy=t}My(){return this.Wy}ly(t){this.zy=t}Iy(){return this.zy}uy(t){this.jy=t}Gy(){return this.jy}py(t){this.Hy=t}_y(){return this.Hy}Ky(t){this.qy=t}Zy(){return this.qy}Qy(t){this.Jy=t}tS(){return this.Jy}}}{const rl=self.Gs;rl.Og=class extends rl.sS{constructor(t){super(t),this.hS=t.Fg}zg(){return!0}Hg(t){rl.Fr(this.hS,t),this.Vy=-1,this.Wy=-1,this.zy=-1,this.jy=-1,this.Hy=-1}by(t){this.hS.push(t)}Ug(){return rl.Hr(rl.Og,{Fg:this.hS.slice(0),Pg:this.eS,width:this.Vy,height:this.Wy,fontBoundingBoxAscent:this.zy,fontBoundingBoxDescent:this.jy,Ng:this.Hy})}qg(){return this.hS}By(t){this.hS=t}iy(){return this.hS.length}Au(){return 0===this.hS.length}ny(){return this.hS.includes("\n")}}}{const nl=self.Gs;nl.Eg=class extends nl.sS{constructor(t){super(t),this.oS=t.icon}vy(){return!0}aS(){return this.oS}Ug(){return nl.Hr(nl.Eg,{icon:this.oS,Pg:this.eS,width:this.Vy,height:this.Wy,fontBoundingBoxAscent:this.zy,fontBoundingBoxDescent:this.jy,Ng:this.Hy})}lS(t){if(!t)return null;let s=Number(this.oS);return String(s)===this.oS?(s=Math.floor(s),t.uS(s)):t.cS(this.oS)}Ty(t){const s=this.lS(t);this.Vy=s?this.Wy*s.Cy()/s.My():0}fS(t){const s=this.lS(t);return s?s.fS():null}iy(){return 1}}}{const hl=self.Gs;hl.dS=class{constructor(t){this.pS=new Map,this.mS=t.gS,this.yS=t.SS}qr(){for(const t of this.pS.values())t.qr();this.pS.clear()}wS(t){let s=this.pS.get(t);if(s)return s;const e=this.mS(t);return s=hl.Hr(hl.vS,this,{source:t,bS:e}),this.pS.set(t,s),s}xS(t){return this.pS.has(t)}CS(t){const s=this.pS.get(t);s&&s.qr(),this.pS.delete(t)}async TS(t){return await this.yS(t)}}}{const ol=self.Gs;ol.vS=class{constructor(t,s){this.MS=t,this.IS=s.source,this.GS=[],this._S=new Map,this.PS=!1,this.RS=!1,this.AS=null;const e=s.bS.ES;for(let t=0,s=e.length;t<s;++t){const s=e[t],i=ol.Hr(ol.OS,this,{index:t,tag:s.tag,source:s.source,width:s.width,height:s.height});this.GS.push(i),s.tag&&this._S.set(s.tag.toLowerCase(),i)}}qr(){for(const t of this.GS)t.qr();ol.bh(this.GS),this._S.clear(),this.MS=null,this.IS=null}FS(){return this.PS}DS(){return this.RS}LS(){return this.AS||(this.AS=this.kS()),this.AS}async kS(){if(this.PS)return;this.PS=!0,this.RS=!0;const t=await this.MS.TS(this.IS);if(!this.MS)return;const s=t.ES;for(let t=0,e=Math.min(s.length,this.GS.length);t<e;++t){const e=s[t].NS;this.GS[t].BS(e)}this.RS=!1}uS(t){return(t=Math.floor(t))<0||t>=this.GS.length?null:this.GS[t]}cS(t){return this._S.get(t.toLowerCase())||null}}}{const al=self.Gs;al.OS=class{constructor(t,s){this.$S=t,this.IS=s.source||null,this.US=s.index,this.VS=s.tag,this.Vy=s.width,this.Wy=s.height,this.WS=null}qr(){this.Vy=0,this.Wy=0,this.$S=null}zS(){return this.IS}Cy(){return this.Vy}My(){return this.Wy}BS(t){this.WS=t}fS(){return this.WS}}}{let ll=function(t,s,e,i){const r=wl;pl.O(yl,e,s),pl.O(Sl,t,s),pl.It(r,yl,Sl),pl.normalize(r,r),i.set(r[0],r[1],r[2],pl.Mt(t,r))},ul=function(t,s,e,i,r,n,h){const o=h.x,a=h.y,l=h.z,u=h.w,c=h.jS,f=h.HS,d=h.qS,p=1-c,m=1-f,g=1-d;return o*t*c+o*i*p+a*s*f+a*r*m+l*e*d+l*n*g>=u||o*i*c+o*t*p+a*r*f+a*s*m+l*n*d+l*e*g>u},cl=function(t,s,e,i){return i.x*t+i.y*s+i.z*e>=i.w};PlaneFromPoints=ll,IsInFrontOfPlane=ul,IsPointInFrontOfPlane=cl;const fl=self.Gs,dl=self.ls,pl=dl.Ss,ml=dl.ws,gl=dl.ds,yl=pl.create(),Sl=pl.create(),wl=pl.create(),vl=ml.create(),bl=gl.create(),xl=pl.create(),Cl=pl.create(),Tl=pl.create(),Ml=pl.create(),Il=pl.create(),Gl=pl.create(),_l=pl.create(),Pl=pl.create(),Rl=ml.v(0,0,1,1);fl.JS={YS(t,s,e,i,r,n,h){const o=i[0]*t+i[4]*s+i[8]*e+i[12],a=i[1]*t+i[5]*s+i[9]*e+i[13],l=i[2]*t+i[6]*s+i[10]*e+i[14],u=i[3]*t+i[7]*s+i[11]*e+i[15];let c=r[0]*o+r[4]*a+r[8]*l+r[12]*u,f=r[1]*o+r[5]*a+r[9]*l+r[13]*u,d=r[2]*o+r[6]*a+r[10]*l+r[14]*u,p=r[3]*o+r[7]*a+r[11]*l+r[15]*u;return 0!==p&&(p=1/p,c*=p,f*=p,d*=p,h[0]=(.5*c+.5)*n[2]+n[0],h[1]=(.5*f+.5)*n[3]+n[1],h[2]=.5*(1+d),!0)},XS(t,s,e,i,r,n,h){const o=bl,a=vl;return gl.multiply(o,r,i),null!==gl.T(o,o)&&(a[0]=(t-n[0])/n[2]*2-1,a[1]=(s-n[1])/n[3]*2-1,a[2]=2*e-1,a[3]=1,ml.At(a,a,o),0!==a[3]&&(a[3]=1/a[3],h[0]=a[0]*a[3],h[1]=a[1]*a[3],h[2]=a[2]*a[3],!0))},KS(t,s,e,i,r,n,h){const o=yl,a=Sl;if(!fl.JS.XS(t,s,0,i,r,n,o))return!1;if(!fl.JS.XS(t,s,1,i,r,n,a))return!1;const l=Sl;pl.O(l,a,o);const u=wl;pl.set(u,0,0,1);const c=-e,f=pl.Mt(u,l);let d=0;if(0===f){if(0!==pl.Mt(u,o)+c)return!1}else if(d=-(pl.Mt(o,u)+c)/f,d<0)return!1;return pl.vt(h,o,l,d),!0}};class Al{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.jS=NaN,this.HS=NaN,this.qS=NaN}set(t,s,e,i){this.x=t,this.y=s,this.z=e,this.w=i,this.jS=t>0?1:0,this.HS=s>0?1:0,this.qS=e>0?1:0}}fl.JS.ZS=class{constructor(){this.QS=new Al,this.tw=new Al,this.sw=new Al,this.ew=new Al,this.iw=new Al,this.rw=new Al}hw(t,s){const e=Rl;fl.JS.XS(0,1,0,t,s,e,xl),fl.JS.XS(1,1,0,t,s,e,Cl),fl.JS.XS(0,0,0,t,s,e,Tl),fl.JS.XS(1,0,0,t,s,e,Ml),fl.JS.XS(0,1,1,t,s,e,Il),fl.JS.XS(1,1,1,t,s,e,Gl),fl.JS.XS(0,0,1,t,s,e,_l),fl.JS.XS(1,0,1,t,s,e,Pl),ll(Tl,xl,Il,this.QS),ll(xl,Cl,Gl,this.tw),ll(Cl,Ml,Pl,this.sw),ll(Ml,Tl,_l,this.ew),ll(_l,Il,Gl,this.rw),ll(Ml,Cl,xl,this.iw)}ow(t,s,e,i,r,n){return ul(t,s,e,i,r,n,this.QS)&&ul(t,s,e,i,r,n,this.tw)&&ul(t,s,e,i,r,n,this.sw)&&ul(t,s,e,i,r,n,this.ew)&&ul(t,s,e,i,r,n,this.iw)&&ul(t,s,e,i,r,n,this.rw)}aw(t,s,e){return!cl(t,s,e,this.iw)}}}{const El=self.Gs,Ol=self.ls,Fl=Ol.Ss,Dl=Ol.ws,Ll=Ol.ds,kl=Ll.create(),Nl=Fl.v(0,0,0),Bl=Fl.v(0,0,0),$l=Fl.v(0,0,0),Ul=Fl.v(0,1,0),Vl=Dl.v(0,0,0,0),Wl=new El.Pl,zl=new El.Rect,jl=new El.Pl(0,0,1,0,1,1,0,1),Hl={lw:1,uw:1e4},ql=Ll.v(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);El.JS.cw=class{constructor(t){t=Object.assign({},Hl,t),this.Vy=0,this.Wy=0,this.fw=El.tn(45),this.dw=Math.tan(this.fw/2),this.pw=Ll.create(),this.mw=Ll.create(),this.gw=!1,this.yw=t.lw,this.Sw=t.uw,this.ww=[],this.bw=new Map,this.xw=null,this.Cw=null,this.Tw=null,this.Mw=null,this.Iw=null,this.Gw=null,this._w=null,this.Pw=null,this.Rw=null,this.Aw=null,this.Ew=null,this.Ow=null,this.Fw=new Map,this.Dw=null,this.Lw=[],this.kw=new Map,this.Nw=0,this.Bw=0,this.$w=1,this.Uw=[this.$w],this.Vw=1,this.Ww=[this.Vw],this.zw=.5,this.jw=[this.zw],this.Hw=0,this.qw=!0,this.Jw=!1}Yw(){this.Nw=0,this.Bw=0,this.xw=null,this.Cw=null,this.Tw=null,this.Mw=null,this.Iw=null,this.Gw=null,this._w=null,this.Pw=null,this.Rw=null,this.Aw=null,this.Ew=null,this.Ow=null,this.Xw()}Kw(){this.Yw(),this.Dw=null}Zw(){for(const t of this.ww)t.qr();this.Yw()}Cy(){return this.Vy}My(){return this.Wy}Qw(t){return this.tv()?100:t/(2*this.sv())}ev(t){return this.tv()?t/(2*this.sv())/this.Qw(t):1}rv(t){this.yw=t}nv(){return this.yw}hv(t){this.Sw=t}ov(){return this.Sw}av(t){this.fw=t,this.dw=Math.tan(this.fw/2)}lv(){return this.fw}sv(){return this.dw}uv(){this.gw=!1}cv(){this.gw=!0}tv(){return!this.gw}fv(){return this.gw}dv(t,s,e=.5,i=.5){const r=this.nv(),n=this.ov(),h=this.lv();if(.5===e&&.5===i)this.pv()?Ll.ut(t,h,s,r,n):Ll.perspective(t,h,s,r,n);else{const h=2*(e=1-e)-2,o=2*e,a=2*i-2,l=2*i,u=this.sv()*r,c=u*s;Ll.ot(t,h*c,o*c,a*u,l*u,r,n),this.pv()&&Ll.mul(t,ql,t)}}mv(t,s,e,i=1){const r=self.devicePixelRatio,n=2*this.Qw(e)*r*this.sv()/e,h=s*n/(2*r*i),o=e*n/(2*r*i),a=-h,l=h,u=-o,c=o;this.pv()?Ll.gt(t,a,l,u,c,this.nv(),this.ov()):Ll.dt(t,a,l,u,c,this.nv(),this.ov())}gv(t,s,e,i,r,n=1){let h=1;this.tv()&&(h=200*this.sv()/r);const o=$l;Fl.set(o,h,-h,1);const a=Nl,l=Bl;Fl.multiply(a,s,o),Fl.multiply(l,e,o),Ll.yt(t,a,l,i||Ul),o[2]=n,Ll.scale(t,t,o)}yv(t,s,e,i,r,n,h,o){return Fl.set(Nl,t,s,e),Fl.set(Bl,i,r,n),this.gv(kl,Nl,Bl,Ul,h,o),kl}Sv(t){this.ww.push(t),this.bw.set(t.Rc(),t)}wv(t){const s=this.ww.indexOf(t);-1!==s&&this.ww.splice(s,1),this.bw.delete(t.Rc())}Xw(){El.bh(this.ww),this.bw.clear()}vv(t){return this.bw.get(t)||null}bv(){return this.xw}xv(){this.Cv(this.xw)}Tv(){return this.Cw}Mv(){this.Cv(this.Cw)}Iv(){this.Cv(this.Tw)}Gv(){this.Cv(this.Mw)}_v(){this.Cv(this.Iw)}Pv(){this.Cv(this.Gw)}Rv(){this.Cv(this._w)}Av(){this.Cv(this.Pw)}Ev(){this.Cv(this.Rw)}Ov(){this.Cv(this.Aw)}Fv(){this.Cv(this.Ew)}Dv(){this.Cv(this.Ow)}Lv(t){this.Dw=t}kv(){return this.Dw}Nv(t,s,e,i,r,n){const h=El.JS.$v.Bv(t,s,e,i,r,n);let o=this.Fw.get(h);return o||(o=El.Hr(El.JS.$v,this,t,s,e,i,r,n),this.Fw.set(h,o)),o.Uv(),o}Vv(t){t.Wv(),0===t.zv()&&(this.Dw===t&&(this.Dw=null),this.Fw.delete(t.jv()),t.qr())}Hv(t){El.bh(this.Lw),this.kw.clear();let s=0;for(const e of t){const t=e[0],i=e[1];this.Lw.push(i),this.kw.set(t,s),s++}}qv(t){return this.Lw[t]}Jv(t){const s=this.kw.get(t);if(void 0===s)throw new Error("invalid blend name");return s}Yv(t){this.Nw=t}Xv(){return this.Nw}Kv(t){this.Bw=t,this.Dw=null}Zv(){return this.Bw}Ry(t,s,e,i){const r=El.an(t,s,e,i),n=Math.sin(r),h=Math.cos(r),o=.5*this.$w,a=n*o,l=h*o,u=this.Vw;2===u?this.Qv(t,s,0,e,i,0,a,l):1===u?this.tb(t,s,0,e,i,0,a,l):this.sb(t,s,0,e,i,0,a,l)}eb(t,s,e,i,r,n){const h=El.an(t,s,i,r),o=Math.sin(h),a=Math.cos(h),l=.5*this.$w,u=o*l,c=a*l,f=this.Vw;2===f?this.Qv(t,s,e,i,r,n,u,c):1===f?this.tb(t,s,e,i,r,n,u,c):this.sb(t,s,e,i,r,n,u,c)}Qv(t,s,e,i,r,n,h,o){const a=this.zw,l=t+a-o,u=s+a-h,c=i+a+o,f=r+a+h,d=2*o,p=2*h,m=l+h,g=u-o,y=l-h+d,S=u+o+p,w=c+h,v=f-o,b=c-h-d,x=f+o-p;this.ib(m,g,e,w,v,n,b,x,n,y,S,e,jl)}tb(t,s,e,i,r,n,h,o){const a=this.zw,l=t+a-o,u=s+a-h,c=i+a+o,f=r+a+h,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,S=f-o,w=c-h,v=f+o;this.ib(d,p,e,y,S,n,w,v,n,m,g,e,jl)}sb(t,s,e,i,r,n,h,o){const a=this.zw,l=t+a,u=s+a,c=i+a,f=r+a,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,S=f-o,w=c-h,v=f+o;this.ib(d,p,e,y,S,n,w,v,n,m,g,e,jl)}rb(t,s,e,i,r,n){const h=El.an(t,s,e,i),o=Math.sin(h),a=Math.cos(h),l=.5*this.$w,u=o*l,c=a*l,f=this.Vw;2===f?this.nb(t,s,e,i,u,c,r,n):1===f?this.hb(t,s,e,i,u,c,r,n):this.ob(t,s,e,i,u,c,r,n)}nb(t,s,e,i,r,n,h,o){const a=this.zw,l=t+a-n,u=s+a-r,c=e+a+n,f=i+a+r,d=2*n,p=2*r,m=l+r,g=u-n,y=l-r+d,S=u+n+p,w=c+r,v=f-n,b=c-r-d,x=f+n-p;Wl.set(m,g,w,v,b,x,y,S),zl.set(h,0,o,0),this.ab(Wl,zl)}hb(t,s,e,i,r,n,h,o){const a=this.zw,l=t+a-n,u=s+a-r,c=e+a+n,f=i+a+r,d=l+r,p=u-n,m=l-r,g=u+n,y=c+r,S=f-n,w=c-r,v=f+n;Wl.set(d,p,y,S,w,v,m,g),zl.set(h,0,o,0),this.ab(Wl,zl)}ob(t,s,e,i,r,n,h,o){const a=this.zw,l=t+a,u=s+a,c=e+a,f=i+a,d=l+r,p=u-n,m=l-r,g=u+n,y=c+r,S=f-n,w=c-r,v=f+n;Wl.set(d,p,y,S,w,v,m,g),zl.set(h,0,o,0),this.ab(Wl,zl)}lb(t,s,e,i){const r=.5*this.$w,n=this.Vw;2===n?this.ub(t,s,e,i,r):1===n?this.cb(t,s,e,i,r):this.fb(t,s,e,i,r)}ub(t,s,e,i,r){this.Qv(t,s,0,e,s,0,0,r),this.Qv(e,s,0,e,i,0,r,0),this.Qv(e,i,0,t,i,0,0,-r),this.Qv(t,i,0,t,s,0,-r,0)}cb(t,s,e,i,r){this.tb(t,s,0,e,s,0,0,r),this.tb(e,s,0,e,i,0,r,0),this.tb(e,i,0,t,i,0,0,-r),this.tb(t,i,0,t,s,0,-r,0)}fb(t,s,e,i,r){this.sb(t,s,0,e,s,0,0,r),this.sb(e,s,0,e,i,0,r,0),this.sb(e,i,0,t,i,0,0,-r),this.sb(t,i,0,t,s,0,-r,0)}pb(t){this.lb(t.Qa(),t.tl(),t.sl(),t.el())}mb(t){const s=El.an(t.Bn(),t.$n(),t.Un(),t.Vn()),e=Math.sin(s),i=Math.cos(s),r=.5*this.$w,n=e*r,h=i*r,o=this.Vw;2===o?this.gb(t,n,h):1===o?this.yb(t,n,h):this.Sb(t,n,h)}gb(t,s,e){this.Qv(t.Bn(),t.$n(),0,t.Un(),t.Vn(),0,s,e),this.Qv(t.Un(),t.Vn(),0,t.Wn(),t.zn(),0,e,-s),this.Qv(t.Wn(),t.zn(),0,t.jn(),t.Hn(),0,-s,-e),this.Qv(t.jn(),t.Hn(),0,t.Bn(),t.$n(),0,-e,s)}yb(t,s,e){this.tb(t.Bn(),t.$n(),0,t.Un(),t.Vn(),0,s,e),this.tb(t.Un(),t.Vn(),0,t.Wn(),t.zn(),0,e,-s),this.tb(t.Wn(),t.zn(),0,t.jn(),t.Hn(),0,-s,-e),this.tb(t.jn(),t.Hn(),0,t.Bn(),t.$n(),0,-e,s)}Sb(t,s,e){this.sb(t.Bn(),t.$n(),0,t.Un(),t.Vn(),0,s,e),this.sb(t.Un(),t.Vn(),0,t.Wn(),t.zn(),0,e,-s),this.sb(t.Wn(),t.zn(),0,t.jn(),t.Hn(),0,-s,-e),this.sb(t.jn(),t.Hn(),0,t.Bn(),t.$n(),0,-e,s)}wb(t){this.$w=t,this.Uw[this.Uw.length-1]=t}bb(){return this.$w}xb(t){if(this.Uw.length>=100)throw new Error("pushed too many line widths - check push/pop pairs");this.Uw.push(t),this.$w=t}Cb(){if(this.Uw.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.Uw.pop(),this.$w=this.Uw.at(-1)}Tb(){this.Vw=0,this.Ww[this.Ww.length-1]=0}Mb(){this.Vw=1,this.Ww[this.Ww.length-1]=0}Ib(){this.Vw=2,this.Ww[this.Ww.length-1]=0}Gb(t){if("butt"===t)this._b();else if("square"===t)this.Pb();else{if("zag"!==t)throw new Error("invalid line cap");this.Rb()}}_b(){if(this.Ww.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.Ww.push(0),this.Vw=0}Pb(){if(this.Ww.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.Ww.push(1),this.Vw=1}Rb(){if(this.Ww.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.Ww.push(2),this.Vw=2}Ab(){if(this.Ww.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.Ww.pop(),this.Vw=this.Ww.at(-1)}Eb(t){this.zw=t,this.jw[this.jw.length-1]=t}Ob(){return this.zw}Fb(t){if(this.jw.length>=100)throw new Error("pushed too many line offsets - check push/pop pairs");this.jw.push(t),this.zw=t}Db(){if(this.jw.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.jw.pop(),this.zw=this.jw.at(-1)}Lb(){this.kb(0),this.Nb(0)}Bb(t){const s=t.length/2;if(s<3)throw new Error("need at least 3 points");const e=s-2,i=e-1,r=t[0],n=t[1];for(let s=0;s<e;s+=2){const e=2*s,h=t[e+2],o=t[e+3],a=t[e+4],l=t[e+5];if(s===i)this.$b(r,n,h,o,a,l,a,l);else{const s=t[e+6],i=t[e+7];this.$b(r,n,h,o,a,l,s,i)}}}Ub(){this.Vb(!0),this.Hw++}Wb(){return this.Hw}zb(){this.Hw++}jb(t){this.qw=!!t}Hb(){return this.qw}qb(t){this.Jw=!!t}Jb(){return this.Jw}Yb(){return!1}pv(){return!1}Xb(){}Kb(){}Zb(){}Qb(){return this.Xb()+this.Kb()+this.Zb()}tx(){return El.Hr(El.JS.sx,this)}}}{const Jl=self.Gs;Jl.JS.ix=class{constructor(t,s){this.Xr=s.name,this.nx=t,this.hx=s.ox||0,this.lx=s.ux||0,this.mx=!!s.gx,this.yx=!!s.Sx,this.wx=!!s.vx,this.bx=!!s.xx,this.Cx=!!s.animated,this.Tx=!!s.Mx,this.Ix=!!s.Gx,this._x=!1,this.Px=this.mx||this.Tx||0!==this.hx||0!==this.lx}qr(){this.nx=null}Rx(){return this.nx}Rc(){return this.Xr}Ax(){return 0!==this.hx||0!==this.lx}Ex(){return this.hx}Ox(){return this.lx}Fx(){return this.mx}Dx(){return this.yx}Lx(){return this.wx}kx(){return this.bx}Nx(){return this.Cx}Bx(){return this.Tx}$x(){return this.Ix}Ux(){return this._x}Vx(){return this.Px}Wx(){return!1}}}{const Yl=self.Gs;Yl.JS.$v=class{constructor(t,s,e,i,r,n,h){this.nx=t,this.jp=0,this.zx=null,this.jx="",this.Hx=e,this.qx=Yl.Hr(Yl.To),this.qx.set(i),this.Jx=r,this.Yx=n,this.Xx=h,"string"==typeof s?this.jx=s:(this.zx=s,this.jx=this.zx.Rc())}qr(){if(this.jp>0)throw new Error("releasing state group still in use");this.nx=null,this.zx=null,this.jx=""}Kx(){const t=this.nx;t.Cv(this.zx),t.Zx(this.Hx),t.Qx(this.qx),t.Kv(this.Jx),t.kb(this.Yx),t.Nb(this.Xx),t.Lv(this)}jv(){return Yl.JS.$v.Bv(this.jx,this.Hx,this.qx,this.Jx,this.Yx,this.Xx)}Uv(){++this.jp}Wv(){--this.jp}zv(){return this.jp}tC(){this.zx=null}sC(t){if(this.zx=t.vv(this.jx),!this.zx)throw new Error("failed to restore shader program")}static Bv(t,s,e,i,r,n){return("string"==typeof t?t:t.Rc())+","+s+","+e.No()+","+e.Bo()+","+e.$o()+","+e.Uo()+","+i+","+r+","+n}}}{let Xl=function(t,s,e){const i=e.Bn(),r=e.$n(),n=e.Un()-i,h=e.Vn()-r;return[i+n*t+(e.jn()-i)*s,r+h*t+(e.Hn()-r)*s]};interpolateQuad=Xl;const Kl=globalThis.Gs,Zl=globalThis.assert,Ql=65535;Kl.JS.eC=class{constructor(t,s,e){this.iC=t,this.rC=s,this.nC=e,this.Ra=NaN,this.Aa=NaN,this.Jx=NaN,this.hC=NaN,this.oC=NaN,this.Ra=0,this.Aa=0,this.Jx=0,this.hC=0,this.oC=0}aC(t,s,e,i){this.Ra=t,this.Aa=s,this.hC=e,this.oC=i}lC(){return this.Ra}uC(t){this.Ra!==t&&(this.Ra=t,this.iC.cC())}fC(){return this.Aa}dC(t){this.Aa!==t&&(this.Aa=t,this.iC.cC())}pC(){return this.Jx}mC(t){this.Jx!==t&&(this.Jx=Math.max(t,0),this.iC.cC())}gC(){return this.hC}yC(t){this.hC=t}SC(){return this.oC}wC(t){this.oC=t}vC(t,s,e){[this.Ra,this.Aa]=Xl(t.Ra,t.Aa,s),this.Jx=t.Jx,this.hC=Kl.Gt(e.Qa(),e.sl(),t.hC),this.oC=Kl.Gt(e.tl(),e.el(),t.oC)}bC(t,s,e){[this.Ra,this.Aa]=Xl(t.Ra,t.Aa,s),this.Jx=t.Jx,[this.hC,this.oC]=Xl(t.hC,t.oC,e)}xC(){return{x:this.lC(),y:this.fC(),z:this.pC(),u:this.gC(),v:this.SC()}}CC(t){this.uC(t.x),this.dC(t.y),t.hasOwnProperty("z")&&this.mC(t.z),this.yC(t.u),this.wC(t.v)}TC(){return this.iC}MC(){return this.rC}IC(){return this.nC}},Kl.JS.GC=class{constructor(t,s,e){if(t<2||s<2)throw new Error("invalid mesh size");this._C=t,this.PC=s,this.RC=e||null,this.AC=[],this.EC=0,this.OC=0,this.FC=1,this.DC=1,this.LC=0,this.kC=!1,this.NC=[],this.BC=0,this.$C=!0;const i=t-1,r=s-1;for(let e=0;e<s;++e){const s=[];for(let n=0;n<t;++n){const t=Kl.Hr(Kl.JS.eC,this,n,e),h=n/i,o=e/r;t.aC(h,o,h,o),s.push(t)}this.AC.push(s)}}qr(){Kl.bh(this.AC),Kl.bh(this.NC)}UC(){return this._C}VC(){return this.PC}WC(){return this.RC}zC(){return this.AC}cC(){this.kC=!0,this.$C=!0}jC(){if(!this.kC)return;let t=1/0,s=1/0,e=-1/0,i=-1/0,r=0;for(const n of this.AC)for(const h of n){const n=h.lC(),o=h.fC();t=Math.min(t,n),s=Math.min(s,o),e=Math.max(e,n),i=Math.max(i,o),r=Math.max(r,h.pC())}this.EC=t,this.OC=s,this.FC=e,this.DC=i,this.LC=r,this.kC=!1}HC(){return this.jC(),this.EC}qC(){return this.jC(),this.OC}JC(){return this.jC(),this.FC}YC(){return this.jC(),this.DC}XC(){return this.jC(),this.LC}KC(){return this.XC()>0}ZC(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this._C||s<0||s>=this.PC?null:this.AC[s][t]}QC(t,s,e){const i=e instanceof Kl.Rect;if(t.UC()!==this.UC()||t.VC()!==this.VC())throw new Error("source mesh wrong size");const r=t.AC,n=this.AC;for(let t=0,h=n.length;t<h;++t){const h=r[t],o=n[t];for(let t=0,r=o.length;t<r;++t){const r=h[t],n=o[t];i?n.vC(r,s,e):n.bC(r,s,e)}}this.$C=!0}tT(t){if(!this.$C&&this.BC===t)return;const s=this._C,e=this.PC,i=this.NC,r=Math.floor(65535/s)-1;if(r<=0)throw new Error("mesh too large");const n=Math.ceil((e-1)/r);n<i.length&&(i.length=n);let h=0;for(let o=0;o<n;++o){const n=Math.min(r,e-h-1),a=(n+1)*s,l=3*a,u=2*a,c=(s-1)*n*6;if(o===i.length)i.push({sT:new Float32Array(l),eT:new Float32Array(u),iT:new Uint16Array(c)});else{const t=i[o];t.sT.length!==l&&(t.sT=new Float32Array(l)),t.eT.length!==u&&(t.eT=new Float32Array(u)),t.iT.length!==c&&(t.iT=new Uint16Array(c))}const{sT:f,eT:d,iT:p}=i[o];this.rT(h,n,t,f,d,p),h+=r}this.BC=t,this.$C=!1}rT(t,s,e,i,r,n){const h=this.AC,o=this._C;let a=0,l=0,u=0;for(let c=t,f=t+s+1;c<f;++c){const s=h[c],d=c+1,p=c-t,m=p*o,g=(p+1)*o;for(let t=0,h=s.length;t<h;++t){const o=s[t],c=t+1;if(i[a++]=o.lC(),i[a++]=o.fC(),i[a++]=o.pC()+e,r[l++]=o.gC(),r[l++]=o.SC(),c<h&&d<f){const s=t+m,e=c+m,i=c+g,r=t+g;n[u++]=s,n[u++]=e,n[u++]=i,n[u++]=s,n[u++]=i,n[u++]=r}}}}nT(t,s){this.tT(s);for(const{sT:s,eT:e,iT:i}of this.NC)t.hT(s,e,i)}oT(t,s){s||(s=(t,s,e)=>[t,s,e]);const e=this.AC;let i=e[0];for(let r=1,n=e.length;r<n;++r){const h=e[r];let o=i[0],a=h[0];for(let e=1,l=h.length;e<l;++e){const u=i[e],c=h[e],[f,d,p]=s(o.lC(),o.fC(),o.pC()),[m,g,y]=s(u.lC(),u.fC(),u.pC()),[S,w,v]=s(c.lC(),c.fC(),c.pC()),[b,x,C]=s(a.lC(),a.fC(),a.pC());t.eb(f,d,p,m,g,y),t.eb(f,d,p,S,w,v),t.eb(f,d,p,b,x,C),e===l-1&&t.eb(m,g,y,S,w,v),r===n-1&&t.eb(b,x,C,S,w,v),o=u,a=c}i=h}}aT(t){const s=.001,e=.99999999,i=t.pu(),r=[],n=this.UC()-1,h=this.VC()-1,o=1/n,a=1/h,l=n-1,u=h-1;let c=i[0],f=i[1],d=Kl.Zr(Math.floor(c*n),0,l),p=Kl.Zr(Math.floor(f*h),0,u),m=!0,g=0,y=0,S=0,w=-1;const v=()=>{c=Kl.Zr(Kl.Gt(c,g,S),0,1),f=Kl.Zr(Kl.Gt(f,y,S),0,1),r.push(c,f)};for(let t=0,b=i.length;t<b;t+=2){c=i[t],f=i[t+1],r.push(c,f),d=Kl.Zr(Math.floor(c*n),0,l),p=Kl.Zr(Math.floor(f*h),0,u);const x=(t+2)%b;for(g=i[x],y=i[x+1],w=-1;;){if(r.length>1e6)throw new Error("Too many mesh poly points");const t=d*o,i=p*a,n=(d+1)*o,h=(p+1)*a;if(m=Kl.Xn(c,f,t,i,n,i,n,h),0!==w&&(S=Kl.Yn(c,f,g,y,t,i,n,h,-.001),S>=0&&S<=e))v(),m=!m,w=0;else if(p>0&&2!==w&&(S=Kl.Yn(c,f,g,y,t,i,n,i,s),S>=0&&S<=e))v(),p--,m=!1,w=4;else if(d<l&&3!==w&&(S=Kl.Yn(c,f,g,y,n,i,n,h,s),S>=0&&S<=e))v(),d++,m=!1,w=1;else if(d>0&&1!==w&&(S=Kl.Yn(c,f,g,y,t,i,t,h,s),S>=0&&S<=e))v(),d--,m=!0,w=3;else{if(!(p<u&&4!==w&&(S=Kl.Yn(c,f,g,y,t,h,n,h,s),S>=0&&S<=e)))break;v(),p++,m=!0,w=2}}}return Kl.Hr(Kl.lu,r)}lT(t,s){const e=this.uT(t);this.cT(e),s.gu(e)}uT(t){const s=[],e=t.pu();for(let t=0,i=e.length;t<i;t+=2){const i=e[t],r=e[t+1],[n,h]=this.fT(i,r);s.push(n,h)}return s}fT(t,s){const e=this.UC()-1,i=this.VC()-1,r=1/e,n=1/i,h=Kl.Zr(Math.floor(t*e),0,e-1),o=Kl.Zr(Math.floor(s*i),0,i-1),a=h*r,l=o*n,u=(h+1)*r,c=(o+1)*n,f=this.ZC(h,o),d=this.ZC(h+1,o+1),p=Kl.Xn(t,s,a,l,u,l,u,c),m=p?a+r:a,g=p?l:l+n,y=this.ZC(h+(p?1:0),o+(p?0:1)),[S,w,v]=Kl.Kn(t,s,a,l,m,g,u,c);return Kl.Zn(S,w,v,f.lC(),f.fC(),f.pC(),y.lC(),y.fC(),y.pC(),d.lC(),d.fC(),d.pC())}cT(t){const s=[],e=1e-7;let i=t[0],r=t[1],n=i-t.at(-2),h=r-t.at(-1);for(let o=0,a=t.length;o<a;o+=2){const l=(o+2)%a,u=t[l],c=t[l+1],f=u-i,d=c-r,p=Math.abs(f)<e&&Math.abs(n)<e&&Math.sign(d)===Math.sign(h),m=Math.abs(d)<e&&Math.abs(h)<e&&Math.sign(f)===Math.sign(n);(!p&&!m&&Math.abs(f/n-d/h)>.001||0==f&&0===d)&&s.push(i,r),i=u,r=c,n=f,h=d}s.length>=6&&s.length<t.length&&Kl.Mh(t,s)}xC(){return{cols:this.UC(),rows:this.VC(),points:this.AC.map(t=>t.map(t=>t.xC()))}}CC(t){const s=this.UC(),e=this.VC();if(t.cols!==s||t.rows!==e)throw new Error("mesh data wrong size");const i=t.points;for(let t=0;t<e;++t){const e=i[t];for(let i=0;i<s;++i)this.ZC(i,t).CC(e[i])}}}}{let tu=function(t,s){let e,i,r,n;switch(t){case"rgba8":e=s.RGBA8,i=s.RGBA,r=s.RGBA,n=s.UNSIGNED_BYTE;break;case"rgb8":e=s.RGB8,i=s.RGB,r=s.RGB,n=s.UNSIGNED_BYTE;break;case"rgba4":e=s.RGBA4,i=s.RGBA,r=s.RGBA,n=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":e=s.RGB5_A1,i=s.RGBA,r=s.RGBA,n=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":e=s.RGB565,i=s.RGB,r=s.RGB,n=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{dT:e,pT:i,format:r,type:n}};GetFormatSpecifiers=tu;const su=self.Gs,eu=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),iu=new Set(["nearest","bilinear","trilinear"]),ru=new Set(["default","low","high"]),nu=new Set(["clamp-to-edge","repeat","mirror-repeat"]),hu={mT:"clamp-to-edge",gT:"clamp-to-edge",yT:"trilinear",ST:0,wT:"rgba8",vT:!0,bT:"default",xT:!0,CT:!1,width:-1,height:-1},ou={xT:!0,flipY:!1},au=new Set;su.JS.TT=class{constructor(t){this.nx=t,this.MT=null,this.Vy=0,this.Wy=0,this.IT=!0,this.GT="clamp-to-edge",this._T="clamp-to-edge",this.PT="trilinear",this.RT=0,this.AT="rgba8",this.ET=!1,this.OT="default",this.jp=0}FT(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData||t instanceof ArrayBuffer))throw new Error("invalid texture source");if(s=Object.assign({},hu,s),this.MT)throw new Error("already created texture");if(this.GT=s.mT,this._T=s.gT,this.PT=s.yT,this.RT=s.ST,this.AT=s.wT,this.ET=!!s.vT&&this.nx.Hb(),this.OT=s.bT,!nu.has(this.GT)||!nu.has(this._T))throw new Error("invalid wrap mode");if(!iu.has(this.PT))throw new Error("invalid sampling");if(!eu.has(this.AT))throw new Error("invalid pixel format");if(!ru.has(this.OT))throw new Error("invalid mipmap quality");if(this.IT=!0,t instanceof ArrayBuffer||null===t||s.CT){if(this.Vy=s.width,this.Wy=s.height,t instanceof ArrayBuffer&&t.byteLength!==this.Vy*this.Wy*4)throw new Error("ArrayBuffer wrong size")}else this.Vy=t.width,this.Wy=t.height;if(this.Vy<=0||this.Wy<=0)throw new Error("invalid texture data size");if(s.CT){const s=su.co(this.Vy,this.Wy);s.getContext("2d").drawImage(t,0,0,this.Vy,this.Wy),t=s}const e=su.bn(this.Vy)&&su.bn(this.Wy),i=this.nx.DT();if(this.Vy>i||this.Wy>i)throw new Error("texture data exceeds maximum texture size");const r=this.nx.LT(),n=this.nx.kT();this.MT=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.MT),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.xT),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);const h=tu(this.AT,r);if(this.nx.NT()||e||!this.BT())if(n>=2){let s;s=this.ET?Math.floor(Math.log2(Math.max(this.Vy,this.Wy))+1):1,r.texStorage2D(r.TEXTURE_2D,s,h.dT,this.Vy,this.Wy),t instanceof ArrayBuffer?r.texSubImage2D(r.TEXTURE_2D,0,0,0,this.Vy,this.Wy,h.format,h.type,new Uint8Array(t)):null!==t&&r.texSubImage2D(r.TEXTURE_2D,0,0,0,h.format,h.type,t)}else t instanceof ArrayBuffer?r.texImage2D(r.TEXTURE_2D,0,h.pT,this.Vy,this.Wy,0,h.format,h.type,new Uint8Array(t)):null===t?r.texImage2D(r.TEXTURE_2D,0,h.pT,this.Vy,this.Wy,0,h.format,h.type,null):r.texImage2D(r.TEXTURE_2D,0,h.pT,h.format,h.type,t);else{if(null===t)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if(t instanceof ArrayBuffer&&(t=new ImageData(new Uint8ClampedArray(t),this.Vy,this.Wy)),t instanceof ImageData){const s=su.co(this.Vy,this.Wy);s.getContext("2d").putImageData(t,0,0),t=s}const s=su.co(su.xn(this.Vy),su.xn(this.Wy)),e=s.getContext("2d");e.imageSmoothingEnabled="nearest"!==this.PT,e.drawImage(t,0,0,this.Vy,this.Wy,0,0,s.width,s.height),r.texImage2D(r.TEXTURE_2D,0,h.pT,h.format,h.type,s)}null!==t&&this.$T(r),r.bindTexture(r.TEXTURE_2D,null),this.nx.UT(),this.jp=1,au.add(this)}VT(t,s,e){if(e=Object.assign({},hu,e),this.MT)throw new Error("already created texture");if(this.GT=e.mT,this._T=e.gT,this.PT=e.yT,this.AT=e.wT,this.ET=!!e.vT&&this.nx.Hb(),this.OT=e.bT,!nu.has(this.GT)||!nu.has(this._T))throw new Error("invalid wrap mode");if(!iu.has(this.PT))throw new Error("invalid sampling");if(!eu.has(this.AT))throw new Error("invalid pixel format");if(!ru.has(this.OT))throw new Error("invalid mipmap quality");this.IT=!1,this.Vy=Math.floor(t),this.Wy=Math.floor(s);const i=su.bn(this.Vy)&&su.bn(this.Wy),r=this.nx.DT();if(this.Vy<=0||this.Wy<=0)throw new Error("invalid texture size");if(this.Vy>r||this.Wy>r)throw new Error("texture exceeds maximum texture size");if(!this.nx.NT()&&this.BT()&&!i)throw new Error("non-power-of-two tiled textures not supported");const n=this.nx.LT(),h=this.nx.kT();this.MT=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.MT),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.xT),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const o=tu(this.AT,n),a=h>=2?o.dT:o.pT;n.texImage2D(n.TEXTURE_2D,0,a,this.Vy,this.Wy,0,o.format,o.type,null),this.$T(n),n.bindTexture(n.TEXTURE_2D,null),this.nx.UT(),this.jp=1,au.add(this)}WT(t){if("default"===this.OT)return this.IT?t.NICEST:t.FASTEST;if("low"===this.OT)return t.FASTEST;if("high"===this.OT)return t.NICEST;throw new Error("invalid mipmap quality")}BT(){return"clamp-to-edge"!==this.GT||"clamp-to-edge"!==this._T}zT(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}$T(t){const s=su.bn(this.Vy)&&su.bn(this.Wy);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.zT(t,this.GT)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.zT(t,this._T)),"nearest"===this.PT)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.ET=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.nx.NT())&&this.ET){t.hint(t.GENERATE_MIPMAP_HINT,this.WT(t)),t.generateMipmap(t.TEXTURE_2D);const s="trilinear"===this.PT&&!this.nx.Jb();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,s?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.ET=!1;const e=this.nx.jT();e&&this.RT>0&&"nearest"!==this.PT&&t.texParameterf(t.TEXTURE_2D,e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.RT,this.nx.HT()))}qT(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.MT||this.jp<=0)throw new Error("texture not created");if(this.IT)throw new Error("cannot update static texture");s=Object.assign({},ou,s);const e=t.width||t.videoWidth,i=t.height||t.videoHeight,r=this.nx.kT(),n=this.nx.LT();n.bindTexture(n.TEXTURE_2D,this.MT),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.xT),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!!s.flipY);const h=tu(this.AT,n),o=r>=2?h.dT:h.pT;try{if(this.Vy===e&&this.Wy===i){const s=su.bn(this.Vy)&&su.bn(this.Wy);n.texSubImage2D(n.TEXTURE_2D,0,0,0,h.format,h.type,t),(s||this.nx.NT())&&this.ET&&(n.hint(n.GENERATE_MIPMAP_HINT,this.WT(n)),n.generateMipmap(n.TEXTURE_2D))}else{this.Vy=e,this.Wy=i;const s=su.bn(this.Vy)&&su.bn(this.Wy);if(!this.nx.NT()&&this.BT()&&!s)throw new Error("non-power-of-two tiled textures not supported");n.texImage2D(n.TEXTURE_2D,0,o,h.format,h.type,t),(s||this.nx.NT())&&this.ET&&(n.hint(n.GENERATE_MIPMAP_HINT,this.WT(n)),n.generateMipmap(n.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}n.bindTexture(n.TEXTURE_2D,null),this.nx.UT()}JT(){if(this.jp>0)throw new Error("texture still has references");if(!this.MT)throw new Error("already deleted texture");au.delete(this),this.nx.LT().deleteTexture(this.MT),this.MT=null}YT(){return!!this.MT}XT(){return this.MT}Rx(){return this.nx}KT(){this.jp++}ZT(){if(this.jp<=0)throw new Error("no more references");this.jp--}QT(){return this.jp}Cy(){return this.Vy}My(){return this.Wy}tM(){return this.IT}sM(){let t=this.Vy*this.Wy;switch(this.AT){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.ET&&(t+=Math.floor(t/3)),t}static tC(){au.clear()}static eM(){return au.values()}}}{const lu=self.Gs,uu=self.assert,cu=self.ls,fu=cu.Ss,du=cu.ds,pu=new Set(["nearest","bilinear","trilinear"]),mu={yT:"trilinear",alpha:!0,depth:!1,iM:!0,rM:!0,nM:0},gu=new Set;lu.JS.hM=class{constructor(t){this.nx=t,this.oM=null,this.aM=null,this.MT=null,this.lM=null,this.Vy=0,this.Wy=0,this.uM=!0,this.PT="trilinear",this.cM=!0,this.fM=!1,this.dM=!0,this.pM=0,this.mM=du.create(),this.gM=0,this.yM=0,this.SM=0}wM(t,s,e){e=Object.assign({},mu,e);const i=this.nx.kT();if(this.MT||this.lM)throw new Error("already created render target");if(this.PT=e.yT,this.cM=!!e.alpha,this.fM=!!e.depth,this.dM=!!e.iM,this.uM=!!e.rM,this.pM=e.nM,!pu.has(this.PT))throw new Error("invalid sampling");if(this.pM>0&&(i<2||this.dM))throw new Error("invalid use of multisampling");if(i<2&&(this.dM=!0),this.Vy=t,this.Wy=s,this.Vy<=0||this.Wy<=0)throw new Error("invalid render target size");this.vM();const r=this.nx.LT();if(this.oM=r.createFramebuffer(),this.fM&&(this.aM=r.createFramebuffer()),this.dM){this.MT=this.nx.bM(this.Vy,this.Wy,{yT:this.PT,wT:this.cM?"rgba8":"rgb8",vT:!1});const t=this.MT.XT();r.bindFramebuffer(r.FRAMEBUFFER,this.oM),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),this.fM&&(r.bindFramebuffer(r.FRAMEBUFFER,this.aM),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0))}else{this.lM=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,this.lM);const t=this.cM?r.RGBA8:r.RGB8;if(this.pM>0){const s=r.getInternalformatParameter(r.RENDERBUFFER,t,r.SAMPLES);if(s&&s[0]){const t=s[0];this.pM>t&&(this.pM=t)}else this.pM=0}0===this.pM?r.renderbufferStorage(r.RENDERBUFFER,t,this.Vy,this.Wy):r.renderbufferStorageMultisample(r.RENDERBUFFER,this.pM,t,this.Vy,this.Wy),r.bindFramebuffer(r.FRAMEBUFFER,this.oM),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,this.lM),this.fM&&(r.bindFramebuffer(r.FRAMEBUFFER,this.aM),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,this.lM)),r.bindRenderbuffer(r.RENDERBUFFER,null)}const n=this.nx.xM();this.fM&&n&&(r.bindFramebuffer(r.FRAMEBUFFER,this.oM),this.nx.CM()?r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,n,0):r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,n)),r.bindFramebuffer(r.FRAMEBUFFER,null),gu.add(this)}TM(t,s){if(this.Vy===t&&this.Wy===s)return;this.Vy=t,this.Wy=s,this.vM();const e=this.nx.LT();e.bindFramebuffer(e.FRAMEBUFFER,this.oM),this.MT?this.MT.qT(new ImageData(this.Vy,this.Wy)):(e.bindRenderbuffer(e.RENDERBUFFER,this.lM),e.renderbufferStorage(e.RENDERBUFFER,this.cM?e.RGBA8:e.RGB8,this.Vy,this.Wy),e.bindRenderbuffer(e.RENDERBUFFER,null));const i=this.nx.xM();this.fM&&i&&(this.nx.CM()?e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,i,0):e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,i)),e.bindFramebuffer(e.FRAMEBUFFER,null)}JT(){if(!this.MT&&!this.lM)throw new Error("already deleted render target");gu.delete(this);const t=this.nx.LT();this.MT?(t.bindFramebuffer(t.FRAMEBUFFER,this.oM),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.fM&&(t.bindFramebuffer(t.FRAMEBUFFER,this.aM),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.nx.MM(this.MT),this.MT=null):this.lM&&(t.bindFramebuffer(t.FRAMEBUFFER,this.oM),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.fM&&(t.bindFramebuffer(t.FRAMEBUFFER,this.aM),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.lM),this.lM=null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.nx.kT()>=2&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.oM),this.fM&&t.deleteFramebuffer(this.aM);const s=this.nx.IM();s.GM=null,s._M=null,this.oM=null}vM(){this.nx.dv(this.mM,this.Vy/this.Wy),this.gM=this.nx.lv(),this.yM=this.nx.nv(),this.SM=this.nx.ov()}PM(){return this.oM}RM(){return this.aM}Rx(){return this.nx}AM(){return this.MT}EM(){return this.nx.lv()===this.gM&&this.nx.nv()===this.yM&&this.nx.ov()===this.SM||this.vM(),this.mM}OM(){return"nearest"!==this.PT}FM(){return this.cM}DM(){return this.dM}LM(){return this.fM}Cy(){return this.Vy}My(){return this.Wy}kM(){return this.uM}NM(){return this.pM}BM(){const t={yT:this.PT,alpha:this.cM,iM:this.dM};return this.uM||(t.width=this.Vy,t.height=this.Wy),t}$M(t){return"nearest"!==(t=Object.assign({},mu,t)).yT===this.OM()&&!!t.alpha===this.FM()&&!!t.depth===this.LM()&&!(this.nx.kT()>=2&&!!t.iM!==this.DM())&&("number"==typeof t.width||"number"==typeof t.height?!this.kM()&&this.Cy()===Math.floor(t.width)&&this.My()===Math.floor(t.height):this.kM())}UM(){return this.MT?this.MT.XT():null}sM(){return this.MT?this.MT.sM():this.Vy*this.Wy*(this.cM?4:3)}static async VM(t,s){const e=await t.WM(s,!0);return await lu.po(e)}static tC(){gu.clear()}static zM(){return gu.values()}static jM(t,s){for(const e of gu)e.kM()&&e.TM(t,s)}}}{const yu=self.Gs,Su=self.ls,wu=Su.Ss,vu=Su.ds,bu=new Set(["aPos","aTex","aColor","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);yu.JS.HM=class extends yu.JS.ix{static async qM(t,s){const e=t.LT(),i=s.src,r=s.JM,n=s.name,h=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(h,i),e.compileShader(h);const o=e.createShader(e.VERTEX_SHADER);e.shaderSource(o,r),e.compileShader(o);const a=e.createProgram();e.attachShader(a,h),e.attachShader(a,o),e.bindAttribLocation(a,0,"aPos"),e.bindAttribLocation(a,1,"aTex"),e.bindAttribLocation(a,2,"aColor"),e.bindAttribLocation(a,3,"aPoints"),e.linkProgram(a);const l=t.YM();if(l?await t.XM(()=>e.getProgramParameter(a,l.COMPLETION_STATUS_KHR)):await yu.ph(5),!e.getShaderParameter(h,e.COMPILE_STATUS)){const t=e.getShaderInfoLog(h);throw e.deleteShader(h),e.deleteShader(o),e.deleteProgram(a),new Error("Error compiling fragment shader: "+t)}if(!e.getShaderParameter(o,e.COMPILE_STATUS)){const t=e.getShaderInfoLog(o);throw e.deleteShader(h),e.deleteShader(o),e.deleteProgram(a),new Error("Error compiling vertex shader: "+t)}if(!e.getProgramParameter(a,e.LINK_STATUS)){const t=e.getProgramInfoLog(a);throw e.deleteShader(h),e.deleteShader(o),e.deleteProgram(a),new Error("Error linking shader program: "+t)}const u=yu.Cm(e.getProgramInfoLog(a)||"").trim();return u&&!yu.vm(u)&&console.info(`[WebGL] Shader program '${n}' compilation log: `,u),e.deleteShader(h),e.deleteShader(o),a}static async KM(t,s){const e=await yu.JS.HM.qM(t,s);return new yu.JS.HM(t,e,s)}constructor(t,s,e){super(t,e);const i=t.LT(),r=t.IM();t.Vb(),i.useProgram(s),this.ZM=i,this.zx=s,this.QM="<default-device-transform>"===e.name;const n=i.getAttribLocation(s,"aPos"),h=i.getAttribLocation(s,"aTex"),o=i.getAttribLocation(s,"aColor");this.tI=i.getAttribLocation(s,"aPoints"),-1!==n&&(i.bindBuffer(i.ARRAY_BUFFER,t.sI),i.vertexAttribPointer(n,3,i.FLOAT,!1,0,0),i.enableVertexAttribArray(n)),-1!==h&&(i.bindBuffer(i.ARRAY_BUFFER,t.eI),i.vertexAttribPointer(h,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(h)),-1!==o&&(i.bindBuffer(i.ARRAY_BUFFER,t.iI),i.vertexAttribPointer(o,4,t.rI()?i.HALF_FLOAT:i.FLOAT,!1,0,0),i.enableVertexAttribArray(o)),-1!==this.tI&&(i.bindBuffer(i.ARRAY_BUFFER,t.nI),i.vertexAttribPointer(this.tI,4,i.FLOAT,!1,0,0),i.enableVertexAttribArray(this.tI)),i.bindBuffer(i.ARRAY_BUFFER,null),this.hI=new yu.JS.oI(this,"matP","mat4"),this.aI=new yu.JS.oI(this,"matMV","mat4"),this.lI=new yu.JS.oI(this,"color","vec4"),this.uI=new yu.JS.oI(this,"samplerFront","sampler"),this.cI=new yu.JS.oI(this,"pointTexStart","vec2"),this.fI=new yu.JS.oI(this,"pointTexEnd","vec2"),this.dI=new yu.JS.oI(this,"zElevation","float"),this.pI=new yu.JS.oI(this,"tileSize","vec2"),this.mI=new yu.JS.oI(this,"tileSpacing","vec2"),this.gI=new yu.JS.oI(this,"color2_","vec4"),this.yI=new yu.JS.oI(this,"outlineThickness","float"),this.SI=new yu.JS.oI(this,"samplerBack","sampler"),this.wI=new yu.JS.oI(this,"samplerDepth","sampler"),this.vI=new yu.JS.oI(this,"destStart","vec2"),this.bI=new yu.JS.oI(this,"destEnd","vec2"),this.xI=new yu.JS.oI(this,"srcStart","vec2"),this.CI=new yu.JS.oI(this,"srcEnd","vec2"),this.TI=new yu.JS.oI(this,"srcOriginStart","vec2"),this.MI=new yu.JS.oI(this,"srcOriginEnd","vec2"),this.II=new yu.JS.oI(this,"pixelSize","vec2"),this.GI=new yu.JS.oI(this,"seconds","float"),this._I=new yu.JS.oI(this,"devicePixelRatio","float"),this.RI=new yu.JS.oI(this,"layerScale","float"),this.AI=new yu.JS.oI(this,"layerAngle","float"),this.EI=new yu.JS.oI(this,"layoutStart","vec2"),this.OI=new yu.JS.oI(this,"layoutEnd","vec2"),this.FI=new yu.JS.oI(this,"zNear","float"),this.DI=new yu.JS.oI(this,"zFar","float"),this.LI=!!(this.II.kI()||this.GI.kI()||this.SI.kI()||this.vI.kI()||this.bI.kI()||this.xI.kI()||this.CI.kI()||this.TI.kI()||this.MI.kI()||this._I.kI()||this.RI.kI()||this.AI.kI()||this.EI.kI()||this.OI.kI());const a=e.parameters||[];this.NI=[],this._x=this.II.kI()||this.xI.kI()||this.CI.kI()||this.TI.kI()||this.MI.kI(),this.BI=!1,this.$I=!1,this.lI.UI(1,1,1,1),this.gI.UI(1,1,1,1),this.uI.VI(0),this.SI.VI(1),this.wI.VI(2),this.cI.WI(0,0),this.fI.WI(1,1),this.dI.zI(0),this.pI.WI(0,0),this.mI.WI(0,0),this.vI.WI(0,0),this.bI.WI(1,1),this.xI.WI(0,0),this.CI.WI(0,0),this.TI.WI(0,0),this.MI.WI(0,0),this.II.WI(0,0),this._I.zI(1),this.FI.zI(t.nv()),this.DI.zI(t.ov()),this.RI.zI(1),this.AI.zI(0),this.GI.zI(0),this.EI.WI(0,0),this.OI.WI(0,0),this.yI.zI(1);for(const t of a){const s=t[0],e=t[2],i=new yu.JS.oI(this,s,e);"color"===e?i.jI(0,0,0):i.zI(0),this.NI.push(i)}this.QM?this.HI(r.qI):(this.JI(r.qI,!0),this.YI(r.XI,!0));const l=r.KI;i.useProgram(l?l.zx:null)}qr(){this.ZM.deleteProgram(this.zx),this.zx=null,this.nx.wv(this),this.ZM=null,super.qr()}ZI(){return this.ZM}QI(){return this.zx}tG(){return this.NI.length}sG(t){return t<0||t>=this.NI.length?null:this.NI[t].eG()}iG(t){for(let s=0,e=t.length;s<e;++s)if(!this.NI[s].rG(t[s]))return!1;return!0}nG(t){for(let s=0,e=t.length;s<e;++s)this.NI[s].hG(t[s])}oG(t,s,e,i,r,n,h,o,a,l){return!(this.SI.kI()||this.II.kI()&&!this.II.aG(r,n)||this.vI.kI()&&!this.vI.aG(t.Qa(),t.tl())||this.bI.kI()&&!this.bI.aG(t.sl(),t.el())||this._I.kI()&&!this._I.lG(h)||this.RI.kI()&&!this.RI.lG(o)||this.AI.kI()&&!this.AI.lG(a)||this.xI.kI()&&!this.xI.aG(s.Qa(),s.tl())||this.CI.kI()&&!this.CI.aG(s.sl(),s.el())||this.TI.kI()&&!this.TI.aG(e.Qa(),e.tl())||this.MI.kI()&&!this.MI.aG(e.sl(),e.el())||this.EI.kI()&&!this.EI.aG(i.Qa(),i.tl())||this.OI.kI()&&!this.OI.aG(i.tl(),i.el())||this.GI.kI()&&!this.GI.lG(l))}uG(t,s,e,i,r,n,h,o,a,l){this.SI.kI()||(this.II.kI()&&this.II.cG(r,n),this.vI.kI()&&this.vI.cG(t.Qa(),t.tl()),this.bI.kI()&&this.bI.cG(t.sl(),t.el()),this._I.kI()&&this._I.fG(h),this.RI.kI()&&this.RI.fG(o),this.AI.kI()&&this.AI.fG(a),this.xI.kI()&&this.xI.cG(s.Qa(),s.tl()),this.CI.kI()&&this.CI.cG(s.sl(),s.el()),this.TI.kI()&&this.TI.cG(e.Qa(),e.tl()),this.MI.kI()&&this.MI.cG(e.sl(),e.el()),this.EI.kI()&&this.EI.cG(i.Qa(),i.tl()),this.OI.kI()&&this.OI.cG(i.tl(),i.el()),this.GI.kI()&&this.GI.fG(l))}JI(t,s){this.BI&&!s||this.QM||(this.hI.kI()&&this.hI.dG(t),this.BI=!0)}pG(){this.BI=!1}YI(t,s){this.$I&&!s||this.QM||(this.aI.kI()&&this.aI.dG(t),this.$I=!0)}mG(){this.$I=!1}HI(t){if(!this.QM)throw new Error("not device transform shader");this.hI.dG(t);const s=this.nx,e=s.Cy()/2,i=s.My()/2,r=s.yv(e,i,s.Qw(s.My()),e,i,0,s.My());this.aI.dG(r)}gG(t){this.lI.kI()&&this.lI.yG(t[0],t[1],t[2],t[3])}static SG(){return bu}static wG(t){return t?"\n#extension GL_EXT_conservative_depth : enable\nlayout (depth_greater) out highp float gl_FragDepth;\n\t":""}static vG(t){const s=t?"highp":"mediump";return["attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"attribute lowp vec4 aColor;","varying lowp vec4 vColor;","uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","\tvColor = aColor;","}"].join("\n")}static bG(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"in lowp vec4 aColor;","out lowp vec4 vColor;","uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","\tvColor = aColor;","}"].join("\n")}static xG(){return["varying mediump vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * vColor;","}"].join("\n")}static CG(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * vColor;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static TG(t){return["#version 300 es",yu.JS.HM.wG(t),"in mediump vec2 vTex;","out lowp vec4 outColor;","in lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * vColor;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static MG(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","}"].join("\n")}static IG(){return["#extension GL_EXT_frag_depth : enable","varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static GG(t){return["#version 300 es",yu.JS.HM.wG(t),"in highp vec2 vTex;","out lowp vec4 outColor;","in lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static _G(t,s,e,i){let r="";return t>=2?r="#version 300 es\n"+yu.JS.HM.wG(i):(s&&(r="#extension GL_EXT_frag_depth : enable\n"),e&&(r+="#extension GL_EXT_shader_texture_lod : enable\n",r+="#extension GL_OES_standard_derivatives : enable\n")),r+`\nprecision highp float;\n${t>=2?"in":"varying"} vec2 vTex;\n${t>=2?"out lowp vec4 outColor;":""}\n${t>=2?"in":"varying"} lowp vec4 vColor;\nuniform lowp sampler2D samplerFront;\nuniform vec2 pixelSize;\n\nuniform vec2 tileSize;\nuniform vec2 tileSpacing;\nuniform float outlineThickness;\n\nconst float PI = 3.1415926;\n\nlowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)\n{\n\treturn (a + b + (a - b) * cos(x * PI)) / 2.0;\n}\n\nvec3 randVec3(vec2 seed)\n{\n\treturn vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));\n}\n\nlowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)\n{\n\tvec2 posRandom = tileSize;\n\tfloat angleRandom = outlineThickness;\n\t\n\tvec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;\n\t\n\tfloat angle = angleRandom * rand.z * PI;\n\tfloat sin_a = sin(angle);\n\tfloat cos_a = cos(angle);\n\tfloat aspect = pixelSize.x / pixelSize.y;\n\n\tvec2 mid = tile + vec2(0.5, 0.5);\n\tvec2 dp = uv - mid;\n\tdp.x /= aspect;\n\tvec2 r = vec2(dp.x * cos_a - dp.y * sin_a,\n\t\t\t\t  dp.y * cos_a + dp.x * sin_a);\n\tr.x *= aspect;\n\n\tvec2 p = mid + r + (posRandom * rand.xy / 2.0);\n\t\n\t${t>=2?"return textureGrad(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&e?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&!e?"return texture2D(samplerFront, p);":""}\n}\n\nvoid main(void) {\n\t\n\t${t<2?"lowp vec4 outColor;":""}\n\t\n\tfloat blendMarginX = tileSpacing.x;\n\tfloat blendMarginY = tileSpacing.y;\n\t\n\tvec2 tile = floor(vTex);\n\tvec2 tex = fract(vTex);\n\tvec2 ddx = ${t>=2||e?"dFdx(vTex)":"vec2(0.0, 0.0)"};\n\tvec2 ddy = ${t>=2||e?"dFdy(vTex)":"vec2(0.0, 0.0)"};\n\t\n\tvec4 curTile = sampleTile(tile, vTex, ddx, ddy);\n\t\n\tbool inLeftMargin = (tex.x < blendMarginX);\n\tbool inRightMargin = (tex.x > 1.0 - blendMarginX);\n\tbool inTopMargin = (tex.y < blendMarginY);\n\tbool inBottomMargin = (tex.y > 1.0 - blendMarginY);\n\t\n\tif (inLeftMargin)\n\t{\n\t\tlowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;\n\t\tlowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = leftMixedTile;\n\t\t}\n\t}\n\telse if (inRightMargin)\n\t{\n\t\tlowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);\n\t\tlowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = rightMixedTile;\n\t\t}\n\t}\n\telse if (inTopMargin)\n\t{\n\t\tlowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t}\n\telse if (inBottomMargin)\n\t{\n\t\tlowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t}\n\telse\n\t{\n\t\toutColor = curTile;\n\t}\n\t\n\toutColor *= vColor;\n\t${t<2?"gl_FragColor = outColor;":""}\n\t${t>=2?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n\t${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n}\n`}static PG(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static AG(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static EG(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static OG(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static FG(t){return["#version 300 es",yu.JS.HM.wG(t),"uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static DG(){return["varying lowp vec4 vColor;","void main(void) {","\tgl_FragColor = vColor;","}"].join("\n")}static LG(){return["precision lowp float;","varying mediump vec2 vTex;","varying vec4 vColor;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(vColor.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(vColor.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static kG(){return["precision lowp float;","varying highp vec2 vTex;","varying vec4 vColor;","void main(void) {","\thighp float grad = vTex.x / (1.0 - vTex.y);","\tgl_FragColor = vColor * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);","}"].join("\n")}static NG(){return["varying mediump vec2 vTex;","varying lowp vec4 vColor;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = vColor * f;","}"].join("\n")}static BG(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = vColor * f;","}"].join("\n")}static $G(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp float innerF = step(distSq, 0.25);","\thighp vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = vColor * innerF * outerF;","}"].join("\n")}static UG(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 innerEdge = halfNorm - pixelSize * norm;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = vColor * f;","}"].join("\n")}static VG(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 pxNorm = pixelSize * norm;","\thighp vec2 innerEdge1 = halfNorm - pxNorm;","\thighp vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\thighp float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\thighp vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\thighp vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\thighp vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\thighp vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\thighp float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = vColor * innerF * outerF;","}"].join("\n")}}}{const xu=self.Gs,Cu=self.ls,Tu=Cu.ds,Mu=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);xu.JS.oI=class{constructor(t,s,e){if(!Mu.has(e))throw new Error("invalid uniform type");this.RC=t,this.ZM=this.RC.ZI(),this.Xr=s,this.qc=e,this.WG="color"===this.qc,this.zG=this.ZM.getUniformLocation(this.RC.QI(),s),this.jG=!!this.zG;const i=Mu.get(e);this.HG=new Float32Array(i),this.qG=new Float32Array(i)}qr(){this.RC=null,this.ZM=null,this.zG=null}kI(){return this.jG}eG(){return this.qc}JG(){return this.WG}zI(t){this.kI()&&(this.HG[0]=t,this.qG.set(this.HG),this.ZM.uniform1f(this.zG,t))}VI(t){this.kI()&&(this.HG[0]=t,this.qG.set(this.HG),this.ZM.uniform1i(this.zG,t))}WI(t,s){this.kI()&&(this.HG[0]=t,this.HG[1]=s,this.qG.set(this.HG),this.ZM.uniform2f(this.zG,t,s))}jI(t,s,e){this.kI()&&(this.HG[0]=t,this.HG[1]=s,this.HG[2]=e,this.qG.set(this.HG),this.ZM.uniform3f(this.zG,t,s,e))}UI(t,s,e,i){this.kI()&&(this.HG[0]=t,this.HG[1]=s,this.HG[2]=e,this.HG[3]=i,this.qG.set(this.HG),this.ZM.uniform4f(this.zG,t,s,e,i))}YG(t){t=Math.fround(t);const s=this.HG;s[0]!==t&&(s[0]=t,this.ZM.uniform1f(this.zG,t))}XG(t){const s=this.HG;s[0]!==t&&(s[0]=t,this.ZM.uniform1i(this.zG,t))}KG(t,s){t=Math.fround(t),s=Math.fround(s);const e=this.HG;e[0]===t&&e[1]===s||(e[0]=t,e[1]=s,this.ZM.uniform2f(this.zG,t,s))}ZG(t,s,e){t=Math.fround(t),s=Math.fround(s),e=Math.fround(e);const i=this.HG;i[0]===t&&i[1]===s&&i[2]===e||(i[0]=t,i[1]=s,i[2]=e,this.ZM.uniform3f(this.zG,t,s,e))}yG(t,s,e,i){t=Math.fround(t),s=Math.fround(s),e=Math.fround(e),i=Math.fround(i);const r=this.HG;r[0]===t&&r[1]===s&&r[2]===e&&r[3]===i||(r[0]=t,r[1]=s,r[2]=e,r[3]=i,this.ZM.uniform4f(this.zG,t,s,e,i))}dG(t){const s=this.HG;Tu.F(s,t)||(xu.Sh(s,t,0),this.ZM.uniformMatrix4fv(this.zG,!1,t))}rG(t){const s=this.qG;return this.JG()?s[0]===Math.fround(t.No())&&s[1]===Math.fround(t.Bo())&&s[2]===Math.fround(t.$o()):s[0]===Math.fround(t)}hG(t){const s=this.qG;this.JG()?(s[0]=t.No(),s[1]=t.Bo(),s[2]=t.$o()):s[0]=t}lG(t){return this.qG[0]===Math.fround(t)}aG(t,s){const e=this.qG;return e[0]===Math.fround(t)&&e[1]===Math.fround(s)}fG(t){this.qG[0]=t}cG(t,s){const e=this.qG;e[0]=t,e[1]=s}}}{const Iu=self.Gs,Gu=self.ls,_u=Gu.ws,Pu=Gu.ds,Ru=0,Au=1,Eu=2,Ou=3,Fu=4,Du=5,Lu=6,ku=7,Nu=8,Bu=9,$u=10,Uu=11,Vu=12,Wu=13,zu=14,ju=15,Hu=16,qu=17,Ju=18,Yu=19,Xu=20,Ku=21,Zu=22,Qu=23,tc=24,sc=25,ec=26,ic=27,rc=28,nc=29,hc=30;Iu.JS.QG=class{constructor(t){this.t_=t,this.XI=Pu.create(),this.qI=Pu.create(),this.GM=null,this._M=null,this.s_=!1,this.KI=null,this.e_=new Iu.Rect,this.clearColor=Iu.Hr(Iu.To,0,0,0,0)}},Iu.JS.i_=class{constructor(t){const s=new ArrayBuffer(96);this.qc=0,this.r_=t,this.ZM=t.t_.LT(),this.n_=0,this.h_=0,this.o_=null,this.a_=new Float32Array(s,0,16),this.l_=new Float32Array(s,64,4),this.u_=new Float32Array(s,80,4),this.c_=[]}f_(t,s){this.qc=1,this.n_=t,this.h_=s}d_(){const t=this.ZM;t.drawElements(t.TRIANGLES,this.h_,t.UNSIGNED_SHORT,this.n_)}p_(t){this.qc=2,this.o_=t}m_(){const t=this.ZM,s=this.o_;t.bindTexture(t.TEXTURE_2D,s?s.XT():null)}g_(t){this.qc=20,t.Wo(this.l_,0)}y_(){const t=this.l_,s=this.r_.KI;s.gI.kI()&&s.gI.yG(t[0],t[1],t[2],t[3])}S_(t){this.qc=3;const s=this.a_;s[0]=t.length;for(let e=0,i=t.length;e<i;++e)s[e+1]=t[e]}w_(){const t=this.ZM,s=this.a_,e=s[0],i=s[1],r=s[2];let n=i,h=r,o=t.FUNC_ADD,a=t.FUNC_ADD;e>=4&&(n=s[3],h=s[4]),6===e&&(o=s[5],a=s[6]),t.blendFuncSeparate(i,r,n,h),t.blendEquationSeparate(o,a)}v_(t,s,e,i){this.qc=4;const r=this.l_;r[0]=t,r[1]=s,r[2]=e,r[3]=i}b_(){const t=this.l_;this.ZM.viewport(t[0],t[1],t[2],t[3])}x_(t){this.qc=5,Pu.S(this.a_,t)}C_(){const t=this.r_,s=t.t_.ww,e=t.KI,i=this.a_;for(let t=0,r=s.length;t<r;++t){const r=s[t];r===e?r.JI(i,!0):r.pG()}Pu.S(t.qI,i)}T_(t){this.qc=6,Pu.S(this.a_,t)}M_(){const t=this.r_,s=t.t_.ww,e=t.KI,i=this.a_;for(let t=0,r=s.length;t<r;++t){const r=s[t];r===e?r.YI(i,!0):r.mG()}Pu.S(t.XI,i)}I_(t){this.qc=7,this.o_=t}G_(){const t=this.ZM,s=this.o_,e=this.r_;s?(e.GM=s.PM(),e._M=s.RM(),e.s_&&e._M?t.bindFramebuffer(t.FRAMEBUFFER,e._M):t.bindFramebuffer(t.FRAMEBUFFER,e.GM)):(e.GM=null,e._M=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}__(t){this.qc=8,t.Wo(this.a_,0)}P_(t,s,e,i){this.qc=8;const r=this.a_;r[0]=t,r[1]=s,r[2]=e,r[3]=i}R_(){const t=this.ZM,s=this.a_,e=this.r_.clearColor,i=s[0],r=s[1],n=s[2],h=s[3];e.Jo(i,r,n,h)||(t.clearColor(i,r,n,h),e.Po(i,r,n,h)),t.clear(t.COLOR_BUFFER_BIT)}A_(t){this.qc=14,t.Wo(this.a_,0)}E_(){const t=this.a_;this.r_.e_.set(t[0],t[1],t[2],t[3])}O_(t,s,e){this.qc=9,this.n_=t,this.h_=1,this.a_[0]=s,e.Wo(this.l_,0)}F_(){const t=this.ZM,s=this.r_,e=s.t_.Cw;t.useProgram(e.zx),e.JI(s.qI,!1),e.YI(s.XI,!1);const i=s.e_;e.cI.kI()&&e.cI.KG(i.Qa(),i.tl()),e.fI.kI()&&e.fI.KG(i.sl(),i.el());const r=this.a_[0];if(e.dI.kI()&&e.dI.YG(r),e.lI.kI()){const t=this.l_;e.lI.yG(t[0],t[1],t[2],t[3])}t.drawArrays(t.POINTS,this.n_/4,this.h_),t.useProgram(s.KI.zx)}D_(t){this.qc=10,this.o_=t}L_(){const t=this.ZM,s=this.r_,e=this.o_;s.KI=e,t.useProgram(e.zx),e.JI(s.qI,!1),e.YI(s.XI,!1)}k_(){this.qc=11}N_(){const t=this.r_.KI,s=this.ZM,e=this.a_,i=this.l_,r=this.u_;if(t.SI.kI()){const t=this.r_.t_,e=this.o_;t.B_!==e&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,e?e.XT():null),t.B_=e,s.activeTexture(s.TEXTURE0))}t.II.kI()&&t.II.KG(e[0],e[1]),t.vI.kI()&&t.vI.KG(e[2],e[3]),t.bI.kI()&&t.bI.KG(e[4],e[5]),t._I.kI()&&t._I.YG(this.h_),t.RI.kI()&&t.RI.YG(e[6]),t.AI.kI()&&t.AI.YG(e[7]),t.xI.kI()&&t.xI.KG(e[12],e[13]),t.CI.kI()&&t.CI.KG(e[14],e[15]),t.TI.kI()&&t.TI.KG(r[0],r[1]),t.MI.kI()&&t.MI.KG(r[2],r[3]),t.EI.kI()&&t.EI.KG(i[0],i[1]),t.OI.kI()&&t.OI.KG(i[2],i[3]),t.GI.kI()&&t.GI.YG(this.n_)}U_(){this.qc=12}V_(){const t=this.r_.KI.NI,s=this.c_;for(let e=0,i=t.length;e<i;++e){const i=t[e],r=s[e];i.JG()?i.ZG(r.No(),r.Bo(),r.$o()):i.YG(r)}}W_(t){this.qc=13,this.o_=t}z_(){const t=this.ZM,s=this.o_,e=this.r_.GM;s!==e&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==e&&t.bindFramebuffer(t.FRAMEBUFFER,e)}j_(t,s,e){this.qc=16;const i=this.a_,r=this.r_.t_;i[0]=t.Cy(),i[1]=t.My(),i[2]=s?s.Cy():r.Cy(),i[3]=s?s.My():r.My(),i[4]=t.OM()?1:0,i[5]="stretch"===e;const n=this.c_;Iu.bh(n),n.push(t.PM()),n.push(s?s.PM():null)}H_(){const t=this.a_,s=this.c_,e=this.ZM,i=t[0],r=t[1],n=t[2],h=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(e.bindFramebuffer(e.READ_FRAMEBUFFER,l),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,u),a)e.blitFramebuffer(0,0,i,r,0,0,n,h,e.COLOR_BUFFER_BIT,o?e.LINEAR:e.NEAREST);else{const t=Math.min(i,n),s=Math.min(r,h),o=Math.max(r-h,0),a=Math.max(h-r,0);e.blitFramebuffer(0,o,t,s+o,0,a,t,s+a,e.COLOR_BUFFER_BIT,e.NEAREST)}}q_(t){this.qc=17,this.o_=t}J_(){this.o_.Y_(),this.o_=null}X_(t){this.qc=18,this.o_=t}K_(){this.o_.Z_(),this.o_=null}Q_(t,s,e){this.qc=19;const i=this.a_;i[0]=t,i[1]=s,i[2]=e}tP(){const t=this.r_.KI,s=this.a_;t.II.kI()&&t.II.KG(s[0],s[1]),t.yI.kI()&&t.yI.YG(s[2])}sP(t,s,e,i,r,n,h){this.qc=15;const o=this.a_;t.Wo(o,0),o[4]=1/s,o[5]=1/e,o[6]=i/s,o[7]=r/e,o[8]=n/s,o[9]=h/e}eP(){const t=this.r_.KI,s=this.a_;t.xI.kI()&&t.xI.KG(s[0],s[1]),t.II.kI()&&t.II.KG(s[4],s[5]),t.pI.kI()&&t.pI.KG(s[6],s[7]),t.mI.kI()&&t.mI.KG(s[8],s[9])}iP(t,s,e,i,r,n,h){this.qc=28;const o=this.a_;o[0]=1/t,o[1]=1/s,o[2]=e,o[3]=i,o[4]=r,o[5]=n,o[6]=h}rP(){const t=this.r_.KI,s=this.a_;t.II.kI()&&t.II.KG(s[0],s[1]),t.pI.kI()&&t.pI.KG(s[2],s[3]),t.yI.kI()&&t.yI.YG(s[4]),t.mI.kI()&&t.mI.KG(s[5],s[6])}nP(t){this.qc=21,this.n_=t?1:0}hP(){const t=this.ZM,s=0!==this.n_;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}oP(t){this.qc=22,this.n_=t?1:0}aP(){const t=this.ZM;0===this.n_?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}lP(t){this.qc=23,this.n_=t?1:0}uP(){const t=this.ZM,s=this.r_,e=s.t_,i=0!==this.n_;s.s_=i,t.activeTexture(t.TEXTURE2),i?(s._M&&t.bindFramebuffer(t.FRAMEBUFFER,s._M),t.bindTexture(t.TEXTURE_2D,e.xM())):(t.bindTexture(t.TEXTURE_2D,null),s._M&&t.bindFramebuffer(t.FRAMEBUFFER,s.GM)),t.activeTexture(t.TEXTURE0)}cP(){this.qc=24}fP(){const t=this.ZM;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}dP(){this.qc=25}pP(){const t=this.ZM;t.enable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}mP(){this.qc=26}gP(){const t=this.ZM;t.disable(t.STENCIL_TEST)}yP(t,s,e,i,r){this.qc=27,this.n_=t?1:0;const n=this.a_;n[0]=s,n[1]=e,n[2]=i,n[3]=r}SP(){const t=this.ZM,s=this.a_;1===this.n_?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}wP(t){this.qc=29,this.n_=t}vP(){const t=this.ZM,s=this.n_;0===s?t.disable(t.CULL_FACE):(t.enable(t.CULL_FACE),1===s?t.cullFace(t.BACK):t.cullFace(t.FRONT))}bP(t){this.qc=30,this.n_=t}xP(){const t=this.ZM;t.frontFace(0===this.n_?t.CW:t.CCW)}CP(){switch(this.qc){case 1:return void this.d_();case 2:return void this.m_();case 3:return void this.w_();case 4:return void this.b_();case 5:return void this.C_();case 6:return void this.M_();case 7:return void this.G_();case 8:return void this.R_();case 9:return void this.F_();case 10:return void this.L_();case 11:return void this.N_();case 12:return void this.V_();case 13:return void this.z_();case 14:return void this.E_();case 15:return void this.eP();case 16:return void this.H_();case 17:return void this.J_();case 18:return void this.K_();case 19:return void this.tP();case 20:return void this.y_();case 21:return void this.hP();case 22:return void this.aP();case 23:return void this.uP();case 24:return void this.fP();case 25:return void this.pP();case 26:return void this.gP();case 27:return void this.SP();case 28:return void this.rP();case 29:return void this.vP();case 30:return void this.xP()}}}}{let oc=function(t,s,e,i,r,n){s?t.strokeRect(e,i,r,n):t.fillRect(e,i,r,n)},ac=function(t){return t*(4/3)},lc=function(t,s){t=t.trim();const e=parseFloat(t);return isFinite(e)?t.endsWith("%")?s*e/100:e:0};fillOrStrokeRect=oc,ptToPx=ac,getOffsetParam=lc;const uc=self.Gs,cc=4096,fc=4,dc=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),pc={timeout:60},mc=new uc.To(0,0,0,1),gc=new Set(["left","center","right"]),yc=new Set(["top","center","bottom"]),Sc=new Set(["word","cjk","character"]),wc=new Set(["ltr","rtl"]),vc=1e3,bc=10,xc=2,Cc=new Set;uc.TP&&uc.TP.addEventListener("fontload",t=>{const s=t.font.Rc();for(const t of Cc)(t.MP()||uc.Zi(t.IP(),s))&&(t.GP(),t._P())});let Tc=!1,Mc=!1;uc.JS.sx=class{constructor(t,s){s=Object.assign({},pc,s),this.nx=t,this.PP="Arial",this.RP=16,this.AP=1,this.EP=0,this.OP=!1,this.FP=!1,this.DP="black",this.LP=!1,this.Xg=null,this.kP=!0,this.NP=null,this.BP=new Set,this.$P="left",this.UP="top",this.$c="",this.VP=null,this.WP=uc.Hr(uc.Jg),this.zP="word",this.jP="ltr",this.HP=!1,this.qP=!1,this.JP=!1,this.YP=!1,this.XP=-1,this.KP=0,this.ZP=0,this.QP=0,this.Vy=0,this.Wy=0,this.tR=1,this.sR=null,this.eR=null,this.iR=null,this.rR=null,this.nR=-1,this.hR=-1,this.oR="",this.aR="",this.lR="",this.uR=1,this.cR=1,this.fR=t=>this.dR(t),this.pR=new Map,this.mR=new uc.Df(()=>this._P(!0),2),this.MT=null,this.gR=!0,this.yR=new uc.Rect,this.SR=1,this.wR=new uc.Df(()=>{this.vR(),this.bR(8,8),this.xR()},s.timeout),this.CR=null,this.TR=!1,Cc.add(this)}qr(){this.NP=null,this.BP.clear(),this.Xg=null,this.VP=null,this.sR=null,this.eR=null,this.iR=null,this.rR=null,this.fR=null,this._P(),this.mR.qr(),this.wR.qr(),this.CR=null,this.vR(),this.WP.Ru(),this.WP=null,this.nx=null,this.TR=!0,Cc.delete(this)}xR(){this.JP=!0}MR(){this.xR(),this.qP=!0}GP(){this.MR(),this.HP=!0}IR(t){if(t=!!t,this.LP===t)return;this.LP=t;const s=this.LP?"alphabetic":"top";this.eR&&(this.eR.textBaseline=s),this.iR&&(this.iR.textBaseline=s),this._P(),this.GP()}MP(){return this.LP}ey(t){this.Xg!==t&&(this.Xg=t,this.WP.ey(t),this.Xg&&this.Xg.DS()&&this.Xg.LS().then(()=>this.xR()),this.GP())}GR(t){t=!!t,this.kP!==t&&(this.kP=t,this.xR())}_R(t){t||(t="serif"),this.PP!==t&&(this.PP=t,this._P(),this.GP())}IP(){return this.PP}PR(t){t<.1&&(t=.1),this.RP!==t&&(this.RP=t,this._P(),this.GP())}RR(){return this.RP}AR(t){this.AP!==t&&(this.AP=t,this._P(),this.GP())}ER(t){this.EP!==t&&(this.EP=t,this.MR())}OR(){return this.EP}FR(t){t=!!t,this.OP!==t&&(this.OP=t,this._P(),this.GP())}DR(){return this.OP}LR(t){t=!!t,this.FP!==t&&(this.FP=t,this._P(),this.GP())}kR(){return this.FP}NR(t){t=Math.floor(t),this.XP!==t&&(this.XP=t,this.xR())}BR(){return this.XP}$R(t,s){let e=[];(this.OP||s.rS("b"))&&e.push("bold"),(this.FP||s.rS("i"))&&e.push("italic");const i=s.iS("size"),r=(i?parseFloat(i.Rg):this.RP)*this.AP;t?e.push(r+"pt"):e.push(r*this.UR()+"pt");let n=this.PP;const h=s.iS("font");return h&&h.Rg&&(n=h.Rg,this.NP&&!this.BP.has(n)&&(this.NP(n),this.BP.add(n))),n&&(dc.has(n)?e.push(n):e.push('"'+n+'"')),e.join(" ")}Qx(t){t instanceof uc.To&&(t=t.sa()),this.DP!==t&&(this.DP=t,this.xR())}VR(t,s,e){mc.Ro(t,s,e),this.Qx(mc)}WR(t){if(!gc.has(t))throw new Error("invalid horizontal alignment");this.$P!==t&&(this.$P=t,this.MR())}zR(){return this.$P}jR(t){if(!yc.has(t))throw new Error("invalid vertical alignment");this.UP!==t&&(this.UP=t,this.MR())}HR(){return this.UP}qR(t){if(!Sc.has(t))throw new Error("invalid word wrap mode");this.zP!==t&&(this.zP=t,this._P(),this.GP())}JR(){return this.zP}YR(t){if(!wc.has(t))throw new Error("invalid text direction");this.jP!==t&&(this.jP=t,this.eR&&(this.eR.direction=this.jP),this.iR&&(this.iR.direction=this.jP),this._P(),this.GP())}XR(){return this.jP}Wc(t){this.$c!==t&&(this.$c=t,this._P(),this.GP())}KR(){return this.$c}UR(){return this.SR*this.tR*self.devicePixelRatio}ZR(t){t=!!t,this.gR!==t&&(this.gR=t,this.YP=!0)}QR(){return this.gR}tA(t,s,e){if(void 0===e&&(e=1),t<=0||t<=0)return;if(this.ZP===t&&this.QP===s&&this.tR===e)return;const i=this.ZP;this.ZP=t,this.QP=s,this.tR=e;const r=self.devicePixelRatio;this.Vy=this.ZP*this.tR*r,this.Wy=this.QP*this.tR*r;const n=Math.max(this.Vy,this.Wy),h=Math.min(this.nx.DT(),4096);let o=1;n>h&&(o=h/n,this.Vy=Math.min(this.Vy*o,h),this.Wy=Math.min(this.Wy*o,h)),this.SR=o,this.ZP!==i?this.GP():this.MR()}Cy(){return this.Vy}My(){return this.Wy}sA(){return this.tR}eA(){return this.iA(),this.WP.$y()}rA(){return this.iA(),this.WP.Uy()+this.WP.sy()*(this.EP+4)-this.EP}nA(){this.iA();let t=0;for(const s of this.WP.ty())for(const e of s.kg())t+=e.iy();return t}AM(){return this.wR.$f(),this.hA(),this.MT}oA(t,s){this.iA();const e=this.UR(),i=this.WP.ty();for(const r of i){const i=r.Gy()*e;if(s>=r.tS()-r.My()*e+i&&s<r.tS()+i)for(const s of r.kg())if(t>=s.Zy()&&t<s.Zy()+s.Cy()*e)return s}return null}*aA(t){this.iA();const s=this.WP.ty();for(const e of s)for(const s of e.kg()){const e=s.iS("tag");e&&uc.Zi(e.Rg,t)&&(yield s)}}lA(t,s){for(const e of this.aA(t)){if(0===s)return e;--s}return null}uA(t){let s=0;for(const e of this.aA(t))++s;return s}hA(){(!this.MT||this.JP||this.qP||this.HP||this.YP)&&(this.TR||this.Vy<=0||this.Wy<=0||this.cA())}cA(){this.TR||(this.iA(),this.fA(),this.dA(),this.wR.$f())}bR(t,s){this.sR||(this.sR=uc.co(16,16));let e=!1;this.nR===t&&this.hR===s||(this.nR=t,this.hR=s,this.sR.width=t,this.sR.height=s,e=!0),this.eR||(this.eR=this.sR.getContext("2d"),e=!0),e?(this.eR.textBaseline=this.LP?"alphabetic":"top",this.eR.direction=this.jP,this.eR.font=this.oR,this.eR.fillStyle=this.lR,this.eR.strokeStyle=this.lR,this.eR.globalAlpha=this.uR,this.eR.lineWidth=this.cR):this.eR.clearRect(0,0,t,s)}pA(){this.iR||(this.iR=uc.co(16,16).getContext("2d"),this.rR=uc.co(16,16).getContext("2d"),this.iR.textBaseline=this.LP?"alphabetic":"top",this.rR.textBaseline="top",this.iR.direction=this.jP,this.rR.direction=this.jP)}mA(t){this.aR!==t&&(this.aR=t,this.iR.font=t,this.rR.font=t)}gA(){if(!Tc){Tc=!0,this.pA();const t=this.iR.measureText("test");Mc="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return Mc}iA(){this.yA(),this.SA()}yA(){this.HP&&(this.pA(),!this.LP||this.VP&&this.VP.toString()===this.$c||(this.VP=new uc.pr(this.$c,{mg:!0})),this.mR.$f(),this.WP.Jg(this.LP?this.VP._g():this.$c,this.fR,this.ZP,this.zP,0),this.HP=!1)}SA(){this.qP&&(this.wA(),this.qP=!1)}_P(t){this.pR.clear(),t||this.mR.Uf()}vA(t,s){const e=this.pR;if(e.set(t,s),e.size>1e3){let t=0;for(const s of e.keys())if(e.delete(s),t++,t>=10)break}}dR(t){const s=t.zg()?t.qg().join(""):" ",e=this.$R(!0,t),i=e+"|"+s,r=this.pR;let n=r.get(i);if(n)return r.delete(i),r.set(i,n),n;this.mA(e);const h=this.iR.measureText(s);let o=0;if(this.LP&&this.gA()){const t=this.rR.measureText(s);o=h.fontBoundingBoxAscent-t.fontBoundingBoxAscent}const a=t.iS("size"),l=(a?parseFloat(a.Rg):this.RP)*this.AP;return n={width:h.width,height:ac(l),fontBoundingBoxAscent:h.fontBoundingBoxAscent||0,fontBoundingBoxDescent:h.fontBoundingBoxDescent||0,Ng:o},this.vA(i,n),n}bA(t){this.oR!==t&&(this.oR=t,this.eR.font=t)}xA(t){this.lR!==t&&(this.lR=t,this.eR.fillStyle=t,this.eR.strokeStyle=t)}CA(t){this.uR!==t&&(this.uR=t,this.eR.globalAlpha=t)}TA(t){this.cR!==t&&(this.cR=t,this.eR.lineWidth=t)}wA(){const t=this.UR(),s=(4+this.EP)*t;let e=0;const i=this.WP.ty();if(0===i.length)return;for(const t of i){t.Ky(NaN),t.Qy(NaN);for(const s of t.kg())s.Ky(NaN),s.Qy(NaN)}const r=this.LP&&this.gA();let n=i[0].My()*t;if("center"===this.UP){const h=i.reduce((e,i)=>e+i.My()*t+s,0)-s;e=Math.max(this.Wy/2-h/2,0),r&&(n=i[0]._y()*t)}else if("bottom"===this.UP){const n=i.reduce((e,i)=>e+i.My()*t+s,0)-this.EP*t,h=r?i.at(-1).Gy()*t:0;e=this.Wy-n-h-2}for(let r=0,h=i.length;r<h;++r){const h=i[r],o=h.My()*t,a=e;if(this.LP){if(e+=0===r?n:o,r>0&&e>this.Wy-4*t)break}else if(r>0&&e>=this.Wy-o)break;a>=0&&this.MA(h,e,t),this.LP||(e+=o),e+=s}}MA(t,s,e){let i=0;"center"===this.$P?i=Math.floor((this.Vy-t.Cy()*e)/2):"right"===this.$P&&(i=this.Vy-t.Cy()*e),t.Ky(i),t.Qy(s);for(const r of"ltr"===this.jP?t.kg():t.Yy())this.IA(r,i,s,e),i+=r.Cy()*e}IA(t,s,e,i){const r=t.iS("offsetx");s+=r?lc(r.Rg,t.My())*i:0;const n=t.iS("offsety");if(e+=n?lc(n.Rg,t.My())*i:0,t.vy()){const s=t.iS("iconoffsety");e+=s?lc(s.Rg,t.My())*i:.2*t.My()*i}t.Ky(s),t.Qy(e)}fA(){if(!this.JP)return;this.bR(Math.max(uc.xn(Math.ceil(this.Vy)),128),Math.max(uc.xn(Math.ceil(this.Wy)),64)),this.eR.imageSmoothingEnabled=this.kP,this.eR.imageSmoothingQuality="high",this.KP=0;const t=this.UR(),s=this.WP.ty();for(const e of s)this.GA(e,t);this.JP=!1}GA(t,s){const e=t.Zy(),i=t.tS();if(Number.isFinite(e)&&Number.isFinite(i))for(const e of"ltr"===this.jP?t.kg():t.Yy())this._A(e,s,t.My())}_A(t,s,e){const i=this.eR,r=t.Zy(),n=t.tS();if(!Number.isFinite(r)||!Number.isFinite(n))return;const h=e/16;let o=t.Cy()*s;const a=t.My()*s,l=t.My()/16,u=(4+this.EP)*s;let c=t.zg()?t.qg():null;if(-1!==this.XP){if(this.KP>=this.XP)return;t.zg()&&this.KP+c.length>this.XP&&(c=c.slice(0,this.XP-this.KP),o=this.dR(t).width*s),this.KP+=t.iy()}const f=t.iS("background"),d=t.rS("u"),p=t.rS("s");if(t.zg()&&uc.bm(c)&&!f&&!d&&!p||t.rS("hide"))return;const m=t.iS("color"),g=t.iS("opacity");this.CA(g?parseFloat(g.Rg)/100:1),f&&(this.xA(f.Rg),i.fillRect(r,n-a,o,a+u));const y=t.iS("linethickness"),S=y?parseFloat(y.Rg):1,w=t.rS("stroke");if(w&&this.TA(.5*l*S*this.UR()),t.zg()){const s=c.join("");if(this.bA(this.$R(!1,t)),!w){this.TA(.5*l*S*this.UR());const e=t.iS("outlineback");e&&(this.xA(e.Rg),this.PA(!0,s,r,n,o))}if(this.xA(m?m.Rg:this.DP),this.PA(w,s,r,n,o),!w){this.TA(.5*l*S*this.UR());const e=t.iS("outline");e&&(this.xA(e.Rg),this.PA(!0,s,r,n,o))}}else if(t.vy()&&t.Cy()>0){const s=t.fS(this.Xg);s&&i.drawImage(s,r,n-a,o,a)}if(this.xA(m?m.Rg:this.DP),d&&oc(i,w,r,n+s*h,o,s*h*S),p){const t=s*l,e=n-a/4+t/2;i.fillRect(r,e-t*S/2,o,t*S)}}PA(t,s,e,i,r){"rtl"===this.jP&&(e+=r),t?"Gecko"===uc.Zs.re?this.eR.strokeText(s,e,i,r):this.eR.strokeText(s,e,i):"Gecko"===uc.Zs.re?this.eR.fillText(s,e,i,r):this.eR.fillText(s,e,i)}dA(){this.nx.RA()||(this.MT&&!this.YP||(this.vR(),this.MT=this.nx.bM(this.sR.width,this.sR.height,{vT:this.gR,bT:"high"}),this.YP=!1),this.nx.AA(this.sR,this.MT),this.yR.set(0,0,this.Vy/this.MT.Cy(),this.Wy/this.MT.My()),this.CR&&this.CR())}EA(){return this.yR}vR(){this.MT&&(this.nx.RA()||this.nx.MM(this.MT),this.MT=null)}static tC(){for(const t of Cc)t.vR()}static OA(){return Cc.values()}}}{const Ic=self.Gs;class Gc{constructor(t){this.ZM=t.LT(),this.FA=t.kT(),this.DA=t.LA(),this.kA=null,this.Bf=!1,this.NA=!1,this.BA=0,1===this.FA?this.kA=this.DA.createQueryEXT():this.kA=this.ZM.createQuery()}qr(){this.$A(),this.ZM=null,this.DA=null,this.NA=!1}$A(){this.kA&&(1===this.FA?this.DA.deleteQueryEXT(this.kA):this.ZM.deleteQuery(this.kA),this.kA=null)}Y_(){if(this.Bf)throw new Error("query already active");1===this.FA?this.DA.beginQueryEXT(this.DA.TIME_ELAPSED_EXT,this.kA):this.ZM.beginQuery(this.DA.TIME_ELAPSED_EXT,this.kA),this.Bf=!0}Z_(){if(!this.Bf)throw new Error("query not active");1===this.FA?this.DA.endQueryEXT(this.DA.TIME_ELAPSED_EXT):this.ZM.endQuery(this.DA.TIME_ELAPSED_EXT),this.Bf=!1}UA(){if(!this.kA||this.NA||this.Bf)return;let t=!1;t=1===this.FA?this.DA.getQueryObjectEXT(this.kA,this.DA.QUERY_RESULT_AVAILABLE_EXT):this.ZM.getQueryParameter(this.kA,this.ZM.QUERY_RESULT_AVAILABLE);const s=this.ZM.getParameter(this.DA.GPU_DISJOINT_EXT);t&&!s&&(1===this.FA?this.BA=this.DA.getQueryObjectEXT(this.kA,this.DA.QUERY_RESULT_EXT):this.BA=this.ZM.getQueryParameter(this.kA,this.ZM.QUERY_RESULT),this.BA/=1e9,this.NA=!0),(t||s)&&this.$A()}VA(){return this.NA}WA(){if(!this.NA)throw new Error("no result available");return this.BA}}Ic.JS.zA=class{constructor(t){this.nx=t,this.Hw=t.Wb(),this.Bf=!1,this.jA=null,this.HA=!1,this.qA=null,this.JA=[]}qr(){for(const t of this.JA)t instanceof Gc&&t.qr();Ic.bh(this.JA),this.jA=null,this.qA=null,this.nx=null}Y_(){if(this.Bf)throw new Error("query already active");const t=this.nx.YA();t.length>0?(this.HA=!0,this.jA=t.at(-1),this.jA.XA(),this.jA.JA.push(this)):(this.HA=!1,this.jA=null),this.Bf=!0,t.push(this),this.KA()}Z_(){if(!this.Bf)throw new Error("query not active");if(this.nx.YA().pop()!==this)throw new Error("can only end most nested query");this.Bf=!1,this.XA(),this.jA&&(this.jA.KA(),this.jA=null)}KA(){this.qA=Ic.Hr(Gc,this.nx),this.JA.push(this.qA),this.qA.Y_()}XA(){this.qA.Z_(),this.qA=null}UA(){for(const t of this.JA)t.UA()}ZA(){return this.HA}VA(){return this.JA.every(t=>t.VA())}WA(){return this.JA.reduce((t,s)=>t+s.WA(),0)}Wb(){return this.Hw}}}{const _c=self.Gs;_c.JS.QA=class{constructor(t,s=1e3){this.nx=t,this.tE=s,this.sE=[],this.nx.eE(this)}qr(){this.Ru(),this.nx.iE(this),this.nx=null}Ru(){for(const t of this.sE)t.qr();_c.bh(this.sE)}rE(){const t=new _c.JS.zA(this.nx);return this.sE.push(t),this.sE.length>this.tE&&this.sE.shift().qr(),t}nE(t){for(const s of this.sE){if(s.Wb()>=t)return;if(s.ZA())return;s.UA()}}hE(t,s){if(s<=t)return NaN;let e=0;for(const i of this.sE){if(i.Wb()>=s)break;if(!(i.Wb()<t)){if(!i.VA())return NaN;e+=i.WA()}}return e}oE(t){for(let s=0,e=this.sE.length;s<e;++s){const e=this.sE[s];if(!(e.Wb()<t))return void(s>0&&this.sE.splice(0,s));e.qr()}}}}{let Pc=function(){Yc=-1;for(const t of Jc)t.aE()&&(t.resolve(),Jc.delete(t));Jc.size>0&&(Yc=self.requestAnimationFrame(Pc))};CheckPendingPolls=Pc;const Rc=self.Gs,Ac=self.assert,Ec=self.ls,Oc=Ec.Ss,Fc=Ec.ws,Dc=Ec.ds,Lc={powerPreference:"default",lE:!0,alpha:!1,depth:!1,uE:!1,cE:2,failIfMajorPerformanceCaveat:!1},kc=new Set(["default","low-power","high-performance"]),Nc=65535,Bc=393210,$c=8e3,Uc=7996,Vc=new Rc.Pl(0,0,1,0,1,1,0,1),Wc=Dc.create(),zc=Dc.create(),jc=new Rc.Pl,Hc=new Rc.Rect;let qc=null;Rc.Ls&&(self.fE=function(){qc?qc.loseContext():console.warn("WEBGL_lose_context not supported")},self.dE=function(){qc?qc.restoreContext():console.warn("WEBGL_lose_context not supported")});const Jc=new Set;let Yc=-1;Rc.JS.pE=class extends Rc.JS.cw{constructor(t,s){if(super(s),s=Object.assign({},Lc,s),!kc.has(s.powerPreference))throw new Error("invalid power preference");const e={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat};let i=null,r=0;if(s.cE>=2&&(i=t.getContext("webgl2",e),r=2),i||(i=t.getContext("webgl",e),r=1),!i)throw new Error("renderer-unavailable (could not get WebGL context)");this.ZM=i,this.mE=i.getContextAttributes(),this.gE=i.getParameter(i.VERSION),this.FA=r,this.yE=Fc.create(),this.SE=!1,this.wE=Dc.create(),this.vE=!!s.depth,this.bE=!(!s.depth||!s.uE),this.xE=this.vE,this.CE=!1,this.TE=null,this.ME=!0,this.IE=0,this.GE=0,this.sI=null,this.eI=null,this.iI=null,this._E=null,this.nI=null,this.PE=this.FA>=2&&void 0!==globalThis.Float16Array,this.RE=new Float32Array(196605),this.AE=new Uint16Array(393210),this.EE=new Float32Array(131070),this.OE=this.PE?new globalThis.Float16Array(262140):new Float32Array(262140),this.FE=new Float32Array(32e3),this.DE=0,this.LE=0,this.kE=0,this.NE=null,this.BE=null,this.$E=[],this.UE=0,this.VE=0,this.WE=null,this.zE=0,this.r_=Rc.Hr(Rc.JS.QG,this),this.jE=Rc.Hr(Rc.To,1,1,1,1),this.HE=null,this.B_=null,this.qE=0,this.JE=new Rc.Rect,this.YE=Rc.Hr(Rc.Rect,0,0,-1,-1),this.XE=0,this.KE=0,this.ZE=0,this.QE=-1,this.tO=0,this.sO=0,this.eO="(unavailable)",this.iO="(unavailable)",this.rO=[],this.nO=!1,this.hO=null,this.oO=null,this.aO=null,this.lO=null,this.uO=null,this.cO=null,this.fO=null,this.dO=null,this.pO=0,this.mO=!!s.lE,this.DA=null,this.gO=new Set,this.yO=[]}Yb(){return!0}async Kw(){super.Kw();const t=this.ZM;this.jE.Po(1,1,1,1),this.HE=null,this.B_=null,this.DE=0,this.LE=0,this.kE=0,Rc.bh(this.$E),this.UE=0,this.VE=0,this.NE=null,this.WE=null,this.JE.set(0,0,1,1),this.zE=0;const s=this.r_;s.KI=null,s.GM=null,s._M=null,s.clearColor.Po(0,0,0,0),s.e_.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),this.qE=0,1===this.FA?this.dO=t.getExtension("EXT_blend_minmax"):this.dO=null,this.SO(t),t.cullFace(t.BACK),t.disable(t.CULL_FACE),this.KE=0,t.frontFace(t.CW),this.ZE=0,t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.vE?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.xE=this.vE,this.CE=!1,this.nI=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.nI),t.bufferData(t.ARRAY_BUFFER,this.FE.byteLength,t.DYNAMIC_DRAW),this.sI=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.sI),t.bufferData(t.ARRAY_BUFFER,this.RE.byteLength,t.DYNAMIC_DRAW),this.eI=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.eI),t.bufferData(t.ARRAY_BUFFER,this.EE.byteLength,t.DYNAMIC_DRAW),this.iI=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.iI),t.bufferData(t.ARRAY_BUFFER,this.OE.byteLength,t.DYNAMIC_DRAW),this._E=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._E),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.AE.byteLength,t.DYNAMIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.QE=t.getParameter(t.MAX_TEXTURE_SIZE);const e=t.getParameter(t.ALIASED_POINT_SIZE_RANGE);this.tO=e[0],this.sO=e[1],this.sO>2048&&(this.sO=2048),this.rO=t.getSupportedExtensions();const i=t.getExtension("WEBGL_debug_renderer_info");if(i&&(this.eO=t.getParameter(i.UNMASKED_VENDOR_WEBGL),this.iO=t.getParameter(i.UNMASKED_RENDERER_WEBGL)),this.hO=t.getExtension("KHR_parallel_shader_compile"),this.FA>=2&&("Chromium"!==Rc.Zs.re||Rc.Zs.ie>=135)&&(this.aO=t.getExtension("EXT_conservative_depth")),Rc.Ls&&(qc=t.getExtension("WEBGL_lose_context")),this.mO&&(1===this.kT()?this.DA=t.getExtension("EXT_disjoint_timer_query"):this.DA=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.oO=t.getExtension("EXT_texture_filter_anisotropic"),this.oO?this.pO=t.getParameter(this.oO.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.pO=0,this.kT()<2&&this.vE&&this.bE&&(this.lO=t.getExtension("WEBGL_depth_texture"),!this.lO))throw new Error("no depth texture support");this.kT()<2&&(this.uO=t.getExtension("EXT_frag_depth"),this.cO=t.getExtension("OES_standard_derivatives"),this.fO=t.getExtension("EXT_shader_texture_lod"));const r=Rc.JS.HM,n=r.vG(!1);let h=r.xG(),o=n,a=r.EG(),l=r.PG(),u=r.MG(),c=r.vG(!0),f=!1;this.vE&&(this.kT()<2?this.uO&&(h=r.CG(),a=r.OG(),u=r.IG(),f=!0):(o=r.bG(),h=r.TG(this.wO()),a=r.FG(this.wO()),l=r.AG(),u=r.GG(this.wO()),c=r.bG(!0)));const d=r._G(this.kT(),f,this.cO&&this.fO,this.wO()),p=this.kT()>=2?r.bG():n,m=[[h,o,"<default>"],[h,o,"<default-device-transform>"],[a,l,"<point>"],[r.DG(),n,"<fill>"],[r.LG(),n,"<lineargradient>"],[r.kG(),n,"<penumbra>"],[r.BG(),n,"<hardellipse>"],[r.$G(),n,"<hardellipseoutline>"],[r.UG(),n,"<smoothellipse>"],[r.VG(),n,"<smoothellipseoutline>"],[r.NG(),n,"<smoothline>"],[u,c,"<tilemap>"],[d,p,"<tilerandomization>"]],g=await Promise.all(m.map(t=>this.vO({src:t[0],JM:t[1],name:t[2]})));this.xw=g[0],this.BE=g[1],this.Cw=g[2],this.Iw=g[3],this.Gw=g[4],this._w=g[5],this.Pw=g[6],this.Rw=g[7],this.Aw=g[8],this.Ew=g[9],this.Ow=g[10],this.Tw=g[11],this.Mw=g[12],this.xv()}async vO(t){const s=await Rc.JS.HM.KM(this,t);return this.Sv(s),s}bO(){this.NE=null}tA(t,s,e){if(this.Vy===t&&this.Wy===s&&!e)return;this.Vb();const i=this.ZM,r=this.r_;this.Vy=t,this.Wy=s,this.xO(0,0,t,s),this.dv(this.wE,t/s),this.CO(this.wE),this.BE&&(i.useProgram(this.BE.QI()),this.BE.HI(this.pw),this.NE=this.BE,this.r_.KI=this.BE),i.bindTexture(i.TEXTURE_2D,null),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,null),i.activeTexture(i.TEXTURE0),this.HE=null,this.B_=null,this.vE&&this.ME&&this.TO(this.Vy,this.Wy),this.WE&&this.WE.TM(this.Vy,this.Wy),i.bindFramebuffer(i.FRAMEBUFFER,null),this.WE=null,r.GM=null,r._M=null}TO(t,s){const e=this.ZM;this.TE&&this.IE===t&&this.GE===s||(this.bE?(this.TE&&e.deleteTexture(this.TE),this.TE=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.TE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),this.kT()>=2?e.texImage2D(e.TEXTURE_2D,0,e.DEPTH24_STENCIL8,t,s,0,e.DEPTH_STENCIL,e.UNSIGNED_INT_24_8,null):this.lO&&e.texImage2D(e.TEXTURE_2D,0,e.DEPTH_STENCIL,t,s,0,e.DEPTH_STENCIL,this.lO.UNSIGNED_INT_24_8_WEBGL,null),e.bindTexture(e.TEXTURE_2D,null)):(this.TE&&e.deleteRenderbuffer(this.TE),this.TE=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.TE),e.renderbufferStorage(e.RENDERBUFFER,this.FA>=2?e.DEPTH24_STENCIL8:e.DEPTH_STENCIL,t,s),e.bindRenderbuffer(e.RENDERBUFFER,null)),this.IE=t,this.GE=s)}MO(t,s){this.vE&&(this.ME=!1,this.TO(t,s))}IO(){this.vE&&(this.ME=!0,this.TO(this.Vy,this.Wy))}xO(t,s,e,i){const r=this.yE;r[0]===t&&r[1]===s&&r[2]===e&&r[3]===i||(this.GO().v_(t,s,e,i),Fc.set(r,t,s,e,i),this.VE=0)}av(t){super.av(t),this.dv(this.wE,this.Vy/this.Wy)}rv(t){super.rv(t),this.dv(this.wE,this.Vy/this.Wy)}hv(t){super.hv(t),this.dv(this.wE,this.Vy/this.Wy)}CO(t){Dc.F(this.pw,t)||(this.GO().x_(t),Dc.S(this.pw,t),this.VE=0,this.SE=!0)}_O(){let t,s,e;const i=this.WE;null===i?(t=this.wE,s=this.Cy(),e=this.My()):(t=i.EM(),s=i.Cy(),e=i.My()),this.CO(t),this.xO(0,0,s,e)}PO(t){Dc.F(this.mw,t)||(this.GO().T_(t),Dc.S(this.mw,t),this.VE=0,this.SE=!0)}RO(){this.SE=!1}AO(){return this.SE}IM(){return this.r_}GO(){const t=this.$E;return this.UE===t.length&&t.push(new Rc.JS.i_(this.r_)),t[this.UE++]}Vb(){0!==this.UE&&(this.RA()||(this.EO(),this.OO(),this.UE=0,this.DE=0,this.LE=0,this.kE=0,this.VE=0))}EO(){const t=this.ZM;this.DE>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.sI),t.bufferSubData(t.ARRAY_BUFFER,0,this.RE.subarray(0,3*this.DE)),t.bindBuffer(t.ARRAY_BUFFER,this.eI),t.bufferSubData(t.ARRAY_BUFFER,0,this.EE.subarray(0,2*this.DE)),t.bindBuffer(t.ARRAY_BUFFER,this.iI),t.bufferSubData(t.ARRAY_BUFFER,0,this.OE.subarray(0,4*this.DE))),this.LE>0&&(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._E),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,this.AE.subarray(0,this.LE))),this.kE>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.nI),t.bufferSubData(t.ARRAY_BUFFER,0,this.FE.subarray(0,this.kE)))}OO(){const t=this.$E;for(let s=0,e=this.UE;s<e;++s)t[s].CP()}FO(){return this.jE.Uo()}DO(t,s,e,i){const r=this.jE;r.Jo(t,s,e,i)||(r.Po(t,s,e,i),this.Dw=null,2===this.VE&&(this.VE=0))}LO(t){const s=this.jE;s.Uo()!==t&&(s.Lo(t),this.Dw=null,2===this.VE&&(this.VE=0))}Qx(t){const s=this.jE;s.equals(t)||(s.set(t),this.Dw=null,2===this.VE&&(this.VE=0))}kO(){this.DO(1,1,1,1)}NO(){return this.jE}BO(t){t!==this.HE&&(this.GO().p_(t),this.HE=t,this.VE=0)}UT(){this.HE=null}Zx(t){this.qE!==t&&(this.qE=t,this.$O(this.qv(t)))}UO(t){this.Zx(this.Jv(t))}$O(t){this.GO().S_(t),this.VE=0,this.Dw=null}VO(){return 0===this.qE}WO(){this.Zx(0)}kb(t){this.KE!==t&&(this.GO().wP(t),this.KE=t,this.VE=0,this.Dw=null)}zO(){return this.KE}Nb(t){this.ZE!==t&&(this.GO().bP(t),this.ZE=t,this.VE=0,this.Dw=null)}jO(){return this.ZE}HO(){this.Zx(3)}Rect(t){this.qO(t.Qa(),t.tl(),t.sl(),t.el())}qO(t,s,e,i){this.$b(t,s,e,s,e,i,t,i)}JO(t,s){(this.DE+t>65535||this.LE+s>393210)&&this.Vb(),1===this.VE?this.$E[this.UE-1].h_+=s:(this.GO().f_(2*this.LE,s),this.VE=1)}YO(){const t=this.DE;let s=this.LE;this.LE+=6;const e=this.AE;e[s++]=t,e[s++]=t+1,e[s++]=t+2,e[s++]=t,e[s++]=t+2,e[s]=t+3}Pl(t){this.XO(t,Vc)}$b(t,s,e,i,r,n,h,o){this.JO(4,6),this.YO();const a=this.RE,l=this.DE;this.DE+=4;let u=3*l;const c=this.Nw+this.Bw;a[u++]=t,a[u++]=s,a[u++]=c,a[u++]=e,a[u++]=i,a[u++]=c,a[u++]=r,a[u++]=n,a[u++]=c,a[u++]=h,a[u++]=o,a[u]=c,Vc.Wo(this.EE,2*l),this.jE.zo(this.OE,4*l)}ab(t,s){this.JO(4,6),this.YO();const e=this.DE;this.DE+=4,t.Yl(this.RE,3*e,this.Nw+this.Bw),s.nl(this.EE,2*e),this.jE.zo(this.OE,4*e)}XO(t,s){this.JO(4,6),this.YO();const e=this.DE;this.DE+=4,t.Yl(this.RE,3*e,this.Nw+this.Bw),s.Wo(this.EE,2*e),this.jE.zo(this.OE,4*e)}KO(t,s,e){this.JO(4,6),this.YO();const i=this.DE;this.DE+=4,t.Yl(this.RE,3*i,this.Nw+this.Bw),s.Wo(this.EE,2*i),this.OE.set(e,4*i)}ZO(t,s,e,i,r,n,h,o,a,l,u,c,f){this.JO(4,6),this.YO();const d=this.RE,p=this.DE;this.DE+=4;let m=3*p;const g=this.Nw+this.Bw;d[m++]=t,d[m++]=s,d[m++]=g+e,d[m++]=i,d[m++]=r,d[m++]=g+n,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.nl(this.EE,2*p),this.jE.zo(this.OE,4*p)}ib(t,s,e,i,r,n,h,o,a,l,u,c,f){this.JO(4,6),this.YO();const d=this.RE,p=this.DE;this.DE+=4;let m=3*p;const g=this.Nw+this.Bw;d[m++]=t,d[m++]=s,d[m++]=g+e,d[m++]=i,d[m++]=r,d[m++]=g+n,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.Wo(this.EE,2*p),this.jE.zo(this.OE,4*p)}QO(t,s,e,i,r,n,h,o,a,l,u,c,f,d){this.JO(4,6),this.YO();const p=this.RE,m=this.DE;this.DE+=4;let g=3*m;const y=this.Nw+this.Bw;p[g++]=t,p[g++]=s,p[g++]=y+e,p[g++]=i,p[g++]=r,p[g++]=y+n,p[g++]=h,p[g++]=o,p[g++]=y+a,p[g++]=l,p[g++]=u,p[g]=y+c,f.Wo(this.EE,2*m),this.OE.set(d,4*m)}hT(t,s,e,i){if(t.length%3!=0)throw new Error("vertex buffer length not multiple of 3");if(t.length>196605)throw new Error(`too many vertices (${t.length/3}, limit 65535)`);if(e.length%3!=0)throw new Error("index buffer length not multiple of 3");if(e.length>393210)throw new Error(`too many indices (${e.length}, limit 393210)`);this.JO(t.length,e.length);const r=this.DE;this.RE.set(t,3*r),this.EE.set(s,2*r);const n=this.AE;if(0===r)n.set(e,this.LE);else{let t=this.LE;for(let s=0,i=e.length;s<i;++s)n[t++]=e[s]+r}const h=this.OE;if(null!=i)h.set(i,4*r);else{const s=this.jE,e=s.No(),i=s.Bo(),n=s.$o(),o=s.Uo();let a=4*r;for(let s=0,r=t.length;s<r;++s)h[a++]=e,h[a++]=i,h[a++]=n,h[a++]=o}this.DE+=t.length/3,this.LE+=e.length}tF(t,s){this.Kv(0),Dc.S(Wc,this.pw),Dc.S(zc,this.mw),this._O();const[e,i]=this.sF(this.WE),r=this.yv(0,0,this.Qw(i),0,0,0,i);if(this.PO(r),"crop"===t&&this.WE&&s){const t=this.Vy/2,e=this.Wy/2,i=s.Cy(),r=s.My(),n=this.WE.Cy(),h=this.WE.My(),o=Math.min(n,i),a=Math.min(h,r),l=Math.max(r-h,0),u=Math.max(h-r,0);Hc.set(-t,e-u,-t+o,e-a-u),jc.Xl(Hc),Hc.set(0,l,o,a+l),Hc.wt(i,r),this.ab(jc,Hc)}else{const t=e/2,s=i/2;this.qO(-t,s,t,-s)}this.CO(Wc),this.PO(zc)}eF(t){this.JE.equals(t)||(this.JE.S(t),this.GO().A_(t),this.VE=0)}iF(){}rF(t,s,e,i){this.kE>=7996&&this.Vb();let r=this.kE;const n=this.Nw+this.Bw;2===this.VE&&this.zE===n?this.$E[this.UE-1].h_++:(this.GO().O_(r,n,this.jE),this.VE=2,this.zE=n);const h=this.FE;h[r++]=t,h[r++]=s,h[r++]=e,h[r++]=i,this.kE=r}Cv(t){this.NE!==t&&(this.GO().D_(t),this.NE=t,this.VE=0,this.Dw=null)}nF(){return this.NE}hF(){this.Cv(this.BE)}oF(t){this.GO().g_(t),this.VE=0}aF(t,s,e=1){this.GO().Q_(t,s,e),this.VE=0}lF(t,s,e,i,r,n,h){if(this.NE!==this.Tw)throw new Error("must set tilemap fill mode first");this.GO().sP(t,s,e,i,r,n,h),this.VE=0}uF(t,s,e,i,r,n,h){if(this.NE!==this.Mw)throw new Error("must set tile randomization mode first");this.GO().iP(t,s,e,i,r,n,h),this.VE=0}cF(t,s,e,i,r,n,h,o,a,l,u){const c=this.NE;if(u%=10800,!c.LI||c.oG(s,e,i,r,n,h,o,a,l,u))return;const f=this.GO();f.k_(),c.uG(s,e,i,r,n,h,o,a,l,u);const d=f.a_;d[0]=n,d[1]=h,s.Wo(d,2),d[6]=a,d[7]=l,e.Wo(d,12);const p=f.l_;r.Wo(p,0);const m=p[1];p[1]=p[3],p[3]=m,i.Wo(f.u_,0),f.n_=u,f.h_=o,c.SI.kI()?f.o_=t?t.AM():null:f.o_=null,this.VE=0}fF(t){const s=this.NE;if(0===t.length||s.iG(t))return;const e=this.GO();e.U_(),s.nG(t),Rc.Mh(e.c_,t),this.VE=0}dF(t,s,e,i){this.GO().P_(t,s,e,i),this.VE=0}Ru(t){this.GO().__(t),this.VE=0}pF(){}Ub(){super.Ub(),this.ZM.flush()}mF(){this.vE&&this.WE&&this.WE.LM()&&(this.GO().nP(this.xE),this.VE=0)}gF(t){t=!!t,this.xE!==t&&this.vE&&(this.xE=t,this.GO().oP(t),this.VE=0)}yF(){return this.xE}xM(){return this.TE}CM(){return this.bE}SF(t){if(t=!!t,this.bE&&this.CE!==t){if(t&&this.yF())throw new Error("depth still enabled");this.CE=t,this.GO().lP(t),this.VE=0}}wF(t,s,e,i,r=0){t=Math.floor(t),s=Math.floor(s),e=Math.floor(e),i=Math.floor(i),this.YE.Za(t,s,e,i)||(this.YE.ja(t,s,e,i),s=(r||this.sF(this.vF())[1])-s-i,this.GO().yP(!0,t,s,e,i),this.VE=0)}bF(){-1!==this.YE.sl()&&(this.YE.set(0,0,-1,-1),this.GO().yP(!1,0,0,0,0),this.VE=0)}xF(){for(const t of this.gO)t.nE(this.Hw)}RA(){return!this.ZM||this.ZM.isContextLost()||this.nO}tC(){super.Zw(),Rc.JS.TT.tC(),Rc.JS.hM.tC(),Rc.JS.sx.tC();for(const t of this.gO)t.Ru();this.rO=[],this.DA=null,this.hO=null,this.aO=null,this.oO=null,this.lO=null,this.uO=null,this.cO=null,this.fO=null,this.pO=0,this.eO="(unavailable)",this.iO="(unavailable)",this.NE=null,this.BE=null,this.TE=null;for(const t of this.Fw.values())t.tC()}async sC(){this.nO=!0,await this.Kw(),this.nO=!1;for(const t of this.Fw.values())t.sC(this);this.tA(this.Vy,this.Wy,!0)}CF(t,s){if(this.RA())throw new Error("context lost");this.Vb();const e=Rc.Hr(Rc.JS.TT,this);return e.FT(t,s),e}async TF(t,s){if(this.RA())throw new Error("context lost");if(s=Object.assign({},s),Rc.Pe.ImageBitmapOptions){let e=await createImageBitmap(t,{premultiplyAlpha:"premultiply"});const i=s.mT&&"clamp-to-edge"!==s.mT||s.gT&&"clamp-to-edge"!==s.gT,r=Rc.bn(e.width)&&Rc.bn(e.height);return this.NT()||r||!i?s.xT=!1:Rc.Pe.Oe?(e=await createImageBitmap(t,{premultiplyAlpha:"premultiply",resizeWidth:Rc.xn(e.width),resizeHeight:Rc.xn(e.height)}),s.xT=!1):e=await createImageBitmap(t,{premultiplyAlpha:"none"}),await Rc.pf(()=>this.CF(e,s))}if(t instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const s=await Rc.uo(t);t=s}return await Rc.pf(()=>this.CF(t,s))}bM(t,s,e){this.Vb();const i=Rc.Hr(Rc.JS.TT,this);return i.VT(t,s,e),i}AA(t,s,e){this.Vb(),s.qT(t,e)}MM(t){t&&(t.ZT(),t.QT()>0||(this.Vb(),t===this.HE&&(this.ZM.bindTexture(this.ZM.TEXTURE_2D,null),this.HE=null),t===this.B_&&(this.ZM.activeTexture(this.ZM.TEXTURE1),this.ZM.bindTexture(this.ZM.TEXTURE_2D,null),this.ZM.activeTexture(this.ZM.TEXTURE0),this.B_=null),t.JT()))}MF(t){let s=this.Vy,e=this.Wy,i=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),i=!1),"number"==typeof t.height&&(e=Math.floor(t.height),i=!1)),s<=0||e<=0)throw new Error("invalid size");this.Vb();const r=Rc.Hr(Rc.JS.hM,this);return r.wM(s,e,Object.assign({rM:i},t)),this.WE=null,this.r_.GM=null,this.r_._M=null,r}IF(t,s=!0){t!==this.WE&&(t&&t.kM()&&t.TM(this.Vy,this.Wy),this.GO().I_(t),this.WE=t,this.VE=0,s&&this._O())}vF(){return this.WE}sF(t){return t?[t.Cy(),t.My()]:[this.Vy,this.Wy]}GF(t,s="stretch"){this.FA<2||this.WE&&this.WE.NM()>0?(this.HO(),this.kO(),this._F(t,s)):(this.GO().j_(t,this.WE,s),this.VE=0)}_F(t,s="stretch"){const e=t.AM();if(!e)throw new Error("not a texture-backed render target");this.BO(e),this.tF(s,e)}PF(t){this.FA<2||(this.GO().W_(t.PM()),this.VE=0)}RF(t){this.IF(null),this.Vb();const s=t.AM();s===this.HE&&(this.ZM.bindTexture(this.ZM.TEXTURE_2D,null),this.HE=null),s===this.B_&&(this.ZM.activeTexture(this.ZM.TEXTURE1),this.ZM.bindTexture(this.ZM.TEXTURE_2D,null),this.ZM.activeTexture(this.ZM.TEXTURE0),this.B_=null),t.JT()}async WM(t,s,e){this.Vb();const i=this.WE;let r,n,h;t?(r=t.Cy(),n=t.My(),h=t.PM()):(r=this.Cy(),n=this.My(),h=null);let o=0,a=0,l=r,u=n;if(e){o=Rc.Zr(Math.floor(e.Qa()),0,r-1),a=Rc.Zr(Math.floor(e.tl()),0,n-1);let t=e.width();t=0===t?r-o:Rc.Zr(Math.floor(t),0,r-o);let s=e.height();s=0===s?n-a:Rc.Zr(Math.floor(s),0,n-a),l=t,u=s,a=n-(a+u)}const c=this.ZM;c.bindFramebuffer(c.FRAMEBUFFER,h);const f=()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.WE=null,this.r_.GM=null,this.r_._M=null,this.IF(i)};let d;if(!s&&this.kT()>=2){c.bindFramebuffer(c.READ_FRAMEBUFFER,h);const t=c.createBuffer(),s=l*u*4,e=c.PIXEL_PACK_BUFFER;c.bindBuffer(e,t),c.bufferData(e,s,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(e,null),f();const i=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);await this.XM(()=>c.getSyncParameter(i,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(i),d=new ImageData(l,u),c.bindBuffer(e,t),c.getBufferSubData(e,0,new Uint8Array(d.data.buffer),0,s),c.bindBuffer(e,null),c.deleteBuffer(t)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}AF(){this.gF(!0),this.GO().cP(),this.VE=0,this.XE=1}EF(t=!1){this.gF(t),this.GO().dP(),this.VE=0,this.XE=2}OF(){return 2===this.XE}FF(t=!0){this.gF(t),this.GO().mP(),this.VE=0,this.XE=0}DF(t){this.LF()&&(this.GO().q_(t),this.VE=0)}kF(t){this.LF()&&(this.GO().X_(t),this.VE=0)}XM(t){const s=new Promise(s=>Jc.add({resolve:s,aE:t}));return-1===Yc&&(Yc=self.requestAnimationFrame(Pc)),s}Xb(){return this.Vy*this.Wy*(this.mE.alpha?4:3)}Kb(){let t=0;for(const s of Rc.JS.hM.zM())s.AM()||(t+=s.sM());return t}Zb(){let t=0;for(const s of Rc.JS.TT.eM())t+=s.sM();return t}NF(){return this.gE}kT(){return this.FA}rI(){return this.PE}BF(){return"webgl"+this.kT()}NT(){return this.kT()>=2}DT(){return this.QE}$F(){return this.tO}UF(){return this.sO}VF(){return this.eO}WF(){return this.iO}zF(){if(this.kT()>=2)return"webgl2";{const t=[];return this.uO&&t.push("EXT_frag_depth"),this.cO&&t.push("OES_standard_derivatives"),this.fO&&t.push("EXT_shader_texture_lod"),t.length>0?"webgl1:"+t.join(","):"webgl1:none"}}jF(){return this.rO}LF(){return!!this.DA}LA(){return this.DA}YM(){return this.hO}wO(){return!!this.aO}jT(){return this.oO}HT(){return this.pO}eE(t){this.gO.add(t)}iE(t){this.gO.delete(t)}YA(){return this.yO}LT(){return this.ZM}SO(t){let s=t.FUNC_ADD,e=t.FUNC_ADD;this.FA>=2?(s=t.MAX,e=t.MIN):this.dO&&(s=this.dO.MAX_EXT,e=this.dO.MIN_EXT),this.Hv([["normal",[t.ONE,t.ONE_MINUS_SRC_ALPHA]],["additive",[t.ONE,t.ONE]],["xor",[t.ONE,t.ONE_MINUS_SRC_ALPHA]],["copy",[t.ONE,t.ZERO]],["destination-over",[t.ONE_MINUS_DST_ALPHA,t.ONE]],["source-in",[t.DST_ALPHA,t.ZERO]],["destination-in",[t.ZERO,t.SRC_ALPHA]],["source-out",[t.ONE_MINUS_DST_ALPHA,t.ZERO]],["destination-out",[t.ZERO,t.ONE_MINUS_SRC_ALPHA]],["source-atop",[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA]],["destination-atop",[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]],["lighten",[t.ONE,t.ONE,t.ONE,t.ONE,s,s]],["darken",[t.ONE,t.ONE,t.ONE,t.ONE,e,e]],["multiply",[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA]],["screen",[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA]]])}HF(){return this.tx()}}}{const Xc=self.Gs,Kc=self.ls,Zc=Kc.Ss,Qc=Kc.ds,tf=self.assert,sf=self.GPUBufferUsage,ef=self.GPUShaderStage,rf=self.GPUMapMode,nf=self.GPUTextureUsage,hf={powerPreference:"default",depth:!1,failIfMajorPerformanceCaveat:!1,qF:!1,JF:"bilinear",YF:!1,uE:!1,XF:!0},of=65535,af=393210,lf=Math.floor(65535/4),uf=65535,cf=4*lf-16,ff=1,df=2,pf=4,mf=8,gf=16,yf=32,Sf=64,wf=128,vf=256,bf=512,xf=1024,Cf=2048,Tf=4096,Mf=8192,If=16384,Gf=32768,_f=65536,Pf=1<<17,Rf=1<<18,Af=1<<19,Ef=1<<20,Of=1<<21,Ff=1<<22,Df=1<<23,Lf=1<<24,kf=1<<25,Nf=1<<26,Bf=1<<27,$f=1<<28,Uf=1<<29,Vf=1<<30,Wf=1,zf=8688,jf=8697,Hf=25072,qf=7680,Jf=2,Yf=4,Xf=2,Kf=4,Zf=new Xc.Pl(0,0,1,0,1,1,0,1),Qf=Xc.Hr(Xc.Pa),td=Xc.Hr(Xc.Rect),sd=Xc.Hr(Xc.Rect),ed=Xc.Hr(Xc.Pl);Xc.JS.KF=class extends Xc.JS.cw{constructor(t){super(t),this.ZF=null,this.QF=null,this.tD=null,this.sD=null,this.eD=null,this.iD=null,this.rD="",this.nD=null,this.hD=null,this.oD=0,this.aD=0,this.lD=Qc.create(),this.TE=null,this.uD=null,this.cD=null,this.fD=null,this.dD=null,this.pD=null,this.IE=0,this.GE=0,this.mD=null,this.gD=null,this.yD=null,this.SD=null,this.sI=null,this.eI=null,this.wD=null,this.iI=null,this._E=null,this.vD=null,this.nI=null,this.bD=Xc.JS.CD.xD(),this.TD=Xc.JS.CD.MD(),this.ID=null,this.GD=null,this._D=Xc.JS.CD.PD(),this.RD=Xc.JS.CD.AD(),this.ED=null,this.OD=null,this.FD=Xc.JS.CD.DD(),this.LD=Xc.JS.CD.kD(),this.ND=null,this.BD=null,this.$D=null,this.RE=new Float32Array(196605),this.EE=new Float32Array(131070),this.UD=new Uint32Array(65535),this.OE=null,this.AE=new Uint16Array(393210),this.FE=new Float32Array(4*lf),this.DE=0,this.LE=0,this.VD=0,this.WD=Xc.Hr(Xc.To,1,1,1,1),this.kE=0,this.zD=Xc.Hr(Xc.JS.jD,this),this.HD=32768,this.qD=0,this.JD=0,this.YD=0,this.XD=0,this.KD=0,this.ZD=0,this.QD=0,this.tL=0,this.sL=0,this.eL=Xc.Hr(Xc.Rect,0,0,0,0),this.iL=Xc.Hr(Xc.To,1,1,1,1),this.rL=Xc.Hr(Xc.To,1,1,1,1),this.nL=Xc.Hr(Xc.Rect,0,0,0,0),this.hL=0,this.oL="",this.aL=null,this.lL=null,this.uL=null,this.cL=null,this.fL=null,this.dL=null,this.pL=null,this.mL=null,this.gL=null,this.yL=null,this.SL=null,this.wL=null,this.vL=null,this.bL=new Set,this.xL=new Set,this.QE=8192,this.CL=null,this.TL=null,this.ML=null,this.IL=null,this.GL=0,this._L=0,this.PL=0,this.RL=0,this.AL=null,this.EL=null,this.OL=new Map,this.FL=null,this.DL=null,this.LL=[],this.kL=null,this.WE=null,this.NL=!1,this.BL="bilinear",this.$L=!1,this.bE=!1,this.UL=null,this.VL=!1,this.WL=-1,this.zL=-1,this.jL=new Set,this.HL=null,this.qL=null,this.SO()}pv(){return!0}JL(t,s){s?this.HD|=t:this.HD&=~t}YL(t){return 0!==(this.HD&t)}XL(t,s){s?this.qD|=t:this.qD&=~t}KL(t){return 0!==(this.qD&t)}async KM(t,s){if(s=Object.assign({},hf,s),!navigator.gpu)throw new Error("renderer-unavailable (WebGPU not supported)");if("Safari"===Xc.Zs.se||"iOS"===Xc.Zs.Qs)throw new Error("WebGPU is currently disabled in Safari - see https://bugs.webkit.org/show_bug.cgi?id=301627");s.depth&&(this.HD|=524288),s.XF&&(this.HD|=65536),this.NL=!!s.qF,this.BL=s.JF,this.$L=!!s.YF,this.ZF={},this.bE=!(!s.depth||!s.uE),"default"!==s.powerPreference&&(this.ZF.powerPreference=s.powerPreference),this.eD=t,await this.ZL(s.failIfMajorPerformanceCaveat)}async ZL(t){for(this.sD=null,await this.QL(t);!this.sD;)this.QF=null,await this.QL(t);await this.Kw()}async QL(t){if(!this.QF){if(this.QF=await navigator.gpu.requestAdapter(this.ZF),!this.QF)throw new Error("renderer-unavailable (no WebGPU adapter available)");const s=this.QF.info;if(t&&s.isFallbackAdapter)throw new Error("renderer-unavailable (WebGPU provided fallback adapter)");if("adreno-7xx"===s.architecture)throw new Error("WebGPU disabled on adreno-7xx devices - see https://issues.chromium.org/issues/329702056");if("intel"===s.vendor&&("gen-7"===s.architecture||"gen7"===s.architecture))throw new Error("WebGPU disabled on Intel Gen7 GPUs - see https://issues.chromium.org/issues/462468373")}const s=[];if(this.QF.features.has("timestamp-query")&&s.push("timestamp-query"),this.QF.features.has("shader-f16")&&s.push("shader-f16"),this.sD=await this.QF.requestDevice({requiredFeatures:s,requiredLimits:{maxTextureDimension2D:this.QF.limits.maxTextureDimension2D}}),!this.sD)return null;this.QE=this.sD.limits.maxTextureDimension2D,this.JL(134217728,this.sD.features.has("timestamp-query")),this.JL(268435456,this.sD.features.has("shader-f16")),this.JL(536870912,this.YL(268435456)&&void 0!==globalThis.Float16Array),this.sD.lost.then(t=>this.tk(t)),this.JL(32768,!1)}async tk(t){console.log("[WebGPU] Device lost: ",t),super.Zw(),this.zD.tC(),Xc.JS.sk.tC(),Xc.JS.ek.tC(),Xc.JS.sx.tC(),this.rD="",this.nD=null,this.hD=null,this.TE=null,this.cD=null,this.uD=null,this.fD=null,this.dD=null,this.pD=null,this.sI=null,this.eI=null,this.wD=null,this.iI=null,this._E=null,this.vD=null,this.nI=null,this.mD=null,this.gD=null,this.yD=null,this.SD=null,this.lL=null,this.aL=null,this.wL=null,this.uL=null,this.cL=null,this.fL=null,this.CL=null,this.IL=null,this.dL=null,this.pL=null,this.mL=null,this.gL=null,this.yL=null,this.SL=null,this.TL=null,this.ML=null,this.kL=null,this.WE=null,this.vL=null,this.UL=null,this.AL=null,this.EL=null,this.bL.clear(),this.xL.clear(),this.OL.clear();for(const t of this.Fw.values())t.tC();this.sD=null,this.QF=null,this.tD=null,this.HD|=32768,this.HL&&this.HL(),await this.ZL();for(const t of this.Fw.values())t.sC(this);this.tA(this.Vy,this.Wy,!0),this.qL&&this.qL()}async Kw(){super.Kw();const t=this.sD;this.rD=navigator.gpu.getPreferredCanvasFormat(),this.nD=null,this.hD=null;let s=nf.RENDER_ATTACHMENT;this.NL&&(s|=nf.TEXTURE_BINDING),this.$L&&(s|=nf.COPY_SRC),this.rD.startsWith("rgba8")||this.rD.startsWith("bgra8")?this.oL=this.rD:this.oL="rgba8unorm",this.HD&=940113920,this.HD|=7680,this.qD=0,this.YL(524288)&&(this.HD|=70254592),this.DE=0,this.LE=0,this.GL=0,this.PL=0,this.RL=0,this._L=0,this.WD.Po(1,1,1,1),this.iL.Po(1,1,1,1),this.rL.Po(1,1,1,1),this.OE=this.rI()?new globalThis.Float16Array(262140):new Float32Array(262140),this.ID=new ArrayBuffer(this.TD),this.GD=new Float32Array(this.ID),this.ED=new ArrayBuffer(this.RD),this.OD=new Float32Array(this.ED),this.ND=new ArrayBuffer(this.LD),this.BD=new Float32Array(this.ND),this.$D=new Uint32Array(this.ND),this.sI=t.createBuffer({label:"vertexbuffer",size:this.RE.byteLength,usage:sf.VERTEX|sf.COPY_DST}),this.eI=t.createBuffer({label:"texcoordbuffer",size:this.EE.byteLength,usage:sf.VERTEX|sf.COPY_DST}),this.wD=t.createBuffer({label:"texindexbuffer",size:this.UD.byteLength,usage:sf.VERTEX|sf.COPY_DST}),this.iI=t.createBuffer({label:"colorbuffer",size:this.OE.byteLength,usage:sf.VERTEX|sf.COPY_DST}),this._E=t.createBuffer({label:"indexbuffer",size:this.AE.byteLength,usage:sf.INDEX|sf.COPY_DST}),this.vD=t.createBuffer({label:"pointsindexbuffer",size:6*lf*2,usage:sf.INDEX,mappedAtCreation:!0});const e=this.vD.getMappedRange();this.ik(e),this.vD.unmap(),this.nI=t.createBuffer({label:"pointbuffer",size:this.FE.byteLength,usage:sf.VERTEX|sf.STORAGE|sf.COPY_DST}),this.aL=t.createBindGroupLayout({label:"bufferbindgrouplayout",entries:[{binding:0,visibility:ef.VERTEX,buffer:{type:"uniform",minBindingSize:this.TD}},{binding:1,visibility:ef.FRAGMENT,buffer:{type:"uniform",minBindingSize:this.RD}},{binding:3,visibility:ef.VERTEX,buffer:{type:"read-only-storage",minBindingSize:this.FE.byteLength}},{binding:4,visibility:ef.FRAGMENT,buffer:{type:"uniform",minBindingSize:this.LD}},{binding:5,visibility:ef.FRAGMENT,buffer:{type:"uniform"}}]});const i=[],r=Xc.JS.nk.rk();for(let t=0;t<r;++t)i.push({binding:2*t,visibility:ef.FRAGMENT,sampler:{type:"filtering"}},{binding:2*t+1,visibility:ef.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d"}});this.uL=t.createBindGroupLayout({label:"texturebindgrouplayout",entries:i}),this.cL=t.createBindGroupLayout({label:"backtexturebindgrouplayout",entries:[{binding:0,visibility:ef.FRAGMENT,sampler:{type:"nearest"===this.BL?"non-filtering":"filtering"}},{binding:1,visibility:ef.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d"}}]}),this.fL=t.createBindGroupLayout({label:"depthtexturebindgrouplayout",entries:[{binding:0,visibility:ef.FRAGMENT,sampler:{type:"non-filtering"}},{binding:1,visibility:ef.FRAGMENT,texture:{sampleType:"depth",viewDimension:"2d"}}]}),this.CL=t.createPipelineLayout({bindGroupLayouts:[this.aL,this.uL,this.cL,this.fL]});const n=Xc.JS.CD,h=this.hk(),o=this.rI();this.TL=t.createShaderModule({label:"<default vertex module>",code:n.ak(n.vG(o),h)}),this.TL.getCompilationInfo().then(t=>n.lk("<default>","vertex",t)),this.ML=t.createShaderModule({label:"<normalized vertex module>",code:n.ak(n.uk(o),h)}),this.ML.getCompilationInfo().then(t=>n.lk("<normalized>","vertex",t));const a=await Promise.all([n.KM(this,{name:"<default>",src:n.ck(!1,o),fk:n.ck(!0,o),JM:n.dk(o),pk:n.mk(o)}),n.KM(this,{name:"<single-texture-fill>",src:n.gk(!1,o),fk:n.gk(!0,o),JM:n.dk(o),pk:n.mk(o)}),n.KM(this,{name:"<generate-mipmap>",src:n.yk(),JM:n.Sk()}),n.KM(this,{name:"<point>",src:n.wk(!1),fk:n.wk(!0),JM:n.vk()}),n.KM(this,{name:"<tilemap>",src:n.bk(!1),fk:n.bk(!0)}),n.KM(this,{name:"<fill>",src:n.xk()}),n.KM(this,{name:"<lineargradient>",src:n.Ck()}),n.KM(this,{name:"<penumbra>",src:n.Tk()}),n.KM(this,{name:"<hardellipse>",src:n.Mk()}),n.KM(this,{name:"<hardellipseoutline>",src:n.Ik()}),n.KM(this,{name:"<smoothellipse>",src:n.Gk()}),n.KM(this,{name:"<smoothellipseoutline>",src:n._k()}),n.KM(this,{name:"<tilerandomization>",src:n._G(!1),fk:n._G(!0)}),n.KM(this,{name:"<smoothline>",src:n.Pk()})]);this.xw=a[0],this.EL=a[1],this.AL=a[2],this.Cw=a[3],this.Tw=a[4],this.Iw=a[5],this.Gw=a[6],this._w=a[7],this.Pw=a[8],this.Rw=a[9],this.Aw=a[10],this.Ew=a[11],this.Mw=a[12],this.Ow=a[13];for(const t of a)this.Sv(t);65536&this.HD?(this.HD|=393216,this.IL=this.xw):this.IL=this.EL,this.vL=this.AL.Rk(),this.mD=t.createBuffer({label:"vertexuniformbuffer",size:this.TD,usage:sf.UNIFORM|sf.COPY_DST}),this.gD=t.createBuffer({label:"fragmentuniformbuffer",size:this.RD,usage:sf.UNIFORM|sf.COPY_DST}),this.yD=t.createBuffer({label:"fragmentc3paramsuniformbuffer",size:this.LD,usage:sf.UNIFORM|sf.COPY_DST}),this.SD=t.createBuffer({label:"fragmentdefaultcustomparamsbuffer",size:16,usage:sf.UNIFORM|sf.COPY_DST}),this.XD=0,this.KD=this.TD,this.Ak(),this.Ek(),this.Ok(),this.ZD=0,this.QD=this.RD,this.Fk(),this.Dk(),this.lL=this.Lk(this.SD),this.wL=this.lL;const l=Xc.co(32,32);l.getContext("2d"),this.dL=await this.TF(l),this.pL=null,this.mL=this.dL.kk(),this.VD=0,this.gL=null,this.yL=this.dL.Nk(),this.dL.Bk(),this.uD=this.sD.createTexture({label:"nulldepthbuffer",size:[8,8,1],format:this.$k(),usage:nf.TEXTURE_BINDING}),this.fD=this.uD.createView({label:"nulldepthbufferview",aspect:"depth-only"}),this.pD=this.sD.createBindGroup({label:"nulldepthbufferbindgroup",layout:this.fL,entries:[{binding:0,resource:this.Uk({yT:"nearest"})},{binding:1,resource:this.fD}]}),this.SL=this.pD,this.kL=Xc.Hr(Xc.JS.ek,this,!0),this.kL.AM().Vk(s,this.rD),this.WE=this.kL,this.Wk(),this.tD=this.QF.info,this.iD||(this.iD=this.eD.getContext("webgpu")),this.iD.configure({device:t,format:this.rD,usage:s,alphaMode:"premultiplied"})}Lk(t){return this.sD.createBindGroup({layout:this.aL,entries:[{binding:0,resource:{buffer:this.mD}},{binding:1,resource:{buffer:this.gD}},{binding:3,resource:{buffer:this.nI}},{binding:4,resource:{buffer:this.yD}},{binding:5,resource:{buffer:t}}]})}ik(t){const s=new Uint16Array(t);let e=0,i=s.length,r=0;for(;e<i;)s[e++]=r,s[e++]=r+1,s[e++]=r+2,s[e++]=r,s[e++]=r+2,s[e++]=r+3,r+=4}zk(){return this.sD}jk(){return this.TL}Hk(){return this.ML}async vO(t){const s=await Xc.JS.CD.KM(this,t);return this.Sv(s),s}BF(){return"webgpu"}qk(){return this.rD}$k(){return"depth24plus-stencil8"}Jk(){return this.nD}Yk(){return this.hD}Xk(){return this.NL}Kk(){return this.$L}Zk(){return this.CL}Qk(){return this.uL}tN(){return this.cL}sN(){return this.BL}eN(){return this.oL}DT(){return this.QE}RA(){return this.YL(32768)}LF(){return this.YL(134217728)}hk(){return this.YL(268435456)}rI(){return this.YL(536870912)}Xb(){const t=this.Cy()*this.My();let s=t*Xc.JS.sk.iN(this.rD);return this.rN()&&(s+=t*Xc.JS.sk.iN(this.$k())),s}Kb(){let t=0;for(const s of Xc.JS.ek.zM())s.nN()||(t+=s.AM().sM());return t}Zb(){let t=0;for(const s of Xc.JS.sk.eM())s.hN()||(t+=s.sM());return t}NT(){return!0}oN(){return this.zD}tA(t,s,e){(this.Vy!==t||this.Wy!==s||e)&&(this.Vb(),this.Vy=t,this.Wy=s,this.oD=t,this.aD=s,this.kL.vM(),this.CO(this.kL.EM()),this.WE&&this.WE.TM(this.Vy,this.Wy),this.YL(524288)&&this.YL(67108864)&&this.TO(t,s))}TO(t,s){if(this.TE){if(this.IE===t&&this.GE===s)return;this.TE.destroy()}let e=nf.RENDER_ATTACHMENT;this.bE&&(e|=nf.TEXTURE_BINDING),this.TE=this.sD.createTexture({label:"depthbuffer",size:[t,s,1],format:this.$k(),usage:e}),this.cD=this.TE.createView({label:"depthbufferview"}),this.bE&&(this.dD=this.sD.createBindGroup({label:"depthbufferbindgroup",layout:this.fL,entries:[{binding:0,resource:this.Uk({yT:"nearest"})},{binding:1,resource:this.TE.createView({label:"depthbufferview",aspect:"depth-only"})}]})),this.IE=t,this.GE=s}MO(t,s){this.rN()&&(this.JL(67108864,!1),this.TO(t,s))}IO(){this.rN()&&(this.JL(67108864,!0),this.TO(this.Vy,this.Wy))}CO(t){Qc.F(this.pw,t)||(Qc.S(this.pw,t),this.Ak())}_O(){this.CO(this.WE.EM())}PO(t){Qc.F(this.mw,t)||(Qc.S(this.mw,t),this.Ak())}RO(){this.XL(1,!1)}AO(){return this.KL(1)}CF(t,s){if(t&&!Xc.JS.sk.aN(t)){const s=t.width||t.videoWidth,e=t.height||t.videoHeight,i=Xc.co(s,e);i.getContext("2d").drawImage(t,0,0,s,e),t=i}this.Vb();const e=Xc.Hr(Xc.JS.sk,this);return e.wM(t,s),e}async TF(t,s){if(Xc.JS.sk.aN(t))return this.CF(t,s);{if(!Xc.Pe.ImageBitmapOptions)throw new Error("no support for ImageBitmapOptions");const e=await createImageBitmap(t,{premultiplyAlpha:"premultiply"});return this.CF(e,s)}}Uk(t){const s=t.mT||"clamp-to-edge",e=t.gT||"clamp-to-edge",i=t.yT;let r=t.ST||0;"trilinear"!==i&&(r=0);const n=`${s},${e},${i},${r}`;let h=this.OL.get(n);if(h)return h;const o={addressModeU:s,addressModeV:e,magFilter:"nearest",minFilter:"nearest",mipmapFilter:"nearest"};return"bilinear"!==i&&"trilinear"!==i||(o.magFilter="linear",o.minFilter="linear"),"trilinear"===i&&(o.mipmapFilter="linear",r>1&&(o.maxAnisotropy=r)),h=this.sD.createSampler(o),this.OL.set(n,h),h}Rk(){return this.vL}bM(t,s,e){this.Vb();const i=Xc.Hr(Xc.JS.sk,this);return i.VT(t,s,e),i}AA(t,s,e){return s.qT(t,e)}MM(t){t&&(t.ZT(),t.QT()>0||(this.RA()||(this.Vb(),this.pL===t&&this.BO(null),this.gL===t&&this.lN(null)),t.JT()))}uN(t,s){this.RA()||(s?this.bL.add(t):this.bL.delete(t))}cN(t,s){s?this.xL.add(t):this.xL.delete(t)}fN(t){const s=[t],e=Xc.JS.nk.rk();for(const t of this.xL)t.qr();for(const i of this.bL){if(s.length>=e)break;i!==t&&s.push(i)}s.length<2||Xc.Hr(Xc.JS.nk,this,s)}pF(){this.dN()}pN(){this.dN()}dN(){this.nD=this.iD.getCurrentTexture(),this.hD=this.nD.createView({label:"swapchaintextureview"}),this.kL.AM().mN()}Ub(){null===this.DL&&this.kL.gN()&&this.yN(),super.Ub(),this.zD.SN(this.Hw),this.kL.AM().wN(),this.nD=null,this.hD=null}Wk(){this.FL=this.sD.createCommandEncoder(),this.HD&=-16385}vN(t){if(!this.LF())throw new Error("GPU profiling not supported");if(this.UL)throw new Error("already started frame timing");return this.VL=!1,this.jL.clear(),this.UL=Xc.Hr(Xc.JS.bN,this,t),this.UL}xN(t,s){if(this.LF()){if(!this.UL)throw new Error("not started frame timing");if(t<0||s<0||t===s)throw new Error("invalid timestamp index");this.CN(),this.VL=!0,this.WL=t,this.zL=s}}TN(){this.VL&&(this.CN(),this.VL=!1)}JO(t,s){if(this.DE+t>65535||this.LE+s>393210)this.Vb();else if(1&this.HD)return void(this.YD+=s);null===this.DL&&this.yN(),this.HD|=1,this.JD=this.LE,this.YD=s}YO(){const t=this.DE;let s=this.LE;this.LE+=6;const e=this.AE;e[s++]=t,e[s++]=t+1,e[s++]=t+2,e[s++]=t,e[s++]=t+2,e[s]=t+3}MN(){const t=this.HD;if(!(1&t))return;const s=this.DL;if(16&t){const e=this.WE;s.setViewport(0,0,e.Cy(),e.My(),0,1),2&t?s.setIndexBuffer(this.vD,"uint16"):s.setIndexBuffer(this._E,"uint16"),s.setVertexBuffer(0,this.sI),s.setVertexBuffer(1,this.eI),s.setVertexBuffer(2,this.iI),s.setVertexBuffer(3,this.wD),25165824&t&&s.setStencilReference(1),4&t&&this.IN(s,this.eL,e)}if(32&t){let e=0;1073741824&t?e=4:8388608&t?e=2:16777216&t?e=3:3145728&~t||(e=1),s.setPipeline(this.IL.GN(this.GL,e,this.PL,this.RL,this._L))}if(8192&t&&s.setBindGroup(0,this.wL),64&t&&s.setBindGroup(1,this.mL),128&t&&s.setBindGroup(2,this.yL),256&t&&s.setBindGroup(3,this.SL),8&t){const e=this.WE;4&t?this.IN(s,this.eL,e):s.setScissorRect(0,0,e.Cy(),e.My())}s.drawIndexed(this.YD,1,this.JD,0,0),this.HD&=-8698}IN(t,s,e){const i=e.Cy(),r=e.My();let n=Xc.Zr(s.Qa(),0,i),h=Xc.Zr(s.tl(),0,r),o=Xc.Zr(s.sl(),n,i),a=Xc.Zr(s.el(),h,r);Number.isNaN(n)&&(n=0),Number.isNaN(h)&&(h=0),Number.isNaN(o)&&(o=i),Number.isNaN(a)&&(a=r),t.setScissorRect(n,h,o-n,a-h)}yN(){const t=this.HD;7680&t&&this._N();let s=null;s=8388608&t?this.PN():16777216&t?this.RN():this.AN(),this.DL=this.FL.beginRenderPass(s),this.HD|=25072}AN(){const t=this.HD,s=this.WE,e={colorAttachments:[{view:s.EN(),loadOp:s.gN()?"clear":"load",clearValue:s.ON().toJSON(),storeOp:"store"}]};return this.FN(e),s.DN(!1),3145728&~t||(e.depthStencilAttachment={view:this.cD,depthLoadOp:4194304&t?"clear":"load",depthClearValue:1,depthStoreOp:"store",stencilLoadOp:"clear",stencilClearValue:0,stencilStoreOp:"discard"},this.HD&=-4194305),e}PN(){const t=this.HD,s={colorAttachments:[],depthStencilAttachment:{view:this.cD,depthLoadOp:4194304&t?"clear":"load",depthClearValue:1,depthStoreOp:"store",stencilLoadOp:33554432&t?"clear":"load",stencilClearValue:0,stencilStoreOp:"store"}};return this.FN(s),this.HD&=-37748737,s}RN(){const t=this.WE,s={colorAttachments:[{view:t.EN(),loadOp:t.gN()?"clear":"load",clearValue:t.ON().toJSON(),storeOp:"store"}],depthStencilAttachment:{view:this.cD,depthReadOnly:!0,stencilReadOnly:!0}};return this.FN(s),t.DN(!1),s}FN(t){if(!this.VL)return;const s={querySet:this.UL.LN(),endOfPassWriteIndex:this.zL};this.jL.has(this.WL)||(s.beginningOfPassWriteIndex=this.WL,this.jL.add(this.WL)),t.timestampWrites=s}kN(t){t.gN()&&(this.CN(),this.FL.beginRenderPass({colorAttachments:[{view:t.EN(),loadOp:"clear",clearValue:t.ON().toJSON(),storeOp:"store"}]}).end(),this.HD|=16384,t.DN(!1))}CN(){null!==this.DL&&(this.MN(),this.DL.end(),this.DL=null)}Vb(t=!1){this.CN(),this.UL&&t&&(this.UL.NN(this.FL),this.HD|=16384),16384&this.HD&&(this.LL.push(this.FL.finish()),this.Wk()),0!==this.LL.length&&(this.EO(),this.sD.queue.submit(this.LL),Xc.bh(this.LL),this.zD.BN(),this.UL&&t&&(this.UL.$N(),this.UL=null))}EO(){const t=this.sD.queue;if(this.DE>0){const s=this.DE;t.writeBuffer(this.sI,0,this.RE.buffer,0,3*s*4),t.writeBuffer(this.eI,0,this.EE.buffer,0,2*s*4),65536&this.HD&&t.writeBuffer(this.wD,0,this.UD.buffer,0,4*s);const e=this.rI()?2:4;t.writeBuffer(this.iI,0,this.OE.buffer,0,4*s*e),this.DE=0}this.LE>0&&(this.LE%2!=0&&(this.AE[this.LE++]=0),t.writeBuffer(this._E,0,this.AE.buffer,0,2*this.LE),this.LE=0),this.kE>0&&(t.writeBuffer(this.nI,0,this.FE.buffer,0,4*this.kE),this.kE=0)}Ak(){this.HD|=512,this.qD|=1,this.UN(this.bD.transform)}Ek(){const t=this.bD.VN;this.nL.Wo(this.GD,t.offset/4),this.UN(t)}Ok(){const t=this.bD.WN;this.GD[t.offset/4]=this.hL,this.UN(t)}UN(t){const s=t.offset,e=t.end;1024&this.HD?(this.XD=Math.min(this.XD,s),this.KD=Math.max(this.KD,e)):(this.HD|=1024,this.XD=s,this.KD=e,this.CN())}Fk(){this.zN(this.iL,this._D.jN)}Dk(){this.zN(this.rL,this._D.HN)}zN(t,s){t.Wo(this.OD,s.offset/4),this.qN(s)}JN(t,s){t.Wo(this.OD,s.offset/4),this.qN(s)}qN(t){const s=t.offset,e=t.end;2048&this.HD?(this.ZD=Math.min(this.ZD,s),this.QD=Math.max(this.QD,e)):(this.HD|=2048,this.ZD=s,this.QD=e,this.CN())}YN(t,s){this.BD[s.offset/4]!==Math.fround(t)&&(this.BD[s.offset/4]=t,this.XN(s))}KN(t,s){this.$D[s.offset/4]!==t&&(this.$D[s.offset/4]=t,this.XN(s))}ZN(t,s){t.Yo(this.BD,s.offset/4)||(t.Wo(this.BD,s.offset/4),this.XN(s))}XN(t){const s=t.offset,e=t.end;4096&this.HD?(this.tL=Math.min(this.tL,s),this.sL=Math.max(this.sL,e)):(this.HD|=4096,this.tL=s,this.sL=e,this.CN())}_N(){const t=this.HD;512&t&&(Qc.multiply(this.lD,this.pw,this.mw),this.GD.set(this.lD,this.bD.transform.offset/4)),1024&t&&this.zD.QN(this.FL,this.mD,this.ID,this.XD,this.KD-this.XD),2048&t&&this.zD.QN(this.FL,this.gD,this.ED,this.ZD,this.QD-this.ZD),4096&t&&this.zD.QN(this.FL,this.yD,this.ND,this.tL,this.sL-this.tL),this.HD=-7681&t|16384}MF(t){let s=this.Vy,e=this.Wy,i=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),i=!1),"number"==typeof t.height&&(e=Math.floor(t.height),i=!1)),s<=0||e<=0)throw new Error("invalid size");this.Vb();const r=Xc.Hr(Xc.JS.ek,this);return r.wM(s,e,Object.assign({rM:i},t)),r}IF(t,s=!0){null===t&&(t=this.kL),this.WE!==t&&(this.CN(),this.WE=t,this.JL(2097152,t.LM()),t.kM()&&!t.nN()&&t.TM(this.Vy,this.Wy),s&&this._O())}PF(t){}vF(){return this.WE===this.kL?null:this.WE}sF(t){return null===t?[this.Vy,this.Wy]:[t.Cy(),t.My()]}tB(){return this.kL}RF(t){this.Vb(),this.WE===t&&this.IF(null);const s=t.AM();this.pL===s&&this.BO(null),this.gL===s&&this.lN(null),t.JT()}async WM(t,s,e){this.kN(t),this.Vb(),null===t&&(t=this.kL);const i=this.sD,r=t.Cy(),n=t.My();let h=0,o=0,a=r,l=n;if(e){h=Xc.Zr(Math.floor(e.Qa()),0,r-1),o=Xc.Zr(Math.floor(e.tl()),0,n-1);let t=e.width();t=0===t?r-h:Xc.Zr(Math.floor(t),0,r-h);let s=e.height();s=0===s?n-o:Xc.Zr(Math.floor(s),0,n-o),a=t,l=s}const u=i.createCommandEncoder(),c=t.AM();let f=c.XT(),d=null;"rgba8unorm"===c.sB()?c.eB()||Xc.wr():(d=this.iB(c,"rgba8unorm",u),f=d);const p=4*a,m=256*Math.ceil(p/256),g=i.createBuffer({size:m*l,usage:sf.MAP_READ|sf.COPY_DST});u.copyTextureToBuffer({texture:f,origin:[h,o,0]},{buffer:g,bytesPerRow:m},[a,l,1]);const y=u.finish();i.queue.submit([y]),d&&d.destroy(),await g.mapAsync(self.GPUMapMode.READ);const S=g.getMappedRange().slice(0);let w;if(m===p)w=new ImageData(new Uint8ClampedArray(S),a,l);else{const t=new ArrayBuffer(p*l),s=new Uint8Array(t);for(let t=0;t<l;++t){const e=t*m,i=t*p;s.set(new Uint8Array(S,e,p),i)}w=new ImageData(new Uint8ClampedArray(t),a,l)}return g.destroy(),w}iB(t,s,e){const i=this.sD,r=t.Cy(),n=t.My();if(t.sB()===s)throw new Error("no conversion necessary");t.DM()||Xc.wr();const h=i.createTexture({size:[r,n,1],format:s,usage:nf.COPY_SRC|nf.RENDER_ATTACHMENT}),o=this.AL.Rk(s),a=o.getBindGroupLayout(0),l=this.Uk({yT:"nearest"}),u=t.XT().createView({baseMipLevel:0,mipLevelCount:1}),c=h.createView({baseMipLevel:0,mipLevelCount:1}),f=e.beginRenderPass({colorAttachments:[{view:c,loadOp:"clear",clearValue:[0,0,0,0],storeOp:"store"}]}),d=i.createBindGroup({layout:a,entries:[{binding:0,resource:l},{binding:1,resource:u}]});return f.setPipeline(o),f.setBindGroup(0,d),f.draw(4),f.end(),h}gF(t){524288&this.HD&&(t=!!t,!!(1048576&this.HD)!==t&&(2097152&this.HD&&this.CN(),this.JL(1048576,t)))}yF(){return this.YL(1048576)}rN(){return this.YL(524288)}SF(t){if(!this.bE)return;if(t&&this.yF())throw new Error("depth still enabled");const s=t?this.dD:this.pD;this.SL!==s&&(this.MN(),this.SL=s,this.HD|=256)}Ru(t){this.CN(),this.WE.DN(!0),this.WE.ON().set(t)}dF(t,s,e,i){this.CN(),this.WE.DN(!0),this.WE.ON().Po(t,s,e,i)}mF(){2621440&~this.HD||(this.CN(),this.HD|=4194304)}wF(t,s,e,i){t=Math.floor(t),s=Math.floor(s),e=Math.floor(e),i=Math.floor(i),4&this.HD&&this.eL.Za(t,s,e,i)||(this.MN(),this.HD|=12,this.eL.ja(t,s,e,i))}bF(){4&this.HD&&(this.MN(),this.HD&=-5,this.HD|=8)}bv(){return 65536&this.HD?this.xw:this.EL}xv(){this.Cv(this.bv())}Cv(t){if(this.IL!==t){if(t===this.xw&&!(65536&this.HD))throw new Error("cannot set multitexture fill program when multitexturing not allowed");this.MN(),this.IL=t,this.Dw=null,this.HD|=32,this.rB(t===this.xw)}}nF(){return this.IL}rB(t){if(t=!!t,!!(131072&this.HD)===t)return;this.JL(131072,t);const s=null===this.pL?this.dL:this.pL;this.nB(s)}hB(t){t=!!t,!!(262144&this.HD)!==t&&(this.MN(),this.JL(262144,t),this.JL(32,!0))}oB(t){t=!!t,!!(1073741824&this.HD)!==t&&(this.MN(),this.JL(1073741824,t),this.HD|=32)}aB(){return this.YL(1073741824)}BO(t){t!==this.pL&&(this.pL=t,null===t&&(t=this.dL),this.nB(t))}nB(t){if(131072&this.HD){const s=t.lB();if(null!==s)return this.uB(s),this.VD=t.cB(),void this.hB(!0)}this.uB(t.kk()),this.VD=0,this.hB(!1)}uB(t){t!==this.mL&&(this.MN(),this.mL=t,this.HD|=64)}fB(t){this.pL===t&&(this.MN(),this.mL=t.kk(),this.HD|=64)}dB(t){if(this.mL!==t)return;this.MN();const s=null===this.pL?this.dL:this.pL;this.mL=s.kk(),this.VD=0,this.HD|=64}lN(t){t!==this.gL&&(this.gL=t,null===t&&(t=this.dL),this.MN(),this.yL=t.Nk(),this.HD|=128)}pB(t,s,e,i,r,n){const h=t.mB(),o=s.mB();if(0===(h&nf.COPY_SRC))throw new Error("source texture missing COPY_SRC usage");if(0===(o&nf.COPY_DST))throw new Error("destination texture missing COPY_DST usage");if(t===s)throw new Error("invalid destination");const a=Math.min(t.Cy(),s.Cy()),l=Math.min(t.My(),s.My());r=Math.min(r,a-e),n=Math.min(n,l-i),r<=0||n<=0||(this.CN(),this.FL.copyTextureToTexture({texture:t.XT(),origin:[e,i]},{texture:s.XT(),origin:[e,i]},[r,n]),this.HD|=16384)}gB(t){return t>=2?4:1}yB(t){t=this.gB(t),this._L!==t&&(this.MN(),this._L=t,this.HD|=32)}Zx(t){t!==this.GL&&(this.MN(),this.GL=t,this.Dw=null,this.HD|=32)}UO(t){this.Zx(this.Jv(t))}WO(){this.Zx(0)}HO(){this.Zx(3)}DO(t,s,e,i){const r=this.WD;r.Jo(t,s,e,i)||(r.Po(t,s,e,i),this.Dw=null)}LO(t){const s=this.WD;s.Uo()!==t&&(s.Lo(t),this.Dw=null)}FO(){return this.WD.Uo()}Qx(t){const s=this.WD;s.equals(t)||(s.set(t),this.Dw=null)}kO(){this.DO(1,1,1,1)}NO(){return this.WD}kb(t){t!==this.PL&&(this.MN(),this.PL=t,this.Dw=null,this.HD|=32)}zO(){return this.PL}Nb(t){t!==this.RL&&(this.MN(),this.RL=t,this.Dw=null,this.HD|=32)}jO(){return this.RL}Rect(t){this.qO(t.Qa(),t.tl(),t.sl(),t.el())}qO(t,s,e,i){this.$b(t,s,e,s,e,i,t,i)}SB(t){const s=this.UD,e=this.VD;s[t++]=e,s[t++]=e,s[t++]=e,s[t]=e}Pl(t){this.XO(t,Zf)}$b(t,s,e,i,r,n,h,o){this.JO(4,6),this.YO();const a=this.RE,l=this.DE;this.DE+=4;let u=3*l;const c=this.Nw+this.Bw;a[u++]=t,a[u++]=s,a[u++]=c,a[u++]=e,a[u++]=i,a[u++]=c,a[u++]=r,a[u++]=n,a[u++]=c,a[u++]=h,a[u++]=o,a[u]=c,Zf.Wo(this.EE,2*l),262144&this.HD&&this.SB(l),this.WD.zo(this.OE,4*l)}ab(t,s){this.JO(4,6),this.YO();const e=this.DE;this.DE+=4,t.Yl(this.RE,3*e,this.Nw+this.Bw),s.nl(this.EE,2*e),262144&this.HD&&this.SB(e),this.WD.zo(this.OE,4*e)}XO(t,s){this.JO(4,6),this.YO();const e=this.DE;this.DE+=4,t.Yl(this.RE,3*e,this.Nw+this.Bw),s.Wo(this.EE,2*e),262144&this.HD&&this.SB(e),this.WD.zo(this.OE,4*e)}KO(t,s,e){this.JO(4,6),this.YO();const i=this.DE;this.DE+=4,t.Yl(this.RE,3*i,this.Nw+this.Bw),s.Wo(this.EE,2*i),262144&this.HD&&this.SB(i),this.OE.set(e,4*i)}ZO(t,s,e,i,r,n,h,o,a,l,u,c,f){this.JO(4,6),this.YO();const d=this.RE,p=this.DE;this.DE+=4;let m=3*p;const g=this.Nw+this.Bw;d[m++]=t,d[m++]=s,d[m++]=g+e,d[m++]=i,d[m++]=r,d[m++]=g+n,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.nl(this.EE,2*p),262144&this.HD&&this.SB(p),this.WD.zo(this.OE,4*p)}ib(t,s,e,i,r,n,h,o,a,l,u,c,f){this.JO(4,6),this.YO();const d=this.RE,p=this.DE;this.DE+=4;let m=3*p;const g=this.Nw+this.Bw;d[m++]=t,d[m++]=s,d[m++]=g+e,d[m++]=i,d[m++]=r,d[m++]=g+n,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.Wo(this.EE,2*p),262144&this.HD&&this.SB(p),this.WD.zo(this.OE,4*p)}QO(t,s,e,i,r,n,h,o,a,l,u,c,f,d){this.JO(4,6),this.YO();const p=this.RE,m=this.DE;this.DE+=4;let g=3*m;const y=this.Nw+this.Bw;p[g++]=t,p[g++]=s,p[g++]=y+e,p[g++]=i,p[g++]=r,p[g++]=y+n,p[g++]=h,p[g++]=o,p[g++]=y+a,p[g++]=l,p[g++]=u,p[g]=y+c,f.Wo(this.EE,2*m),262144&this.HD&&this.SB(m),this.OE.set(d,4*m)}hT(t,s,e,i){if(t.length%3!=0)throw new Error("vertex buffer length not multiple of 3");if(t.length>196605)throw new Error(`too many vertices (${t.length/3}, limit 65535)`);if(e.length%3!=0)throw new Error("index buffer length not multiple of 3");if(e.length>393210)throw new Error(`too many indices (${e.length}, limit 393210)`);this.JO(t.length,e.length);const r=this.DE;this.RE.set(t,3*r),this.EE.set(s,2*r),262144&this.HD&&this.UD.fill(this.VD,r,r+t.length);const n=this.AE;if(0===r)n.set(e,this.LE);else{let t=this.LE;for(let s=0,i=e.length;s<i;++s)n[t++]=e[s]+r}const h=this.OE;if(null!=i)h.set(i,4*r);else{const s=this.WD,e=s.No(),i=s.Bo(),n=s.$o(),o=s.Uo();let a=4*r;for(let s=0,r=t.length;s<r;++s)h[a++]=e,h[a++]=i,h[a++]=n,h[a++]=o}this.DE+=t.length/3,this.LE+=e.length}eF(t){this.nL.equals(t)||(this.nL.S(t),this.Ek());const s=this.Nw+this.Bw;this.hL!==s&&(this.hL=s,this.Ok()),this.rL.equals(this.WD)||(this.rL.S(this.WD),this.Dk()),this.Cv(this.Tv()),this.YD=0,this.HD|=18}iF(){this.YD>0&&this.MN(),this.HD&=-3,this.HD|=16}rF(t,s,e,i){let r=this.kE;r>cf&&(this.Vb(),r=0),1&this.HD?this.YD+=6:(null===this.DL&&this.yN(),this.HD|=1,this.JD=r/4*6,this.YD=6);const n=this.FE;n[r++]=t,n[r++]=s,n[r++]=e,n[r++]=i,this.kE=r}oF(t){this.iL.equals(t)||(this.iL.S(t),this.Fk())}aF(t,s,e=1){const i=this._D,r=this.OD;Qf.set(t,s),Qf.Yo(r,i.wB.offset/4)||this.JN(Qf,i.wB),r[i.vB.offset/4]!==Math.fround(e)&&(r[i.vB.offset/4]=e,this.qN(i.vB))}lF(t,s,e,i,r,n,h){const o=this._D,a=this.OD;t.Yo(a,o.bB.offset/4)||(t.Wo(a,o.bB.offset/4),this.qN(o.bB)),Qf.set(i/s,r/e),Qf.Yo(a,o.xB.offset/4)||this.JN(Qf,o.xB),Qf.set(n/s,h/e),Qf.Yo(a,o.CB.offset/4)||this.JN(Qf,o.CB)}uF(t,s,e,i,r,n,h){const o=this._D,a=this.OD;Qf.set(e,i),Qf.Yo(a,o.xB.offset/4)||this.JN(Qf,o.xB),a[o.vB.offset/4]!==Math.fround(r)&&(a[o.vB.offset/4]=r,this.qN(o.vB)),Qf.set(n,h),Qf.Yo(a,o.CB.offset/4)||this.JN(Qf,o.CB)}cF(t,s,e,i,r,n,h,o,a,l,u){const c=this.FD,f=this.IL;u%=10800,f.Bx()&&this.lN(t),f.TB()&&(this.ZN(s,c.MB),this.ZN(e,c.bB),this.ZN(i,c.IB),this.ZN(r,c.GB)),this.YN(o,c.devicePixelRatio),this.YN(a,c._B),this.YN(l,c.PB),this.YN(u,c.sg),this.YN(this.nv(),c.RB),this.YN(this.ov(),c.AB)}fF(t){t&&(t.EB()&&(this.CN(),t.OB(this.FL)),this.DB(t.LB()))}kB(t){this.KN(t?1:0,this.FD.NB)}DB(t){t!==this.wL&&(this.MN(),this.wL=t,this.HD|=8192)}BB(t){this.wL===t&&this.DB(this.lL)}GF(t){if(t.gN())return this.WE.DN(!0),void this.WE.ON().set(t.ON());t.NM()>=2&&this.WE.NM()<2?this.$B(t):(this.dF(0,0,0,0),this.HO(),this.kO(),this._F(t))}_F(t){this.kN(t);const s=t.AM();this.BO(s),this.tF()}tF(){const t=this.aB();t||this.oB(!0),this.Kv(0);const s=ed,e=td;s.set(0,-1,0,-1,2,1,0,1),e.set(0,-1,2,1),this.ab(s,e),t||this.oB(!1)}$B(t){this.kN(t),this.CN(),this.FL.beginRenderPass({colorAttachments:[{view:t.AM().EN(),resolveTarget:this.WE.AM().EN(),loadOp:"load",storeOp:"store"}]}).end(),this.HD|=16384}AF(){this.CN(),this.gF(!0),this.HD|=41943040}EF(t=!1){this.CN(),this.gF(t),this.HD&=-8388609,this.HD|=16777216}OF(){return this.YL(16777216)}FF(t=!0){this.CN(),this.gF(t),this.HD&=-16777217}SO(){this.Hv([["normal",["one","one-minus-src-alpha"]],["additive",["one","one"]],["xor",["one","one-minus-src-alpha"]],["copy",["one","zero"]],["destination-over",["one-minus-dst-alpha","one"]],["source-in",["dst-alpha","zero"]],["destination-in",["zero","src-alpha"]],["source-out",["one-minus-dst-alpha","zero"]],["destination-out",["zero","one-minus-src-alpha"]],["source-atop",["dst-alpha","one-minus-src-alpha"]],["destination-atop",["one-minus-dst-alpha","src-alpha"]],["lighten",["one","one","one","one","max","max"]],["darken",["one","one","one","one","min","min"]],["multiply",["dst","one-minus-src-alpha","one","one-minus-src-alpha"]],["screen",["one","one-minus-src","one","one-minus-src-alpha"]]])}UB(){return this.QF?[...this.QF.features]:[]}VB(){return this.tD}WB(){const t=this.tD;if(!t)return"unknown/unknown";const s=t.vendor||"unknown",e=t.architecture||"unknown",i=[];return t.device&&i.push(t.device),t.description&&i.push(t.description),t.type&&i.push(t.type),t.backend&&i.push(t.backend),s+"/"+e+(i.length>0?` (${i.join(", ")})`:"")}}}{const id=self.Gs,rd=!0;id.JS.jD=class{constructor(t){this.nx=t,this.zB=new Map,this.jB=[],this.HB=[],this.qB=[],this.JB=0,this.YB=0,this.XB=0,this.KB=0,this.ZB=0,this.QB=0}Rx(){return this.nx}tC(){this.zB.clear(),id.bh(this.jB),id.bh(this.HB),id.bh(this.qB)}t$(t){return Math.max(id.xn(t),16)}s$(t){this.ZB++;const s=this.t$(t);{const t=this.zB.get(s);if(void 0!==t&&t.length>0){const e=t.pop();return e.e$(),0===t.length&&this.zB.delete(s),e}}return this.JB++,this.YB+=s,this.XB++,id.Hr(id.JS.i$,this,s)}r$(t){this.QB++;const s=t.Fu(),e=this.zB.get(s);void 0===e?this.zB.set(s,[t]):e.push(t)}n$(t){this.qB.push(t)}BN(){for(const t of this.jB)t.h$();id.bh(this.jB);for(const t of this.HB)this.JB--,this.YB-=t.Fu(),t.qr();id.bh(this.HB);for(const t of this.qB)t.destroy();id.bh(this.qB)}SN(t){t%30==0&&this.o$(t)}o$(t){for(const[s,e]of this.zB.entries()){let i=0;for(let s=0,r=e.length;s<r;++s){const r=e[s];r.a$(t)?(this.JB--,this.YB-=r.Fu(),r.qr(),this.KB++):(e[i]=r,++i)}0===i?this.zB.delete(s):id.wh(e,i)}this.l$()}QN(t,s,e,i,r){const n=this.s$(r),h=n.u$(),o=h.getMappedRange(0,r);new Uint8Array(o).set(new Uint8Array(e,i,r)),h.unmap(),t.copyBufferToBuffer(h,0,s,i,r),this.jB.push(n)}l$(){this.XB=0,this.KB=0,this.ZB=0,this.QB=0}}}{const nd=self.Gs,hd=self.GPUBufferUsage,od=self.GPUMapMode,ad=self.assert,ld=0,ud=1,cd=2;nd.JS.i$=class{constructor(t,s){this.zD=t,this.c$=1,this.f$=s,this.sE=this.Rx().zk().createBuffer({mappedAtCreation:!0,size:s,usage:hd.COPY_SRC|hd.MAP_WRITE}),this.d$=0}Rx(){return this.zD.Rx()}p$(){return this.c$}Fu(){return this.f$}u$(){return this.sE}e$(){this.c$=1}async h$(){this.c$=2;try{await this.sE.mapAsync(od.WRITE)}catch(t){return void console.warn("[WebGPU] Error recycling buffer, assuming device was lost: ",t)}this.Rx().RA()||(this.c$=0,this.d$=this.Rx().Wb(),this.zD.r$(this))}m$(){this.c$=0}a$(t){return this.d$<=t-25}qr(){this.sE.destroy(),this.sE=null,this.zD=null}}}{const fd=self.Gs,dd=self.assert,pd=self.GPUBufferUsage;fd.JS.g$=class{constructor(t){const s=t.Rx();this.zx=t,this.y$=t.S$(),this.w$=new ArrayBuffer(this.y$),this.v$=new Float32Array(this.w$),this.b$=!1,this.sE=s.zk().createBuffer({size:this.y$,usage:pd.UNIFORM|pd.COPY_DST}),this.x$=s.Lk(this.sE)}qr(){this.Rx().BB(this.x$),this.Rx().oN().n$(this.sE),this.sE=null,this.zx=null,this.w$=null,this.v$=null,this.x$=null}Rx(){return this.zx.Rx()}QI(){return this.zx}LB(){return this.x$}C$(t,s){const e=this.zx.T$(t),i=e.type,r=e.offset/4,n=this.v$;if("color"===i){if(s.Xo(n,r))return;s.jo(n,r),this.b$=!0}else{if("float"!==i&&"percent"!==i)throw new Error(`unexpected shader param type '${i}'`);if(n[r]===Math.fround(s))return;n[r]=s,this.b$=!0}}EB(){return this.b$}OB(t){this.Rx().oN().QN(t,this.sE,this.w$,0,this.y$),this.b$=!1}}}{let md=function(t){for(const s of Object.values(t))s.end=s.offset+s.size},gd=function(t){const s=[];for(let e=0;e<t;++e)s.push(null);return s},yd=function(t){return`\nstruct FragmentInput {\n\t@location(1) fragUV : vec2<f32>,\n\t@location(2) fragColor : vec4<${t?"f16":"f32"}>,\n\t@builtin(position) fragPos : vec4<f32>\n};\n\nfn c3_getBackUV(fragPos : vec2<f32>, texBack : texture_2d<f32>) -> vec2<f32>\n{\n\treturn fragPos / vec2<f32>(textureDimensions(texBack));\n}\n\nfn c3_getDepthUV(fragPos : vec2<f32>, texDepth : texture_depth_2d) -> vec2<f32>\n{\n\treturn fragPos / vec2<f32>(textureDimensions(texDepth));\n}\n`},Sd=function(t,s,e,i,r){return t<<10|s<<7|e<<5|i<<4|r};UpdateLayoutEndValues=md,makeNullFilledArray=gd,GetFragmentInputStructDeclaration=yd,HashPipelineState=Sd;const wd=self.Gs,vd=4,bd=2,xd=4,Cd=8,Td=16,Md=64,Id="\nstruct Uniforms {\n\ttransform\t\t: mat4x4<f32>,\n\tpointTexStart\t: vec2<f32>,\n\tpointTexEnd\t\t: vec2<f32>,\n\tzElevation\t\t: f32\n};\n@binding(0) @group(0) var<uniform> uniforms : Uniforms;\n",Gd={transform:{offset:0,size:64,end:0},VN:{offset:64,size:16,end:0},M$:{offset:64,size:8,end:0},I$:{offset:72,size:8,end:0},WN:{offset:80,size:4,end:0}};md(Gd);const _d=Gd.WN.end,Pd="\nstruct Uniforms {\n\tcolor2\t\t\t\t: vec4<f32>,\n\tpointColor \t\t\t: vec4<f32>,\n\ttileSize\t\t\t: vec2<f32>,\n\ttileSpacing\t\t\t: vec2<f32>,\n\tsrcRectStart\t\t: vec2<f32>,\n\tsrcRectEnd\t\t\t: vec2<f32>,\n\tpixelSize\t\t\t: vec2<f32>,\n\toutlineThickness\t: f32\n};\n@binding(1) @group(0) var<uniform> uniforms : Uniforms;\n",Rd={jN:{offset:0,size:16,end:0},HN:{offset:16,size:16,end:0},xB:{offset:32,size:8,end:0},CB:{offset:40,size:8,end:0},bB:{offset:48,size:16,end:0},G$:{offset:48,size:8,end:0},_$:{offset:56,size:8,end:0},wB:{offset:64,size:8,end:0},vB:{offset:72,size:4,end:0}};md(Rd);const Ad=Rd.vB.end,Ed="\nstruct C3Params {\n\tsrcStart\t\t\t: vec2<f32>,\n\tsrcEnd\t\t\t\t: vec2<f32>,\n\tsrcOriginStart\t\t: vec2<f32>,\n\tsrcOriginEnd\t\t: vec2<f32>,\n\tlayoutStart\t\t\t: vec2<f32>,\n\tlayoutEnd\t\t\t: vec2<f32>,\n\tdestStart\t\t\t: vec2<f32>,\n\tdestEnd\t\t\t\t: vec2<f32>,\n\tdevicePixelRatio\t: f32,\n\tlayerScale\t\t\t: f32,\n\tlayerAngle\t\t\t: f32,\n\tseconds\t\t\t\t: f32,\n\tzNear\t\t\t\t: f32,\n\tzFar\t\t\t\t: f32,\n\tisSrcTexRotated\t\t: u32\n};\n@binding(4) @group(0) var<uniform> c3Params : C3Params;\n\nfn c3_srcToNorm(p : vec2<f32>) -> vec2<f32>\n{\n\treturn (p - c3Params.srcStart) / (c3Params.srcEnd - c3Params.srcStart);\n}\n\nfn c3_normToSrc(p : vec2<f32>) -> vec2<f32>\n{\n\treturn fma(p, c3Params.srcEnd - c3Params.srcStart, c3Params.srcStart);\n}\n\nfn c3_clampToSrc(p : vec2<f32>) -> vec2<f32>\n{\n\treturn clamp(p, min(c3Params.srcStart, c3Params.srcEnd), max(c3Params.srcStart, c3Params.srcEnd));\n}\n\nfn c3_srcOriginToNorm(p : vec2<f32>) -> vec2<f32>\n{\n\treturn (p - c3Params.srcOriginStart) / (c3Params.srcOriginEnd - c3Params.srcOriginStart);\n}\n\nfn c3_normToSrcOrigin(p : vec2<f32>) -> vec2<f32>\n{\n\treturn fma(p, c3Params.srcOriginEnd - c3Params.srcOriginStart, c3Params.srcOriginStart);\n}\n\nfn c3_clampToSrcOrigin(p : vec2<f32>) -> vec2<f32>\n{\n\treturn clamp(p, min(c3Params.srcOriginStart, c3Params.srcOriginEnd), max(c3Params.srcOriginStart, c3Params.srcOriginEnd));\n}\n\nfn c3_getLayoutPos(p : vec2<f32>) -> vec2<f32>\n{\n\treturn fma(p - c3Params.srcOriginStart, (c3Params.layoutEnd - c3Params.layoutStart) / (c3Params.srcOriginEnd - c3Params.srcOriginStart), c3Params.layoutStart);\n}\n\nfn c3_srcToDest(p : vec2<f32>) -> vec2<f32>\n{\n\treturn fma(p - c3Params.srcStart, (c3Params.destEnd - c3Params.destStart) / (c3Params.srcEnd - c3Params.srcStart), c3Params.destStart);\n}\n\nfn c3_clampToDest(p : vec2<f32>) -> vec2<f32>\n{\n\treturn clamp(p, min(c3Params.destStart, c3Params.destEnd), max(c3Params.destStart, c3Params.destEnd));\n}\n\nfn c3_linearizeDepth(depthSample : f32) -> f32\n{\n\treturn c3Params.zNear * c3Params.zFar / (c3Params.zFar + depthSample * (c3Params.zNear - c3Params.zFar));\n}\n",Od=["srcStart","srcEnd","srcOriginStart","srcOriginEnd","c3_srcToNorm","c3_normToSrc","c3_clampToSrc","c3_srcOriginToNorm","c3_normToSrcOrigin","c3_clampToSrcOrigin","c3_getLayoutPos","c3_srcToDest"],Fd=["layoutStart","layoutEnd","destStart","destEnd","c3_clampToDest"],Dd={bB:{offset:0,size:16,end:0},P$:{offset:0,size:8,end:0},R$:{offset:8,size:8,end:0},IB:{offset:16,size:16,end:0},A$:{offset:16,size:8,end:0},E$:{offset:24,size:8,end:0},GB:{offset:32,size:16,end:0},O$:{offset:32,size:8,end:0},F$:{offset:40,size:8,end:0},MB:{offset:48,size:16,end:0},D$:{offset:48,size:8,end:0},L$:{offset:56,size:8,end:0},devicePixelRatio:{offset:64,size:4,end:0},_B:{offset:68,size:4,end:0},PB:{offset:72,size:4,end:0},sg:{offset:76,size:4,end:0},RB:{offset:80,size:4,end:0},AB:{offset:84,size:4,end:0},NB:{offset:88,size:4,end:0}};md(Dd);const Ld=Dd.NB.end,kd="\nstruct FragmentOutput {\n\t@location(0) color : vec4<f32>\n};\n",Nd=new Map([["float",4],["percent",4],["color",12]]),Bd=new Map([["float",4],["percent",4],["color",16]]),$d="\nfn c3_premultiply(c : vec4<f32>) -> vec4<f32>\n{\n\treturn vec4<f32>(c.rgb * c.a, c.a);\n}\n\nfn c3_unpremultiply(c : vec4<f32>) -> vec4<f32>\n{\n\tif (c.a == 0.0)\n\t{\n\t\treturn vec4<f32>(0.0);\n\t}\n\t\n\treturn vec4<f32>(c.rgb / c.a, c.a);\n}\n\nfn c3_grayscale(rgb : vec3<f32>) -> f32\n{\n\treturn dot(rgb, vec3<f32>(0.299, 0.587, 0.114));\n}\n\nfn c3_getPixelSize(t : texture_2d<f32>) -> vec2<f32>\n{\n\treturn vec2<f32>(1.0) / vec2<f32>(textureDimensions(t));\n}\n\nfn c3_clamp2(v : vec2<f32>, l : f32, u : f32) -> vec2<f32>\n{\n\treturn clamp(v, vec2<f32>(l), vec2<f32>(u));\n}\n\nfn c3_mod(x : f32, y : f32) -> f32\n{\n\treturn x - y * floor(x / y);\n}\n\nfn c3_mod2(x : vec2<f32>, y : vec2<f32>) -> vec2<f32>\n{\n\treturn x - y * floor(x / y);\n}\n\nfn c3_RGBtoHSL(color : vec3<f32>) -> vec3<f32>\n{\n\tvar hsl : vec3<f32> = vec3<f32>(0.0);\n\t\n\tvar fmin : f32 = min(min(color.r, color.g), color.b);\n\tvar fmax : f32 = max(max(color.r, color.g), color.b);\n\tvar delta : f32 = fmax - fmin;\n\n\thsl.z = (fmax + fmin) / 2.0;\n\n\tif (delta == 0.0)\n\t{\n\t\thsl.x = 0.0;\n\t\thsl.y = 0.0;\n\t}\n\telse \n\t{\n\t\tif (hsl.z < 0.5)\n\t\t{\n\t\t\thsl.y = delta / (fmax + fmin);\n\t\t}\n\t\telse\n\t\t{\n\t\t\thsl.y = delta / (2.0 - fmax - fmin);\n\t\t}\n\t\t\n\t\tvar dR : f32 = (((fmax - color.r) / 6.0) + (delta / 2.0)) / delta;\n\t\tvar dG : f32 = (((fmax - color.g) / 6.0) + (delta / 2.0)) / delta;\n\t\tvar dB : f32 = (((fmax - color.b) / 6.0) + (delta / 2.0)) / delta;\n\n\t\tif (color.r == fmax)\n\t\t{\n\t\t\thsl.x = dB - dG;\n\t\t}\n\t\telse if (color.g == fmax)\n\t\t{\n\t\t\thsl.x = (1.0 / 3.0) + dR - dB;\n\t\t}\n\t\telse if (color.b == fmax)\n\t\t{\n\t\t\thsl.x = (2.0 / 3.0) + dG - dR;\n\t\t}\n\n\t\tif (hsl.x < 0.0)\n\t\t{\n\t\t\thsl.x = hsl.x + 1.0;\n\t\t}\n\t\telse if (hsl.x > 1.0)\n\t\t{\n\t\t\thsl.x = hsl.x - 1.0;\n\t\t}\n\t}\n\n\treturn hsl;\n}\n\nfn c3_hueToRGB(f1 : f32, f2 : f32, hue_ : f32) -> f32\n{\n\tvar hue : f32 = hue_;\n\tif (hue < 0.0)\n\t{\n\t\thue = hue + 1.0;\n\t}\n\telse if (hue > 1.0)\n\t{\n\t\thue = hue - 1.0;\n\t}\n\t\t\n\tvar ret : f32;\n\t\n\tif ((6.0 * hue) < 1.0)\n\t{\n\t\tret = f1 + (f2 - f1) * 6.0 * hue;\n\t}\n\telse if ((2.0 * hue) < 1.0)\n\t{\n\t\tret = f2;\n\t}\n\telse if ((3.0 * hue) < 2.0)\n\t{\n\t\tret = f1 + (f2 - f1) * ((2.0 / 3.0) - hue) * 6.0;\n\t}\n\telse\n\t{\n\t\tret = f1;\n\t}\n\t\n\treturn ret;\n}\n\nfn c3_HSLtoRGB(hsl : vec3<f32>) -> vec3<f32>\n{\n\tvar rgb : vec3<f32> = vec3<f32>(hsl.z);\n\t\n\tif (hsl.y != 0.0)\n\t{\n\t\tvar f2 : f32;\n\t\t\n\t\tif (hsl.z < 0.5)\n\t\t{\n\t\t\tf2 = hsl.z * (1.0 + hsl.y);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tf2 = (hsl.z + hsl.y) - (hsl.y * hsl.z);\n\t\t}\n\t\t\t\n\t\tvar f1 : f32 = 2.0 * hsl.z - f2;\n\t\t\n\t\trgb.r = c3_hueToRGB(f1, f2, hsl.x + (1.0 / 3.0));\n\t\trgb.g = c3_hueToRGB(f1, f2, hsl.x);\n\t\trgb.b = c3_hueToRGB(f1, f2, hsl.x - (1.0 / 3.0));\n\t}\n\t\n\treturn rgb;\n}\n";wd.JS.CD=class extends wd.JS.ix{constructor(t,s){if(super(t,s),this.k$=s.N$,this.B$=s.$$,this.U$=s.V$,this.ML=s.W$,this.z$=new Map,this.j$=new Map,this.H$=!1,this.q$=!1,this.Us=[],this.J$=0,s.parameters){let t=0;for(const e of s.parameters){const s=e[2];if(!Nd.has(s))throw new Error(`unrecognized effect param type '${s}'`);const i=Nd.get(s),r=Bd.get(s),n=t%r;0!==n&&(t+=r-n),this.Us.push({type:s,offset:t,size:i,end:t+i}),t+=i}this.J$=16*Math.ceil(t/16)}}static async KM(t,s){const e=t.zk(),i=s.name,r=t.hk(),n=t.rI(),h=s.src,o=wd.JS.CD.Y$(h,r,n),a=e.createShaderModule({label:i,code:o});let l,u=null;if(s.fk){const t=wd.JS.CD.Y$(s.fk,r,n);u=e.createShaderModule({label:i,code:t})}a.getCompilationInfo().then(t=>wd.JS.CD.lk(i,"fragment",t));const c=wd.JS.CD.ak(s.JM,r);let f;c?(l=e.createShaderModule({label:i,code:c}),l.getCompilationInfo().then(t=>wd.JS.CD.lk(i,"vertex",t))):l=t.jk();const d=wd.JS.CD.ak(s.pk,r);d?(f=e.createShaderModule({label:i,code:d}),f.getCompilationInfo().then(t=>wd.JS.CD.lk(i,"vertex (norm)",t))):f=t.Hk();const p=wd.Hr(wd.JS.CD,t,Object.assign({N$:a,$$:u,V$:l,W$:f},s));if(p._x=h.includes("%%C3PARAMS_STRUCT%%")&&Od.some(t=>h.includes(t)),p.H$=p._x||h.includes("%%C3PARAMS_STRUCT%%")&&Fd.some(t=>h.includes(t)),p.q$=h.includes("%%C3PARAMS_STRUCT%%")&&h.includes("isSrcTexRotated"),"<generate-mipmap>"!==i){const s=p.X$(0,0,0,0,0);let e=null;t.rN()&&(e=p.X$(0,1,0,0,0));const[i,r]=await Promise.all([s,e]);p.z$.set(Sd(0,0,0,0,0),i),r&&p.z$.set(Sd(0,1,0,0,0),r)}return p}static K$(t,s){if(!t)return t;let e="";return e=s?"enable f16;\nalias f16or32 = f16;\n":"alias f16or32 = f32;\n",e+t}static Y$(t,s,e){return t=wd.JS.CD.K$(t,s),wd.Wm(t,{"%%SAMPLERFRONT_BINDING%%":"@binding(0) @group(1)","%%TEXTUREFRONT_BINDING%%":"@binding(1) @group(1)","%%SAMPLERBACK_BINDING%%":"@binding(0) @group(2)","%%TEXTUREBACK_BINDING%%":"@binding(1) @group(2)","%%SAMPLERDEPTH_BINDING%%":"@binding(0) @group(3)","%%TEXTUREDEPTH_BINDING%%":"@binding(1) @group(3)","%%SHADERPARAMS_BINDING%%":"@binding(5) @group(0)","%%FRAGMENTINPUT_STRUCT%%":yd(e),"%%FRAGMENTOUTPUT_STRUCT%%":kd,"%%C3PARAMS_STRUCT%%":Ed,"%%C3_UTILITY_FUNCTIONS%%":$d})}static ak(t,s){return wd.JS.CD.K$(t,s)}static lk(t,s,e){for(const i of e.messages){const e=`[WebGPU] Message (${i.type}) compiling ${s} shader '${t}': ${i.message} (line ${i.lineNum}, pos ${i.linePos})`;"error"===i.type?console.error(e):"warning"===i.type?console.warn(e):console.log(e)}}qr(){this.k$=null,this.B$=null,this.U$=null,this.ML=null,this.z$.clear(),this.j$.clear(),super.qr()}zk(){return this.nx.zk()}Zk(){return this.nx.Zk()}Rx(){return this.nx}TB(){return this.H$}Wx(){return this.q$}tG(){return this.Us.length}sG(t){return t<0||t>=this.Us.length?null:this.Us[t].type}S$(){return this.J$}T$(t){return this.Us[t]}Z$(t,s,e,i,r){const n=this.nx,h=n.rI(),o=n.qv(t);let a=o[0],l=o[1],u=a,c=l,f="add",d="add";o.length>=4&&(u=o[2],c=o[3]),6===o.length&&(f=o[4],d=o[5]);let p="none";switch(e){case 1:p="back";break;case 2:p="front"}const m={label:`${this.Rc()} blendMode ${t} variant ${s} multisampleCount ${r}`,layout:this.Zk(),primitive:{cullMode:p,frontFace:0===i?"cw":"ccw"},vertex:{module:4===s?this.ML:this.U$,entryPoint:"main",buffers:[{arrayStride:12,attributes:[{shaderLocation:0,offset:0,format:"float32x3"}]},{arrayStride:8,attributes:[{shaderLocation:1,offset:0,format:"float32x2"}]},{arrayStride:4*(h?2:4),attributes:[{shaderLocation:2,offset:0,format:h?"float16x4":"float32x4"}]},{arrayStride:4,attributes:[{shaderLocation:3,offset:0,format:"uint32"}]}]},fragment:{module:this.k$,entryPoint:"main",targets:[{format:n.qk(),blend:{color:{srcFactor:a,dstFactor:l,operation:f},alpha:{srcFactor:u,dstFactor:c,operation:d}}}]}};if(r>=2&&(m.multisample={count:r}),1===s)m.fragment.module=this.B$||this.k$,m.depthStencil={format:n.$k(),depthWriteEnabled:!0,depthCompare:"less-equal"};else if(2===s){m.fragment.module=this.B$||this.k$,m.fragment.targets=[];const t={compare:"always",failOp:"keep",depthFailOp:"keep",passOp:"replace"};m.depthStencil={format:n.$k(),depthWriteEnabled:!0,depthCompare:"less-equal",stencilFront:t,stencilBack:t,stencilReadMask:1,stencilWriteMask:1}}else if(3===s){m.fragment.module=this.B$||this.k$;const t={compare:"equal",failOp:"keep",depthFailOp:"keep",passOp:"keep"};m.depthStencil={format:n.$k(),depthWriteEnabled:!1,depthCompare:"always",stencilFront:t,stencilBack:t,stencilReadMask:1,stencilWriteMask:0}}return m}Q$(t,s,e,i,r){return this.zk().createRenderPipeline(this.Z$(t,s,e,i,r))}X$(t,s,e,i,r){return this.zk().createRenderPipelineAsync(this.Z$(t,s,e,i,r))}GN(t,s,e,i,r){const n=Sd(t,s,e,i,r);let h=this.z$.get(n);return h||(h=this.Q$(t,s,e,i,r),this.z$.set(n,h),h)}static xD(){return Gd}static MD(){return 16*Math.ceil(_d/16)}static PD(){return Rd}static AD(){return 16*Math.ceil(Ad/16)}static DD(){return Dd}static kD(){return 16*Math.ceil(Ld/16)}static vG(t){const s=t?"f16":"f32";return`\n\t\t${Id}\n\n\t\tstruct VertexInput {\n\t\t\t@location(0) position : vec3<f32>,\n\t\t\t@location(1) uv : vec2<f32>,\n\t\t\t@location(2) color : vec4<${s}>,\n\t\t\t@location(3) texIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\t\t\tvar output : VertexOutput;\n\t\t\toutput.Position = uniforms.transform * vec4<f32>(input.position, 1.0);\n\t\t\toutput.fragUV = input.uv;\n\t\t\toutput.fragColor = input.color;\n\t\t\toutput.texIndex = input.texIndex;\n\t\t\treturn output;\n\t\t}`}static uk(t){const s=t?"f16":"f32";return`\n\t\tstruct VertexInput {\n\t\t\t@location(0) position : vec3<f32>,\n\t\t\t@location(1) uv : vec2<f32>,\n\t\t\t@location(2) color : vec4<${s}>,\n\t\t\t@location(3) texIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\t\t\tvar output : VertexOutput;\n\t\t\tvar p = input.position;\n\t\t\tp.y = 1.0 - p.y;\n\t\t\toutput.Position = vec4<f32>(p.xy * 2.0 - 1.0, p.z, 1.0);\n\t\t\toutput.fragUV = input.uv;\n\t\t\toutput.texIndex = input.texIndex;\n\t\t\toutput.fragColor = input.color;\n\t\t\treturn output;\n\t\t}`}static dk(t){const s=t?"f16":"f32";return`\n\t\t${Id}\n\n\t\tstruct VertexInput {\n\t\t\t@location(0) position : vec3<f32>,\n\t\t\t@location(1) uv : vec2<f32>,\n\t\t\t@location(2) color : vec4<${s}>,\n\t\t\t@location(3) texIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\t\t\tvar output : VertexOutput;\n\t\t\toutput.Position = uniforms.transform * vec4<f32>(input.position, 1.0);\n\t\t\toutput.fragUV = input.uv;\n\t\t\toutput.fragColor = input.color;\n\t\t\toutput.texIndex = input.texIndex;\n\t\t\treturn output;\n\t\t}`}static mk(t){const s=t?"f16":"f32";return`\n\t\tstruct VertexInput {\n\t\t\t@location(0) position : vec3<f32>,\n\t\t\t@location(1) uv : vec2<f32>,\n\t\t\t@location(2) color : vec4<${s}>,\n\t\t\t@location(3) texIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\t\t\tvar output : VertexOutput;\n\t\t\tvar p = input.position;\n\t\t\tp.y = 1.0 - p.y;\n\t\t\toutput.Position = vec4<f32>(p.xy * 2.0 - 1.0, p.z, 1.0);\n\t\t\toutput.fragUV = input.uv;\n\t\t\toutput.fragColor = input.color;\n\t\t\toutput.texIndex = input.texIndex;\n\t\t\treturn output;\n\t\t}`}static ck(t,s){return`\n\t\t@binding(0) @group(1) var sampler0 : sampler;\n\t\t@binding(1) @group(1) var texture0 : texture_2d<f32>;\n\t\t@binding(2) @group(1) var sampler1 : sampler;\n\t\t@binding(3) @group(1) var texture1 : texture_2d<f32>;\n\t\t@binding(4) @group(1) var sampler2 : sampler;\n\t\t@binding(5) @group(1) var texture2 : texture_2d<f32>;\n\t\t@binding(6) @group(1) var sampler3 : sampler;\n\t\t@binding(7) @group(1) var texture3 : texture_2d<f32>;\n\t\t@binding(8) @group(1) var sampler4 : sampler;\n\t\t@binding(9) @group(1) var texture4 : texture_2d<f32>;\n\t\t@binding(10) @group(1) var sampler5 : sampler;\n\t\t@binding(11) @group(1) var texture5 : texture_2d<f32>;\n\t\t@binding(12) @group(1) var sampler6 : sampler;\n\t\t@binding(13) @group(1) var texture6 : texture_2d<f32>;\n\t\t@binding(14) @group(1) var sampler7 : sampler;\n\t\t@binding(15) @group(1) var texture7 : texture_2d<f32>;\n\t\t@binding(16) @group(1) var sampler8 : sampler;\n\t\t@binding(17) @group(1) var texture8 : texture_2d<f32>;\n\t\t@binding(18) @group(1) var sampler9 : sampler;\n\t\t@binding(19) @group(1) var texture9 : texture_2d<f32>;\n\t\t@binding(20) @group(1) var sampler10 : sampler;\n\t\t@binding(21) @group(1) var texture10 : texture_2d<f32>;\n\t\t@binding(22) @group(1) var sampler11 : sampler;\n\t\t@binding(23) @group(1) var texture11 : texture_2d<f32>;\n\t\t@binding(24) @group(1) var sampler12 : sampler;\n\t\t@binding(25) @group(1) var texture12 : texture_2d<f32>;\n\t\t@binding(26) @group(1) var sampler13 : sampler;\n\t\t@binding(27) @group(1) var texture13 : texture_2d<f32>;\n\n\t\tstruct FragmentInput {\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s?"f16":"f32"}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32,\n\t\t\t${t?"@builtin(position) fragPos: vec4<f32>":""}\n\t\t};\n\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>,\n\t\t\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar texXy : vec2<f32> = input.fragUV.xy;\n\t\t\tvar texIndex : u32 = input.texIndex;\n\t\t\tvar c : vec4<f32>;\n\n\t\t\tlet dx = dpdx(texXy);\n\t\t\tlet dy = dpdy(texXy);\n\t\t\t\n\t\t\tif (texIndex <= 6)\n\t\t\t{\n\t\t\t\tif (texIndex <= 2)\n\t\t\t\t{\n\t\t\t\t\tif (texIndex == 0)\t\t\t{\tc = textureSampleGrad(texture0, sampler0, texXy, dx, dy);\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 1)\t\t{\tc = textureSampleGrad(texture1, sampler1, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture2, sampler2, texXy, dx, dy);\t}\n\t\t\t\t\t}\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (texIndex <= 4)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 3)\t\t{\tc = textureSampleGrad(texture3, sampler3, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture4, sampler4, texXy, dx, dy);\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex <= 5)\t\t{\tc = textureSampleGrad(texture5, sampler5, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture6, sampler6, texXy, dx, dy);\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (texIndex <= 9)\n\t\t\t\t{\n\t\t\t\t\tif (texIndex == 7)\t\t\t{\tc = textureSampleGrad(texture7, sampler7, texXy, dx, dy);\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 8)\t\t{\tc = textureSampleGrad(texture8, sampler8, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture9, sampler9, texXy, dx, dy);\t}\n\t\t\t\t\t}\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (texIndex <= 11)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 10)\t\t{\tc = textureSampleGrad(texture10, sampler10, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture11, sampler11, texXy, dx, dy);\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 12)\t\t{\tc = textureSampleGrad(texture12, sampler12, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture13, sampler13, texXy, dx, dy);\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toutput.color = c * vec4<f32>(input.fragColor);\n\t\t\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\t\t\treturn output;\n\t\t}`}static gk(t,s){return`\n\t\t@binding(0) @group(1) var sampler0 : sampler;\n\t\t@binding(1) @group(1) var texture0 : texture_2d<f32>;\n\n\t\tstruct FragmentInput {\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s?"f16":"f32"}>,\n\t\t\t${t?"@builtin(position) fragPos: vec4<f32>":""}\n\t\t};\n\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>,\n\t\t\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\toutput.color = textureSample(texture0, sampler0, input.fragUV) * vec4<f32>(input.fragColor);\n\t\t\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\t\t\treturn output;\n\t\t}`}static Sk(){return"\n\t\tstruct VertexInput {\n\t\t\t@builtin(vertex_index) VertexIndex : u32\n\t\t};\n\t\t\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(0) fragUV : vec2<f32>\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\n\t\t\tvar pos : array<vec2<f32>, 4> = array<vec2<f32>, 4>(\n\t\t\t\tvec2<f32>(-1.0, 1.0),\n\t\t\t\tvec2<f32>(1.0, 1.0),\n\t\t\t\tvec2<f32>(-1.0, -1.0),\n\t\t\t\tvec2<f32>(1.0, -1.0));\n\t\t\t\n\t\t\tvar output : VertexOutput;\n\t\t\tvar p : vec2<f32> = pos[input.VertexIndex];\n\t\t\toutput.Position = vec4<f32>(p, 0.0, 1.0);\n\t\t\toutput.fragUV = p / 2.0 + 0.5;\n\t\t\treturn output;\n\t\t}"}static yk(){return"\n\t\t@binding(0) @group(0) var sampler0 : sampler;\n\t\t@binding(1) @group(0) var texture0 : texture_2d<f32>;\n\n\t\tstruct FragmentInput {\n\t\t\t@location(0) fragUV : vec2<f32>\n\t\t};\n\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>\n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\toutput.color = textureSample(texture0, sampler0, vec2<f32>(input.fragUV.x, 1.0 - input.fragUV.y));\n\t\t\treturn output;\n\t\t}"}Rk(t){t||(t=this.nx.eN());let s=this.j$.get(t);return s||(s=this.zk().createRenderPipeline({label:"<mipmap generator>",layout:"auto",vertex:{module:this.U$,entryPoint:"main"},primitive:{topology:"triangle-strip",stripIndexFormat:"uint16"},fragment:{module:this.k$,entryPoint:"main",targets:[{format:t,blend:{color:{srcFactor:"one",dstFactor:"zero"},alpha:{srcFactor:"one",dstFactor:"zero"}}}]}}),this.j$.set(t,s)),s}static vk(){return`\n\t\t${Id}\n\n\t\tstruct PointData {\n\t\t\tdata : array<vec4<f32>>\n\t\t};\n\t\t@binding(3) @group(0) var<storage> pointBuffer : PointData;\n\n\t\tstruct VertexInput {\n\t\t\t@builtin(vertex_index) VertexIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(0) fragUV : vec2<f32>,\n\t\t\t@location(1) pointOpacity : f32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\n\t\t\tvar normPos : array<vec2<f32>, 4> = array<vec2<f32>, 4>(\n\t\t\t\tvec2<f32>(-0.5, -0.5),\n\t\t\t\tvec2<f32>(0.5, -0.5),\n\t\t\t\tvec2<f32>(0.5, 0.5),\n\t\t\t\tvec2<f32>(-0.5, 0.5));\n\t\t\t\n\t\t\tvar output : VertexOutput;\n\t\t\tvar p : vec2<f32> = normPos[input.VertexIndex % u32(4)];\n\t\t\tvar pointData : vec4<f32> = pointBuffer.data[input.VertexIndex / u32(4)];\n\n\t\t\tvar size : f32 = pointData.z;\n\t\t\toutput.Position = uniforms.transform * vec4<f32>(p * size + pointData.xy, uniforms.zElevation, 1.0);\n\t\t\toutput.pointOpacity = pointData.w;\n\n\t\t\tvar pointTexMin : vec2<f32> = min(uniforms.pointTexStart, uniforms.pointTexEnd);\n\t\t\tvar pointTexMax : vec2<f32> = max(uniforms.pointTexStart, uniforms.pointTexEnd);\n\t\t\tvar pn : vec2<f32> = p + vec2<f32>(0.5, 0.5);\n\t\t\tvar pointCoord : vec2<f32> = select(vec2<f32>(1.0 - pn.y, pn.x), pn, uniforms.pointTexEnd.x > uniforms.pointTexStart.x);\n\n\t\t\toutput.fragUV = mix(pointTexMin, pointTexMax, pointCoord);\n\t\t\treturn output;\n\t\t}`}static wk(t){return`\n\t\t${Pd}\n\n\t\t%%SAMPLERFRONT_BINDING%% var sampler0 : sampler;\n\t\t%%TEXTUREFRONT_BINDING%% var texture0 : texture_2d<f32>;\n\n\t\tstruct FragmentInput {\n\t\t\t@location(0) fragUV : vec2<f32>,\n\t\t\t@location(1) pointOpacity : f32,\n\t\t\t@builtin(position) fragPos : vec4<f32>\n\t\t};\n\t\t\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>,\n\t\t\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\toutput.color = textureSample(texture0, sampler0, input.fragUV) * uniforms.pointColor * input.pointOpacity;\n\t\t\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\t\t\treturn output;\n\t\t}`}static bk(t){return`\n\t\t${Pd}\n\n\t\t%%SAMPLERFRONT_BINDING%% var sampler0 : sampler;\n\t\t%%TEXTUREFRONT_BINDING%% var texture0 : texture_2d<f32>;\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>,\n\t\t\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar halfPixelSize : vec2<f32> = vec2<f32>(0.5, 0.5) / vec2<f32>(textureDimensions(texture0));\n\n\t\t\tvar tile : vec2<f32> = floor(input.fragUV);\n\t\t\tvar tex : vec2<f32> = fract(input.fragUV);\n\t\t\tvar tileOrigin : vec2<f32> = uniforms.srcRectStart + tile * (uniforms.tileSize + uniforms.tileSpacing);\n\t\t\tvar lowerBound : vec2<f32> = tileOrigin + halfPixelSize;\n\t\t\tvar upperBound : vec2<f32> = tileOrigin + uniforms.tileSize - halfPixelSize;\n\n\t\t\toutput.color = textureSampleLevel(texture0, sampler0, clamp(tex, lowerBound, upperBound), 0.0) * vec4<f32>(input.fragColor);\n\t\t\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\t\t\treturn output;\n\t\t}`}static _G(t){return`\n${Pd}\n\n%%SAMPLERFRONT_BINDING%% var sampler0 : sampler;\n%%TEXTUREFRONT_BINDING%% var texture0 : texture_2d<f32>;\n\n%%FRAGMENTINPUT_STRUCT%%\n\nstruct FragmentOutput {\n\t@location(0) color : vec4<f32>,\n\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n};\n\n%%C3_UTILITY_FUNCTIONS%%\n\nconst PI : f32 = 3.1415926;\n\nfn cospVec4(a : vec4<f32>, b : vec4<f32>, x : f32) -> vec4<f32>\n{\n\treturn (a + b + (a - b) * cos(x * PI)) / 2.0;\n}\n\nfn randVec3(seed : vec2<f32>) -> vec3<f32>\n{\n\treturn vec3<f32>(\n\t\tfract(sin(dot(seed.xy, vec2<f32>(12.9898,78.233))) * 43758.5453),\n\t\tfract(sin(dot(seed.yx, vec2<f32>(12.9898,-78.233))) * 43758.5453),\n\t\tfract(sin(dot(seed.xy, vec2<f32>(-12.9898,-78.233))) * 43758.5453));\n}\n\nfn sampleTile(tile : vec2<f32>, uv : vec2<f32>, ddx : vec2<f32>, ddy : vec2<f32>) -> vec4<f32>\n{\n\tvar posRandom = uniforms.tileSize;\n\tvar angleRandom = uniforms.outlineThickness;\n\tvar pixelSize = c3_getPixelSize(texture0);\n\t\n\tvar rand = (randVec3(round(tile)) - 0.5) * 2.0;\n\t\n\tvar angle = angleRandom * rand.z * PI;\n\tvar sin_a = sin(angle);\n\tvar cos_a = cos(angle);\n\tvar aspect = pixelSize.x / pixelSize.y;\n\n\tvar mid = tile + vec2<f32>(0.5, 0.5);\n\tvar dp = uv - mid;\n\tdp.x /= aspect;\n\tvar r = vec2<f32>(dp.x * cos_a - dp.y * sin_a,\n\t\t\t\t\t  dp.y * cos_a + dp.x * sin_a);\n\tr.x *= aspect;\n\n\tvar p = mid + r + (posRandom * rand.xy / 2.0);\n\t\n\treturn textureSampleGrad(texture0, sampler0, p, ddx, ddy);\n}\n\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\n\tvar output : FragmentOutput;\n\t\n\tvar blendMarginX = uniforms.tileSpacing.x;\n\tvar blendMarginY = uniforms.tileSpacing.y;\n\t\n\tvar tile = floor(input.fragUV);\n\tvar tex = fract(input.fragUV);\n\tvar ddx = dpdx(input.fragUV);\n\tvar ddy = dpdy(input.fragUV);\n\t\n\tvar curTile = sampleTile(tile, input.fragUV, ddx, ddy);\n\t\n\tvar inLeftMargin = (tex.x < blendMarginX);\n\tvar inRightMargin = (tex.x > 1.0 - blendMarginX);\n\tvar inTopMargin = (tex.y < blendMarginY);\n\tvar inBottomMargin = (tex.y > 1.0 - blendMarginY);\n\t\n\tif (inLeftMargin)\n\t{\n\t\tvar leftTile = sampleTile(tile + vec2<f32>(-1.0, 0.0), input.fragUV, ddx, ddy);\n\t\tvar leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;\n\t\tvar leftMixedTile = cospVec4(leftTile, curTile, leftMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tvar topTile =     sampleTile(tile + vec2<f32>(0.0,  -1.0), input.fragUV, ddx, ddy);\n\t\t\tvar topLeftTile = sampleTile(tile + vec2<f32>(-1.0, -1.0), input.fragUV, ddx, ddy);\n\t\t\tvar topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);\n\t\t\t\n\t\t\toutput.color = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tvar bottomTile =     sampleTile(tile + vec2<f32>(0.0,  1.0), input.fragUV, ddx, ddy);\n\t\t\tvar bottomLeftTile = sampleTile(tile + vec2<f32>(-1.0, 1.0), input.fragUV, ddx, ddy);\n\t\t\tvar bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);\n\t\t\t\n\t\t\toutput.color = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutput.color = leftMixedTile;\n\t\t}\n\t}\n\telse if (inRightMargin)\n\t{\n\t\tvar rightTile = sampleTile(tile + vec2(1.0, 0.0), input.fragUV, ddx, ddy);\n\t\tvar rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);\n\t\tvar rightMixedTile = cospVec4(curTile, rightTile, rightMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tvar topTile =      sampleTile(tile + vec2<f32>(0.0, -1.0), input.fragUV, ddx, ddy);\n\t\t\tvar topRightTile = sampleTile(tile + vec2<f32>(1.0, -1.0), input.fragUV, ddx, ddy);\n\t\t\tvar topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);\n\t\t\t\n\t\t\toutput.color = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tvar bottomTile =      sampleTile(tile + vec2<f32>(0.0, 1.0), input.fragUV, ddx, ddy);\n\t\t\tvar bottomRightTile = sampleTile(tile + vec2<f32>(1.0, 1.0), input.fragUV, ddx, ddy);\n\t\t\tvar bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);\n\t\t\t\n\t\t\toutput.color = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutput.color = rightMixedTile;\n\t\t}\n\t}\n\telse if (inTopMargin)\n\t{\n\t\tvar topTile = sampleTile(tile + vec2<f32>(0.0, -1.0), input.fragUV, ddx, ddy);\n\t\toutput.color = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t}\n\telse if (inBottomMargin)\n\t{\n\t\tvar bottomTile = sampleTile(tile + vec2<f32>(0.0, 1.0), input.fragUV, ddx, ddy);\n\t\toutput.color = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t}\n\telse\n\t{\n\t\toutput.color = curTile;\n\t}\n\t\n\toutput.color *= vec4<f32>(input.fragColor);\n\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\treturn output;\n}\n`}static xk(){return"\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\toutput.color = vec4<f32>(input.fragColor);\n\t\t\treturn output;\n\t\t}"}static Ck(){return`\n\t\t${Pd}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\tfn fromLinear(linearRGB : vec3<f32>) -> vec3<f32>\n\t\t{\n\t\t\tvar cutoff : vec3<bool> = (linearRGB < vec3<f32>(0.0031308));\n\t\t\tvar higher : vec3<f32> = vec3<f32>(1.055) * pow(abs(linearRGB), vec3<f32>(1.0/2.4)) - 0.055;\n\t\t\tvar lower : vec3<f32> = linearRGB * 12.92;\n\t\t\treturn select(higher, lower, cutoff);\n\t\t}\n\n\t\tfn toLinear(sRGB : vec3<f32>) -> vec3<f32>\n\t\t{\n\t\t\tvar cutoff : vec3<bool> = (sRGB < vec3<f32>(0.04045));\n\t\t\tvar higher : vec3<f32> = pow(abs((sRGB + 0.055) / 1.055), vec3<f32>(2.4));\n\t\t\tvar lower : vec3<f32> = sRGB / 12.92;\n\t\t\treturn select(higher, lower, cutoff);\n\t\t}\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar linearGrad : vec3<f32> = mix(toLinear(vec3<f32>(input.fragColor.rgb)), toLinear(uniforms.color2.rgb), vec3<f32>(input.fragUV.x));\n\n\t\t\tvar a : f32 = mix(f32(input.fragColor.a), uniforms.color2.a, input.fragUV.x);\n\t\t\toutput.color = vec4<f32>(fromLinear(linearGrad) * a, a);\n\t\t\treturn output;\n\t\t}\n\t\t`}static Tk(){return`\n\t\t${Pd}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar grad : f32 = input.fragUV.x / (1.0 - input.fragUV.y);\n\t\t\toutput.color = vec4<f32>(input.fragColor) * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);\n\t\t\treturn output;\n\t\t}\n\t\t`}static Mk(){return"\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar diff : vec2<f32> = input.fragUV - 0.5;\n\t\t\tvar diffSq : vec2<f32> = diff * diff;\n\n\t\t\tvar f : f32 = step(diffSq.x + diffSq.y, 0.25);\n\n\t\t\toutput.color = vec4<f32>(input.fragColor) * f;\n\t\t\treturn output;\n\t\t}"}static Ik(){return`\n\t\t${Pd}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar diff : vec2<f32> = input.fragUV - 0.5;\n\t\t\tvar diffSq : vec2<f32> = diff * diff;\n\t\t\tvar distSq : f32 = diffSq.x + diffSq.y;\n\t\t\tvar norm : vec2<f32> = normalize(diff);\n\t\t\tvar halfNorm : vec2<f32> = norm * 0.5;\n\n\t\t\tvar innerF : f32 = step(distSq, 0.25);\n\n\t\t\tvar innerEdge : vec2<f32> = halfNorm - uniforms.pixelSize * norm * uniforms.outlineThickness;\n\t\t\tvar innerEdgeSq : vec2<f32> = innerEdge * innerEdge;\n\t\t\tvar outerF : f32 = step(innerEdgeSq.x + innerEdgeSq.y, distSq);\n\t\t\t\n\t\t\toutput.color = vec4<f32>(input.fragColor) * innerF * outerF;\n\t\t\treturn output;\n\t\t}`}static Gk(){return`\n\t\t${Pd}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar diff : vec2<f32> = input.fragUV - 0.5;\n\t\t\tvar diffSq : vec2<f32> = diff * diff;\n\t\t\tvar norm : vec2<f32> = normalize(diff);\n\t\t\tvar halfNorm : vec2<f32> = norm * 0.5;\n\t\t\tvar halfNormSq : vec2<f32> = halfNorm * halfNorm;\n\n\t\t\tvar innerEdge : vec2<f32> = halfNorm - uniforms.pixelSize * norm;\n\t\t\tvar innerEdgeSq : vec2<f32> = innerEdge * innerEdge;\n\n\t\t\tvar f : f32 = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);\n\n\t\t\toutput.color = vec4<f32>(input.fragColor) * f;\n\t\t\treturn output;\n\t\t}`}static _k(){return`\n\t\t${Pd}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar diff : vec2<f32> = input.fragUV - 0.5;\n\t\t\tvar diffSq : vec2<f32> = diff * diff;\n\t\t\tvar distSq : f32 = diffSq.x + diffSq.y;\n\t\t\tvar norm : vec2<f32> = normalize(diff);\n\t\t\tvar halfNorm : vec2<f32> = norm * 0.5;\n\t\t\tvar halfNormSq : vec2<f32> = halfNorm * halfNorm;\n\n\t\t\tvar pxNorm : vec2<f32> = uniforms.pixelSize * norm;\n\t\t\tvar innerEdge1 : vec2<f32> = halfNorm - pxNorm;\n\t\t\tvar innerEdge1Sq : vec2<f32> = innerEdge1 * innerEdge1;\n\n\t\t\tvar innerF : f32 = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);\n\n\t\t\tvar innerEdge2 : vec2<f32> = halfNorm - pxNorm * uniforms.outlineThickness;\n\t\t\tvar innerEdge2Sq : vec2<f32> = innerEdge2 * innerEdge2;\n\t\t\tvar innerEdge3 : vec2<f32> = halfNorm - pxNorm * (uniforms.outlineThickness + 1.0);\n\t\t\tvar innerEdge3Sq : vec2<f32> = innerEdge3 * innerEdge3;\n\n\t\t\tvar outerF : f32 = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);\n\t\t\t\n\t\t\toutput.color = vec4<f32>(input.fragColor) * innerF * outerF;\n\t\t\treturn output;\n\t\t}`}static Pk(){return"\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar f : f32 = 1.0 - abs(input.fragUV.y - 0.5) * 2.0;\n\t\t\toutput.color = vec4<f32>(input.fragColor) * f;\n\t\t\treturn output;\n\t\t}"}}}{const Ud=self.Gs,Vd=new Set(["nearest","bilinear","trilinear"]),Wd=new Set(["clamp-to-edge","repeat","mirror-repeat"]),zd=self.GPUTextureUsage,jd={mT:"clamp-to-edge",gT:"clamp-to-edge",yT:"trilinear",ST:0,vT:!0,tU:!1,iM:!1,sU:!1,eU:!1,nM:0,width:-1,height:-1},Hd=[[1,["r8unorm","r8snorm","r8uint","r8sint","stencil8"]],[2,["r16uint","r16sint","r16float","rg8unorm","rg8snorm","rg8uint","rg8sint","depth16unorm"]],[3,["depth24plus"]],[4,["r32uint","r32sint","r32float","rg16uint","rg16sint","rg16float","rgba8unorm","rgba8unorm-srgb","rgba8snorm","rgba8uint","rgba8sint","bgra8unorm","bgra8unorm-srgb","rgb9e5ufloat","rgb10a2uint","rgb10a2unorm","rg11b10ufloat","depth24plus-stencil8","depth32float"]],[8,["rg32uint","rg32sint","rg32float","rgba16uint","rgba16sint","rgba16float"]],[16,["rgba32uint","rgba32sint","rgba32float"]],[5,["depth32float-stencil8"]]],qd=new Map;for(const[Xd,Kd]of Hd)for(const Zd of Kd)qd.set(Zd,Xd);const Jd=new Set,Yd={xT:!0,flipY:!1};Ud.JS.sk=class{constructor(t,s){this.nx=t,this.MT=null,this.iU="",this.rU=null,this.nU=null,this.hU=null,this.oU=null,this.Vy=0,this.Wy=0,this.IT=!0,this.GT="clamp-to-edge",this._T="clamp-to-edge",this.PT="trilinear",this.RT=0,this.ET=!1,this.jp=0,this.aU=!1,this.dM=!1,this.lU=!1,this.uU=!1,this.pM=0,this.cU=0,this.fU=!0,this.dU=null,this.pU=0,this.mU=!!s,this.mU&&(this.iU=this.nx.qk(),this.aU=!0,this.dM=this.nx.Xk(),this.PT=this.nx.sN(),this.nU=this.nx.Uk({yT:this.PT}))}gU(t){if(this.GT=t.mT,this._T=t.gT,this.PT=t.yT,this.RT=t.ST,this.ET=!!t.vT&&this.nx.Hb()&&"nearest"!==t.yT,this.aU=!!t.tU,this.dM=!!t.iM,this.lU=!!t.sU,this.uU=!!t.eU,this.pM=this.nx.gB(t.nM),!Vd.has(this.PT))throw new Error("invalid sampling");if(!Wd.has(this.GT)||!Wd.has(this._T))throw new Error("invalid wrap mode");if(this.pM>=2&&this.dM)throw new Error("invalid use of multisampling");"nearest"===this.PT&&(this.RT=0),this.nU=this.nx.Uk({mT:this.GT,gT:this._T,yT:this.PT,ST:this.RT}),this.yU(),this.jp=1}yU(){const t=this.nx,s=t.zk();this.cU=0,this.aU?(this.cU=zd.RENDER_ATTACHMENT,this.dM&&(this.cU|=zd.TEXTURE_BINDING),this.uU&&(this.cU|=zd.COPY_DST),this.iU=this.nx.qk()):(this.cU=zd.COPY_DST|zd.TEXTURE_BINDING,this.iU=this.nx.eN()),this.lU&&(this.cU|=zd.COPY_SRC),this.MT=s.createTexture({size:[this.Vy,this.Wy,1],mipLevelCount:this.SU(),format:this.iU,usage:this.cU,sampleCount:this.pM>=2?this.pM:1}),this.rU=this.MT.createView();const e=[],i=Ud.JS.nk.rk();for(let t=0;t<i;++t)e.push({binding:2*t,resource:this.nU},{binding:2*t+1,resource:this.rU});this.aU&&!this.dM||(this.hU=s.createBindGroup({layout:t.Qk(),entries:e}),this.oU=s.createBindGroup({layout:t.tN(),entries:[{binding:0,resource:this.nx.Uk({yT:this.nx.sN()})},{binding:1,resource:this.rU}]})),this.wU()&&this.uN(!0),Jd.add(this)}vU(){Jd.delete(this),this.dU&&this.dU.qr(),this.uN(!1),this.MT.destroy(),this.MT=null,this.rU=null,this.hU=null,this.oU=null}static aN(t){return t instanceof ImageBitmap||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas}static bU(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||t instanceof ImageData}xU(t){return[t.width||t.videoWidth,t.height||t.videoHeight]}wM(t,s){if(t&&!Ud.JS.sk.aN(t))throw new TypeError("invalid texture source");if(s=Object.assign({},jd,s),this.MT)throw new Error("already created texture");if(this.IT=!0,t){const[s,e]=this.xU(t);this.Vy=s,this.Wy=e}else if(this.Vy=s.width,this.Wy=s.height,this.Vy<=0||this.Wy<=0)throw new Error("invalid texture size");if(this.gU(s),this.aU||this.dM)throw new Error("static texture cannot be render target");t&&this.CU(t)}CU(t,s=!0){if(this.ET)this.TU(t,this.SU(),s);else{const e=this.nx.zk(),i=e.createCommandEncoder(),r=e.createTexture({size:[this.Vy,this.Wy,1],mipLevelCount:1,format:this.iU,usage:zd.COPY_SRC|zd.COPY_DST|zd.RENDER_ATTACHMENT});this.MU(r,t,0,s),i.copyTextureToTexture({texture:r,mipLevel:0},{texture:this.MT,mipLevel:0},[this.Vy,this.Wy,1]),e.queue.submit([i.finish()]),r.destroy()}}MU(t,s,e,i=!0){const[r,n]=this.xU(s);this.nx.zk().queue.copyExternalImageToTexture({source:s},{texture:t,mipLevel:e,premultipliedAlpha:!!i},[r,n,1])}SU(){return this.ET?Math.floor(Math.log2(Math.max(this.Vy,this.Wy))+1):1}TU(t,s,e=!0){const i=this.nx.zk(),r=i.createTexture({size:[this.Vy,this.Wy,1],mipLevelCount:this.SU(),format:this.iU,usage:zd.COPY_DST|zd.COPY_SRC|zd.TEXTURE_BINDING|zd.RENDER_ATTACHMENT}),n=this.nx.Rk(),h=n.getBindGroupLayout(0),o=this.nx.Uk({yT:"bilinear"}),a=i.createCommandEncoder();this.MU(r,t,0,e),a.copyTextureToTexture({texture:r,mipLevel:0},{texture:this.MT,mipLevel:0},[this.Vy,this.Wy,1]);const l=[];for(let t=0;t<s;++t)l.push(r.createView({baseMipLevel:t,mipLevelCount:1}));let u=this.Vy,c=this.Wy;for(let t=1;t<s;++t){u/=2,c/=2;const s=Math.max(Math.floor(u),1),e=Math.max(Math.floor(c),1),f=a.beginRenderPass({colorAttachments:[{view:l[t],loadOp:"clear",clearValue:[0,0,0,0],storeOp:"store"}]}),d=i.createBindGroup({layout:h,entries:[{binding:0,resource:o},{binding:1,resource:l[t-1]}]});f.setPipeline(n),f.setBindGroup(0,d),f.draw(4),f.end(),a.copyTextureToTexture({texture:r,mipLevel:t},{texture:this.MT,mipLevel:t},[s,e,1])}i.queue.submit([a.finish()]),r.destroy()}VT(t,s,e){if(e=Object.assign({},jd,e),this.MT)throw new Error("already created texture");this.IT=!1,this.Vy=t,this.Wy=s,this.gU(e)}async qT(t,s){if(!Ud.JS.sk.aN(t)&&!Ud.JS.sk.bU(t))throw new Error("invalid texture source");if(!this.MT||this.jp<=0)throw new Error("texture not created");if(this.IT)throw new Error("cannot update static texture");if(s=Object.assign({},Yd,s),(Ud.JS.sk.bU(t)||s.flipY||!s.xT)&&(t=await createImageBitmap(t,{premultiplyAlpha:s.xT?"premultiply":"none",imageOrientation:s.flipY?"flipY":"none"}),!this.MT))return;this.nx.Vb();const[e,i]=this.xU(t);this.Vy===e&&this.Wy===i||(this.vU(),this.Vy=e,this.Wy=i,this.yU(),this.nx.fB(this)),this.CU(t,s.xT)}JT(){if(this.jp>0)throw new Error("texture still has references");if(!this.MT)throw new Error("already deleted texture");this.vU()}Bk(){this.fU=!1,this.uN(!1)}wU(){return this.IT&&this.fU&&!this.aU}uN(t){this.nx.uN(this,t)}IU(t,s){if(this.dU)throw new Error("already in a group");this.dU=t,this.pU=s,this.uN(!1)}GU(){this.dU=null,this.pU=0,this.wU()&&this.uN(!0)}kk(){return this.hU}Nk(){return this.oU}lB(){return null!==this.dU?this.dU._U():this.wU()?(this.nx.fN(this),null!==this.dU?this.dU._U():null):null}cB(){return this.pU}Cy(){return this.mU?this.nx.Cy():this.Vy}My(){return this.mU?this.nx.My():this.Wy}Rx(){return this.nx}XT(){return this.MT}EN(){return this.rU}sB(){return this.iU}Uk(){return this.nU}PU(){return this.PT}OM(){return"nearest"!==this.PT}hN(){return this.aU}DM(){return this.dM}eB(){return this.lU}KT(){this.jp++}ZT(){if(this.jp<=0)throw new Error("no more references");this.jp--}QT(){return this.jp}mB(){return this.cU}Vk(t,s){this.cU=t,this.iU=s}mN(){const t=this.nx,s=t.zk();this.MT=t.Jk(),this.rU=t.Yk(),t.Xk()&&(this.oU=s.createBindGroup({layout:t.tN(),entries:[{binding:0,resource:this.nU},{binding:1,resource:this.rU}]}))}wN(){this.MT=null,this.rU=null,this.oU=null}sM(){let t=this.Cy()*this.My()*Ud.JS.sk.iN(this.sB());return this.ET&&(t+=Math.floor(t/3)),t}static tC(){}static eM(){return Jd.values()}static iN(t){const s=qd.get(t);return"number"==typeof s?s:NaN}}}{const Qd=self.Gs;Qd.JS.nk=class{constructor(t,s){if(s.length<2)throw new Error("invalid multi-texture group");this.nx=t,this.RU=s,this.AU=null;for(let t=0,e=s.length;t<e;++t)s[t].IU(this,t);s.length<Qd.JS.nk.rk()&&this.nx.cN(this,!0),this.EU()}qr(){this.nx.cN(this,!1);for(const t of this.RU)t.GU();this.OU(),Qd.bh(this.RU),this.nx=null}EU(){this.OU();const t=this.nx.zk(),s=[],e=Qd.JS.nk.rk();for(let t=0;t<e;++t){const e=this.RU[Math.min(t,this.RU.length-1)];s.push({binding:2*t,resource:e.Uk()},{binding:2*t+1,resource:e.EN()})}this.AU=t.createBindGroup({layout:this.nx.Qk(),entries:s})}OU(){null!==this.AU&&this.nx.dB(this.AU),this.AU=null}_U(){return this.AU}static rk(){return 14}}}{const tp=self.Gs,sp=self.ls,ep=sp.Ss,ip=sp.ds,rp={yT:"trilinear",alpha:!0,depth:!1,iM:!0,sU:!1,eU:!1,rM:!0,nM:0},np=new Set;tp.JS.ek=class{constructor(t,s){this.nx=t,this.FU=!!s,this.fM=!!s&&t.rN(),this.DU=null,this.uM=!0,this.pM=0,this.LU=!1,this.kU=tp.Hr(tp.To),this.mM=ip.create(),this.gM=0,this.yM=0,this.SM=0,this.FU&&(this.DU=tp.Hr(tp.JS.sk,t,!0))}wM(t,s,e){if(e=Object.assign({},rp,e),this.DU)throw new Error("already created render target");if(this.fM=!!e.depth,this.uM=!!e.rM,this.pM=this.nx.gB(e.nM),this.pM>=2&&e.iM)throw new Error("invalid use of multisampling");this.DU=this.nx.bM(t,s,{yT:e.yT,vT:!1,tU:!0,iM:e.iM,sU:e.sU,eU:e.eU,nM:this.pM}),this.vM(),np.add(this)}JT(){np.delete(this),this.DU.vU(),this.DU=null,this.nx=null}TM(t,s){if(t===this.Cy()&&s===this.My())return;const e=this.DU.PU(),i=this.DU.DM(),r=this.DU.eB();this.DU.vU(),this.DU=null,this.DU=this.nx.bM(t,s,{yT:e,vT:!1,tU:!0,iM:i,sU:r}),this.vM()}EN(){return this.FU?this.nx.Yk():this.DU.EN()}vM(){this.nx.dv(this.mM,this.Cy()/this.My()),this.gM=this.nx.lv(),this.yM=this.nx.nv(),this.SM=this.nx.ov()}kM(){return this.uM}nN(){return this.FU}LM(){return this.fM}Cy(){return this.FU?this.nx.Cy():this.DU.Cy()}My(){return this.FU?this.nx.My():this.DU.My()}AM(){if(this.DU)return this.DU;throw new Error("no texture")}Rx(){return this.nx}NM(){return this.pM}EM(){return this.nx.lv()===this.gM&&this.nx.nv()===this.yM&&this.nx.ov()===this.SM||this.vM(),this.mM}OM(){return this.DU.OM()}DM(){return this.DU.DM()}eB(){return this.DU.eB()}$M(t){return"nearest"!==(t=Object.assign({},rp,t)).yT===this.OM()&&!!t.iM===this.DM()&&!!t.sU===this.eB()&&!!t.depth===this.LM()&&("number"==typeof t.width||"number"==typeof t.height?!this.kM()&&this.Cy()===Math.floor(t.width)&&this.My()===Math.floor(t.height):this.kM())}DN(t){this.LU=!!t}gN(){return this.LU}ON(){return this.kU}static tC(){}static zM(){return np.values()}}}{const hp=self.Gs;hp.JS.bN=class{constructor(t,s){this.nx=t,this.Hw=this.nx.Wb(),this.NU=s;const e=this.nx.zk();this.BU=e.createQuerySet({count:this.NU,type:"timestamp"});const i=self.GPUBufferUsage;this.$U=e.createBuffer({size:this.UU(),usage:i.QUERY_RESOLVE|i.COPY_SRC}),this.VU=e.createBuffer({size:this.UU(),usage:i.COPY_DST|i.MAP_READ}),this.BA=null}UU(){return 8*this.NU}LN(){return this.BU}NN(t){t.resolveQuerySet(this.BU,0,this.NU,this.$U,0),t.copyBufferToBuffer(this.$U,0,this.VU,0,this.UU())}async $N(){const t=this.UU();await this.VU.mapAsync(self.GPUMapMode.READ,0,t);const s=this.VU.getMappedRange(0,t);this.BA=new BigUint64Array(s.slice(0)),this.VU.destroy(),this.VU=null,this.$U.destroy(),this.$U=null,this.BU.destroy(),this.BU=null}VA(){return null!==this.BA}WA(){if(!this.BA)throw new Error("not yet got result");return this.BA}Wb(){return this.Hw}}}{const op=self.Gs,ap={WU:null,zU:null,jU:null,getTime:null,HU:null};op.JS.qU=class{constructor(t){t=Object.assign({},ap,t),this.JU=t.WU,this.YU=t.zU,this.XU=t.jU,this.KU=t.getTime,this.ZU=t.HU,this.QU=null,this.tV=new Set}sV(t){this.tV.add(t)}eV(t){this.tV.delete(t)}tC(){this.QU=null;for(const t of this.tV)t.tC()}iV(t){return this.JU?this.JU(t):[t.Cy(),t.My()]}vF(t){return this.YU(t)}rV(t,s){this.XU(t,s)}nV(){return this.KU()}Fp(t){this.ZU(t)}hV(t,s,e){return s=Math.floor(s),e=Math.floor(e),!this.QU||this.QU.Cy()===s&&this.QU.My()===e||(t.MM(this.QU),this.QU=null),null===this.QU&&(this.QU=t.CF(null,{width:s,height:e,yT:"nearest",vT:!1})),this.QU}}}{const lp=self.Gs,up=self.assert,cp=self.ls,fp=cp.ds,dp=lp.Hr(lp.Rect),pp=lp.Hr(lp.Rect),mp=lp.Hr(lp.Rect),gp=lp.Hr(lp.Rect),yp=fp.create(),Sp=fp.create(),wp={oV:null,aV:null,lV:null,uV:!1},vp={cV:null,fV:!1,dV:!1,pV:!1,mV:!1,gV:!1,yV:!1};lp.JS.SV=class{constructor(t,s){s=Object.assign({},wp,s),this.Wp=t,this.wV=s.oV,this.vV=s.aV,this.bV=s.lV,this.xV=null,this.CV=[],this.TV=[],this.MV=[],this.IV=!1,this.Hx=0,this.GV=!1,this._V=!1,this.PV=!1,this.RV=!1,this.AV=!1,this.EV=!1,this.SE=!1,this.OV=!1,this.FV=!1,this.DV=!1,this.LV=!1,this.kV=!1,this.NV=0,this.BV=[null,null,null],this.$V=!!s.uV,this.UV=0,this.VV=0,this.WV=0,this.zV=0,this.jV=null,this.HV=null,this.qV=lp.Hr(lp.Rect),this.JV=lp.Hr(lp.Rect),this.YV=lp.Hr(lp.Rect),this.XV=lp.Hr(lp.Rect),this.KV=lp.Hr(lp.Rect),this.ZV=1,this.QV=1,this.tW=0,this.sW=0,this.eW=null,this.iW=null,this.rW=0,this.nW=0,this.hW=0,this.oW=0,this.aW=!1,this.mM=fp.create(),this.lW=fp.create(),this.Wp.sV(this)}qr(){this.Wp.eV(this),lp.bh(this.MV),lp.bh(this.CV),lp.bh(this.TV),this.jV=null,this.HV=null,this.wV=null,this.vV=null,this.bV=null}tC(){this.IV=!0,lp.bh(this.MV),lp.bh(this.CV),lp.bh(this.TV)}uW(){return this.IV}cW(t,s){if(s=Object.assign({},vp,s),lp.bh(this.MV),this.UV=0,this.VV=0,this.GV=!1,this._V=!1,this.PV=!1,this.RV=!1,this.AV=!1,this.EV=!1,this.NV=0,this.kV=!!s.mV,this.LV=!!s.yV,this.IV=!1,lp.Mh(this.CV,t),0===t.length)return;if(s.cV){if(s.cV.length!==t.length)throw new Error("incorrect indexMap length");lp.Mh(this.TV,s.cV)}else{lp.bh(this.TV);for(let s=0,e=t.length;s<e;++s)this.TV.push(s)}for(const s of t)this.UV+=s.Ex(),this.VV+=s.Ox(),s.Nx()&&(this.GV=!0),s.$x()&&(this._V=!0),s.Bx()&&(this.PV=!0),s.Fx()&&(this.RV=!0),s.Wx()&&(this.AV=!0);this.EV=this.fW(t[0].Rx());const e=this.dW(t[0],s),i=this.pW(t.at(-1),s);if(1===t.length&&!e&&!i)return void(this.DV=!0);this.DV=!1;let r=0;e&&(this.NV=1,this.MV.push(lp.Hr(lp.JS.SV.gW.mW,this,-1,1)),r=1);for(let s=0,n=t.length;s<n;++s)if(0!==s||e){let t=1===r?2:1;s!==n-1||i||(t=0),this.NV=Math.max(this.NV,t),this.MV.push(lp.Hr(lp.JS.SV.gW.yW,this,r,t,s)),r=t}else this.NV=1,this.MV.push(lp.Hr(lp.JS.SV.gW.SW,this,-1,1,s)),r=1;i&&this.MV.push(lp.Hr(lp.JS.SV.gW.wW,this,r,0))}dW(t,s){return!!(s.fV||t.Dx()||s.pV&&!t.kx()||t.$x()&&!this.LV||0!==this.UV||0!==this.VV)||(t.Rx().Yb()?t.Bx()&&(s.gV||s.mV)||t.Ux()&&s.mV:t.Bx()&&!this.EV&&s.gV)}pW(t,s){return!!s.dV||(t.Rx().Yb()?t.Bx()||t.Fx():(t.Bx()||t.Fx())&&this.vW())}fW(t){return t.pv()&&this.PV&&!this.RV}bW(t,s,e){t.pv()&&null===s&&(s=t.tB()),this.eW=s,this.jV=e.xW||null,this.HV=e.TW||null,this.Hx=e.MW||0,this.ZV=e.devicePixelRatio||1,this.QV=e._B||1,this.tW=e.PB||0,this.sW="number"==typeof e.time?e.time:this.Wp.nV(),this.SE=!1,t.RO(),this.GV&&this.IW();let i=!1;if(this.GW()&&(this._W(t,e),i=!0,this.iW=this.Wp.hV(t,this.WV,this.zV),dp.S(this.JV),dp.bl(),t.pv()&&t.kN(this.eW),t.pB(this.eW.AM(),this.iW,dp.Qa(),dp.tl(),dp.width(),dp.height())),this.DV)this.PW(t,e);else if(i||this._W(t,e),0!==this.YV.width()||0!==this.YV.height()){t.WO(),t.Lb(),t.kO(),t.Yv(0),t.Kv(0),this.xV=e.RW||null,this.rW=e.AW||0,this.nW=e.EW||0,this.hW=e.OW||0,this.oW=e.FW||0,this.aW=!!e.DW,this.LW(t),this.BV[0]=s,this.BV[1]=this.NV>=1?this.kW():null,this.BV[2]=2===this.NV?this.kW():null;for(const s of this.MV){const e=this.NW(s.BW()),i=this.NW(s.$W());t.pv()?s.UW(t,e,i):s.VW(t,e,i)}t.BO(null),this.BV[1]&&this.WW(this.BV[1]),this.BV[2]&&this.WW(this.BV[2]),this.BV.fill(null),this.zW(t),this.eW=null,this.iW=null,this.jV=null,this.HV=null,this.xV=null}}_W(t,s){const[e,i]=this.Wp.iV(t);this.jW(t,e,i),this.HW(s)}jW(t,s,e){if(s<=0||e<=0)throw new Error("invalid draw size");this.WV===s&&this.zV===e||this.qW(t,s,e,0,0,this.mM,this.lW),this.WV=s,this.zV=e}qW(t,s,e,i,r,n,h){const o=s/2+i,a=e/2+r;t.dv(n,s/e);const l=t.yv(o,a,t.Qw(e),o,a,0,e);fp.S(h,l)}HW(t){if(this.qV.S(t.GB),t.JW?this.JV.S(t.JW):this.JV.set(0,0,this.WV,this.zV),this.DV){const s=t.AW??0,e=t.EW??0;this.JV.offset(-s,-e)}this.YV.S(this.JV),this.YV.wt(this.WV,this.zV);const s=this.QV*this.ZV;this.JV.fl(this.UV*s,this.VV*s),this.KV.S(this.JV),this.KV.wt(this.WV,this.zV),this.JV.xl(0,0,this.WV,this.zV),this.XV.S(this.JV),this.XV.wt(this.WV,this.zV)}LW(t){if(this.OV=t.yF(),this.FV=t.OF(),this.LV)t.gF(!1),this._V&&t.SF(!0);else{if(dp.S(this.JV),t.Yb()){const t=this.QV*this.ZV;dp.fl(Math.max(this.UV,1)*t,Math.max(this.VV,1)*t),dp.bl(),dp.Zr(0,0,this.WV,this.zV)}else dp.bl();t.wF(dp.Qa(),dp.tl(),dp.width(),dp.height(),this.zV)}}YW(t){t.kO(),this.LV||(this.FV?t.FF(!1):t.gF(!1),this._V&&t.SF(!0)),t.pv()&&t.oB(!0)}zW(t){t.SF(!1),this.FV?t.EF(this.OV):t.gF(this.OV),this.LV||t.bF(),t.pv()&&t.oB(!1),this.SE=t.AO()}XW(){this.KV.Zr(0,0,1,1)}NW(t){return t<0?null:this.BV[t]}kW(){return this.Wp.vF(this)}KW(){return this.eW}WW(t){this.Wp.rV(t,this)}ZW(t){return this.CV[t]}QW(t){this.xV?this.xV(this,t,()=>this.wV(t,this)):this.wV(t,this),this.DV||this.YW(t)}tz(t){if(this.LV)return!0;if(0!==this.rW||0!==this.nW||0!==this.hW||0!==this.oW)return!1;const[s,e]=t.sF(t.vF());return s===this.WV&&e===this.zV}sz(t,s){let e=this.mM,i=this.lW;if(s&&!this.tz(t)){let s,r;e=yp,i=Sp,0!==this.hW&&0!==this.oW?[s,r]=[this.hW,this.oW]:[s,r]=t.sF(t.vF()),this.qW(t,s,r,this.rW,this.nW,e,i),this.LV||t.bF()}t.CO(e),t.PO(i)}IW(){this.Wp.Fp(this)}ez(t,s){return this.bV(this.TV[t],s)}iz(t,s){let e=this.KV,i=this.XV,r=this.YV;t.Yb()&&(pp.S(e),pp.ml(1),e=pp,mp.S(i),mp.ml(1),i=mp,gp.S(r),gp.ml(1),r=gp),this.rz(t,s,i,r,e,1/this.WV,1/this.zV)}nz(t,s){let e=this.XV,i=this.YV,r=1/this.WV,n=1/this.zV;if(this.vV){let{hz:t,oz:s,az:h}=this.vV(this.jV);t||(dp.set(0,0,0,0),t=dp),s||(s=this.WV),h||(h=this.zV),e=t,i=t,r=1/s,n=1/h}else t.Yb()&&(mp.S(e),mp.ml(1),e=mp,gp.S(i),gp.ml(1),i=gp);let h=this.KV;t.Yb()&&(h=pp,h.S(this.KV),h.ml(1)),this.rz(t,s,e,i,h,r,n),t.pv()&&this.AV&&t.kB(this.kV)}lz(t){return this.PV?t.pv()?this.GW()?this.iW:this.eW.AM():this.eW:null}rz(t,s,e,i,r,n,h){t.cF(this.lz(t),r,e,i,this.qV,n,h,this.ZV,this.QV,this.tW,this.sW),t.fF(this.ez(s,t))}PW(t,s){const e=this.CV[0],i=t.yF(),r=e.$x();r&&(t.gF(!1),t.SF(!0),this.KV.set(0,0,1,1),this.YV.set(0,0,1,1)),t.Cv(e),t.Zx(this.Hx),t.IF(this.eW),t.Lb();let n=0,h=1;if(this.YV.set(0,0,1,1),e.Ux()&&this.vV){const{hz:t,oz:s,az:e}=this.vV(this.jV);t&&this.YV.S(t),n=Number.isFinite(s)?1/s:0,h=Number.isFinite(e)?1/e:0}else{const[s,e]=this.Wp.iV(t);n=1/s,h=1/e}s.GB?this.qV.S(s.GB):this.qV.set(0,0,0,0),t.cF(this.lz(t),this.KV,this.YV,this.YV,this.qV,n,h,this.ZV,this.QV,this.tW,this.sW),t.fF(this.ez(0,t)),t.pv()&&this.AV&&t.kB(this.kV),t.Yv(0),this.QW(t),r&&(t.SF(!1),t.gF(i))}GW(){return this.EV}vW(){return!this.EV}uz(){return this.PV}cz(){return!!this.DV&&!this.GW()}fz(){return this.LV}dz(){return this.jV}pz(){return this.HV}mz(){return this.Hx}gz(){return this.aW}AO(){return this.SE}yz(){return this.JV}Sz(){return this.XV}wz(){return this.$V}async vz(t,s,e){}}}{const bp=self.Gs;bp.JS.SV.gW=class{constructor(t,s,e,i=-1){this.bz=t,this.xz=s,this.Cz=e,this.US=i}Tz(){return this.bz}BW(){return this.xz}$W(){return this.Cz}Mz(){return this.US}QI(){return this.Tz().ZW(this.Mz())}VW(t,s,e){}UW(t,s,e){}}}{const xp=self.Gs;xp.JS.SV.gW.mW=class extends xp.JS.SV.gW{constructor(t,s,e,i){super(t,s,e,i)}VW(t,s,e){const i=this.Tz();t.WO(),t.Lb(),t.xv(),t.IF(e,i.gz()),t.dF(0,0,0,0),i.QW(t),i.XW()}UW(t,s,e){const i=this.Tz();t.WO(),t.Lb(),t.xv(),t.IF(e,!1),t.dF(0,0,0,0),i.QW(t),i.XW()}}}{const Cp=self.Gs,Tp=Cp.Hr(Cp.Rect),Mp=Cp.Hr(Cp.Pl);Cp.JS.SV.gW.wW=class extends Cp.JS.SV.gW{constructor(t,s,e,i){super(t,s,e,i)}VW(t,s,e){const i=this.Tz();t.xv(),t.IF(e),i.sz(t,!0),t.Zx(i.mz()),t.BO(s.AM()),Mp.Xl(i.yz()),Tp.S(i.Sz()),Tp.ml(1),t.ab(Mp,Tp),i.wz()&&t.PF(s)}UW(t,s,e){const i=this.Tz();t.xv(),t.IF(e,!1),i.tz(t)?Mp.Xl(i.Sz()):(t.oB(!1),i.sz(t,!0),Mp.Xl(i.yz())),t.lN(null),t.Zx(i.mz()),t.BO(s.AM()),i.fz()?t.tF():t.ab(Mp,i.Sz())}}}{const Ip=self.Gs;Ip.JS.SV.gW.SW=class extends Ip.JS.SV.gW{constructor(t,s,e,i){super(t,s,e,i)}VW(t,s,e){const i=this.Tz();t.IF(e,i.gz()),t.dF(0,0,0,0),t.HO(),t.Cv(this.QI()),i.nz(t,this.Mz()),i.QW(t),i.XW()}UW(t,s,e){const i=this.Tz();t.IF(e,!1),t.dF(0,0,0,0),t.HO(),t.Cv(this.QI()),i.nz(t,this.Mz()),i.QW(t),i.XW()}}}{const Gp=self.Gs,_p=Gp.Hr(Gp.Rect),Pp=Gp.Hr(Gp.Pl);Gp.JS.SV.gW.yW=class extends Gp.JS.SV.gW{constructor(t,s,e,i){super(t,s,e,i)}VW(t,s,e){const i=this.Tz();t.IF(e);const r=0===this.$W();r?t.Zx(i.mz()):(t.dF(0,0,0,0),t.HO()),t.Cv(this.QI()),i.iz(t,this.Mz()),t.BO(s.AM()),i.sz(t,r),Pp.Xl(i.yz()),_p.S(i.Sz()),_p.ml(1),t.ab(Pp,_p),i.wz()&&t.PF(s)}UW(t,s,e){const i=this.Tz();t.IF(e,!1),0===this.$W()?(t.Zx(i.mz()),t.lN(null),i.tz(t)?Pp.Xl(i.Sz()):(t.oB(!1),i.sz(t,!0),Pp.Xl(i.yz()))):(t.dF(0,0,0,0),t.HO(),Pp.Xl(i.Sz())),t.Cv(this.QI()),i.iz(t,this.Mz()),t.BO(s.AM()),i.fz()?t.tF():t.ab(Pp,i.Sz())}}}{let Rp=function(t,s){const e=t[0]-s[0];return 0!==e?e:t[1]-s[1]};SortZOrderList=Rp;const Ap=self.Gs,Ep=self.Ns;let Op=null;const Fp=new Set,Dp=[],Lp=[];let kp=!1,Np=!1,Bp=!1;const $p=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.Iz=class{constructor(t){Op=t,Object.defineProperties(this,{Gz:{value:Op.Pz()._z(),writable:!1},Rz:{value:Op.Ez().Az(),writable:!1},Oz:{value:{},writable:!1},Fz:{value:{},writable:!1},Dz:{value:Op.Lz(),writable:!1},kz:{value:Op.Nz(),writable:!1},Bz:{value:Op.$z(),writable:!1},Uz:{value:Op.Vz(),writable:!1},Wz:{value:new Date(Op.zz()),writable:!1},storage:{value:new self.jz(Op),writable:!1},qz:{value:Op.Jz(),writable:!1},Yz:{value:Op.Xz(),writable:!1},Kz:{value:Op.Zz(),writable:!1},yT:{value:Op.PU(),writable:!1},Qz:{value:new self.tj(t),writable:!1},sj:{value:new self.ej(t),writable:!1}}),Op.ij().addEventListener("keydown",t=>{Fp.has(t.key)?t.stopPropagation():Fp.add(t.key)}),Op.ij().addEventListener("keyup",t=>Fp.delete(t.key)),Op.wf().addEventListener("window-blur",()=>Fp.clear()),Op.Jz()&&(self.alert=t=>(kp||(kp=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}rj(t){Object.defineProperties(this.Oz,t)}nj(t){Object.defineProperties(this.Fz,t)}addEventListener(t,s){Op.ij().addEventListener(t,s)}removeEventListener(t,s){Op.ij().removeEventListener(t,s)}hj(t,...s){Ep.oi(t);const e=Op.oj(),i=e.aj(t);if(!i)throw new Error(`cannot find function name '${t}'`);if(!i.Gu())return i.lj();if(s.length<i.uj())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${i.uj()} expected)`);const r=i.cj();let n=r.fj();const h=e.dj();if(h){n=n.slice(0);const t=new Set(n);for(const s of h.fj())t.has(s)||(n.push(s),t.add(s));for(const s of e.pj())t.has(s)||(n.push(s),t.add(s))}return r.mj(n,i.gj(),i.yj(),i.lj(),null,...s)}Sj(t){const s=Op.vj().wj();if(!s)throw new Error("not in a function which returns a value");switch(s.bj()){case 1:"number"==typeof t&&s.xj(t);break;case 2:"string"==typeof t&&s.xj(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.xj(t)}}signal(t){Ep.oi(t),Op.oj().Cj(t)}Tj(t){return Ep.oi(t),Op.oj().Mj(t)}Ij(){return[Op.Xz(),Op.Zz()]}get Gj(){return Op._j()}get Pj(){return Op.Rj()}get Aj(){return Op.Ej()}get Oj(){return Op.Fj()}get Dj(){return Op.Lj()}get kj(){return Op.Nj()}get Bj(){return Op.$j()}set Bj(t){Ep.ii(t),Op.Uj(t)}get Vj(){return Np||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),Np=!0),Op.Wj()}get framesPerSecond(){return Op.Wj()}get zj(){return Op.jj()}get Hj(){return Op.qj()}get Jj(){return Op.Yj()}get Xj(){return Op.Kj()}set Xj(t){if(!$p.has(t))throw new Error("invalid framerate mode");Op.Zj(t)}get Qj(){return Op.tH()}set Qj(t){Ep.ii(t),Op.sH(t)}get eH(){return Op.iH()}set eH(t){Op.rH(t)}set nH(t){Op.hH(!!t)}get nH(){return Op.oH()}get aH(){return Op.Pz().lH()}get uH(){return Op.Pz().cH()}random(){return Op.fH()}get layout(){const t=Op.dH();if(!t)throw new Error("no layout is running - make sure a layout is loaded before accessing");return t.pH()}mH(t){const s=Op.gH();let e=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(e=s.yH(t),!e)throw new Error("invalid layout");return e.pH()}SH(){return Op.gH().wH().map(t=>t.pH())}vH(t){const s=Op.gH();let e=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(e=s.yH(t),!e)throw new Error("invalid layout");s.bH()||s.xH(e)}get keyboard(){const t=Op.CH().keyboard;if(!t)throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first");return t}get TH(){const t=Op.CH().TH;if(!t)throw new Error("runtime.mouse used but Mouse object missing - add it to your project first");return t}get MH(){const t=Op.CH().MH;if(!t)throw new Error("runtime.touch used but Touch object missing - add it to your project first");return t}get IH(){const t=Op.CH().IH;if(!t)throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first");return t}get t_(){return Op._H().GH()}PH(t,s){Ep.oi(t),Ep.oi(s),Op.RH(t,s)}AH(t){Ep.ii(t);const s=Op.EH(t);return s?s.OH():null}FH(t,s){Ep.Ai(s);const e=Op.DH();for(const s of t){const t=Op.LH(s),e=t.kH();e.NH()||(Dp.push([e.BH().Mz(),e.$H()]),Lp.push(t))}if(0===Dp.length)return;Dp.sort(Rp),Lp.sort((t,e)=>s(t.OH(),e.OH()));let i=!1;for(let t=0,s=Dp.length;t<s;++t){const s=Lp[t],r=e.UH(Dp[t][0]),n=Dp[t][1],h=r.VH();h[n]!==s&&(h[n]=s,s.kH().WH(r,!0),r.zH(s),i=!0)}i&&Op.jH(),Ap.bh(Dp),Ap.bh(Lp)}HH(t){for(const s of t){const t=Op.LH(s);Op.qH(t)}Op.oj().JH()||Op.gH().YH()||Op.oj().XH()||Op.KH()}async ZH(t,s){Bp||(console.warn("IRuntime.createWorker() is deprecated. All modern browsers now support nested workers so this method is no longer needed."),Bp=!0);const e=new MessageChannel,i=e.port1,r=e.port2;return await Op.QH("runtime","script-create-worker",{url:t,opts:s,port2:r},[r]),i}alert(t){return Op.QH("runtime","alert",{message:t+(Op.Jz()?" [via Web Worker]":"")})}tq(t){return Ep.ii(t),Op.sq(t)}eq(t){Op.iq(t)}async rq(t,s,e){Ep.ai(t),Ep.Qe(s),Ep.Bi(e,DOMRect),e||(e=new DOMRect(0,0,0,0));const i=Op._H();if(!i)return;Op.jH();const r=await i.nq(t||"image/png",s,e.x,e.y,e.width,e.height);return await Op.hq(Ap.uq.lq.aq.oq,null),r}}}{const Up=self.Gs,Vp=self.Ns;let Wp=null;self.cq=class{constructor(t){Wp=t,Object.defineProperties(this,{fq:{value:!0,writable:!1}})}pq(t){const s=self.gq.mq(t);if(!s)throw new Error("invalid IImageInfo");s.yq(Wp.Sq())}wq(t){return Wp.eo(t)}vq(t){return Wp.io(t)}bq(t){return Wp.ro(t)}xq(t){return Wp.no(t)}Cq(t){return Promise.resolve(Wp.Tq(t))}Mq(t){return Wp.Iq(t)}get Gq(){return Wp._q()}async Pq(t,s){throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus")}Rq(...t){return Wp.Aq(...t)}Eq(t){return Wp.Oq(t)}Fq(t){return Wp.Dq(t)}get Lq(){return Wp.kq()}}}{const zp=self.Gs,jp=self.Ns;let Hp=null;self.Nq=class{constructor(t){Hp=t,Object.defineProperties(this,{runtime:{value:Hp.Sq(),writable:!1}})}Bq(t,s){const e=Hp.Sq(),i=e.LH(t),r=e.LH(s);return Hp.$q(i,r)}Uq(t,s){const e=Hp.Sq(),i=e.LH(t);for(const t of s){const s=e.LH(t);if(Hp.$q(i,s))return t}return null}Vq(t){const s=Hp.Sq().LH(t),e=Hp.Wq(s);return e?e.OH():null}zq(t,s){if(jp.ii(t),jp.ii(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");Hp.jq(t,s)}Hq(){return Hp.qq()}Jq(t,s){const e=Hp.Sq();let i;i=Array.isArray(t)?t.map(t=>e.Yq(t)):[e.Yq(t)];const r=zp.Rect.Ka(s),n=[];return Hp.Xq(null,i,r,n),n.map(t=>t.OH())}}}{const qp=self.Gs,Jp=self.Ns;let Yp=null;const Xp=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),Kp=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["Firefox","firefox"],["Safari","safari"]]),Zp=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.tj=class{constructor(t){Yp=t,Object.defineProperties(this,{Kq:{value:qp.Zs.oe,writable:!1},os:{value:Xp.get(qp.Zs.Qs)||"unknown",writable:!1},Zq:{value:qp.Zs.te,writable:!1},browser:{value:Kp.get(qp.Zs.se)||"unknown",writable:!1},Qq:{value:qp.Zs.ee,writable:!1},tJ:{value:Zp.get(qp.Zs.re)||"unknown",writable:!1}})}get sJ(){let t=Yp.eJ();return Yp.iJ()?t="windows-webview2":"cordova"===t?t="Android"===qp.Zs.Qs?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get t_(){return Yp._H().rJ()}get nJ(){return Yp._H().hJ()}get oJ(){return Yp._H().aJ()}get lJ(){return Yp._H().uJ()}get cJ(){return Yp._H().fJ()}get dJ(){return Yp._H().pJ()}get mJ(){return Yp._H().gJ()}get yJ(){return Yp._H().SJ()}get devicePixelRatio(){return Yp.wJ()}}}{const Qp=self.Gs,tm=self.Ns;self.jz=class{constructor(t){this.vJ=t.bJ()}getItem(t){return tm.oi(t),this.vJ.getItem(t)}setItem(t,s){return tm.oi(t),this.vJ.setItem(t,s)}removeItem(t){return tm.oi(t),this.vJ.removeItem(t)}clear(){return this.vJ.clear()}keys(){return this.vJ.keys()}}}{const sm=self.Gs,em=self.Ns,im=sm._s();self.xJ=class{#t;constructor(){const t=sm.TJ.CJ(im);this.#t=t,Object.defineProperties(this,{runtime:{value:t.Sq().MJ(),writable:!1},id:{value:t.IJ(),writable:!1},GJ:{value:t._J(),writable:!1},PJ:{value:t.RJ(),writable:!1},AJ:{value:t.EJ(),writable:!1},OJ:{value:t.FJ(),writable:!1},DJ:{value:t.LJ(),writable:!1},kJ:{value:t.NJ(),writable:!1},BJ:{value:t.$J(),writable:!1},UJ:{value:t.VJ(),writable:!1}}),t.Sq().WJ(this,t)}static zJ(t){if(!t)return null;const s=sm.TJ.jJ(t);return s?s.HJ():null}qJ(){return this.#t.YJ().JJ()}XJ(){return this.#t.KJ().OH()}}}{const rm=globalThis.Gs,nm=globalThis.Ns,hm=rm._s();globalThis.ZJ=class{#t;constructor(){const t=rm.TJ.CJ(hm);this.#t=t,Object.defineProperties(this,{name:{value:t.Rc(),writable:!1},runtime:{value:t.Sq().MJ(),writable:!1},QJ:{value:t.tY().HJ(),writable:!1}}),t.Sq().WJ(this,t)}addEventListener(t,s){nm.oi(t),nm.Ai(s),this.#t.ij().addEventListener(t,s)}removeEventListener(t,s){nm.oi(t),nm.Ai(s),this.#t.ij().removeEventListener(t,s)}sY(){return[...this.eY()]}iY(){return rm.$h(this.eY())}rY(){return[...this.nY()]}hY(){return rm.$h(this.nY())}oY(t){const s=this.#t,e=s.Sq().aY(t),i=s.lY(e);return i?i.OH():null}*eY(){for(const t of this.#t.uY())yield t.OH()}*nY(){for(const t of this.#t.fY().cY())yield t.OH()}dY(t,s,...e){nm.oi(t);const i=this.#t,r=i.Sq(),n=r.oj(),h=n.pY(i,t);if(!h)throw new Error(`cannot find '${this.name}' custom action '${t}'`);if(!h.Gu())return null;if(e.length<h.uj())throw new Error(`not enough function parameters passed for '${this.name}' custom action '${t}' (${e.length} passed, ${h.uj()} expected)`);const o=h.cj();let a=o.fj();const l=n.dj();if(l){a=a.slice(0);const t=new Set(a);for(const s of l.fj())t.has(s)||(a.push(s),t.add(s));for(const s of n.pj())t.has(s)||(a.push(s),t.add(s))}if(i.mY()&&h.gY()){const n=new Map,l=[];for(const e of s){const s=r.aY(e),i=s.yY();if(i.SY(t)){const t=n.get(i);Array.isArray(t)?t.push(s):n.set(i,[s])}else l.push(s)}const u=[];if(l.length>0){const t={wY:i,vY:l},s=o.mj(a,h.gj(),0,null,t,...e);u.push(s)}if(n.size>0)for(const[s,i]of n){const r=s.bY(t).cj(),n=[...new Set([...a,...r.xY()])],o={wY:s,vY:i},l=r.mj(n,h.gj(),0,null,o,...e);u.push(l)}return Promise.all(u)}{const t={wY:h.yY(),vY:(Array.isArray(s)?s:[...s]).map(t=>r.aY(t))},i=o.mj(a,h.gj(),0,null,t,...e);return i instanceof Promise?i:Promise.resolve()}}}}{const om=globalThis.Gs,am=globalThis.Ns,lm=om._s();globalThis.CY=class extends globalThis.ZJ{#t;constructor(){super();const t=om.TJ.CJ(lm);this.#t=t}TY(t){am.Ai(t);const s=this.#t;if(s.MY()>0)throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.IY(t)}Te(t,s,e,i,r){if(am.Ze(s),am.Ze(e),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const n=this.#t,h=n.Sq(),o=h.dH().BH(t);if(!o)throw new Error("invalid layer");const a=h.GY(n,o,s,e,i,r);i&&o._Y(a);const l=h.oj();return l.PY(!0),a.RY(),l.PY(!1),l.JH()||h.gH().YH()||h.KH(),a.OH()}AY(){return this.#t.EY().map(t=>t.JJ())}*OY(){for(const t of this.#t.EY())yield t.JJ()}FY(t){return am.Ni(t,globalThis.DY),t.LY(this)}}}{const um=globalThis.Gs,cm=globalThis.Ns,fm=globalThis.CY,dm=um._s();globalThis.DY=class extends globalThis.ZJ{#t;constructor(){super();const t=um.TJ.CJ(dm);this.#t=t}kY(){return this.#t.NY().map(t=>t.JJ())}*BY(){for(const t of this.#t.NY())yield t.JJ()}LY(t){cm.Ni(t,fm);const s=this.#t,e=s.Sq().Yq(t);return s.$Y(e)}}}{const pm=self.Gs,mm=self.Ns,gm=["above","below","top-sublayer","bottom-sublayer"];self.UY=class{#t;constructor(t){this.#t=t;const s=[],e=t.VY(),i=e.WY().length;for(let t=0;t<i;++t)s.push(new self.zY(e,t));Object.defineProperties(this,{runtime:{value:t.Sq().MJ(),writable:!1},name:{value:t.Rc(),writable:!1},index:{value:t.Mz(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){mm.oi(t),mm.Ai(s),this.#t.ij().addEventListener(t,s)}removeEventListener(t,s){mm.oi(t),mm.Ai(s),this.#t.ij().removeEventListener(t,s)}get width(){return this.#t.Cy()}set width(t){mm.ii(t),this.#t.hy(t)}get height(){return this.#t.My()}set height(t){mm.ii(t),this.#t.oy(t)}jY(t,s){mm.ii(t),mm.ii(s);const e=this.#t;e.hy(t),e.oy(s)}getSize(){const t=this.#t;return[t.Cy(),t.My()]}set scale(t){mm.ii(t),this.#t.HY(t)}get scale(){return this.#t.qY()}set angle(t){mm.ii(t),this.#t.JY(t)}get angle(){return this.#t.YY()}set scrollX(t){mm.Ze(t),this.#t.XY(t)}get scrollX(){return this.#t.KY()}set scrollY(t){mm.Ze(t),this.#t.ZY(t)}get scrollY(){return this.#t.QY()}scrollTo(t,s){mm.Ze(t),mm.Ze(s);const e=this.#t;e.XY(t),e.ZY(s)}tX(){const t=this.#t;return[t.KY(),t.QY()]}get sX(){return this.#t.eX()}iX(t){const s=this.#t;let e=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return e=s.BH(t),e?e.rX():null}nX(){return this.#t.hX().map(t=>t.rX())}*oX(){for(const t of this.#t.oX())yield t.rX()}aX(t,s,e){const i=this.#t,r=self.lX;mm.oi(t),mm.Bi(s,r);const n=s?i.Sq().uX(s):null,h=gm.indexOf(e);if(h<0)throw new Error("invalid location");i.cX(t,n,h)}fX(t,s,e){const i=this.#t,r=i.Sq(),n=self.lX;mm.Ni(t,n);const h=r.uX(t);if(!h)throw new Error("invalid layer");mm.Bi(s,n);const o=s?r.uX(s):null,a=gm.indexOf(e);if(a<0)throw new Error("invalid location");i.dX(h,o,a)}pX(t){const s=this.#t,e=self.lX;mm.Ni(t,e);const i=s.Sq().uX(t);if(!i)throw new Error("invalid layer");const r=i.Sq();s.mX(i),r.oj().JH()||r.KH()}gX(){const t=this.#t,s=t.Sq();t.yX(),s.oj().JH()||s.KH()}SX(t,s){mm.ii(t),mm.ii(s),this.#t.wX(t,s)}vX(){return this.#t.bX()}set W(t){mm.oi(t);const s=this.#t;if("perspective"===t)s.xX();else{if("orthographic"!==t)throw new Error("invalid projection");s.CX()}}get W(){return this.#t.TX()?"orthographic":"perspective"}}}{const ym=self.Gs,Sm=self.Ns,wm=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10],["lighten",11],["darken",12],["multiply",13],["screen",14]]),vm=new Map([...wm.entries()].map(t=>[t[1],t[0]])),bm=new Set(["2d","3d"]),xm=ym.Hr(ym.To);self.lX=class{#t;constructor(t){this.#t=t;const s=[],e=t.VY(),i=e.WY().length;for(let t=0;t<i;++t)s.push(new self.zY(e,t));Object.defineProperties(this,{runtime:{value:t.Sq().MJ(),writable:!1},name:{value:t.Rc(),writable:!1},layout:{value:t.yH().pH(),writable:!1},effects:{value:s,writable:!1}}),t.Sq().WJ(this,t)}addEventListener(t,s){this.#t.ij().addEventListener(t,s)}removeEventListener(t,s){this.#t.ij().removeEventListener(t,s)}get MX(){const t=this.#t.IX();return t?t.rX():null}*GX(){for(const t of this.#t.GX())yield t.rX()}*_X(){for(const t of this.#t.PX())yield t.rX()}*RX(){for(const t of this.#t.PX())for(const s of t.AX())yield s.rX()}get index(){return this.#t.Mz()}get isVisible(){return this.#t.EX()}set isVisible(t){this.#t.OX(t)}get FX(){return this.#t.DX()}get LX(){return this.#t.kX()}set LX(t){this.#t.NX(t)}get BX(){return this.#t.$X()}set BX(t){this.#t.UX(!!t)}get VX(){return this.#t.WX()}get opacity(){return this.#t.FO()}set opacity(t){t=ym.Zr(+t,0,1),isNaN(t)||this.#t.LO(t)}set scale(t){Sm.ii(t),this.#t.zX(t)}get scale(){return this.#t.jX()}set HX(t){Sm.ii(t),this.#t.qX(t)}get HX(){return this.#t.JX()}set angle(t){Sm.ii(t),this.#t.JY(t)}get angle(){return this.#t.YX()}set XX(t){Sm.ii(t),this.#t.KX(t)}get XX(){return this.#t.ZX()}set QX(t){Sm.ii(t),this.#t.tK(t)}get QX(){return this.#t.sK()}set WN(t){Sm.ii(t),this.#t.mC(t)}get WN(){return this.#t.pC()}set renderingMode(t){if(!bm.has(t))throw TypeError("invalid rendering mode");this.#t.eK("3d"===t)}get renderingMode(){return this.#t.iK()?"3d":"2d"}set rK(t){this.#t.nK(t)}get rK(){return this.#t.hK()}set oK(t){this.#t.aK(t)}get oK(){return this.#t.lK()}set MW(t){Sm.oi(t);const s=wm.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");this.#t.Zx(s)}get MW(){return vm.get(this.#t.uK())}set backgroundColor(t){if(Sm.Ti(t),t.length<3)throw new Error("expected 3 elements");xm.Ro(t[0],t[1],t[2]);const s=this.#t,e=s.cK();e.Ho(xm)||(e.ko(xm),s.Sq().jH())}get backgroundColor(){const t=this.#t.cK();return[t.No(),t.Bo(),t.$o()]}set scrollX(t){Sm.Ze(t);const s=this.#t;s.fK(!0),s.XY(t)}get scrollX(){return this.#t.KY()}set scrollY(t){Sm.Ze(t);const s=this.#t;s.fK(!0),s.ZY(t)}get scrollY(){return this.#t.QY()}scrollTo(t,s){Sm.Ze(t),Sm.Ze(s);const e=this.#t;e.fK(!0),e.XY(t),e.ZY(s)}tX(){const t=this.#t;return[t.KY(),t.QY()]}dK(){this.#t.fK(!1)}getViewport(){return this.#t.pK().il()}mK(t,s,e=0){Sm.Ze(t),Sm.Ze(s),Sm.Ze(e);const i=this.#t,r=i.Sq();return i.gK(t-r.aJ(),s-r.uJ(),e)}yK(t,s,e=0){Sm.Ze(t),Sm.Ze(s),Sm.Ze(e);const i=this.#t,r=i.Sq(),[n,h]=i.SK(t,s,e);return[n+r.aJ(),h+r.uJ()]}wK(t,s,e=0){return Sm.Ze(t),Sm.Ze(s),Sm.Ze(e),this.#t.vK(t,s,e)}bK(t,s,e=0){return Sm.Ze(t),Sm.Ze(s),Sm.Ze(e),this.#t.xK(t,s,e)}get CK(){return this.#t.TK()}}}{let Cm=function(t){let s=Im.get(t);return s||(s=Tm.Hr(Tm.Event.wf),Im.set(t,s),s)};GetDispatcher=Cm;const Tm=self.Gs,Mm=self.Ns,Im=new WeakMap,Gm=Tm._s();self.MK=class{#t;constructor(){const t=Tm.TJ.CJ(Gm);this.#t=t;const s={runtime:{value:t.Sq().MJ(),writable:!1},objectType:{value:t.yY().JJ(),writable:!1},QJ:{value:t.tY().HJ(),writable:!1}};t.IK(s),t.GK(s),Object.defineProperties(this,s),t.Sq().WJ(this,t)}static _K(){return Tm.TJ.PK()}RK(){const t=Im.get(this);t&&(t.qr(),Im.delete(this))}addEventListener(t,s,e){Mm.oi(t),Mm.Ai(s),Cm(this).addEventListener(t,s,e)}removeEventListener(t,s,e){Mm.oi(t),Mm.Ai(s),Cm(this).removeEventListener(t,s,e)}dispatchEvent(t){Cm(this).dispatchEvent(t)}destroy(){const t=this.#t,s=t.Sq();s.qH(t),s.oj().JH()||s.gH().YH()||s.oj().XH()||s.KH()}AK(){const t=this.#t.EK();return t?t.map(t=>t.OH()):[]}*FK(){const t=this.#t;if(t.DK())for(const s of t.LK())yield s.OH()}get uid(){return this.#t.kK()}get NK(){return this.#t.BK()}get $K(){return this.#t.UK()}set Bj(t){Mm.ii(t),this.#t.Uj(t)}get Bj(){return this.#t.VK()}WK(){this.#t.zK()}get Pj(){const t=this.#t;return t.Sq().Rj(t)}jK(t){return Mm.oi(t),this.#t.HK(t)}qK(...t){Mm.Ti(t);const s=new Set(t.map(t=>t.toLowerCase())),e=this.#t.JK();return s.isSubsetOf(e)}YK(t){t instanceof Set||(t=new Set(t)),this.#t.XK(t)}KK(){return new Set(this.#t.ZK())}signal(t){Mm.oi(t);const s=this.#t;s.Sq().oj().QK(s,t)}Tj(t){Mm.oi(t);const s=this.#t;return s.Sq().oj().tZ(s,t)}dY(t,...s){return this.objectType.dY(t,[this],...s)}}}{const _m=self.Gs,Pm=self.Ns,Rm=_m._s();self.sZ=class extends self.MK{#t;#s=!1;#e=null;#i=!1;#r=null;#n;#h;constructor(t){super(),this.#t=_m.TJ.CJ(Rm),this.#s=!1,this.#e=null,this.#i=!1,this.#r=null,this.#n=t?.eZ,this.#h=t?.iZ}RK(){this.rZ(!1),this.nZ(!1),super.RK()}hZ(){return _m.TJ.oZ()}aZ(t){const s=this.#t;s.Sq().lZ(t,s)}uZ(t){const s=this.#t;return s.Sq().hq(t,s)}cZ(t,s){if(Pm.oi(t),Pm.Ai(s),!this.#n)throw new Error("no DOM component id set");this.#t.Sq().fZ(this.#n,t,s)}dZ(t){Pm.Ti(t);for(const[s,e]of t)this.cZ(s,e)}pZ(t,s){if(Pm.oi(t),!this.#n)throw new Error("no DOM component id set");this.#t.Sq().Vc(this.#n,t,s)}mZ(t,s){if(Pm.oi(t),!this.#n)throw new Error("no DOM component id set");return this.#t.Sq().QH(this.#n,t,s)}gZ(t,s){if(!this.#t.Sq().Jz())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#n,handler:t,data:s,responseId:null});this.pZ(t,s)}rZ(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=this.#t.Sq();if(t){if(!this.#e)if(this.#t.Sq().yZ()){const t=globalThis.SZ,s=this.QJ;this.#e=()=>{const e=performance.now();this.wZ(),t.vZ(s,performance.now()-e)}}else this.#e=()=>this.wZ();s.wf().addEventListener("tick",this.#e)}else s.wf().removeEventListener("tick",this.#e)}bZ(){return this.#s}wZ(){}nZ(t){if(t=!!t,this.#i===t)return;this.#i=t;const s=this.#t.Sq();if(t){if(!this.#r)if(this.#t.Sq().yZ()){const t=globalThis.SZ,s=this.QJ;this.#r=()=>{const e=performance.now();this.xZ(),t.vZ(s,performance.now()-e)}}else this.#r=()=>this.xZ();s.wf().addEventListener("tick2",this.#r)}else s.wf().removeEventListener("tick2",this.#r)}CZ(){return this.#i}xZ(){}TZ(){return[]}MZ(){return null}IZ(t){}GZ(){if(!this.#h)throw new Error("no wrapper component id set");return this.#t.Sq()._Z(this.#h)}PZ(t,s){if(Pm.oi(t),Pm.Ai(s),!this.#h)throw new Error("no wrapper component id set");this.#t.Sq().RZ(this.#h,t,s)}AZ(t){Pm.Ti(t);for(const[s,e]of t)this.PZ(s,e)}EZ(t,s){if(!this.#h)throw new Error("no wrapper component id set");this.runtime.sj.OZ(this.#h,t,s)}FZ(t,s){if(!this.#h)throw new Error("no wrapper component id set");return this.runtime.sj.DZ(this.#h,t,s)}}}{let Am=function(t){return class s extends t{#t;#s;constructor(t){super(t);const s=Em.TJ.CJ(Bm),e=s.kH();this.#t=s,this.#s=e,Nm.set(this,s);const i=[],r=e.LZ();if(r){const t=e.yY().VY().WY().length;for(let s=0;s<t;++s)i.push(new self.zY(r,s))}const n={effects:{value:i,writable:!1}};Object.defineProperties(this,n)}get layout(){return this.#s.yH().pH()}get kZ(){return this.#s.BH().rX()}get x(){return this.#s.lC()}set x(t){t=+t;const s=this.#s;isNaN(t)||s.lC()===t||(s.uC(t),s.NZ())}get y(){return this.#s.fC()}set y(t){t=+t;const s=this.#s;isNaN(t)||s.fC()===t||(s.dC(t),s.NZ())}setPosition(t,s){t=+t,s=+s;const e=this.#s;isNaN(t)||isNaN(s)||e.lC()===t&&e.fC()===s||(e.BZ(t,s),e.NZ())}$Z(){const t=this.#s;return[t.lC(),t.fC()]}offsetPosition(t,s){if(t=+t,s=+s,isNaN(t)||isNaN(s)||0===t&&0===s)return;const e=this.#s;e.UZ(t,s),e.NZ()}set VZ(t){t=+t;const s=this.#s;isNaN(t)||s.WZ()===t||(s.zZ(t),s.NZ())}get VZ(){return this.#s.WZ()}set jZ(t){t=+t;const s=this.#s;isNaN(t)||s.HZ()===t||(s.qZ(t),s.NZ())}get jZ(){return this.#s.HZ()}JZ(t,s){t=+t,s=+s;const e=this.#s;isNaN(t)||isNaN(s)||e.WZ()===t&&e.HZ()===s||(e.zZ(t),e.qZ(s),e.NZ())}YZ(){const t=this.#s;return[t.WZ(),t.HZ()]}get WN(){return this.#s.pC()}set WN(t){t=+t;const s=this.#t,e=this.#s;isNaN(t)||e.pC()===t||(e.mC(t),s.Sq().jH())}get XZ(){return this.#s.KZ()}get width(){return this.#s.Cy()}set width(t){t=+t;const s=this.#s;isNaN(t)||s.Cy()===t||(s.hy(t),s.NZ())}get height(){return this.#s.My()}set height(t){t=+t;const s=this.#s;isNaN(t)||s.My()===t||(s.oy(t),s.NZ())}jY(t,s){t=+t,s=+s;const e=this.#s;isNaN(t)||isNaN(s)||e.Cy()===t&&e.My()===s||(e.tA(t,s),e.NZ())}getSize(){const t=this.#s;return[t.Cy(),t.My()]}get angle(){return this.#s.YY()}set angle(t){t=Em.Qr(+t);const s=this.#s;isNaN(t)||s.YY()===t||(s.JY(t),s.NZ())}get ZZ(){return Em.sn(this.angle)}set ZZ(t){this.angle=Em.tn(t)}Ql(t){return t?(this.#s.QZ(Lm,km,!1),Lm.il()):this.#s.tQ().il()}sQ(t){return t?(this.#s.QZ(Lm,km,!1),km.ql()):this.#s.eQ().ql()}iQ(){return this.#s.rQ()}get isVisible(){return this.#s.DX()}set isVisible(t){t=!!t;const s=this.#t,e=this.#s;e.DX()!==t&&(e.OX(t),s.Sq().jH())}get opacity(){return this.#s.FO()}set opacity(t){t=Em.Zr(+t,0,1);const s=this.#t,e=this.#s;isNaN(t)||e.FO()===t||(e.LO(t),s.Sq().jH())}set nQ(t){if(Om.Ti(t),t.length<3)throw new Error("expected 3 elements");Vm.Ro(t[0],t[1],t[2]);const s=this.#t,e=this.#s;e.hQ().Ho(Vm)||(e.oQ(Vm),s.Sq().jH())}get nQ(){const t=this.#s.hQ();return[t.No(),t.Bo(),t.$o()]}set MW(t){Om.oi(t);const s=$m.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const e=this.#t;this.#s.Zx(s),e.Sq().jH()}get MW(){return Um.get(this.#s.uK())}aQ(){this.#s.lQ()}uQ(){this.#s.cQ()}fQ(t){Om.Ni(t,Dm);const s=this.#t,e=s.Sq().uX(t);if(!e)throw new Error("invalid layer");s.kH().dQ(e)}pQ(t,e){Om.Ni(t,s),this.#s.mQ(Nm.get(t),e)}get zIndex(){return this.#s.$H()}get gQ(){return this.#s.yQ()}set gQ(t){this.#s.SQ(!!t)}Ml(t,s){return Om.Ze(t),Om.Ze(s),this.#s.wQ(+t,+s)}Bq(t){Om.Ni(t,s);const e=this.#t,i=Nm.get(t);return e.Sq().Ez().$q(e,i)}Vq(){const t=this.#t,s=t.Sq().Ez().Wq(t);return s?s.OH():null}getParent(){const t=this.#t.vQ();return t?t.OH():null}bQ(){const t=this.#t.xQ();return t?t.OH():null}*CQ(){for(const t of this.#t.CQ())yield t.OH()}TQ(){return this.#t.MQ()}IQ(t){const s=this.#t.GQ(t);return s?s.OH():null}*children(){for(const t of this.#t.children())yield t.OH()}*_Q(){for(const t of this.#t._Q())yield t.OH()}PQ(t,e){Om.Ni(t,s),Om.gi(e),e||(e={});const i=this.#t,r=Nm.get(t);i.RQ(r,e)}removeChild(t){Om.Ni(t,s);const e=this.#t,i=Nm.get(t);e.AQ(i)}EQ(){const t=this.#t;t.OQ()&&t.vQ().AQ(t)}FQ(){const t=this.#s;return{DQ:t.LQ(),kQ:t.NQ(),BQ:t.$Q(),UQ:t.VQ(),WQ:t.zQ(),jQ:t.HQ(),qQ:t.JQ(),YQ:t.XQ(),KQ:t.ZQ()}}QQ(t,s){Om.ii(t),Om.ii(s),this.#s.t0(t,s)}s0(){const t=this.#s;t.e0(),t.NZ()}i0(t,s,e){Om.ii(t),Om.ii(s),Om.mi(e);const i=this.#s;i.r0(t,s,e)&&i.NZ()}n0(t,s){let e=NaN,i=NaN,r=NaN,n=NaN,h=NaN;const o=this.#s;if(o.h0()){const a=o.o0().ZC(t,s);null!==a&&(e=a.lC(),i=a.fC(),r=a.pC(),n=a.gC(),h=a.SC())}return{x:e,y:i,WN:r,a0:n,l0:h}}u0(){const t=this.#s;if(!t.h0())return[0,0];const s=t.o0();return[s.UC(),s.VC()]}}};MakeIWorldInstanceClass=Am;const Em=self.Gs,Om=self.Ns,Fm=self.MK,Dm=self.lX,Lm=Em.Hr(Em.Rect),km=Em.Hr(Em.Pl),Nm=new WeakMap,Bm=Em._s(),$m=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10],["lighten",11],["darken",12],["multiply",13],["screen",14]]),Um=new Map([...$m.entries()].map(t=>[t[1],t[0]])),Vm=Em.Hr(Em.To);self.c0=Am(self.MK),self.f0=Am(self.sZ)}{const Wm=self.Gs,zm=self.Ns;self.d0=class extends self.c0{#t;constructor(){super(),this.#t=self.MK._K()}p0(){return this.#t.g0().m0()}focus(){this.#t.g0().y0()}blur(){this.#t.g0().S0()}w0(t,s){zm.oi(t),this.#t.g0().v0(t,s)}}}{let jm=function(t){let s=Jm.get(t);return s||(s=Hm.Hr(Hm.Event.wf),Jm.set(t,s),s)};GetDispatcher=jm;const Hm=self.Gs,qm=self.Ns,Jm=new WeakMap,Ym=Hm._s();self.b0=class{#t;constructor(){const t=Hm.TJ.CJ(Ym);this.#t=t;const s={runtime:{value:t.Sq().MJ(),writable:!1},behavior:{value:t.C0().x0(),writable:!1},T0:{value:t.I0().M0(),writable:!1}};Object.defineProperties(this,s),t.Sq().WJ(this,t)}static _K(){return Hm.TJ.PK()}get G0(){return this.#t._0().OH()}RK(){const t=Jm.get(this);t&&(t.qr(),Jm.delete(this))}addEventListener(t,s,e){qm.oi(t),qm.Ai(s),jm(this).addEventListener(t,s,e)}removeEventListener(t,s,e){qm.oi(t),qm.Ai(s),jm(this).removeEventListener(t,s,e)}dispatchEvent(t){jm(this).dispatchEvent(t)}}}{const Xm=self.Gs,Km=self.Ns,Zm=Xm._s();self.P0=class{constructor(){const t=Xm.TJ.CJ(Zm),s={runtime:{value:t.Sq().MJ(),writable:!1},behavior:{value:t.C0().x0(),writable:!1},name:{value:t.Rc(),writable:!1}};Object.defineProperties(this,s)}}}{const Qm=self.Gs,tg=self.Ns,sg=Qm._s();self.R0=class{#s;constructor(){const t=Qm.TJ.CJ(sg);this.#s=t;const s={runtime:{value:t.Sq().MJ(),writable:!1},id:{value:t.IJ(),writable:!1}};Object.defineProperties(this,s),t.Sq().WJ(this,t)}sY(){return this.#s.cY().map(t=>t.OH())}static zJ(t){if(!t)return null;const s=Qm.TJ.A0(t);return s?s.x0():null}}}{const eg=self.Gs,ig=self.Ns,rg=eg.Hr(eg.To);self.zY=class{#t;constructor(t,s){this.#t=t;const e={index:{value:s,writable:!1}};Object.defineProperties(this,e)}get name(){return this.#t.WY()[this.index].Rc()}get isActive(){return this.#t.E0(this.index)}set isActive(t){t=!!t;const s=this.#t;s.E0(this.index)!==t&&(s.O0(this.index,t),s.F0(),s.Sq().jH())}setParameter(t,s){ig.ii(t),t=Math.floor(+t);const e=this.#t,i=e.D0(this.index,t);if(null===i)throw new RangeError("invalid index");if(i instanceof eg.To){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");rg.Ro(s[0],s[1],s[2]),s=rg}else if("number"!=typeof s)throw new TypeError("expected number");e.L0(this.index,t,s)&&e.E0(this.index)&&e.Sq().jH()}getParameter(t){ig.ii(t),t=Math.floor(+t);const s=this.#t.D0(this.index,t);if(null===s)throw new RangeError("invalid index");return s instanceof eg.To?[s.No(),s.Bo(),s.$o()]:s}}}{const ng=self.Gs,hg=self.Ns;self.k0=class{#t;constructor(t){this.#t=t,Object.defineProperties(this,{name:{value:t.Rc(),writable:!1}})}get speed(){return this.#t.N0()}get B0(){return this.#t.$0()}get U0(){return this.#t.V0()}get W0(){return this.#t.z0()}get j0(){return this.#t.H0()}get frameCount(){return this.#t.q0()}J0(){return this.#t.Y0().map(t=>t.X0())}*frames(){for(const t of this.#t.Y0())yield t.X0()}}}{const og=self.Gs,ag=self.Ns;self.gq=class{#s;constructor(t){this.#s=t}static mq(t){return t.#s}get width(){return this.#s.Cy()}get height(){return this.#s.My()}getSize(){const t=this.#s;return[t.Cy(),t.My()]}K0(t){return t.Z0(this)}Q0(){return this.#s.EA().il()}}}{const lg=self.Gs,ug=self.Ns;self.t1=class extends self.gq{#s;constructor(t){super(t.s1()),this.#s=t,Object.defineProperties(this,{duration:{value:t.e1(),writable:!1},VZ:{value:t.WZ(),writable:!1},jZ:{value:t.HZ(),writable:!1}})}YZ(){const t=this.#s;return[t.WZ(),t.HZ()]}i1(){return this.#s.n1()}h1(t){return this.o1(t)[0]}a1(t){return this.o1(t)[1]}o1(t){const s=this.#s;let e=null;if("number"==typeof t)e=s.l1(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");e=s.u1(t)}return e?[e.lC(),e.fC()]:this.YZ()}c1(){const t=this.#s.f1();return t?t.mu():0}d1(t){return this.m1(t)[0]}g1(t){return this.m1(t)[1]}m1(t){ug.ii(t),t=Math.floor(t);const s=this.#s.f1();if(!s||t<0||t>=s.mu())return[0,0];const e=s.pu();return[e[2*t],e[2*t+1]]}get tag(){return this.#s.S1()}}}{let cg=function(t){const s=pg.get(t);if(s.w1())throw new Error("timeline/tween was released and is no longer valid");return s};GetTimelineState=cg;const fg=self.Gs,dg=self.Ns,pg=new WeakMap;self.v1=class{constructor(t){pg.set(this,t),t.Sq().WJ(this,t)}pause(){cg(this).b1()}resume(){cg(this).C1()}stop(){cg(this).$f()}qK(t){return cg(this).T1(t)}set time(t){dg.ii(t),cg(this).M1(t)}get time(){return cg(this).nV()}set totalTime(t){dg.ii(t),cg(this).I1(t)}get totalTime(){return cg(this).G1()}set B0(t){cg(this)._1(!!t)}get B0(){return cg(this).P1()}set j0(t){cg(this).R1(!!t)}get j0(){return cg(this).A1()}set playbackRate(t){dg.ii(t),cg(this).E1(t)}get playbackRate(){return cg(this).O1()}get progress(){const t=cg(this);return t.nV()/t.G1()}get tags(){return cg(this).F1()}get finished(){return cg(this).D1()}get L1(){return cg(this).IsPlaying()}get N1(){return cg(this).B1()}get U1(){return pg.get(this).w1()}}}{let mg=function(t){const s=Sg.get(t);if(s.w1())throw new Error("timeline was released and is no longer valid");return s};GetTimelineState=mg;const gg=self.Gs,yg=self.Ns,Sg=new WeakMap;let wg=null;self.V1=class extends self.v1{constructor(t){super(t),Sg.set(this,t);const s={name:{value:t.Rc(),writable:!1}};Object.defineProperties(this,s)}}}{let vg=function(t){const s=Cg.get(t);if(s.w1())throw new Error("tween was released and is no longer valid");return s};GetTweenState=vg;const bg=self.Gs,xg=self.Ns,Cg=new WeakMap,Tg=new WeakMap;let Mg=null;self.W1=class extends self.v1{constructor(t,s,e){super(t),Mg||(Mg=e.z1),Cg.set(this,t),s&&Tg.set(this,s)}stop(){const t=vg(this);Tg.get(this).j1(t)}H1(t){xg.oi(t);const s=self.Wu.ac(Mg(t));vg(this).q1(s)}get G0(){const t=vg(this).J1();return t?t.OH():null}get Y1(){return vg(this).X1()}set Y1(t){vg(this).K1(!!t)}get finished(){const t=vg(this);return t.D1().then(()=>new Promise(s=>{t.Z1()&&s()}))}get released(){return vg(this).Q1()}get value(){const t=vg(this);if("value"!==t.t2())throw new Error("not a value tween");return t.e2("value").s2()}}}{const Ig=self.Gs,Gg=self.Ns;self.i2=class extends self.xJ{constructor(){super()}}}{const _g=self.Gs,Pg=self.Ns,Rg=_g._s();self.n2=class extends self.i2{#t;#e;#s=0;#n=new Map;constructor(t){if(super(),this.#t=_g.TJ.CJ(Rg),!t?.eZ)throw new Error("no DOM component ID specified");this.#e=t.eZ,this.h2("elem-focused",t=>t.o2()),this.h2("elem-blurred",t=>{t&&t.a2()})}l2(t){const s=this.#s++;return this.#n.set(s,t),s}u2(t){this.#n.delete(t)}h2(t,s){this.#t.Sq().fZ(this.#e,t,t=>{const e=this.#n.get(t.elementId);s(e,t)})}c2(t){Pg.Ti(t);for(const[s,e]of t)this.c2(s,e)}}}{const Ag=self.Gs,Eg=self.Ns,Og=new WeakMap,Fg=Ag._s();self.f2=class extends self.CY{#t;constructor(){super(),this.#t=Ag.TJ.CJ(Fg)}d2(){}m2(){return this.#t.s1().g2()}S2(t){}w2(t){}v2(){}b2(t){}}}{const Dg=self.Gs,Lg=self.Ns,kg=new WeakMap,Ng=Dg._s();self.C2=class extends self.f0{#t;#r=null;#s=null;constructor(t){super(t),this.#t=Dg.TJ.CJ(Ng)}RK(){if(super.RK(),this.#r){const t=this.#t.Sq().wf();t.removeEventListener("renderercontextlost",this.#r),t.removeEventListener("renderercontextrestored",this.#s),this.#r=null,this.#s=null}}T2(){if(this.#r)return;this.#r=()=>this.M2(),this.#s=()=>this.I2();const t=this.#t.Sq().wf();t.addEventListener("renderercontextlost",this.#r),t.addEventListener("renderercontextrestored",this.#s)}M2(){}I2(){}G2(t){}_2(){return!0}yx(){return!1}}}{const Bg=self.Gs,$g=self.Ns,Ug=Bg.Hr(Bg.Rect),Vg=new WeakMap,Wg=Bg._s();self.P2=class extends self.C2{#t=-1;#s=!0;#n=!1;#i=!1;#e=-.2;#h=Bg.Hr(Bg.Rect,0,0,-1,-1);#o=0;#a=0;#l=-1;#u=-1;#c=!1;constructor(t){if(!t?.eZ)throw new Error("no DOM component ID specified");super(t);const s=Bg.TJ.CJ(Wg);Vg.set(this,s),this.#t=this.QJ.l2(this);const e=s.Sq()._H();this.#o=e.R2(),this.#a=e.A2(),this.rZ(!0)}RK(){super.RK(),this.QJ.u2(this.#t),this.E2("destroy"),this.#t=-1,Vg.delete(this)}O2(){if(Vg.get(this).Sq().Jz())throw new Error("not valid in worker mode");return this.F2("get-element")}E2(t,s){s||(s={}),s.elementId=this.#t,this.pZ(t,s)}F2(t,s){return s||(s={}),s.elementId=this.#t,this.gZ(t,s)}D2(t,s){return s||(s={}),s.elementId=this.#t,this.mZ(t,s)}L2(t){t||(t={});const s=Vg.get(this).kH();t.elementId=this.#t,t.isVisible=s.DX(),t.htmlIndex=s.BH().N2(),t.htmlZIndex=s.B2(),Object.assign(t,this.U2()),this.#s=!!t.isVisible,this.gZ("create",t),this.V2(!0)}W2(t){t=!!t,this.#s!==t&&(this.#s=t,this.E2("set-visible",{isVisible:t}))}wZ(){this.V2(!1)}z2(){const t=Vg.get(this).Sq()._H().j2();return"Android"===Bg.Zs.Qs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}V2(t){const s=Vg.get(this);if(s.NH())return;const e=s.kH(),i=e.BH(),r=e.tQ();let[n,h]=i.SK(r.Qa(),r.tl()),[o,a]=i.SK(r.sl(),r.el());const l=s.Sq()._H(),u=l.fJ(),c=l.pJ();if(!e.DX()||!i.DX())return void this.W2(!1);if(!this.z2()&&(o<=0||a<=0||n>=u||h>=c))return void this.W2(!1);Ug.set(n,h,o,a);const f=l.R2(),d=l.A2(),p=i.N2(),m=e.B2();if(!t&&Ug.equals(this.#h)&&this.#o===f&&this.#a===d&&this.#l===p&&this.#u===m)return void this.W2(!0);this.#h.S(Ug),this.#o=f,this.#a=d,this.#l=p,this.#u=m,this.W2(!0);let g=null;this.#i&&(g=i.H2()+this.#e),this.E2("update-position",{left:Math.round(this.#h.Qa()),top:Math.round(this.#h.tl()),width:Math.round(this.#h.width()),height:Math.round(this.#h.height()),htmlIndex:p,htmlZIndex:m,fontSize:g})}q2(){this.F2("focus",{focus:!0})}J2(){this.F2("focus",{focus:!1})}o2(){this.#n=!0}a2(){this.#n=!1}Y2(){return this.#n}X2(t,s){this.K2("set-css-style",{prop:Bg.bo(t),val:s})}Z2(t,s){this.K2("set-attribute",{name:t,val:s})}Q2(t){this.K2("remove-attribute",{name:t})}t3(){this.#c||(this.#c=!0,Promise.resolve().then(()=>{this.#c=!1,this.E2("update-state",this.U2())}))}U2(){}s3(){return this.#t}}}{const zg=self.Gs,jg=self.Ns;self.e3=class extends self.R0{constructor(){super()}}}{const Hg=self.Gs,qg=self.Ns;self.i3=class extends globalThis.P0{constructor(){super()}d2(){}}}{const Jg=self.Gs,Yg=self.Ns,Xg=new WeakMap,Kg=Jg._s();self.r3=class extends self.b0{#i=!1;#s=!1;#t=!1;constructor(){super(),Xg.set(this,Jg.TJ.CJ(Kg))}RK(){super.RK(),this.rZ(!1),this.nZ(!1),this.n3(!1),Xg.delete(this)}hZ(){return Jg.TJ.oZ()}h3(){}aZ(t){const s=Xg.get(this);s.Sq().lZ(t,s._0(),s.I0())}uZ(t){const s=Xg.get(this);return s.Sq().hq(t,s._0(),s.I0())}rZ(t){if(t=!!t,this.#i===t)return;this.#i=t;const s=Xg.get(this).Sq();t?s.o3(this):s.a3(this)}bZ(){return this.#i}wZ(){}nZ(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=Xg.get(this).Sq();t?s.l3(this):s.u3(this)}CZ(){return this.#s}xZ(){}n3(t){if(t=!!t,this.#t===t)return;this.#t=t;const s=Xg.get(this).Sq();t?s.c3(this):s.f3(this)}d3(){return this.#t}m3(){}TZ(){return[]}MZ(){return null}IZ(t){}}}{const Zg=self.Gs,Qg=self.Ns;let ty=null;self.ej=class{constructor(t){ty=t,Object.defineProperties(this,{g3:{value:ty.y3(),writable:!1}})}S3(){ty.jH()}eq(t){ty.iq(t)}w3(t){return Qg.oi(t),ty._Z(t)}OZ(t,s,e){Qg.oi(t),Qg.oi(s),Qg.Mi(e),ty.v3(t,s,e)}DZ(t,s,e){return Qg.oi(t),Qg.oi(s),Qg.Mi(e),ty.b3(t,s,e)}x3(t){return Qg.ai(t),new self.C3(ty,t)}set T3(t){ty.M3(!!t)}get T3(){return ty.I3()}G3(t){ty._3(!!t)}P3(t){Qg.Ze(t);const s=ty.R3(t);return s?s.JJ():null}}}{const sy=self.Gs,ey=self.Ns;self.C3=class{#t;#s;#h;#e;#n;#r;constructor(t,s){this.#t=t;const e=t.oj(),i=t.dj();this.#s=i,this.#h=i.xY();const r=t.vj();this.#e=r.A3(),this.#n=r.E3(i);const n=e.O3().E3();this.#r=n,s&&n.F3(s),t.D3(!1)}L3(){const t=this.#t.oj(),s=this.#h,e=this.#r;t.N3(s),this.#s.B3(this.#e,this.#n),t.U3(s),e.V3(e.Mz()+1)}get W3(){return this.#r.z3()}release(){const t=this.#t,s=t.vj(),e=t.oj().O3();t.D3(!0),e.j3(),s.j3()}}}{let iy=function(t){return t instanceof ImageBitmap||"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas};IsStaticTextureDataType=iy;const ry=self.Gs,ny=self.Ns;let hy=null,oy=null;const ay=["none","back","front"],ly=["cw","ccw"];self.H3=class{constructor(t,s){oy=t,hy=s}q3(){hy.WO()}J3(t){hy.UO(t)}Y3(){hy._v()}X3(){hy.xv()}K3(){hy.Dv()}setColor(t){hy.DO(t[0],t[1],t[2],t[3])}Z3(t,s,e,i){hy.DO(t,s,e,i)}Q3(){hy.kO()}t4(t){hy.LO(t)}s4(t){hy.Kv(t)}e4(){return hy.Zv()}i4(t){const s=ay.indexOf(t);if(-1===s)throw new Error("invalid cull mode");hy.kb(s)}r4(){return ay[hy.zO()]}n4(t){const s=ly.indexOf(t);if(-1===s)throw new Error("invalid front face winding");hy.Nb(s)}h4(){return hy.jO()}rect(t){hy.qO(t.left,t.top,t.right,t.bottom)}o4(t,s,e,i){hy.qO(t,s,e,i)}a4(t){hy.Pl(ry.Pl.Jl(t))}l4(t,s,e,i,r,n,h,o){hy.$b(t,s,e,i,r,n,h,o)}u4(t,s){hy.ab(ry.Pl.Jl(t),ry.Rect.rl(s))}c4(t,s){hy.XO(ry.Pl.Jl(t),ry.Pl.Jl(s))}f4(t,s,e){hy.KO(ry.Pl.Jl(t),ry.Pl.Jl(s),e)}d4(t,s,e,i,r,n,h,o,a,l,u,c,f){hy.ZO(t,s,e,i,r,n,h,o,a,l,u,c,ry.Rect.rl(f))}m4(t,s,e,i,r,n,h,o,a,l,u,c,f){hy.ib(t,s,e,i,r,n,h,o,a,l,u,c,ry.Pl.Jl(f))}g4(t,s,e,i,r,n,h,o,a,l,u,c,f,d){hy.QO(t,s,e,i,r,n,h,o,a,l,u,c,ry.Pl.Jl(f),d)}y4(t,s,e,i){hy.hT(t,s,e,i)}S4(t){hy.Bb(t)}line(t,s,e,i){hy.Ry(t,s,e,i)}w4(t,s,e,i,r,n){hy.rb(t,s,e,i,r,n)}v4(t,s,e,i){hy.lb(t,s,e,i)}b4(t){hy.pb(ry.Rect.rl(t))}x4(t){hy.mb(ry.Pl.Jl(t))}C4(t){hy.xb(t)}T4(){hy.Cb()}M4(t){hy.Gb(t)}I4(){hy.Ab()}G4(t){ny.Bi(t,self._4);const s=t?oy.uX(t):null;hy.BO(s)}P4(t,s){const e=self.gq.mq(t);if(!e)throw new Error("invalid IImageInfo");return e.R4(hy,{mT:s?.mT??"clamp-to-edge",gT:s?.gT??"clamp-to-edge",yT:s?.yT??"trilinear",vT:s?.vT??!0})}A4(t){const s=self.gq.mq(t);if(!s)throw new Error("invalid IImageInfo");s.vR()}Z0(t){const s=self.gq.mq(t);if(!s)throw new Error("invalid IImageInfo");const e=s.AM();return self._4.E4(oy,e)}O4(t,s){if(!iy(t))throw new TypeError("invalid texture data");const e=hy.CF(t,{mT:s?.mT??"clamp-to-edge",gT:s?.gT??"clamp-to-edge",yT:s?.yT??"trilinear",vT:s?.vT??!0});return self._4.E4(oy,e)}F4(t,s,e){ny.ii(t),ny.ii(s);const i=hy.bM(t,s,{mT:e?.mT??"clamp-to-edge",gT:e?.gT??"clamp-to-edge",yT:e?.yT??"trilinear",vT:e?.vT??!0});return self._4.E4(oy,i)}D4(t,s,e){ny.Ni(s,self._4);const i=oy.uX(s);hy.AA(t,i,{xT:e?.xT??!0})}deleteTexture(t){ny.Ni(t,self._4);const s=oy.uX(t);hy.MM(s)}L4(){const t=hy.tx();return new self.N4(oy,t)}B4(){oy._H().U4(hy)}V4(t){ny.Ni(t,globalThis.lX),oy.uX(t).W4(hy)}}}{const uy=self.Gs,cy=self.Ns,fy=new WeakMap,dy=new WeakMap;self._4=class{constructor(t,s){fy.set(this,{runtime:t,texture:s}),dy.set(s,this),t.WJ(this,s),Object.defineProperties(this,{width:{value:s.Cy(),writable:!1},height:{value:s.My(),writable:!1}})}static E4(t,s){if(!s)return null;return dy.get(s)||new self._4(t,s)}}}{let py=function(t){return yy.get(t).z4};getActual=py;const my=self.Gs,gy=self.Ns,yy=new WeakMap;self.N4=class{constructor(t,s){yy.set(this,{runtime:t,z4:s}),t.WJ(this,s)}release(){py(this).qr()}set j4(t){gy.oi(t),py(this)._R(t)}get j4(){return py(this).IP()}set H4(t){gy.ii(t),py(this).PR(t)}get H4(){return py(this).RR()}set lineHeight(t){gy.ii(t),py(this).ER(t)}get lineHeight(){return py(this).OR()}set q4(t){py(this).FR(t)}get q4(){return py(this).DR()}set J4(t){py(this).LR(t)}get J4(){return py(this).kR()}setColor(t){gy.Ti(t),this.Y4(t[0],t[1],t[2])}Y4(t,s,e){py(this).VR(t,s,e)}X4(t){gy.oi(t),py(this).Qx(t)}set K4(t){py(this).WR(t)}get K4(){return py(this).zR()}set verticalAlign(t){py(this).jR(t)}get verticalAlign(){return py(this).HR()}set Z4(t){py(this).qR(t)}get Z4(){return py(this).JR()}set Q4(t){py(this).YR(t)}get Q4(){return py(this).XR()}set text(t){gy.oi(t),py(this).Wc(t)}get text(){return py(this).KR()}jY(t,s,e){gy.ii(t),gy.ii(s),gy.ii(e),py(this).tA(t,s,e)}K0(){const{runtime:t,z4:s}=yy.get(this),e=s.AM();return self._4.E4(t,e)}Q0(){return py(this).EA().il()}t5(t){gy.Ai(t),py(this).CR=t}s5(){py(this).vR()}get e5(){return py(this).eA()}get i5(){return py(this).rA()}}}{let Sy=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const e=s.at(-1).toLowerCase();return xy.get(e)||""},wy=function(t){return new Promise((s,e)=>{const i=document.createElement("script");i.onload=s,i.onerror=e,i.async=!1,i.type="module",i.src=t,document.head.appendChild(i)})};GetTypeFromFileExtension=Sy,AddScript=wy;const vy=self.Gs,by=new Set(["local","remote"]),xy=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);vy.r5=class extends vy.zr{constructor(t,s){super();const e=s.exportType;this.Bc=t,this.n5=new Map,this.h5="cordova"===e,this.o5=!!s.isiOSCordova,this.a5=s.swClientId,this.l5=s.supportedAudioFormats||{},this.u5=new Map,this.c5=!1,this.f5=s.scriptFolder,this.d5="",this.p5="",this.m5="",this.g5=s.fileMap||new Map,this.y5=new Map,this.S5=[];const i="html5"===e||"scirra-arcade"===e||"instant-games"===e;this.w5=i?"remote":"local",this.v5=new Map,this.b5=[],this.x5=[],this.C5=!1,this.T5=0,this.M5=0,this.I5=0,this.G5=!1,this._5=vy.Hr(vy.tp,()=>this.P5(),50),this.R5=vy.Hr(vy.jd,Math.max(vy.hardwareConcurrency,8)),this.A5=vy.Hr(vy.jd,20),this.E5=new self.cq(this)}qr(){for(const t of this.v5.values())t.qr();this.v5.clear(),vy.bh(this.x5),this.Bc=null}Sq(){return this.Bc}O5(){return this.f5}F5(t){this.d5=t}_q(){return this.d5}D5(t){this.p5=t}L5(){return this.p5}k5(t){this.m5=t}N5(){return this.m5}B5(t){this.S5=t}kq(){return this.S5}ro(t,s){return s=s||this.w5,vy.Zh(t)?"playable-ad-single-file"===this.Bc.eJ()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):"local"===s?this.R5.$u(()=>vy.ro(t)):this.A5.$u(()=>vy.ro(t)):vy.ro(t)}no(t){return vy.Zh(t)?"playable-ad-single-file"===this.Bc.eJ()?vy.oo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.w5?this.R5.$u(()=>vy.no(t)):this.A5.$u(()=>vy.no(t)):vy.no(t)}eo(t){return vy.Zh(t)?"playable-ad-single-file"===this.Bc.eJ()?vy.ao(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.w5?this.R5.$u(()=>vy.eo(t)):this.A5.$u(()=>vy.eo(t)):vy.eo(t)}async io(t){const s=await this.eo(t);return JSON.parse(s)}Iq(t){let s=this.d5+t;return"Gecko"===vy.Zs.re&&"preview"===this.Bc.eJ()&&(s=this.U5(s)),s}Tq(t){return"playable-ad-single-file"===this.Bc.eJ()&&vy.Zh(t)?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):t}V5(t){if(vy.Kh(t)||"preview"!==this.Bc.eJ()||!this.a5||!t)return t;try{const s=new URL(t,location.href);return s.searchParams.set("__c3_client_id",this.a5),s.toString()}catch(s){return console.warn("Invalid iframe URL: "+t),t}}W5(t,s){return(s?"true":"false")+"|"+t}z5(t){const s=!!t.j5;if(t.H5&&!by.has(t.H5))throw new Error("invalid load policy");const e=this.W5(t.url,s);let i=this.v5.get(e);return i||(i=vy.Hr(vy.q5,this,{url:t.url,size:t.size||0,H5:t.H5||this.w5,j5:s}),this.v5.set(e,i),this.C5||(this.T5+=i.Fu(),this.x5.push(i.J5().then(()=>this.Y5(i.Fu())))),i)}X5(t){const s=this.W5(t.K5(),t.Z5());this.v5.delete(s)}async Q5(t){try{await Promise.all(this.x5),this.I5=1,t&&0===this.T5&&this.P5()}catch(t){console.error("Error loading: ",t),this.G5=!0,this.P5()}}t6(){this.C5=!0}s6(){return this.G5}Y5(t){this.M5+=t,this._5.mp()}P5(){const t=vy.Hr(vy.Event,"loadingprogress");0===this.T5?this.I5=1:this.I5=vy.Zr(this.M5/this.T5,0,1),t.progress=this.I5,this.Bc.wf().dispatchEvent(t),this.Bc.e6(vy.Hr(vy.Event,"loadingprogress"))}lH(){return this.I5}cH(){return this.Bc.r6().i6()}n6(t){vy.Mh(this.b5,t),this.b5.length&&this.x5.push(this.h6())}async h6(){const t=[],s=[];for(const[e,i,r]of this.b5)this.T5+=r,t.push(this.o6(e,i,s).then(()=>this.Y5(r)));await Promise.all(t),this.Bc.Jz()&&s.length>0&&await this.Bc.QH("runtime","load-webfonts",{webfonts:s})}async o6(t,s,e){try{let i=this.Tq(s);"Gecko"===vy.Zs.re&&(t=`'${t}'`),("Gecko"===vy.Zs.re&&"preview"===this.Bc.eJ()||"playable-ad-single-file"===this.Bc.eJ())&&(i=this.U5(i));const r=new FontFace(t,`url('${i}')`);this.Bc.Jz()?self.fonts.add(r):document.fonts.add(r),await r.load(),this.Bc.Jz()&&e.push({name:t,url:i})}catch(s){console.warn(`[C3 runtime] Failed to load web font '${t}': `,s)}}a6(t){return!!this.l5[t]}l6(t,s){this.c5=!!s;for(const[s,e,i]of t)this.u5.set(s,{fileName:s,u6:e.map(t=>({type:t[0],c6:t[1],fullName:s+t[1],fileSize:t[2]})),f6:i})}d6(t){const s=this.u5.get(t);if(!s)return null;let e=null;for(const t of s.u6)if(e||"audio/webm; codecs=opus"!==t.type||(e=t),this.a6(t.type))return t;return e}p6(t){const s=this.d6(t);return s?{url:this.Iq(s.fullName),type:s.type}:null}m6(){if(this.c5){const t=[];for(const s of this.u5.values()){if(s.f6)continue;const e=this.d6(s.fileName);e&&t.push({g6:s.fileName,url:this.Iq(e.fullName),type:e.type,fileSize:e.fileSize})}return t}return[]}y6(t){return"preview"===this.Bc.eJ()&&(t=new URL(t,location.href).toString()),this.g5.get(t)||null}U5(t){let s=this.y5.get(t);if(s)return s;const e=this.y6(t);return e?(s=URL.createObjectURL(e),this.y5.set(t,s),s):t}_z(){return this.E5}async Aq(...t){const s=t.map(t=>this.Tq(t));if(this.Bc.Jz())if(1===t.length){const s=t[0];await import(new URL(s,location.href).toString())}else{const s=t.map(t=>`import "${new URL(t,location.href).toString()}";`).join("\n"),e=URL.createObjectURL(new Blob([s],{type:"application/javascript"}));await import(e)}else await Promise.all(s.map(t=>wy(t)))}async Oq(t){if(WebAssembly.compileStreaming){const s=this.Tq(t);return await WebAssembly.compileStreaming(fetch(s))}{const s=await vy.no(t);return await WebAssembly.compile(s)}}async Dq(t){const s=this.Tq(t);return await this.Bc.QH("runtime","add-stylesheet",{url:s})}}}{const Cy=self.Gs;Cy.S6=class extends Cy.zr{constructor(t,s){super(),this.w6=t,this.Bc=t.Sq(),this.v6=s.url||"",this.f$=s.size,this.b6=s.H5,this.x6=s.blob||null,this.C6=!!this.x6,this.AS=null}qr(){this.AS=null,this.w6=null,this.Bc=null,this.x6=null}K5(){return this.v6}Fu(){return this.f$}J5(){return"local"===this.b6||this.x6?(this.C6=!0,Promise.resolve()):(this.AS||(this.AS=this.w6.ro(this.v6,this.b6).then(t=>(this.C6=!0,this.AS=null,this.x6=t,t)).catch(t=>{console.error("Error loading resource: ",t),this.AS=null})),this.AS)}T6(){return this.C6}M6(){return this.x6?Promise.resolve(this.x6):this.AS?this.AS:this.w6.ro(this.v6,this.b6)}}}{const Ty=self.Gs,My=new Ty.jd,Iy=new Set;Ty.q5=class extends Ty.S6{constructor(t,s){super(t,s),this.I6=null,this.G6=null,this.jp=0,this._6=-1,this.P6=-1,this.R6=!!s.j5,Iy.add(this)}qr(){if(0!==this.jp)throw new Error("released image asset which still has references");this.w6.X5(this),this.I6=null,Iy.delete(this),super.qr()}static A6(){for(const t of Iy)t.I6=null,t.G6=null,t.jp=0}R4(t,s){return s=s||{},this.jp++,this.G6?Promise.resolve(this.G6):(this.I6||(s.ST=this.Bc._H().E6(),this.I6=this.O6(t,s)),this.I6)}async O6(t,s){try{const e=await this.M6();return 0===this.jp?(this.I6=null,null):await My.$u(async()=>{const i=await t.TF(e,s);return this.I6=null,0===this.jp?(t.MM(i),null):(this.G6=i,this._6=i.Cy(),this.P6=i.My(),this.G6)})}catch(t){throw console.error("Failed to load texture: ",t),t}}vR(){if(this.jp<=0)throw new Error("texture released too many times");this.jp--,0===this.jp&&this.G6&&(this.G6.Rx().MM(this.G6),this.G6=null)}F6(){this.jp++}D6(){return this.jp}L6(){this.jp--}AM(){return this.G6}Cy(){return this._6}My(){return this.P6}Z5(){return this.R6}async k6(){const t=await this.M6();return Ty.Pe.ImageBitmap?await createImageBitmap(t):await Ty.uo(t)}}}{let Gy=function(t,s){return t.kH().N6()-s.kH().N6()};SortByInstLastCachedZIndex=Gy;const _y=self.Gs,Py=self.assert;_y.B6=class extends _y.zr{constructor(t,s,e){super(),this.U6=t,this.Ra=s,this.Aa=e,this.V6=[],this.W6=!0,this.z6=new Set,this.j6=!1}qr(){_y.bh(this.V6),this.z6.clear(),this.U6=null}$f(){_y.bh(this.V6),this.W6=!0,this.z6.clear(),this.j6=!1}H6(){this.W6=!1}Au(){return!this.V6.length||!(this.V6.length>this.z6.size)&&(this.q6(),!0)}J6(t){if(this.z6.has(t))return this.z6.delete(t),void(0===this.z6.size&&(this.j6=!1));this.V6.push(t),this.W6=1===this.V6.length}Zf(t){this.z6.add(t),this.j6=!0,this.z6.size>=50&&this.q6()}q6(){this.j6&&(this.V6.length!==this.z6.size?(_y.Rh(this.V6,this.z6),this.z6.clear(),this.j6=!1):this.$f())}Y6(){this.W6||(this.V6.sort(Gy),this.W6=!0)}X6(t){this.q6(),this.Y6(),this.V6.length&&t.push(this.V6)}}}{const Ry=self.Gs;Ry.K6=class extends Ry.zr{constructor(t,s){super(),this.Z6=t,this.Q6=s,this.t8=Ry.Hr(Ry._u)}qr(){this.t8.qr(),this.t8=null}s8(t,s,e){let i=this.t8.Hs(t,s);return i||(e?(i=Ry.Hr(Ry.B6,this,t,s),this.t8.Set(t,s,i),i):null)}e8(t){return Math.floor(t/this.Z6)}i8(t){return Math.floor(t/this.Q6)}r8(t,s,e){if(s)for(let i=s.Qa(),r=s.sl();i<=r;++i)for(let r=s.tl(),n=s.el();r<=n;++r){if(e&&e.Ml(i,r))continue;const s=this.s8(i,r,!1);s&&(s.Zf(t),s.Au()&&this.t8.Eu(i,r))}if(e)for(let i=e.Qa(),r=e.sl();i<=r;++i)for(let r=e.tl(),n=e.el();r<=n;++r)s&&s.Ml(i,r)||this.s8(i,r,!0).J6(t)}n8(t,s){let e=this.e8(t.Qa());const i=this.i8(t.tl()),r=this.e8(t.sl()),n=this.i8(t.el());for(;e<=r;++e)for(let t=i;t<=n;++t){const i=this.s8(e,t,!1);i&&i.X6(s)}}h8(t){let s=t.Qa();const e=t.tl(),i=t.sl(),r=t.el();for(;s<=i;++s)for(let t=e;t<=r;++t){const e=this.s8(s,t,!1);e&&e.H6()}}}}{let Ay=function(t,s){return t.kH().N6()-s.kH().N6()},Ey=function(t,s){return t.kH().pC()-s.kH().pC()};SortByInstLastCachedZIndex=Ay,SortByInstZElevation=Ey;const Oy=self.Gs,Fy=self.assert,Dy=new Oy.Rect,Ly=new Oy.Pl,ky=[],Ny=new Oy.Rect,By=new Oy.Rect,$y=self.ls,Uy=$y.Ss,Vy=$y.ws,Wy=$y.ds,zy=Wy.create(),jy=Uy.create(),Hy=Vy.create(),qy=Uy.create(),Jy=Uy.create(),Yy=Uy.create(),Xy=Oy.Hr(Oy.Pa),Ky=Oy.Hr(Oy.Rect),Zy=[],Qy=[],tS=[],sS={name:"",o8:-1,a8:!1,isVisible:!0,LX:!0,BX:!1,backgroundColor:[1,1,1,1],rK:!0,l8:[1,1],opacity:1,oK:!1,u8:!1,c8:!1,f8:!1,HX:1,MW:0,WN:0,d8:[],p8:[],m8:[]},eS=new Map,iS=t=>{if(!t.G0.yY().g8())return;const s=t.G0.kK();eS.has(s)&&(eS.delete(s),eS.size||t.G0.Sq().wf().removeEventListener("instancedestroy",iS))};Oy.y8=class extends Oy.zr{constructor(t,s,e){super(),e=Object.assign({},sS,e),this.S8=t,this.Bc=t.Sq(),this.w8=s,this.Xr=e.name,this.US=-1,this.v8=!!e.BX,this.b8=-1,this.x8=e.o8,this.C8=!!e.a8,this.T8=!!e.isVisible,this.M8=!!e.LX,this.I8=Oy.Hr(Oy.To),this.I8.wa(e.backgroundColor),this.G8=!!e.rK,this._8=e.l8[0],this.P8=e.l8[1],this.qx=Oy.Hr(Oy.To,1,1,1,e.opacity),this.A8=Oy.Hr(Oy.To),this.E8=!!e.oK,this.O8=!!e.u8,this.F8=!!e.c8,this.D8=!!e.f8,this.L8=e.HX,this.Hx=e.MW,this.k8=null,this.N8=1,this.Jx=e.WN,this.B8=0,this.U8=0,this.V8=0,this.W8=!1,this.yE=Oy.Hr(Oy.Rect),this.z8=Oy.Hr(Oy.Rect),this.j8=Oy.Hr(Oy.Rect),this.H8=!0,this.mM=Wy.create(),this.q8=!0,this.lW=Wy.create(),this.J8=!0,this.Y8=Oy.Hr(Oy.JS.ZS),this.X8=!0,this.K8=[],this.Z8=e.d8,this.Q8=[],this.t7=[],this.s7=new Map,this.V6=[],this.e7=!1,this.i7=!1,this.r7=!1;const i=this.Bc._H();this.n7=Oy.Hr(Oy.h7,this,e.p8),this.bz=Oy.Hr(Oy.JS.SV,i.o7(),{oV:(t,s)=>{const e=s.dz(),r=e.vF();t.Qx(e.a7()),t._F(r),t.PF(r),i.l7(r)},lV:t=>this.VY().u7(t)}),this.c7=!0,this.f7=!0,this.d7=null,this.p7=[],this.m7=!1,this.g7=Oy.Hr(Oy.Rect,0,0,-1,-1),this.y7=Oy.Hr(Oy.Rect,0,0,-1,-1),this.S7=new self.lX(this),this.w7=Oy.Hr(Oy.Event.wf),this.v7(),this.b7()&&(this.d7=Oy.Hr(Oy.K6,this.Bc.Xz(),this.Bc.Zz())),this.x7=e.m8.map(t=>Oy.y8.C7(this.S8,this,t))}T7(){for(const t of this.Z8){const s=this.Bc.M7(t[1]);this.S8.I7(s),s.G7()||(s._7(t),s.P7(this.US)),this.Q8.push(t),this.s7.set(t[2],t)}Oy.Mh(this.K8,this.Q8),this.Z8=null}static C7(t,s,e){return Oy.Hr(Oy.y8,t,s,{name:e[0],o8:e[2],isVisible:e[3],LX:e[13],BX:e[19],backgroundColor:e[4].map(t=>t/255),rK:e[5],l8:[e[6],e[7]],opacity:e[8],oK:e[9],u8:e[17],c8:e[18],f8:e[10],HX:e[11],MW:e[12],WN:e[16],d8:e[14],p8:e[15],m8:e[20]})}qr(){for(const t of this.x7)t.qr();Oy.bh(this.x7);for(const t of this.V6)this.Bc.qH(t);Oy.bh(this.V6),this.n7.qr(),this.n7=null,this.bz.qr(),this.bz=null,this.S7=null,this.w8=null,this.S8=null,this.Bc=null}Jr(){return!this.S8}R7(t){return this.s7.get(t)}A7(t){const s=this.S8.E7(),e=this.Q8;let i=0;for(let r=0,n=e.length;r<n;++r){const n=e[r],h=this.Bc.M7(n[1]);let o=!0;if(!h.O7()||s)if(h.g8()&&eS.has(n[2]))o=!1;else{const s=this.Bc.F7(n,this,!0);t.push(s),h.g8()&&(eS.size||this.Bc.wf().addEventListener("instancedestroy",iS),eS.set(s.kK(),s),o=!1,this.t7.push(s.kK()))}o&&(e[i]=e[r],++i)}Oy.wh(e,i),this.Bc.KH(),this.zH()}D7(t,s){if(!t.tY().RJ())throw new Error("instance is not of world type");const e=t.kH();if(e.BH()!==this)throw new Error("instance added to wrong layer");this.V6.push(t),0!==e.pC()&&(this.r7=!0),s&&this.b7()&&t.kH().NZ(),this.zH(t)}L7(t){this.V6.includes(t)||(this.V6.push(t),0!==t.kH().pC()&&(this.r7=!0),this.zH(t))}k7(t,s){const e=t.kH();if(e.BH()!==this)throw new Error("instance added to wrong layer");this.V6.unshift(t),0!==e.pC()&&(this.r7=!0),this.zH(t),s&&this.b7()&&t.kH().NZ()}N7(t,s){const e=this.V6.indexOf(t);e<0||(s&&this.b7()&&t.kH().B7(),this.V6.splice(e,1),this.zH(t),this.U7())}V7(){this.r7=!0}U7(){0===this.V6.length&&(this.r7=!1)}W7(t){if(t){const t=new Set;for(const s of this.V6){const e=s.kH().N6();e>=0&&t.add(e)}let s=-1;for(const e of this.V6){const i=e.kH();if(!(i.N6()>=0)){for(++s;t.has(s);)++s;i.z7(s)}}}this.V6.sort(Ay)}j7(){}H7(){for(const t of this.V6)t.yY().g8()||this.Bc.qH(t);this.Bc.KH(),Oy.bh(this.V6),this.r7=!1,this.zH()}q7(t,s,e,i,r,n){const h=this.Bc.oj(),o=this.Bc.J7(),a=t.mY(),l=[];for(const u of this.Q8){const c=u[0],f=c[0],d=c[1];if(!s.Ml(f,d))continue;const p=o[u[1]];if(p!==t){if(!a)continue;if(!t.$Y(p))continue}let m=r;if(!m){const t=this.Bc.DH();this.yH()===t?m=this:(m=t.Y7(this.Rc()),m||(m=t.UH(this.Mz())))}const g=this.Bc.F7(u,m,!1,void 0,void 0,!1,n,void 0,n);n&&m._Y(g);const y=g.kH();y.UZ(e,i),y.NZ(),h.PY(!0),g.RY(),h.PY(!1),l.push(g)}return l}MY(){return this.V6.length}yH(){return this.S8}Rc(){return this.Xr}X7(t){this.US=t}Mz(){return this.US}K7(t){this.b8=t}N2(){return this.b8}$X(){return this.v8}UX(t){t=!!t,this.v8!==t&&(this.v8=t,this.S8.Z7(),this.Bc.jH())}Q7(){let t=-1;const s=this.IX();return t=s?s.PX().indexOf(this):this.yH().t9().indexOf(this),t}s9(){return this.x8}Sq(){return this.Bc}e9(){return this.C8}i9(){for(const t of this.GX())if(t.e9())return!0;return!1}wJ(){return this.Bc.wJ()}VY(){return this.n7}Tz(){return this.r9(),this.bz}r9(){const t=this.n9();if(!this.c7&&t===this.f7&&!this.bz.uW())return;const s=this.VY().h9();this.bz.cW(s.map(t=>t.QI()),{cV:s.map(t=>t.Mz()),fV:!t,yV:!0}),this.c7=!1,this.f7=t}F0(){this.VY().F0(),this.c7=!0}b7(){return this.D8&&!this.F8}o9(){return this.d7}a9(){this.m7=!1}DX(){for(const t of this.l9())if(!t.EX())return!1;return!0}EX(){return this.T8}OX(t){t=!!t,this.T8!==t&&(this.T8=t,this.Bc.jH())}NX(t){this.M8=!!t}kX(){return this.M8}WX(){for(const t of this.l9())if(!t.kX())return!1;return!0}fK(t){if(t=!!t,this.W8!==t){if(this.W8=t,t){const t=this.yH();this.U8=t.KY(),this.V8=t.QY()}this.u9(),this.Bc.jH()}}c9(){return this.W8}XY(t){const s=this.yH(),e=s.f9(),i=s.d9();t>i&&(t=i),t<e&&(t=e),this.U8!==t&&(this.U8=t,this.c9()&&(this.u9(),this.Bc.jH()))}ZY(t){const s=this.yH(),e=s.p9(),i=s.m9();t>i&&(t=i),t<e&&(t=e),this.V8!==t&&(this.V8=t,this.c9()&&(this.u9(),this.Bc.jH()))}KY(){return this.c9()?this.U8:this.yH().KY()}QY(){return this.c9()?this.V8:this.yH().QY()}pK(){return this.g9(),this.yE}y9(){return this.g9(),this.z8}S9(){return this.g9(),this.j8}w9(){return this.yH().bX()}Qw(t){return this.Bc.Qw(t)}v9(t,s){const e=this.y9();if(0===t)s.S(e);else{let i=e.ol(),r=e.al();const n=this.b9(t),h=e.width()/n,o=e.height()/n,[a,l]=this.w9();if(.5!==a||.5!==l){const s=this.x9(),e=this.Bc,n=this.Qw()/s;let h=(a-.5)*e.C9()/n,o=(l-.5)*e.T9()/n;const u=this.YY();0!==u&&(Xy.set(h,o),Xy.rotate(u),h=Xy.Fa(),o=Xy.La());const c=Oy.gn(s,0,t);i+=Oy.Gt(h,0,c),r+=Oy.Gt(o,0,c)}s.set(i-h/2,r-o/2,i+h/2,r+o/2)}}FO(){return this.qx.Uo()}LO(t){t=Oy.Zr(t,0,1),this.qx.Uo()!==t&&(this.qx.Lo(t),this.v7(),this.Bc.jH())}v7(){this.A8.S(this.qx),this.A8.Zo()}a7(){return this.A8}n9(){return this.qx.Jo(1,1,1,1)}JX(){return this.L8}qX(t){this.L8!==t&&(this.L8=t,this.u9(),this.Bc.jH())}ZX(){return this._8}sK(){return this.P8}M9(t,s){this._8===t&&this.P8===s||(this._8=t,this.P8=s,this.u9(),this.Bc.jH())}KX(t){this.M9(t,this.sK())}tK(t){this.M9(this.ZX(),t)}mC(t){this.Jx!==t&&(this.Jx=t,this.Bc.jH())}pC(){return this.Jx}JY(t){t=Oy.Qr(t),this.B8!==t&&(this.B8=t,this.u9(),this.Bc.jH())}YY(){return Oy.Qr(this.S8.YY()+this.B8)}YX(){return this.B8}I9(){return this.V6.length>0}VH(){return this.V6}G9(){return this._9()&&this.F8?(Oy.Mh(tS,this.VH()),tS.sort((t,s)=>this.P9(t,s)),tS):this.VH()}R9(t){Oy.Fr(t,this.G9());for(const s of this.x7)s.DX()&&s.FO()>0&&s.R9(t)}P9(t,s){const e=this.yH().A9(),i=e[0],r=e[1],n=e[2],h=t.kH(),o=s.kH(),a=h.lC()-i,l=h.fC()-r,u=h.pC()-n,c=o.lC()-i,f=o.fC()-r,d=o.pC()-n;return c*c+f*f+d*d-(a*a+l*l+u*u)}cK(){return this.I8}hK(){return this.G8}nK(t){t=!!t,this.G8!==t&&(this.G8=t,this.Bc.jH())}lK(){return this.E8}aK(t){t=!!t,this.E8!==t&&(this.E8=t,this.Bc.jH())}eK(t){t=!!t,this.O8!==t&&(this.O8=t,this.u9(),this.Bc.jH())}iK(){return this.O8}E9(){return!this.Sq().O9()||!this.O8}_9(){return!this.E9()}F9(){return this._9()&&this.yH().D9()}L9(){if(!this.F9())return!1;for(const t of this.x7)if(!t.L9())return!1;return!0}Zx(t){this.Hx!==t&&(this.Hx=t,this.Bc.jH())}uK(){return this.Hx}k9(){return!this.w8}IX(){return this.w8}N9(t){this.w8=t}PX(){return this.x7}B9(){return this.x7.length>0}U9(t,s=!0){s?this.x7.push(t):this.x7.unshift(t)}V9(t,s,e){let i=this.x7.indexOf(s);if(-1===i)throw new Error("cannot find layer to insert by");e&&++i,this.x7.splice(i,0,t)}W9(t){const s=this.x7.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.x7.splice(s,1)}z9(){for(const t of this.x7)if(t.j9())return!0;return!1}*AX(){for(const t of this.x7)yield*t.AX();yield this}*GX(){let t=this.IX();for(;t;)yield t,t=t.IX()}*l9(){yield this,yield*this.GX()}H9(t){for(const s of this.GX())if(s===t)return!0;return!1}q9(t){return this===t||this._8===t._8&&this.P8===t.P8&&this.N8===t.N8&&this.L8===t.L8&&this.B8===t.B8&&this.KY()===t.KY()&&this.QY()===t.QY()}J9(){return{parallaxX:this.ZX(),parallaxY:this.sK(),scale:this.jX(),scaleRate:this.JX(),angle:this.YX(),hasOwnScroll:this.c9(),scrollX:this.KY(),scrollY:this.QY()}}Y9(t){this.M9(t.parallaxX,t.parallaxY),this.zX(t.scale),this.qX(t.scaleRate),this.JY(t.angle),this.fK(t.hasOwnScroll),this.XY(t.scrollX),this.ZY(t.scrollY),this.g9()}X9(t){0!==t.size&&Oy.Rh(this.V6,t)>0&&(this.U7(),this.zH())}zH(t){this.e7=!1,this.m7=!1,t&&!t.yY().tY().EJ()||(this.i7=!1)}K9(){if(!this.e7){if(this.V6.sort(Ey),this.b7())for(let t=0,s=this.V6.length;t<s;++t){const s=this.V6[t].kH();s.z7(t),this.d7.h8(s.Z9())}else for(let t=0,s=this.V6.length;t<s;++t)this.V6[t].kH().z7(t);this.e7=!0}}Q9(){if(this.i7)return;const t=this.S8.ttt(this.N2()).map(t=>[...t.AX()]).flat();let s=0;for(const e of t){for(const t of e.VH())t.yY().tY().EJ()&&t.kH().stt(s++);e.ett()}}ett(){this.i7=!0}itt(){return{isVisible:this.DX(),opacity:this.FO(),isInteractive:this.kX()}}ntt(t,s,e){const i=t.kH(),r=s.kH();if(i.BH()!==this||r.BH()!==this)throw new Error("can't arrange Z order unless both objects on this layer");const n=i.$H();let h=r.$H();return n!==h+(e?1:-1)&&(Oy.Ih(this.V6,n),n<h&&h--,e&&h++,h===this.V6.length?this.V6.push(t):this.V6.splice(h,0,t),this.zH(t),!0)}htt(t,s){const e=[];let i=0,r=0,n=t.length,h=s.length;for(;i<n&&r<h;){const n=t[i],h=s[r];n.kH().N6()<h.kH().N6()?(e.push(n),++i):(e.push(h),++r)}for(;i<n;++i)e.push(t[i]);for(;r<h;++r)e.push(s[r]);return e}ott(t){const s=[],e=t.length;for(let i=0;i<e-1;i+=2){const e=t[i],r=t[i+1];s.push(this.htt(e,r))}return e%2==1&&s.push(t[e-1]),s}att(t){for(;t.length>1;)t=this.ott(t);return t[0]}ltt(){return this.K9(),Oy.bh(ky),this.d7.n8(this.pK(),ky),ky.length?1===ky.length?ky[0]:this.att(ky):[]}j9(){return this.DX()&&this.FO()>0&&this.utt()}utt(){if(this.I9()||!this.hK()||this.w7.Tf("beforedraw")||this.w7.Tf("afterdraw"))return!0;for(const t of this.x7)if(t.utt())return!0;return!1}ctt(){return this.lK()||!this.n9()||0!==this.uK()||this.n7.ftt()}dtt(){if(this.ctt())return!0;for(const t of this.x7)if(t.dtt())return!0;return!1}vF(){return this.k8}b9(t){if(this.S8.TX())return 1;{const s=this.ptt();return s/(s-t)}}mtt(t){const s=this.Bc.TK();if(this.S8.TX())return s;{const e=this.ptt();return this.Qw()/Math.abs(e-t)*s}}u9(){this.J8=!0,this.X8=!0,this.H8=!0}gtt(t){return this.J8&&(this.ytt(t,this.lW,0,0,null),this.J8=!1),this.lW}x9(t){return this.Qw(t)/this.Stt()}ptt(){return this.F9()?this.yH().A9()[2]:this.x9()}wtt(){if(this.F9()){const t=this.yH().A9();return[t[0],t[1],t[2]]}return this.vtt()}vtt(t=0,s=0,e=0){const i=this.Bc,r=this.yH(),n=i.btt(),h=i.xtt();let o=(this.KY()-n)*this._8+n,a=(this.QY()-h)*this.P8+h;i.oH()&&(o=Math.round(o),a=Math.round(a));let l=o+t,u=a+s;const c=r.TX()?this.Qw(e):this.x9(e),[f,d]=this.w9();if(.5!==f||.5!==d){const t=this.Qw(e)/c;let s=(f-.5)*i.C9()/t,r=(d-.5)*i.T9()/t;const n=this.YY();0!==n&&(Xy.set(s,r),Xy.rotate(n),s=Xy.Fa(),r=Xy.La()),l+=s,u+=r}return[l,u,c]}ytt(t,s,e,i,r){const n=this.Bc,h=this.yH();if(this.F9()){Uy.S(qy,h.A9()),Uy.S(Jy,h.Ctt()),Uy.S(Yy,h.Ttt());const t=n.btt(),s=n.xtt(),e=Jy[0]-qy[0],i=Jy[1]-qy[1],r=Jy[2]-qy[2];qy[0]=(qy[0]-t)*this._8+t,qy[1]=(qy[1]-s)*this.P8+s,qy[2]*=Math.max(this._8,this.P8),Jy[0]=qy[0]+e,Jy[1]=qy[1]+i,Jy[2]=qy[2]+r}else{const[t,s,n]=this.vtt(e,i,r);Uy.set(qy,t,s,n),Uy.set(Jy,t,s,n-100);const h=this.YY();0===h?Uy.set(Yy,0,1,0):Uy.set(Yy,Math.sin(h),Math.cos(h),0)}t.gv(s,qy,Jy,Yy,r||n.T9())}Mtt(){this.q8=!0,this.X8=!0,this.H8=!0}Itt(t){return this.q8&&(this.Gtt(t),this.q8=!1),this.mM}Gtt(t){const s=this.Bc._H(),[e,i]=this.w9();if(this.S8.TX())t.mv(this.mM,s._tt(),s.Ptt());else if(.5===e&&.5===i)Wy.S(this.mM,s.Rtt());else{const r=s._tt(),n=s.Ptt();t.dv(this.mM,r/n,e,i)}}W4(t,s=!0,e=0,i=0,r=0){s&&t.CO(this.Itt(t));let n=null;0===e&&0===i&&0===r?n=this.gtt(t):(this.ytt(t,zy,e,i,r),n=zy),t.PO(n)}Att(t){this.W4(t),t.Yv(this.pC())}Ett(t){let s=null;if(t.Yb()&&this.Bc.Ott()){const e=this.Bc._H().Ftt(this);e&&(s=e.rE(),t.DF(s))}return s}Dtt(t){if(t.pv()&&this.Bc.Ott()){const s=2*(this.Mz()+1);t.xN(s,s+1)}}Ltt(t,s){if(this.w7.Tf(s)){t.xv(),t.BO(null),t.WO(),t.Lb(),t.DO(1,1,1,1),t.Yv(this.pC()),t.Kv(0);const e=new Oy.Event(s);e.t_=this.Bc._H().GH(),this.e6(e)}}nT(t,s,e){const i=this.Bc._H(),r=this.ctt();let n=null;const h=this.Ett(t);if(this.Dtt(t),r){const s={yT:this.Bc.PU(),iM:!0,sU:!!t.pv()&&this.Bc.ktt()};"low"===i.Ntt()&&(s.width=i._tt(),s.height=i.Ptt()),n=this.Bc.Btt(s),this.k8=n,t.IF(n),this.hK()&&t.dF(0,0,0,0)}else this.k8=s,t.IF(s);if(this.hK()||t.Ru(this.I8),this.S8.$tt(t,this.k8,this.x7,r&&this.hK()),this.Dtt(t),this.W4(t),t.Yv(this.pC()),t.gF(this._9()),this.Ltt(t,"beforedraw"),this.Stt()>Number.EPSILON){this.K9();const s=this.b7()&&0===this.pC()&&!this.r7;this.F9()?this.Utt(t):s?this.Vtt(t):this.Wtt(t,this.G9())}this.Ltt(t,"afterdraw"),t.Yv(0),t.Kv(0),r&&(t.gF(!1),this.ztt(t,n,s,e)),h&&t.kF(h),this.k8=null}Wtt(t,s){const e=this.pK(),i=this.k8,r=this.yH().TX(),n=this.yH().jtt();let h=null;for(let o=0,a=s.length;o<a;++o){const a=s[o];if(a===h)continue;h=a;const l=a.kH();l.DX()&&l.Htt(e,n,r)&&this.qtt(a,l,t,i)}}Utt(t){const s=this.k8,e=this.Jtt(),i=Zy,r=Qy,n=this.G9();for(let h=0,o=n.length;h<o;){const a=n[h],l=a.kH();if(!l.DX()||!l.Ytt(e)){++h;continue}(!a.Xtt()||l.Ktt()>0)&&r.push(a);const u=a.kH().KZ();i.push(a);let c=h+1;for(;c<o;++c){const t=n[c],s=t.kH();if(s.DX()&&s.Ytt(e)){if(s.KZ()!==u)break;t.Xtt()?(s.Ktt()>0&&r.push(t),i.push(t)):r.push(t)}}if(1!==i.length||i[0].Ztt()){this.Qtt(t,i);for(let e=0,i=r.length;e<i;++e){const i=r[e],n=i.kH();n.tst(!0),this.qtt(i,n,t,s),n.tst(!1)}}else{this.qtt(a,l,t,s);for(let e=0,i=r.length;e<i;++e){const i=r[e];if(i===a)continue;const n=i.kH();n.BH().qtt(i,n,t,s)}}h=c,Oy.bh(i),Oy.bh(r)}}Qtt(t,s){const e=this.k8;t.AF();for(let e=0,i=s.length;e<i;++e){const i=s[e],r=i.kH();r.sst(!0),this.est(i,r,t)}t.EF();for(let i=0,r=s.length;i<r;++i){const r=s[i],n=r.kH();this.qtt(r,n,t,e),n.sst(!1)}t.FF()}Vtt(t){const s=this.d7,e=this.y7,i=this.g7,r=this.pK();let n;e.set(s.e8(r.Qa()),s.i8(r.tl()),s.e8(r.sl()),s.i8(r.el())),this.m7&&e.equals(i)?n=this.p7:(n=this.ltt(),this.m7=!0,i.S(e)),this.Wtt(t,n),n!==this.p7&&Oy.Mh(this.p7,n)}qtt(t,s,e,i){s.ftt()?this.ist(t,s,e,i):this.est(t,s,e)}est(t,s,e){const i=s.rst();e.kv()!==i&&i.Kx(),t.nT(e)}ist(t,s,e,i){this.nst(t,s,e,i,null)&&this.W4(e)}nst(t,s,e,i,r){const n=s.LZ().Tz();return n.bW(e,i,{xW:t,MW:s.uK(),devicePixelRatio:this.Bc.hst(),time:t.ost(),_B:this.Bc.ast()*this.Stt(),PB:this.YY(),GB:s.tQ(),JW:n.cz()?null:this.lst(s),RW:r&&r.RW,AW:r&&r.AW,EW:r&&r.EW,OW:r&&r.OW,FW:r&&r.FW,DW:r&&r.DW}),e.Yv(this.pC()),n.AO()}ztt(t,s,e,i){const r=this.n7.h9(),n=this.Bc;0===r.length?(t.IF(e),t.xv(),i&&0===this.Hx&&this.n9()?t.GF(s):(t.Zx(this.Hx),t.Qx(this.A8),t._F(s)),t.PF(s),n.l7(s)):this.Tz().bW(t,e,{xW:this,MW:this.uK(),devicePixelRatio:n.hst(),_B:n.ast()*this.Stt(),PB:this.YY(),GB:this.pK(),JW:null,uV:!0})}jX(){return this.N8}zX(t){this.N8!==t&&(this.N8=t,this.S8.ust(),this.u9(),this.Bc.jH())}TK(){return this.Stt()*this.Bc.TK()}H2(){return this.Stt()*this.Bc.H2()}Stt(){return(this.N8*this.S8.qY()-1)*this.L8+1}g9(){if(!this.H8)return;this.H8=!1;const t=this.Bc.btt(),s=this.Bc.xtt(),e=(this.KY()-t)*this._8+t,i=(this.QY()-s)*this.P8+s,r=this.Stt(),n=this.Bc.C9()/r,h=this.Bc.T9()/r;let o=e-n/2,a=i-h/2;this.Bc.oH()&&(o=Math.round(o),a=Math.round(a));const l=this.z8;l.set(o,a,o+n,a+h);const u=this.YY();0!==u&&(Dy.S(l),Dy.offset(-l.ol(),-l.al()),Ly.Kl(Dy,u),Ly.Ql(Dy),Dy.offset(l.ol(),l.al()),l.S(Dy));const c=this.Jx;this.v9(c,this.yE),this.F9()?this.cst(c,this.j8):this.j8.S(this.yE)}cst(t,s){const e=this.Bc._H(),i=e.fJ(),r=e.pJ(),[n,h]=this.gK(0,0,t),[o,a]=this.gK(i,0,t),[l,u]=this.gK(i,r,t),[c,f]=this.gK(0,r,t);let d=Math.min(n,o,l,c),p=Math.min(h,a,u,f),m=Math.max(n,o,l,c),g=Math.max(h,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}gK(t,s,e=0){return this.fst(t,s,e,this.H2())}vK(t,s,e=0){return this.fst(t,s,e,this.TK()*this.wJ())}fst(t,s,e,i){const r=this.Bc,n=r.Rx(),h=this.Stt(),o=r.C9()/h,a=r.T9()/h,l=Hy;Vy.set(l,0,0,o,a),t/=i,s=l[3]-s/i;const u=this.Itt(n),c=this.gtt(n),f=jy;return Oy.JS.KS(t,s,e,c,u,l,f)?[f[0],f[1]]:[NaN,NaN]}dst(t,s){const e=this.N8,i=this.L8,r=this._8,n=this.P8,h=this.B8,o=this.F9();o&&this.yH().pst(!1),this.N8=1,this.L8=1,this._8=1,this.P8=1,this.B8=0,this.u9();const a=this.gK(t,s);return this.N8=e,this.L8=i,this._8=r,this.P8=n,this.B8=h,this.u9(),o&&this.yH().pst(!0),a}SK(t,s,e=0){return this.mst(t,s,e,this.H2())}xK(t,s,e=0){return this.mst(t,s,e,this.TK()*this.wJ())}mst(t,s,e,i){const r=this.Bc,n=r.Rx(),h=this.Stt(),o=r.C9()/h,a=r.T9()/h,l=Hy;Vy.set(l,0,0,o,a);const u=this.Itt(n),c=this.gtt(n),f=jy;return Oy.JS.YS(t,s,e,c,u,l,f)?[f[0]*i,(l[3]-f[1])*i]:[NaN,NaN]}gst(t,s){return t*=this.TK()*this.wJ(),0!==s&&(t*=this.b9(s)),t}lst(t){const s=t.tQ(),e=t.KZ(),i=t.Ktt(),r=e+i,n=s.Qa(),h=s.tl(),o=s.sl(),a=s.el();if(this.F9()){if(this.yst(n,h,e)||this.yst(o,h,e)||this.yst(o,a,e)||this.yst(n,a,e))return null;if(i>0&&(this.yst(n,h,r)||this.yst(o,h,r)||this.yst(o,a,r)||this.yst(n,a,r)))return null}else if(r>=this.x9())return null;let[l,u]=this.xK(n,h,e),[c,f]=this.xK(o,a,e);if(0!==this.YY()||i>0||this.F9()){const[t,s]=this.xK(o,h,e),[d,p]=this.xK(n,a,e);if(i>0){const[e,i]=this.xK(n,h,r),[m,g]=this.xK(o,h,r),[y,S]=this.xK(o,a,r),[w,v]=this.xK(n,a,r);let b=Math.min(l,c,t,d,e,m,y,w);c=Math.max(l,c,t,d,e,m,y,w),l=b,b=Math.min(u,f,s,p,i,g,S,v),f=Math.max(u,f,s,p,i,g,S,v),u=b}else{let e=Math.min(l,c,t,d);c=Math.max(l,c,t,d),l=e,e=Math.min(u,f,s,p),f=Math.max(u,f,s,p),u=e}}return Dy.set(l,u,c,f),Dy}Jtt(){return this.X8&&(this.Sst(),this.X8=!1),this.Y8}Sst(){const t=this.Bc.Rx(),s=this.Itt(t),e=this.gtt(t);this.Y8.hw(e,s)}yst(t,s,e){return this.Jtt().aw(t,s,e)}wst(){return{d:this.e9(),s:this.jX(),a:this.YX(),v:this.EX(),i:this.kX(),html:this.$X(),bc:this.I8.toJSON(),t:this.hK(),sx:this.U8,sy:this.V8,hosp:this.W8,px:this.ZX(),py:this.sK(),c:this.qx.toJSON(),sr:this.JX(),fx:this.n7.xC(),cg:this.t7}}vst(t){this.C8=!!t.d,this.N8=t.s,this.B8=t.a,this.T8=!!t.v,this.M8=!t.hasOwnProperty("i")||t.i,this.v8=!!t.html,this.I8.wa(t.bc),this.G8=!!t.t,t.hasOwnProperty("sx")&&(this.U8=t.sx),t.hasOwnProperty("sy")&&(this.V8=t.sy),t.hasOwnProperty("hosp")&&(this.W8=!!t.hosp),this._8=t.px,this.P8=t.py,this.qx.wa(t.c),this.v7(),this.L8=t.sr,Oy.Mh(this.t7,t.cg),Oy.Mh(this.Q8,this.K8);const s=new Set(this.t7);let e=0;for(let t=0,i=this.Q8.length;t<i;++t)s.has(this.Q8[t][2])||(this.Q8[e]=this.Q8[t],++e);Oy.wh(this.Q8,e),this.n7.CC(t.fx),this.c7=!0}bst(){this.W7(!1),this.zH(),this.u9(),this.Mtt()}rX(){return this.S7}ij(){return this.w7}e6(t){t.kZ=this.rX(),this.w7.dispatchEvent(t)}_Y(t,s=!1,e=!1){if(this.V6.includes(t))return s&&this.V6.sort((t,s)=>(t.kH().xst()??0)-(s.kH().xst()??0)),void(e&&this.V6.forEach((t,s)=>t.kH().z7(s)));if(t.Cst()){const s=[...t._Q()];s.push(t),s.sort((t,s)=>(t.kH().xst()??0)-(s.kH().xst()??0));for(const t of s)if(t.DK())for(const e of t.LK()){if(s.includes(e))continue;const t=[...e._Q()];t.push(e),t.sort((t,s)=>(t.kH().xst()??0)-(s.kH().xst()??0)),t&&t.length&&s.splice(s.length,0,...t)}for(const t of s)t.tY().RJ()&&this.D7(t,!0);e&&this.V6.forEach((t,s)=>t.kH().z7(s))}else{if(t.tY().RJ()&&this.D7(t,!0),!t.DK())return void(e&&this.V6.forEach((t,s)=>t.kH().z7(s)));for(const s of t.LK()){const t=[...s._Q()];if(t.push(s),t.sort((t,s)=>(t.kH().xst()??0)-(s.kH().xst()??0)),t&&t.length)for(const s of t)s.tY().RJ()&&this.D7(s,!0)}e&&this.V6.forEach((t,s)=>t.kH().z7(s))}}}}{let rS=function(t,s,e,i){return t[0]===Math.fround(s)&&t[1]===Math.fround(e)&&t[2]===Math.fround(i)},nS=function(t,s){wS!==t&&(t.Att(s),wS=t)};vec3EqualsXYZ=rS,MaybePrepareLayerDraw=nS;const hS=self.Gs,oS=self.SZ,aS=self.assert,lS=hS.Hr(hS.Rect),uS=hS.Hr(hS.Rect),cS=hS.Hr(hS.Rect),fS=hS.Hr(hS.To),dS=self.ls,pS=dS.Ss,mS=[],gS=[],yS=[],SS=[];let wS=null;hS.Tst=class extends hS.zr{constructor(t,s,e){super(),this.Mst=t,this.Bc=t.Sq(),this.Xr=e[0],this.Ist=e[1],this.Gst=e[2],this.Vy=e[1],this.Wy=e[2],this._st=!!e[3],this.Pst=!!e[4],this.Rst=e[5],this.Ast=e[6],this.Est=e[7],this.Ost=null,this.x8=e[8],this.US=s,this.U8=0,this.V8=0,this.N8=1,this.B8=0,this.Fst=new Set,this.Dst=new Set,this.Lst=new Set,this.kst=[],this.Nst=[],this.Bst=new Map,this.$st=new Map,this.Ust=[],this.Vst=!1,this.Wst=pS.create(),this.zst=pS.create(),this.jst=pS.create(),this.Hst=[],this.qst=[],this.Jst=new Map,this.Yst=new Map,this.Xst=-1;const i=this.Bc._H();this.n7=hS.Hr(hS.h7,this,e[11]),this.bz=hS.Hr(hS.JS.SV,i.o7(),{oV:(t,s)=>{const e=s.dz().vF();t.kO(),t._F(e),t.PF(e),i.l7(e)},lV:t=>this.VY().u7(t)}),this.c7=!0,this.Kst=!1,this.k8=null,this.Zst={},this.Qst=new Map,this.tet=!0,this.eet=new self.UY(this),this.w7=hS.Hr(hS.Event.wf);for(const t of e[9])this.Hst.push(hS.y8.C7(this,null,t));this.iet();for(const t of this.oX())t.T7();for(const t of e[10]){const s=this.Bc.M7(t[1]);if(!s)throw new Error("missing nonworld object class");s.G7()||s._7(t),this.Ust.push(t),this.I7(s)}}qr(){for(const t of this.qst)t.qr();hS.bh(this.qst),this.Lst.clear(),this.Ost=null,this.Mst=null,this.Bc=null}Sq(){return this.Bc}Rc(){return this.Xr}s9(){return this.x8}Mz(){return this.US}VY(){return this.n7}Tz(){return this.r9(),this.bz}r9(){const t="low"===this.Bc._H().Ntt();if(!this.c7&&this.Kst===t&&!this.bz.uW())return;const s=this.VY().h9();this.bz.cW(s.map(t=>t.QI()),{cV:s.map(t=>t.Mz()),dV:t,yV:!0}),this.c7=!1,this.Kst=t}F0(){this.VY().F0(),this.c7=!0}ret(){let t=this.qst[0].Stt();for(let s=1,e=this.qst.length;s<e;++s){const e=this.qst[s];0===e.ZX()&&0===e.sK()||(t=Math.min(t,e.Stt()))}return t}net(){return.5*this.Bc.C9()/this.ret()}het(){return.5*this.Bc.T9()/this.ret()}f9(){return this.eX()?-1/0:this.net()}d9(){return this.eX()?1/0:this.Cy()-this.net()}p9(){return this.eX()?-1/0:this.het()}m9(){return this.eX()?1/0:this.My()-this.het()}XY(t){const s=this.f9(),e=this.d9();t>e&&(t=e),t<s&&(t=s),this.U8!==t&&(this.U8=t,this.oet(),this.Bc.jH())}KY(){return this.U8}ZY(t){const s=this.p9(),e=this.m9();t>e&&(t=e),t<s&&(t=s),this.V8!==t&&(this.V8=t,this.oet(),this.Bc.jH())}QY(){return this.V8}eX(){return this._st}ust(){this.XY(this.KY()),this.ZY(this.QY());for(const t of this.qst)t.c9()&&(t.XY(t.KY()),t.ZY(t.QY()))}wX(t,s){this.Rst===t&&this.Ast===s||(this.Rst=t,this.Ast=s,this.aet()&&(this.let(),this.oet(),this.Bc.jH()))}uet(){return this.TX()?.5:this.Rst}cet(){return this.TX()?.5:this.Ast}bX(){return[this.uet(),this.cet()]}jtt(){const t=this.uet(),s=this.cet();return t<0||t>1||s<0||s>1}xX(){this.Pst&&(this.Pst=!1,this.let(),this.oet(),this.Bc.jH())}CX(){this.Pst||(this.Pst=!0,this.let(),this.oet(),this.Bc.jH())}TX(){return this.Pst}aet(){return!this.TX()}pst(t){t=!!t,this.Vst!==t&&(this.Vst=t,this.oet(),this.Bc.jH())}D9(){return this.Vst}fet(t,s,e,i,r,n,h,o,a){rS(this.Wst,t,s,e)&&rS(this.zst,i,r,n)&&rS(this.jst,h,o,a)||(pS.set(this.Wst,t,s,e),pS.set(this.zst,i,r,n),pS.set(this.jst,h,o,a),this.det())}det(){this.oet(),this.Bc.jH()}A9(){return this.Wst}Ctt(){return this.zst}Ttt(){return this.jst}qY(){return this.N8}HY(t){this.N8!==t&&(this.N8=t,this.oet(),this.ust(),this.Bc.jH())}JY(t){t=hS.Qr(t),this.B8!==t&&(this.B8=t,this.oet(),this.Bc.jH())}YY(){return this.B8}Cy(){return this.Vy}hy(t){!isFinite(t)||t<1||(this.Vy=t)}My(){return this.Wy}oy(t){!isFinite(t)||t<1||(this.Wy=t)}pet(){return this.Ost}t9(){return this.Hst}*oX(){for(const t of this.Hst)yield*t.AX()}hX(){return this.qst}met(){return this.qst.length}BH(t){return"number"==typeof t?this.UH(t):this.Y7(t.toString())}UH(t){return t=hS.Zr(Math.floor(t),0,this.qst.length-1),this.qst[t]}Y7(t){return this.Jst.get(t.toLowerCase())||null}yet(t){return!!this.Y7(t)}wet(t){return this.Yst.get(t)||null}let(){for(const t of this.qst)t.Mtt()}oet(){for(const t of this.qst)t.u9()}cX(t,s,e){if(this.yet(t))throw new Error(`layer name '${t}' already in use`);if(!s&&e<2)throw new Error("invalid insert position");const i=e>=2?s:s.IX(),r=hS.Hr(hS.y8,this,i,{name:t,o8:Math.floor(1e15*Math.random()),a8:!0});this.vet(r,s,e),this.Sq().jH(),this.Z7()}dX(t,s,e){if(!s&&e<2)throw new Error("invalid insert position");t===s&&e<2||(this.bet(t),this.vet(t,s,e),this.Sq().jH(),this.Z7())}mX(t){if(this.bet(t)){const s=this.Bc.oj();s.PY(!0),t.qr(),s.PY(!1),this.Sq().jH(),this.Z7()}}yX(){const t=new Set;for(const s of this.oX())s.e9()&&!s.i9()&&t.add(s);if(0===t.size)return;const s=this.Bc.oj();s.PY(!0);for(const s of t)this.bet(s),s.qr();s.PY(!1),this.Sq().jH(),this.Z7()}vet(t,s,e){if(e>=2)if(s){if(s===t||s.H9(t))throw new Error(`cannot move layer '${t.Rc()}' to sub-layer of itself`);s.U9(t,2===e),t.N9(s)}else 2===e?this.Hst.push(t):this.Hst.unshift(t),t.N9(null);else{const i=s.IX();if(i){if(s.H9(t))throw new Error(`cannot move layer '${t.Rc()}' to sub-layer of itself`);i.V9(t,s,0===e),t.N9(i)}else{let i=this.Hst.indexOf(s);if(-1===i)throw new Error("cannot find layer to insert by");0===e&&++i,this.Hst.splice(i,0,t),t.N9(null)}}}bet(t){const s=t.IX();if(s)return s.W9(t),!0;if(this.Hst.length>1){const s=this.Hst.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");return this.Hst.splice(s,1),!0}return!1}iet(){this.qst=[...this.oX()],this.Jst.clear(),this.Yst.clear();for(let t=0,s=this.qst.length;t<s;++t){const s=this.qst[t];s.X7(t),this.Jst.set(s.Rc().toLowerCase(),s),this.Yst.set(s.s9(),s)}}xet(){let t=0;for(const s of this.Hst){for(const e of s.AX())e.K7(t);s.$X()&&t++}}Cet(){return this.Hst.at(-1).N2()+1}async Z7(){this.iet(),this.xet(),this.Xst=this.Cet()}Tet(){return this.Xst}Met(){this.Xst=-1}ttt(t){const s=[];for(const e of this.Hst){const i=e.N2();if(i===t)s.push(e);else if(i>t)break}return s}J9(){return{scrollX:this.KY(),scrollY:this.QY(),scale:this.qY(),angle:this.YY(),vpX:this.uet(),vpY:this.cet()}}Y9(t){this.XY(t.scrollX),this.ZY(t.scrollY),this.HY(t.scale),this.JY(t.angle),this.wX(t.vpX,t.vpY)}Iet(){let t=this.Hst.filter(t=>t.j9())[0];for(;t;){if(!t.hK())return fS.ko(t.cK()),fS.Lo(1),fS;if(t.ctt())return fS.Po(0,0,0,0),fS;t=t.PX().filter(t=>t.j9())[0]}return fS.Po(0,0,0,0),fS}E7(){return this.tet}Get(){return[...this.Fst]}I7(t){if(t.DK())for(const s of t.Pet()._et())this.Fst.add(s);else this.Fst.add(t)}Ret(){return[...this.Dst]}Aet(t,s){if(t===this||!s)return Promise.resolve();t&&(hS.mo(this.Dst,t.Dst),t.Dst.clear());const e=[];for(const t of this.Fst)this.Dst.has(t)||(e.push(t.Eet(s)),this.Dst.add(t));return Promise.all(e)}async Oet(t){if(t.mY())throw new Error("cannot load textures for family");const s=this.Bc.Rx();if(!s||s.RA()||this.Dst.has(t))return;this.Dst.add(t);const e=t.Eet(s);this.Fet(e),await e,t.Det(),this.Bc.jH()}Fet(t){this.Lst.add(t),t.then(()=>this.Lst.delete(t)).catch(()=>this.Lst.delete(t))}Let(){return Promise.all([...this.Lst])}ket(t){if(t.mY()||t.MY()>0)throw new Error("cannot unload textures");const s=this.Bc.Rx();s&&this.Dst.has(t)&&(this.Dst.delete(t),t.Net(s))}Bet(t,s){if(t!==this&&s)for(const s of this.Dst)s.g8()||t.Fst.has(s)||(s.Net(),this.Dst.delete(s))}$et(){this.Dst.clear()}async Uet(t){const s=this.Bc,e=this.Mst,i=s.oj();this.Est&&(this.Ost=i.Vet(this.Est),this.Ost.Wet()),e.zet(this),this.Vy=this.Ist,this.Wy=this.Gst,this.U8=s.Xz()/2,this.V8=s.Zz()/2,this.ust(),this.let(),this.oet(),this.xet(),await this.Bc._H().jet(this.Cet(),!0),this.Het(t),this.Bc.qet(!0),this.Jet(),this.tet||this.Yet(),this.Xet(this.kst),this.Xet(this.Nst),this.Ket(),e.Zet(),s.KH(),this.Bc.qet(!1);const r=this.Bc.Qet();if(await Promise.all(r),hS.bh(r),!s.tit()){for(const t of this.kst)t.sit();for(const t of this.Nst)t.eit(this.Bst,this.$st);for(const[t,s]of Object.entries(this.Zst)){const e=this.Bc.R3(parseInt(t,10));e&&!e.mY()&&e.O7()&&hS.bh(s)}for(const t of this.kst)t.iit();for(const t of this.Nst)t.iit();for(const t of this.kst)t.OQ()||t.rit();for(const t of this.Nst)t.OQ()||t.rit()}hS.bh(this.kst),hS.bh(this.Nst),this.Bst.clear(),this.$st.clear(),await Promise.all([...this.Fst].map(t=>t.nit(this.Bc.Rx()))),t&&(s.wf().dispatchEvent(new hS.Event("beforefirstlayoutstart")),await s.hit(new hS.Event("beforeprojectstart"))),await this.oit(new hS.Event("beforeanylayoutstart")),s.wf().dispatchEvent(new hS.Event("beforelayoutstart")),await this.hit(new hS.Event("beforelayoutstart")),s.tit()||await s.hq(hS.uq.lq.aq.ait,null,null),s.wf().dispatchEvent(new hS.Event("afterlayoutstart")),await this.hit(new hS.Event("afterlayoutstart")),await this.oit(new hS.Event("afteranylayoutstart")),t&&(s.wf().dispatchEvent(new hS.Event("afterfirstlayoutstart")),await s.hit(new hS.Event("afterprojectstart"))),i.lit(e),await this.Let(),this.tet=!1}Het(t){for(const t of this.Bc.J7())if(!t.mY()&&t.RJ())for(const s of t.cY()){const t=s.kH(),e=t.BH(),i=e.Rc(),r=this.Y7(i);if(r)t.WH(r,!0),r.L7(s);else{const i=hS.Zr(e.Mz(),0,this.qst.length-1),r=this.qst[i];t.WH(r,!0),r.L7(s)}}if(!t)for(const t of this.qst)t.W7(!1)}Jet(){for(const t of this.qst)t.A7(this.kst),t.j7()}Yet(){let t=!1;for(const[s,e]of Object.entries(this.Zst)){const i=this.Bc.R3(parseInt(s,10));if(i&&!i.mY()&&i.O7())for(const s of e){let e=null;if(i.RJ()&&(e=s.hasOwnProperty("instJson")?this.wet(s.instJson.w.l):this.wet(s.w.l),!e))continue;const r=this.Bc.F7(i,e,!1,0,0,!0);s.hasOwnProperty("instJson")?r.CC(s.instJson):r.CC(s),t=!0,this.Nst.push(r),s.hasOwnProperty("instJson")&&(this.Bst.set(r,s),this.$st.set(s.index,r))}}for(const t of this.qst)t.W7(!0),t.zH();t&&(this.Bc.KH(),this.Bc.uit())}Xet(t){for(const s of t){if(!s.DK())continue;const e=s.kH(),i=s.BK();for(const r of s.yY().Pet().BY()){if(r===s.yY())continue;const n=r.cY();if(n.length>i)s.cit(n[i]);else{let i;i=e?this.Bc.F7(r,e.BH(),!0,e.lC(),e.fC(),!0):this.Bc.F7(r,null,!0,0,0,!0),this.Bc.KH(),r.fit(),s.cit(i),t.push(i)}}}}Ket(){for(const t of this.Ust)this.Bc.M7(t[1]).DK()||this.Bc.F7(t,null,!0)}dit(){const t=[],s=this.Ust;let e=0;for(let i=0,r=s.length;i<r;++i){const r=s[i],n=this.Bc.M7(r[1]);n.g8()?n.DK()&&n.Pet().pit()||t.push(this.Bc.F7(r,null,!0)):(s[e]=r,++e)}hS.wh(s,e),this.Bc.KH(),this.Xet(t)}q7(t,s,e,i,r,n,h){if(e)return e.q7(t,s,r,n,i,h);{const e=[];for(const o of this.qst)e.push(o.q7(t,s,r,n,i,h));return e.flat()}}async mit(){const t=this.Mst;this.Bc.tit()||(await this.oit(new hS.Event("beforeanylayoutend")),await this.hit(new hS.Event("beforelayoutend")),await this.Bc.hq(hS.uq.lq.aq.git,null,null),await this.hit(new hS.Event("afterlayoutend")),await this.oit(new hS.Event("afteranylayoutend"))),t.yit(!0),this.Bc.oj().Sit(),this.tet||this.wit();for(const t of this.qst)t.H7();for(const t of this.Bc.J7())if(!(t.g8()||t.RJ()||t.tY()._J()||t.mY())){for(const s of t.cY())this.Bc.qH(s);this.Bc.KH()}t.yit(!1),t.dH()===this&&t.zet(null)}vit(t,s){const e=t.yY().s9().toString();this.Zst.hasOwnProperty(e)||(this.Zst[e]=[]);const i=this.Zst[e],r={index:s,instJson:t.xC(),sceneGraphJson:{children:[]}};i.push(r),this.Qst.set(t,r)}bit(t){const s=this.Qst.get(t);for(const e of t.xit()){const t=this.Qst.get(e);t&&s.sceneGraphJson.children.push({index:t.index,flags:hS.Tit.Cit(e.kH())})}}wit(){this.Qst.clear();let t=0;for(const s of this.qst){s.K9();for(const e of s.VH()){const s=e.yY();!s.g8()&&s.O7()&&(this.vit(e,t),t++)}}for(const t of this.qst)for(const s of t.VH()){const t=s.yY();!t.g8()&&t.O7()&&this.bit(s)}this.Qst.clear()}Mit(){this.Zst={},this.tet=!0}vF(){return this.k8}ctt(){const t=this.Bc,s=t.Rx().Yb();return"low"===t._H().Ntt()||s&&t.ktt()||this.n7.ftt()||s&&t.O9()}Iit(t){const s=this.Bc._H();if(this.ctt()){t.IF(null),t.dF(0,0,0,0);const e={yT:this.Bc.PU(),iM:t.pv()||this.Bc.ktt()||this.n7.ftt(),sU:!!t.pv()&&this.Bc.ktt()};"low"===s.Ntt()&&(e.width=s._tt(),e.height=s.Ptt()),this.k8=this.Bc.Btt(e)}else this.k8=null}Git(t){this.Bc._it(t)&&(t.gF(!1),t.IF(null),t.xv(),t.GF(this.k8))}Pit(t){this.ctt()&&(t.gF(!1),this.Rit(t,this.k8))}Ait(t){t.IF(this.k8),t.Ru(this.Iet()),this.Bc.O9()&&t.mF();const s=this.ttt(0);this.$tt(t,this.k8,s,!0),t.pv()&&t.xN(0,1),this.Pit(t),this.k8=null}Eit(t,s){let e=null;this.Bc._it(t)&&(e=this.k8),t.IF(e),t.dF(0,0,0,0),this.Bc.O9()&&t.mF();const i=this.ttt(s);this.$tt(t,e,i,!0),this.Git(t),t.Vb(),this.Bc._H().Oit(s)}$tt(t,s,e,i){const r=e.filter(t=>t.j9());for(let e=0,n=r.length;e<n;){const h=r[e];if(h.L9()&&!h.dtt()){mS.push(h);for(let t=e+1;t<n;++t){const s=r[t];if(!s.L9()||s.dtt())break;mS.push(r[t])}if(mS.length>=2||1===mS.length&&mS[0].z9()){this.Fit(t,s,mS),e+=mS.length,hS.bh(mS);continue}hS.bh(mS)}h.nT(t,s,i&&0===e),++e}}Rit(t,s){const e=this.n7.h9(),i=this.Bc;0===e.length?(t.IF(null),t.xv(),t.GF(s),t.PF(s),i.l7(s)):(cS.set(0,0,i.C9(),i.T9()),this.Tz().bW(t,null,{xW:this,MW:3,devicePixelRatio:this.Bc.hst(),_B:this.Bc.ast()*this.qY(),PB:this.YY(),GB:cS,JW:null,uV:!0}))}Fit(t,s,e){const i=e[0],r=i.Ett(t);i.Dtt(t),e[0].hK()||(fS.ko(e[0].cK()),fS.Lo(1),t.Ru(fS)),t.gF(!0);const n=gS,h=yS,o=SS;for(const s of e)s.K9(),s.R9(n),s.Ltt(t,"beforedraw");for(let e=0,i=n.length;e<i;){const r=n[e],a=r.kH(),l=a.BH();if(!a.DX()||!a.Ytt(l.Jtt())){++e;continue}(!r.Xtt()||a.Ktt()>0)&&o.push(r);const u=r.kH().KZ();h.push(r);let c=e+1;for(;c<i;++c){const t=n[c],s=t.kH();if(s.DX()&&s.Ytt(s.BH().Jtt())){if(s.KZ()!==u)break;t.Xtt()?(s.Ktt()>0&&o.push(t),h.push(t)):o.push(t)}}if(1!==h.length||h[0].Ztt()){this.Dit(t,s,h);for(let e=0,i=o.length;e<i;++e){const i=o[e],r=i.kH(),n=r.BH();r.tst(!0),nS(n,t),n.qtt(i,r,t,s),r.tst(!1)}}else{nS(l,t),l.qtt(r,a,t,s);for(let e=0,i=o.length;e<i;++e){const i=o[e];if(i===r)continue;const n=i.kH(),h=n.BH();nS(h,t),h.qtt(i,n,t,s)}}e=c,hS.bh(h),hS.bh(o)}for(const s of e)s.Ltt(t,"afterdraw");r&&t.kF(r),hS.bh(n),wS=null}Dit(t,s,e){t.AF();for(let s=0,i=e.length;s<i;++s){const i=e[s],r=i.kH(),n=r.BH();r.sst(!0),nS(n,t),n.est(i,r,t)}t.EF();for(let i=0,r=e.length;i<r;++i){const r=e[i],n=r.kH(),h=n.BH();nS(h,t),h.qtt(r,n,t,s),n.sst(!1)}t.FF()}wst(){const t={sx:this.KY(),sy:this.QY(),s:this.qY(),a:this.YY(),w:this.Cy(),h:this.My(),ortho:this.TX(),vpX:this.uet(),vpY:this.cet(),fv:this.tet,persist:this.Zst,fx:this.n7.xC(),layers:{},dynamicLayers:[]};for(const s of this.qst)if(s.e9()){const e=s.IX();t.dynamicLayers.push({sid:s.s9(),name:s.Rc(),parentSid:e?e.s9():null,siblingIndex:s.Q7(),data:s.wst()})}else t.layers[s.s9().toString()]=s.wst();return t}vst(t){this.U8=t.sx,this.V8=t.sy,this.N8=t.s,this.B8=t.a,this.Vy=t.w,this.Wy=t.h,this.Pst=!!t.ortho,t.hasOwnProperty("vpX")&&(this.Rst=t.vpX),t.hasOwnProperty("vpY")&&(this.Ast=t.vpY),this.tet=!!t.fv,this.Zst=t.persist,this.n7.CC(t.fx),this.c7=!0;for(const[s,e]of Object.entries(t.layers)){const t=parseInt(s,10),i=this.wet(t);i&&i.vst(e)}if(t.hasOwnProperty("dynamicLayers")){this.yX(),this.Bc.KH();const s=new Map,e=t.dynamicLayers;for(let t=e.length-1;t>=0;--t){const i=e[t],r=i.sid,n=i.name,h=i.parentSid,o=i.siblingIndex,a=i.data;if(this.iet(),this.yet(n)||this.wet(r))continue;let l,u;if(null===h)l=null,u=this.Hst;else{if(l=this.wet(h),!l)continue;u=l.PX()}const c=hS.Hr(hS.y8,this,l,{name:n,o8:r,a8:!0});u.push(c);let f=s.get(u);f||(f=[],s.set(u,f)),f.push({kZ:c,Lit:o}),c.vst(a)}for(const[t,e]of s){e.sort((t,s)=>t.Lit-s.Lit);for(const s of e){const e=s.kZ,i=s.Lit;let r=t.indexOf(e);t.splice(r,1),t.splice(i,0,e)}}}this.Z7(),this.let(),this.oet()}pH(){return this.eet}ij(){return this.w7}e6(t){t.layout=this.pH();const s=this.Bc,e=s.yZ()&&!s.oj().JH();e&&oS.kit(),this.w7.dispatchEvent(t),e&&oS.Nit()}hit(t){return t.layout=this.pH(),this.w7.Gf(t)}oit(t){return t.layout=this.pH(),this.Bc.hit(t)}Bit(){this.$it(this.Hst)}$it(t,s=0){const e=t.slice(0);e.reverse();for(const t of e)console.log(`${"\t".repeat(s)}- ${t.Rc()}`),this.$it(t.PX(),s+1)}}}{const vS=self.Gs;vS.Uit=class extends vS.zr{#s;#e=[];#f=new Map;#a=new Map;#i=null;#t=[];#n=null;#h=0;#d=null;constructor(t){super(),this.#s=t}qr(){this.#s=null,this.#i=null,this.#n=null,this.#d=null,vS.bh(this.#e),this.#f.clear(),this.#a.clear(),vS.bh(this.#t)}KM(t){const s=vS.Hr(vS.Tst,this,this.#e.length,t);this.#e.push(s),this.#f.set(s.Rc().toLowerCase(),s),this.#a.set(s.s9(),s)}Sq(){return this.#s}Vit(t){this.#n=t}Wit(){if(this.#n)return this.#n;if(this.#e.length)return this.#e[0];throw new Error("no first layout")}zit(t){return this.#f.get(t.toLowerCase())||null}jit(t){return this.#a.get(t)||null}Hit(t){return t=vS.Zr(Math.floor(t),0,this.#e.length-1),this.#e[t]}yH(t){return"number"==typeof t?this.Hit(t):this.zit(t.toString())}wH(){return this.#e}zet(t){this.#i=t}dH(){return this.#i}qit(t){if(this.#t.includes(t))throw new Error("layout already running");this.#t.push(t)}Jit(t){const s=this.#t.indexOf(t);if(-1===s)throw new Error("layout not running");this.#t.splice(s,1)}*Yit(){this.#i&&(yield this.#i),this.#t.length&&(yield*this.#t)}Xit(t){return this.#i===t||this.#t.includes(t)}yit(t){if(t)this.#h++;else{if(this.#h<=0)throw new Error("already unset");this.#h--}}YH(){return this.#h>0}xH(t){this.#d=t}Zet(){this.#d=null}bH(){return!!this.#d}Kit(){return this.#d}Zit(){const t=this.dH();t&&t.let()}Qit(){const t=this.dH();t&&t.oet()}}}{const bS=self.Gs,xS=new RegExp("<(.+?)>","g");bS.trt=class extends bS.zr{constructor(t){super(),this.Bc=t,this.srt=bS.Hr(bS.ert),this.irt=null,this.rrt=[],this.nrt=new Map,this.hrt=new Map,this.ort=new Map,this.art=[],this.lrt=[],this.urt=[],this.crt=!1,this.frt=!1,this.drt=!1,this.prt=()=>this.mrt(),this.grt=()=>this.yrt(),this.Srt=()=>this.wrt(),this.vrt=()=>this.brt(),this.xrt=t=>this.Crt(t.G0),this.Trt=t=>this.Mrt(),this.Irt=t=>this.Grt(),this._rt=t=>this.Prt(),this.Rrt=[],this.Art=0}qr(){this.Ert(),this.prt=null,this.grt=null,this.Srt=null,this.vrt=null,this.xrt=null,this.Irt=null;for(const t of this.rrt)t.b1(),t.qr();bS.bh(this.rrt),this.rrt=null,this.srt.qr(),this.srt=null,bS.bh(this.art),this.art=null,bS.bh(this.lrt),this.lrt=null,bS.bh(this.urt),this.urt=null,this.nrt.clear(),this.nrt=null,this.hrt.clear(),this.hrt=null,this.ort.clear(),this.ort=null,bS.bh(this.Rrt),this.Rrt=null,this.Bc=null}Ort(){const t=this.Bc.wf();t.addEventListener("pretick",this.prt),t.addEventListener("tick2",this.grt),t.addEventListener("beforelayoutchange",this.Srt),t.addEventListener("layoutchange",this.vrt),t.addEventListener("instancedestroy",this.xrt),t.addEventListener("beforeload",this.Trt),t.addEventListener("afterload",this.Irt),t.addEventListener("afterlayoutstart",this._rt)}Ert(){const t=this.Bc.wf();t.removeEventListener("pretick",this.prt),t.removeEventListener("tick2",this.grt),t.removeEventListener("beforelayoutchange",this.Srt),t.removeEventListener("layoutchange",this.vrt),t.removeEventListener("instancedestroy",this.xrt),t.removeEventListener("beforeload",this.Trt),t.removeEventListener("afterload",this.Irt),t.removeEventListener("afterlayoutstart",this._rt)}KM(t){this.srt.$u(t);const s=bS.Drt.Frt(t,this);this.$u(s),this.Lrt(s),this.ort.set(s.Rc(),0)}krt(t){const s=this.Nrt(),e=t.UK(),i=s.Hs(e),r=bS.Drt.krt(`${e}:${this.ort.get(e)}`,i,this);return this.Brt(e),this.$u(r),this.Bc.yZ()&&globalThis.SZ.$rt(r),r}Urt(t){return this.ort.get(t)}Brt(t){this.ort.set(t,this.ort.get(t)+1)}Vrt(){for(const t of this.rrt){if(t.Wrt())continue;const s=t.UK();this.Brt(s)}}zrt(){for(const t of this.ort.keys())this.ort.set(t,0)}$u(t){this.rrt.push(t),this.nrt.set(t.Rc().toLowerCase(),t)}Zf(t){t.jrt(),t.Wrt()||(bS.Gh(this.rrt,t),bS.Gh(this.art,t),bS.Gh(this.lrt,t),bS.Gh(this.urt,t),this.nrt.delete(t.Rc().toLowerCase()),this.Hrt(t),this.Bc.yZ()&&globalThis.SZ.qrt(t),t.w1()||t.qr())}lZ(t){this.Bc.lZ(t,this.irt,null)}Sq(){return this.Bc}Nrt(){return this.srt}Jrt(t){this.irt=t}Yrt(){return this.irt}*Xrt(){for(const t of this.rrt)yield t}*Krt(){for(const t of this.lrt)yield t}Zrt(t,s){this.hrt.has(t)||this.hrt.set(t,new Set),this.hrt.get(t).add(s)}Lrt(t){for(const s of t.Qrt())this.Zrt(s,t)}Hrt(t){for(const[s,e]of this.hrt.entries())e.has(t)&&(e.delete(t),0===e.size&&this.hrt.delete(s))}tnt(t){if(this.hrt.has(t))return this.hrt.get(t)}snt(t,s){if(s)for(const e of this.rrt)if(s.every(t=>e.ent(t.G0,t.trackId))&&e.Rc().includes(t.Rc()))return e}int(t){return this.nrt.get(t.toLowerCase())||null}rnt(t){for(const s of this.art)if(s.Rc()===t)return s;for(const s of this.lrt)if(s.Rc()===t)return s;return null}*nnt(t){if(xS.test(t)){let s;xS.lastIndex=0;const e=new Set;do{if(s=xS.exec(t),s){const t=s[1].split(",");for(const s of t)e.add(s)}}while(s);for(const t of e.values()){const s=this.int(t);s&&(yield s)}e.clear()}else{const s=this.int(t);s&&(yield s)}}*hnt(t){for(const s of this.rrt)s.T1(t)&&(yield s)}ont(t){this.art.includes(t)||this.art.push(t),this.ant()}lnt(t){bS.Gh(this.lrt,t),this.unt()}cnt(t){this.lrt.includes(t)?(t.fnt(!0),t.dnt(!1),t.pnt(!1)):(t.fnt(!1),t.dnt(!0),t.pnt(!1),this.art.includes(t)||this.art.push(t)),this.ant()}mnt(t){t.fnt(!1),t.dnt(!1),t.gnt(),bS.Gh(this.art,t),this.unt()}ynt(t){t.fnt(!1),t.dnt(!1),this.lrt.includes(t)&&(t.pnt(!0),this.urt.push(t),bS.Gh(this.lrt,t)),this.art.includes(t)&&t.pnt(!0)}Snt(t){t.fnt(!1),t.dnt(!1),t.pnt(!1),t.E1(1),bS.Gh(this.lrt,t)}wnt(t){this.ynt(t),t.gnt()}mrt(){const t=this.Sq();if(t.tit())return;if(!this.crt)return;if(this.frt)return;let s=0;for(t.yZ()&&(s=performance.now()),this.drt=!0;this.art.length;){const t=this.art.pop();t.vnt()?(t.bnt(),this.urt.push(t)):(t.xnt(),this.lrt.push(t)),0!==t.Cnt()&&(this.Art=1)}const e=this.Bc.Tnt(),i=this.Bc.Mnt(),r=this.Bc.$j();for(let t=this.lrt.length-1;t>=0;t--){const s=this.lrt[t];s&&s.Int(e,r,i)}this.drt=!1,t.yZ()&&globalThis.SZ.Gnt(performance.now()-s),0!==this.Art&&t.jH()}yrt(){const t=this.Sq();if(t.tit())return;if(!this.crt)return;if(this.frt)return;let s,e=0;t.yZ()&&(e=performance.now());for(let t=0,e=this.urt.length;t<e;t++){const e=this.urt[t];s||(s=new Set),e.jrt(),this._nt(e),s.add(e)}if(s){bS.Rh(this.urt,s),this.Art=0;for(let t=0,s=this.lrt.length;t<s;t++)if(0!==this.lrt[t].Cnt()){this.Art=1;break}}this.unt(),t.yZ()&&globalThis.SZ.Gnt(performance.now()-e)}_nt(t){t.w1()||t.Pnt()&&t.Z1()&&t.Rnt()&&t.Ant()}ant(){this.crt||(this.crt=!0)}unt(){this.urt.length||this.lrt.length||this.art.length||this.drt||(this.crt=!1)}wrt(){for(this.frt=!0;this.art.length;)this.mnt(this.art.pop());const t=new Set;for(const s of this.lrt)s.wrt()&&(s.jrt(),t.add(s));bS.Rh(this.lrt,t),t.clear();for(const s of this.urt)s.wrt()&&(s.jrt(),t.add(s));bS.Rh(this.urt,t),this.unt();for(const t of this.rrt)t.Ent()}brt(){this.frt=!1}Crt(t){const s=t.yY(),e=this.tnt(s);if(e)if(this.Bc.tit())this.Rrt.push(t);else for(const t of e)t.Wrt()||(t.w1()?this.Zf(t):t.Pnt()||(this._nt(t),this.Zf(t)))}Mrt(){for(const t of this.art.map(t=>t))this._nt(t),this.Zf(t);for(const t of this.lrt.map(t=>t))this._nt(t),this.Zf(t)}Grt(){for(const t of this.Rrt)this.Crt(t);bS.bh(this.Rrt);for(const t of this.rrt)t.Grt()}Prt(){const t=this.Bc.gH().dH();if(t)for(const s of this.rrt){const e=s.Ont();e&&t.Rc()===e&&this.cnt(s)}}wst(){return{timelinesJson:this.Fnt(),scheduledTimelinesJson:this.Dnt(),playingTimelinesJson:this.Lnt(),markedForRemovalTimelinesJson:this.knt(),hasRuntimeListeners:this.crt,changingLayout:this.frt,isTickingTimelines:this.drt}}vst(t){t&&(this.zrt(),this.Nnt(t.timelinesJson),this.Bnt(t.scheduledTimelinesJson),this.$nt(t.playingTimelinesJson),this.Unt(t.markedForRemovalTimelinesJson),this.crt=!t.hasRuntimeListeners,this.frt=!!t.changingLayout,this.drt=!!t.isTickingTimelines,this.Vrt(),this.ant(),this.unt())}Fnt(){return this.rrt.map(t=>t.wst())}Nnt(t){for(const s of t){let t=this.int(s.name);if(t)t.vst(s);else{const e=this.Vnt(s);if(!e)continue;const i=this.int(e);t=this.krt(i),t.vst(s)}t.Wnt()||this.Zf(t)}}Vnt(t){const s=t.name.split(":");return s&&2===s.length?s[0]:null}Dnt(){return this.znt(this.art)}Bnt(t){this.jnt(t,this.art)}Lnt(){return this.znt(this.lrt)}$nt(t){this.jnt(t,this.lrt)}knt(){return this.znt(this.urt)}Unt(t){this.jnt(t,this.urt)}Hnt(t,s){if(!s)return!1;for(const e of s)if(e===t.Rc())return!0;return!1}znt(t){return t.map(t=>t.Rc())}jnt(t,s){const e=new Set;for(const i of s)this.Hnt(i,t)||e.add(i);if(bS.Rh(s,e),t){const e=t=>s=>s.Rc()===t;for(const i of t){const t=this.int(i);t&&(s.find(e(i))||s.push(t))}}}}}{const CS=self.Gs,TS=100,MS=.01,IS=25,GS=20,_S=5,PS=[0,0],RS=[0,0],AS=[0,0],ES=[0,0,0,0,0],OS=new Array(4),FS=[{x:0,y:0,t:0,bt:0},{x:0,y:0,t:0,bt:0},{x:0,y:0,t:0,bt:0}],DS={x:0,y:0,t:0,bt:0};CS.qnt=class{constructor(t,s){this.Jnt=!1,this.Ynt=t,this.Xnt=[];let e=null;if(e=s?this.Ynt.Knt(s):CS.$h(this.Ynt.Znt()),!e)return;const i=e.e2("offsetX"),r=e.e2("offsetY");if(!i||!r)return;this.Qnt=i,this.tht=r;const n=i.sht(),h=r.sht();for(let t=1,s=Math.min(n.length,h.length);t<s;++t){const s=n[t],e=(s.eht(),s.iht()),i=h[t],r=(i.eht(),i.iht());e&&"cubic-bezier"===e.rht()&&r&&"cubic-bezier"===r.rht()?this.Xnt.push(CS.Hr(CS.nht,e,r,s,i,this.Xnt.length)):(e&&"line"===e.rht()&&r&&r.rht(),this.Xnt.push(CS.Hr(CS.hht,s,i,this.Xnt.length)))}this.Jnt=!0}qr(){for(const t of this.Xnt)t.qr();CS.bh(this.Xnt),this.Xnt=null,this.Ynt=null,this.Qnt=null,this.tht=null}oht(){return this.Jnt}aht(){return this.Xnt}lht(t){const s="relative"===this.Qnt.uht()?t.lC():0,e="relative"===this.tht.uht()?t.fC():0;for(const t of this.Xnt)t.lht(s,e)}YS(t,s,e){let i=NaN,r=this.Xnt.length;for(let e=0;e<r;e++){const r=this.Xnt[e];if("cubic-bezier"===r.eG()){const e=r.YS(t,s);(isNaN(i)||e[3]<i)&&(i=e[3],AS[0]=e[2],AS[1]=r.Mz())}}return AS}cht(t,s,e){const i=e.fht;CS.Ke(i[0])||(i[0]=0),CS.Ke(i[1])||(i[1]=1);let r=NaN,n=this.Xnt.length;for(let e=0;e<n;e++){const n=this.Xnt[e];if("cubic-bezier"===n.eG()){const e=n.dht(t,s,i);(isNaN(r)||e[3]<r)&&(r=e[3],AS[0]=e[2],AS[1]=n.Mz())}}return AS}pht(t,s){return this.Xnt[s].pht(t)}mht(t,s){return this.Xnt[s].mht(t)}},CS.nht=class{constructor(t,s,e,i,r){this.US=r;const n=t.ght("cubic-bezier"),h=e.ght("cubic-bezier"),o=s.ght("cubic-bezier"),a=i.ght("cubic-bezier");this.yht=t.Sht(),this.wht=s.Sht(),this.vht=t.Sht()+n.bht(),this.xht=s.Sht()+o.bht(),this.Cht=e.Sht()+h.Tht(),this.Mht=i.Sht()+a.Tht(),this.Iht=e.Sht(),this.Ght=i.Sht(),this._ht=0,this.Pht=0,this.Rht=0,this.Aht=0,this.Eht=0,this.Oht=0,this.Fht=0,this.Dht=0,this.Lht=0,this.kht=0,this.Nht=0,this.Bht=0,this.$ht=0,this.Uht=0,this.Vht=0,this.Wht=0,this.zht=0,this.jht=0,this.Hht=0,this.qht=0,this.Jht=NaN,this.Jnt=!1,this.Yht=100,this.Xht=new Array(this.Yht+1),this.Xht[0]=0,this.Kht=0,this.Zht=[],this.Qht=[];for(let t=0;t<100;t++)this.Qht.push({x:0,y:0,t:0,bt:0});this.tot()}qr(){CS.bh(this.Xht),this.Xht=null,CS.bh(this.Zht),this.Zht=null,CS.bh(this.Qht),this.Qht=null}eG(){return"cubic-bezier"}Mz(){return this.US}sot(){return Math.floor(this.Kht/25)}eot(){return 1/this.sot()}lht(t,s){this.iot=t,this.rot=s,this.Xht=new Array(this.Yht+1),this.Xht[0]=0,this.tot(),this._ht=this.yht+this.iot,this.Pht=this.wht+this.rot,this.Rht=this.vht+this.iot,this.Aht=this.xht+this.rot,this.Eht=this.Cht+this.iot,this.Oht=this.Mht+this.rot,this.Fht=this.Iht+this.iot,this.Dht=this.Ght+this.rot,this.Lht=3*(this.Rht-this._ht),this.kht=3*(this.Aht-this.Pht),this.Nht=3*(this.Eht-this.Rht),this.Bht=3*(this.Oht-this.Aht),this.$ht=3*(this.Fht-this.Eht),this.Uht=3*(this.Dht-this.Oht),this.Vht=3*(this.Rht-this._ht),this.Wht=3*(this._ht+this.Eht-2*this.Rht),this.zht=this.Fht-this._ht+3*(this.Rht-this.Eht),this.jht=3*(this.Aht-this.Pht),this.Hht=3*(this.Pht+this.Oht-2*this.Aht),this.qht=this.Dht-this.Pht+3*(this.Aht-this.Oht)}Map(t){if(!this.Jnt)return NaN;const s=this.not(t);return RS[0]=this.hot(s),RS[1]=this.oot(s),RS}YS(t,s){const e=this.aot(100),i=this.lot(t,s,e),r=this.uot(t,s,e,i);return ES[0]=r.x,ES[1]=r.y,ES[2]=r.t,ES[3]=r.bt,ES}dht(t,s,e){const i=this.aot(100),r=this.cot(t,s,i,e),n=this.uot(t,s,i,r);return ES[0]=n.x,ES[1]=n.y,ES[2]=n.t,ES[3]=n.bt,ES}pht(t){const s=1-t,e=s*s,i=2*s*t,r=t*t,n=e*this.Lht+i*this.Nht+r*this.$ht,h=e*this.kht+i*this.Bht+r*this.Uht,o=CS.en(n,h);return PS[0]=n/o,PS[1]=h/o,PS}mht(t){const s=1-t,e=s*s,i=2*s*t,r=t*t,n=e*this.Lht+i*this.Nht+r*this.$ht,h=e*this.kht+i*this.Bht+r*this.Uht;return Math.atan2(h,n)}not(t){if(!this.Jnt)return;let s=t*this.Xht[this.Yht],e=0,i=this.Yht,r=0;for(;e<i;)r=e+((i-e)/2|0),this.Xht[r]<s?e=r+1:i=r;this.Xht[r]>s&&r--;const n=this.Xht[r];return n===s?r/this.Yht:(r+(s-n)/(this.Xht[r+1]-n))/this.Yht}hot(t){return this.Jnt?self.Wu.hc("cubicbezier")(t,this.yht+this.iot,this.vht+this.iot,this.Cht+this.iot,this.Iht+this.iot):NaN}oot(t){return this.Jnt?self.Wu.hc("cubicbezier")(t,this.wht+this.rot,this.xht+this.rot,this.Mht+this.rot,this.Ght+this.rot):NaN}aot(t){if(t=t||100,this.Zht.length>=t)return this.Zht;this.Zht=new Array(t),t++;for(let s=0;s<t-1;s++){const e=s/(t-1),i=e**2,r=e**3,n=this.Vht*e,h=this.Wht*i,o=this.zht*r,a=this.jht*e,l=this.Hht*i,u=this.qht*r,c=this._ht+n+h+o,f=this.Pht+a+l+u;this.Qht[s].x=c,this.Qht[s].y=f,this.Qht[s].t=e,this.Qht[s].bt=0,this.Zht[s]=this.Qht[s]}return this.Zht}lot(t,s,e,i=null,r=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.Jht))for(let i=0;i<100;i++){const h=e[i],o=h.x-t,a=h.y-s;h.bt=o*o+a*a,h.bt<r&&(r=h.bt,n=i)}else{for(let i=this.Jht;i<this.Jht+5&&!(i>=e.length);i++){const h=e[i],o=h.x-t,a=h.y-s;h.bt=o*o+a*a,h.bt<r&&(r=h.bt,n=i)}for(let i=this.Jht;i>this.Jht-5&&!(i<0);i--){const h=e[i],o=h.x-t,a=h.y-s;h.bt=o*o+a*a,h.bt<r&&(r=h.bt,n=i)}}return this.Jht=n,n}cot(t,s,e,i,r=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.Jht))for(let h=0;h<100;h++){const o=e[h],a=o.x-t,l=o.y-s;o.bt=a*a+l*l,o.t>=i[0]&&o.t<=i[1]&&o.bt<r&&(r=o.bt,n=h)}else{for(let h=this.Jht;h<this.Jht+5&&!(h>=e.length);h++){const o=e[h],a=o.x-t,l=o.y-s;o.bt=a*a+l*l,o.t>=i[0]&&o.t<=i[1]&&o.bt<r&&(r=o.bt,n=h)}for(let h=this.Jht;h>this.Jht-5&&!(h<0);h--){const o=e[h],a=o.x-t,l=o.y-s;o.bt=a*a+l*l,o.t>=i[0]&&o.t<=i[1]&&o.bt<r&&(r=o.bt,n=h)}}return this.Jht=n,n}uot(t,s,e,i){let r=e[i],n=1,h=Number.MAX_SAFE_INTEGER;t:do{const n=e.length;let o=0===i?0:i-1,a=i===n-1?n-1:i+1,l=e[o].t,u=(e[a].t-l)/4;if(u<.001)break;OS[0]=e[o];for(let e=1;e<=2;e++){const n=l+e*u,o=n**2,a=n**3,c=this.Vht*n,f=this.Wht*o,d=this.zht*a,p=this.jht*n,m=this.Hht*o,g=this.qht*a,y=this._ht+c+f+d,S=this.Pht+p+m+g,w=y-t,v=S-s,b=w*w+v*v;if(b<h){h=b,i=e,DS.x=y,DS.y=S,DS.t=n,DS.bt=b,r=DS;break t}const x=FS[e-1];x.x=y,x.y=S,x.t=n,x.bt=b,OS[e]=x}OS[3]=e[a],e=OS}while(n++<20);return r}tot(){this.Jnt=!0;let t=this.hot(0),s=this.oot(0),e=0;for(let i=1;i<=this.Yht;i++){const r=this.hot(.01*i),n=this.oot(.01*i),h=t-r,o=s-n;e+=CS.en(h,o),this.Xht[i]=e,t=r,s=n}this.Kht=e}},CS.hht=class{constructor(t,s,e){this.US=e,this.fot=t.Sht(),this.dot=s.Sht(),this.iot=0,this.rot=0}qr(){}eG(){return"line"}Mz(){return this.US}lht(t,s){this.iot=t,this.rot=s}lC(){return this.fot+this.iot}fC(){return this.dot+this.rot}}}{const LS=self.Gs,kS=0,NS=1;LS.Drt=class extends LS.zr{constructor(t,s,e){super(),this.Bc=e.Sq(),this.pot=e,this.mot=s,this.Xr=t,this.got=[],this.yot=0,this.Sot=null,this.wot=0,this.vot(),this.bot=null,this.xot=null,this.Cot=0,this.Tot=0,this.Mot=1,this.Iot=0,this.Got=-1,this._ot=1,this.Pot=!1,this.Rot=!1,this.Aot=!1,this.Eot=!0,this.Oot=!1,this.Fot=!1,this.Dot=-1,this.Lot=!1,this.kot=!1,this.Not=!1,this.Bot=!1,this.$ot=NaN,this.Uot=[""],this.Vot="",this.Wot=!1,this.Art=0,this.zot=0,this.jot=null,this.Hot=null}static Frt(t,s){const e=s.Nrt(),i=e.qot(),r=e.Hs(t[i]),n=LS.Hr(LS.Drt,t[i],r,s);return n.Jot(!0),n}static krt(t,s,e){return LS.Hr(LS.Drt,t,s,e)}qr(){if(this.w1())return;const t=this.Bc.wf();this.pot.mnt(this),this.pot.wnt(this);for(const t of this.got)t.qr();LS.bh(this.got),this.got=null,this.Bc=null,this.pot=null,this.mot=null,this.Oot=!0,this.bot=null,this.xot=null,this.Yot(t)}Yot(t){const s=LS.Hr(LS.Event,"timelinestatereleased");s.Xot=this,t.dispatchEvent(s)}eG(){return 0}vot(){for(const t of this.mot.Zot().Kot())this.yot=this.got.push(LS.Qot.KM(this,t))}tat(){return this.pot}Sq(){return this.Bc}Znt(){return this.got}sat(t,s,e,i){if(!this.zot)return;let r;for(let n=0;n<this.got.length;n++){let h=this.got[n];if(t!==h.J1())continue;const o=h.e2(e);o&&s.constructor===o.eat().constructor&&o.uht()===i.uht()&&(r||(r=[]),r.push(o))}return r}Wnt(){return!!this.got.length}Knt(t){for(const s of this.got)if(LS.Zi(s.t2(),t))return s;return null}iat(t){for(const s of this.got)if(!s.rat()&&LS.Zi(s.Rc(),t))return s;return null}F3(t){this.Xr=t}Rc(){return this.Xr}nat(){return this.mot}UK(){return this.mot.Rc()}G1(){return this.mot.G1()}I1(t){this.mot.I1(t)}hat(){return this.mot.hat()}oat(t){this.mot.oat(t)}aat(){return this.mot.aat()}lat(t){this.mot.lat(t)}uht(){return this.mot.uht()}uat(t){this.mot.uht(t)}q1(t){for(const s of this.Znt())s.q1(t)}P1(){return this.mot.P1()}_1(t){return this.mot._1(t)}A1(){return this.mot.A1()}R1(t){return this.mot.R1(t)}V0(){return this.mot.V0()}cat(){return this._ot}fat(t){return this.mot.fat(t)}E1(t){if(t=Number(t),LS.Ke(t))return this.Mot=t}O1(){return this.Mot}Ont(){return this.mot.Ont()}dat(){return this.mot.dat()}pat(){return this.mot.pat()}mat(){return this.Iot}gat(){return!this.IsPlaying()||this.Mot>0}yat(){return this.IsPlaying()?"playing":this.B1()?"paused":this.Z1()?"complete":"other"}D1(){return this.bot||(this.bot=new Promise(t=>{this.xot=t})),this.bot}gnt(){this.bot&&(this.xot(),this.bot=null,this.xot=null)}Sat(t){this.Uot=LS.Drt.wat(t),this.Wot=!0}F1(){return this.Uot}vat(){return this.Wot&&(this.Vot=this.Uot.join(" ")),this.Wot=!1,this.Vot}T1(t){if(!this.Uot)return!1;if(!this.Uot.length)return!1;const s=LS.Drt.wat(t);return!!s&&!!s.length&&s.every(LS.Drt.bat,this)}xat(){LS.uq.Cat&&this.constructor===LS.Drt&&(LS.uq.Cat.aq.Tat(this),this.pot.lZ(LS.uq.Cat.aq.Mat),this.pot.lZ(LS.uq.Cat.aq.Iat),this.pot.lZ(LS.uq.Cat.aq.Gat),this.pot.lZ(LS.uq.Cat.aq._at),LS.uq.Cat.aq.Pat())}Rat(){this.Dot=this.Bc.Lj()}Ant(){this.Not||(this.Not=!0,LS.uq.Cat&&this.constructor===LS.Drt&&(LS.uq.Cat.aq.Tat(this),this.pot.lZ(LS.uq.Cat.aq.Aat),this.pot.lZ(LS.uq.Cat.aq.Eat),this.pot.lZ(LS.uq.Cat.aq.Oat),this.pot.lZ(LS.uq.Cat.aq.Fat),LS.uq.Cat.aq.Pat()))}fnt(t){this.Pot=t}Dat(){return this.Dot===this.Bc.Lj()}IsPlaying(t=!1){return!!this.Dat()||!(!this.Lat()||t)||this.Pot}kat(){return this.IsPlaying(!0)}B1(){return this.Nat()}Nat(){return!(this.w1()||this.Lat()||this.kat()||this.Z1())}dnt(t){this.Rot=t}Lat(){return this.Rot}Bat(t){this.Eot=t;const s=this.P1(),e=this.A1();if(s||e){if(s&&!e);else if(!s&&e){const t=this.nV();1===this.Iot&&(t<=0||t>=this.G1())&&(this.Eot=!0)}}else{const t=this.nV();(t<=0||t>=this.G1())&&(this.Eot=!0)}}Z1(){return this.Eot}w1(){return this.Oot}pnt(t){this.Fot=t}vnt(){return this.Fot}$at(t){this.Lot=t}Uat(){return this.Lot}Jot(t){this.kot=!!t}Wrt(){return this.kot}Rnt(){return this.Aot}nV(){return this.Cot}M1(t){if(t=Number(t),!LS.Ke(t))return;const s=this.nV();this.Vat(t),this.Bat(!1),this.Z1()||this.$at(!0),(this.kat()||this.Lat()||!this.Aot)&&(this.kat()||this.Lat()||this.Aot?this.kat()?this.b1():this.Lat()&&(this.pot.mnt(this),this.Wat()):this.Wat()),this.zat(),this.jat(this.nV(),!1,!0,!0,s),this.Hat(),this.Art&&this.Sq().jH(),this.qat()}Vat(t){LS.Ke(t)||(t=this.G1()),t<0?this.Cot=0:t>=this.G1()?this.Cot=this.G1():this.Cot=t}Jat(t){LS.Ke(t)||(t=this.G1()),t<0?this.Cot=0:t>=this.G1()?this.Cot=this.G1():this.Cot=t;for(const t of this.got)t.Yat()}qat(){LS.uq.Cat&&this.constructor===LS.Drt&&(LS.uq.Cat.aq.Tat(this),this.pot.lZ(LS.uq.Cat.aq.Xat),this.pot.lZ(LS.uq.Cat.aq.Kat),this.pot.lZ(LS.uq.Cat.aq.Zat),LS.uq.Cat.aq.Pat())}Qat(){if(this.P1())return!0;if(this.A1()&&1===this.Iot){if(this.gat()){if(this.nV()>=this.G1())return!1}else if(this.nV()<=0)return!1}else if(!this.P1()&&!this.A1())if(this.gat()){if(this.nV()>=this.G1())return!1}else if(this.nV()<=0)return!1;return!0}C1(){this.w1()||this.Qat()&&this.Play(!0)}Play(t=!1){return!this.w1()&&!this.Lat()&&(this.kat()&&this.Dat()?this.tlt():!this.kat()&&!!(this.Z1()||t||this.Uat())&&this.slt())}tlt(){return this.$at(!1),this.pot.lnt(this),this.pot.cnt(this),this.D1(),!0}slt(){return this.$at(!1),this.pot.cnt(this),this.D1(),!0}b1(t=!1){this.w1()||(this.Bat(t),this.pot.ynt(this),this.Z1()&&this.gnt())}$f(t=!0,s=!1){if(this.w1())return;if(!this.kat()&&this.Lat())return this.pot.mnt(this);if(this.Z1())return;this.b1(!0),this.gat()?this.Vat(0):this.Vat(this.G1());const e=this.nV();this.zat(),s?this.elt(e):this.jat(e,!1,!1,!0),t&&this.qat(),this.Hat(),this.Art&&t&&this.Sq().jH()}ilt(){this.$f(!1,!0)}elt(t){this.jat(t,!1,!1,!0,NaN,!1,!0)}wrt(){return!!this.w1()||!(!this.Sq().tit()&&this.rlt())&&(this.pot.Snt(this),this.Sq().tit()||this.ilt(),!0)}Wat(){this.xnt(!0)}bnt(){this.xnt(!1,!0),this.fnt(!1),this.dnt(!1)}xnt(t=!1,s=!1){if(!this.vnt()||s)if(t){this.Not=!1,this.Aot=!0,this.Bot=!0,this.zat();for(const t of this.got)t.xnt();this.Hat()}else if(this.fnt(!0),this.dnt(!1),this.xat(),this.Z1()){this.Dot=-1,0!==this.Iot&&(this.Mot=Math.abs(this.Mot)),this.Iot=0,this.Got=-1,this._ot=1,this.Eot=!1,this.Not=!1,this.Aot=!0,this.Bot=!0,this.gat()?this.Vat(0):this.Vat(this.G1()),this.zat();for(const t of this.got)t.xnt();this.Hat()}else{-1!==this.Got&&(this.Iot=this.Got),this.Bot=!0,this.Not=!1,this.zat();for(const t of this.got)t.nlt();this.Hat()}}Cnt(){return this.Art}zat(){this.zot=0;for(const t of this.got)t.ZA()&&(this.zot=1)}Hat(){this.Art=0;for(const t of this.got)t.hlt(),0===this.Art&&1===t.Cnt()&&(this.Art=1),this.Sot||1!==t.olt()||(this.Sot||(this.Sot=[]),this.wot=this.Sot.push(t))}Int(t,s,e){if(this.pat()){if(0===t&&0===this.$ot)return;this.$ot=t,t=e}else{if(0===e&&0===this.$ot)return;this.$ot=e,t=e,s=1}const i=this.Cot+this.Tot,r=i+t*s*this.Mot,n=this.mot.llt;r<0?(this.Cot=0,this.Tot=-r):r>=n?(this.Cot=n,this.Tot=this.Cot-r):(this.Cot=r,this.Tot=0);let h=!1,o=!1;const a=this.P1(),l=this.A1();let u;a||l?a&&!l?this.Mot>0?this.Cot>=n&&(this.Jat(0),o=!0):this.Cot<=0&&(this.Jat(n),o=!0):!a&&l?this.Mot>0?this.Cot>=n&&(this.Vat(n),this.E1(-1*this.O1()),o=!0,1===this.Iot?this._ot<this.V0()?(this._ot++,this.Iot=0):h=!0:0===this.Iot&&(this.Iot=1)):this.Cot<=0&&(this.Vat(0),this.E1(-1*this.O1()),o=!0,1===this.Iot?this._ot<this.V0()?(this._ot++,this.Iot=0):h=!0:0===this.Iot&&(this.Iot=1)):a&&l&&(this.Mot>0?this.Cot>=n&&(this.Vat(n),this.E1(-1*this.O1()),o=!0,this.Iot++,LS.wrap(this.Iot,0,2)):this.Cot<=0&&(this.Vat(0),this.E1(-1*this.O1()),o=!0,this.Iot++,LS.wrap(this.Iot,0,2))):this.Mot>0?this.Cot>=n&&(this._ot<this.V0()?(this._ot++,this.Jat(0),o=!0):(this.Vat(n),h=!0)):this.Cot<=0&&(this._ot<this.V0()?(this._ot++,this.Jat(n),o=!0):(this.Vat(0),h=!0));const c=this.yot;if(h){for(u=0;u<c;u++)this.got[u].ult();return this.b1(!0),void this.Rat()}const f=this.wot;for(u=0;u<f;u++){const t=this.Sot[u],s=t.clt();this.Cot-s<0&&i-s>0?t.flt(s):t.flt(this.Cot)}if(1===this.zot)for(u=0;u<c;u++){const t=this.got[u],s=t.clt();this.Cot-s<0&&i-s>0?t.vc(s,!0,!1,o,this.Bot,!1):t.vc(this.Cot,!0,!1,o,this.Bot,!1)}else for(u=0;u<c;u++)this.got[u].vc(this.Cot,!0,!1,o,this.Bot,!1);if(!this.IsPlaying()&&this.jot){const t=this.jot.nV()+this.jot.plt().dlt().clt(),s=this.Cot-t;this.Cot-=s,0!==this.Tot&&(this.Tot-=s),this.jot=null}for(u=0;u<f;u++){const t=this.Sot[u],s=t.clt();this.Cot-s<0&&i-s>0?t.mlt(s):t.mlt(this.Cot)}this.Bot&&(this.Bot=!1)}glt(t){this.jot=t}ylt(){return this.jot}Slt(t,s,e,i=!1){let r=t;if("number"==typeof s&&!isNaN(s)){const t=this.nV()-e.clt(),n=s-e.clt();t<0&&n>0&&(r=e.clt(),i&&this.Vat(r))}return r}jat(t,s=!1,e=!1,i=!1,r=NaN,n=!1,h=!1){for(const s of this.got){const i=this.Slt(t,r,s);s.flt(i,e)}for(const n of this.got){const o=this.Slt(t,r,n,!0);n.vc(o,s,e,i,this.Bot,h)}for(const s of this.got){const i=this.Slt(t,r,s);s.mlt(i,e)}this.Bot&&n&&(this.Bot=!1)}wlt(){const t=this.mot.Zot().vlt(),s=LS.Qot.KM(this,t);return this.yot=this.got.push(s),s}jrt(){if(!this.w1())for(const t of this.got)t.blt()}Ent(){for(const t of this.got)t.Ent()}*cY(){for(const t of this.got)t.J1()&&(yield t.J1())}xlt(){for(const t of this.got)t.Clt()}Tlt(t,s,e){if(s){if("number"==typeof e&&e>=0){const t=this.got[e];if(!t)return;return t.Mlt(s),void this.pot.Zrt(s.yY(),this)}for(const e of this.got)if(e.rat()){if(t){if(e.t2()!==t)continue;e.Mlt(s),this.pot.Zrt(s.yY(),this);break}if(!e.Ilt()){e.Mlt(s),this.pot.Zrt(s.yY(),this);break}}}}ent(t,s){for(const e of this.got)if(e.rat())if(s){if(s===e.t2()&&t===e.J1())return!0}else if(t===e.J1())return!0;return!1}Pnt(){return this.got.some(t=>!t.rat()||t.Glt())}rlt(){return this.got.some(t=>{if(t.rat()){if(!t.Glt())return!1;const s=t.yY();return!!s&&s.g8()}return!1})}e2(t){for(const s of this.Znt())for(const e of s._lt())if(e.Plt()===t)return e}Rlt(t){for(const s of this.got)if(t===s.J1())return s;return null}Alt(t){let s=t?t.split(" "):[];const e=new Set(s.map(t=>t.toLowerCase().trim()));s=[...e.values()];for(const t of this.Znt())for(const e of t.Elt())if(s.every(t=>e.HK(t)))return e}Qrt(){const t=[];for(const s of this.Znt())t.push(s.yY());return t.filter(t=>t)}Grt(){for(const t of this.Znt())t.Grt()}wst(){return{tracksJson:this.Olt(),name:this.Xr,playheadTime:this.nV(),playbackRate:this.Mot,pingPongState:this.Iot,resumePingPongState:this.Got,currentRepeatCount:this._ot,isPlaying:this.Pot,isScheduled:this.Rot,initialStateSet:this.Aot,finishedTriggers:this.Not,complete:this.Eot,released:this.Oot,markedForRemoval:this.Fot,completedTick:this.Dot,implicitPause:this.Lot,isTemplate:this.kot,tags:this.Uot.join(" "),stringTags:this.Vot,tagsChanged:this.Wot,firstTick:this.Bot}}vst(t){t&&(this.Flt(t.tracksJson),this.Xr=t.name,this.Cot=t.playheadTime,this.Mot=t.playbackRate,this.Iot=t.pingPongState,this.Got=t.hasOwnProperty("resumePingPongState")?t.resumePingPongState:-1,this._ot=t.currentRepeatCount,this.Pot=!!t.isPlaying,this.Rot=!!t.isScheduled,this.Aot=!!t.initialStateSet,this.Not=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.Eot=!!t.complete,this.Oot=!!t.released,this.Fot=!!t.markedForRemoval,this.Dot=t.completedTick,this.Lot=!!t.implicitPause,this.kot=!!t.isTemplate,this.Uot=t.tags.split(" "),this.Vot=t.stringTags,this.Wot=!!t.tagsChanged,this.Bot=!!t.firstTick)}Olt(){return this.got.map(t=>t.wst())}Flt(t){this.xlt(),t.forEach((t,s)=>{this.got[s].vst(t)}),this.got.filter(t=>t.Glt())}static bat(t){const s=this.F1();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static wat(t){if(LS.Ci(t))return t.slice(0);if(LS.hi(t))return t.split(" ");throw new Error("invalid tags")}Dlt(){return this.Hot||(this.Hot=LS.Hr(self.V1,this)),this.Hot}}}{const BS=self.Gs,$S=0,US=1,VS=2;BS.Qot=class extends BS.zr{constructor(t,s){super(),this.Ynt=t,this.Llt=s,this.klt=s.Zot(),this.Nlt=NaN,this.Blt=NaN,this.$lt=null,this.Ult=null,this.Vlt=!1,this.HA=s.clt()>0,this.Wlt=!1,this.zlt=!1,this.jlt=NaN,this.Hlt=null,this.qlt=this.Llt.plt().Jlt(),this.Ylt=[],this.Xlt(),this.Klt=0,this.Art=0,this.Zlt=0,this.Qlt=null}static KM(t,s){return BS.Hr(BS.Qot,t,s)}qr(){this.qlt=null;for(const t of this.Ylt)t.qr();BS.bh(this.Ylt),this.Ylt=null,this.Ynt=null,this.$lt=null,this.Ult=null,this.Llt=null,this.Hlt=null}Xlt(){for(const t of this.Llt.sut().tut())this.Ylt.push(BS.eut.KM(this,t))}blt(){for(const t of this.Ylt)t.blt()}Ent(){for(const t of this.Ylt)t.Ent();this.$lt=null,this.Ult=null}iut(){return this.Ynt}Sq(){return this.Ynt.Sq()}Elt(){return this.qlt||(this.qlt=this.Llt.plt().Jlt()),this.qlt}_lt(){return this.Ylt}e2(t){for(let s=0;s<this.Ylt.length;s++){const e=this.Ylt[s];if(e.Plt()===t)return e}}rut(){this.$lt||this.J1()}nut(){return!!this.$lt&&!this.$lt.NH()}Glt(){if(!this.rat())return!1;if(this.Vlt)return!1;const t=this.hut(),s=this.Sq().EH(t);return!!s&&!s.NH()}yY(){if(!this.rat())return;const t=this.out();return-1!==t?this.Sq().M7(t):void 0}aut(){return this.Ynt.Znt().indexOf(this)}Clt(){this.$lt=null,this.Nlt=NaN,this.Ult=null,this.Blt=NaN,this.Vlt=!0}Ilt(){return!!this.$lt}J1(){if(this.Vlt)return;if(this.$lt&&this.nut())return this.$lt;const t=this.hut();return this.$lt=this.Sq().EH(t),this.$lt}Mlt(t){if(this.Vlt=!1,this.$lt!==t){this.Ent(),this.$lt=t,this.Blt=t.yY().Mz(),this.Nlt=t.kK(),this.Ult=t.kH();for(const s of this.lut()){const e=s.uut,i=s.cut;switch(e.fut()){case"instance-variable":{i.dut();const e=t.yY(),r=e.mut(s.name),n=e.gut(r),h=e.yut(r);n===s.name&&h===s.type&&i.Sut(r);break}case"behavior":{const e=s.T0,r=this.yY(),n=t.yY(),h=i.I0(n);if(e&&h){const t=e.Rc();r.wut(t),n.wut(t),i.dut(),i.vut(h.s9())}break}}}}}*lut(){for(const t of this.Ylt){const s=t.eat(),e=this.yY(),i={uut:t,cut:s};switch(t.fut()){case"world-instance":i.but=t.Plt();break;case"instance-variable":{const t=s.dut();i.name=e.gut(t),i.type=e.yut(t);break}case"effect":{const t=e.VY(),r=s.xut(t);i.Cut=r;break}case"behavior":{const t=s.I0(e);i.T0=t;break}case"plugin":i.QJ=e.tY()}yield i}}kH(){if(this.Ult&&this.nut())return this.Ult;const t=this.J1();return t&&(this.Ult=t.kH()),this.Ult}dlt(){return this.Llt}hut(){return isNaN(this.Nlt)?this.Llt.hut():this.Nlt}Tut(t){this.Llt.Tut(t)}aat(){return this.Llt.aat()}lat(t){this.Llt.lat(t)}uht(){return this.Llt.uht()}t2(){return this.Llt.t2()}clt(){return this.Llt.clt()}Mut(){return this.Llt.Mut()}Iut(t){this.Llt.Iut(t)}uat(t){this.Llt.uat(t)}q1(t){for(const s of this.Elt())s.q1(t);for(const s of this._lt())s.q1(t)}Gut(){return this.Llt.Gut()}_ut(t){this.Llt._ut(t)}out(){return isNaN(this.Blt)?this.Llt.out():this.Blt}Put(t){this.Llt.Put(t)}Rut(t){this.Llt.Rut(t)}Aut(){const t=this.J1();return t&&t.g0().Eut()?t.g0().Aut():this.Llt.Aut()}Out(t){this.Llt.Out(t)}Fut(){const t=this.J1();return t&&t.g0().Eut()?t.g0().Fut():this.Llt.Fut()}eG(){return this.Llt.eG()}Rc(){return this.Llt.Rc()}rat(){return 0===this.eG()}Dut(){return 1===this.eG()}Lut(){return 2===this.eG()}kut(){return this.Klt}Cnt(){return this.Art}olt(){return this.Zlt}ZA(){return this.HA}Yat(){for(const t of this.Ylt)t.Yat();const t=this.iut(),s=t.nV();t.gat()?this.Hlt=this.Nut(s):this.Hlt=this.But(s)}xnt(){if(this.rut(),!this.nut()&&this.rat())return;const t=this.iut().gat(),s=t?0:this.Mut();for(const t of this.Ylt)t.xnt(s),0===this.Klt&&1===t.kut()&&(this.Klt=1),0===this.Art&&1===t.Cnt()&&(this.Art=1);this.Zlt=0,this.Ylt.some(t=>t.olt())&&(this.Zlt=1),this.Hlt=t?this.Nut(s):this.But(s),this.Wlt=!1,this.zlt=!1,this.vc(s),this.$ut(this.Hlt)}Uut(){const t=this.Vut(),s=this.Wut();let e,i;return this.Ynt.gat()?(e={nV:()=>t.nV()+this.clt(),F1:()=>t.zut()||"<no tags>"},i={nV:()=>s?s.nV()+this.clt():this.Mut(),F1:()=>s?.zut()||"<no tags>"}):(e={nV:()=>s?s.nV()+this.clt():this.Mut(),F1:()=>s?.zut()||"<no tags>"},i={nV:()=>t.nV()+this.clt(),F1:()=>t.zut()||"<no tags>"}),[e,i]}Vut(){const t=this.Ynt.nV()-this.clt();return this.Ynt.gat()?this.Nut(t):this.But(t)}Wut(){return this.Ynt.gat()?this.Vut().eht():this.Vut().jut()}nlt(){if(this.rut(),!this.nut()&&this.rat())return;const t=this.Ynt.gat(),s=this.Ynt.nV()-this.clt();this.Hlt=t?this.Nut(s):this.But(s);for(const t of this.Ylt)t.nlt(s)}ult(){if(!this.iut().Z1()&&(this.rut(),(this.nut()||!this.rat())&&!this.HA)){const t=this.Ynt.nV();t>=this.clt()+this.Mut()?this.vc(this.Mut(),!0,!1,!0,!1,!1,!0):t<=0&&this.vc(0,!0,!1,!0,!1,!1,!0)}}hlt(){for(let t=0,s=this.Ylt.length;t<s;t++){const s=this.Ylt[t];s.hlt(),0===this.Klt&&1===s.kut()&&(this.Klt=1),0===this.Art&&1===s.Cnt()&&(this.Art=1)}}flt(t,s=!1){const e=this.Ylt.length;for(let i=0;i<e;i++)this.Ylt[i].flt(t,s)}vc(t,s=!1,e=!1,i=!1,r=!1,n=!1,h=!1){this.$lt||this.J1();const o=this.$lt&&!this.$lt.NH(),a=0===this.Llt.qc;if((o||!a)&&!(n&&a&&this.yY().g8()||(t-=this.clt())<0)){this.Hut(t,s),this.qut(t,s,r),!this.iut().IsPlaying()&&this.iut().ylt()&&(t=this.iut().ylt().nV());for(let s=0,r=this.Ylt.length;s<r;s++)this.Ylt[s].vc(t,e,i,h);this.Jut(t,s),0!==this.Klt&&(this.Ult||(this.Ult=this.$lt.kH()),this.Ult&&this.Ult.NZ())}}mlt(t,s=!1){const e=this.Ylt.length;for(let i=0;i<e;i++)this.Ylt[i].mlt(t,s)}Hut(t,s){if(s&&this.HA&&!this.Wlt){if(this.iut().gat()){if(t<0)return}else if(t>this.Mut())return;for(const t of this.Ylt)t.xnt();this.Wlt=!0}}Jut(t,s){if(s&&this.HA&&!this.zlt)if(this.iut().gat()){if(t>=this.Mut()){for(const t of this.Ylt)t.vc(this.Mut(),!1,!0);this.zlt=!0}}else if(t<=0){for(const t of this.Ylt)t.vc(0,!1,!0);this.zlt=!0}}qut(t,s,e){if(this.Qlt=null,e)return;if(!s)return;if(!BS.uq.Cat)return;const i=this.iut();if(i.gat()){const s=this.Hlt.eht(),e=this.Hlt.nV(),r=s?s.nV():i.G1();(t<=e||t>=r)&&(this.Hlt=this.klt.Yut(t,this.Llt),s&&this.Xut(this.Hlt))}else{if(!this.klt.Kut(t,this.Llt))return;this.Hlt||(this.Hlt=this.klt.Kut(t,this.Llt));const s=this.Hlt.jut(),e=this.Hlt.nV(),i=s?s.nV():0;(t>=e||t<=i)&&(this.Hlt=this.klt.Kut(t,this.Llt),this.Hlt&&this.Xut(this.Hlt))}}Nut(t){return this.klt.Zut(t,this.Llt)||this.klt.Yut(t,this.Llt)}But(t){return this.klt.Zut(t,this.Llt)||this.klt.Kut(t,this.Llt)}Xut(t,s=!1){if(!BS.uq.Cat)return;const e=this.iut(),i=e.tat();BS.uq.Cat.aq.Tat(e),BS.uq.Cat.aq.Qut(t),i.lZ(BS.uq.Cat.aq.tct),i.lZ(BS.uq.Cat.aq.Xut),e.IsPlaying()||s||e.glt(t),BS.uq.Cat.aq.Pat(e),BS.uq.Cat.aq.sct(t),this.Qlt=t}ect(){return this.Qlt}$ut(t){this.Xut(t,!0)}ict(){return this.Llt.plt().rct()}nct(){const t=this.Llt.sut().hct(),s=BS.eut.KM(this,t);return this.Ylt.push(s),s}oct(t){this.Llt.plt().act(t)}lct(t){for(const s of this.Ylt)s.lct(t)}uct(){for(const t of this.Ylt)t.uct()}cct(){if(this.rut(),this.nut()||!this.rat())for(const t of this.Ylt)t.cct()}fct(){if(this.rut(),!this.nut()&&this.rat())return;let t=!1;for(const s of this.Ylt){const e=s.fct();!t&&e&&(t=!0)}if(t){const t=this.ict();t.M1(this.iut().nV()),t.q1("noease"),t._ut(!0),t.Sat("")}}Grt(){isNaN(this.jlt)||this.dct(this.jlt),this.jlt=NaN}wst(){const t=this.J1(),s=t?t.kK():this.hut();return{propertyTracksJson:this.pct(),lastKeyframeDataItemJson:this.mct(),initialStateOfNestedSet:this.Wlt,endStateOfNestedSet:this.zlt,instanceUid:s,cleared:this.Vlt}}vst(t){if(t){this.gct(t.propertyTracksJson),this.yct(t.lastKeyframeDataItemJson),this.jlt=t.instanceUid,this.Wlt=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.Wlt=t.initialStateOfNestedSet),this.zlt=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.zlt=t.endStateOfNestedSet),this.Vlt=!!t.hasOwnProperty("cleared")&&t.cleared;for(const t of this.Ylt)0===this.Klt&&1===t.kut()&&(this.Klt=1),0===this.Art&&1===t.Cnt()&&(this.Art=1);this.Zlt=0,this.Ylt.some(t=>t.olt())&&(this.Zlt=1)}}mct(){return this.Llt.plt().Sct(this.Hlt)}pct(){return this.Ylt.map(t=>t.wst())}gct(t){t.forEach((t,s)=>{this.Ylt[s].vst(t)})}dct(t){if(!BS.Ke(t))return;const s=this.Sq().EH(t);s&&this.iut().Tlt(this.Llt.t2(),s,this.aut())}yct(t){const s=this.Llt.plt();this.Hlt=s.wct(t)}}}{const WS=self.Gs;WS.eut=class extends WS.zr{constructor(t,s){super(),this.vct=t,this.bct=s,this.xct=s.sut(),this.Klt=0,this.Art=0,this.Zlt=0,this.Cct=this.eat(),this.Tct=this.bct.Ict().Mct(),this.Gct=null,this._ct=null}static KM(t,s){return WS.Hr(WS.eut,t,s)}qr(){this.vct=null,this.Cct&&(this.Cct.qr(),this.Cct=null),this.Tct=null,this.bct=null,this.xct=null}kut(){return this.Klt}Cnt(){return this.Art}olt(){return this.Zlt}Pct(){return!!this._ct}Rct(t){this._ct=t}Act(){return this._ct}Ect(){return this.vct}Oct(){return this.bct}sut(){return this.xct}iut(){return this.vct.iut()}Sq(){return this.vct.Sq()}J1(){return this.vct.J1()}eat(){if(this.Cct)return this.Cct;let t;switch(this.bct.fut()){case"behavior":t=new WS.eut.Fct(this);break;case"effect":t=new WS.eut.Dct(this),this.Art=1;break;case"instance-variable":t=new WS.eut.Lct(this);break;case"plugin":t=new WS.eut.kct(this),this.Art=1;break;case"world-instance":t=new WS.eut.Nct(this),this.Art=1,this.Klt=1;break;case"value":t=new WS.eut.Bct(this);break;case"audio":t=new WS.eut.$ct(this)}return this.Cct=t,this.Cct}fut(){return this.bct.fut()}Uct(t){this.bct.Uct(t)}Vct(){return this.bct.Wct()}zct(t){this.bct.jct(t)}s2(){return this.eat().Hct()}Plt(){return this.bct.qct()}Jct(t){this.bct.Yct(t)}Xct(){return this.bct.eG()}Kct(t){this.bct.Zct(t)}Qct(){return this.sut().tft(this.bct).eG()}sft(){return this.bct.sft()}eft(t){this.bct.eft(t)}ift(){return this.bct.ift()}rft(t){this.bct.rft(t)}Gut(){return this.bct.Gut()}_ut(t){this.bct._ut(t)}aat(){return this.bct.aat()}lat(t){this.bct.lat(t)}uht(){return this.bct.uht()}uat(t){this.bct.uat(t)}q1(t){for(const s of this.nft())s.q1(t)}hft(){return this.bct.hft()}nft(){return this.Tct||(this.Tct=this.bct.Ict().Mct()),this.Tct}sht(){return this.bct.Ict().sht()}oft(t){return this.xct.oft(t,this.bct)}aft(t){return this.xct.aft(t,this.bct)}lft(t){let s,e=this.xct.oft(t,this.bct);return e?s=this.xct.uft(t,this.bct):(e=this.xct.aft(t,this.bct),s=this.xct.cft(t,this.bct)),{start:e,end:s}}*fft(){for(const t of this.nft())yield t.Sht()}*dft(){for(const t of this.nft())yield t.nV()}blt(){this.eat().blt()}Ent(){this.eat().Ent()}pft(){return this.eat().pft()}Yat(){this.eat().Yat()}xnt(t){this.eat().xnt(),this.Gct=this.mft(t),this.hlt()}nlt(t){this.eat().nlt(),this.Gct=this.mft(t)}hlt(){const t=this.Ect();if(this.Zlt=0,t.rat()){const s=this.iut(),e=t.J1(),i=this.eat(),r=this.Plt();if(i.gft()){const t=s.sat(e,i,r,this);t&&t.length&&(this.Zlt=1)}else this.Zlt=0}}mft(t){const s=this.iut();return this.xct.oft(t,this.bct)||(s.gat()?this.xct.aft(t,this.bct):this.xct.cft(t,this.bct))}flt(t,s){let e,i;if(s)e=this.xct.aft(t,this.bct);else{if(this.Gct){const s=this.iut(),e=this.Gct.eht(),i=this.Gct.nV(),r=e?e.nV():s.G1();(t<=i||t>=r)&&(this.Gct=this.xct.aft(t,this.bct))}else this.Gct=this.xct.aft(t,this.bct);e=this.Gct}e&&(i=e.eht()),this.Cct.flt(e,i)}vc(t,s=!1,e=!1,i=!1){let r,n,h=!1;if(s)r=this.xct.aft(t,this.bct);else{if(this.Gct){const s=this.iut(),e=this.Gct.eht(),i=this.Gct.nV(),r=e?e.nV():s.G1();(t<=i||t>=r)&&(this.Gct=this.xct.aft(t,this.bct),h=!0)}else this.Gct=this.xct.aft(t,this.bct),h=!0;r=this.Gct}r&&(n=r.eht()),this.Cct.vc(t,r,n,s,e,i,h)}yft(t){if(this.Gct){const s=this.iut(),e=this.Gct.eht(),i=this.Gct.nV(),r=e?e.nV():s.G1();(t<=i||t>=r)&&(this.Gct=this.xct.aft(t,this.bct))}else this.Gct=this.xct.aft(t,this.bct);const s=this.Gct,e=s.eht();return this.Cct.yft(t,s,e)}Sft(t,s,e){return this.Cct.yft(t,s,e)}mlt(t,s){let e,i;if(s)e=this.xct.aft(t,this.bct);else{if(this.Gct){const s=this.iut(),e=this.Gct.eht(),i=this.Gct.nV(),r=e?e.nV():s.G1();(t<=i||t>=r)&&(this.Gct=this.xct.aft(t,this.bct))}else this.Gct=this.xct.aft(t,this.bct);e=this.Gct}e&&(i=e.eht()),this.Cct.mlt(e,i)}static wft(t,s){const e=s.Oct();return s.xct.aft(t,e)}static vft(t,s){const e=s.Oct();return s.xct.cft(t,e)}static bft(t,s,e){return s?e.iut().gat()?t.Sht():s.Sht():t.Sht()}xft(){const t=this.bct.Ict().Cft();return this.Gct=null,t}lct(t){this.Gct=null,this.bct.Ict().Tft(t)}uct(){this.eat().uct()}cct(){if(this.eat().cct()){const t=this.xct.tft(this.bct),s=this.eat().pft();t.Mft(s)}}fct(){const t=this.eat().fct();return t&&this.Ift(),this.eat().Gft(),t}Ift(){const t=this.iut().nV(),s=this.eat(),e=WS.eut.wft(t,this),i=this.xft();i.Zct(e.eG()),i.M1(t),i.q1(e._ft()),i._ut(!0),i.Pft(s.Rft()),i.Mft(s.pft())}wst(){return{sourceAdapterJson:this.eat().wst()}}vst(t){t&&this.eat().vst(t.sourceAdapterJson)}}}{const zS=self.Gs,jS=zS.eut;jS.Nct=class{constructor(t){this.Aft=t,this.Eft=null,this.Oft()}qr(){this.Eft&&(this.Eft.qr(),this.Eft=null),this.Aft=null}gft(){return this.Eft.gft()}e2(){return this.Aft}blt(){this.Eft&&this.Eft.blt()}Ent(){this.Eft&&this.Eft.Ent()}Oft(){return this.Eft||(this.Eft=this.Fft()),this.Eft}dut(){}Mz(){return this.dut()}Dft(){}Yat(){this.Oft().Yat()}xnt(){this.Oft().xnt()}nlt(){this.Oft().nlt()}flt(t,s){this.Eft.Lft(t,s)}vc(t,s,e,i,r,n,h){let o;switch(this.Aft.Qct()){case"numeric":o=jS.kft.vc(t,s,e,this.Aft);break;case"angle":o=jS.Nft.vc(t,s,e,this.Aft);break;case"boolean":o=jS.Bft.vc(t,s,e,this.Aft);break;case"color":o=jS.$ft.vc(t,s,e,this.Aft);break;case"text":o=jS.Uft.vc(t,s,e,this.Aft)}this.Eft.Vft(t,o,s,e,i,r,n,h)}yft(t,s,e){switch(this.Aft.Qct()){case"numeric":return jS.kft.vc(t,s,e,this.Aft);case"angle":return jS.Nft.vc(t,s,e,this.Aft);case"boolean":return jS.Bft.vc(t,s,e,this.Aft);case"color":return jS.$ft.vc(t,s,e,this.Aft);case"text":return jS.Uft.vc(t,s,e,this.Aft)}}mlt(t,s){this.Eft.Wft(t,s)}uct(){this.Oft().zft()}Gft(){this.Oft().Gft()}pft(){return this.Oft().pft()}cct(){return this.Oft().cct()}fct(){return this.Oft().fct()}Rft(){const t=this.Aft,s=t.Ect().iut().nV(),e=jS.wft(s,t),i=e.eht();switch(t.Qct()){case"numeric":return jS.kft.vc(s,e,i,t);case"angle":return jS.Nft.vc(s,e,i,t);case"boolean":return jS.Bft.vc(s,e,i,t);case"color":return jS.$ft.vc(s,e,i,t);case"text":return jS.Uft.vc(s,e,i,t)}}Fft(){const t=this.Aft;switch(t.hft()?t.Qct():""){case"combo":case"boolean":case"text":case"string":return new jS.Hft.jft(this);case"numeric":case"number":case"angle":return"combo"===this.Aft.Xct()?new jS.Hft.jft(this):new jS.Hft.qft(this);case"color":case"offsetColor":return new jS.Hft.Jft(this);default:return new jS.Hft.qft(this)}}wst(){return{propertyAdapterJson:this.Oft().wst()}}vst(t){t&&this.Oft().vst(t.propertyAdapterJson)}}}{const HS=self.Gs,qS=0;class JS extends HS.eut.Nct{constructor(t){super(t),this.Yft=NaN}dut(){return this.Aft.Oct().Wct()[0]}Mz(){return this.Yft?this.Yft:super.Mz()}Dft(){return this.Aft.Ect().J1()}Sut(t){this.Aft.Oct().Wct()[0]!==t&&(this.Yft=t)}vc(t,s,e,i,r,n,h){this.Oft().Xft(s.Hct())&&super.vc(t,s,e,i,r,n,h)}yft(t,s,e){if(this.Oft().Xft(s.Hct()))return super.yft(t,s,e)}wst(){return Object.assign(super.wst(),{index:this.Yft})}vst(t){t&&(super.vst(t),this.Yft=t.index)}}HS.eut.Lct=JS}{const YS=self.Gs,XS=0,KS=1,ZS=2;class QS extends YS.eut.Nct{constructor(t){super(t),this.x8=NaN}dut(){return this.Aft.Oct().Wct()[1]}Dft(){const t=this.Aft.Oct(),s=this.Aft.Ect(),e=this.x8?this.x8:t.Wct()[0],i=s.J1(),r=i.Kft(e);return i.Zft()[r].g0()}I0(t){const s=this.Aft.Oct().Wct()[2];return t.Qft(s)}vut(t){this.Aft.Oct().Wct()[0]!==t&&(this.x8=t)}vc(t,s,e,i,r,n,h){const o=this.Aft.Ect().J1();this.I0(o.yY())&&super.vc(t,s,e,i,r,n,h)}yft(t,s,e){const i=this.Aft.Ect().J1();if(this.I0(i.yY()))return super.yft(t,s,e)}wst(){return Object.assign(super.wst(),{sid:this.x8})}vst(t){t&&(super.vst(t),this.x8=t.sid)}}YS.eut.Fct=QS}{const tw=self.Gs,sw=0,ew=1;class iw extends tw.eut.Nct{constructor(t){super(t)}dut(){return this.Aft.Oct().Wct()[1]}Dft(){const t=this.Aft.Ect().kH().LZ(),s=t.VY(),e=this.xut(s).Mz();return t.E0(e)?t.tdt(e):null}xut(t){const s=this.Aft.Oct().Wct()[0];return t.sdt(s)}vc(t,s,e,i,r,n,h){this.edt()&&super.vc(t,s,e,i,r,n,h)}yft(t,s,e){if(this.edt())return super.yft(t,s,e)}edt(){const t=this.Aft.Ect().kH().LZ(),s=t.VY(),e=this.xut(s);if(!e)return;const i=e.Mz();return t.E0(i)}}tw.eut.Dct=iw}{const rw=self.Gs,nw=0,hw=1,ow=0;class aw extends rw.eut.Nct{constructor(t){super(t),this.idt=null,this.rdt=null,this.ndt=!1}dut(){return this.Aft.Oct().Wct()[0]}Dft(){return this.Aft.Ect().J1().g0()}vc(t,s,e,i,r,n,h){const o=this.Aft.Ect();o.yY().tY()===o.J1().yY().tY()&&super.vc(t,s,e,i,r,n,h)}yft(t,s,e){const i=this.Aft.Ect();if(i.yY().tY()===i.J1().yY().tY())return super.yft(t,s,e)}hdt(t,s){if(!s)return!0;if(t?.Sht()===s?.Sht())return!0;const e=this.Aft?.aat();return"discrete"===e}odt(t,s,e){const i=t.ect();return!!i&&(this.Aft.iut().gat()?i.nV()===s.nV():i.nV()===e.nV())}Yat(){this.Oft().Yat();const t=this.Aft.Ect().yY().tY();this.ndt=!1,rw.uq.adt&&t instanceof rw.uq.adt&&"initial-animation"===this.Aft.Plt()&&(this.ndt=!0)}ldt(){const t=this.ndt;return this.ndt=!1,t}udt(t,s){const e=this.Aft.Ect(),i=e.yY().tY();if(rw.uq.adt&&i instanceof rw.uq.adt&&("initial-frame"===this.Aft.Plt()||"initial-animation"===this.Aft.Plt()))switch(this.Aft.uht()){case"relative":return this.idt?(this.idt.cdt=t.ght("initial-animation")?.fdt()??0,this.idt.ddt=this.odt(e,t,s),this.idt.pdt=this.hdt(t,s),this.idt):(this.idt={mdt:(t,s,i,r,n)=>{if(s!==r){const i=r/s,n=e.e2("offsetWidth"),h=e.e2("offsetScaleX");if(n||h){const o=n?.eat()?.Oft(),a=h?.eat()?.Oft();if(t.OQ()&&t.$Q())a&&a.gdt(r),t.hy(this.ydt(r,s,t,e,o,a));else{const s=r*((t.wdt()?.Sdt()??this.vdt(t,e))/this.vdt(t,e));a&&a.gdt(r);const n=o?.bdt()??0,h=a?.bdt()??0;t.hy(s+(n+h*i))}}else t.hy(t.Cy()*i)}if(i!==n){const s=n/i,r=e.e2("offsetHeight"),h=e.e2("offsetScaleY");if(r||h){const o=r?.eat()?.Oft(),a=h?.eat()?.Oft();if(t.OQ()&&t.VQ())a&&a.gdt(n),t.oy(this.xdt(n,i,t,e,o,a));else{const i=n*((t.wdt()?.Cdt()??this.Tdt(t,e))/this.Tdt(t,e));a&&a.gdt(n);const r=o?.bdt()??0,h=a?.bdt()??0;t.oy(i+(r+h*s))}}else t.oy(t.My()*s)}},cdt:t.ght("initial-animation")?.fdt()??0,ddt:this.odt(e,t,s),pdt:this.hdt(t,s)},this.idt);case"absolute":return this.rdt?(this.rdt.cdt=t.ght("initial-animation")?.fdt()??0,this.rdt.ddt=this.odt(e,t,s),this.rdt.pdt=this.hdt(t,s),this.rdt):(this.rdt={cdt:t.ght("initial-animation")?.fdt()??0,ddt:this.odt(e,t,s),pdt:this.hdt(t,s)},this.rdt)}}Mdt(t,s,e,i=0){const r=s.iut().Rlt(t.J1());if(!r)return i;const n=r.e2(e);if(!n)return i;const h=n.Oct().Ict();if(!h)return i;const o=h.Idt();return o?o.Hct():i}vdt(t,s){const e=s.iut().Rlt(t.J1());if(e)return e.Aut();const i=t.J1().g0();return i.Eut()?i.Aut():t.wdt().Sdt()}Tdt(t,s){const e=s.iut().Rlt(t.J1());if(e)return e.Fut();const i=t.J1().g0();return i.Eut()?i.Fut():t.wdt().Cdt()}ydt(t,s,e,i,r,n){const h=e.wdt().Sdt(),o=h/e.vQ().wdt().Sdt();let a=1;const l=n?.Gdt()??0;if(0!==l){const t=h/this.vdt(e,i);a=(t+l)/(0===t?Number.EPSILON:t)}const u=h*(t/s);let c=r?._dt()??0;c+=u-h;const f=(h+c)/(0===h?Number.EPSILON:h);return e.vQ().Cy()*o*a*f}xdt(t,s,e,i,r,n){const h=e.wdt().Cdt(),o=h/e.vQ().wdt().Cdt();let a=1;const l=n?.Pdt()??0;if(0!==l){const t=h/this.Tdt(e,i);a=(t+l)/(0===t?Number.EPSILON:t)}const u=h*(t/s);let c=r?.Rdt()??0;c+=u-h;const f=(h+c)/(0===h?Number.EPSILON:h);return e.vQ().My()*o*a*f}}rw.eut.kct=aw}{const lw=self.Gs;class uw extends lw.eut.Nct{constructor(t){super(t),this.Adt=0,this.Edt=!1}gft(){return!1}xnt(){const t=this.Aft.sut();let s=this.Aft.Oct();s=t.tft(s),this.Adt=s.Sht()}nlt(){}Hct(){return this.Edt||this.Aft.vc(0),this.Adt}vc(t,s,e,i,r,n,h){this.Adt=lw.eut.kft.vc(t,s,e,this.Aft),this.Edt=!0}uct(){}Gft(){}pft(){return this.Adt}cct(){return!1}fct(){return!1}wst(){return{value:this.Adt,init:this.Edt}}vst(t){t&&(this.Adt=t.value,this.Edt=!t.hasOwnProperty("init")||t.init)}}lw.eut.Bct=uw}{const cw=self.Gs,fw=0,dw=0,pw=1,mw=1,gw=2,yw=3;class Sw extends cw.eut.Nct{constructor(t){super(t),this.Odt=!1,this.Fdt=null,this.Ddt=null,this.Ldt=null,this.Ynt=this.Aft.iut(),this.vct=this.Aft.Ect(),this.kdt=this.Aft.Vct(),this.Ndt=this.kdt[0],this.Bdt=this.kdt[1],this.kdt[3]?this.$dt=this.kdt[3]:this.$dt=Math.random().toString(36).slice(2),this.Udt=NaN,this.Vdt=NaN,this.Wdt=NaN,this.zdt=null,this.jdt()}qr(){super.qr(),this.Fdt=null,this.Ddt=null,this.Ldt=null,this.Ynt=null,this.vct=null,this.kdt=null,this.Ndt=null,this.zdt=null}jdt(){if(!self.Gs.uq.Audio)return;const t=this.Aft.Sq().Hdt(self.Gs.uq.Audio);t&&(this.Fdt=t.KJ().g0()),this.Ddt=self.Gs.uq.Audio.qdt,this.Ldt=self.Gs.uq.Audio.Jdt}Ydt(){if(this.zdt)return;const t=this.Aft.Ect().e2("audioSource");t&&(this.zdt=t.eat())}Xdt(){const t=this.Aft.Ect().e2("volume");return t?t.eat().Vdt:this.Vdt}blt(){super.blt(),this.Odt=!1,this.Fdt&&(this.Ldt&&(this.Udt=this.Ldt.Kdt.call(this.Fdt,this.$dt),this.Vdt=this.Ldt.Zdt.call(this.Fdt,this.$dt)),this.Ddt&&this.Ddt.b1.call(this.Fdt,this.$dt))}Qdt(){return this.$dt}tpt(){return this.Wdt}spt(t){this.Wdt=t}xnt(){super.xnt(),this.Udt=NaN,this.Odt=!1}nlt(){super.nlt();const t=this.Aft.iut().nV();switch(this.Udt=t-this.Bdt,this.Aft.Plt()){case"audioSource":break;case"volume":this.Vdt=this.Aft.yft(t)}this.Odt=!1}vc(t,s,e,i,r,n,h){if(this.Fdt)switch(this.Aft.Plt()){case"audioSource":{if(!this.Ynt.gat())return;if(i)return void(this.Ddt&&this.Ddt.b1.call(this.Fdt,this.$dt));if(t<this.Bdt)return void(this.Odt=!1);const s=this.Ldt.ept.call(this.Fdt,this.$dt),e=this.Ynt.O1();if(e!==s&&this.Ddt.E1.call(this.Fdt,this.$dt,e),this.Odt)return;if(!this.Aft.iut().IsPlaying())return;if(this.Odt=!0,isNaN(this.Udt)){const s=self.performance.now(),e=t-this.Bdt;if("suspended"===this.Fdt.ipt())return void(this.Odt=!1);const i=e+(self.performance.now()-s)/1e3;if(this.Ddt){let t=this.tpt();isNaN(t)?(this.spt(0),t=0):this.spt(t),this.Ddt.rpt.call(this.Fdt,this.Ndt,t,this.$dt,i)}}else{const t=this.Udt;this.Udt=NaN;const s=this.Xdt();if(this.Vdt=NaN,"suspended"===this.Fdt.ipt())return void(this.Odt=!1);this.Ddt&&(this.spt(s),this.Ddt.rpt.call(this.Fdt,this.Ndt,s,this.$dt,t))}break}case"volume":this.Ydt(),super.vc(t,s,e,i,r,n,h)}}yft(t,s,e){if(this.Fdt)switch(this.Aft.Plt()){case"audioSource":return;case"volume":return this.Ydt(),super.yft(t,s,e)}}npt(t,s){return this.zdt?this.zdt.tpt():0}hpt(t,s,e,i){this.zdt&&this.zdt.spt(this.npt()+s),this.Ddt&&this.zdt&&this.Ddt.spt.call(this.Fdt,this.zdt.Qdt(),this.zdt.tpt())}opt(t,s,e){this.zdt&&this.zdt.spt(s),this.Ddt&&this.zdt&&this.Ddt.spt.call(this.Fdt,this.zdt.Qdt(),this.zdt.tpt())}apt(){return!0}wst(){return{audioPlaybackStarted:this.Odt,audioTag:this.$dt,pauseTime:this.Udt,pauseVolume:this.Vdt,volume:this.Wdt}}vst(t){t&&(this.Odt=t.audioPlaybackStarted,this.$dt=t.audioTag,this.Udt=t.pauseTime,this.Vdt=t.pauseVolume,this.Wdt=t.volume,this.jdt())}}cw.eut.$ct=Sw}{const ww=self.Gs;ww.eut.Hft=class{constructor(t){this.Cct=t,this.Aft=t.e2(),this.Ult=this.Aft.Ect().kH(),this.lpt=this.Aft.Plt(),this.upt=!1,this.cpt=null,this.fpt=null}qr(){this.Cct=null,this.Aft=null,this.Ult=null,this.cpt=null,this.fpt=null}gft(){return!1}blt(){}Ent(){this.Ult=null,this.cpt=null,this.fpt=null}eat(){return this.Cct}e2(){return this.Aft}kH(){return this.Ult||(this.Ult=this.Aft.Ect().kH()),this.Ult}dpt(t){this.upt=!!t}ppt(){return this.upt}Yat(){}xnt(){}nlt(){}zft(){this.cpt=this.pft()}Gft(){this.cpt=null}pft(){}cct(){}fct(){}Xft(t){return typeof this.mpt()==typeof t}Lft(t,s){}Vft(t,s,e,i,r,n,h,o){}Wft(t,s){}gpt(){return this.Spt(()=>{const t=this.Aft.Oct();return this.Aft.sut().tft(t)},()=>{const t=this.Aft.Oct();return this.Aft.sut().Idt(t)}).ypt()}wpt(){const t=this.Aft.iut().nV()-this.Aft.Ect().clt();return this.Spt(()=>{const s=this.Aft.Oct();return this.Aft.sut().aft(t,s)},()=>{const s=this.Aft.Oct(),e=this.Aft.sut();return e.cft(t,s)||e.Idt(s)}).ypt()}Spt(t,s){return this.Aft.iut().gat()?t():s()}vpt(t,s){return"relative"===this.Aft.uht()?t():s()}bpt(t,s){return this.ppt()?(this.dpt(!1),t()):s()}xpt(t){}Cpt(){return this.Cct.Mz()}Tpt(){return this.fpt||(this.fpt=this.Cct.Dft()),this.fpt}Mpt(t,s,e,i,r,n){switch(this.Aft.fut()){case"behavior":return t();case"effect":return s();case"instance-variable":return e();case"plugin":return i();case"world-instance":return r();case"audio":return n()}}wst(){return{firstAbsoluteUpdate:this.upt,saveState:this.cpt}}vst(t){t&&(this.upt=t.firstAbsoluteUpdate,this.cpt=t.saveState)}Ipt(t,s=!1){const e=[];for(const i of t){const t=i.Ect().clt();for(const r of i.nft())s&&0===r.nV()?e.push({time:t+r.nV(),value:r.ypt()}):s||e.push({time:t+r.nV(),value:r.ypt()})}return e.sort((t,s)=>t.time-s.time)}Gpt(t,s,e){return this._pt(s,e)}_pt(t,s){for(let e=s.length-1;e>=0;e--)if(s[e].time<=t)return s[e];return null}}}{const vw=self.Gs,bw=new Map,xw=[0,0,0];class Cw extends vw.eut.Hft{constructor(t){super(t)}Yat(){}xnt(){}nlt(){}pft(){const t=this.Aft.fut(),s=this.Tpt(),e=this.Cpt();switch(t){case"behavior":case"plugin":return this.Ppt(s.Rpt(e));case"effect":return this.Ppt(s[e]);case"world-instance":return this.Ppt(this.mpt())}}cct(){const t=this.gpt();return!this.Apt(t,this.mpt())}fct(){return!vw.ti(this.cpt)&&!this.Apt(this.cpt,this.mpt())}Apt(t,s){return t=this.Ept(t),s=this.Ept(s),t.Ho(s)}gpt(){const t=super.gpt();return this.Ept(t)}wpt(){const t=super.wpt();return this.Ept(t)}xpt(t){}Ppt(t){return vw.Li(t,vw.To)?t.toArray().slice(0,3):t.slice(0,3)}Ept(t){return vw.Li(t,vw.To)?t:new vw.To(t[0],t[1],t[2],1)}Xft(t){return!0}gft(){return!0}Lft(){const t=this.Aft.iut(),s=this.Aft.J1(),e=this.Aft.eat(),i=t.sat(s,e,this.lpt,this.Aft);if(i&&i.length>1){bw.has(s)||bw.set(s,new Map);const t=bw.get(s),e=this.Aft.fut();t.has(e)||t.set(e,new Map);const i=t.get(e);i.has(this.lpt)||i.set(this.lpt,{Opt:!1,color:new vw.To(0,0,0,1)})}}Fpt(t,s,e){const i=bw.get(t).get(s).get(e);return i.Opt=!0,i.color}Vft(t,s,e,i,r,n,h,o){const a=this.Aft.iut(),l=this.Aft.Ect(),u=this.Aft.J1(),c=this.Aft.eat(),f=this.Aft.fut(),d=this.lpt,p=a.sat(u,c,d,this.Aft);if(p&&p.length>1){const t=this.Ipt(p,!0),e=this.Gpt(a,a.nV(),t);if(e){const t=l.clt(),i=e.time-t;if(0===i)this.Fpt(u,f,this.lpt).Ao(s[0],s[1],s[2]);else{if(i<0)return;const t=s[0],e=s[1],r=s[2],n=this.Aft.vc(i,!1,!0),h=vw.To.Ca(t,n[0]),o=vw.To.Ca(e,n[1]),a=vw.To.Ca(r,n[2]);this.Fpt(u,f,this.lpt).Ao(h,o,a)}}}else this.Dpt(s[0],s[1],s[2])}Wft(){const t=this.Aft.J1();if(!bw.has(t))return;const s=bw.get(t),e=this.Aft.fut();if(!s.has(e))return;const i=s.get(e);if(!i.has(this.lpt))return;const r=i.get(this.lpt),n=r.Opt,h=r.color;n&&this.Dpt(h.No(),h.Bo(),h.$o()),0===i.size&&s.delete(e),0===s.size&&bw.delete(t)}mpt(){const t=this.Aft.fut(),s=this.Tpt(),e=this.Cpt();switch(t){case"behavior":case"plugin":return this.Ept(s.Rpt(e));case"effect":return s[e].clone();case"world-instance":return this.kH().hQ().clone()}}Dpt(t,s,e){const i=this.Aft.fut(),r=this.Tpt(),n=this.Cpt();switch(i){case"behavior":case"plugin":xw[0]=t,xw[1]=s,xw[2]=e,r.Lpt(n,xw);break;case"effect":r[n].Ro(t,s,e);break;case"world-instance":this.kH().kpt(t,s,e)}}wst(){}vst(t){}}vw.eut.Hft.Jft=Cw}{const Tw=self.Gs,Mw=Tw.eut;class Iw extends Tw.eut.Hft{constructor(t){super(t)}Yat(){}xnt(){}nlt(){}pft(){return this.mpt()}cct(){return this.gpt()!==this.pft()}fct(){return!Tw.ti(this.cpt)&&this.cpt!==this.pft()}gft(){return!1}Vft(t,s,e,i,r,n,h,o){const a=this.Aft,l=a.Ect(),u=a.fut(),c=a.iut(),f=l.J1(),d=a.eat(),p=this.lpt,m=c.sat(f,d,p,a);if(m&&m.length>1){const e=this.Ipt(m),i=t+l.clt(),r=this.Gpt(c,i,e);r&&(s=r.value)}switch(a.Qct()){case"numeric":if(!Mw.kft.Npt(this.Cpt(),this.Tpt(),s,u))return;this.Dpt(s,e,i);break;case"angle":if(!Mw.Nft.Npt(this.Cpt(),this.Tpt(),s,u))return;this.Dpt(s,e,i);break;case"boolean":if(!Mw.Bft.Npt(this.Cpt(),this.Tpt(),s,u))return;this.Dpt(s,e,i);break;case"color":if(!Mw.$ft.Npt(this.Cpt(),this.Tpt(),s,u))return;this.Dpt(s,e,i);break;case"text":{const t=this.Bpt();if(!Mw.Uft.Npt(this.Cpt(),this.Tpt(),s,u)&&!t)return;this.Dpt(s,e,i);break}}}Bpt(){switch(this.Aft.fut()){case"behavior":case"effect":case"instance-variable":return!1;case"plugin":return this.eat().ldt()}return!1}mpt(){const t=this.Aft.fut(),s=this.Tpt(),e=this.Cpt();switch(t){case"behavior":case"plugin":return s.Rpt(e);case"effect":return s[e];case"instance-variable":return s.$pt(e)}}Dpt(t,s,e){const i=this.Aft.fut(),r=this.Tpt(),n=this.Cpt();switch(i){case"behavior":r.Lpt(n,t);break;case"effect":r[n]=t;break;case"instance-variable":r.Upt(n,t);break;case"plugin":r.Lpt(n,t,this.eat().udt(s,e))}}}Tw.eut.Hft.jft=Iw}{const Gw=self.Gs,_w=Gw.eut.Hft,Pw=new Map,Rw=(t,s,e,i,r,n=!1,h=null,o=null)=>{Pw.set(t,{Vpt:s,Wpt:e,zpt:i,round:r,jpt:n,init:h,reset:o})},Aw=(t,s)=>{const e=s.iut().Rlt(t.J1());if(e)return e.Aut();const i=t.J1().g0();return i.Eut()?i.Aut():t.wdt().Sdt()},Ew=(t,s,e,i=0)=>{const r=s.iut().Rlt(t.J1());if(!r)return i;const n=r.e2(e);if(!n)return i;const h=n.Oct().Ict();if(!h)return i;const o=h.Idt();return o?o.Hct():i},Ow=t=>{const s=[];let e=t.vQ();for(;e;)s.push(e),e=e.vQ();return s.reverse(),s};Rw("offsetX",(t,s,e,i)=>{"relative"===i.Aft.uht()?t.Hpt(s,e.iut().dat()):t.Hpt(s)},(t,s)=>t.uC(s),t=>t.lC(),!0),Rw("offsetY",(t,s,e,i)=>{"relative"===i.Aft.uht()?t.qpt(s,e.iut().dat()):t.qpt(s)},(t,s)=>t.dC(s),t=>t.fC(),!0),Rw("offsetWidth",(t,s,e,i,r=!1,n=!0)=>{if(0===s)return;const h="relative"===i.Aft.uht(),o=1===i.Jpt.eG();if((h||o)&&t.OQ()&&t.$Q()){if(isNaN(i.Ypt)){const s=Ow(t);let e;e=o?s[s.length-1].Cy():s[s.length-1].wdt().Sdt(),i.Ypt=0===e?Number.EPSILON:e}if(r)return;i.Xpt+=s;const e=s/i.Ypt;t.Ny(e,n),i.Kpt+=e}else t.Ny(s),i.Kpt+=s},(t,s)=>t.hy(s),t=>t.Cy(),!0,!1,null,t=>{t.Kpt=0,t.Xpt=0}),Rw("offsetHeight",(t,s,e,i,r=!1,n=!0)=>{if(0===s)return;const h="relative"===i.Aft.uht(),o=1===i.Jpt.eG();if((h||o)&&t.OQ()&&t.VQ()){if(isNaN(i.Ypt)){const s=Ow(t);let e;e=o?s[s.length-1].My():s[s.length-1].wdt().Cdt(),i.Ypt=0===e?Number.EPSILON:e}if(r)return;i.Zpt+=s;const e=s/i.Ypt;t.Qpt(e,n),i.Kpt+=e}else t.Qpt(s),i.Kpt+=s},(t,s)=>t.oy(s),t=>t.My(),!0,!1,null,t=>{t.Kpt=0,t.Zpt=0}),Rw("offsetAngle",(t,s,e,i,r)=>{t.tmt(s)},(t,s)=>t.JY(s),t=>t.YY(),!1,!0),Rw("offsetOpacity",(t,s,e,i,r)=>{s/=i.smt?i.smt:1;const n=t.FO()+s;if(0===i.emt)n>1?i.emt+=n-1:n<0&&(i.emt+=n),t.imt(s);else{const e=t.FO()+s;s>0&&i.emt>0?e>1&&(i.emt+=e-1):s>0&&i.emt<0?(i.emt+=s,i.emt>0&&(t.imt(i.emt),i.emt=0)):s<0&&i.emt>0?(i.emt+=s,i.emt<0&&(t.imt(i.emt),i.emt=0)):s<0&&i.emt<0&&e<0&&(i.emt+=e)}},(t,s)=>{t.LO(s)},t=>t.FO(),!1,!0,(t,s,e)=>{switch(t.emt=0,t.Aft.uht()){case"relative":{t.Aft.sut();const s=t.Aft.Oct().Ict().Mct();let e=t.kH().FO(),i=e;for(const r of s){const s=r.nV();i=e+t.Aft.yft(s),i=Gw.Zr(i,0,1)}t.rmt=e-i,t.rmt=Math.round(100*(t.rmt+Number.EPSILON))/100,i=e;for(let e=s.length-1;e>=0;e--){const r=s[e].nV();i-=t.Aft.yft(r),i=Gw.Zr(i,0,1)}t.nmt=i,t.nmt=Math.round(100*(t.nmt+Number.EPSILON))/100;break}}const i="relative"===t.Aft.uht(),r=1===t.Jpt.eG();if((i||r)&&s.OQ()&&s.JQ()){const i=Ow(s);let r=i[0].wdt().hmt();r+=Ew(i[0],e,"offsetOpacity");for(let t=1;t<i.length;t++)r+=Ew(i[t],e,"offsetOpacity");t.smt=0===r?1:r}},t=>{switch(t.Aft.uht()){case"relative":{t.emt=0;const s=t.kH();let e=s.FO();e=Math.round(100*(e+Number.EPSILON))/100,t.Aft.iut().gat()?(s.LO(e+t.rmt),t.HG=0):(s.LO(e-t.nmt),t.HG=t.eat().Rft());break}}}),Rw("offsetOriginX",(t,s)=>t.omt(s),(t,s)=>t.zZ(s),t=>t.WZ(),!1),Rw("offsetOriginY",(t,s)=>t.amt(s),(t,s)=>t.qZ(s),t=>t.HZ(),!1),Rw("offsetZElevation",(t,s)=>t.lmt(s),(t,s)=>t.mC(s),t=>t.pC(),!0),Rw("offsetScaleX",(t,s,e,i)=>{if(0===s)return;const r=t.Cy()<0?-1:1;if(i.umt+=s,"relative"===i.Aft.uht()&&t.OQ()&&t.$Q()){const n=Ew(t,e,"offsetWidth"),h=isNaN(i.cmt)?e.Aut():i.cmt,o=(h+n/(t.wdt().Sdt()/h))*r*s;isNaN(i.Ypt)&&Pw.get("offsetWidth").Vpt(t,1,e,i,!0);const a=o/i.Ypt;t.Ny(a,!0),i.Kpt+=a}else{const n=(isNaN(i.cmt)?e.Aut():i.cmt)*r*s;t.Ny(n),i.Kpt+=n}},(t,s,e)=>{t.hy(e.Aut()*s)},(t,s)=>{const e=t.Cy()<0?-1:1;if(t.$Q()){const i=t.vQ(),r=s.iut().Rlt(i.J1());let n=NaN;if(r)n=i.Cy()/r.Aut();else{const t=i.J1().g0();n=t.Eut()?i.Cy()/t.Aut():1}return t.Cy()*e/(s.Aut()*n)}return t.Cy()*e/s.Aut()},!1,!1,null,t=>{t.Kpt=0,t.cmt=NaN,t.umt=0}),Rw("offsetScaleY",(t,s,e,i)=>{if(0===s)return;const r=t.My()<0?-1:1;if(i.fmt+=s,"relative"===i.Aft.uht()&&t.OQ()&&t.VQ()){const n=Ew(t,e,"offsetHeight"),h=isNaN(i.cmt)?e.Fut():i.cmt,o=(h+n/(t.wdt().Cdt()/h))*r*s;isNaN(i.Ypt)&&Pw.get("offsetHeight").Vpt(t,1,e,i,!0);const a=o/i.Ypt;t.Qpt(a,!0),i.Kpt+=a}else{const n=(isNaN(i.cmt)?e.Fut():i.cmt)*r*s;t.Qpt(n),i.Kpt+=n}},(t,s,e)=>{t.oy(e.Fut()*s)},(t,s)=>{const e=t.My()<0?-1:1;if(t.VQ()){const i=t.vQ(),r=s.iut().Rlt(i.J1());let n=NaN;if(r)n=i.My()/r.Fut();else{const t=i.J1().g0();n=t.Eut()?i.My()/t.Fut():1}return t.My()*e/(s.Fut()*n)}return t.My()*e/s.Fut()},!1,!1,null,t=>{t.Kpt=0,t.cmt=NaN,t.fmt=0});class Fw extends Gw.eut.Hft{constructor(t){super(t),this.HG=0,this.emt=0,this.rmt=0,this.nmt=0,this.smt=NaN,this.Ypt=NaN,this.Kpt=0,this.cmt=NaN,this.Xpt=0,this.umt=0,this.Zpt=0,this.fmt=0,this.dmt=void 0,this.pmt=void 0,this.mmt=null,this.gmt=null,this.ymt=null,this.Smt=null,this.wmt=null,this.vmt=null,this.bmt=null,this.xmt=null,this.Cmt=!1,this.Tmt=!1,Gw.Li(this.Aft.iut(),Gw.Mmt)?this.Jpt=new Gw.eut.Hft.Imt(this):this.Jpt=new Gw.eut.Hft.Gmt(this);const s=this.Aft.Plt();switch(this.Aft.fut()){case"world-instance":{const t=Pw.get(s);this.mmt=t.zpt,this.gmt=t.Vpt,this.ymt=t.Wpt,this.Cmt=t.round,this.Tmt=t.jpt,this.wmt=t.init,this.Smt=t.reset;break}case"audio":this.vmt=t.npt,this.bmt=t.hpt,this.xmt=t.opt,this.Cmt=!!t.apt(),this.Tmt=!1}}qr(){this.Jpt=null,this.mmt=null,this.gmt=null,this.ymt=null,this.Smt=null,this.wmt=null,this.vmt=null,this.bmt=null,this.xmt=null,super.qr()}gft(){return this.Jpt.gft()}_mt(){return this.HG}Pmt(t){this.HG=t}Yat(){this.Smt&&this.Smt(this)}xnt(){const t=this.Jpt.xnt();if("number"==typeof t&&(this.HG=t),this.wmt){const t=this.kH(),s=this.Aft.Ect();this.wmt(this,t,s)}}nlt(){const t=this.Jpt.nlt();"number"==typeof t&&(this.HG=t)}pft(){return this.mpt()}cct(){return this.gpt()!==this.pft()}fct(){return!Gw.ti(this.cpt)&&this.cpt!==this.pft()}Lft(t,s){this.Jpt.Lft(t,s)}Vft(t,s,e,i,r,n,h,o){return this.Jpt.Vft(t,s,e,i,r,n,h,o)}Wft(t,s){this.Jpt.Wft(t,s)}mpt(){const t=this.Tpt(),s=this.Cpt(),e=this.kH(),i=this.Aft.Ect();switch(this.Aft.fut()){case"behavior":case"plugin":return t.Rpt(s);case"effect":return t[s];case"instance-variable":return t.$pt(s);case"world-instance":return this.mmt(e,i);case"audio":return this.vmt.call(this.eat(),e,i)}}Dpt(t,s,e,i=!0){const r=this.Tpt(),n=this.Cpt(),h=this.kH(),o=this.Aft.Ect();switch(this.Aft.fut()){case"behavior":r.Rmt(n,t);break;case"effect":r[n]+=t;break;case"instance-variable":r.Amt(n,t);break;case"plugin":r.Rmt(n,t,this.eat().udt(s,e));break;case"world-instance":this.gmt(h,t,o,this,!1,i);break;case"audio":this.bmt.call(this.eat(),h,t,o,this)}}Emt(t,s,e,i,r){let n=this.Aft.aat();if(n="default"===n?"continuous":n,"discrete"===n&&!s)return;if("discrete"===n&&e){const t=this.Aft.iut().nV();if(!this.Aft.oft(t))return}const h=this.Tpt(),o=this.Cpt(),a=this.kH(),l=this.Aft.Ect();switch(this.Aft.fut()){case"behavior":h.Lpt(o,t);break;case"effect":h[o]=t;break;case"instance-variable":h.Upt(o,t);break;case"plugin":h.Lpt(o,t,this.eat().udt(i,r));break;case"world-instance":this.ymt(a,t,l);break;case"audio":this.xmt.call(this.eat(),a,t,l)}}Omt(t,s,e,i,r,n,h,o){this.Jpt.Omt(t,s,e,i,r,n,h,o)}Fmt(t,s,e,i,r){"angle"===this.Aft.Xct()&&(t=Gw.sn(t));const n=(t.toString().split(".")[1]||"").length,h=this.mpt();let o;switch(o=0===n?this.Cmt?Math.round(h):this.Tmt?"angle"===this.Aft.Xct()?Gw.tn(Math.round(Gw.sn(h))):Number(Gw.toFixed(h,2)):h:this.Cmt?Number(Gw.toFixed(h,n)):(this.Tmt,h),this.Dpt(o-h,s,e,!1),this.Aft.Plt()){case"offsetWidth":case"offsetScaleX":{const t=this.kH(),s=t.Cy(),e=Number(Gw.toFixed(s,2));t.Ny(e-s);break}case"offsetHeight":case"offsetScaleY":{const t=this.kH(),s=t.My(),e=Number(Gw.toFixed(s,2));t.Qpt(e-s);break}}}wst(){return Object.assign(super.wst(),{v:this.HG,a:this.emt,fod:this.rmt,bod:this.nmt,of:this.smt,sf:this.Ypt,armorf:this.dmt,armandf:this.pmt,ca:this.Kpt,os:this.cmt,awo:this.Xpt,aho:this.Zpt,asxo:this.umt,asyo:this.fmt})}vst(t){t&&(super.vst(t),this.HG=t.v,this.emt=t.a,this.rmt=Gw.Ke(t.fod)?t.fod:0,this.nmt=Gw.Ke(t.bod)?t.bod:0,this.smt=Gw.Ke(t.of)?t.of:NaN,this.Ypt=Gw.Ke(t.sf)?t.sf:NaN,this.dmt=Gw.Ke(t.armorf)?t.armorf:void 0,this.pmt=Gw.Ke(t.armandf)?t.armandf:void 0,this.Kpt=Gw.Ke(t.ca)?t.ca:0,this.cmt=Gw.Ke(t.os)?t.os:NaN,this.Xpt=Gw.Ke(t.awo)?t.awo:0,this.Zpt=Gw.Ke(t.aho)?t.aho:0,this.umt=Gw.Ke(t.asxo)?t.asxo:0,this.fmt=Gw.Ke(t.asyo)?t.asyo:0)}gdt(t){this.cmt=t}bdt(){return this.Kpt}_dt(){return this.Xpt}Rdt(){return this.Zpt}Gdt(){return this.umt}Pdt(){return this.fmt}}Gw.eut.Hft.qft=Fw}{const Dw=self.Gs;class Lw{constructor(t){this.Dmt=!1,this.Adt=0,this.Lmt=!1,this.kmt=!1,this.Ylt=t;for(let t=0,s=this.Ylt.length;t<s;t++)this.Ylt[t].Rct(this)}_lt(){return this.Ylt}Nmt(){this.Dmt=!0}Bmt(){return this.Dmt}Pft(t){this.Adt=t}Hct(){return this.Adt}$mt(t){this.Lmt=t}Umt(){return this.Lmt}ult(t){this.kmt=t}Vmt(){return this.kmt}$f(){this.Dmt=!1,this.Adt=0,this.Lmt=!1,this.kmt=!1}}class kw{constructor(t){this.Wmt=t}qr(){this.Wmt=null}eG(){return 0}xnt(){const t=this.Wmt;return this.Wmt.e2(),t.vpt(()=>t.Spt(()=>0,()=>t.eat().Rft()),()=>{})}nlt(){}gft(){switch(this.Wmt,this.Wmt.e2().uht()){case"relative":return!1;case"absolute":return!0}}Lft(t,s){this.Wmt;const e=this.Wmt.e2(),i=e.Plt();switch(e.uht()){case"relative":break;case"absolute":if(e.Pct())e.Act().$f();else{const t=e.iut(),s=e.J1(),r=e.eat(),n=t.sat(s,r,i,e);n&&n.length>1&&new Lw(n)}}}Vft(t,s,e,i,r,n,h,o){const a=this.Wmt,l=this.Wmt.e2();switch(l.uht()){case"relative":{const h=a._mt();a.Dpt(s-h,e,i),n&&this.Omt(t,e,i,r,h,s),a.Pmt(s);break}case"absolute":{const t=l.iut(),r=l.Ect();if(l.J1(),l.eat(),l.Pct()){const e=l.Act(),i=e._lt(),n=a.Ipt(i,!0),u=a.Gpt(t,t.nV(),n);if(u){const t=r.clt(),i=u.time-t;if(0===i)e.ult(h),e.$mt(o),e.Nmt(),e.Pft(e.Hct()+s);else{if(i<0)return;const t=l.yft(i);e.ult(h),e.$mt(o),e.Nmt(),e.Pft(e.Hct()+(s-t))}}}else a.Emt(s,o,h,e,i);break}}}Wft(t,s){const e=this.Wmt,i=this.Wmt.e2();switch(i.uht()){case"relative":break;case"absolute":if(i.Pct()){const r=i.Act();r.Bmt()&&e.Emt(r.Hct(),r.Umt(),r.Vmt(),t,s)}}}Omt(t,s,e,i,r,n){const h=this.Wmt;i||(s&&t===s.nV()?h.Fmt(s.Sht(),s,e):e&&t===e.nV()?h.Fmt(e.Sht(),s,e):n-r===0&&h.Fmt(s.Sht(),s,e))}}Dw.eut.Hft.Gmt=kw}{const Nw=self.Gs;class Bw{constructor(t){this.Wmt=t}qr(){this.Wmt=null}eG(){return 1}xnt(){const t=this.Wmt;return t.dpt(!0),this.xpt(t.gpt())}nlt(){const t=this.Wmt;if(t.gpt()!==t.wpt())return t.dpt(!0),this.xpt(t.wpt())}gft(){return!1}Lft(){}Vft(t,s,e,i,r,n,h,o){const a=this.Wmt,l=a._mt();switch(a.e2().uht()){case"relative":a.Dpt(s-l,e,i),n&&this.Omt(t,e,i,r,l,s,!1,h);break;case"absolute":a.ppt()?(a.dpt(!1),a.Dpt(l,e,i)):0===t&&0===a.e2().iut().G1()?a.Emt(s,!0,!1,e,i):(a.Dpt(s-l,e,i),n&&this.Omt(t,e,i,r,l,s,this.zmt(),h))}a.Pmt(s)}Wft(){}xpt(t){return t-this.Wmt.pft()}zmt(){const t=this.Wmt,s=t.kH().J1(),e=t.e2().Sq().tat();let i=0;for(const t of e.Krt())0===t.eG()?t.ent(s)&&i++:1===t.eG()&&t.J1()===s&&i++;return i<=1}Omt(t,s,e,i,r,n,h,o){const a=this.Wmt;i?s&&t===s.nV()?a.Fmt(s.Sht(),s,e,h,o):e&&t===e.nV()?a.Fmt(e.Sht(),s,e,h,o):e||a.Fmt(s.Sht(),s,e,h,o):s&&t===s.nV()?a.Fmt(s.Sht(),s,e,h,o):e&&t===e.nV()?a.Fmt(e.Sht(),s,e,h,o):n-r===0&&a.Fmt(s.Sht(),s,e,h,o)}}Nw.eut.Hft.Imt=Bw}{const $w=self.Gs,Uw=self.Wu;$w.eut.kft=class{constructor(){}static Npt(t,s,e,i){let r;switch(i){case"behavior":case"plugin":r=s.Rpt(t);break;case"effect":r=s[t];break;case"instance-variable":r=s.$pt(t)}return r!==e}static vc(t,s,e,i){if(!e){const t=i.Oct();return i.sut().Idt(t).Sht()}let r=i.aat();if("default"===r&&(r="continuous"),"combo"===i.Xct()&&(r="discrete"),"discrete"===r)return $w.eut.bft(s,e,i);if("continuous"===r||"step"===r){const n=i.iut().hat();if("step"===r&&0!==n){const s=1/n;t=Math.floor(t*s)/s}const h=s.Sht(),o=e.Sht(),a=s.ght("cubic-bezier"),l=e.ght("cubic-bezier"),u=a&&a.jmt()&&l&&l.Hmt();if(!u&&h===o)return h;const c=s.nV(),f=e.nV();"step"===r&&0!==n&&(t=$w.Zr(t,c,f));const d=$w.normalize(t,c,f),p=s._ft();let m;if(u){const t=f-c;m=Uw.hc(p)(t*d,0,1,t),m=Uw.hc("cubicbezier")(m,h,h+a.bht(),o+l.Tht(),o)}else m=Uw.hc(p)((f-c)*d,h,o-h,f-c);return"integer"===i.Xct()?Math.floor(m):m}}}}{const Vw=self.Gs;Vw.eut.Nft=class{constructor(){}static Npt(t,s,e,i){let r;switch(i){case"behavior":case"plugin":r=s.Rpt(t);break;case"effect":r=s[t];break;case"instance-variable":r=s.$pt(t)}return r!==e}static vc(t,s,e,i){if(!e){const t=i.Oct();return i.sut().Idt(t).Sht()}let r=i.aat();if("default"===r&&(r="continuous"),"combo"===i.Xct()&&(r="discrete"),"discrete"===r)return Vw.eut.bft(s,e,i);if("continuous"===r||"step"===r){const n=i.iut().hat();if("step"===r&&0!==n){const s=1/n;t=Math.floor(t*s)/s}const h=s.nV(),o=e.nV(),a=s.Sht(),l=e.Sht();"step"===r&&0!==n&&(t=Vw.Zr(t,h,o));const u=s.ght("angle");if(!u){if(a===l)return a;const e=Vw.normalize(t,h,o),i=self.Wu.hc(s._ft());return Vw.fn(a,l,i(e,0,1,1))}{const e=u.qmt();if(a===l&&0===e)return a;const i=Vw.normalize(t,h,o),r=self.Wu.hc(s._ft())(i,0,1,1);switch(u.Jmt()){case"closest":return Vw.fn(a,l,r,e);case"clockwise":return Vw.dn(a,l,r,e);case"anti-clockwise":return Vw.pn(a,l,r,e)}}}}}}{const Ww=self.Gs;Ww.eut.Bft=class{constructor(){}static Npt(t,s,e,i){let r;switch(i){case"behavior":case"plugin":r=s.Rpt(t);break;case"effect":r=s[t];break;case"instance-variable":r=s.$pt(t)}return!!r!=!!e}static vc(t,s,e,i){if(!e){const t=i.Oct();return i.sut().Idt(t).Sht()?1:0}return Ww.eut.bft(s,e,i)?1:0}}}{const zw=self.Gs,jw=[0,0,0],Hw=[0,0,0],qw=[0,0,0];zw.eut.$ft=class{constructor(){}static Npt(t,s,e,i){let r;switch(i){case"behavior":case"plugin":r=s.Rpt(t);break;case"effect":r=s[t];break;case"instance-variable":r=s.$pt(t)}return Array.isArray(e)?(jw[0]=e[0],jw[1]=e[1],jw[2]=e[2]):(qw.oa(e),jw[0]=Math.floor(255*qw.No()),jw[1]=Math.floor(255*qw.Bo()),jw[2]=Math.floor(255*qw.$o())),Array.isArray(r)?(Hw[0]=r[0],Hw[1]=r[1],Hw[2]=r[2]):(qw.oa(r),Hw[0]=Math.floor(255*qw.No()),Hw[1]=Math.floor(255*qw.Bo()),Hw[2]=Math.floor(255*qw.$o())),jw[0]!==Hw[0]||jw[1]!==Hw[1]||jw[2]!==Hw[2]}static vc(t,s,e,i){if(!e){const t=i.Oct(),s=i.sut().Idt(t).Sht();return jw[0]=s[0],jw[1]=s[1],jw[2]=s[2],jw}let r=i.aat();if("default"===r&&(r="continuous"),"discrete"===r){const t=zw.eut.bft(s,e,i);return jw[0]=t[0],jw[1]=t[1],jw[2]=t[2],jw}if("continuous"===r||"step"===r){const n=i.iut().hat();if("step"===r&&0!==n){const s=1/n;t=Math.floor(t*s)/s}const h=s.nV(),o=e.nV(),a=s.Sht(),l=e.Sht();"step"===r&&0!==n&&(t=zw.Zr(t,h,o));const u=zw.normalize(t,h,o),c=s._ft(),f=a[0],d=a[1],p=a[2],m=l[0],g=l[1],y=l[2],S=self.Wu.hc(c),w=o-h,v=w*u;return jw[0]=f===m?f:S(v,f,m-f,w),jw[1]=d===g?d:S(v,d,g-d,w),jw[2]=p===y?p:S(v,p,y-p,w),jw}}}}{const Jw=self.Gs;Jw.eut.Uft=class{constructor(){}static Npt(t,s,e,i){let r;switch(i){case"behavior":case"plugin":r=s.Rpt(t);break;case"effect":r=s[t];break;case"instance-variable":r=s.$pt(t)}return r!==e}static vc(t,s,e,i){if(!e){const t=i.Oct();return i.sut().Idt(t).Sht()}return Jw.eut.bft(s,e,i)}}}{const Yw=self.Gs;Yw.ert=class{constructor(){this.Ymt=new Map}qr(){for(const t of this.Ymt.values())t.qr();this.Ymt.clear(),this.Ymt=null}$u(t){const s=new Yw.Xmt(t),e=s.Rc();this.Ymt.set(e,s)}Hs(t){return this.Ymt.get(t)}qot(){return 0}static Kmt(t,s,e,i){if(s)for(const r of s)Yw.ert.Zmt("create",r,t,e,i)}static Qmt(t,s,e,i){if(s)for(const r of s)Yw.ert.Zmt("create-including-disabled",r,t,e,i)}static tgt(t,s,e,i){t.length?s.forEach((s,e)=>{t[e].vst(s)}):s.forEach(s=>{Yw.ert.Zmt("load",s,t,e,i)})}static Zmt(t,s,e,i,r){let n;if("function"==typeof i)switch(t){case"load":n=new i(null,r);break;case"create":case"create-including-disabled":n=new i(s,r)}else if("object"==typeof i){const e=s[i.sgt],h=i.map.get(e);switch(t){case"load":n=new h(null,r);break;case"create":case"create-including-disabled":n=new h(s,r)}}switch(t){case"load":n.vst(s),e.push(n);break;case"create":if("function"==typeof n.Gut&&!n.Gut())return n.qr();e.push(n);break;case"create-including-disabled":e.push(n)}}}}{const Xw=self.Gs,Kw=0,Zw=1,Qw=2,tv=3,sv=4,ev=5,iv=6,rv=7,nv=8,hv=9,ov=10,av=11;Xw.Xmt=class{constructor(t){this.Xr="",this.llt=NaN,this.egt=0,this.igt="default",this.rgt="default",this.ngt=!1,this.hgt=!1,this.ogt=1,this.klt=null,this.agt="",this.lgt=!1,this.ugt=!0,t&&(this.Xr=t[0],this.llt=t[1],this.egt=t[2],this.igt=t[3],this.rgt=t[4],this.ngt=!!t[6],this.hgt=!!t[7],this.ogt=t[8],this.agt=t[9],this.lgt=!!t[10],this.ugt=!!t[11],this.klt=new Xw.cgt(t[5],this))}qr(){this.klt.qr(),this.klt=null}Zot(){return this.klt||(this.klt=new Xw.cgt(null,this)),this.klt}Rc(){return this.Xr}F3(t){this.Xr=t}G1(){return this.llt}I1(t){this.llt=t}hat(){return this.egt}oat(t){this.egt=t}aat(){return this.igt}lat(t){this.igt=t}uht(){return this.rgt}uat(t){this.rgt=t}P1(){return this.ngt}_1(t){this.ngt=t}A1(){return this.hgt}R1(t){this.hgt=t}V0(){return this.ogt}fat(t){this.ogt=t}Ont(){return this.agt}dat(){return this.lgt}pat(){return this.ugt}wst(){return{trackDataJson:this.klt.wst(),name:this.Xr,totalTime:this.llt,step:this.egt,interpolationMode:this.igt,resultMode:this.rgt,loop:this.ngt,pingPong:this.hgt,repeatCount:this.ogt,startOnLayout:this.agt,transformWithSceneGraph:!!this.lgt,useSystemTimescale:this.ugt}}vst(t){t&&(this.Zot().vst(t.trackDataJson),this.Xr=t.name,this.llt=t.totalTime,this.egt=t.step,this.igt=t.interpolationMode,this.rgt=t.resultMode,this.ngt=t.loop,this.hgt=t.pingPong,this.ogt=t.repeatCount,this.agt=t.startOnLayout,this.lgt=!!t.transformWithSceneGraph,this.ugt=!!t.useSystemTimescale)}}}{const lv=self.Gs,uv=0,cv=1,fv=2,dv=1,pv=2,mv=3,gv=4,yv=5,Sv=6,wv=7,vv=0,bv=1,xv=8,Cv=0,Tv=1,Mv=9,Iv=10;class Gv{constructor(t,s){this.klt=s,this.fgt=null,this.dgt=null,this.Nlt=NaN,this.Blt=NaN,this.igt="default",this.rgt="default",this.du=!1,this.pgt=null,this.xct=null,this.Uc="",this.mgt=null,this.ggt=0,this.ygt=this.klt.nat().G1(),this.qc=0,this.Xr="",t&&(t[0]&&(this.fgt=t[0],this.Nlt=t[0][2],this.Blt=t[0][1]),this.igt=t[1],this.rgt=t[2],this.du=!!t[3],t[6]&&(this.Uc=t[6]),t[7]&&(this.mgt=t[7],this.ggt=t[7][0],this.ygt=t[7][1]),t[8]&&(this.dgt=t[8]),t[8]&&(this.dgt=t[8]),t[9]&&(this.qc=t[9]),t[10]&&(this.Xr=t[10]),this.pgt=new lv.Sgt(t[4],this),this.xct=new lv.wgt(t[5],this))}qr(){this.fgt=null,this.klt=null,this.pgt&&(this.pgt.qr(),this.pgt=null),this.xct&&(this.xct.qr(),this.xct=null),this.mgt=null}Zot(){return this.klt}plt(){return this.pgt||(this.pgt=new lv.Sgt(null,this)),this.pgt}sut(){return this.xct||(this.xct=new lv.wgt(null,this)),this.xct}vgt(){return this.fgt}out(){return this.Blt}Put(t){this.Blt=t}hut(){return this.Nlt}Tut(t){this.Nlt=t}aat(){return this.igt}lat(t){this.igt=t}uht(){return this.rgt}uat(t){this.rgt=t}Gut(){return this.du}_ut(t){this.du=!!t}t2(){return this.Uc}clt(){return this.ggt}Mut(){return this.ygt}Iut(t){this.ygt=t}Aut(){return this.dgt[0]}Rut(t){this.dgt||(this.dgt=[]),this.dgt[0]=t}Fut(){return this.dgt||(this.dgt=[]),this.dgt[1]}Out(t){this.dgt||(this.dgt=[]),this.dgt[1]=t}eG(){return this.qc}Rc(){return this.Xr}wst(){return{keyframeDataJson:this.pgt.wst(),propertyTrackDataJson:this.xct.wst(),instanceData:this.fgt,additionalInstanceData:this.dgt,instanceUid:this.Nlt,objectClassIndex:this.Blt,interpolationMode:this.igt,resultMode:this.rgt,enabled:this.du,id:this.Uc,nestedData:this.mgt,type:this.qc,name:this.Xr}}vst(t){t&&(this.fgt=t.instanceData,this.Nlt=t.instanceUid,this.Blt=t.objectClassIndex,this.igt=t.interpolationMode,this.rgt=t.resultMode,this.du=t.enabled,this.Uc=t.id,this.qc=t.type?t.type:0,this.Xr=t.name?t.name:"",this.ygt=this.klt.nat().G1(),t.nestedData&&(this.mgt=t.nestedData,this.ggt=this.mgt[0],this.ygt=this.mgt[1]),t.additionalInstanceData&&(this.dgt=t.additionalInstanceData),this.plt().vst(t.keyframeDataJson),this.sut().vst(t.propertyTrackDataJson))}}lv.cgt=class{constructor(t,s){this.mot=s,this.bgt=[],lv.ert.Kmt(this.bgt,t,Gv,this)}qr(){this.mot=null;for(const t of this.bgt)t.qr();lv.bh(this.bgt),this.bgt=null}nat(){return this.mot}vlt(){const t=new Gv(null,this);return this.bgt.push(t),t}xgt(t){return t.plt().Jlt()[0]}Cgt(t){return t.plt().Jlt().at(-1)}Zut(t,s){const e=s.plt().Jlt(),i=e.length;for(let s=0;s<i;s++){const i=e[s];if(i.nV()===t)return i}}Tgt(t,s){const e=s.plt().Jlt(),i=e.length;for(let s=0;s<i;s++){const i=e[s];if(i.nV()>t)return i}}Kut(t,s){const e=s.plt().Jlt(),i=e.length;for(let s=0;s<i;s++){const i=e[s];if(i.nV()>=t)return i}}Yut(t,s){const e=s.plt().Jlt();for(let s=e.length-1;s>=0;s--){const i=e[s];if(i.nV()<=t)return i}}*Kot(){for(const t of this.bgt)yield t}wst(){return{trackDataItemsJson:this.bgt.map(t=>t.wst())}}vst(t){t&&lv.ert.tgt(this.bgt,t.trackDataItemsJson,Gv,this)}}}{const _v=self.Gs,Pv=0,Rv=0,Av=1,Ev=2,Ov=3,Fv=4,Dv=5,Lv=6,kv=7,Nv=8,Bv=9;class $v{constructor(t,s){this.xct=s,this.Mgt="",this.Igt=null,this.lpt=null,this.qc=null,this.Ggt=NaN,this._gt=NaN,this.igt="default",this.rgt="default",this.du=!1,this.Pgt=null,this.Rgt=!0,t&&(this.Mgt=t[0][0],this.Igt=t[0].slice(1),this.lpt=t[1],this.qc=t[2],this.Ggt=t[3],this._gt=t[4],this.igt=t[5],this.rgt=t[6],this.du=!!t[7],this.Pgt=new _v.Agt(t[8],this),this.Rgt=t[9])}qr(){this.Pgt.qr(),this.Pgt=null,this.xct=null,this.Igt=null}sut(){return this.xct}Ict(){return this.Pgt||(this.Pgt=new _v.Agt(null,this)),this.Pgt}fut(){return this.Mgt}Uct(t){this.Mgt=t}Wct(){return this.Igt}jct(t){this.Igt=t}qct(){return this.lpt}Yct(t){this.lpt=t}eG(){return this.qc}Zct(t){this.qc=t}sft(){return this.Ggt}eft(t){this.Ggt=t}ift(){return this._gt}rft(t){this._gt=t}aat(){return this.igt}lat(t){this.igt=t}uht(){return this.rgt}uat(t){this.rgt=t}Gut(){return this.du}_ut(t){this.du=!!t}hft(){return!!this.Rgt}wst(){return{propertyKeyframeDataJson:this.Pgt.wst(),sourceAdapterId:this.Mgt,sourceAdapterArguments:this.Igt,property:this.lpt,type:this.qc,min:this.Ggt,max:this._gt,interpolationMode:this.igt,resultMode:this.rgt,enabled:this.du,canHavePropertyKeyframes:this.Rgt}}vst(t){t&&(this.Mgt=t.sourceAdapterId,this.Igt=t.sourceAdapterArguments,this.lpt=t.property,this.qc=t.type,this.Ggt=t.min,this._gt=t.max,this.igt=t.interpolationMode,this.rgt=t.resultMode,this.du=t.enabled,this.Rgt=t.canHavePropertyKeyframes,this.Ict().vst(t.propertyKeyframeDataJson))}}_v.wgt=class{constructor(t,s){this.Llt=s,this.Egt=[],_v.ert.Kmt(this.Egt,t,$v,this)}qr(){this.Llt=null;for(const t of this.Egt)t.qr();_v.bh(this.Egt),this.Egt=null}dlt(){return this.Llt}hct(){const t=new $v(null,this);return this.Egt.push(t),t}tft(t){return t.Ict().Mct()[0]}Idt(t){return t.Ict().Mct().at(-1)}oft(t,s){const e=s.Ict().Mct(),i=e.length;for(let s=0;s<i;s++){const i=e[s];if(i.nV()===t)return i}}uft(t,s){const e=s.Ict().Mct(),i=e.length;for(let s=0;s<i;s++){const i=e[s];if(i.nV()>t)return i}}cft(t,s){const e=s.Ict().Mct(),i=e.length;for(let s=0;s<i;s++){const i=e[s];if(i.nV()>=t)return i}}aft(t,s){const e=s.Ict().Mct();for(let s=e.length-1;s>=0;s--){const i=e[s];if(i.nV()<=t)return i}}*tut(){for(const t of this.Egt)yield t}wst(){return{propertyTrackDataItemsJson:this.Egt.map(t=>t.wst())}}vst(t){t&&_v.ert.tgt(this.Egt,t.propertyTrackDataItemsJson,$v,this)}}}{const Uv=self.Gs,Vv=0,Wv=1,zv=2,jv=3;class Hv{constructor(t,s){if(this.pgt=s,this.sW=-1,this.Ogt="noease",this.Fgt=!1,this.Uot=null,this.Dgt=null,!t)return;this.sW=t[0],this.Ogt=t[1],this.Fgt=!!t[2];const e=t[3];this.Uot=e?e.split(" "):[],this.Dgt=new Set(this.Uot.map(t=>t.toLowerCase())),this.Lgt=null,this.kgt=null}qr(){this.pgt=null,Uv.bh(this.Uot),this.Uot=null,this.Dgt.clear(),this.Dgt=null,this.Lgt=null}plt(){return this.pgt}eht(){return this.Lgt}Ngt(t){this.Lgt=t}jut(){return this.kgt}Bgt(t){this.kgt=t}nV(){return this.sW}M1(t){this.sW=t,this.pgt.$gt()}_ft(){return this.Ogt}q1(t){this.Ogt=t}Gut(){return this.Fgt}_ut(t){this.Fgt=!!t}F1(){return this.Uot}Sat(t){this.Uot=t?t.split(" "):[],this.Dgt=new Set(this.Uot.map(t=>t.toLowerCase()))}Ugt(){return this.Dgt}zut(){return Array.from(this.Dgt).join(",").trim()}HK(t){return this.Dgt.has(t.toLowerCase())}wst(){return{time:this.sW,ease:this.Ogt,enable:this.Fgt,tags:this.Uot}}vst(t){t&&(this.sW=t.time,this.Ogt=t.ease,this.Fgt=t.enable,this.Uot=t.tags,this.Dgt=new Set(this.Uot.map(t=>t.toLowerCase())))}}Uv.Sgt=class{constructor(t,s){this.Llt=s,this.qlt=[],Uv.ert.Kmt(this.qlt,t,Hv,this),this.$gt()}qr(){this.Llt=null;for(const t of this.qlt)t.qr();Uv.bh(this.qlt),this.qlt=null}$gt(){this.qlt.sort((t,s)=>t.nV()-s.nV());for(let t=0;t<this.qlt.length;t++){const s=this.qlt[t];s.Ngt(this.qlt[t+1]),s.Bgt(this.qlt[t-1])}}dlt(){return this.Llt}Vgt(){return this.qlt.length}Jlt(){return this.qlt}rct(){const t=new Hv(null,this);return this.qlt.push(t),this.$gt(),t}act(t){for(const s of this.qlt){if(!t(s))continue;const e=this.qlt.indexOf(s);-1!==e&&(s.qr(),this.qlt.splice(e,1))}this.Wgt(),this.$gt()}Wgt(){this.qlt.sort((t,s)=>t.nV()-s.nV())}Sct(t){return this.qlt.indexOf(t)}wct(t){return this.qlt[t]}*zgt(){for(const t of this.qlt)yield t}*jgt(){for(let t=this.qlt.length-1;t>=0;t--)yield this.qlt[t]}wst(){return{keyframeDataItemsJson:this.qlt.map(t=>t.wst())}}vst(t){t&&(Uv.ert.tgt(this.qlt,t.keyframeDataItemsJson,Hv,this),this.$gt())}}}{const qv=self.Gs,Jv=0,Yv=0,Xv=1,Kv=2,Zv=1,Qv=2,tb=3,sb=4,eb=5;class ib{constructor(t,s){this.Pgt=s,this.Adt=null,this.Hgt=null,this.qc="",this.sW=NaN,this.Ogt="noease",this.Fgt=!1,this.qgt=null,this.Jgt=void 0,this.Ygt="line",t&&(this.Adt=t[0][0],this.Hgt=t[0][1],this.qc=t[0][2],this.sW=t[1],this.Ogt=t[2],this.Fgt=!!t[3],this.Ygt=t[5],this.qgt=null,t[4]&&(this.qgt=new qv.Xgt(t[4],this)),this.Lgt=null,this.Kgt=null)}qr(){this.Pgt=null,this.qgt&&(this.qgt.qr(),this.qgt=null),this.Lgt=null,this.Kgt=null}Zgt(){return this.qgt}Ngt(t){this.Lgt=t}eht(){return this.Lgt}Qgt(t){this.Kgt=t}iht(){return this.Kgt}Hct(){return this.Adt}Pft(t){"color"===this.qc&&qv.Ke(t)?(this.Adt[0]=qv.Rn(t),this.Adt[1]=qv.An(t),this.Adt[2]=qv.En(t)):this.Adt=t}ypt(){return this.Hgt}Mft(t){"color"===this.qc&&qv.Ke(t)?(this.Hgt[0]=qv.Rn(t),this.Hgt[1]=qv.An(t),this.Hgt[2]=qv.En(t)):this.Hgt=t}Sht(){const t=this.Pgt.Oct().uht();return"relative"===t?this.Hct():"absolute"===t?this.ypt():void 0}eG(){return this.qc}Zct(t){this.qc=t}nV(){return this.sW}M1(t){this.sW=t,this.Pgt.tyt()}_ft(){return this.Ogt}q1(t){this.Ogt=t}Gut(){return this.Fgt}_ut(t){this.Fgt=!!t}rht(){return this.Ygt}ght(t){if(!this.qgt)return;if(this.Jgt||null===this.Jgt)return this.Jgt;const s=this.qgt.syt();if(!s)return this.Jgt=null,this.Jgt;const e=s.length;for(let i=0;i<e;i++){const e=s[i];if(e.t2()===t)return this.Jgt=e,this.Jgt}return this.Jgt=null,this.Jgt}wst(){const t=this.qgt;return{addonDataJson:t?t.wst():t,value:this.Adt,aValue:this.Hgt,type:this.qc,time:this.sW,ease:this.Ogt,enable:this.Fgt}}vst(t){t&&(t.addonDataJson&&this.qgt.eyt(t.addonDataJson),this.Adt=t.value,this.Hgt=t.aValue,this.qc=t.type,this.sW=t.time,this.Ogt=t.ease,this.Fgt=t.enable)}}qv.Agt=class{constructor(t,s){this.bct=s,this.Tct=[],this.iyt=[],qv.ert.Kmt(this.Tct,t,ib,this),qv.ert.Qmt(this.iyt,t,ib,this),this.tyt()}qr(){this.bct=null;for(const t of this.Tct)t.qr();qv.bh(this.Tct),this.Tct=null;for(const t of this.iyt)t.qr();qv.bh(this.iyt),this.iyt=null}tyt(){let t=this.Tct;t.sort((t,s)=>t.nV()-s.nV());for(let s=0;s<t.length;s++){const e=t[s];s+1<t.length&&e.Ngt(t[s+1]),s-1>=0&&e.Qgt(t[s-1])}t=this.iyt,t.sort((t,s)=>t.nV()-s.nV());for(let s=0;s<t.length;s++){const e=t[s];s+1<t.length&&e.Ngt(t[s+1]),s-1>=0&&e.Qgt(t[s-1])}}Cft(){const t=new ib(null,this);return this.Tct.push(t),this.tyt(),t}Tft(t){for(const s of this.Tct){if(!t(s))continue;const e=this.Tct.indexOf(s);-1!==e&&(s.qr(),this.Tct.splice(e,1))}this.ryt(),this.tyt()}ryt(){this.Tct.sort((t,s)=>t.nV()-s.nV())}Oct(){return this.bct}nyt(){return this.Tct.length}Idt(){return this.Tct[this.Tct.length-1]}Mct(){return this.Tct}sht(){return this.iyt}*hyt(){for(const t of this.Tct)yield t}*oyt(){for(let t=this.Tct.length-1;t>=0;t--)yield this.Tct[t]}wst(){const t=this.Tct,s=this.iyt;return{propertyKeyframeDataItemsJson:t.map(t=>t.wst()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.wst())}}vst(t){t&&(qv.ert.tgt(this.Tct,t.propertyKeyframeDataItemsJson,ib,this),qv.ert.tgt(this.iyt,t.propertyKeyframeDataItemsIncludingDisabledJson,ib,this),this.tyt())}}}{const rb=self.Gs,nb=0,hb=1;class ob{constructor(t,s){this.qgt=s,this.Uc=t[0],this.ayt=t[1]}qr(){this.qgt=null,this.ayt=null}Zgt(){return this.qgt}t2(){return this.Uc}wst(){return{id:this.Uc,data:this.ayt}}vst(t){t&&(this.Uc=t.id,this.ayt=t.data)}}const ab=0,lb=1,ub=2,cb=3;class fb extends ob{constructor(t,s){super(t,s),this.lyt=this.ayt[0],this.uyt=!!this.ayt[1],this.cyt=this.ayt[2],this.fyt=!!this.ayt[3]}qr(){super.qr()}bht(){return this.lyt}jmt(){return this.uyt}Tht(){return this.cyt}Hmt(){return this.fyt}wst(){return Object.assign(super.wst(),{startAnchor:this.lyt,startEnable:!!this.uyt,endAnchor:this.cyt,endEnable:!!this.fyt})}vst(t){t&&(super.vst(t),this.lyt=t.startAnchor,this.uyt=!!t.startEnable,this.cyt=t.endAnchor,this.fyt=!!t.endEnable)}}const db=0,pb=1;class mb extends ob{constructor(t,s){super(t,s),this.dyt=this.ayt[0],this.pyt=this.ayt[1]}qr(){super.qr()}Jmt(){return this.dyt}qmt(){return this.pyt}wst(){return Object.assign(super.wst(),{direction:this.dyt,revolutions:this.pyt})}vst(t){t&&(super.vst(t),this.dyt=t.direction,this.pyt=t.revolutions)}}const gb=0;class yb extends ob{constructor(t,s){super(t,s),this.myt=this.ayt[0]}qr(){super.qr()}fdt(){return this.myt}wst(){return Object.assign(super.wst(),{startFrom:this.myt})}vst(t){t&&(super.vst(t),this.myt=t.startFrom)}}rb.Xgt=class{constructor(t,s){this.gyt=s,this.yyt=[],rb.ert.Kmt(this.yyt,t,{sgt:0,map:new Map([["cubic-bezier",fb],["angle",mb],["initial-animation",yb]])},this)}qr(){this.gyt=null;for(const t of this.yyt)t.qr();rb.bh(this.yyt),this.yyt=null}Syt(){return this.gyt}syt(){return this.yyt}*wyt(){for(const t of this.yyt)yield t}wst(){return{addonDataItemsJson:this.yyt.map(t=>t.wst())}}vst(t){t&&rb.ert.tgt(this.yyt,t.addonDataItemsJson,{sgt:"id",map:new Map([["cubic-bezier",fb],["angle",mb],["initial-animation",yb]])},this)}}}{const Sb=self.Gs,wb="start-value",vb="current-state",bb=0,xb=1;let Cb=0;Sb.Mmt=class extends Sb.Drt{constructor(t,s){super("tween-"+Cb++,t,s),this.Uc="",this.vyt=!1,this.byt="start-value",this.$lt=null,this.xyt=null,this.Cyt=null,this.Tyt=null,this.Myt=null,this.Iyt=null,this.vct=null,this.Gyt=null}qr(){this.w1()||(this._yt(Sb.Ayt.Ryt.aq.Pyt),this._yt(Sb.Ayt.Ryt.aq.Eyt),this.Oyt(),super.qr(),this.$lt=null,this.xyt=null,this.Cyt=null,this.Iyt=null,this.vct=null,this.Tyt=null,this.Myt=null)}Yot(t){const s=Sb.Hr(Sb.Event,"tweenstatereleased");s.Fyt=this,t.dispatchEvent(s)}eG(){return 1}vot(){for(const t of this.mot.Zot().Kot())this.got.push(Sb.Dyt.KM(this,t));this.vct=this.got[0]}wlt(){const t=this.mot.Zot().vlt(),s=Sb.Dyt.KM(this,t);return this.got.push(s),this.Lyt(),s}Lyt(){this.vct=this.got[0]}e2(t){return this.vct._lt()[0]}Kct(t){this.kyt=t}J1(){const t=this.Znt();if(!t||!t.length)return;const s=t[0];if(this.vct=s,!s)return;const e=s.J1();return s.nut()?e:void 0}Nyt(t){this.Iyt=t}Q1(){return this.Tyt||(this.Tyt=new Promise(t=>{this.Myt=t})),this.Tyt}Oyt(){this.Tyt&&(this.Myt&&this.Myt(),this.Tyt=null,this.Myt=null)}Byt(t){this.Cyt||(this.Cyt=[]),this.Cyt.push(t)}$yt(t){this.xyt||(this.xyt=[]),this.xyt.push(t)}Uyt(t){if(!this.Cyt)return;const s=this.Cyt.indexOf(t);-1!==s&&this.Cyt.splice(s,1)}Vyt(t){if(!this.xyt)return;const s=this.xyt.indexOf(t);-1!==s&&this.xyt.splice(s,1)}Wyt(t,s){for(const e of this.got)for(const i of e.Ylt){if(i.Plt()!==s)continue;const e=i.sut(),r=i.Oct(),n=e.tft(r);n.Pft(t),n.Mft(t)}}zyt(t){for(const s of this.got)for(const e of s.Ylt)if(e.Plt()===t)return e}jyt(t){let s=!1;for(const e of t){const t=this.zyt(e);t&&(this.Wyt(t.pft(),e),s=!0)}if(s){if(this.gat()){const t=this.G1()-this.nV();this.I1(t);for(const s of this.got)s.Iut(t);this.Vat(0)}else{const t=this.nV();this.I1(t);for(const s of this.got)s.Iut(t);this.Vat(t)}this.Wat()}}Hyt(t,s){const e=this.zyt(s);if(!e)return;const i=e.sut(),r=e.Oct(),n=i.Idt(r);n.M1(this.G1()),n.Pft(t),n.Mft(t)}qyt(t){this.Uc=t}t2(){return this.Uc}Jyt(t){this.byt=t}Yyt(){return this.byt}K1(t){this.vyt=t}X1(){return this.vyt}xat(){if(this.Cyt)for(const t of this.Cyt)t(this);if(!this.Z1())for(const t of this.got)t.fct()}Rat(){this.Dot=this.Bc.Lj()}Ant(){if(!this.Not&&(this.Not=!0,this.xyt))for(const t of this.xyt)t(this)}M1(t){this.Xyt(),super.M1(t)}Jat(t){Sb.Ke(t)||(t=this.G1()),t<0?this.Cot=0:t>=this.G1()?this.Cot=this.G1():this.Cot=t,this.vct.Yat()}xnt(t){if(!this.Rnt()&&"current-state"===this.Yyt())for(const t of this.got)t.cct();super.xnt(t)}b1(t=!1){if(super.b1(t),!this.Z1())for(const t of this.got)t.uct()}$f(t=!0,s=!1){this.Xyt(),super.$f(t,s)}Xyt(){for(const t of this.got){const s=t=>{const s=t.nV(),e=this.G1();return 0!==s&&s!==e};t.oct(s),t.lct(s)}}wrt(){if(this.w1())return!0;const t=this.J1();return!(t&&t.yY().g8()||(this.pot.Snt(this),this.ilt(),0))}Int(t,s,e){if(this.$lt||(this.$lt=this.J1()),!this.$lt||this.$lt.NH())return this.b1(!0),void this.Rat();const i=this.$lt.$j();if(-1!==i&&(t=e*i),0===t&&0===this.$ot)return;this.$ot=t;const r=this.Cot+this.Tot+t*this.Mot,n=this.mot.llt;r<0?(this.Cot=0,this.Tot=-r):r>=n?(this.Cot=n,this.Tot=this.Cot-r):(this.Cot=r,this.Tot=0);let h=!1,o=!1;const a=this.P1(),l=this.A1();if(a||l?a&&!l?this.Mot>0?this.Cot>=n&&(this.Jat(0),this._yt(Sb.Ayt.Ryt.aq.Kyt),this._yt(Sb.Ayt.Ryt.aq.Zyt),o=!0):this.Cot<=0&&(this.Jat(n),this._yt(Sb.Ayt.Ryt.aq.Kyt),this._yt(Sb.Ayt.Ryt.aq.Zyt),o=!0):!a&&l?this.Mot>0?this.Cot>=n&&(this.Vat(n),this.E1(-1*this.O1()),o=!0,1===this.Iot?this._ot<this.V0()?(this._ot++,this._yt(Sb.Ayt.Ryt.aq.Kyt),this._yt(Sb.Ayt.Ryt.aq.Zyt),this._yt(Sb.Ayt.Ryt.aq.Qyt),this._yt(Sb.Ayt.Ryt.aq.tSt),this.IsPlaying()?this.Iot=0:this.Got=0):(this._yt(Sb.Ayt.Ryt.aq.Qyt),this._yt(Sb.Ayt.Ryt.aq.tSt),h=!0):0===this.Iot&&(this._yt(Sb.Ayt.Ryt.aq.Qyt),this._yt(Sb.Ayt.Ryt.aq.tSt),this.IsPlaying()?this.Iot=1:this.Got=1)):this.Cot<=0&&(this.Vat(0),this.E1(-1*this.O1()),o=!0,1===this.Iot?this._ot<this.V0()?(this._ot++,this._yt(Sb.Ayt.Ryt.aq.Kyt),this._yt(Sb.Ayt.Ryt.aq.Zyt),this._yt(Sb.Ayt.Ryt.aq.Qyt),this._yt(Sb.Ayt.Ryt.aq.tSt),this.IsPlaying()?this.Iot=0:this.Got=0):(h=!0,this._yt(Sb.Ayt.Ryt.aq.Qyt),this._yt(Sb.Ayt.Ryt.aq.tSt)):0===this.Iot&&(this._yt(Sb.Ayt.Ryt.aq.Qyt),this._yt(Sb.Ayt.Ryt.aq.tSt),this.IsPlaying()?this.Iot=1:this.Got=1)):a&&l&&(this.Mot>0?this.Cot>=n&&(this.Vat(n),this.E1(-1*this.O1()),o=!0,0===this.Iot&&(this._yt(Sb.Ayt.Ryt.aq.Qyt),this._yt(Sb.Ayt.Ryt.aq.tSt)),1===this.Iot&&(this._yt(Sb.Ayt.Ryt.aq.Kyt),this._yt(Sb.Ayt.Ryt.aq.Zyt),this._yt(Sb.Ayt.Ryt.aq.Qyt),this._yt(Sb.Ayt.Ryt.aq.tSt)),this.IsPlaying()?(this.Iot++,this.Iot=Sb.wrap(this.Iot,0,2)):(this.Got=this.Iot+1,this.Got=Sb.wrap(this.Got,0,2))):this.Cot<=0&&(this.Vat(0),this.E1(-1*this.O1()),o=!0,0===this.Iot&&(this._yt(Sb.Ayt.Ryt.aq.Qyt),this._yt(Sb.Ayt.Ryt.aq.tSt)),1===this.Iot&&(this._yt(Sb.Ayt.Ryt.aq.Kyt),this._yt(Sb.Ayt.Ryt.aq.Zyt),this._yt(Sb.Ayt.Ryt.aq.Qyt),this._yt(Sb.Ayt.Ryt.aq.tSt)),this.IsPlaying()?(this.Iot++,this.Iot=Sb.wrap(this.Iot,0,2)):(this.Got=this.Iot+1,this.Got=Sb.wrap(this.Got,0,2)))):this.Mot>0?this.Cot>=n&&(this._ot<this.V0()?(this._ot++,this.Jat(0),this._yt(Sb.Ayt.Ryt.aq.Kyt),this._yt(Sb.Ayt.Ryt.aq.Zyt),o=!0):(this.Vat(n),h=!0)):this.Cot<=0&&(this._ot<this.V0()?(this._ot++,this.Jat(n),this._yt(Sb.Ayt.Ryt.aq.Kyt),this._yt(Sb.Ayt.Ryt.aq.Zyt),o=!0):(this.Vat(0),h=!0)),!this.w1()&&this.IsPlaying()){if(h)return this.vct.ult(),this.b1(!0),void this.Rat();this.vct.vc(this.Cot,!0,!1,o,this.Bot,!1),this.Bot&&(this.Bot=!1)}}_yt(t){const s=this.J1();this.Iyt.sSt(this),this.Bc.lZ(t,s,this.Iyt.I0()),this.Iyt.eSt()}wst(){const t=super.wst(),s=this.nat();return Object.assign(t,{tweenDataItemJson:s.wst(),id:this.Uc,destroyInstanceOnComplete:this.vyt,initialValueMode:this.byt})}vst(t){t&&(this.nat().vst(t.tweenDataItemJson),super.vst(t),this.Uc=t.id,this.vyt=t.destroyInstanceOnComplete,this.byt=t.initialValueMode,this.Lyt())}static IsPlaying(t){return t.IsPlaying()}static B1(t){return t.B1()}static iSt(t){return!!t.A1()&&0===t.mat()}static rSt(t){return!!t.A1()&&1===t.mat()}static nSt(t){const s=t.runtime.tat(),e=new Sb.Xmt;if(t.json){e.vst(t.json.tweenDataItemJson);const i=new Sb.Mmt(e,s);return i.vst(t.json),i}{const i=new Sb.Mmt(e,s);Sb.Ci(t.hSt)||(t.hSt=[t.hSt]),i.qyt(t.id),i.Sat(t.tags),i.Jyt(t.oSt),i.K1(t.aSt),i._1(t.loop),i.R1(t.lSt),i.I1(t.time),i.oat(0),i.lat("default"),i.uat(t.hSt[0].uSt),i.fat(t.U0);const r=i.wlt();r.Tut(t.G0.kK()),r.lat("default"),r.uat(t.hSt[0].uSt),r._ut(!0),r.Put(t.G0.yY().Mz());const n=t.G0.g0(),h=n.Eut()?n.Aut():t.G0.kH().Cy(),o=n.Eut()?n.Fut():t.G0.kH().My();r.Rut(h),r.Out(o);const a=r.ict();a.M1(0),a.q1("noease"),a._ut(!0),a.Sat("");const l=r.ict();l.M1(t.time),l.q1("noease"),l._ut(!0),l.Sat("");for(const s of t.hSt){const e=r.nct();e.Uct(s.cSt),e.zct(s.fSt),e.Jct(s.but),e.Kct(s.type),e.eft(NaN),e.rft(NaN),e.lat("default"),e.uat(s.uSt),e._ut(!0);const i=e.xft();i.Zct(s.valueType),i.M1(0),i.q1(s.dSt),i._ut(!0),i.Pft(s.pSt),i.Mft(s.pSt);const n=e.xft();n.Zct(s.valueType),n.M1(t.time),n.q1(s.dSt),n._ut(!0),n.Pft(s.mSt),n.Mft(s.mSt),e.eat()}return i}}static Tut(t,s){if(!isNaN(s))for(const e of t.Znt())e.Tut(s)}static Nyt(t,s){t.Nyt(s)}gSt(t,s){return this.Gyt||(this.Gyt=Sb.Hr(self.W1,this,t,s)),this.Gyt}}}{const Tb=self.Gs;Tb.Dyt=class extends Tb.Qot{constructor(t,s){super(t,s),this.ySt=null,this.SSt=null}static KM(t,s){return Tb.Hr(Tb.Dyt,t,s)}wSt(){1===this.Ylt.length?this.ySt=this.Ylt[0]:(this.ySt=this.Ylt[0],this.SSt=this.Ylt[1])}Xlt(){for(const t of this.Llt.sut().tut())this.Ylt.push(Tb.vSt.KM(this,t));this.wSt()}nct(){const t=this.Llt.sut().hct(),s=Tb.vSt.KM(this,t);return this.Ylt.push(s),this.wSt(),s}xnt(){if(this.rut(),!this.nut()&&this.rat())return;const t=this.iut().gat()?0:this.Mut();for(const s of this.Ylt)s.xnt(t),0===this.Klt&&1===s.kut()&&(this.Klt=1),0===this.Art&&1===s.Cnt()&&(this.Art=1);this.Zlt=0,this.Ylt.some(t=>t.olt())&&(this.Zlt=1),this.Hlt=this.Nut(t),this.Wlt=!1,this.zlt=!1,this.vc(t)}flt(){}vc(t,s=!1,e=!1,i=!1,r=!1,n=!1,h=!1){if(this.$lt||this.J1(),this.$lt)return!this.$lt.NH()&&(!n||!this.yY().g8())&&(this.SSt?(this.ySt.vc(t,e,i,h),this.SSt.vc(t,e,i,h)):this.ySt.vc(t,e,i,h),void(0!==this.ySt.kut()&&(this.Ult||(this.Ult=this.$lt.kH()),this.Ult&&this.Ult.NZ())))}mlt(){}vst(t){super.vst(t),this.wSt()}}}{const Mb=self.Gs;Mb.vSt=class extends Mb.eut{constructor(t,s){super(t,s),this.bSt=!1}static KM(t,s){return Mb.Hr(Mb.vSt,t,s)}vc(t,s=!1,e=!1,i=!1){let r,n;if(this.bSt)r=this.Tct[0],n=this.Tct[1];else if(s)r=this.xct.aft(t,this.bct),n=r.eht();else{if(this.Gct){const s=this.iut(),e=this.Gct.eht(),i=this.Gct.nV(),r=e?e.nV():s.G1();(t<=i||t>=r)&&(this.Gct=this.xct.aft(t,this.bct))}else this.Gct=this.xct.aft(t,this.bct);r=this.Gct,n=r.eht()}this.Cct.vc(t,r,n,s,e,i)}xft(){const t=this.bct.Ict().Cft();return this.Gct=null,this.bSt=this.nft().length<=2,t}lct(t){this.Gct=null,this.bct.Ict().Tft(t),this.bSt=this.nft().length<=2}wst(){return{sourceAdapterJson:this.eat().wst(),basic:this.bSt}}vst(t){t&&(this.eat().vst(t.sourceAdapterJson),this.bSt=t.basic)}}}{const Ib=self.Gs,Gb=self.Wu,_b=0,Pb=1,Rb=2;Ib.bc=class extends Ib.zr{constructor(t,s=!0){super(),this.Xr=t[0],this.xSt=t[2],this.CSt=[];for(const s of t[1]){const t=Ib.TSt.KM(this,s);this.CSt.push(t)}for(let t=0;t<this.CSt.length;t++){const s=this.CSt[t],e=this.CSt[t+1],i=this.CSt[t-1];s.Ngt(e),s.Qgt(i)}this.MSt=new Map,this.ISt=new Map,this.GSt(),s&&Gb.Cc(this.Xr,(t,s,e,i)=>this.vc(t,s,e,i),null,{transition:this})}static KM(t){return Ib.Hr(Ib.bc,t)}qr(){for(const t of this.CSt)t.qr();Ib.bh(this.CSt),this.CSt=null,this.MSt.clear(),this.MSt=null,this.ISt.clear(),this.ISt=null}xc(t){this.xSt=!!t}_St(t){const s=this.ISt.get(t);if(s)return s;for(const s of this.CSt)if(s.PSt()===t)return this.ISt.set(t,s),s}RSt(t){for(let s=this.CSt.length-1;s>=0;s--){const e=this.CSt[s],i=e.PSt();if(i<=t){let s=e;if(i<t)return s;if(i===t){for(;s;){const t=s.iht();if(!t)break;if(t.PSt()!==s.PSt())break;s=t}return s}}}}vc(t,s,e,i){let r=t/i;if(this.xSt){const r=this._St(0),n=this._St(1),h=s+(s+e)*r.ASt(),o=(s+e)*n.ASt()-h;return 0===i?h+o:Gb.Mc(t,h,o,i)}0===i&&(r=1);let n=this.RSt(r),h=n.eht();if(!h){const t=n.iht(),s=n;n=t,h=s}const o=h.PSt()-n.PSt(),a=Ib.Kr(r,n.PSt(),h.PSt(),0,o);if(n.ESt()||0===o){const t=s+(s+e)*n.ASt(),i=(s+e)*h.ASt()-t;return 0===o?1===a?t+i:t:Gb.Mc(a,t,i,o)}const l=n.PSt(),u=n.ASt(),c=n.PSt()+n.OSt(),f=n.ASt()+n.FSt(),d=h.PSt()+h.DSt(),p=h.ASt()+h.LSt(),m=h.PSt(),g=h.ASt();let y=Gb.hc("spline")(a,l,u,c,f,d,p,m,g,this.MSt.get(n));return y+=n.ASt(),(1-y)*s+y*(s+e)}GSt(){this.MSt.clear();for(let t=0;t<this.CSt.length-1;t++){const s=this.CSt[t];if(!s.jmt())continue;const e=s,i=this.CSt[t+1];if(!i.Hmt())continue;const r=e.PSt(),n=e.PSt()+e.OSt(),h=i.PSt()+i.DSt(),o=i.PSt();this.MSt.set(e,Gb.Ic(r,n,h,o))}}}}{const Ab=self.Gs,Eb=0,Ob=1,Fb=2,Db=3,Lb=4,kb=5,Nb=6,Bb=7,$b=8;Ab.TSt=class extends Ab.zr{constructor(t,s){super(),this.kSt=t,this.NSt=s[0],this.BSt=s[1],this.$St=s[2],this.USt=s[3],this.VSt=s[4],this.WSt=s[5],this.uyt=s[6],this.fyt=s[7],this.zSt=s[8],this.Lgt=null,this.Kgt=null}qr(){this.kSt=null}static KM(t,s){return Ab.Hr(Ab.TSt,t,s)}Ngt(t){this.Lgt=t}eht(){return this.Lgt}Qgt(t){this.Kgt=t}iht(){return this.Kgt}PSt(){return this.NSt}ASt(){return this.BSt}OSt(){return this.$St}FSt(){return this.USt}DSt(){return this.VSt}LSt(){return this.WSt}jmt(){return this.uyt}Hmt(){return this.fyt}ESt(){return"linear"===this.zSt}jSt(){return"cubic"===this.zSt}}}{const Ub=self.Gs;Ub.HSt=class extends Ub.zr{constructor(t){super(),this.Bc=t,this.qSt=[]}qr(){for(const t of this.qSt)t.qr();Ub.bh(this.qSt),this.qSt=null}KM(t){this.qSt.push(Ub.bc.KM(t))}}}{const Vb=self.Gs;Vb.JSt=class extends Vb.zr{constructor(t){super(),this.Bc=t,this.YSt=null,this.XSt=null,this.xrt=t=>this.Crt(t.G0)}qr(){if(this.Ert(),this.YSt){for(const t of this.YSt.values())t.clear();this.YSt.clear()}this.YSt=null,this.Bc=null}KM(t){if(this.YSt||(this.YSt=new Map),!t)return;const s=t[0][16][0],e=t[1];this.YSt.has(e)||this.YSt.set(e,new Map),this.YSt.get(e).set(s,t)}Ort(){const t=this.Bc.wf();t&&t.addEventListener("instancedestroy",this.xrt)}Ert(){const t=this.Bc.wf();t&&t.removeEventListener("instancedestroy",this.xrt)}KSt(){return!!this.YSt&&0!==this.YSt.size}ZSt(t,s){let e=0;if(e=t instanceof Vb.QSt?t.Mz():t,!this.YSt.has(e))return;const i=this.YSt.get(e).get(s);return i?JSON.parse(JSON.stringify(i)):void 0}twt(t,s){this.XSt||(this.XSt=new WeakMap),this.XSt.has(t)||this.XSt.set(t,s)}swt(t){if(!this.XSt)return"";return this.XSt.get(t)||""}Crt(t){this.XSt&&this.XSt.has(t)&&this.XSt.delete(t)}}}{const Wb=self.Gs;Wb.ewt=class{constructor(t){this.Bc=t,this.iwt=new Wb.rwt}qr(){this.iwt.qr(),this.iwt=null,this.Bc=null}Sq(){return this.Bc}KM(t){this.iwt.$u(t)}nwt(t){return this.iwt.Hs(t)}hwt(){return this.iwt.hwt()}}}{const zb=self.Gs;zb.owt=class{constructor(t,s,e,i,r,n,h){this.Bc=r.Sq(),this.awt=r,this.lwt=t,this.uwt=e,this.cwt=i,this.VS=s,this.irt=n,this.fwt=h??n.J1().kK(),this.dwt(),this.pwt=this.gwt?.mwt()??-1,this.ywt=[],this.Swt=null,this.wwt=NaN,this.vwt=null,this.bwt=null,this.xwt=null,this.Cwt="",this.Twt=null,this.Mwt="",this.Iwt="",this.Gwt=0,this._wt=!1,this.Oot=!1}qr(){this.Oot||(zb.bh(this.ywt),this.ywt=null,this.Bc=null,this.awt=null,this.cwt=null,this.irt=null,this.Swt=null,this.wwt=NaN,this.vwt&&this.vwt.clear(),this.vwt=null,this.bwt=null,this.xwt=null,this.Cwt="",this.Twt=null,this.Mwt="",this.Iwt="",this.Oot=!0)}Jr(){return this.Oot}Pwt(){return this.awt}Sq(){return this.Bc}Rc(){return this.lwt}Rwt(){return this.cwt}S1(){return this.VS}Yrt(){return this.irt||(this.irt=this.Bc.EH(this.fwt).g0()),this.irt}Awt(){return this.Ewt(this.pwt)}Owt(){const t=this.Awt();return t?t.S1():""}Fwt(){const t=this.Awt();return t?t.F1():[]}Dwt(t){const s=this.Fwt();if(!s)return!1;if(!s.length)return!1;const e=zb.owt.wat(t);return!(!e||!e.length)&&e.every(zb.owt.bat,s)}Lwt(t,s){const e=this.Fwt();if(!e)return!1;if(!e.length)return!1;const i=zb.owt.wat(t);return!(!i||!i.length)&&i.every(t=>zb.owt.kwt.call(e,t,s))}static bat(t){const s=this;return""===t?1===s.length&&""===s[0]:s.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static wat(t){return t.trim().split(" ")}static kwt(t,s){const e=this;return""===t?1===e.length&&""===e[0]:e.some(e=>zb.compare(e.trim(),s,t.trim()))}Nwt(t){const s=this.Awt();if(s){if(zb.Ke(t)){const e=s.Bwt(),i=e?e[t]:void 0;if(zb.Ke(i))return this.Ewt(i)}if("string"==typeof t)for(const e of s.Bwt()){const s=this.Ewt(e);if(s.T1(t))return this.Ewt(s.mwt())}}}$wt(t){const s=this.Nwt(t);return s?s.S1():""}Uwt(t){const s=this.Nwt(t);return s?s.F1():""}Vwt(t){const s=this.Awt();if(!s)return-1;const e=s.Bwt();if(!e)return-1;const i=this.Nwt(t);return i?e.indexOf(i.mwt()):-1}Wwt(){const t=this.Awt();if(!t)return 0;const s=t.Bwt();return s?s.length:0}Ewt(t){return this.cwt.Ewt(t)}$f(){this.jwt().zwt(!0)}zwt(t){if(this.Hwt()){for(const[t,s]of this.Hwt().entries())s.zwt(!1);this.Hwt().clear()}if(this.vwt=null,this.Swt=null,this.qwt=null,this.bwt=null,this.Cwt="",this.Twt=null,this.Mwt="",this.Iwt="",this.ywt=[],t){this.awt.Jwt(this);const t=this.gwt.mwt();t!==this.pwt&&this.Ywt(t)}else this.pwt=this.gwt.mwt()}Xwt(){const t=this.cwt.Ewt(this.pwt);return t?t.Zwt().Kwt():0}Qwt(t){return!(t<0)&&t===this.tvt()}tvt(){const t=this.cwt.Ewt(this.pwt);if(!t)return-1;let s=t.Zwt().svt();return s?t.Zwt().evt().indexOf(s):-1}ivt(t){const s=this.rvt(t);return s?s.Rc():""}nvt(t){let s;return zb.Ke(t)&&(s=this.rvt(t)),"string"==typeof t&&(s=this.hvt(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.Hct():""}ovt(t,s){if(t.Gut())return t.mwt();{const e=t.Zwt().svt();if(!e)return s.mwt();const i=e.avt();if(!zb.Ke(i))return s.mwt();const r=this.Ewt(i);return r?this.ovt(r,s):s.mwt()}}lvt(t,s){if(t.Gut()){if("reference"===t.eG()){const s=t.uvt(),e=t.cvt(),i=this.awt.nwt(s);if(!i)return[-1,null];const r=i.fvt(e);return r?this.lvt(r,i):this.lvt(i.dvt(),i)}return[t.mwt(),s]}{const e=t.Zwt().svt();if(!e)return[-1,null];const i=e.avt();if(!zb.Ke(i))return[-1,null];const r=s.Ewt(i);return r?this.lvt(r,s):[-1,null]}}pvt(t,s){let e=this.Ewt(t);if(e){if(!e.Gut()){const s=this.Ewt(this.pwt);t=this.ovt(e,s)}if(zb.Ke(t)&&t!==this.pwt)if(e=this.Ewt(t),"reference"===e.eG()){const i=e.uvt(),r=e.cvt(),n=this.awt.nwt(i);let h=n.fvt(r);if(h){const e=this.lvt(h,n);if(-1===e[0])return;s(this.pwt,t,e[1],e[0])}else s(this.pwt,t)}else s(this.pwt,t)}}mvt(t){let s;if(zb.Ke(t)&&(s=this.rvt(t)),"string"==typeof t&&(s=this.hvt(t)),!s)return;let e=s.avt();zb.Ke(e)&&this.pvt(e,(t,s,e,i)=>{this.ywt.push(t),this.Ywt(s,e,i)})}gvt(){const t=this.yvt();if(!t)return;const s=t.avt();zb.Ke(s)&&this.pvt(s,(t,s,e,i)=>{this.ywt.push(t),this.Ywt(s,e,i)})}Svt(t){const s=this.cwt.fvt(t);if(!s)return;const e=s.mwt();zb.Ke(e)&&this.pvt(e,(t,s,e,i)=>{this.ywt.push(t),this.Ywt(s,e,i)})}wvt(){const t=this.ywt.pop();zb.Ke(t)?this.Ywt(t):this.vvt()&&(this.awt.Jwt(this.vvt(),!0,!1,!1),this.vvt().Ywt(this.bvt()),this.jwt().xvt(this.vvt()))}Cvt(t){if(!this.Awt())return;const s=this.Nwt(t);if(s){if(!s.Gut())return;const t=s.mwt();if(!zb.Ke(t))return;this.ywt.push(this.pwt),this.Ywt(s.mwt())}}Tvt(t){if(zb.Ke(t))return!!this.cwt.Ewt(this.pwt).Zwt().evt()[t];if("string"==typeof t){const s=this.cwt.Ewt(this.pwt).Zwt().evt();for(let e=0;e<s.length;e++)if(s[e].Rc()===t)return!0;return!1}return!1}Mvt(){this._wt=!0}Ivt(){return this.Gwt>0}Gvt(){this.Gwt++}_vt(){this.Gwt--,0===this.Gwt&&this._wt&&this.awt.Pvt(this)}Ywt(t,s,e){const i=this.pwt,r=this.Yrt().J1();this.Gvt(),this.awt.Rvt(this),this.Bc.lZ(zb.uq.Evt.aq.Avt,r),this.Bc.lZ(zb.uq.Evt.aq.Ovt,r),this.Bc.lZ(zb.uq.Evt.aq.Fvt,r),this.Bc.lZ(zb.uq.Evt.aq.Dvt,r),this.pwt=t;let n=this.Ewt(this.pwt);if("dictionary"===n.eG()&&(this.Bc.lZ(zb.uq.Evt.aq.Lvt,r),this.Bc.lZ(zb.uq.Evt.aq.kvt,r),this.Bc.lZ(zb.uq.Evt.aq.Nvt,r),this.Bc.lZ(zb.uq.Evt.aq.Bvt,r)),this.awt.$vt(),this._vt(),!this.Jr()&&(n=this.Ewt(this.pwt),"reference"===n.eG())){const t=s?s.Rc():n.uvt();if(this.Uvt(n)){this.ywt.pop();const t=this.Vvt(n);this.awt.Jwt(t,!0,!0,!1),t.Wvt(this,i),this.jwt().xvt(t)}else{const s="number"==typeof e?e:n.cvt();if(t){this.ywt.pop();let e=n.zvt();if(e){let t=this.awt.jvt(e);for(;t;)e=zb.Gm(e),t=this.awt.jvt(e)}else{e=`${t}-ref`;let s=this.awt.jvt(e);for(;s;)e=zb.Gm(e),s=this.awt.jvt(e)}const r=this.awt.Hvt(t,s,e,this.irt,!0);r.Wvt(this,i),this.qvt(n,r);const h=this.jwt();r.Jvt(h),h.xvt(r)}}}}yvt(){const t=this.cwt.Ewt(this.pwt);return t?t.Zwt().svt():null}rvt(t){const s=this.cwt.Ewt(this.pwt);if(!s)return null;const e=s.Zwt().evt();if(!e)return null;return e[t]||null}hvt(t){const s=this.cwt.Ewt(this.pwt);if(!s)return null;return s.Zwt().Yvt(t)||null}dwt(t){if("number"==typeof t){let s=this.Ewt(t);s||(s=this.cwt.dvt()),this.gwt=s}else if("number"==typeof this.uwt){let t=this.Ewt(this.uwt);t||(t=this.cwt.dvt()),this.gwt=t}else{let t=this.cwt.fvt(this.uwt);t||(t=this.cwt.dvt()),this.gwt=t}}wst(){return this._wt?null:{flowchartName:this.lwt,flowchartTag:this.VS,startNodeTag:this.uwt,currentNodeId:this.pwt,previousNodeIds:this.ywt,pluginUID:this.irt.J1().kK(),reference:{previousFlowchartTag:this.vvt()?this.vvt().S1():"",previousStartNodeId:zb.Ke(this.bvt())?this.bvt():NaN,referencesJson:this.Xvt(),currentReferenceFlowchartTag:this.Kvt()?this.Kvt().S1():"",rootFlowchartTag:this.jwt()?this.jwt().S1():""}}}Xvt(){if(!this.Zvt())return null;const t=[];for(const[s,e]of this.Hwt().entries())t.push({flowchartElementId:s.mwt(),flowchartStateTag:e.S1()});return t.length?t:null}vst(t){if(t){if(this.lwt=t.flowchartName,this.VS=t.flowchartTag,this.uwt=t.startNodeTag,this.pwt=t.currentNodeId,this.ywt=t.previousNodeIds,this.fwt=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.Cwt=s.previousFlowchartTag,this.wwt=s.previousStartNodeId,this.Twt=s.referencesJson,this.Mwt=s.currentReferenceFlowchartTag,this.Iwt=s.rootFlowchartTag}this.dwt()}}vvt(){return"string"==typeof this.Cwt&&this.Cwt&&(this.Swt=this.awt.jvt(this.Cwt),this.Cwt=""),this.Swt}bvt(){return this.wwt}Wvt(t,s){this.Swt=t,this.wwt=s}Kvt(){return"string"==typeof this.Mwt&&this.Mwt&&(this.bwt=this.awt.jvt(this.Mwt),this.Mwt=""),this.bwt}xvt(t){this.bwt=t,this.bwt===this&&(this.bwt=null)}jwt(){return"string"==typeof this.Iwt&&this.Iwt&&(this.xwt=this.awt.jvt(this.Iwt),this.Iwt=""),this.xwt?this.xwt:this}Jvt(t){this.xwt=t}Zvt(){return this.Qvt(),!!this.vwt}Uvt(t){return this.Qvt(),this.vwt&&this.vwt.has(t)}Qvt(){if(this.Twt){this.vwt&&this.vwt.clear(),this.vwt||(this.vwt=new Map);for(const t of this.Twt){const s=this.awt.jvt(t.flowchartStateTag),e=s.Ewt(t.flowchartElementId);this.vwt.set(e,s)}this.Twt=null}}Hwt(){return this.Qvt(),this.vwt}Vvt(t){return this.Qvt(),this.vwt.get(t)}qvt(t,s){this.vwt||(this.vwt=new Map),this.vwt.set(t,s)}}}{const jb=self.Gs;jb.tbt=class{constructor(t){this.Bc=t,this.sbt=new Map,this.ebt=null,this.ibt=[],this.rbt=()=>this.Grt(),this.nbt=null}qr(){jb.bh(this.ibt),this.ibt=null,this.sbt.clear(),this.sbt=null,this.ebt=null,this.Bc=null,this.nbt=null}Sq(){return this.Bc}nwt(t){return this.Bc.Pwt().nwt(t)}Hvt(t,s,e,i,r,n){const h=this.Bc.Pwt().nwt(t);if(!h)return void console.warn(`[Flowcharts] no flowchart found with name '${t}'`);if(this.sbt.has(e)){const t=this.sbt.get(e);t&&this.Pvt(t)}const o=new jb.owt(t,e,s,h,this,i,n);return this.sbt.set(e,o),r&&this.Jwt(o,!0),o}Pvt(t){if(t.Mvt(),t.Ivt())return;const s=t.S1();this.sbt.delete(s),t.qr(),this.ebt===t&&(this.ebt=null)}hbt(t){t.$f()}jvt(t){return this.sbt.get(t)}Rvt(t){this.ibt.push(t)}$vt(){this.ibt.pop()}Jwt(t,s=!1,e=!1,i=!0){if(i){const s=t.Kvt();t=s||t}t!==this.ebt&&(this.obt(),this.abt(t,s,e))}lbt(t){return"string"==typeof t?this.jvt(t):this.ibt.length?this.ibt[this.ibt.length-1]:this.ebt}obt(){if(!this.ebt)return;if(this.ebt.Jr())return;const t=this.ebt.Yrt().J1();this.ebt.Gvt(),this.Rvt(this.ebt),this.Bc.lZ(jb.uq.Evt.aq.ubt,t),this.$vt(),this.ebt._vt()}abt(t,s=!1,e=!1){if(this.ebt=t,!this.ebt)return;if(this.ebt.Jr())return;const i=this.ebt.Yrt().J1();this.ebt.Gvt(),this.Rvt(this.ebt),this.Bc.lZ(jb.uq.Evt.aq.cbt,i),!0!==e&&"number"!=typeof e||this.ebt.dwt(e),s&&(this.Bc.lZ(jb.uq.Evt.aq.Lvt,i),this.Bc.lZ(jb.uq.Evt.aq.kvt,i),this.Bc.lZ(jb.uq.Evt.aq.Nvt,i),this.Bc.lZ(jb.uq.Evt.aq.Bvt,i)),this.$vt(),this.ebt._vt()}wst(){return{flowchartJsonObjects:[...this.sbt.values()].map(t=>t.wst()),currentFlowchartTag:this.ebt?this.ebt.S1():null}}vst(t){if(!t)return;this.nbt=t;const s=new Map;for(const t of this.nbt.flowchartJsonObjects){const e=t.flowchartTag;if(this.sbt.has(e)){const i=this.sbt.get(e);i.vst(t),s.set(e,i)}else{const e=this.Hvt(t.flowchartName,t.startNodeTag,t.flowchartTag,null,!1,t.pluginUID);e.vst(t),s.set(t.flowchartTag,e)}}for(const[t,e]of this.sbt.entries())s.has(t)||e.qr();this.sbt.clear(),this.sbt=s,this.Bc.tit()?this.Bc.wf().addEventListener("afterload",this.rbt):this.Grt()}Grt(){this.Bc.wf().removeEventListener("afterload",this.rbt);const t=this.sbt.get(this.nbt.currentFlowchartTag);t&&this.Jwt(t,!0),this.nbt=null}}}{const Hb=self.Gs;Hb.rwt=class{constructor(){this.fbt=new Map}qr(){for(const t of this.fbt.values())t.qr();this.fbt.clear(),this.fbt=null}$u(t){const s=new Hb.dbt(t),e=s.Rc();this.fbt.set(e,s)}Hs(t){return this.fbt.get(t)}hwt(){return!!this.fbt.size}static pbt(t,s,e,i){if(s)for(const r of s){const s=new e(r,i);t.push(s)}}}}{const qb=self.Gs,Jb=0,Yb=1;qb.dbt=class{constructor(t){this.Xr=t[0],this.mbt=new qb.gbt(t[1],this)}qr(){this.mbt.qr(),this.mbt=null}ybt(){return this.mbt}Ewt(t){return this.mbt.Ewt(t)}fvt(t){return this.mbt.fvt(t)}dvt(){return this.mbt.dvt()}Rc(){return this.Xr}}}{const Xb=self.Gs,Kb=0,Zb=1,Qb=2,tx=3,sx=4,ex=5,ix=6,rx=7,nx=8,hx=8,ox=9,ax=10,lx=11;class ux{constructor(t,s){this.mbt=s,this.qc=t[7],this.Sbt=t[0],this.VS=t[1],this.VS?this.Uot=this.VS.trim().split(" ").map(t=>t.trim()):this.Uot=[],this.wbt=t[2],this.vbt=null,this.bbt=null,this.Fgt=!1,"dictionary"===this.qc&&(this.vbt=t[3],this.bbt=t[4],this.Fgt=t[8]),this.xbt=t[6],this.Cbt=null,this.Tbt=null,this.Mbt=null,"reference"===this.qc&&(this.Cbt=t[8],this.Tbt=t[9],this.Mbt=t[10],this.Fgt=t[11]),this.Ibt=new Xb.Gbt(t[5],this)}qr(){this.mbt=null}ybt(){return this.mbt}Zwt(){return this.Ibt}mwt(){return this.Sbt}S1(){return this.VS}F1(){return this.Uot}T1(t){if(!this.Uot)return!1;if(!this.Uot.length)return!1;const s=Xb.owt.wat(t);return!(!s||!s.length)&&s.every(Xb.owt.bat,this.Uot)}_bt(){return this.xbt}Pbt(t){this.xbt=!!t}Rbt(){if("dictionary"===this.qc)return!0;if("reference"===this.qc)return!1;throw new Error(`unexpected flowchart node type: ${this.qc}`)}Bwt(){return this.wbt}Abt(){return this.vbt}Ebt(){return this.bbt}eG(){return this.qc}Gut(){return this.Fgt}uvt(){return this.Cbt}cvt(){return this.Tbt}zvt(){return this.Mbt}}Xb.gbt=class{constructor(t,s){this.cwt=s,this.Obt=[],this.Fbt=new Map,this.Dbt=new Map,this.Lbt=null,Xb.rwt.pbt(this.Obt,t,ux,this);for(const t of this.Obt){const s=t.mwt(),e=t.S1(),i=t.F1(),r=t._bt();if(this.Fbt.set(s,t),e)for(const s of i)this.Dbt.has(s)||this.Dbt.set(s,new Set),this.Dbt.get(s).add(t);r&&(this.Lbt=t);const n=t.Zwt();for(const t of n.kbt()){const s=t.mwt();this.Fbt.set(s,t)}}this.Lbt||this.Nbt()}qr(){this.cwt=null;for(const t of this.Obt)t.qr();Xb.bh(this.Obt),this.Obt=null}Rwt(){return this.cwt}Ewt(t){return this.Fbt.get(t)}fvt(t){if(!t||!t.length)return null;const s=[];for(const e of t.trim().split(" ")){let t=this.Dbt.get(e.trim())??new Set;if(0===t.size)return null;s.push(t)}return[...s.reduce((t,s)=>s.size<t.size?s:t)].filter(t=>s.every(s=>s.has(t)))[0]}dvt(){return this.Lbt}*Bbt(){for(const t of this.Obt)yield t}Nbt(){let t=0;for(const s of this.Bbt())s._bt()&&t++;if(0===t){for(const t of this.Bbt())if(t.Rbt()&&!t._bt())return void t.Pbt(!0)}else{if(1===t)return;if(t>1){let t=!0;for(const s of this.Bbt())s.Rbt()&&(s._bt()&&t?t=!1:s._bt()&&!t&&s.Pbt(!1))}}for(const t of this.Bbt())if(t.Rbt()&&t._bt())return void(this.Lbt=t)}}}{const cx=self.Gs,fx=0,dx=1,px=2,mx=3,gx=4,yx=5;class Sx{constructor(t,s){this.Ibt=s,this.Sbt=t[0],this.Xr=t[1],this.Adt=t[2],this.$bt=t[3],this.Fgt=t[4],this.Ubt=t[5]}qr(){this.Ibt=null}Zwt(){return this.Ibt}mwt(){return this.Sbt}Rc(){return this.Xr}Hct(){return this.Adt}avt(){return this.$bt}Gut(){return this.Fgt}Vbt(){return this.Ubt}}cx.Gbt=class{constructor(t,s){this.Wbt=s,this.zbt=[],this.jbt=new Map,cx.rwt.pbt(this.zbt,t,Sx,this),this.Hbt=this.zbt.filter(t=>t.Gut());for(const t of this.Hbt)this.jbt.set(t.Rc(),t)}qr(){this.Wbt=null;for(const t of this.zbt)t.qr();cx.bh(this.zbt),this.zbt=null,cx.bh(this.Hbt),this.Hbt=null}qbt(){return this.Wbt}Kwt(){return this.Hbt.length}evt(){return this.Hbt}Yvt(t){return this.jbt.get(t)}svt(){for(const t of this.Hbt)if(t.Vbt())return t}*kbt(){for(const t of this.Hbt)yield t}}}{const wx=self.Gs;wx.Jbt=class extends wx.zr{constructor(t){super(),this.Ybt=t,this.Xbt=[],this.Xbt.push(wx.Hr(wx.Kbt,this)),this.US=0,this.Zbt=this.Xbt[0]}qr(){for(const t of this.Xbt)t.qr();wx.bh(this.Xbt),this.Zbt=null,this.Ybt=null}yY(){return this.Ybt}fY(){return this.Zbt}Qbt(){return this.Xbt[this.US-1]}Ru(){this.fY().Ru()}txt(){const t=this.Xbt,s=++this.US;if(s===t.length){const s=wx.Hr(wx.Kbt,this);t.push(s),this.Zbt=s}else{const e=t[s];e.$f(),this.Zbt=e}}sxt(){const t=this.Xbt,s=++this.US;s===t.length&&t.push(wx.Hr(wx.Kbt,this));const e=t[s];e.hd(t[s-1]),this.Zbt=e}j3(){this.Zbt=this.Xbt[--this.US]}ixt(t){const s=this.Xbt;for(let e=0,i=s.length;e<i;++e)s[e].ixt(t)}}}{const vx=self.Gs;vx.Kbt=class extends vx.zr{constructor(t){super(),this.Xbt=t,this.Ybt=this.Xbt.yY(),this.rxt=this.Ybt.Sq().vj(),this.nxt=!0,this.V6=[],this.hxt=[]}qr(){this.oxt(),this.Xbt=null,this.Ybt=null,this.rxt=null}oxt(){vx.bh(this.V6),vx.bh(this.hxt)}yY(){return this.Ybt}axt(){return this.nxt}lxt(){return this.nxt?!!this.Ybt.MY():!!this.V6.length}cY(){return this.nxt?this.Ybt.cY():this.V6}uxt(){return!!this.hxt.length}cxt(){return this.hxt}fxt(){const t=this.cY();return t.length?t:this.hxt}$f(){this.nxt=!0,vx.bh(this.hxt)}Ru(){this.nxt=!0}hd(t){t.axt()?this.$f():(this.nxt=!1,vx.Mh(this.V6,t.V6),vx.bh(this.hxt))}dxt(t){this.V6.push(t)}pxt(t){this.hxt.push(t)}mxt(t){this.nxt=!!t}gxt(){return this.V6}yxt(){return this.hxt}Sxt(t){this.nxt=!1,vx.bh(this.V6),this.V6.push(t)}wxt(t){this.nxt=!1,vx.Mh(this.V6,t)}vxt(t){this.nxt=!1,vx.bh(this.V6);for(const s of t)this.V6.push(s)}bxt(t,s){for(const e of s)t.has(e)||this.hxt.push(e)}xxt(t){for(const s of t)this.V6.push(s);vx.Rh(this.hxt,t)}Cxt(){vx.bh(this.hxt)}Txt(t){if(t)if(this.rxt.A3().dj().Mxt()){this.axt()&&(vx.bh(this.V6),vx.Mh(this.hxt,t.yY().cY()),this.nxt=!1);const s=this.hxt.indexOf(t);-1!==s&&(this.V6.push(this.hxt[s]),this.hxt.splice(s,1))}else this.Sxt(t)}ixt(t){vx.Rh(this.V6,t),vx.Rh(this.hxt,t)}}}{const bx=self.Gs;bx.Ixt=class extends bx.zr{constructor(t){super(),this.Gxt=t,this.Bc=this.Gxt.Sq(),this.Xbt=[],this.Xbt.push(bx.Hr(bx._xt,this,null)),this.US=0,this.Pxt=[]}qr(){for(const t of this.Xbt)t.qr();bx.bh(this.Xbt),bx.bh(this.Pxt),this.Gxt=null,this.Bc=null}oj(){return this.Gxt}Sq(){return this.Bc}A3(){return this.Xbt[this.US]}Rxt(){return this.Xbt}Axt(){return this.US}E3(t){const s=this.Xbt,e=++this.US;if(e===s.length){const e=bx.Hr(bx._xt,this,t);return s.push(e),e}{const i=s[e];return i.$f(t),i}}j3(){--this.US}Ext(t){this.Pxt.push(t)}Oxt(){this.Pxt.pop()}wj(){const t=this.Pxt;return 0===t.length?null:t.at(-1)}}}{const xx=self.Gs;xx._xt=class extends xx.zr{constructor(t,s){super(),this.Xbt=t,this.Bc=this.Xbt.Sq(),this.Fxt=s,this.Dxt=0,this.Lxt=0,this.kxt=!1,this.Nxt=!1,this.Bxt=null,this.$xt=0,this.Uxt=0,this.Vxt=null}qr(){this.$f(null),this.Xbt=null,this.Bc=null}$f(t){this.Fxt=t,this.Dxt=0,this.Lxt=0,this.kxt=!1,this.Nxt=!1,this.Vxt=null}Wxt(t,s){this.Fxt=t,this.Dxt=0,this.Lxt=s}zxt(){this.Dxt=0,this.Lxt=0}dj(){return this.Fxt}jxt(t){this.Fxt=t}Hxt(){return this.Dxt}qxt(t){this.Dxt=t}Jxt(){return this.Lxt}Yxt(t){this.Lxt=t}Xxt(t){this.kxt=!!t}Kxt(){return this.kxt}Zxt(t){this.Nxt=!!t}Qxt(){return this.Nxt}tCt(t){this.Bxt=t}sCt(){return this.Bxt}eCt(t,s){this.$xt=t,this.Uxt=s}bj(){return this.$xt}xj(t){this.Uxt=t}iCt(){return this.Uxt}rCt(){const t=this.Fxt;return!!t.nCt()||this.Dxt<t.hCt()-1&&!!t.xY().length}oCt(t){this.Vxt=t}aCt(){return this.Vxt}}}{const Cx=self.Gs;Cx.lCt=class extends Cx.zr{constructor(t){super(),this.Gxt=t,this.Bc=this.Gxt.Sq(),this.Xbt=[],this.US=-1,this.Zbt=null,this.uCt=[]}qr(){Cx.bh(this.Xbt),this.Gxt=null,this.Bc=null}cCt(t){this.uCt=t;const s=this.uCt.slice(0);this.Xbt.push(s),this.US=0,this.Zbt=s}oj(){return this.Gxt}Sq(){return this.Bc}fCt(){return this.Zbt}E3(){const t=++this.US,s=this.Xbt;t===s.length?s.push(this.uCt.slice(0)):Cx.Mh(s[t],this.uCt),this.Zbt=s[t]}j3(){this.Zbt=this.Xbt[--this.US]}}}{const Tx=self.Gs;Tx.dCt=class extends Tx.zr{constructor(t){super(),this.Gxt=t,this.Bc=this.Gxt.Sq(),this.Xbt=[],this.US=-1}qr(){Tx.bh(this.Xbt),this.Gxt=null,this.Bc=null}oj(){return this.Gxt}Sq(){return this.Bc}pCt(){return this.US>=0}fCt(){return this.Xbt[this.US]}E3(){if(++this.US,this.US===this.Xbt.length){const t=Tx.Hr(Tx.mCt,this);return this.Xbt.push(t),t}{const t=this.Xbt[this.US];return t.$f(),t}}j3(){--this.US}gCt(t){const s=this.Xbt;for(let e=this.US;e>=0;--e){const i=s[e];if(i.Rc()===t)return i}return null}yCt(){return this.Xbt.slice(0,this.US+1)}}}{const Mx=self.Gs;Mx.mCt=class extends Mx.zr{constructor(t){super(),this.SCt=t,this.Xr="",this.US=0,this.wCt=!1,this.vCt=NaN}$f(){this.Xr="",this.US=0,this.wCt=!1,this.vCt=NaN}F3(t){this.Xr=t}Rc(){return this.Xr}V3(t){this.US=t}Mz(){return this.US}b1(){this.wCt=!0}z3(){return this.wCt}bCt(t){this.vCt=t}xCt(){return this.vCt}}}{const Ix=self.Gs;Ix.CCt=class extends Ix.zr{constructor(){super(),this.Xbt=[],this.US=-1}qr(){Ix.bh(this.Xbt)}fCt(){return this.Xbt[this.US]}E3(){if(++this.US,this.US===this.Xbt.length){const t=[];return this.Xbt.push(t),t}return this.Xbt[this.US]}j3(){--this.US}}}{let Gx=function(t,s){return t.Mz()-s.Mz()},_x=function(t,s){for(let e=0,i=t.length;e<i;++e)if(t[e]!==s[e])return!1;return!0};SortSolArray=Gx,IsSolArrayIdentical=_x;const Px=self.Gs,Rx=self.assert;Px.TCt=class extends Px.zr{constructor(t){super(),this.Bc=t,this.MCt=[],this.ICt=new Map,this.GCt=[],this._Ct=new Map,this.PCt=new Map,this.RCt=new Map,this.ACt=new Map,this.ECt=new Map,this.OCt=new Map,this.FCt=0,this.DCt=[],this.LCt=[],this.kCt=[],this.NCt=new Map,this.BCt=new Map,this.rxt=Px.Hr(Px.Ixt,this),this.$Ct=Px.Hr(Px.lCt,this),this.SCt=Px.Hr(Px.dCt,this),this.UCt=[],this.VCt=[],this.WCt=[],this.zCt=0,this.jCt=0,this.HCt=0,this.qCt=[],this.JCt=[],this.YCt=[],this.XCt=new Map,this.KCt=new Map,self.c3_callFunction=(t,s)=>this.ZCt(t,s)}qr(){this.Sit(),this.rxt.qr(),this.rxt=null,this.$Ct.qr(),this.$Ct=null,Px.bh(this.VCt),Px.bh(this.WCt),this.Bc=null,Px.bh(this.MCt),this.ICt.clear()}KM(t){const s=Px.Hr(Px.QCt,this,t);this.MCt.push(s),this.ICt.set(s.Rc().toLowerCase(),s)}tTt(t){this.UCt.push(t)}sTt(){for(const t of this.BCt.values())t.eTt();for(const t of this.NCt.values())t.sTt();for(const t of this.BCt.values())t.sTt();for(const t of this.MCt)t.sTt();for(const t of this.MCt)t.Wet();for(const t of this.UCt)t.sTt(!1);Px.bh(this.UCt),this.$Ct.cCt(this.kCt)}Sq(){return this.Bc}Vet(t){return this.ICt.get(t.toLowerCase())||null}iTt(t){this.GCt.push(t),this._Ct.set(t.rTt(),t)}nTt(t){this.PCt.set(t.s9(),t)}hTt(t){this.RCt.set(t.s9(),t)}oTt(t){this.ACt.set(t.s9(),t)}aTt(t){switch(t.lTt()){case 0:this.NCt.set(t.uTt().toLowerCase(),t);break;case 1:this.BCt.set(t.uTt().toLowerCase(),t)}}cTt(t){this.OCt.set(t.s9(),t),t.g8()?this.DCt.push(t):this.LCt.push(t)}fTt(t){t.length>=2&&t.sort(Gx);let s=this.ECt.get(t.length);s||(s=[],this.ECt.set(t.length,s));for(let e=0,i=s.length;e<i;++e){const i=s[e];if(_x(t,i))return i}return s.push(t),t}dTt(t){return this.kCt.push(t.pTt()),this.FCt++}vj(){return this.rxt}mTt(){return this.vj().A3()}dj(){return this.mTt().dj()}gTt(){const t=this.mTt();return t.dj().yTt(t.Hxt())}STt(){const t=this.mTt();return t.dj().wTt(t.Jxt())}vTt(){return this.$Ct}O3(){return this.SCt}bTt(t){const s=[];for(t=t.xTt();t;)Px.Fr(s,t.CTt()),t=t.xTt();return s}TTt(t){const s={};for(const e of this.bTt(t))s[e.MTt()]=e.ITt();return Object.create(Object.prototype,s)}GTt(t){return this.OCt.get(t)||null}_Tt(t){return this.PCt.get(t)||null}PTt(t){return this.RCt.get(t)||null}RTt(t){return this.ACt.get(t)||null}aj(t){return this.NCt.get(t.toLowerCase())||null}pY(t,s){let e=this.BCt.get((t.Rc()+"."+s).toLowerCase());if(e)return e;if(!t.mY())for(const i of t.EY())if(e=this.BCt.get((i.Rc()+"."+s).toLowerCase()),e)return e;return null}ATt(){return this.DCt}ETt(){return this.LCt}OTt(t){for(const t of this.DCt)t.FTt();if(t)for(const t of this.LCt)t.tM()&&t.FTt()}DTt(t){return this._Ct.get(t.toLowerCase())||null}LTt(t){const s=this.PCt.get(t);return s&&s.kTt()?s:null}NTt(){return this.GCt}BTt(){for(const t of this.GCt)t.$Tt()}UTt(){for(const t of this.MCt)t.VTt()}WTt(t){this.UTt(),this.zCt++;for(const s of t.Yit()){const t=s.pet();t&&(this.Bc.zTt(s),t.CP(),this.Bc.jTt())}this.zCt--}async HTt(t){this.UTt(),this.zCt++;for(const s of this.qTt(t))await this.Bc.JTt(s);this.zCt--}*qTt(t){for(const s of t.Yit()){const t=s.pet();t&&(this.Bc.zTt(s),yield*t.YTt(),this.Bc.jTt())}}XTt(t,s,e,i){let r=!1;if(!t.dH())return this.KTt(s,e,i);this.jCt++;for(const n of t.Yit()){const t=n.pet();if(!t)continue;this.Bc.zTt(n);for(const n of t.ZTt()){const t=n.XTt(s,e,i);r=r||t}const h=t.XTt(s,e,i);r=r||h,this.Bc.jTt()}return this.jCt--,r}*QTt(t,s,e,i){let r=!1;if(!t.dH())return this.KTt(s,e,i);this.jCt++;for(const n of t.Yit()){const t=n.pet();if(!t)continue;this.Bc.zTt(n);for(const n of t.ZTt()){const t=yield*n.QTt(s,e,i);r=r||t}const h=yield*t.QTt(s,e,i);r=r||h,this.Bc.jTt()}return this.jCt--,r}KTt(t,s,e){return this.VCt.push([t,s,e]),!1}tMt(t,s,e){let i=null;const r=new Promise(t=>i=t);return this.WCt.push([t,s,e,i]),r}*sMt(){if(this.Bc.eMt())throw new Error("should not be in breakpoint");const t=this.Bc.gH();for(;this.WCt.length;){const[s,e,i,r]=this.WCt.shift();r(yield*this.QTt(t,s,e,i))}}async iMt(){for(const t of this.sMt())await this.Bc.JTt(t)}rMt(t,s,e,i){let r=!1;const n=t.dH(),h=n.pet();if(!h)return;this.jCt++,this.Bc.zTt(n);const o=h.ZTt();for(let t=0,n=o.length;t<n;++t){const n=o[t].rMt(s,e,i);r=r||n}const a=h.rMt(s,e,i);return r=r||a,this.Bc.jTt(),this.jCt--,r}*nMt(t,s,e,i){let r=!1;const n=t.dH(),h=n.pet();if(!h)return;this.jCt++,this.Bc.zTt(n);const o=h.ZTt();for(let t=0,n=o.length;t<n;++t){const n=yield*o[t].nMt(s,e,i);r=r||n}const a=yield*h.nMt(s,e,i);return r=r||a,this.Bc.jTt(),this.jCt--,r}hMt(){return this.jCt}oMt(){return this.hMt()>0}aMt(){return++this.jCt}lMt(){--this.jCt}uMt(){return this.zCt>0}JH(){return this.uMt()||this.oMt()}lit(t){for(const[s,e,i]of this.VCt)this.XTt(t,s,e,i);Px.bh(this.VCt)}PY(t){t?this.HCt++:this.HCt--}XH(){return this.HCt>0}cMt(t){for(let s=0,e=t.length;s<e;++s)t[s].fMt().Ru()}dMt(t){for(let s=0,e=t.length;s<e;++s)t[s].fMt().txt()}N3(t){for(let s=0,e=t.length;s<e;++s)t[s].fMt().sxt()}U3(t){for(let s=0,e=t.length;s<e;++s)t[s].fMt().j3()}pj(t){const s=new Set,e=this.rxt.Rxt(),i=this.rxt.Axt();for(let r=0;r<=i;++r){const i=e[r].aCt();if(i)for(const e of i)t&&t.has(e)||s.add(e)}return s}pMt(t){const s=new Set([...t]),e=this.pj(s);if(e.size>0){for(const t of e)t.fMt().txt();return[...e]}return null}mMt(){const t=Px.Hr(Px.gMt,this);return this.qCt.push(t),t}yMt(){return this.qCt}SMt(){if(!this.qCt.length)return;const t=this.mTt();let s=!1;this.zCt++;for(let e=0,i=this.qCt.length;e<i;++e){const i=this.qCt[e];i.wMt()&&i.vMt(t),i.bMt()&&(s=!0)}s&&(this.xMt(),t.$f(null)),this.zCt--}async CMt(){if(!this.qCt.length)return;const t=this.mTt();let s=!1;this.zCt++;for(let e=0,i=this.qCt.length;e<i;++e){const i=this.qCt[e];i.wMt()&&await i.TMt(t),i.bMt()&&(s=!0)}s&&(this.xMt(),t.$f(null)),this.zCt--}xMt(){const t=Px.Ph(this.qCt,t=>t.bMt());for(const s of t)s.qr()}Sit(){for(const t of this.qCt)t.qr();Px.bh(this.qCt)}MMt(t){for(const s of this.qCt)s.ixt(t);for(const s of t){const t=this.KCt.get(s);if(this.KCt.delete(s),t)for(const{resolve:s}of t.IMt.values())s(!0)}}GMt(t){this.JCt.push({promise:t,_Mt:this.hMt()})}PMt(){Px.bh(this.JCt)}RMt(){const t=this.hMt(),s=Promise.all(this.JCt.filter(s=>s._Mt===t).map(t=>t.promise));return this.JCt=this.JCt.filter(s=>s._Mt<t),s}Cj(t){const s=t.toLowerCase();this.YCt.push(s),this.Bc.lZ(Px.uq.lq.aq.AMt,null),this.YCt.pop();for(const t of this.Bc.oj().yMt())t.EMt()&&t.OMt()===s&&t.FMt();const e=this.XCt.get(s);e&&(e.resolve(),this.XCt.delete(s))}Mj(t){const s=t.toLowerCase(),e=this.XCt.get(s);if(e)return e.promise;{let t=null;const e=new Promise(s=>t=s);return this.XCt.set(s,{promise:e,resolve:t}),e}}DMt(){if(0===this.YCt.length)throw new Error("not in a signal");return this.YCt.at(-1)}LMt(t){let s=this.KCt.get(t);return s||(s={kMt:[],IMt:new Map},this.KCt.set(t,s)),s}QK(t,s){const e=this.LMt(t),i=s.toLowerCase();e.kMt.push(i),this.Bc.lZ(t.tY().BMt().aq.NMt,t),e.kMt.pop();for(const s of this.Bc.oj().yMt())s.$Mt()&&s.OMt()===i&&s.UMt(t);const r=e.IMt.get(i);r&&(r.resolve(!1),e.IMt.delete(i)),0===e.kMt.length&&0===e.IMt.size&&this.KCt.delete(t)}tZ(t,s){const e=this.LMt(t),i=s.toLowerCase(),r=e.IMt.get(i);if(r)return r.promise;{let t=null;const s=new Promise(s=>t=s);return e.IMt.set(i,{promise:s,resolve:t}),s}}VMt(t){const s=this.LMt(t);if(!s||0===s.kMt.length)throw new Error("not in a signal");return s.kMt.at(-1)}wst(){return{groups:this.WMt(),cnds:this.zMt(),acts:this.jMt(),vars:this.HMt(),waits:this.qMt()}}vst(t){this.JMt(t.groups),this.YMt(t.cnds),this.XMt(t.acts),this.KMt(t.vars),this.ZMt(t.waits)}WMt(){const t={};for(const s of this.NTt())t[s.s9().toString()]=s.QMt();return t}JMt(t){for(const[s,e]of Object.entries(t)){const t=parseInt(s,10),i=this.LTt(t);i&&i.tIt(e)}}zMt(){const t={};for(const[s,e]of this.RCt){const i=e.wst();i&&(t[s.toString()]=i)}return t}YMt(t){const s=new Map;for(const[e,i]of Object.entries(t))s.set(parseInt(e,10),i);for(const[t,e]of this.RCt)e.vst(s.get(t)||null)}jMt(){const t={};for(const[s,e]of this.ACt){const i=e.wst();i&&(t[s.toString()]=i)}return t}XMt(t){const s=new Map;for(const[e,i]of Object.entries(t))s.set(parseInt(e,10),i);for(const[t,e]of this.ACt)e.vst(s.get(t)||null)}HMt(){const t={};for(const[s,e]of this.OCt)e.sIt()||!e.g8()&&!e.tM()||(t[s.toString()]=e.Hct());return t}KMt(t){for(const[s,e]of Object.entries(t)){const t=parseInt(s,10),i=this.GTt(t);i&&i.Pft(e)}}qMt(){return this.qCt.filter(t=>!t.eIt()).map(t=>t.wst())}ZMt(t){this.Sit();for(const s of t){const t=Px.gMt.iIt(this,s);t&&this.qCt.push(t)}}rIt(){return[...this.Bc.gH().Yit()].map(t=>t.pet()).filter(t=>t).map(t=>t.nIt())}hIt(t){for(;t;){const s=t.xTt();if(s instanceof Px.oIt)return s;t=s}return null}ZCt(t,s){Array.isArray(s)||(s=[]);const e=this.aj(t.toLowerCase());if(!e)return null;if(!e.Gu())return e.lj();const i=e.aIt();if(s.length<i.length){s=s.slice(0);do{s.push(i[s.length].pTt())}while(s.length<i.length)}const r=e.cj();return r.mj(r.fj(),!1,e.yj(),e.lj(),null,...s)}}}{const Ax=self.Gs;Ax.QCt=class extends Ax.zr{constructor(t,s){super(),this.Gxt=t,this.Bc=t.Sq(),this.Xr=s[0],this.lIt=[],this.uIt=new Map,this.cIt=new Map,this.fIt=new Map,this.dIt=!1,this.pIt=[],this.mIt=[],this.gIt=new Set;for(const t of s[1])this.yIt(t,null,this.lIt);this.SIt=this.Bc.yZ()?{type:"sheet",name:this.Xr,wIt:0,children:[]}:null}qr(){this.Gxt=null,this.Bc=null}yIt(t,s,e){switch(t[0]){case 0:case 3:this.vIt(t,s,e);break;case 1:this.bIt(t,s,e);break;case 2:this.xIt(t,s,e);break;case 4:this.CIt(t,s);break;case 5:this.TIt(t,s,e);break;case 6:this.MIt(t,s);break;default:throw new Error("invalid event type")}}vIt(t,s,e){const i=Ax.IIt.KM(this,s,t);if(i.Mxt()){e.push(i);const t=i.GIt();for(let s=0,e=t.length;s<e;++s)t[s]._It()&&this.PIt(i,s)}else i._It()?this.PIt(i,0):e.push(i)}CIt(t,s){const e=Ax.oIt.RIt(this,s,t);this.Gxt.aTt(e)}MIt(t,s){const e=Ax.oIt.AIt(this,s,t);this.Gxt.aTt(e)}bIt(t,s,e){const i=Ax.EIt.KM(this,s,t);e.push(i)}xIt(t,s,e){const i=Ax.OIt.KM(this,s,t);e.push(i)}TIt(t,s,e){const i=Ax.FIt.KM(this,s,t);e.push(i)}PIt(t,s){t.Mxt()||this.Gxt.tTt(t);const e=t.yTt(s),i=e.DIt(),r=e.yY();if(e.LIt()){let n=this.cIt.get(r);n||(n=new Map,this.cIt.set(r,n));const h=e.kIt().toLowerCase();let o=n.get(i);o||(o=new Map,n.set(i,o));let a=o.get(h);a||(a=[],o.set(h,a)),a.push([t,s])}else{let n=this.uIt.get(r);n||(n={NIt:new Map,BIt:new Map},this.uIt.set(r,n));const h=e.I0();let o;h?(o=n.BIt.get(h),o||(o=new Map,n.BIt.set(h,o))):o=n.NIt;let a=o.get(i);a||(a=[],o.set(i,a)),a.push([t,s])}}sTt(){const t=this.lIt;for(let s=0,e=t.length;s<e;++s){const i=s<e-1&&t[s+1]instanceof Ax.IIt&&t[s+1].$It();t[s].sTt(i)}}UIt(t){this.pIt.push(t)}Wet(){Ax.bh(this.mIt),this.VIt(this),this.gIt.clear()}VIt(t){const s=t.mIt,e=t.gIt;for(const i of this.pIt){const r=i.WIt();i.zIt()&&t!==r&&!e.has(r)&&(e.add(r),r.VIt(t),s.push(r))}}ZTt(){return this.mIt}oj(){return this.Gxt}Sq(){return this.Bc}Rc(){return this.Xr}jIt(t,s){this.fIt.set(s,t)}HIt(t){return this.fIt.get(t)||null}VTt(){this.dIt=!1}CP(){if(this.dIt)return;const t=this.Bc,s=t.qIt(),e=s?performance.now():0;this.dIt=!0;const i=this.oj(),r=i.mTt();for(const s of this.lIt)s.CP(r),i.cMt(s.xY()),i.PMt(),t.KH();r.$f(null),s&&(this.SIt.wIt+=performance.now()-e)}*YTt(){if(this.dIt)return;this.dIt=!0;const t=this.Bc,s=this.oj(),e=s.mTt();for(const i of this.lIt)yield*i.YTt(e),s.cMt(i.xY()),s.PMt(),t.KH();e.$f(null)}XTt(t,s,e){if(!s)return this.JIt(t,s,null,null);{const i=s.yY();let r=!1,n=this.JIt(t,s,i,e);r=r||n;for(const h of i.EY())n=this.JIt(t,s,h,e),r=r||n}}JIt(t,s,e,i){const r=this.uIt.get(e);if(!r)return!1;const n=i?r.BIt.get(i):r.NIt;if(!n)return!1;const h=n.get(t);if(!h)return!1;let o=!1;for(const[t,e]of h){const i=this.YIt(s,t,e);o=o||i}return o}*QTt(t,s,e){if(!s)return yield*this.XIt(t,s,null,null);{const i=s.yY();let r=!1,n=yield*this.XIt(t,s,i,e);r=r||n;for(const h of i.EY())n=yield*this.XIt(t,s,h,e),r=r||n}}*XIt(t,s,e,i){const r=this.uIt.get(e);if(!r)return!1;const n=i?r.BIt.get(i):r.NIt;if(!n)return!1;const h=n.get(t);if(!h)return!1;let o=!1;for(const[t,e]of h){let i;i=t.KIt()?this.YIt(s,t,e):yield*this.ZIt(s,t,e),o=o||i}return o}rMt(t,s,e){const i=s.yY(),r=this.cIt.get(i);if(!r)return!1;const n=r.get(t);if(!n)return!1;const h=n.get(e);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],e=this.YIt(null,s[0],s[1]);o=o||e}return o}*nMt(t,s,e){const i=s.yY(),r=this.cIt.get(i);if(!r)return!1;const n=r.get(t);if(!n)return!1;const h=n.get(e);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],e=s[0],i=s[1];let r;r=e.KIt()?this.YIt(null,e,i):yield*this.ZIt(null,e,i),o=o||r}return o}YIt(t,s,e){const i=this.Bc,r=this.Gxt,n=r.dj(),h=r.vj(),o=r.hMt();let a=!1;n&&r.dMt(n.fj()),r.dMt(s.fj());const l=o>1;l&&r.vTt().E3();const u=h.E3(s);t&&(s.GIt()[e].yY().fY().Sxt(t),t.DK()&&t.QIt());let c=!0;if(s.vQ()){const t=s.tGt();for(let s=0,e=t.length;s<e;++s)if(!t[s].sGt(u)){c=!1;break}}return c&&(s.Mxt()?s.eGt(u,e):s.CP(u),a=u.Kxt()),h.j3(),l&&r.vTt().j3(),r.U3(s.fj()),n&&r.U3(n.fj()),n||1!==o||(r.PMt(),r.XH()||i.KH()),a}*ZIt(t,s,e){const i=this.Bc,r=this.Gxt,n=r.dj(),h=r.vj(),o=r.hMt();let a=!1;n&&r.dMt(n.fj()),r.dMt(s.fj());const l=o>1;l&&r.vTt().E3();const u=h.E3(s);t&&(s.GIt()[e].yY().fY().Sxt(t),t.DK()&&t.QIt());let c=!0;if(s.vQ()){const t=s.tGt();for(let s=0,e=t.length;s<e;++s)if(!(yield*t[s].iGt(u))){c=!1;break}}return c&&(s.Mxt()?yield*s.rGt(u,e):yield*s.YTt(u),a=u.Kxt()),h.j3(),l&&r.vTt().j3(),r.U3(s.fj()),n&&r.U3(n.fj()),n||1!==o||(r.PMt(),r.XH()||i.KH()),a}nIt(){return this.SIt}}}{let Ex=function(t,s){return!0};NoActions=Ex;const Ox=self.Gs,Fx=[];function*Dx(t,s){return!0}Ox.IIt=class extends Ox.zr{constructor(t,s,e){super(),this.Ost=t,this.Bc=t.Sq(),this.nGt=s,this.hGt=null,this.rxt=this.Bc.oj().vj(),this.oGt=[],this.aGt=[],this.lGt=!1,this.uGt=!1,this.cGt=!1,this.fGt=!1,this.dGt=!!e[2],this.pGt=!1,this.mGt=null,this.gGt=[],this.Ddt=[],this.yGt=[],this.SGt=Ex,this.wGt=Dx,this.vGt=!1,this.bGt=!1,this.xGt="",this.CGt=!1,this.TGt=null,this.SIt=null,this.x8=e[4],this.MGt=e[5],this.Ost.jIt(this,this.MGt),this.IGt=this.Bc.yZ()?{GGt:e[3][0],_Gt:e[3][1],PGt:!1,RGt:!1,AGt:!1,EGt:!1}:null,this.oj().nTt(this),3===e[0]&&this.OGt(e[1]);let i=0;for(const t of e[6]){const s=Ox.FGt.KM(this,t,i++);this.gGt.push(s),this.DGt(s.yY())}i=0;for(const t of e[7]){const s=Ox.LGt.KM(this,t,i++);this.Ddt.push(s)}if(9===e.length){const t=e[8];for(const s of t)this.Ost.yIt(s,this,this.yGt)}this.gGt.length&&(this.pGt=null===this.gGt[0].yY()&&this.gGt[0].DIt()===Ox.uq.lq.aq.kGt),0===this.gGt.length&&(this.gGt=Fx),0===this.Ddt.length&&(this.Ddt=Fx),0===this.yGt.length&&(this.yGt=Fx)}static KM(t,s,e){return Ox.Hr(Ox.IIt,t,s,e)}OGt(t){this.vGt=!0,this.bGt=!!t[0],this.CGt=this.bGt,this.xGt=t[1].toLowerCase(),this.TGt=[],this.oj().iTt(this),this.Bc.yZ()&&(this.SIt={type:"group",name:t[1],wIt:0,children:[]})}NGt(t){this.TGt.push(t)}BGt(t,s){for(const e of t.Pet().BY())s.includes(e)||s.push(e)}$Gt(t,s){if(t)if(s.includes(t)||s.push(t),t.mY())for(const e of t.NY())e.DK()&&this.BGt(e,s);else t.DK()&&this.BGt(t,s)}DGt(t){this.$Gt(t,this.oGt)}UGt(t){this.$Gt(t,this.aGt)}VGt(){this.oGt=this.Bc.J7()}sTt(t){this.fGt=!!t,this.WGt(),this.zGt();for(const t of this.gGt)t.sTt();if(this.Ddt.length>0){let t=!1;for(const s of this.Ddt)s.sTt(),s.jGt()&&(t=!0);t?(this.SGt=this.HGt,this.wGt=this.qGt):(this.SGt=this.JGt,this.wGt=this.YGt)}const s=this.yGt;for(let t=0,e=s.length;t<e;++t){const i=t<e-1&&s[t+1]instanceof Ox.IIt&&s[t+1].$It();s[t].sTt(i)}this.IGt&&this.XGt(),this.SIt&&this.KGt().nIt().children.push(this.SIt)}nIt(){return this.SIt}KGt(){let t=this.vQ();for(;t;){if(t.kTt())return t;t=t.vQ()}return this.Ost}XGt(){const t=this.IGt;t.PGt=this.gGt.every(t=>t.KIt()),t.RGt=this.Ddt.every(t=>t.KIt()),t.AGt=this.yGt.every(t=>t.KIt()),t.EGt=t.PGt&&t.RGt&&t.AGt}ZGt(){let t=this;do{t.XGt(),t=t.vQ()}while(t)}WGt(){if(!this.kTt())return;let t=this.vQ();for(this.cGt=!0;t;){if(!t.kTt()){this.cGt=!1;break}t=t.vQ()}}QGt(){const t=this.Bc.J7();if(this.oGt===t)this.aGt=t;else{this.aGt=Ox.Oh(this.oGt);let t=this.vQ();for(;t;){for(const s of t.oGt)this.UGt(s);t=t.vQ()}const s=this.oj();this.oGt=s.fTt(this.oGt),this.aGt=s.fTt(this.aGt)}}zGt(){if(!this.t_t())return;this.mGt=[];let t=this.vQ();for(;t;)this.mGt.push(t),t=t.vQ();this.mGt.reverse()}s_t(){this.uGt=!0,this.nGt&&this.nGt.s_t()}nCt(){return this.uGt}xY(){return this.oGt}fj(){return this.lGt||(this.lGt=!0,this.QGt()),this.aGt}e_t(t){return this.oGt.includes(t)}tGt(){return this.mGt}pet(){return this.Ost}oj(){return this.Ost.oj()}Sq(){return this.Bc}vQ(){return this.nGt}i_t(t){this.hGt=t}xTt(){return this.hGt||this.nGt}r_t(){return this.MGt}n_t(){return this.IGt&&this.IGt._Gt}h_t(){return this.n_t()&&this.IGt.GGt}o_t(t){this.IGt.GGt=!!t,this.ZGt()}kTt(){return this.vGt}a_t(){return this.cGt}$It(){return this.pGt}l_t(){return this.fGt}rTt(){return this.xGt}QMt(){return this.CGt}$Tt(){this.tIt(this.bGt)}tIt(t){if(t=!!t,!this.vGt)throw new Error("not a group");if(this.CGt!==t){this.CGt=t;for(const t of this.TGt)t.u_t();if(this.TGt.length){const t=this.Bc.DH().pet();t&&t.Wet()}}}s9(){return this.x8}Mxt(){return this.dGt}_It(){return this.gGt.length&&this.gGt[0]._It()}c_t(){return this.hGt&&this.hGt instanceof Ox.oIt}t_t(){return this.c_t()||this.gGt.some(t=>t._It())}GIt(){return this.gGt}hCt(){return this.gGt.length}yTt(t){if((t=Math.floor(t))<0||t>=this.gGt.length)throw new RangeError("invalid condition index");return this.gGt[t]}f_t(t){return this.yTt(t)}d_t(t){let s=t.Mz();if(0===s)return!0;--s;const e=t.p_t()?t.m_t():t.yY();for(;s>=0;--s){const t=this.gGt[s];if(e===t.yY()||t.p_t()&&t.m_t()===e)return!1}return!0}g_t(){return this.Ddt}y_t(){return this.Ddt.length}wTt(t){if((t=Math.floor(t))<0||t>=this.Ddt.length)throw new RangeError("invalid action index");return this.Ddt[t]}S_t(t){t=Math.floor(t);const s=this.Ddt.find(s=>s.w_t()===t);if(!s)throw new RangeError("invalid action debug index");return s}v_t(t){return(t=Math.floor(t))>=0&&t<this.Ddt.length}b_t(){return this.yGt}CTt(){return this.yGt.filter(t=>t instanceof Ox.EIt)}sGt(t){t.jxt(this);const s=this.gGt;let e=0===s.length;for(let i=0,r=s.length;i<r;++i){const r=s[i];if(t.qxt(i),r.$0())throw new Error("trigger cannot be used as sub-event to a loop");if(r.CP())e=!0;else if(!this.dGt)return!1}return!this.dGt||e}eGt(t,s){t.jxt(this),t.qxt(s),this.gGt[s].CP()&&(this.SGt(t,0)&&this.x_t(t),t.Xxt(!0))}*iGt(t){t.jxt(this);const s=this.gGt;let e=0===s.length;for(let i=0,r=s.length;i<r;++i){const r=s[i];if(t.qxt(i),r.$0())throw new Error("trigger cannot be used as sub-event to a loop");let n;if(n=r.KIt()?r.CP():yield*r.YTt(),n)e=!0;else if(!this.dGt)return!1}return!this.dGt||e}*rGt(t,s){t.jxt(this),t.qxt(s);const e=this.gGt[s];let i;if(i=e.KIt()?e.CP():yield*e.YTt(),i){let s;s=this.C_t()?this.SGt(t,0):yield*this.wGt(t,0),s&&(this.T_t()?this.x_t():yield*this.M_t()),t.Xxt(!0)}}CP(t){t.jxt(this),this.pGt||t.Zxt(!1),this.dGt?this.I_t(t):this.G_t(t)}*YTt(t){(this.h_t()||this.Bc.__t())&&(yield this),t.jxt(this),this.pGt||t.Zxt(!1),this.dGt?yield*this.P_t(t):yield*this.R_t(t)}I_t(t){const s=this.gGt;let e=0===s.length;for(let i=0,r=s.length;i<r;++i){const r=s[i];if(r._It())continue;t.qxt(i);const n=r.CP();e=e||n}t.Xxt(e),e&&(this.SGt(t,0)&&this.x_t(t),this.fGt&&t.Zxt(!0))}*P_t(t){const s=this.gGt;let e=0===s.length;for(let i=0,r=s.length;i<r;++i){const r=s[i];if(r._It())continue;let n;t.qxt(i),n=r.KIt()?r.CP():yield*r.YTt(),e=e||n}if(t.Xxt(e),e){let s;s=this.C_t()?this.SGt(t,0):yield*this.wGt(t,0),s&&(this.T_t()?this.x_t():yield*this.M_t()),this.fGt&&t.Zxt(!0)}}G_t(t){const s=this.gGt;for(let e=0,i=s.length;e<i;++e){const i=s[e];if(t.qxt(e),!i.CP())return void t.Xxt(!1)}t.Xxt(!0),this.SGt(t,0)&&this.x_t(t),t.Kxt()&&this.fGt&&t.Zxt(!0)}*R_t(t){const s=this.gGt;for(let e=0,i=s.length;e<i;++e){const i=s[e];let r;if(t.qxt(e),r=i.KIt()?i.CP():yield*i.YTt(),!r)return void t.Xxt(!1)}let e;t.Xxt(!0),e=this.C_t()?this.SGt(t,0):yield*this.wGt(t,0),e&&(this.T_t()?this.x_t():yield*this.M_t()),t.Kxt()&&this.fGt&&t.Zxt(!0)}JGt(t,s){const e=this.Ddt;for(let i=s,r=e.length;i<r;++i){const s=e[i];t.Yxt(i),s.CP()}return!0}*YGt(t,s){const e=this.Ddt;for(let i=s,r=e.length;i<r;++i){const s=e[i];t.Yxt(i),s.KIt()?s.CP():yield*s.YTt()}return!0}HGt(t,s){const e=this.oj(),i=this.Ddt;for(let r=s,n=i.length;r<n;++r){const s=i[r];t.Yxt(r);const n=s.CP();if(s.A_t()&&!0===n)return!1;s.E_t()&&n instanceof Promise&&e.GMt(n)}return!0}*qGt(t,s){const e=this.oj(),i=this.Ddt;for(let r=s,n=i.length;r<n;++r){const s=i[r];let n;if(t.Yxt(r),n=s.KIt()?s.CP():yield*s.YTt(),s.A_t()&&!0===n)return!1;s.E_t()&&n instanceof Promise&&e.GMt(n)}return!0}O_t(t){this.SGt(t,t.Jxt())&&this.x_t()}*F_t(t){(yield*this.wGt(t,t.Jxt()))&&(yield*this.M_t())}x_t(){if(!this.yGt.length)return;const t=this.kTt()&&this.Bc.qIt(),s=t?performance.now():0,e=this.rxt,i=e.E3(this);this.uGt?this.D_t(i):this.L_t(i),e.j3(),t&&(this.SIt.wIt+=performance.now()-s)}D_t(t){const s=this.vGt,e=this.cGt,i=this.oj(),r=this.yGt;for(let n=0,h=r.length,o=h-1;n<h;++n){const h=r[n],a=h.xY(),l=!e||!s&&n<o;l&&i.N3(a),h.CP(t),l?i.U3(a):i.cMt(a)}}L_t(t){const s=this.yGt;for(let e=0,i=s.length;e<i;++e)s[e].CP(t)}*M_t(){if(!this.yGt.length)return;const t=this.rxt,s=t.E3(this);this.uGt?yield*this.k_t(s):yield*this.N_t(s),t.j3()}*k_t(t){const s=this.vGt,e=this.cGt,i=this.oj(),r=this.yGt;for(let n=0,h=r.length,o=h-1;n<h;++n){const h=r[n],a=h.xY(),l=!e||!s&&n<o;l&&i.N3(a),yield*h.YTt(t),l?i.U3(a):i.cMt(a)}}*N_t(t){const s=this.yGt;for(let e=0,i=s.length;e<i;++e)yield*s[e].YTt(t)}B3(t,s){s.zxt();const e=this.gGt;if(!this.Mxt())for(let i=t.Hxt()+1,r=e.length;i<r;++i){const t=e[i];if(s.qxt(i),!t.CP())return!1}return this.SGt(s,0)&&this.x_t(s),!0}*B_t(t,s){s.zxt();const e=this.gGt;if(!this.Mxt())for(let i=t.Hxt()+1,r=e.length;i<r;++i){const t=e[i];let r;if(s.qxt(i),r=t.KIt()?t.CP():yield*t.YTt(),!r)return!1}let i;return i=this.C_t()?this.SGt(s,0):yield*this.wGt(s,0),i&&(this.T_t()?this.x_t():yield*this.M_t()),!0}KIt(){return!this.h_t()&&!this.Bc.__t()&&this.IGt.EGt}C_t(){return!this.Bc.__t()&&this.IGt.RGt}T_t(){return!this.Bc.__t()&&this.IGt.AGt}$_t(t){if(this.vQ()){const s=this.tGt();for(let e=0,i=s.length;e<i;++e)if(!s[e].sGt(t))return!1}return!0}*U_t(t){if(this.vQ()){const s=this.tGt();for(let e=0,i=s.length;e<i;++e)if(!(yield*s[e].iGt(t)))return!1}return!0}V_t(t,s,e){if(s.length>0)if(e){const e=s.map(t=>t.Hs(0));t.vTt().E3(),this.hGt.W_t(e)}else this.hGt.z_t(s);else e&&t.vTt().E3()}#s(t,s,e,i){let r=null;if(s.j_t){const t=e?s.j_t.fY():s.j_t.fMt().Qbt(),i=s.H_t.fY();i.wxt(t.cY()),i.Cxt(),e||s.H_t.q_t()}else if(s.wY){const t=s.wY.fY();t.wxt(s.vY),t.Cxt()}return s.J_t&&(r=t.pMt(i)),r}Y_t(t,s,e,i){let r,n;const h=t.length>0;let o=null;const a=this.Bc,l=this.rxt,u=a.oj(),c=this.hGt,f=c.E_t(),d=u.aMt()>1;this.V_t(u,s,d),h&&(e?u.N3(t):u.dMt(t)),null!==i&&(o=this.#s(u,i,e,t));const p=l.E3(this);return e&&p.oCt(t),this.$_t(p)&&(p.jxt(this),f&&([n,r]=c.X_t()),this.G_t(p),f&&c.K_t(n)),l.j3(),d&&u.vTt().j3(),null!==o&&u.U3(o),h&&u.U3(t),u.lMt(),r}*Z_t(t,s,e,i){let r,n;(this.h_t()||this.Bc.__t())&&(yield this);const h=t.length>0;let o=null;const a=this.Bc,l=this.rxt,u=a.oj(),c=this.hGt,f=c.E_t(),d=u.aMt()>1;if(this.V_t(u,s,d),h&&(e?u.N3(t):u.dMt(t)),null!==i){if(i.j_t){const t=e?i.j_t.fY():i.j_t.fMt().Qbt(),s=i.H_t.fY();s.wxt(t.cY()),s.Cxt(),e||i.H_t.q_t()}else if(i.wY){const t=i.wY.fY();t.wxt(i.vY),t.Cxt()}i.J_t&&(o=u.pMt(t))}const p=l.E3(this);return e&&p.oCt(t),(yield*this.U_t(p))&&(p.jxt(this),f&&([n,r]=c.X_t()),yield*this.R_t(p),f&&c.K_t(n)),l.j3(),d&&u.vTt().j3(),null!==o&&u.U3(o),h&&u.U3(t),u.lMt(),r}Q_t(t,s){const e=this.fj(),i=e.length>0,r=this.Bc,n=this.rxt,h=r.oj(),o=h.aMt()>1;o&&h.vTt().E3(),this.hGt.W_t(t),i&&(s?h.N3(e):h.dMt(e));const a=n.E3(this);this.$_t(a)&&(a.jxt(this),this.G_t(a)),n.j3(),o&&h.vTt().j3(),i&&h.U3(e),h.lMt()}*tPt(t,s){(this.h_t()||this.Bc.__t())&&(yield this);const e=this.fj(),i=e.length>0,r=this.Bc,n=this.rxt,h=r.oj(),o=h.aMt()>1;o&&h.vTt().E3(),this.hGt.W_t(t),i&&(s?h.N3(e):h.dMt(e));const a=n.E3(this);(yield*this.U_t(a))&&(a.jxt(this),yield*this.R_t(a)),n.j3(),o&&h.vTt().j3(),i&&h.U3(e),h.lMt()}mj(t,s,e,i,r,...n){let h,o;const a=t.length>0;let l=null;const u=this.Bc,c=this.rxt,f=u.oj(),d=this.hGt,p=d.E_t(),m=f.aMt()>1;m&&f.vTt().E3(),n.length>0&&this.hGt.W_t(n),a&&(s?f.N3(t):f.dMt(t)),null!==r&&(l=this.#s(f,r,s,t));const g=c.E3(this);return g.eCt(e,i),s&&g.oCt(t),c.Ext(g),u.D3(!1),this.$_t(g)&&(g.jxt(this),p&&([o,h]=d.X_t()),this.G_t(g),p&&d.K_t(o)),u.D3(!0),c.j3(),c.Oxt(),m&&f.vTt().j3(),null!==l&&f.U3(l),a&&f.U3(t),f.lMt(),h||g.iCt()}}}{const Lx=self.Gs,kx=[];let Nx=!1;Lx.FIt=class extends Lx.zr{constructor(t,s,e){super();const i=t.Sq(),r=t.oj();this.Ost=t,this.Gxt=r,this.Bc=t.Sq(),this.nGt=s;const n=i.sPt(e[1]);this.ePt=n,this.MGt=e[2],this.Ost.jIt(this,this.MGt),this.IGt=i.yZ()?{GGt:e[3][0],_Gt:e[3][1]}:null}static KM(t,s,e){return Lx.Hr(Lx.FIt,t,s,e)}sTt(){const t=this.ePt,s=this.Bc.oj().TTt(this);this.ePt=t.bind(null,this.Bc.MJ(),s)}vQ(){return this.nGt}xTt(){return this.nGt}pet(){return this.Ost}r_t(){return this.MGt}n_t(){return this.IGt&&this.IGt._Gt}h_t(){return this.n_t()&&this.IGt.GGt}o_t(t){this.IGt.GGt=!!t}$It(){return!1}xY(){return kx}fj(){return this.nGt?this.nGt.fj():kx}CP(t){t.jxt(this),this.Gxt.GMt(this.iPt())}async iPt(){try{await this.ePt()}catch(t){console.error(`Unhandled exception running script %c${this.pet().Rc()}, event ${this.r_t()}:`,"font-size: 1.2em; font-weight: bold;",t),self.SZ&&self.SZ.rPt(this),Nx||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),Nx=!0)}}*YTt(t){t.jxt(this),(this.h_t()||this.Bc.__t())&&(yield this),this.CP(t)}KIt(){return!this.h_t()&&!this.Bc.__t()}static nPt(){return Nx}static hPt(){Nx=!0}}}{const Bx=self.Gs,$x=self.assert;Bx.oIt=class extends Bx.zr{constructor(t,s,e){super(),this.Ost=t,this.Bc=t.Sq(),this.nGt=s,this.oPt=0,this.aPt="",this.lPt=0,this.uPt=[],this.cPt=!0,this.fPt="",this.Ybt=null,this.dPt=!1,this.pPt=[],this.mPt=!1,this.gPt=!1,this.yPt=0,this.SPt=-1,this.wPt=new Map,this.vPt=Bx.IIt.KM(t,s,e),this.vPt.i_t(this)}bPt(t){this.oPt=0,this.aPt=t[0],this.lPt=t[1],this.uPt=t[2].map(t=>Bx.EIt.KM(this.Ost,this,t)),this.cPt=t[3],this.gPt=t[4],this.mPt=t[5]}xPt(t){this.oPt=1,this.fPt=t[1],this.Ybt=this.Bc.M7(t[2]),this.vPt.DGt(this.Ybt),this.aPt=this.Ybt.Rc()+"."+this.fPt,this.lPt=t[3],this.uPt=t[4].map(t=>Bx.EIt.KM(this.Ost,this,t)),this.cPt=t[5],this.gPt=t[6],this.mPt=t[7],this.Ybt.CPt(this)}static RIt(t,s,e){const i=Bx.Hr(Bx.oIt,t,s,e),r=e[1];return i.bPt(r),i}static AIt(t,s,e){const i=Bx.Hr(Bx.oIt,t,s,e),r=e[1];return i.xPt(r),i}eTt(){if(this.Ybt&&this.Ybt.mY())for(const t of this.Ybt.NY())if(t.SY(this.fPt)){this.dPt=!0;break}}sTt(){for(const t of this.uPt)t.sTt();this.vPt.sTt(!1)}lTt(){return this.oPt}CTt(){return this.uPt}aIt(){return this.uPt}uj(){return this.uPt.length}TPt(t){this.pPt.push(t)}MPt(){return this.pPt}z_t(t){const s=this.uPt;for(let e=0,i=s.length;e<i;++e)s[e].Pft(t[e].Hs(0))}W_t(t){const s=this.uPt;for(let e=0,i=s.length;e<i;++e)s[e].Pft(t[e])}IPt(){return this.uPt.map(t=>t.Hct())}vQ(){return this.nGt}xTt(){return this.nGt}uTt(){return this.aPt}GPt(){return this.fPt}gY(){return this.dPt}yj(){return this.lPt}yY(){return this.Ybt}Gu(){return this.cPt}lj(){switch(this.lPt){case 0:return null;case 2:return"";default:return 0}}cj(){return this.vPt}gj(){return this.mPt}E_t(){return this.gPt}X_t(){const t=this.yPt++;let s;this.SPt=t;const e=new Promise(t=>s=t);return this.wPt.set(t,{resolve:s,_Pt:0}),[t,e]}K_t(t){const s=this.wPt.get(t);0===s._Pt&&(s.resolve(),this.wPt.delete(t)),this.SPt=-1}PPt(){return this.wPt.get(this.SPt)._Pt++,this.SPt}RPt(t){this.SPt=t,this.wPt.get(t)._Pt--}APt(t,s){const e=new Map,i=[];for(const t of this.Ybt.fY().cY()){const s=t.yY();if(s.SY(this.fPt)){const i=e.get(s);Array.isArray(i)?i.push(t):e.set(s,[t])}else i.push(t)}if(i.length>0&&this.vPt.Y_t(t,s,this.mPt,{wY:this.Ybt,vY:i}),e.size>0)for(const[i,r]of e){const e=i.bY(this.fPt).cj(),n=[...new Set([...t,...e.xY()])];e.Y_t(n,s,this.mPt,{wY:i,vY:r})}}*EPt(t,s){const e=new Map,i=[];for(const t of this.Ybt.fY().cY()){const s=t.yY();if(s.SY(this.fPt)){const i=e.get(s);Array.isArray(i)?i.push(t):e.set(s,[t])}else i.push(t)}if(i.length>0&&(yield*this.vPt.Z_t(t,s,this.mPt,{wY:this.Ybt,vY:i})),e.size>0)for(const[i,r]of e){const e=i.bY(this.fPt).cj(),n=[...new Set([...t,...e.xY()])];yield*e.Z_t(n,s,this.mPt,{wY:i,vY:r})}}}}{const Ux=self.Gs,Vx=[];Ux.EIt=class extends Ux.zr{constructor(t,s,e){super();const i=t.oj();this.Ost=t,this.Gxt=i,this.Bc=t.Sq(),this.nGt=s,this.$Ct=i.vTt(),this.Xr=e[1],this.qc=e[2],this.OPt=e[3],this.IT=!!e[4],this.FPt=!!e[5],this.DPt=s instanceof Ux.oIt,this.x8=e[6],this.LPt=this.Bc.MTt(e[8]),this.kPt=t=>this.NPt(t),this.BPt=()=>this.$Pt(),this.UPt=!this.nGt||this.IT||this.FPt,this.Adt=this.OPt,this.VPt=-1,this.WPt()&&(this.Adt=this.Adt?1:0),!this.zPt()||this.tM()||this.sIt()||(this.VPt=i.dTt(this)),i.cTt(this)}static KM(t,s,e){return Ux.Hr(Ux.EIt,t,s,e)}sTt(){if(this.zPt()&&!this.tM()&&!this.sIt()&&!this.jPt()){const t=this.Gxt.hIt(this);t&&t.TPt(this)}}Rc(){return this.Xr}MTt(){return this.LPt}vQ(){return this.nGt}xTt(){return this.vQ()}g8(){return!this.vQ()}zPt(){return!this.g8()}jPt(){return this.DPt}tM(){return this.IT}sIt(){return this.FPt}Xe(){return 0===this.qc}hi(){return 1===this.qc}WPt(){return 2===this.qc}$It(){return!1}s9(){return this.x8}pTt(){return this.OPt}xY(){return Vx}CP(t){!this.zPt()||this.tM()||this.sIt()||this.Pft(this.pTt())}KIt(){return!0}*YTt(t){this.CP(t)}Pft(t){this.Xe()?"number"!=typeof t&&(t=parseFloat(t)):this.hi()?"string"!=typeof t&&(t=t.toString()):this.WPt()&&(t=t?1:0),this.UPt?this.Adt=t:this.$Ct.fCt()[this.VPt]=t}NPt(t){if(this.sIt())throw new Error(`assignment to constant event variable '${this.Rc()}'`);this.Pft(t)}Hct(){return this.UPt?this.Adt:this.$Ct.fCt()[this.VPt]}$Pt(){let t=this.Hct();return this.WPt()&&(t=!!t),t}FTt(){this.Adt=this.OPt}ITt(){return{configurable:!1,enumerable:!0,get:this.BPt,set:this.kPt}}}}{const Wx=self.Gs,zx=self.assert,jx=[];Wx.OIt=class extends Wx.zr{constructor(t,s,e){super();const i=t.oj();this.Ost=t,this.Gxt=i,this.Bc=t.Sq(),this.nGt=s,this.HPt=null,this.qPt=e[1],this.Bf=!0}static KM(t,s,e){return Wx.Hr(Wx.OIt,t,s,e)}sTt(){this.HPt=this.Gxt.Vet(this.qPt),this.Ost.UIt(this);let t=this.vQ();for(;t;)t instanceof Wx.IIt&&t.kTt()&&t.NGt(this),t=t.vQ();this.u_t(),this.Bc.yZ()&&this.Ost.nIt().children.push(this.HPt.nIt())}vQ(){return this.nGt}xY(){return jx}WIt(){return this.HPt}CP(t){const s=!!this.vQ(),e=this.Bc.J7();s&&this.Gxt.dMt(e),this.HPt.CP(),s&&this.Gxt.U3(e)}*YTt(t){const s=!!this.vQ(),e=this.Bc.J7();s&&this.Gxt.dMt(e),yield*this.HPt.YTt(),s&&this.Gxt.U3(e)}KIt(){return!1}zIt(){return this.Bf}u_t(){let t=this.vQ();for(;t;){if(t instanceof Wx.IIt&&t.kTt()&&!t.QMt())return void(this.Bf=!1);t=t.vQ()}this.Bf=!0}}}{let Hx=function(t,s){return t>=s?t%s:t<0?(t<=-s&&(t%=s),t<0&&(t+=s),t):t};WrapIndex=Hx;const qx=self.Gs,Jx=self.assert;qx.JPt=class extends qx.zr{constructor(t){super(),this.RC=t,this.Bc=t.Sq()}sTt(){}static YPt(t,s){const e=s[0],i=[Qx,Kx,Zx,tC,Yx,Xx];return qx.Hr(i[e],t,s)}};class Yx extends qx.JPt{constructor(t,s){super(t),this.XPt=this.Bc.r6(),this.ePt=this.Bc.sPt(s[1]),this.ePt!==qx.uq.lq.Jdt.random&&this.ePt!==qx.uq.lq.Jdt.KPt||this.RC.ZPt()}QPt(){return this.XPt.tRt(this.ePt,this.XPt)}}class Xx extends qx.JPt{constructor(t,s){super(t),this.sRt=null,this.aPt=s[1],this.RC.ZPt()}sTt(){const t=this.Bc.oj();this.sRt=t.aj(this.aPt),this.aPt=null;const s=this.RC.cj(),e=this.sRt.cj();this.eRt=[...new Set([...s.fj(),...e.fj()])],this.eRt=t.fTt(this.eRt)}QPt(){const t=this.sRt;if(t.Gu()){const s=t.cj();return qx.IIt.prototype.mj.bind(s,this.eRt,t.gj(),t.yj(),t.lj(),null)}{const s=t.lj();return()=>s}}}class Kx extends qx.JPt{constructor(t,s){super(t),this.Ybt=this.Bc.M7(s[1]),this.ePt=this.Bc.sPt(s[2]),this.iRt=!!s[3],this.rxt=this.Bc.oj().vj(),this.RC.rRt(this.Ybt)}QPt(){return this.Ybt.tY().tRt(this.ePt,this.Ybt.KJ().g0())}nRt(...t){const s=this.Ybt,e=s.fY().fxt(),i=e.length;if(0===i)return this.iRt?"":0;const r=Hx(this.RC.hRt(),i);return this.rxt.A3().tCt(s),this.ePt.apply(e[r].g0(),t)}oRt(t,...s){const e=this.Ybt,i=e.cY(),r=i.length;if(0===r||"number"!=typeof t)return this.iRt?"":0;const n=Hx(t,r);return this.rxt.A3().tCt(e),this.ePt.apply(i[n].g0(),s)}}class Zx extends qx.JPt{constructor(t,s){super(t),this.Ybt=this.Bc.M7(s[1]),this.aRt=s[3],this.iRt=!!s[2],this.RC.rRt(this.Ybt)}lRt(){const t=this.Ybt.fY().fxt(),s=t.length;return 0===s?this.iRt?"":0:t[Hx(this.RC.hRt(),s)].uRt(this.aRt)}cRt(){const t=this.Ybt,s=t.fY().fxt(),e=s.length;if(0===e)return this.iRt?"":0;const i=s[Hx(this.RC.hRt(),e)],r=i.yY().fRt(t.dRt());return i.uRt(this.aRt+r)}pRt(t){const s=this.Ybt,e=s.cY(),i=e.length;if(0===i||"number"!=typeof t)return this.iRt?"":0;const r=e[Hx(t,i)];let n=0;return s.mY()&&(n=r.yY().fRt(s.dRt())),r.uRt(this.aRt+n)}}class Qx extends qx.JPt{constructor(t,s){super(t),this.Ybt=this.Bc.M7(s[1]),this.mRt=this.Ybt.Qft(s[2]),this.gRt=this.Ybt.wut(s[2]),this.ePt=this.Bc.sPt(s[3]),this.iRt=!!s[4],this.rxt=this.Bc.oj().vj(),this.RC.rRt(this.Ybt)}yRt(...t){const s=this.Ybt,e=s.fY().fxt(),i=e.length;if(0===i)return this.iRt?"":0;const r=Hx(this.RC.hRt(),i);this.rxt.A3().tCt(s);const n=e[r];let h=0;return s.mY()&&(h=n.yY().SRt(s.dRt())),this.ePt.apply(n.Zft()[this.gRt+h].g0(),t)}wRt(t,...s){const e=this.Ybt,i=e.cY(),r=i.length;if(0===r||"number"!=typeof t)return this.iRt?"":0;const n=Hx(t,r);this.rxt.A3().tCt(e);const h=i[n];let o=0;return e.mY()&&(o=h.yY().SRt(e.dRt())),this.ePt.apply(h.Zft()[this.gRt+o].g0(),s)}}class tC extends qx.JPt{constructor(t,s){super(t),this.vRt=null,this.bRt=s[1]}sTt(){this.vRt=this.Bc.oj().GTt(this.bRt)}xRt(){return this.vRt}}}{let sC=function(t){const s=self.CRt[t];if(!s)throw new Error("invalid expression number");return s};GetExpressionFunc=sC;const eC=self.Gs,iC=self.assert;eC.TRt=class extends eC.zr{constructor(t,s,e){super(),this.RC=t,this.US=e,this.qc=s,this.Hs=null,this.MRt=!1,this.FPt=!1}static KM(t,s,e){const i=s[0],r=[rC,nC,fC,oC,lC,hC,uC,rC,oC,oC,dC,pC,fC,gC,nC,cC,aC,mC,yC,SC,wC,vC];return eC.Hr(r[i],t,i,e,s)}sTt(){}ZPt(){this.MRt=!0}rRt(t){this.MRt||t&&(t.tY()._J()||(this.MRt=!0))}IRt(){return this.MRt}Mz(){return this.US}Sq(){return this.RC.Sq()}cj(){return this.RC.cj()}sIt(){return this.FPt}GRt(){return 4===this.qc}};class rC extends eC.TRt{constructor(t,s,e,i){super(t,s,e),this._Rt=0;const r=i[1];this.PRt=r[0],this.RRt=[],this.ARt=null;for(let t=1,s=r.length;t<s;++t)this.RRt.push(eC.JPt.YPt(this,r[t]));this.RRt.length?this.Hs=this.ERt:(this.Hs=sC(this.PRt),this.FPt=!0)}ORt(t){if(t<0||t>=this.RRt.length)throw new RangeError("invalid numbered node");return this.RRt[t]}sTt(){for(const t of this.RRt)t.sTt();const t=sC(this.PRt);this.RRt.length?this.ARt=t(this):this.ARt=t}hRt(){return this._Rt}ERt(t){return this._Rt=t,this.ARt()}}class nC extends rC{constructor(t,s,e,i){super(t,s,e,i),this.Hs=this.FRt,14===s&&(this.cj().VGt(),this.RC instanceof eC.LGt&&this.cj().s_t())}FRt(t){this._Rt=t;const s=this.ARt();return"string"==typeof s?s:""}DRt(){return sC(this.PRt)()}}class hC extends rC{constructor(t,s,e,i){super(t,s,e,i),t.LRt()>=2?this.Hs=this.rX:this.Hs=this.BH,this.FPt=!1}BH(t){this._Rt=t;const s=this.ARt();return this.Sq().DH().BH(s)}rX(t){const s=this.BH(t);return s?s.rX():null}}class oC extends eC.TRt{constructor(t,s,e,i){super(t,s,e),this.kRt=i[1],this.Hs=this.NRt,this.FPt=!0}NRt(){return this.kRt}}class aC extends eC.TRt{constructor(t,s,e,i){super(t,s,e),this.BRt=i[1],this.Hs=this.$Rt,this.FPt=!0}$Rt(){return this.BRt}}class lC extends eC.TRt{constructor(t,s,e,i){super(t,s,e),this.Ybt=this.Sq().M7(i[1]),t.LRt()>=2?this.Hs=this.JJ:this.Hs=this.yY;const r=this.cj();r.DGt(this.Ybt),this.RC instanceof eC.LGt?r.s_t():r.vQ()&&r.vQ().s_t(),this.FPt=!0}yY(){return this.Ybt}JJ(){return this.Ybt?this.Ybt.JJ():null}}class uC extends eC.TRt{constructor(t,s,e,i){super(t,s,e),this.S8=this.Sq().gH().zit(i[1]),t.LRt()>=2?this.Hs=this.pH:this.Hs=this.yH,this.FPt=!0}yH(){return this.S8}pH(){return this.S8?this.S8.pH():null}}class cC extends eC.TRt{constructor(t,s,e,i){super(t,s,e),this.Ynt=this.Sq().tat().int(i[1]),t.LRt()>=2?this.Hs=this.Dlt:this.Hs=this.iut,this.FPt=!0}iut(){return this.Ynt}Dlt(){return this.Ynt?this.Ynt.Dlt():null}}class fC extends eC.TRt{constructor(t,s,e,i){super(t,s,e),this.URt=i[1],this.Hs=this.VRt,this.FPt=!0}VRt(){return this.URt}}class dC extends eC.TRt{constructor(t,s,e,i){super(t,s,e),this.WRt=i[1];const r=this.RC.yY();this.RC instanceof eC.FGt&&this.RC.tM()?(this.Hs=this.zRt,this.FPt=!0):r&&r.mY()?(this.Hs=this.jRt,this.ZPt()):(this.Hs=this.zRt,this.FPt=!0)}zRt(){return this.WRt}jRt(t){t=t||0;const s=this.RC.yY(),e=s.fY(),i=e.cY();let r=null;if(i.length)r=i[t%i.length].yY();else if(e.uxt()){const s=e.cxt();r=s[t%s.length].yY()}else{if(!(s.MY()>0))return 0;{const e=s.cY();r=e[t%e.length].yY()}}return this.WRt+r.fRt(s.dRt())}}class pC extends eC.TRt{constructor(t,s,e,i){super(t,s,e),this.bRt=i[1],this.vRt=null,t.LRt()>=2?this.Hs=this.HRt:this.Hs=this.qRt,this.FPt=!0}sTt(){this.vRt=this.Sq().oj().GTt(this.bRt)}qRt(){return this.vRt}HRt(){return null}}class mC extends eC.TRt{constructor(t,s,e,i){super(t,s,e),this.JRt=i[1],this.sRt=null,t.LRt()>=2?this.Hs=this.YRt:this.Hs=this.XRt,this.FPt=!0}sTt(){this.sRt=this.Sq().oj().aj(this.JRt),this.JRt=null}XRt(){return this.sRt}YRt(){return null}}class gC extends eC.TRt{constructor(t,s,e,i){super(t,s,e),this.KRt=[],this.ZRt=[],this.FPt=!0;for(let t=1,s=i.length;t<s;++t){const s=eC.TRt.KM(this.RC,i[t],0);this.KRt.push(s),this.ZRt.push(0),s.sIt()||(this.FPt=!1)}this.Hs=this.QRt}sTt(){for(const t of this.KRt)t.sTt()}QRt(){const t=this.KRt,s=this.ZRt;for(let e=0,i=t.length;e<i;++e)s[e]=t[e].Hs(0);return s}}class yC extends eC.TRt{constructor(t,s,e,i){super(t,s,e),this.tAt=i[1],this.Hs=this._ft,this.FPt=!0}_ft(){return this.tAt}}class SC extends eC.TRt{constructor(t,s,e,i){super(t,s,e),this.sAt=i[1],this.Hs=this.eAt,this.FPt=!0}eAt(){return this.sAt}}class wC extends rC{constructor(t,s,e,i){super(t,s,e,i),this.Hs=this.UK,this.FPt=!1}UK(){return this.ARt()}}class vC extends eC.TRt{constructor(t,s,e,i){super(t,s,e),this.cwt=this.Sq().Pwt().nwt(i[1]),this.Hs=this.iAt,this.FPt=!0}iAt(){return this.cwt.Rc()}}}{let bC=function(t,s){for(let e=0,i=t.length;e<i;++e)s[e]=t[e].Hs(0)};EvalParams=bC;const xC=self.Gs,CC=self.assert,TC=[],MC=function(){};xC.FGt=class extends xC.zr{constructor(t,s,e){if(super(),this.vPt=t,this.Bc=t.Sq(),this.US=e,this.ePt=this.Bc.sPt(s[1]),this.rAt=s[3]>0,this.nAt=2===s[3],this.hAt=!!s[4],this.oAt=!!s[5],this.IT=!!s[6],this.x8=s[7],this.aAt=this.vPt.Mxt(),this.Ybt=null,this.mRt=null,this.gRt=-1,this.XPt=null,this.CP=MC,this.YTt=MC,this.Us=[],this.lAt=[],this.uAt=!1,this.cAt=null,this.fAt=null,this.IGt=this.Bc.yZ()?{GGt:s[8][0],dAt:s[8][1]}:null,-1===s[0]?this.XPt=this.Bc.r6():(this.Ybt=this.Bc.M7(s[0]),s[2]&&(this.mRt=this.Ybt.Qft(s[2]),this.gRt=this.Ybt.wut(s[2])),this.vPt.vQ()&&this.vPt.vQ().s_t()),10===s.length){let t=s[9];for(let s of t)this.Us.push(xC.TRt.KM(this,s,this.Us.length)),this.lAt.push(0)}0===this.Us.length&&(this.Us=TC,this.lAt=TC),this.vPt.oj().hTt(this)}static KM(t,s,e){return xC.Hr(xC.FGt,t,s,e)}sTt(){for(const t of this.Us)t.sTt(),t.IRt()&&(this.uAt=!0);this.nAt?(this.CP=this.pAt,this.YTt=this.mAt):this.XPt?(this.gAt(),this.YTt=this.yAt):this.Ybt.tY()._J()?(this.SAt(),this.YTt=this.wAt):this.IT?(this.CP=this.vAt,this.YTt=this.bAt):(this.CP=this.xAt,this.YTt=this.CAt)}gAt(){const t=this.XPt,s=this.XPt;this.TAt(t,s,this.MAt)}SAt(){const t=this.Ybt.tY(),s=this.Ybt.KJ().g0();this.TAt(t,s,this.IAt)}TAt(t,s,e){const i=this.ePt,r=this.oAt,n=this.Us;if(0===n.length){const e=t.tRt(i,s);this.CP=r?function(){return xC.xor(e(),r)}:e}else if(1===n.length){const e=n[0];if(!r&&e.sIt())this.CP=t.GAt(i,s,e.Hs(0));else{const n=t.tRt(i,s);this.CP=function(){return xC.xor(n(e.Hs(0)),r)}}}else if(2===n.length){const e=n[0],h=n[1];if(!r&&e.sIt()&&h.sIt())this.CP=t._At(i,s,e.Hs(0),h.Hs(0));else{const n=t.tRt(i,s);this.CP=function(){return xC.xor(n(e.Hs(0),h.Hs(0)),r)}}}else if(3===n.length){const e=n[0],h=n[1],o=n[2];if(!r&&e.sIt()&&h.sIt()&&o.sIt())this.CP=t.PAt(i,s,e.Hs(0),h.Hs(0),o.Hs(0));else{const n=t.tRt(i,s);this.CP=function(){return xC.xor(n(e.Hs(0),h.Hs(0),o.Hs(0)),r)}}}else this.CP=e}s9(){return this.x8}DIt(){return this.ePt}yY(){return this.Ybt}I0(){return this.mRt}RAt(){return this.mRt?this.mRt.C0():this.Ybt?this.Ybt.tY():null}LRt(){const t=this.RAt();return t?t.AAt():1}cj(){return this.vPt}Sq(){return this.Bc}Mz(){return this.US}w_t(){return this.Mz()}_It(){return this.rAt}LIt(){return this.nAt}EAt(){return this.oAt}$0(){return this.hAt}tM(){return this.IT}OAt(){return this.IGt.GGt}FAt(){return!!this.XPt}p_t(){return this.FAt()||this.Ybt.tY()._J()}m_t(){for(const t of this.Us)if(t.GRt())return t.yY();return null}DAt(t){this.IGt.GGt=!!t,this.vPt.ZGt()}LAt(){return this.IGt.dAt}KIt(){return!this.OAt()&&!this.Bc.__t()&&!this.LAt()}kAt(){return this.cAt||(this.cAt=new Map),this.cAt}NAt(){return this.fAt||(this.fAt=new Map),this.fAt}MAt(){const t=this.lAt;return bC(this.Us,t),xC.xor(this.ePt.apply(this.XPt,t),this.oAt)}*yAt(){if((this.OAt()||this.Bc.__t())&&(yield this),this.LAt()){const t=this.lAt;bC(this.Us,t);let s=this.ePt.apply(this.XPt,t);return xC.xo(s)&&(s=yield*s),xC.xor(s,this.oAt)}return this.CP()}IAt(){const t=this.lAt;bC(this.Us,t);const s=this.Ybt.KJ().g0();return xC.xor(this.ePt.apply(s,t),this.oAt)}*wAt(){if((this.OAt()||this.Bc.__t())&&(yield this),this.LAt()){const t=this.lAt;bC(this.Us,t);const s=this.Ybt.KJ().g0();let e=this.ePt.apply(s,t);return xC.xo(e)&&(e=yield*e),xC.xor(e,this.oAt)}return this.CP()}pAt(){return!0}*mAt(){return(this.OAt()||this.Bc.__t())&&(yield this),!0}BAt(){return this.mRt?this.mRt.C0().AAt()>=2?this.mRt.M0():this.mRt:this.Ybt.tY().AAt()>=2?this.Ybt.JJ():this.Ybt}vAt(){const t=this.lAt;bC(this.Us,t);const s=this.ePt.apply(this.BAt(),t);return this.Ybt.q_t(),s}*bAt(){if((this.OAt()||this.Bc.__t())&&(yield this),this.LAt()){const t=this.lAt;bC(this.Us,t);let s=this.ePt.apply(this.BAt(),t);return xC.xo(s)&&(s=yield*s),this.Ybt.q_t(),s}return this.CP()}xAt(){const t=this.Us,s=this.lAt,e=this.Ybt.fY();for(let e=0,i=t.length;e<i;++e){const i=t[e];i.IRt()||(s[e]=i.Hs(0))}return e.axt()?this.$At(e):this.UAt(e)}*CAt(){return(this.OAt()||this.Bc.__t())&&(yield this),this.xAt()}VAt(t){const s=this.Us,e=this.lAt;for(let i=0,r=s.length;i<r;++i){const r=s[i];r.IRt()&&(e[i]=r.Hs(t))}}$At(t){const s=this.Ybt,e=s.mY(),i=s.dRt(),r=this.gRt,n=r>=0,h=s.cY(),o=this.uAt,a=this.lAt,l=this.ePt,u=this.oAt,c=this.aAt&&!this.rAt;t.oxt();for(let s=0,f=h.length;s<f;++s){const f=h[s];let d;if(o&&this.VAt(s),n){const t=e?f.yY().SRt(i):0;d=l.apply(f.Zft()[r+t].g0(),a)}else d=l.apply(f.g0(),a);xC.xor(d,u)?t.dxt(f):c&&t.pxt(f)}return s.WAt(!0),t.mxt(!1),s.q_t(),t.lxt()}UAt(t){const s=this.Ybt,e=s.mY(),i=s.dRt(),r=s.DK(),n=this.gRt,h=n>=0,o=this.uAt,a=this.lAt,l=this.ePt,u=this.oAt,c=this.aAt&&!this.rAt,f=t.gxt(),d=t.yxt(),p=c&&!this.vPt.d_t(this),m=p?d:f;let g=0,y=!1;for(let t=0,s=m.length;t<s;++t){const s=m[t];let S;if(o&&this.VAt(t),h){const t=e?s.yY().SRt(i):0;S=l.apply(s.Zft()[n+t].g0(),a)}else S=l.apply(s.g0(),a);xC.xor(S,u)?(y=!0,p?(f.push(s),r&&s.zAt()):(m[g]=s,r&&s.jAt(g),++g)):p?(m[g]=s,r&&s.HAt(g),++g):c&&(d.push(s),r&&s.qAt())}xC.wh(m,g),r&&s.JAt(p,g);const S=y;return p&&!y&&(y=this.YAt(f)),s.WAt(S||c),c?y:t.lxt()}YAt(t){const s=this.Ybt,e=s.mY(),i=s.dRt(),r=this.uAt,n=this.gRt,h=n>=0,o=this.lAt,a=this.ePt,l=this.oAt;for(let s=0,u=t.length;s<u;++s){const u=t[s];let c;if(r&&this.VAt(s),h){const t=e?u.yY().SRt(i):0;c=a.apply(u.Zft()[n+t].g0(),o)}else c=a.apply(u.g0(),o);if(xC.xor(c,l))return!0}return!1}XAt(t,s){return this.Us[t].Hs(s)}kIt(){const t=this.Us;if(!t.length)throw new Error("no parameters");return t[0].DRt()}wst(){if(!this.cAt||!this.cAt.size)return null;const t={};for(const[s,e]of this.cAt.entries()){let i=e;"collmemory"===s&&(i=[...e.entries()].map(t=>[t[0].kK(),t[1].kK(),t[2]])),t[s]=i}return{ex:t}}vst(t){if(this.cAt&&(this.cAt.clear(),this.cAt=null),!t)return;const s=this.Bc,e=t.ex;if(e){const t=this.kAt();t.clear();for(const[i,r]of Object.entries(e)){let e=r;"collmemory"===i&&(e=xC.Hr(xC._u,r.map(t=>[s.EH(t[0]),s.EH(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),t.set(i,e)}}}}}{let IC=function(t,s){for(let e=0,i=t.length;e<i;++e)s[e]=t[e].Hs(0)};EvalParams=IC;const GC=self.Gs,_C=self.assert,PC=[],RC=function(){},AC=function*(){},EC=1,OC=2,FC=4,DC=8,LC=16;GC.LGt=class extends GC.zr{constructor(t,s,e){super(),this.vPt=t;const i=t.Sq();this.Bc=i,this.US=e,this.x8=s.length>=4?s[3]:-1,this.KAt=s.length>=5?255&s[4]:0,this.HD=s.length>=5?s[4]>>8:0,this.ePt=null,this.Ybt=null,this.mRt=null,this.gRt=-1,this.XPt=null,this.ZAt="",this.QAt=null,this.tEt=null,this.CP=RC,this.YTt=RC,this.Us=[],this.lAt=[],this.uAt=!1;const r=-3===s[0],n=r?s[2]:s[5];if(this.IGt=i.yZ()||r?{GGt:n[0],dAt:n[1],index:n[2]}:null,-1===s[0])this.XPt=i.r6(),this.ePt=i.sPt(s[1]);else if(-2===s[0])this.ZAt=s[1];else if(r){const t=i.sPt(s[1]);this.ePt=t,this.CP=this.sEt,this.YTt=this.eEt,this.HD|=8}else this.Ybt=i.M7(s[0]),4&this.HD?(this.ZAt=s[1],this.QAt=i.M7(s[2])):(s[2]&&(this.mRt=this.Ybt.Qft(s[2]),this.gRt=this.Ybt.wut(s[2])),this.ePt=i.sPt(s[1]));if(7===s.length){const t=s[6];for(const s of t)this.Us.push(GC.TRt.KM(this,s,this.Us.length)),this.lAt.push(0)}0===this.Us.length&&(this.Us=PC,this.lAt=PC),this.iEt()&&(this.vPt.VGt(),this.vPt.s_t()),this.vPt.oj().oTt(this)}static KM(t,s,e){return GC.Hr(GC.LGt,t,s,e)}sTt(){for(const t of this.Us)t.sTt(),t.IRt()&&(this.uAt=!0);if(this.XPt)this.gAt(),this.YTt=this.yAt;else if(this.ZAt)4&this.HD?this.rEt():this.nEt(),this.ZAt="",this.QAt=null;else if(this.CP===this.sEt){const t=this.ePt,s=this.Bc.oj().TTt(this.vPt);this.ePt=t.bind(null,this.Bc.MJ(),s)}else this.mRt?this.E_t()?(this.CP=this.hEt,this.YTt=this.oEt):(this.CP=this.aEt,this.YTt=this.lEt):this.Ybt.tY()._J()?(this.SAt(),this.YTt=this.wAt):this.tM()?(this.CP=this.uEt,this.YTt=this.cEt):this.E_t()?(this.CP=this.fEt,this.YTt=this.dEt):this.pEt()?(this.CP=this.mEt,this.YTt=this.gEt):this.Us.length?this.Us.every(t=>t.IRt())?(this.CP=this.yEt,this.YTt=this.SEt):this.uAt?(this.CP=this.wEt,this.YTt=this.vEt):this.Us.every(t=>t.sIt())?(IC(this.Us,this.lAt),this.CP=this.bEt,this.YTt=this.xEt):(this.CP=this.CEt,this.YTt=this.TEt):(this.CP=this.bEt,this.YTt=this.xEt)}gAt(){const t=this.XPt,s=this.XPt;this.TAt(t,s,this.MAt)}SAt(){const t=this.Ybt.tY(),s=this.Ybt.KJ().g0();this.TAt(t,s,this.IAt)}nEt(){const t=this.vPt.oj(),s=t.aj(this.ZAt);if(s.Gu()){const e=!!(2&this.HD);this.tEt=s.cj();let i=[...new Set([...this.vPt.fj(),...this.tEt.fj()])];i=t.fTt(i);const r=!s.gj()&&this.MEt()?{J_t:!0}:null;if(this.CP=GC.IIt.prototype.Y_t.bind(this.tEt,i,this.Us,e,r),this.Bc.yZ()){const t=this;this.YTt=function*(){return(t.OAt()||t.Bc.__t())&&(yield t),yield*t.tEt.Z_t(i,t.Us,e,r)}}else this.YTt=AC}else this.CP=RC,this.YTt=AC}rEt(){const t=this.vPt.oj(),s=t.pY(this.QAt,this.ZAt);if(s.Gu()){const e=!!(2&this.HD);this.tEt=s.cj();let i=[...new Set([...this.vPt.fj(),...this.tEt.fj(),this.Ybt,s.yY()])];i=t.fTt(i);const r=!this.Ybt.mY()&&!s.yY().mY(),n=!this.Ybt.mY()&&s.yY().mY(),h=this.Ybt.mY();let o=null;if(!s.gj()&&this.MEt()&&(o=o||{},o.J_t=!0),!n&&e||(o=o||{},o.j_t=this.Ybt,o.H_t=s.yY()),r||n||h&&!s.gY()?this.CP=GC.IIt.prototype.Y_t.bind(this.tEt,i,this.Us,e,o):h&&(this.CP=GC.oIt.prototype.APt.bind(s,i,this.Us)),this.Bc.yZ()){const t=this;r||n||h&&!s.gY()?this.YTt=function*(){return(t.OAt()||t.Bc.__t())&&(yield t),yield*t.tEt.Z_t(i,t.Us,e,o)}:h&&(this.YTt=function*(){return(t.OAt()||t.Bc.__t())&&(yield t),yield*s.EPt(i,t.Us)})}else this.YTt=AC}else this.CP=RC,this.YTt=AC}TAt(t,s,e){const i=this.ePt,r=this.Us;if(0===r.length)this.CP=t.tRt(i,s);else if(1===r.length){const e=r[0];if(e.sIt())this.CP=t.GAt(i,s,e.Hs(0));else{const r=t.tRt(i,s);this.CP=function(){return r(e.Hs(0))}}}else if(2===r.length){const e=r[0],n=r[1];if(e.sIt()&&n.sIt())this.CP=t._At(i,s,e.Hs(0),n.Hs(0));else{const r=t.tRt(i,s);this.CP=function(){return r(e.Hs(0),n.Hs(0))}}}else if(3===r.length){const e=r[0],n=r[1],h=r[2];if(e.sIt()&&n.sIt()&&h.sIt())this.CP=t.PAt(i,s,e.Hs(0),n.Hs(0),h.Hs(0));else{const r=t.tRt(i,s);this.CP=function(){return r(e.Hs(0),n.Hs(0),h.Hs(0))}}}else this.CP=e}s9(){return this.x8}E_t(){return!!(8&this.HD)}A_t(){return!!(16&this.HD)}pEt(){return 1===this.KAt}tM(){return 2===this.KAt}iEt(){return!!(1&this.HD)}jGt(){return this.E_t()||this.A_t()}yY(){return this.Ybt}RAt(){return this.mRt?this.mRt.C0():this.Ybt?this.Ybt.tY():null}LRt(){const t=this.RAt();return t?t.AAt():1}cj(){return this.vPt}MEt(){let t=this.vPt;do{if(t instanceof GC.oIt&&t.gj())return!0;t=t.xTt()}while(t);return!1}Sq(){return this.Bc}Mz(){return this.US}w_t(){return this.IGt.index}OAt(){return this.IGt.GGt}DAt(t){this.IGt.GGt=!!t,this.vPt.ZGt()}LAt(){return this.IGt.dAt}KIt(){return!this.OAt()&&!this.Bc.__t()&&!this.LAt()}MAt(){const t=this.lAt;return IC(this.Us,t),this.ePt.apply(this.XPt,t)}*yAt(){if((this.OAt()||this.Bc.__t())&&(yield this),this.LAt()){const t=this.lAt;return IC(this.Us,t),yield*this.ePt.apply(this.XPt,t)}return this.CP()}IAt(){const t=this.lAt;return IC(this.Us,t),this.ePt.apply(this.Ybt.KJ().g0(),t)}*wAt(){if((this.OAt()||this.Bc.__t())&&(yield this),this.LAt()){const t=this.lAt;return IC(this.Us,t),yield*this.ePt.apply(this.Ybt.KJ().g0(),t)}return this.CP()}bEt(){const t=this.lAt,s=this.Ybt.fY().cY();for(let e=0,i=s.length;e<i;++e)this.ePt.apply(s[e].g0(),t)}*xEt(){if((this.OAt()||this.Bc.__t())&&(yield this),this.LAt()){const t=this.lAt,s=this.Ybt.fY().cY();for(let e=0,i=s.length;e<i;++e)yield*this.ePt.apply(s[e].g0(),t)}else this.bEt()}CEt(){const t=this.lAt;IC(this.Us,t);const s=this.Ybt.fY().cY();for(let e=0,i=s.length;e<i;++e)this.ePt.apply(s[e].g0(),t)}*TEt(){if((this.OAt()||this.Bc.__t())&&(yield this),this.LAt()){const t=this.lAt;IC(this.Us,t);const s=this.Ybt.fY().cY();for(let e=0,i=s.length;e<i;++e)yield*this.ePt.apply(s[e].g0(),t)}else this.CEt()}yEt(){const t=this.Us,s=this.lAt,e=this.ePt,i=this.Ybt.fY().cY();for(let r=0,n=i.length;r<n;++r){const n=i[r];for(let e=0,i=t.length;e<i;++e)s[e]=t[e].Hs(r);e.apply(n.g0(),s)}}*SEt(){if((this.OAt()||this.Bc.__t())&&(yield this),this.LAt()){const t=this.Us,s=this.lAt,e=this.ePt,i=this.Ybt.fY().cY();for(let r=0,n=i.length;r<n;++r){const n=i[r];for(let e=0,i=t.length;e<i;++e)s[e]=t[e].Hs(r);yield*e.apply(n.g0(),s)}}else this.yEt()}wEt(){const t=this.Us,s=this.lAt,e=this.ePt,i=this.Ybt.fY().cY();for(let e=0,i=t.length;e<i;++e){const i=t[e];i.IRt()||(s[e]=i.Hs(0))}for(let r=0,n=i.length;r<n;++r){const n=i[r];for(let e=0,i=t.length;e<i;++e){const i=t[e];i.IRt()&&(s[e]=i.Hs(r))}e.apply(n.g0(),s)}}*vEt(){if((this.OAt()||this.Bc.__t())&&(yield this),this.LAt()){const t=this.Us,s=this.lAt,e=this.ePt,i=this.Ybt.fY().cY();for(let e=0,i=t.length;e<i;++e){const i=t[e];i.IRt()||(s[e]=i.Hs(0))}for(let r=0,n=i.length;r<n;++r){const n=i[r];for(let e=0,i=t.length;e<i;++e){const i=t[e];i.IRt()&&(s[e]=i.Hs(r))}yield*e.apply(n.g0(),s)}}else this.wEt()}mEt(){const t=this.Us,s=this.lAt,e=this.ePt,i=this.Ybt,r=i.IEt(),n=i.fY().cY();r.GEt(e);for(let i=0,r=n.length;i<r;++i){const r=n[i];for(let e=0,r=t.length;e<r;++e)s[e]=t[e].Hs(i);e.apply(r.g0(),s)}r._Et(e)}*gEt(){if((this.OAt()||this.Bc.__t())&&(yield this),this.LAt()){const t=this.Us,s=this.lAt,e=this.ePt,i=this.Ybt,r=i.IEt(),n=i.fY().cY();r.GEt(e);for(let i=0,r=n.length;i<r;++i){const r=n[i];for(let e=0,r=t.length;e<r;++e)s[e]=t[e].Hs(i);yield*e.apply(r.g0(),s)}r._Et(e)}else this.mEt()}PEt(){return this.mRt?this.mRt.C0().AAt()>=2?this.mRt.M0():this.mRt:this.Ybt.tY().AAt()>=2?this.Ybt.JJ():this.Ybt}uEt(){const t=this.lAt;return IC(this.Us,t),this.ePt.apply(this.PEt(),t)}*cEt(){if((this.OAt()||this.Bc.__t())&&(yield this),this.LAt()){const t=this.lAt;IC(this.Us,t);let s=this.ePt.apply(this.PEt(),t);return GC.xo(s)&&(s=yield*s),s}return this.uEt()}aEt(){const t=this.Ybt,s=t.mY(),e=t.dRt(),i=this.Us,r=this.uAt,n=this.lAt,h=this.ePt,o=this.gRt,a=t.fY().cY();for(let t=0,s=i.length;t<s;++t){const s=i[t];s.IRt()||(n[t]=s.Hs(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(r)for(let s=0,e=i.length;s<e;++s){const e=i[s];e.IRt()&&(n[s]=e.Hs(t))}const u=s?l.yY().SRt(e):0;h.apply(l.Zft()[o+u].g0(),n)}}*lEt(){if((this.OAt()||this.Bc.__t())&&(yield this),this.LAt()){const t=this.Ybt,s=t.mY(),e=t.dRt(),i=this.Us,r=this.uAt,n=this.lAt,h=this.ePt,o=this.gRt,a=t.fY().cY();for(let t=0,s=i.length;t<s;++t){const s=i[t];s.IRt()||(n[t]=s.Hs(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(r)for(let s=0,e=i.length;s<e;++s){const e=i[s];e.IRt()&&(n[s]=e.Hs(t))}const u=s?l.yY().SRt(e):0;yield*h.apply(l.Zft()[o+u].g0(),n)}}else this.aEt()}fEt(){const t=this.Us,s=this.lAt,e=this.ePt,i=this.Ybt.fY().cY(),r=[];for(let n=0,h=i.length;n<h;++n){const h=i[n];for(let e=0,i=t.length;e<i;++e)s[e]=t[e].Hs(n);r.push(e.apply(h.g0(),s))}return Promise.all(r)}*dEt(){if((this.OAt()||this.Bc.__t())&&(yield this),this.LAt()){const t=this.Us,s=this.lAt,e=this.ePt,i=this.Ybt.fY().cY(),r=[];for(let n=0,h=i.length;n<h;++n){const h=i[n];for(let e=0,i=t.length;e<i;++e)s[e]=t[e].Hs(n);r.push(yield*e.apply(h.g0(),s))}return Promise.all(r)}return this.fEt()}hEt(){const t=this.Ybt,s=t.mY(),e=t.dRt(),i=this.Us,r=this.lAt,n=this.ePt,h=this.gRt,o=t.fY().cY(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,e=i.length;s<e;++s)r[s]=i[s].Hs(t);const u=s?l.yY().SRt(e):0;a.push(n.apply(l.Zft()[h+u].g0(),r))}return Promise.all(a)}*oEt(){if((this.OAt()||this.Bc.__t())&&(yield this),this.LAt()){const t=this.Ybt,s=t.mY(),e=t.dRt(),i=this.Us,r=this.lAt,n=this.ePt,h=this.gRt,o=t.fY().cY(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,e=i.length;s<e;++s)r[s]=i[s].Hs(t);const u=s?l.yY().SRt(e):0;a.push(yield*n.apply(l.Zft()[h+u].g0(),r))}return Promise.all(a)}return this.hEt()}async sEt(){try{await this.ePt()}catch(t){console.error(`Unhandled exception running script %c${this.vPt.pet().Rc()}, event ${this.vPt.r_t()}, action ${this.w_t()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.SZ&&self.SZ.rPt(this),GC.FIt.nPt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),GC.FIt.hPt())}}*eEt(){return(this.OAt()||this.Bc.__t())&&(yield this),this.sEt()}wst(){return this.cAt&&this.cAt.size?{ex:GC.wo(this.cAt)}:null}vst(t){if(this.cAt&&(this.cAt.clear(),this.cAt=null),!t)return;const s=t.ex;s&&(this.cAt=GC.vo(s))}}}{let kC=function(t){return t instanceof rT?iT.uX(t):t.J1()},NC=function(t){return kC(t).kH()},BC=function(t){return iT.uX(t)},$C=function(t){return BC(t).kH()},UC=function(t){return t instanceof nT?iT.uX(t):t},VC=function(t){return t instanceof hT?iT.uX(t):t},WC=function(t,s,e,i){s.kK()<e.kK()?t.Set(s,e,i):t.Set(e,s,i)},zC=function(t,s,e){s.kK()<e.kK()?t.Eu(s,e):t.Eu(e,s)},jC=function(t,s){t.Ou(s)},HC=function(t,s,e){return s.kK()<e.kK()?t.Hs(s,e):t.Hs(e,s)},qC=function(t,s,e,i){if(!s)return!1;const r=0!==e||0!==i,n=t.kH(),h=iT.Ez(),o=iT.gTt(),a=o.cj().Mxt(),l=o.yY(),u=o.EAt(),c=s.fY(),f=l!==s;let d;cT=s,uT=f&&!u,fT=!1;let p=0,m=0,g=!1;c.axt()?(oT.S(n.tQ()),oT.offset(e,i),h.REt(n.BH(),s,oT,lT),d=lT):a?iT.AEt()&&!c.yxt().length&&c.gxt().length?d=c.gxt():(d=c.yxt(),fT=!0):d=c.gxt(),r&&(p=n.lC(),m=n.fC(),n.UZ(e,i),n.NZ());for(const s of d)if(h.$q(t,s)){if(g=!0,u)break;f&&dT.add(s)}return r&&(n.BZ(p,m),n.NZ()),ZC.bh(lT),g},JC=function(t){const s=iT.dj().Mxt(),e=cT.fY(),i=e.gxt(),r=e.yxt();e.axt()?(e.vxt(dT),s&&(ZC.bh(r),e.bxt(dT,cT.cY()))):s?fT?e.xxt(dT):(e.bxt(dT,i),e.vxt(dT)):e.vxt(dT),cT.q_t()},YC=function(t,s){uT&&(s&&JC(t),dT.clear(),cT=null,uT=!1)},XC=function(t,s){const e=iT.EH(s);if(!e)return!1;const i=t.fY();if(!i.axt()&&!i.gxt().includes(e))return!1;if(t.mY()){if(e.yY().EEt(t))return i.Txt(e),t.q_t(),!0}else if(e.yY()===t)return i.Txt(e),t.q_t(),!0;return!1},KC=function(t,s){const e=t.fY();if(e.axt()){e.mxt(!1),e.oxt();const i=t.cY();for(let t=0,r=i.length;t<r;++t){const r=i[t];r.kK()===s?e.pxt(r):e.dxt(r)}return t.q_t(),!!e.gxt().length}{const i=e.gxt();let r=0;for(let t=0,n=i.length;t<n;++t){const n=i[t];i[r]=n,n.kK()===s?e.pxt(n):++r}return ZC.wh(i,r),t.q_t(),!!i.length}};GetInst=kC,GetWorldInfo=NC,GetInst_SDKv2=BC,GetWorldInfo_SDKv2=$C,GetObjectClass=UC,GetLayer=VC,CollMemory_Add=WC,CollMemory_Remove=zC,CollMemory_RemoveInstance=jC,CollMemory_Get=HC,DoOverlapCondition=qC,FinishCollisionConditionPicking=JC,FinishCollisionCondition=YC,PickByUID_Normal=XC,PickByUID_Inverted=KC;const ZC=self.Gs,QC=new ZC.To,tT={},sT={},eT={};let iT=null;ZC.OEt=function(t){iT=t};const rT=self.MK,nT=self.ZJ,hT=self.lX;sT.FEt=function(t,s){return ZC.compare(this.kH().lC(),t,s)},eT.FEt=function(t,s){return ZC.compare(this.x,t,s)},sT.DEt=function(t,s){return ZC.compare(this.kH().fC(),t,s)},eT.DEt=function(t,s){return ZC.compare(this.y,t,s)},sT.LEt=function(){return this.kH().rQ()},eT.LEt=function(){return this.iQ()},tT.kEt=function(){const t=NC(this),s=t.yH(),e=t.tQ();return e.sl()<0||e.el()<0||e.Qa()>s.Cy()||e.tl()>s.My()},tT.NEt=function(t,s,e){const i=UC(this).fY(),r=i.cY();if(!r.length)return!1;let n=r[0],h=n.kH(),o=n,a=ZC.hn(h.lC(),h.fC(),s,e);for(let i=1,l=r.length;i<l;++i){n=r[i],h=n.kH();const l=ZC.hn(h.lC(),h.fC(),s,e);(0===t&&l<a||1===t&&l>a)&&(a=l,o=n)}return i.Txt(o),!0},sT.uC=function(t){const s=this.kH();s.lC()!==t&&(s.uC(t),s.NZ())},eT.uC=function(t){this.x=+t},sT.dC=function(t){const s=this.kH();s.fC()!==t&&(s.dC(t),s.NZ())},eT.dC=function(t){this.y=+t},sT.BEt=function(t,s){const e=this.kH();e.$Et(t,s)||(e.BZ(t,s),e.NZ())},eT.BEt=function(t,s){this.setPosition(t,s)},tT.UEt=function(t,s){if(!(t=UC(t)))return;const e=kC(this),i=t.lY(e);if(!i)return;const[r,n]=i.VEt(s),h=e.kH();h.lC()===r&&h.fC()===n||(h.BZ(r,n),h.NZ())},tT.WEt=function(t){if(0===t)return;const s=NC(this);s.UZ(s.zEt()*t,s.jEt()*t),s.NZ()},sT.HEt=function(t,s){if(0===s)return;const e=this.kH();t=ZC.tn(t),e.UZ(Math.cos(t)*s,Math.sin(t)*s),e.NZ()},eT.HEt=function(t,s){0!==s&&(t=ZC.tn(t),this.offsetPosition(Math.cos(t)*s,Math.sin(t)*s))},sT.lC=function(){return this.kH().lC()},eT.lC=function(){return this.x},sT.fC=function(){return this.kH().fC()},eT.fC=function(){return this.y},tT.Rj=function(){return iT.Rj(kC(this))},sT.qEt=function(t,s){return ZC.compare(this.kH().Cy(),t,s)},eT.qEt=function(t,s){return ZC.compare(this.width,t,s)},sT.JEt=function(t,s){return ZC.compare(this.kH().My(),t,s)},eT.JEt=function(t,s){return ZC.compare(this.height,t,s)},sT.hy=function(t){const s=this.kH();s.Cy()!==t&&(s.hy(t),s.NZ())},eT.hy=function(t){this.width=t},sT.oy=function(t){const s=this.kH();s.My()!==t&&(s.oy(t),s.NZ())},eT.oy=function(t){this.height=t},sT.tA=function(t,s){const e=NC(this);e.Cy()===t&&e.My()===s||(e.tA(t,s),e.NZ())},eT.tA=function(t,s){this.jY(t,s)},sT.Cy=function(){return this.kH().Cy()},eT.Cy=function(){return this.width},sT.My=function(){return this.kH().My()},eT.My=function(){return this.height},tT.YEt=function(){return NC(this).tQ().Qa()},tT.XEt=function(){return NC(this).tQ().tl()},tT.KEt=function(){return NC(this).tQ().sl()},tT.ZEt=function(){return NC(this).tQ().el()},tT.QEt=function(){const t=NC(this).tQ();return(t.Qa()+t.sl())/2},tT.tOt=function(){const t=NC(this).tQ();return(t.tl()+t.el())/2},tT.sOt=function(t,s){return ZC.ln(NC(this).YY(),ZC.tn(s))<=ZC.tn(t)},tT.eOt=function(t){return ZC.cn(NC(this).YY(),ZC.tn(t))},tT.iOt=function(t,s){const e=ZC.tn(t),i=ZC.tn(s),r=NC(this).YY();return ZC.cn(i,e)?ZC.cn(r,e)&&!ZC.cn(r,i):!(!ZC.cn(r,e)&&ZC.cn(r,i))},sT.JY=function(t){const s=this.kH(),e=ZC.Qr(ZC.tn(t));isNaN(e)||s.YY()===e||(s.JY(e),s.NZ())},eT.JY=function(t){this.ZZ=t},tT.rOt=function(t){if(isNaN(t)||0===t)return;const s=NC(this);s.JY(s.YY()+ZC.tn(t)),s.NZ()},tT.nOt=function(t){if(isNaN(t)||0===t)return;const s=NC(this);s.JY(s.YY()-ZC.tn(t)),s.NZ()},tT.hOt=function(t,s){const e=NC(this),i=e.YY(),r=ZC.un(i,ZC.tn(s),ZC.tn(t));isNaN(r)||i===r||(e.JY(r),e.NZ())},tT.oOt=function(t,s,e){const i=NC(this),r=i.YY(),n=s-i.lC(),h=e-i.fC(),o=Math.atan2(h,n),a=ZC.un(r,o,ZC.tn(t));isNaN(a)||r===a||(i.JY(a),i.NZ())},tT.aOt=function(t,s){const e=NC(this),i=e.YY(),r=t-e.lC(),n=s-e.fC(),h=Math.atan2(n,r);isNaN(h)||i===h||(e.JY(h),e.NZ())},sT.YY=function(){return ZC.sn(this.kH().YY())},eT.YY=function(){return this.ZZ},tT.lOt=function(t,s){return ZC.compare(ZC.Mn(100*NC(this).FO(),6),t,s)},sT.DX=function(){return this.kH().DX()},eT.DX=function(){return this.isVisible},tT.OX=function(t){const s=NC(this);t=2===t?!s.DX():0!==t,s.DX()!==t&&(s.OX(t),iT.jH())},tT.LO=function(t){const s=ZC.Zr(t/100,0,1),e=NC(this);if(e.JQ()){if(e.wdt().uOt()===s)return}else if(e.FO()===s)return;e.LO(s),iT.jH()},tT.cOt=function(t){QC.ta(t);const s=NC(this);s.hQ().Ho(QC)||(s.oQ(QC),iT.jH())},tT.NO=function(){const t=NC(this).hQ();return ZC._n(t.No(),t.Bo(),t.$o(),t.Uo())},tT.FO=function(){return ZC.Mn(100*NC(this).FO(),6)},tT.fOt=function(t){return!!(t=VC(t))&&NC(this).BH()===t},tT.dOt=function(t){const s=UC(this).fY(),e=s.cY();if(!e.length)return!1;let i=e[0];for(let s=1,r=e.length;s<r;++s){const r=e[s],n=r.kH(),h=i.kH(),o=n.BH().Mz(),a=h.BH().Mz();0===t?(o>a||o===a&&n.$H()>h.$H())&&(i=r):(o<a||o===a&&n.$H()<h.$H())&&(i=r)}return s.Txt(i),!0},sT.pOt=function(t,s,e){const i=this.kH(),r=0===t?i.pC():i.KZ();return ZC.compare(r,s,e)},eT.pOt=function(t,s,e){const i=0===t?this.WN:this.XZ;return ZC.compare(i,s,e)},sT.mOt=function(){this.kH().lQ()},eT.mOt=function(){this.aQ()},sT.gOt=function(){this.kH().cQ()},eT.gOt=function(){this.uQ()},tT.yOt=function(t){(t=VC(t))&&NC(this).dQ(t)},tT.SOt=function(t,s){const e=0===t;if(!(s=UC(s)))return;const i=kC(this),r=s.wOt(i);r&&i.kH().mQ(r,e)},sT.mC=function(t){const s=this.kH();s.pC()!==t&&(s.mC(t),iT.jH())},eT.mC=function(t){this.WN=t},tT.vOt=function(){return NC(this).BH().Mz()},tT.bOt=function(){return NC(this).BH().Rc()},sT.xOt=function(){return this.kH().$H()},eT.xOt=function(){return this.zIndex},sT.COt=function(){return this.kH().pC()},eT.COt=function(){return this.WN},sT.TOt=function(){return this.kH().KZ()},eT.TOt=function(){return this.XZ},tT.MOt=function(t){const s=kC(this),e=s.yY().VY().sdt(t);if(!e)return;const i=e.Mz();return s.kH().LZ().E0(i)},tT.IOt=function(t,s){const e=kC(this),i=e.yY().VY().sdt(s);if(!i)return;const r=i.Mz(),n=1===t,h=e.kH().LZ();h.E0(r)!==n&&(h.O0(r,n),h.F0(),iT.jH())},tT.GOt=function(t,s,e){const i=kC(this),r=i.yY().VY().sdt(t);if(!r)return;s=Math.floor(s);const n=r.QI().sG(s);if(!n)return;"color"===n?(QC.ta(e),e=QC):"percent"===n&&(e/=100);const h=r.Mz(),o=i.kH().LZ();o.L0(h,s,e)&&o.E0(h)&&iT.jH()};const oT=ZC.Hr(ZC.Rect),aT=[],lT=[];let uT=!1,cT=null,fT=!1;const dT=new Set;function*pT(t){if(!t)return!1;const s=this.Sq(),e=s.Ez(),i=s.oj(),r=i.vj(),n=i.gTt(),h=n.yY(),o=n.kAt(),a=n.NAt(),l=r.A3(),u=s.Lj(),c=u-1,f=l.dj(),d=r.E3(f);let p=o.get("collmemory");p||(p=ZC.Hr(ZC._u),o.set("collmemory",p)),a.get("collisionCreatedDestroyCallback")||(a.set("collisionCreatedDestroyCallback",!0),s.wf().addEventListener("instancedestroy",t=>jC(p,t.G0)));const m=h.fY(),g=t.fY(),y=m.cY();let S=null;for(let s=0;s<y.length;++s){const r=y[s];g.axt()?(e.REt(r.kH().BH(),t,r.kH().tQ(),aT),S=aT,e._Ot(r,t,S)):S=g.cY();for(let s=0;s<S.length;++s){const n=S[s];if(e.$q(r,n)||e.POt(r,n)){const s=HC(p,r,n);let e=!1,o=-2;"number"==typeof s&&(e=!0,o=s);const a=!e||o<c;if(WC(p,r,n,u),a){const s=f.xY();i.N3(s);const e=h.fY(),o=t.fY();if(e.mxt(!1),o.mxt(!1),h===t){const t=e.gxt();ZC.bh(t),t.push(r),t.push(n),h.q_t()}else{const s=e.gxt(),i=o.gxt();ZC.bh(s),ZC.bh(i),s.push(r),i.push(n),h.q_t(),t.q_t()}yield*f.B_t(l,d),i.U3(s)}}else zC(p,r,n)}ZC.bh(aT)}return r.j3(),!1}tT.ROt=function(t){const s=UC(this);t=UC(t);const e=s.Sq();if(e.AOt())return pT.call(s,t);if(!t)return!1;const i=e.Ez(),r=e.oj(),n=r.vj(),h=r.gTt(),o=h.yY(),a=h.kAt(),l=h.NAt(),u=n.A3(),c=e.Lj(),f=c-1,d=u.dj(),p=n.E3(d);let m=a.get("collmemory");m||(m=ZC.Hr(ZC._u),a.set("collmemory",m)),l.get("collisionCreatedDestroyCallback")||(l.set("collisionCreatedDestroyCallback",!0),e.wf().addEventListener("instancedestroy",t=>jC(m,t.G0)));const g=o.fY(),y=t.fY(),S=g.cY();let w=null;for(let s=0;s<S.length;++s){const e=S[s];y.axt()?(i.REt(e.kH().BH(),t,e.kH().tQ(),aT),w=aT,i._Ot(e,t,w)):w=y.cY();for(let s=0;s<w.length;++s){const n=w[s];if(i.$q(e,n)||i.POt(e,n)){const s=HC(m,e,n);let i=!1,h=-2;"number"==typeof s&&(i=!0,h=s);const a=!i||h<f;if(WC(m,e,n,c),a){const s=d.xY();r.N3(s);const i=o.fY(),h=t.fY();if(i.mxt(!1),h.mxt(!1),o===t){const t=i.gxt();ZC.bh(t),t.push(e),t.push(n),o.q_t()}else{const s=i.gxt(),r=h.gxt();ZC.bh(s),ZC.bh(r),s.push(e),r.push(n),o.q_t(),t.q_t()}d.B3(u,p),r.U3(s)}}else zC(m,e,n)}ZC.bh(aT)}return n.j3(),!1},tT.EOt=function(t){return t=UC(t),qC(kC(this),t,0,0)},tT.OOt=function(t,s,e){return t=UC(t),qC(kC(this),t,s,e)},tT.FOt=function(){return!0},tT.OQ=function(){return NC(this).OQ()},tT.Cst=function(){return NC(this).Cst()},tT.DOt=function(t,s){const e=UC(this);t=UC(t);const i=e.Sq(),r=this.fY().cY();if(0===r.length)return!1;const n=t.fY();let h=n.cY();if(n.axt()){const s=[...i.LOt(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=n.axt()?null:new Set(h),a=new Set;for(let e=0,i=r.length;e<i;++e){const i=r[e];if(1===s)for(const s of i.CQ())s.kOt(t)&&(null===o||o.has(s))&&a.add(s);else{let e;if(0===s){if(e=i.vQ(),null===e)continue}else e=i.xQ();e.kOt(t)&&(null===o||o.has(e))&&a.add(e)}}return 0!==a.size&&(n.vxt(a),t.q_t(),!0)},tT.NOt=function(t,s){const e=UC(this);t=UC(t);const i=e.Sq(),r=e.fY().cY();if(0===r.length)return!1;const n=t.fY();let h=n.cY();if(n.axt()){const s=[...i.LOt(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=n.axt()?null:new Set(h),a=new Set;for(let e=0,i=r.length;e<i;++e){const i=r[e];2!==s||i.Cst()||!i.kOt(t)||null!==o&&!o.has(i)||a.add(i);for(const e of 0===s?i.children():i._Q())2===s&&e.Cst()||e.kOt(t)&&(null===o||o.has(e))&&a.add(e)}return 0!==a.size&&(n.vxt(a),t.q_t(),!0)},tT.BOt=function(t,s,e){const i=UC(this);t=UC(t);const r=i.Sq(),n=i.fY().cY();if(0===n.length)return!1;const h=t.fY();let o=h.cY();if(h.axt()){const s=[...r.LOt(t)];s.length>0&&(o=o.concat(s))}if(0===o.length)return!1;const a=h.axt()?null:new Set(o),l=[];for(let i=0,r=n.length;i<r;++i){const r=n[i];if(0===s){const s=r.GQ(e);null!==s&&s.kOt(t)&&(null===a||a.has(s))&&l.push(s)}else if(1===s)for(const s of r.children())if(s.kOt(t)){if(0===e){(null===a||a.has(s))&&l.push(s);break}--e}}return 0!==l.length&&(h.wxt(l),t.q_t(),!0)},tT.$Ot=function(t,s,e){const i=kC(this);switch(t){case 0:default:return ZC.compare(i.MQ(),s,e);case 1:return ZC.compare(i.UOt(),s,e)}},tT.RQ=function(t,s,e,i,r,n,h,o,a,l){t=UC(t);const u=kC(this),c=iT.STt().yY();for(const f of t.VOt(u,c)){if(!f.tY().$J())return;u.RQ(f,{DQ:s,kQ:e,BQ:i,UQ:r,WQ:n,qQ:h,jQ:o,YQ:a,KQ:l})}},tT.AQ=function(t){t=UC(t);const s=kC(this),e=iT.STt().yY();for(const i of t.VOt(s,e))s.AQ(i)},tT.WOt=function(){const t=kC(this);t.OQ()&&t.vQ().AQ(t)},tT.zOt=function(){const t=kC(this).vQ();return t?t.kK():-1},tT.jOt=function(){return kC(this).MQ()},tT.HOt=function(){return kC(this).UOt()},tT.qOt=function(t,s){t=Math.floor(t),s=Math.floor(s);const e=NC(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(e.e0(),e.NZ()):e.t0(t,s)},tT.r0=function(t,s,e,i,r,n,h,o){const a=NC(this);a.r0(t,s,{mode:0===e?"absolute":"relative",x:i,y:r,WN:n,a0:h,l0:o})&&a.NZ()},tT.JOt=function(){const t=NC(this);return t.h0()?t.o0().UC():0},tT.YOt=function(){const t=NC(this);return t.h0()?t.o0().VC():0},tT.XOt=function(t){const s=NC(this);t=2===t?!s.DX():0!==t,s.DX()!==t&&s.OX(t)},tT.v0=function(t,s){this instanceof self.MK?this.X2(t,s):this.v0(t,s)},tT.KOt=function(t,s){this instanceof self.MK?this.Z2(t,""+s):this.KOt(t,""+s)},tT.ZOt=function(t){this instanceof self.MK?this.Q2(t):this.ZOt(t)},tT.QOt=function(){this instanceof self.MK?this.q2():this.y0()},tT.tFt=function(){this instanceof self.MK?this.J2():this.S0()},tT.sFt=function(){return this instanceof self.MK?this.Y2():this.sFt()},tT.eFt=function(t){this instanceof self.MK?this.iFt(0!==t):this.rFt(0!==t)},tT.nFt=function(){return this instanceof self.MK?this.cPt():this.hFt()},sT.oFt=function(t,s,e){return ZC.compare(this.J1().$pt(t),s,e)},eT.oFt=function(t,s,e){return ZC.compare(BC(this).$pt(t),s,e)},sT.aFt=function(t){return!!this.J1().$pt(t)},eT.aFt=function(t){return!!BC(this).$pt(t)},tT.lFt=function(t,s){const e=UC(this),i=e.fY(),r=i.cY();if(!r.length)return!1;const n=e.mY();let h=null,o=0;for(let i=0,a=r.length;i<a;++i){const a=r[i],l=n?a.yY().fRt(e.dRt()):0,u=a.$pt(l+s);(null===h||0===t&&u<o||1===t&&u>o)&&(o=u,h=a)}return i.Txt(h),!0},tT.uFt=function(t){const s=UC(this);return s.Sq().gTt().EAt()?KC(s,t):XC(s,t)},tT.T1=function(t){const s=kC(this);return t.includes(" ")?new Set(ZC.Lh(t.toLowerCase())).isSubsetOf(s.JK()):!t||s.HK(t)},tT.cFt=function(){return kC(this).zut()},tT.fFt=function(){return kC(this).ZK().size},tT.dFt=function(t){return kC(this).pFt(t)},tT.mFt=function(t,s){const e=ZC.Lh(s),i=kC(this);if(2===t)return void i.XK(new Set(e));if(0===e.length)return;const r=new Set(i.ZK());if(0===t)for(const t of e)r.add(t);else if(1===t)for(const t of e)if(!r.delete(t)){const s=t.toLowerCase();for(const t of r)if(t.toLowerCase()===s){r.delete(t);break}}i.XK(r)},tT.gFt=function(){iT.qH(kC(this))},tT.yFt=function(){return!0},tT.SFt=function(){return!0},sT.wFt=function(t,s){this.J1().Upt(t,s)},eT.wFt=function(t,s){BC(this).Upt(t,s)},sT.vFt=function(t,s){const e=this.J1(),i=e.$pt(t);"number"==typeof i&&"number"!=typeof s?s=parseFloat(s):"string"==typeof i&&"string"!=typeof s&&(s=s.toString()),e.Upt(t,i+s)},eT.vFt=function(t,s){const e=BC(this),i=e.$pt(t);"number"==typeof i&&"number"!=typeof s?s=parseFloat(s):"string"==typeof i&&"string"!=typeof s&&(s=s.toString()),e.Upt(t,i+s)},sT.bFt=function(t,s){const e=this.J1(),i=e.$pt(t);"number"==typeof i&&("number"!=typeof s&&(s=parseFloat(s)),e.Upt(t,i-s))},eT.bFt=function(t,s){const e=BC(this),i=e.$pt(t);"number"==typeof i&&("number"!=typeof s&&(s=parseFloat(s)),e.Upt(t,i-s))},sT.xFt=function(t,s){this.J1().Upt(t,s?1:0)},eT.xFt=function(t,s){BC(this).Upt(t,s?1:0)},sT.CFt=function(t){const s=this.J1();s.Upt(t,0===s.$pt(t)?1:0)},eT.CFt=function(t){const s=BC(this);s.Upt(t,0===s.$pt(t)?1:0)},tT.TFt=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const e=kC(this),i="state";iT.MFt(),e.Mrt(i),e.CC(s,i),iT.IFt(i,{GFt:!0})},tT._Ft=function(){return JSON.stringify(kC(this).xC("state"))},tT.PFt=function(){return kC(this).yY().Rc()},tT.RFt=function(){const t=iT.mTt().sCt();let s=t.MY();for(const e of iT.LOt(t))++s;return s},tT.AFt=function(){return iT.mTt().sCt().fY().cY().length},sT.BK=function(){return this.J1().BK()},eT.BK=function(){return BC(this).BK()},sT.kK=function(){return this.J1().kK()},eT.kK=function(){return BC(this).kK()},tT.NMt=function(t){const s=kC(this);return t.toLowerCase()===iT.oj().VMt(s)},tT.QK=function(t){const s=kC(this);iT.oj().QK(s,t)},tT.EFt=function(t){const s=UC(this);return iT.oj().mMt().OFt(s.fY().cY(),t),!0},tT.FFt=function(){return kC(this).UK()},ZC.DFt=function(t,s,e){const i=t[1],r=t[3],n=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.aq,S=s.qdt,w=s.Jdt,v=Object.assign({},tT,e>=2?eT:sT);r&&(y.FEt=v.FEt,y.DEt=v.DEt,y.LEt=v.LEt,y.kEt=v.kEt,y.NEt=v.NEt,S.uC=v.uC,S.dC=v.dC,S.BEt=v.BEt,S.UEt=v.UEt,S.WEt=v.WEt,S.HEt=v.HEt,w.LFt=v.lC,w.kFt=v.fC,w.Pj=v.Rj),n&&(y.qEt=v.qEt,y.JEt=v.JEt,S.hy=v.hy,S.oy=v.oy,S.tA=v.tA,w.NFt=v.Cy,w.BFt=v.My,w.$Ft=v.YEt,w.UFt=v.XEt,w.VFt=v.KEt,w.WFt=v.ZEt,w.zFt=v.QEt,w.jFt=v.tOt),h&&(y.HFt=v.sOt,y.qFt=v.eOt,y.iOt=v.iOt,S.JY=v.JY,S.rOt=v.rOt,S.nOt=v.nOt,S.hOt=v.hOt,S.oOt=v.oOt,S.aOt=v.aOt,w.JFt=v.YY),o&&(y.DX=v.DX,y.lOt=v.lOt,S.OX=v.OX,S.LO=v.LO,S.cOt=v.cOt,w.Opacity=v.FO,w.ColorValue=v.NO),a&&(y.fOt=v.fOt,y.dOt=v.dOt,y.pOt=v.pOt,S.mOt=v.mOt,S.gOt=v.gOt,S.yOt=v.yOt,S.SOt=v.SOt,S.mC=v.mC,w.vOt=v.vOt,w.bOt=v.bOt,w.xOt=v.xOt,w.COt=v.COt,w.TOt=v.TOt),l&&(y.MOt=v.MOt,S.IOt=v.IOt,S.GOt=v.GOt),d&&(y.FOt=v.FOt,y.OQ=v.OQ,y.Cst=v.Cst,y.DOt=v.DOt,y.NOt=v.NOt,y.BOt=v.BOt,y.$Ot=v.$Ot,S.RQ=v.RQ,S.AQ=v.AQ,S.WOt=v.WOt,w.zOt=v.zOt,w.jOt=v.jOt,w.HOt=v.HOt),p&&(S.qOt=v.qOt,S.r0=v.r0,w.JOt=v.JOt,w.YOt=v.YOt),u&&(y.DX=v.DX,S.OX=v.XOt,S.YFt=v.v0,S.XFt=v.KOt,S.KFt=v.ZOt),c&&(y.ZFt=v.sFt,S.QFt=v.QOt,S.tDt=v.tFt),f&&(y.Gu=v.nFt,S.sDt=v.eFt),m&&(y.ROt=v.ROt,y.EOt=v.EOt,y.OOt=v.OOt,s.eDt=YC),i||(y.oFt=v.oFt,y.aFt=v.aFt,y.lFt=v.lFt,y.uFt=v.uFt,y.T1=v.T1,S.wFt=v.wFt,S.vFt=v.vFt,S.bFt=v.bFt,S.xFt=v.xFt,S.CFt=v.CFt,S.mFt=v.mFt,y.yFt=v.yFt,y.SFt=v.SFt,S.gFt=v.gFt,S.TFt||(S.TFt=v.TFt),w._Ft||(w._Ft=v._Ft),w.RFt=v.RFt,w.AFt=v.AFt,w.iDt=v.BK,w.rDt=v.kK,w.PFt=v.PFt,w.cFt=v.cFt,w.fFt=v.fFt,w.dFt=v.dFt,y.NMt=v.NMt,S.QK=v.QK,S.EFt=v.EFt),g&&(w.FFt=v.FFt)}}{const mT=self.Gs;mT.gMt=class extends mT.zr{constructor(t){super(),this.Gxt=t,this.qc="",this.sW=-1,this.nDt="",this.hDt=!1,this.oDt=null,this.Lxt=0,this.oGt=[],this.Vxt=null,this.aDt=new Map,this.lDt=null,this.uDt=null,this.cDt=-1,this.uPt=null,this.fDt=null,this.dDt=!1}qr(){this.qc="",this.sW=-1,this.nDt="",this.oDt=null,this.uDt=null,this.uPt=null,this.fDt=null,this.cDt=-1,mT.bh(this.oGt),this.Vxt&&(this.Vxt.clear(),this.Vxt=null);for(const t of this.aDt.values())t.qr();this.aDt.clear(),this.lDt=null}aC(){const t=this.Gxt,s=t.Sq().J7(),e=t.mTt();this.oDt=e.dj(),this.Lxt=e.Jxt()+1;const i=t.hIt(this.oDt);i&&(this.uDt=i,this.uPt=i.IPt(),this.fDt=i.MPt().map(t=>t.Hct()),i.E_t()&&(this.cDt=i.PPt()));for(const t of s){const s=t.fY();s.axt()&&!this.oDt.e_t(t)||(this.oGt.push(t),this.aDt.set(t,mT.Hr(mT.pDt,s)))}const r=t.pj();this.Vxt=r.size>0?r:null}mDt(t){this.qc="timer",this.aC(),this.sW=this.Gxt.Sq().Fj()+t}gDt(t){this.qc="walltimer",this.aC(),this.sW=this.Gxt.Sq().Nj()+t}yDt(t){this.qc="signal",this.aC(),this.nDt=t.toLowerCase()}OFt(t,s){this.qc="instance-signals",this.aC(),this.nDt=s.toLowerCase(),this.lDt=new Set(t)}SDt(t){this.qc="promise",this.aC(),t.then(()=>this.FMt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.FMt()})}wDt(){return"timer"===this.qc}vDt(){return"walltimer"===this.qc}EMt(){return"signal"===this.qc}$Mt(){return"instance-signals"===this.qc}eIt(){return"promise"===this.qc}OMt(){return this.nDt}bDt(){return this.hDt}FMt(){this.hDt=!0}UMt(t){this.lDt.delete(t),0===this.lDt.size&&this.FMt()}wMt(){return this.wDt()?this.sW<=this.Gxt.Sq().Fj():this.vDt()?this.sW<=this.Gxt.Sq().Nj():this.bDt()}xDt(t){t.Wxt(this.oDt,this.Lxt);for(const[t,s]of this.aDt.entries()){const e=t.fY();s.Wxt(e)}this.Vxt&&t.oCt([...this.Vxt]);const s=this.uDt;s&&(s.W_t(this.uPt),s.MPt().map((t,s)=>t.Pft(this.fDt[s])),s.E_t()&&s.RPt(this.cDt))}vMt(t){this.xDt(t),this.oDt.O_t(t),this.uDt&&this.uDt.E_t()&&this.uDt.K_t(this.cDt),this.Gxt.cMt(this.oGt),this.dDt=!0}async TMt(t){this.xDt(t);for(const s of this.oDt.F_t(t))await this.Gxt.Sq().JTt(s);this.uDt&&this.uDt.E_t()&&this.uDt.K_t(this.cDt),this.Gxt.cMt(this.oGt),this.dDt=!0}bMt(){return this.dDt}ixt(t){for(const s of this.aDt.values())s.ixt(t);if("instance-signals"===this.qc){for(const s of t)this.lDt.delete(s);0===this.lDt.size&&this.FMt()}}wst(){const t={},s={wt:this.qc,t:this.sW,st:this.nDt,s:this.hDt,ev:this.oDt.s9(),sm:this.oGt.map(t=>t.s9()),dsm:this.Vxt?[...this.Vxt].map(t=>t.s9()):null,sols:t};this.oDt.v_t(this.Lxt)&&(s.act=this.oDt.wTt(this.Lxt).s9());for(const[s,e]of this.aDt)t[s.s9().toString()]=e.wst();return"instance-signals"===this.qc&&(s.pi=[...this.lDt].map(t=>t.kK())),s}static iIt(t,s){const e=t.Sq(),i=t._Tt(s.ev);if(!i)return null;let r=0;if(s.hasOwnProperty("act")){const e=t.RTt(s.act);if(!e)return null;r=e.Mz()}const n=mT.Hr(mT.gMt,t);n.sW=s.t,s.hasOwnProperty("wt")?n.qc=s.wt:n.qc=-1===n.sW?"signal":"timer",n.nDt=s.st,n.hDt=s.s,n.oDt=i,n.Lxt=r;for(const t of s.sm){const s=e.R3(t);s&&n.oGt.push(s)}if(Array.isArray(s.dsm))for(const t of s.dsm){const s=e.R3(t);s&&(n.Vxt||(n.Vxt=new Set),n.Vxt.add(s))}for(const[i,r]of Object.entries(s.sols)){const s=parseInt(i,10),h=e.R3(s);if(!h)continue;const o=mT.Hr(mT.pDt,null);o.vst(t,r),n.aDt.set(h,o)}if("instance-signals"===n.qc){n.lDt=new Set;for(const t of s.pi){const s=e.EH(t);s&&n.lDt.add(s)}}return n}}}{const gT=self.Gs;gT.pDt=class extends gT.zr{constructor(t){super(),this.Ybt=null,this.CDt=!0,this.V6=[],t&&(this.Ybt=t.yY(),this.CDt=t.axt(),gT.Mh(this.V6,t.gxt()))}qr(){this.Ybt=null,gT.bh(this.V6)}Wxt(t){t.mxt(this.CDt),gT.Mh(t.gxt(),this.V6)}ixt(t){gT.Rh(this.V6,t)}wst(){return{sa:this.CDt,insts:this.V6.map(t=>t.kK())}}vst(t,s){const e=t.Sq();this.CDt=!!s.sa,gT.bh(this.V6);for(const t of s.insts){const s=e.EH(t);s&&this.V6.push(s)}}}}{let yT=function(t,s){let e=t.get(s);return e||(e=new Map,t.set(s,e)),e};GetNextParamMap=yT;const ST=self.Gs;ST.TDt=class extends ST.zr{constructor(t){super(),this.Bc=t.runtime,this.Uc=t.id,this.Xr=t.name??"",this.MDt=!!t.GJ,this.IDt=!!t.GDt,this._Dt=!!t.OJ,this.PDt=!!t.RDt,this.ADt=!!t.DJ,this.EDt=!!t.ODt,this.FDt=!!t.UJ,this.DDt=!!t.AJ,this.LDt=!!t.kJ,this.kDt=t.NDt,this.BDt=t.$Dt,this.UDt=null,this.VDt=new Map,this.WDt=new Map,this.zDt=new Map,this.jDt=new Map,this.HDt=t.qDt,this.JDt=null}qr(){this.Bc=null}Sq(){return this.Bc}IJ(){return this.Uc}Rc(){return this.Xr}YDt(){}BMt(){return this.AAt()>=2?this.JDt.constructor:this.constructor}AAt(){return this.kDt}XDt(t=!1){let s=this.HDt;return t&&"function"!=typeof s&&this.AAt()>=2&&(s=globalThis.i2),s}KDt(){return this.BDt}_J(){return this.MDt}RJ(){return this.IDt}EJ(){return this.DDt}NJ(){return this.LDt}FJ(){return this._Dt}Dx(){return this.PDt}LJ(){return this.ADt}$J(){return this.EDt}VJ(){return this.FDt}tRt(t,s){if(!s)throw new Error("missing 'this' binding");let e=this.VDt.get(t);return e||(e=t.bind(s),this.VDt.set(t,e),e)}GAt(t,s,e){if(!s)throw new Error("missing 'this' binding");const i=yT(this.WDt,t);let r=i.get(e);return r||(r=t.bind(s,e),i.set(e,r),r)}_At(t,s,e,i){if(!s)throw new Error("missing 'this' binding");const r=yT(this.zDt,t),n=yT(r,e);let h=n.get(i);return h||(h=t.bind(s,e,i),n.set(i,h),h)}PAt(t,s,e,i,r){if(!s)throw new Error("missing 'this' binding");const n=yT(this.jDt,t),h=yT(n,e),o=yT(h,i);let a=o.get(r);return a||(a=t.bind(s,e,i,r),o.set(r,a),a)}ZDt(t){if(!this._J())throw new Error("must be single-global plugin");this.UDt=t}YJ(){if(!this._J())throw new Error("must be single-global plugin");return this.UDt}KJ(){if(!this._J())throw new Error("must be single-global plugin");return this.UDt.KJ()}QDt(){const t=this.AAt();ST.TJ.tLt(this,t);const s=this.XDt(!0);if(s){if(this.JDt=new s,!(this.JDt instanceof self.xJ))throw new TypeError("plugin class must derive from IPlugin")}else this.JDt=new self.xJ;ST.TJ.sLt(t)}HJ(){return this.JDt}}}{const wT=self.Gs;wT.eLt=class extends wT.TDt{constructor(t,s){super(t),this.iLt=s,this.rLt=0,this.nLt=new Map,this.hLt("elem-focused",t=>t.oLt()),this.hLt("elem-blurred",t=>{t&&t.aLt()})}qr(){super.qr()}lLt(t){const s=this.rLt++;return this.nLt.set(s,t),s}uLt(t){this.nLt.delete(t)}hLt(t,s){this.Bc.fZ(this.iLt,t,t=>{const e=this.nLt.get(t.elementId);s(e,t)})}}}{const vT=self.Gs;vT.cLt=class extends vT.zr{constructor(t){super(),this.Ybt=t,this.Bc=t.Sq(),this.fLt=t.tY()}qr(){this.Ybt=null,this.Bc=null,this.fLt=null}yY(){return this.Ybt}Sq(){return this.Bc}tY(){return this.fLt}s1(){return this.Ybt.s1()}YDt(){}WAt(t){}GEt(t){}_Et(t){}Eet(t){}Net(){}Det(){}nit(t){}dLt(){}XDt(){return null}pLt(t,s,e){const i=vT.Hr(vT.Event,t,s);i.mLt=this,e&&Object.assign(i,e),this.yY().e6(i)}}}{const bT=self.Gs;bT.gLt=class extends bT.zr{constructor(t,s){super(),this.fe=t,this.iLt=s,this.yLt=null,this.Bc=t.Sq(),this.Ybt=this.fe.yY(),this.SLt=this.Ybt.IEt(),this.prt=null,this.grt=null,this.bZ=!1,this.CZ=!1,this.Kf=null,this.TR=!1}qr(){this.TR=!0,this.wLt(),this.vLt(),this.prt=null,this.grt=null,this.Kf&&(this.Kf.qr(),this.Kf=null),this.fe=null,this.Bc=null,this.Ybt=null,this.SLt=null}Jr(){return this.TR}J1(){return this.fe}Sq(){return this.Bc}yY(){return this.Ybt}tY(){return this.SLt.tY()}IEt(){return this.SLt}bLt(){return this.fe.OH()}lZ(t){return this.Bc.lZ(t,this.fe,null)}xLt(t){return this.Bc.xLt(t,this.fe,null)}hq(t){return this.Bc.hq(t,this.fe,null)}CLt(t,s){return this.Bc.CLt(t,this.fe,s)}TLt(t,s){return this.Bc.TLt(t,this.fe,s)}MLt(t){return this.Bc.MLt(t)}ILt(t,s){this.Bc.fZ(this.iLt,t,s)}GLt(t){for(const[s,e]of t)this.ILt(s,e)}_Lt(t,s){this.Bc.Vc(this.iLt,t,s)}PLt(t,s){return this.Bc.QH(this.iLt,t,s)}RLt(t,s){if(!this.Bc.Jz())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.iLt,handler:t,data:s,responseId:null});this._Lt(t,s)}ALt(t){if(!t)throw new Error("cannot set empty component id");this.yLt=t}ELt(){if(!this.yLt)throw new Error("wrapper extension component id not set");return this.Bc._Z(this.yLt)}RZ(t,s){if(!this.yLt)throw new Error("wrapper extension component id not set");this.Bc.RZ(this.yLt,t,s)}OLt(t){for(const[s,e]of t)this.RZ(s,e)}v3(t,s){if(!this.yLt)throw new Error("wrapper extension component id not set");this.Bc.v3(this.yLt,t,s)}b3(t,s){if(!this.yLt)throw new Error("wrapper extension component id not set");return this.Bc.b3(this.yLt,t,s)}Int(){}FLt(){}DLt(){if(!this.bZ){if(!this.prt)if(this.Bc.yZ()){const t=globalThis.SZ,s=this.tY();this.prt=()=>{const e=performance.now();this.Int(),t.vZ(s,performance.now()-e)}}else this.prt=()=>this.Int();this.Bc.wf().addEventListener("tick",this.prt),this.bZ=!0}}wLt(){this.bZ&&(this.Bc.wf().removeEventListener("tick",this.prt),this.bZ=!1)}LLt(){return this.bZ}kLt(){if(!this.CZ){if(!this.grt)if(this.Bc.yZ()){const t=globalThis.SZ,s=this.tY();this.grt=()=>{const e=performance.now();this.FLt(),t.vZ(s,performance.now()-e)}}else this.grt=()=>this.FLt();this.Bc.wf().addEventListener("tick2",this.grt),this.CZ=!0}}vLt(){this.CZ&&(this.Bc.wf().removeEventListener("tick2",this.grt),this.CZ=!1)}NLt(){return this.CZ}BLt(){return[]}xC(){return null}CC(t){}Rpt(t){}Lpt(t,s){}Rmt(t,s,e){if(0===s)return;const i=this.Rpt(t);if("number"!=typeof i)throw new Error("expected number");this.Lpt(t,i+s,e)}$Lt(t,s,e,i){}ULt(t,...s){t.call(this,...s)}VLt(t,...s){return t.call(this,...s)}XDt(){return null}pLt(t,s,e){if(!this.fe.WLt())return;const i=this.bLt(),r=bT.Hr(bT.Event,t,s);r.G0=i,e&&Object.assign(r,e),i.dispatchEvent(r)}Dx(){return!1}}}{const xT=self.Gs;xT.zLt=class extends xT.gLt{constructor(t,s){super(t,s),this.Ult=t.kH(),this.jLt=null,this.HLt=null}qr(){if(this.jLt){const t=this.Bc.wf();t.removeEventListener("renderercontextlost",this.jLt),t.removeEventListener("renderercontextrestored",this.HLt),this.jLt=null,this.HLt=null}this.Ult=null,super.qr()}qLt(){this.JLt()}YLt(){}XLt(){}JLt(){if(this.jLt)return;this.jLt=()=>this.A6(),this.HLt=()=>this.KLt();const t=this.Bc.wf();t.addEventListener("renderercontextlost",this.jLt),t.addEventListener("renderercontextrestored",this.HLt)}A6(){this.YLt()}KLt(){this.XLt()}kH(){return this.Ult}Eut(){return!1}Aut(){if(!this.Eut())throw new Error("original size not known");const t=this.ZLt();if(t)return t.Cy()}Fut(){if(!this.Eut())throw new Error("original size not known");const t=this.ZLt();if(t)return t.My()}ZLt(){return null}QLt(){const t=this.ZLt();if(t){const s=t.AM();if(s)return[s.Cy(),s.My()]}return[100,100]}tkt(){const t=this.ZLt();return t?t.EA():null}skt(){const t=this.ZLt();return t?t.ekt():null}ikt(){const t=this.ZLt();return!!t&&t.rkt()}VEt(t){const s=this.fe.kH();return[s.lC(),s.fC(),s.KZ()]}dLt(t,s,e){}nkt(t,s){}Xtt(){return!0}}}{const CT=self.Gs,TT=CT.Hr(CT.Rect);CT.hkt=class extends CT.zLt{constructor(t,s){super(t,s),this.okt=this.tY().lLt(this),this.akt=!0,this.lkt=!1,this.ukt=!1,this.ckt=-.2,this.fkt=CT.Hr(CT.Rect,0,0,-1,-1);const e=this.Bc._H();this.dkt=e.R2(),this.pkt=e.A2(),this.mkt=-1,this.gkt=-1,this.ykt=!1,this.DLt()}qr(){this.tY().uLt(this.okt),this.Skt("destroy"),this.okt=-1,super.qr()}m0(){if(this.Bc.Jz())throw new Error("not valid in worker mode");return this.wkt("get-element")}Skt(t,s){s||(s={}),s.elementId=this.okt,this._Lt(t,s)}wkt(t,s){return s||(s={}),s.elementId=this.okt,this.RLt(t,s)}vkt(t,s){return s||(s={}),s.elementId=this.okt,this.PLt(t,s)}bkt(t){t||(t={});const s=this.kH();t.elementId=this.okt,t.isVisible=s.DX(),t.htmlIndex=s.BH().N2(),t.htmlZIndex=s.B2(),Object.assign(t,this.xkt()),this.akt=!!t.isVisible,this.RLt("create",t),this.Ckt(!0)}XOt(t){t=!!t,this.akt!==t&&(this.akt=t,this.Skt("set-visible",{isVisible:t}))}Int(){this.Ckt(!1)}Tkt(){const t=this.Bc._H().j2();return"Android"===CT.Zs.Qs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}Ckt(t){if(this.J1().NH())return;const s=this.kH(),e=s.BH(),i=s.tQ();let[r,n]=e.SK(i.Qa(),i.tl()),[h,o]=e.SK(i.sl(),i.el());const a=this.Bc._H(),l=a.fJ(),u=a.pJ();if(!s.DX()||!e.DX())return void this.XOt(!1);if(!this.Tkt()&&(h<=0||o<=0||r>=l||n>=u))return void this.XOt(!1);TT.set(r,n,h,o);const c=a.R2(),f=a.A2(),d=e.N2(),p=s.B2();if(!t&&TT.equals(this.fkt)&&this.dkt===c&&this.pkt===f&&this.mkt===d&&this.gkt===p)return void this.XOt(!0);this.fkt.S(TT),this.dkt=c,this.pkt=f,this.mkt=d,this.gkt=p,this.XOt(!0);let m=null;this.ukt&&(m=e.H2()+this.ckt),this.wkt("update-position",{left:Math.round(this.fkt.Qa()),top:Math.round(this.fkt.tl()),width:Math.round(this.fkt.width()),height:Math.round(this.fkt.height()),htmlIndex:d,htmlZIndex:p,fontSize:m})}y0(){this.wkt("focus",{focus:!0})}S0(){this.wkt("focus",{focus:!1})}oLt(){this.lkt=!0}aLt(){this.lkt=!1}sFt(){return this.lkt}v0(t,s){this.Skt("set-css-style",{prop:CT.bo(t),val:s})}KOt(t,s){this.Skt("set-attribute",{name:t,val:s})}ZOt(t){this.Skt("remove-attribute",{name:t})}Mkt(){this.ykt||(this.ykt=!0,Promise.resolve().then(()=>{this.ykt=!1,this.Skt("update-state",this.xkt())}))}xkt(){}Ikt(){return this.okt}}}{const MT=self.Gs,IT=self.R0;MT.Gkt=class extends MT.zr{constructor(t){super(),this.Bc=t.runtime,this.Uc=t.id,this.Xr=t.name??"",this._kt=MT.Hr(MT.Lu),this.Pkt=MT.Hr(MT.Lu),this.kDt=t.NDt,this.HDt=t.qDt,this.Rkt=null}qr(){this.Pkt.qr(),this._kt.qr(),this.Bc=null}Sq(){return this.Bc}IJ(){return this.Uc}Rc(){return this.Xr}YDt(){}AAt(){return this.kDt}XDt(t=!1){let s=this.HDt;return t&&"function"!=typeof s&&this.AAt()>=2&&(s=globalThis.e3),s}Akt(t){this._kt.$u(t)}Qrt(){return this._kt.Uu()}D7(t){this.Pkt.$u(t)}N7(t){this.Pkt.Eu(t)}cY(){return this.Pkt.Uu()}QDt(){const t=this.AAt();MT.TJ.tLt(this,t);const s=this.XDt(!0);if(s){if(this.Rkt=new s,!(this.Rkt instanceof IT))throw new TypeError("behavior class must derive from IBehavior")}else this.Rkt=new IT;MT.TJ.sLt(t)}x0(){return this.Rkt}}}{const GT=self.Gs;GT.Ekt=class extends GT.zr{constructor(t){super(),this.Bc=t.Sq(),this.mRt=t,this.Ybt=t.yY(),this.Okt=t.C0(),this.Okt.Akt(this.Ybt)}qr(){this.Bc=null,this.mRt=null,this.Ybt=null,this.Okt=null}YDt(){}I0(){return this.mRt}yY(){return this.Ybt}Sq(){return this.Bc}C0(){return this.Okt}}}{const _T=self.Gs;_T.Fkt=class extends _T.zr{constructor(t,s){super(),this.Iyt=t,this.iLt=s,this.fe=t._0(),this.Bc=t.Sq(),this.mRt=t.I0(),this.SLt=this.mRt.IEt(),this.bZ=!1,this.CZ=!1,this.d3=!1,this.Kf=null}qr(){this.wLt(),this.vLt(),this.Dkt(),this.Kf&&(this.Kf.qr(),this.Kf=null),this.Iyt=null,this.fe=null,this.Bc=null,this.mRt=null,this.SLt=null}C0(){return this.mRt.C0()}Lkt(){return this.Iyt}_0(){return this.fe}yY(){return this.fe.yY()}kH(){return this.fe.kH()}Sq(){return this.Bc}I0(){return this.mRt}IEt(){return this.SLt}bLt(){return this.Iyt.bLt()}lZ(t){return this.Bc.lZ(t,this.fe,this.mRt)}xLt(t){return this.Bc.xLt(t,this.fe,this.mRt)}hq(t){return this.Bc.hq(t,this.fe,this.mRt)}kkt(){}Int(){}FLt(){}Nkt(){}DLt(){this.bZ||(this.Bc.o3(this),this.bZ=!0)}wLt(){this.bZ&&(this.Bc.a3(this),this.bZ=!1)}LLt(){return this.bZ}kLt(){this.CZ||(this.Bc.l3(this),this.CZ=!0)}vLt(){this.CZ&&(this.Bc.u3(this),this.CZ=!1)}NLt(){return this.CZ}Bkt(){this.d3||(this.Bc.c3(this),this.d3=!0)}Dkt(){this.d3&&(this.Bc.f3(this),this.d3=!1)}$kt(){return this.d3}BLt(){return[]}ILt(t,s){this.Bc.fZ(this.iLt,t,s)}Ukt(t,s){}xC(){return null}CC(t){}Rpt(t){}Lpt(t,s){}Rmt(t,s){if(0===s)return;const e=this.Rpt(t);if("number"!=typeof e)throw new Error("expected number");this.Lpt(t,e+s)}$Lt(t,s,e,i){}ULt(t,...s){t.call(this,...s)}VLt(t,...s){return t.call(this,...s)}XDt(){return null}pLt(t,s,e){if(!this.Iyt.WLt())return;const i=this.bLt(),r=_T.Hr(_T.Event,t,s);r.Vkt=i,r.G0=i.G0,e&&Object.assign(r,e),i.dispatchEvent(r)}}}{let PT=function(t){if(t!==AT)throw new Error("invalid internal API token")};ValidateInternalAPIToken=PT;const RT=self.Gs;RT.uq={},RT.Ayt={};const AT=RT._s();let ET=[],OT=[],FT=[],DT=null,LT=null,kT=null,NT=null;const BT=new Map,$T=new Map;RT.TJ=class extends RT.zr{#s=null;#t=[];#i=null;#e=[];#r=new Map;#h=null;#a=null;#n;constructor(t,s){super(),this.#s=t,this.#n=new Set(s)}Wkt(t){const s=t[19],e=this.#s.sPt(t[0]);if(!e)throw new Error("missing plugin");RT.DFt(t,e,s);const i=s>=2?RT.TDt:e,r=RT.Hr(i,{runtime:this.#s,GJ:t[1],GDt:t[2],OJ:t[5],DJ:t[8],RDt:t[9],ODt:t[13],UJ:t[14],AJ:t[17],kJ:t[18],NDt:s,id:t[20],name:t[21],qDt:s>=2?e:null,$Dt:t[22]});r.YDt(),this.#t.push(r),BT.set(e,r)}zkt(){this.#i=RT.Hr(RT.uq.lq,{runtime:this.#s,GJ:!0}),this.#i.YDt()}jkt(t){const s=t[1],e=t[2],i=t[3],r=this.#s.sPt(t[0]);if(!r)throw new Error("missing behavior");this.#r.set(r,()=>{const t=s>=2?RT.Gkt:r,n=RT.Hr(t,{runtime:this.#s,id:e,name:i,NDt:s,qDt:s>=2?r:null});n.YDt(),this.#e.push(n),$T.set(r,n),!this.#h&&RT.Ayt.Hkt&&n instanceof RT.Ayt.Hkt?this.#h=n:!this.#a&&RT.Ayt.qkt&&n instanceof RT.Ayt.qkt&&(this.#a=n),n.QDt()})}Jkt(t){const s=this.#r.get(t);s&&(s(),this.#r.delete(t))}static tLt(t,s=1){if(RT.TJ.tLt!==DT)throw new Error("invalid method");1===s&&ET.push(t),OT.push(t)}static sLt(t=1){if(RT.TJ.sLt!==LT)throw new Error("invalid method");1===t&&ET.pop(),OT.pop()}static PK(){if(RT.TJ.PK!==kT)throw new Error("invalid method");if(0===ET.length)throw new Error("no init object set");return ET.at(-1)}static CJ(t){if(RT.TJ.CJ!==NT)throw new Error("invalid method");if(PT(t),0===OT.length)throw new Error("no init object set");return OT.at(-1)}static Ykt(t){FT.push(t)}static Xkt(){FT.pop()}static oZ(){if(0===FT.length)throw new Error("no init properties set");return FT.at(-1)}Kkt(){for(const t of this.#t)t.QDt()}static jJ(t){return BT.get(t)||null}static A0(t){return $T.get(t)||null}r6(){return this.#i}Zkt(){return this.#h}Qkt(){return this.#a}_Z(t){return this.#n.has(t)}},DT=RT.TJ.tLt,LT=RT.TJ.sLt,kT=RT.TJ.PK,NT=RT.TJ.CJ}{const UT=self.Gs,VT=new Set;UT.tNt=class extends UT.zr{constructor(){super(),this.sNt=0,this.v6="",this.f$=0,this.eNt=0,this.iNt=0,this.Vy=0,this.Wy=0,this.rNt=!1,this.nNt=!1,this.hNt=null,this.oNt="",this.yR=UT.Hr(UT.Rect),this.aNt=UT.Hr(UT.Pl),this.lNt="",this.uNt=new self.gq(this),VT.add(this)}qr(){this.vR(),this.hNt&&0===this.hNt.D6()&&this.hNt.qr(),this.hNt=null,VT.delete(this),this.cNt()}static A6(){for(const t of VT)t.oNt="",t.yR.set(0,0,0,0),t.aNt.Xl(t.yR)}fNt(t){this.v6=t[0],this.f$=t[1],this.eNt=t[2],this.iNt=t[3],this.Vy=t[4],this.Wy=t[5],this.rNt=t[6],this.nNt=!0}dNt(t,s,e){if(e=!!e,this.hNt)throw new Error("already loaded asset");this.v6=s;const i={j5:e};return UT.Kh(s)&&(i.H5="remote"),this.yq(t,i),this.hNt.J5()}pNt(t,s){if(this.hNt)throw new Error("already loaded asset");this.v6="",this.f$=s.size,this.hNt=UT.Hr(UT.q5,t.Pz(),{blob:s,size:this.f$,H5:"local"})}mNt(t){if(t===this)throw new Error("cannot replace with self");this.sNt++,this.vR(),this.v6=t.v6,this.f$=t.f$,this.eNt=t.eNt,this.iNt=t.iNt,this.Vy=t.Vy,this.Wy=t.Wy,this.rNt=t.rNt,this.nNt=t.nNt,this.hNt=t.hNt,this.oNt=t.oNt,this.yR=t.yR,this.aNt=t.aNt,this.cNt()}K5(){return this.v6}Fu(){return this.f$}gNt(){return this.eNt}yNt(){return this.iNt}rkt(){return this.rNt}Cy(){return this.Vy}My(){return this.Wy}SNt(){return this.hNt.Cy()}wNt(){return this.hNt.My()}yq(t,s){if(this.hNt)throw new Error("already got asset");s=Object.assign({},s,{url:this.K5(),size:this.Fu()}),this.hNt=t.z5(s)}T6(){return this.hNt&&this.hNt.T6()}async R4(t,s){if(!this.hNt)throw new Error("no asset");if(this.oNt)throw new Error("already loaded texture");const e=this.sNt;this.oNt="loading";const i=await this.hNt.R4(t,s);if(this.sNt!==e)return null;if(!i)return this.oNt="",null;this.oNt="loaded",this.nNt||(this.Vy=i.Cy(),this.Wy=i.My(),this.nNt=!0);const r=this.rNt?this.Wy:this.Vy,n=this.rNt?this.Vy:this.Wy;return this.yR.set(this.eNt,this.iNt,this.eNt+r,this.iNt+n),this.yR.wt(i.Cy(),i.My()),this.aNt.Xl(this.yR),this.rNt&&this.aNt.eu(),i}vR(){this.oNt&&(this.hNt&&this.hNt.vR(),this.oNt="",this.yR.set(0,0,0,0),this.aNt.Xl(this.yR))}AM(){return this.hNt&&"loaded"===this.oNt?this.hNt.AM():null}EA(){return this.yR}ekt(){return this.aNt}g2(){return this.uNt}vNt(){return this.hNt}async bNt(t){t||(t=await this.hNt.k6()),this.nNt||(this.Vy=t.width,this.Wy=t.height,this.nNt=!0);const s=UT.co(this.Vy,this.Wy),e=s.getContext("2d");return this.rNt?(e.rotate(Math.PI/-2),e.translate(-this.Wy,0),e.drawImage(t,this.eNt,this.iNt,this.Wy,this.Vy,0,0,this.Wy,this.Vy)):e.drawImage(t,this.eNt,this.iNt,this.Vy,this.Wy,0,0,this.Vy,this.Wy),s}async xNt(t){if(this.lNt)return this.lNt;const s=await this.bNt(t),e=await UT.fo(s);return this.lNt=URL.createObjectURL(e),this.lNt}cNt(){this.lNt&&(URL.revokeObjectURL(this.lNt),this.lNt="")}}}{const WT=self.Gs;WT.CNt=class extends WT.zr{constructor(t){super(),this.Xr=t[0],this.TNt=t[1],this.hAt=!!t[2],this.ogt=t[3],this.MNt=t[4],this.INt=!!t[5],this.x8=t[6],this.GNt=t[7].map(t=>WT.Hr(WT._Nt,t)),this.PNt=new self.k0(this)}static RNt(t,s){const e=WT.Hr(WT.CNt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return e.GNt.push(WT._Nt.RNt(t)),e}qr(){for(const t of this.GNt)t.qr();WT.bh(this.GNt)}ANt(t){for(const s of this.GNt)s.s1().yq(t)}ENt(t,s){return Promise.all(this.GNt.map(e=>e.s1().R4(t,s)))}ONt(){for(const t of this.GNt)t.s1().vR()}Rc(){return this.Xr}s9(){return this.x8}q0(){return this.GNt.length}Y0(){return this.GNt}FNt(t){if((t=Math.floor(t))<0||t>=this.GNt.length)throw new RangeError("invalid frame");return this.GNt[t]}DNt(t,s){(s=Math.floor(s))<0?this.GNt.unshift(t):s>=this.GNt.length?this.GNt.push(t):this.GNt.splice(s,0,t)}LNt(t){if((t=Math.floor(t))<0||t>=this.GNt.length)throw new RangeError("invalid frame");this.GNt[t].qr(),this.GNt.splice(t,1)}kNt(t){for(let s=0,e=this.GNt.length;s<e;++s)if(WT.Zi(this.GNt[s].S1(),t))return s;return-1}NNt(t){if("string"==typeof t){const s=this.kNt(t);if(-1===s)throw new Error(`cannot find animation frame with tag ${t}`);return s}return t}N0(){return this.TNt}$0(){return this.hAt}V0(){return this.ogt}z0(){return this.MNt}H0(){return this.INt}BNt(){return this.PNt}}}{const zT=self.Gs,jT=(()=>{const t=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),s=new Uint8Array(t.length);for(let e=0,i=t.length;e<i;++e)s[e]=t.charCodeAt(e);return new Blob([s],{type:"image/png"})})();zT._Nt=class extends zT.zr{constructor(t){super(),this.$Nt=zT.Hr(zT.tNt),this.$Nt.fNt(t),this.UNt=t[7],this.VNt=zT.Hr(zT.Pa,t[8],t[9]),this.WNt=t[10].map(t=>zT.Hr(zT.zNt,this,t)),this.jNt=new Map;for(const t of this.WNt)this.jNt.set(t.Rc().toLowerCase(),t);this.HNt=null;const s=t[11];s.length>=6&&(this.HNt=zT.Hr(zT.lu,s)),this.VS=t[12]?t[12]:"",this.qNt=new self.t1(this)}static RNt(t){const s=zT.Hr(zT._Nt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.$Nt.pNt(t,jT),s}qr(){this.HNt&&(this.HNt.qr(),this.HNt=null),this.$Nt.qr(),this.$Nt=null}s1(){return this.$Nt}e1(){return this.UNt}WZ(){return this.VNt.Fa()}HZ(){return this.VNt.La()}f1(){return this.HNt}u1(t){return this.jNt.get(t.toLowerCase())||null}l1(t){return(t=Math.floor(t))<0||t>=this.WNt.length?null:this.WNt[t]}n1(){return this.WNt.length}S1(){return this.VS}X0(){return this.qNt}}}{const HT=self.Gs;HT.zNt=class extends HT.zr{constructor(t,s){super(),this.JNt=t,this.Xr=s[0],this.YNt=HT.Hr(HT.Pa,s[1],s[2])}qr(){}Rc(){return this.Xr}lC(){return this.YNt.Fa()}fC(){return this.YNt.La()}XNt(){return this.YNt}}}{const qT=globalThis.Gs,JT=globalThis.SZ,YT=globalThis.ZJ,XT=globalThis.CY,KT=globalThis.DY,ZT=globalThis.assert;qT.QSt=class extends qT.zr{constructor(t,s,e){super();const i=t.sPt(e[1]);this.Bc=t,this.fLt=qT.TJ.jJ(i),this.SLt=null,this.KNt=i.Instance,this.US=s,this.x8=e[11],this.Xr=e[0],this.LPt=this.Bc.MTt(e[14]),this.ZNt=!!e[9],this.QNt=!!e[2],this.tBt=!!e[10],this.sBt=e[3].map(s=>({o8:s[0],type:s[1],name:s[2],eBt:t.MTt(s[3])})),this.iBt=e[4],this.rBt=e[5],this.IDt=this.fLt.RJ(),this.nBt=qT.Hr(qT.Event.wf),this.n7=null;const[r,n]=t.Ez().qq();if(this.hBt=qT.Hr(qT.oBt,r,n),this.aBt=!0,this.lBt=null,this.uBt=null,this.cBt=-1,this.fBt=null,this.dBt=null,this.pBt=null,this.mBt=null,this.gBt=null,this.yBt=!1,this.SBt=null,this.wBt=e[8].map(t=>qT.vBt.KM(this,t)),this.bBt=[],this.xBt=new Map,this.CBt=new Map,this.TBt=new Set,this.MBt=new Map,this.IBt=qT.Hr(qT.Jbt,this),this.GBt=null,this._Bt=0,this.PBt=!1,this.SBt=null,this.$Nt=null,this.RBt=null,this.ABt=null,this.EBt=null,this.OBt=0,this.cAt=new Map,this.V6=[],this.FBt=new Map,this.DBt=!0,this.fLt.LJ()&&(this.n7=qT.Hr(qT.h7,this,e[12])),e[6]&&(this.$Nt=qT.Hr(qT.tNt),this.$Nt.fNt(e[6])),e[7]){this.RBt=e[7].map(t=>qT.Hr(qT.CNt,t)),this.ABt=new Map,this.EBt=new Map;for(const t of this.RBt)this.ABt.set(t.Rc().toLowerCase(),t),this.EBt.set(t.s9(),t)}this.QNt?(this.lBt=[],this.uBt=new Set,this.cBt=this.Bc.LBt()):(this.fBt=[],this.dBt=new Set,this.pBt=[],this.mBt=[],this.gBt=[]);const h=this.fLt.AAt();if(h<2&&(this.SLt=qT.Hr(i.kBt,this,e[15]),!(this.SLt instanceof qT.cLt)))throw new Error("v1 sdk type must derive from SDKTypeBase");let o;if(this.NBt=null,this.BBt=null,this.w7=qT.Hr(qT.Event.wf),qT.TJ.tLt(this,h),h>=2?(o=i.kBt,o||(o=globalThis.f2)):o=this.SLt.XDt(),o&&!this.QNt){if(this.NBt=new o(h<2?this:null),h<2&&!(this.NBt instanceof XT))throw new TypeError("script interface class must derive from IObjectType");if(h>=2&&!(this.NBt instanceof globalThis.f2))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else{const t=this.QNt?KT:XT;this.NBt=new t}if(qT.TJ.sLt(h),e[13]){const t=e[13];if(t){const s=t[0],e=t[1],i=t[2];this.SLt.dLt(s,e,i)}}this.Bc.$Bt()&&!this.QNt&&!this.tBt&&this.IDt||this.YDt(),this.fLt._J()&&(this.fLt.ZDt(this),this.UBt(e)),this.VBt=null}static KM(t,s,e){return qT.Hr(qT.QSt,t,s,e)}qr(){if(this.nBt.qr(),this.nBt=null,this.$Nt&&(this.$Nt.qr(),this.$Nt=null),this.RBt){for(const t of this.RBt)t.qr();qT.bh(this.RBt),this.ABt.clear(),this.EBt.clear()}this.VBt=null,this.IBt.qr(),this.IBt=null,this.cAt.clear(),this.SBt=null,this.Bc=null}WBt(t){for(let s=1,e=t.length;s<e;++s){const e=this.Bc.M7(t[s]);this.lBt.push(e),this.uBt.add(e),e.fBt.push(this),e.dBt.add(this)}}zBt(t){this.yBt=!0,this.SBt=t}DK(){return this.yBt}Pet(){return this.SBt}jBt(){let t=0;if(!this.QNt)for(const s of this.fBt)for(const e of s.HBt()){const s=e.Rc().toLowerCase();this.xBt.set(s,e),this.CBt.set(s,t),this.bBt.push(e),++t}for(const s of this.HBt()){const e=s.Rc().toLowerCase();this.xBt.set(e,s),this.CBt.set(e,t),this.bBt.push(s),++t}for(const t of this.bBt)this.TBt.add(t.C0().constructor);if(!this.QNt&&this.fBt.length){const t=this.Bc.qBt();qT.Ch(this.pBt,t,0),qT.Ch(this.mBt,t,0),qT.Ch(this.gBt,t,0);const s=[];let e=0,i=0,r=0;for(const t of this.fBt){const n=t.dRt();this.pBt[n]=e,e+=t.JBt(),this.mBt[n]=i,i+=t.YBt(),this.gBt[n]=r,r+=t.XBt();const h=t.VY();if(h&&this.n7)for(const t of h.WY())s.push(t.KBt(this.n7))}this.n7&&this.n7.ZBt(s)}}UBt(t){const s=qT.Ke(t[17])?t[17]:this.Bc.QBt(),e=qT.Hr(qT.Instance,{runtime:this.Bc,objectType:this,uid:s});e.t$t(t[16],[]),this.Bc.s$t(s,e),this.V6.push(e)}IEt(){return this.SLt}e$t(){return this.tBt}wf(){return this.nBt}YDt(){this.QNt||(this.SLt?this.SLt.YDt():this.NBt.d2())}i$t(){return this.OBt>0}async Eet(t){this.QNt||(this.OBt++,1===this.OBt&&(this.SLt?await this.SLt.Eet(t):await this.NBt.S2(this.Bc._H().GH())))}Net(){if(!this.QNt){if(this.OBt--,this.OBt<0)throw new Error("released textures too many times");0===this.OBt&&(this.SLt?this.SLt.Net():this.NBt.w2(this.Bc._H().GH()))}}Det(){if(this.QNt)throw new Error("not applicable to family");this.SLt?this.SLt.Det():this.NBt.v2()}async nit(t){this.QNt||(this.SLt?await this.SLt.nit(t):await this.NBt.b2(this.Bc._H().GH()))}Sq(){return this.Bc}tY(){return this.fLt}r$t(){return this.KNt}Rc(){return this.Xr}MTt(){return this.LPt}Mz(){return this.US}s9(){return this.x8}mY(){return this.QNt}g8(){return this.ZNt}RJ(){return this.IDt}dRt(){return this.cBt}HBt(){return this.wBt}YBt(){return this.iBt}n$t(t){return t&&this.TBt.has(t)}JBt(){return this.sBt.length}h$t(){return this.sBt.map(t=>t.o8)}o$t(t){return this.sBt.findIndex(s=>s.o8===t)}mut(t){return this.sBt.findIndex(s=>s.name===t)}a$t(){return this.sBt.map(t=>t.name)}l$t(){return this.sBt.map(t=>t.eBt)}yut(t){if((t=Math.floor(t))<0||t>=this.sBt.length)throw new RangeError("invalid instance variable index");return this.sBt[t].type}gut(t){if((t=Math.floor(t))<0||t>=this.sBt.length)throw new RangeError("invalid instance variable index");return this.sBt[t].name}XBt(){return this.rBt}u$t(){return this.bBt}Qft(t){return this.xBt.get(t.toLowerCase())||null}wut(t){const s=this.CBt.get(t.toLowerCase());return void 0===s?-1:s}VY(){return this.n7}LJ(){return this.fLt.LJ()}c$t(){return this.n7&&this.n7.f$t()}fMt(){return this.IBt}fY(){return this.IBt.fY()}s1(){return this.$Nt}_7(t){this.GBt=t}G7(){return this.GBt}P7(t){this._Bt=t}d$t(){return this._Bt}p$t(){return this.RBt}m$t(){return this.RBt.length}EY(){return this.fBt}EEt(t){return this.dBt.has(t)}NY(){return this.lBt}$Y(t){return this.uBt.has(t)}SRt(t){return this.mBt[t]}fRt(t){return this.pBt[t]}CPt(t){this.MBt.set(t.GPt().toLowerCase(),t)}SY(t){return!!this.bY(t)}bY(t){const s=this.MBt.get(t.toLowerCase());return s&&s.Gu()?s:null}g$t(){return this.RBt}y$t(t){if(!this.RBt)throw new Error("no animations");return this.ABt.get(t.toLowerCase())||null}S$t(t){if(!this.RBt)throw new Error("no animations");return this.EBt.get(t)||null}w$t(t){if(this.y$t(t))throw new Error(`animation name '${t}' already exists`);const s=qT.CNt.RNt(this.Sq(),t);return this.RBt.push(s),this.ABt.set(s.Rc().toLowerCase(),s),this.EBt.set(s.s9(),s),s}v$t(t){const s=this.y$t(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.RBt.length)throw new Error("cannot remove last animation");const e=this.RBt.indexOf(s);this.RBt.splice(e,1),this.ABt.delete(s.Rc().toLowerCase()),this.EBt.delete(s.s9()),s.qr()}b$t(){if(!this.RBt)throw new Error("no animations");return this.RBt[0]}x$t(){return this.b$t().FNt(0)}C$t(){if(this.RBt){const t=this.x$t().s1();return[t.Cy(),t.My()]}return this.$Nt?[this.$Nt.Cy(),this.$Nt.My()]:[100,100]}KJ(){if(!this.fLt._J())throw new Error("not a single-global plugin");return this.V6[0]}cY(){return this.V6}*eY(){yield*this.V6}*uY(){yield*this.V6,yield*this.Bc.LOt(this)}MY(){return this.V6.length}D7(t){this.V6.push(t)}T$t(){this.DBt=!0}fit(){if(!this.DBt||this.QNt)return;const t=this.V6;let s=0;for(let e=t.length;s<e;++s)t[s].M$t(s);const e=this.Bc.I$t();for(const t of e)t.yY()===this&&t.M$t(s++);this.DBt=!1}G$t(t){const s=this.V6;if(t<s.length)return s[t];t-=s.length;const e=this.Bc.I$t();for(const s of e)if(s.yY()===this){if(0===t)return s;--t}return null}wOt(t){if(t&&t.DK()&&t.yY()!==this)for(const s of t.LK())if(s.yY()===this)return s;const s=this.fY().cY();return s.length?s[0]:null}lY(t){const s=this.fY().cY();return s.length>0?s[t.BK()%s.length]:null}*VOt(t,s){const e=this.fY().cY(),i=e.length,r=s.fY(),n=s.fY().cY(),h=n.length;let o=t.BK();!s.mY()&&r.axt()||(o=n.indexOf(t));const a=Math.ceil(i/h),l=i%h;let u=0,c=0;0===l||o<l?(u=o*a,c=a):(u=l*a+(o-l)*(a-1),c=a-1);for(let t=u,s=u+c;t<s;++t)yield e[t]}WAt(t){this.SLt?.WAt(t)}q_t(){if(!this.yBt||this.QNt)return;this.fit();const t=this.fY(),s=t.gxt(),e=t.axt(),i=this.Bc.mTt(),r=i&&i.dj()&&i.dj().Mxt();for(const i of this.SBt.BY()){if(i===this)continue;i.fit();const n=i.fY();if(n.mxt(e),!e){const e=n.gxt();qT.bh(e);for(const t of s)e.push(i.G$t(t.BK()));if(r){const s=t.yxt(),e=n.yxt();qT.bh(e);for(const t of s)e.push(i.G$t(t.BK()))}}}}JAt(t,s){for(const e of this.Pet().BY()){const i=e.fY();t?qT.wh(i.yxt(),s):qT.wh(i.gxt(),s)}}_$t(){return this.hBt}P$t(t){this.aBt=!!t}R$t(){if(this.aBt&&this.IDt){for(const t of this.V6)t.kH().A$t();for(const t of this.Bc.I$t())t.yY()===this&&t.kH().A$t();this.aBt=!1}}E$t(t,s,e){if(s){const e=this.FBt.get(s);e&&(e.delete(t),0===e.size&&this.FBt.delete(s))}if(e){let s=this.FBt.get(e);s||(s=new Set,this.FBt.set(e,s)),s.add(t)}}*O$t(){if(this.mY()){const t=new Set;for(const s of this.lBt)for(const e of s.O$t())t.add(e);yield*t.values()}else for(const t of this.FBt.keys())t.Jr()||(yield t)}kAt(){return this.cAt||(this.cAt=new Map),this.cAt}F$t(){return this.n$t(qT.Ayt.Hkt)}D$t(){return this.n$t(qT.Ayt.qkt)}L$t(){return this.n$t(qT.Ayt.k$t)}O7(){return this.n$t(qT.Ayt.N$t)}wst(){const t={instances:this.V6.map(t=>t.xC())};return this.cAt&&this.cAt.size&&(t.ex=qT.wo(this.cAt)),t}vst(t,s){this.cAt&&(this.cAt.clear(),this.cAt=null);const e=t.ex;e&&(this.cAt=qT.vo(e));const i=this.V6,r=t.instances;for(let t=0,s=Math.min(i.length,r.length);t<s;++t)i[t].CC(r[t]);for(let t=r.length,s=i.length;t<s;++t)this.Bc.qH(i[t]);for(let t=i.length,e=r.length;t<e;++t){const e=r[t];let i=null;if(this.RJ()&&(i=this.Bc.dH().wet(e.w.l),!i))continue;const n=this.Bc.F7(this.GBt||this,i,!1,0,0,!0);n.CC(e),s&&s.add(n)}this.VBt=r,this.T$t()}B$t(){return this.VBt}$$t(){this.VBt=null}U$t(){for(let t=0,s=this.V6;t<s;++t)this.V6[t].U$t()}JJ(){return this.NBt}ij(){return this.w7}V$t(){return this.BBt}IY(t){this.BBt=t}e6(t){const s=this.Bc,e=s.yZ()&&!s.oj().JH();e&&JT.kit(),this.w7.dispatchEvent(t),e&&JT.Nit()}}}{const QT=self.Gs;QT.W$t=class extends QT.zr{constructor(t,s){super(),this.Bc=t,this.z$t=s;for(const t of this.z$t)t.zBt(this)}qr(){this.Bc=null}Sq(){return this.Bc}_et(){return this.z$t}BY(){return this.z$t}pit(){return this.z$t.some(t=>t.RJ())}}}{const tM=self.Gs,sM=self.SZ,eM=self.MK,iM=tM.TJ,rM=[],nM=new Set;let hM=0;const oM=new WeakMap,aM=1,lM=2,uM=4,cM=8,fM=16,dM=32,pM=32,mM=64;tM.Instance=class extends tM.zr{#s=null;constructor(t){if(tM.TJ!==iM)throw new Error("invalid addon manager");super(),this.Bc=t.runtime,this.j$t=t.objectType,this.Ult=null,this.H$t=null,this.q$t=null,this.J$t=0,this.Y$t=t.uid,this.X$t=hM++,this.HD=0;const s=tM.Lh(t.tags);s.length>0&&this.XK(new Set(s)),this.K$t=rM,this.Z$t=rM;const e=this.j$t.u$t();e.length>0&&(this.Z$t=e.map((t,s)=>tM.Hr(tM.Q$t,{runtime:this.Bc,T0:t,G0:this,index:s}))),this.tUt=this.j$t.DK()?[]:null,this.sUt=-1,this.nBt=null;const i=this.tY();if(i.Dx()&&(this.HD|=4),i.RJ())if(this.Ult=tM.Hr(tM.eUt,this,t.kZ),t.iUt)this.Ult.rUt(t.iUt);else{this.Ult.nUt();const[t,s]=this.j$t.C$t();this.Ult.tA(t,s),this.yY().c$t()&&this.Ult.LZ().hUt()}t.oUt?this.aUt(t.oUt):this.lUt()}qr(){if(this.q$t&&(this.q$t.RK(),this.q$t=null),this.Z$t.length>0){for(const t of this.Z$t)t.qr();tM.bh(this.Z$t)}this.H$t&&(this.H$t.qr(),this.H$t=null);const t=oM.get(this);t&&(t.clear(),oM.delete(this)),this.tUt&&tM.bh(this.tUt),this.nBt&&(this.nBt.qr(),this.nBt=null),this.#s&&(this.#s.uUt.clear(),this.#s.cUt.clear()),this.#s=null,this.Bc=null,this.j$t=null,this.K$t.length>0&&tM.bh(this.K$t),this.Ult&&(this.Ult.qr(),this.Ult=null)}aUt(t){t.length>0&&(this.K$t=[],tM.Mh(this.K$t,t))}lUt(){const t=this.j$t.JBt();if(0===t)return;this.K$t=[];const s=[0,0,""];for(let e=0;e<t;++e)this.K$t.push(s[this.j$t.yut(e)])}t$t(t,s){if(this.H$t)throw new Error("already got sdk instance");for(let t=0,e=this.Z$t.length;t<e;++t)this.Z$t[t].t$t(s?s[t]:null);if(this.tY().AAt()<2){if(this.H$t=tM.Hr(this.j$t.r$t(),this,t),!(this.H$t instanceof tM.gLt))throw new Error("sdk type must derive from SDKInstanceBase");!this.tY().RJ()&&this.j$t.V$t()&&this.OH()}else{const s=this.tY().XDt();this.fUt(s.Instance,t)}}g0(){return this.H$t??this.q$t}kH(){return this.Ult}Sq(){return this.Bc}$j(){return this.sUt}VK(){const t=this.sUt;return-1===t?this.Sq().$j():t}Uj(t){((t=+t)<0||!isFinite(t))&&(t=0),this.sUt=t,this.yY().c$t()&&this.Bc.dUt(this,!0)}zK(){this.sUt=-1,this.yY().c$t()&&this.Bc.dUt(this,!1)}ost(){return this.Bc.pUt(this)}wf(){return this.nBt||(this.nBt=tM.Hr(tM.Event.wf)),this.nBt}nT(t){this.H$t?this.H$t.nT(t):this.q$t.G2(this.Bc._H().GH())}YDt(t){this.H$t.YDt(t)}mUt(){this.HD|=2}gUt(){return!!(2&this.HD)}yUt(){this.HD|=1}NH(){return!!(1&this.HD)}Dx(){return!!(4&this.HD)||(this.H$t?this.H$t.Dx():this.q$t.yx())}SUt(){this.HD|=32}Ztt(){return!!(32&this.HD)}wUt(){return!!(8&this.HD)}vUt(t){t?this.HD|=8:this.HD&=-9}bUt(){return!!(16&this.HD)}xUt(t){t?this.HD|=16:this.HD&=-17}CUt(){return!!(32&this.HD)}TUt(t){t?this.HD|=32:this.HD&=-33}MUt(){return!!(64&this.HD)}IUt(t){t?this.HD|=64:this.HD&=-65}GUt(t,s){t<<=16,s?this.HD|=t:this.HD&=~t}_Ut(t){return!!(this.HD&t<<16)}ZLt(){return this.H$t?this.H$t.ZLt():null}QLt(){return this.H$t?this.H$t.QLt():null}tkt(){return this.H$t?this.H$t.tkt():null}skt(){return this.H$t?this.H$t.skt():null}ikt(){return!!this.H$t&&this.H$t.ikt()}VEt(t){return this.H$t?this.H$t.VEt(t):[this.q$t.x,this.q$t.y,this.q$t.XZ]}yY(){return this.j$t}Xtt(){return this.H$t?this.H$t.Xtt():this.q$t._2()}kOt(t){return t.mY()?t.$Y(this.yY()):this.yY()===t}PUt(t,s,e){const i=(s,e)=>{const i=e||s.yY(),r=t.get(i);r?r.add(s):t.set(i,new Set([s]))};if(i(this,s),this.DK())for(const t of this.LK())i(t);if(e)for(const t of this._Q())i(t)}RUt(){if(!this.tY().$J())throw new Error("object does not support scene graph")}OQ(){return null!==this.vQ()}vQ(){const t=this.kH();if(!t)return null;const s=t.vQ();return s?s.J1():null}xQ(){const t=this.kH();if(!t)return null;const s=t.xQ();return s?s.J1():null}*CQ(){const t=this.kH();if(t)for(const s of t.CQ())yield s.J1()}AUt(t){if(!t)return!1;for(const s of this.children())if(s===t)return!0;return!1}Cst(){const t=this.kH();return!!t&&t.Cst()}EUt(t){const s=this.kH();if(!s)return[];const e=t.Rc();return s.xit().map(t=>t.J1()).filter(t=>t.yY().Rc()===e)}xit(){const t=this.kH();return t?t.xit().map(t=>t.J1()):[]}*children(){const t=this.kH();if(t)for(const s of t.children())yield s.J1()}*_Q(){const t=this.kH();if(t)for(const s of t._Q())yield s.J1()}MQ(){const t=this.kH();return t?t.MQ():0}OUt(){return[...this.CQ()].length}UOt(){const t=this.kH();return t?t.UOt():0}GQ(t){const s=this.kH();if(!s)return null;const e=s.GQ(t);return e?e.J1():null}FUt(){const t=this.kH();if(!t)return NaN;const s=t.vQ();return s?s.DUt(t):NaN}LUt(t){for(const s of this.kH().xit())if(s.J1().kK()===t)return!0;return!1}RQ(t,s){this.RUt(),t.RUt(),this.kH().RQ(t.kH(),s||{})}AQ(t){const s=this.kH();s&&s.AQ(t.kH())}ZQ(){const t=this.kH();return!!t&&t.ZQ()}sit(){const t=this.kH();if(!t)return;const s=t.kUt();if(s)for(const t of s){const s=this.Bc.EH(t[2]);if(s){const e=t[3];this.RQ(s,{DQ:!!(1&e),kQ:!!(e>>1&1),BQ:!!(e>>2&1),UQ:!!(e>>3&1),WQ:!!(e>>4&1),KQ:!!(e>>5&1),jQ:!!(e>>6&1),qQ:!!(e>>7&1),YQ:!!(e>>8&1)})}}}eit(t,s){const e=t.get(this);if(e)for(const t of e.sceneGraphJson.children){const e=s.get(t.index);if(!e)continue;const i=t.flags;this.RQ(e,{DQ:!!(1&i),kQ:!!(i>>1&1),BQ:!!(i>>2&1),UQ:!!(i>>3&1),WQ:!!(i>>4&1),KQ:!!(i>>5&1),jQ:!!(i>>6&1),qQ:!!(i>>7&1),YQ:!!(i>>8&1)})}}UK(){const t=this.Bc.NUt();return t?t.swt(this):""}DK(){return null!==this.tUt}BUt(){tM.bh(this.tUt)}cit(t){this.tUt.push(t)}EK(){return this.tUt}$Ut(t){return!!this.UUt(t)}UUt(t){const s=this.LK();if(null===s||0===s.length)return!1;for(const e of s)if(e.yY()===t)return e;return null}LK(){return this.tUt}QIt(){for(const t of this.LK())t.yY().fY().Sxt(t)}zAt(){for(const t of this.LK())t.yY().fY().dxt(t)}jAt(t){for(const s of this.LK())s.yY().fY().gxt()[t]=s}qAt(){for(const t of this.LK())t.yY().fY().pxt(t)}HAt(t){for(const s of this.LK())s.yY().fY().yxt()[t]=s}tY(){return this.j$t.tY()}M$t(t){this.J$t=t}BK(){return this.j$t.fit(),this.J$t}kK(){return this.Y$t}VUt(t){this.Y$t=t}WUt(){return this.X$t}XK(t){if(this.#s&&(this.#s.uUt.clear(),this.#s.cUt.clear()),0===t.size)this.#s=null;else{this.#s||(this.#s={uUt:new Set,cUt:new Set});for(const s of t){const t=s.toLowerCase();this.#s.cUt.has(t)||(this.#s.uUt.add(s),this.#s.cUt.add(t))}}}ZK(){return this.#s?this.#s.uUt:nM}JK(){return this.#s?this.#s.cUt:nM}zUt(){return this.#s?this.#s.cUt:null}HK(t){return!!this.#s&&this.#s.cUt.has(t.toLowerCase())}zut(){return Array.from(this.ZK()).join(" ")}pFt(t){t=Math.floor(t);for(const s of this.ZK()){if(0===t)return s;--t}return""}Zft(){return this.Z$t}jUt(t){if(!t)return null;for(const s of this.Z$t)if(s.C0()instanceof t)return s;return null}HUt(t){if(!t)return null;const s=this.jUt(t);return s?s.g0():null}Kft(t){const s=this.Z$t;for(let e=0,i=s.length;e<i;++e)if(s[e].I0().s9()===t)return e;return-1}qUt(){return this.K$t}a$t(){return this.j$t.a$t()}JUt(){return this.K$t.length}$pt(t){t|=0;const s=this.K$t;if(t<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}uRt(t){return this.K$t[t]}YUt(t){const s=this.K$t[t];return 0===this.j$t.yut(t)?!!s:s}Upt(t,s){t|=0;const e=this.K$t;if(t<0||t>=e.length)throw new RangeError("invalid instance variable");switch(this.j$t.yut(t)){case 0:e[t]=s?1:0;break;case 1:e[t]="number"==typeof s?s:parseFloat(s);break;case 2:e[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}Amt(t,s){if(0===s)return;t|=0;const e=this.K$t;if(t<0||t>=e.length)throw new RangeError("invalid instance variable");const i=e[t];if("number"!=typeof i)throw"boolean"==typeof i?new Error("can not set offset of boolean variable"):"string"==typeof i?new Error("can not set offset of string variable"):new Error("unknown instance variable type");e[t]+="number"==typeof s?s:parseFloat(s)}kAt(){let t=oM.get(this);return t||(t=new Map,oM.set(this,t),t)}XUt(t){const s=this.yY();if(s.ij().Tf(t))return!0;for(const e of s.EY())if(e.ij().Tf(t))return!0;return!!this.Bc.ij().Tf(t)}RY(t=void 0){const s=t??new Set;if(s.has(this))return;s.add(this);const e=this.kH();if(e&&e.Cst())for(const t of this._Q())if(s.add(t),t.DK())for(const e of t.LK())s.add(e);if(this.DK())for(const t of this.LK())t.RY(s);if(!t){for(const t of s.values())t.iit();this.rit()}}KUt(){this.j$t.V$t()&&this.OH();for(const t of this.Z$t)t.kkt()}ZUt(){this.KUt()}iit(){if(this.KUt(),this.XUt("instancecreate")){const t=this.yY(),s=new tM.Event("instancecreate");s.G0=this.OH(),t.e6(s);for(const e of t.EY())e.e6(s);this.Bc.e6(s)}this.Bc.lZ(this.tY().BMt().aq.yFt,this,null)}rit(){if(this.tY().$J()){if(this.e6(new tM.Event("hierarchyready")),this.XUt("hierarchyready")){const t=this.yY(),s=new tM.Event("hierarchyready");s.G0=this.OH(),t.e6(s);for(const e of t.EY())e.e6(s);this.Bc.e6(s)}this.Bc.lZ(this.tY().BMt().aq.FOt,this,null)}}QUt(){this.Bc.lZ(this.tY().BMt().aq.SFt,this,null)}tVt(t){if(this.q$t){const s=new tM.Event("destroy");s.sVt=t,this.e6(s)}if(!this.XUt("instancedestroy"))return;const s=this.yY(),e=new tM.Event("instancedestroy");e.G0=this.OH(),e.sVt=t,s.e6(e);for(const t of s.EY())t.e6(e);this.Bc.e6(e)}eVt(){return this.H$t?this.H$t.BLt():this.q$t.TZ()}xC(t="full",s=null){const e={};"full"===t?e.uid=this.kK():e.c3=!0;const i=this.ZK();if(i.size>0&&(e.tags=Array.from(i)),"visual-state"!==t){const s=oM.get(this);if(s&&s.size&&(e.ex=tM.wo(s)),-1!==this.$j()&&(e.mts=this.$j()),this.j$t.JBt()>0){const t={},s=this.j$t.h$t();for(let e=0,i=this.K$t.length;e<i;++e)t[s[e].toString()]=this.K$t[e];e.ivs=t}if(this.Z$t.length){const s={};for(const e of this.Z$t){const i=e.xC(t);i&&(s[e.I0().s9().toString()]=i)}e.behs=s}}this.Ult&&(e.w=this.Ult.wst(t,s));const r=this.H$t?this.H$t.xC():this.q$t.MZ();return r&&(e.data=r),e}Mrt(t="full",s=null){this.Ult&&this.Ult.Mrt(t)}Grt(t,s="full",e=null){this.Ult&&this.Ult.Grt(t,s,e)}iVt(t,s="full",e=null){this.Ult&&this.Ult.iVt(t,s,e)}U$t(){this.tY().RJ()&&this.Ult.U$t()}CC(t,s="full",e=null){if("full"===s)this.Y$t=t.uid;else if(!t.c3)return;if(this.XK(new Set(t.tags??[])),"visual-state"!==s){let s=oM.get(this);s&&(s.clear(),oM.delete(this));const e=t.ex;e&&(s=tM.vo(e),oM.set(this,s)),this.sUt=t.hasOwnProperty("mts")?t.mts:-1;const i=t.ivs;if(i)for(const[t,s]of Object.entries(i)){const e=parseInt(t,10),i=this.j$t.o$t(e);if(i<0||i>=this.K$t.length)continue;let r=s;null===r&&(r=NaN),this.K$t[i]=r}}if(this.tY().RJ()){const i=t.w;if(i){const t=i.l;if(this.Ult.BH().s9()!==t){const e=this.Ult.BH(),i=e.yH().wet(t);i?(this.Ult.WH(i),e.N7(this,!0),i.D7(this,!0),i.zH(this),this.Ult.NZ()):"full"===s&&this.Bc.qH(this)}this.Ult.vst(i,s,e)}}if("visual-state"!==s){const e=t.behs;if(e)for(const[t,i]of Object.entries(e)){const e=parseInt(t,10),r=this.Kft(e);r<0||r>=this.Z$t.length||this.Z$t[r].CC(i,s)}}const i=t.data;i&&(this.H$t?this.H$t.CC(i,s):this.q$t.IZ(i))}rVt(t){if(this.Ult.BH().s9()===t)return;const s=this.Ult.BH(),e=s.yH().wet(t);e&&(this.Ult.WH(e),s.N7(this,!0),e.D7(this,!0),e.zH(this),this.Ult.NZ())}OH(){return this.q$t||this.fUt()}WLt(){return!!this.q$t}fUt(t,s){const e=this.Ult?t?self.C2:self.c0:t?self.sZ:self.MK,i=t||this.H$t.XDt(),r=this.j$t.V$t(),n=r||i||e,h=this.tY().AAt();if(tM.TJ.tLt(this,h),tM.TJ.Ykt(s),this.q$t=new n,tM.TJ.Xkt(),tM.TJ.sLt(h),i&&!(this.q$t instanceof e))throw new TypeError(`script interface class '${i.name}' does not extend the right base class '${e.name}'`);if(r){const t=i||e;if(!(this.q$t instanceof t))throw new TypeError(`setInstanceClass(): class '${r.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.q$t}IK(t){if(0===this.K$t.length)return;const s={},e=this.j$t.l$t();for(let t=0,i=e.length;t<i;++t)s[e[t]]={configurable:!1,enumerable:!0,get:tM.Instance.prototype.YUt.bind(this,t),set:tM.Instance.prototype.Upt.bind(this,t)};const i=Object.create(Object.prototype,s);t.nVt={value:i,writable:!1}}GK(t){const s=this.Z$t;if(0===s.length)return;const e={};for(const t of s)e[t.I0().MTt()]={value:t.bLt(),writable:!1};const i=Object.create(Object.prototype,e);t.BIt={value:i,writable:!1}}e6(t){if(!this.WLt())return;const s=this.OH();t.G0=s;const e=this.Bc,i=e.yZ()&&!e.oj().JH();i&&sM.kit(),s.dispatchEvent(t),i&&sM.Nit()}}}{const gM=self.Gs,yM=new Map;gM.Tit=class extends gM.zr{constructor(t){super(),this.RC=t,this.nGt=null,this.hVt=[],this.oVt=t.Cy(),this.aVt=t.My(),this.lVt=1,this.uVt=1,this.cVt=0,this.fVt=1,this.dVt=t.FO(),this.pVt=null,this.mVt=null,this.gVt=NaN,this.yVt=!1,this.Ist=NaN,this.Gst=NaN,this.SVt=s=>{if(s.G0!==this.nGt.J1())return;t.Sq().wf().removeEventListener("instancecreate",this.SVt);const e=this.nGt.J1().g0();this.yVt=!!e.Eut(),this.Ist=this.yVt?e.Aut():NaN,this.Gst=this.yVt?e.Fut():NaN}}qr(){this.nGt=null,this.pVt=null,this.mVt=null,this.gVt=NaN,this.yVt=!1,this.Ist=NaN,this.Gst=NaN,gM.bh(this.hVt)}wVt(t){if(this.fVt=this.RC.FO(),this.dVt=this.fVt,this.nGt=t,this.cVt=t?t.YY():0,this.nGt){const t=this.RC.Sq();if(this.nGt.J1().tY().AAt()<2){const s=this.nGt.J1().g0();s?(this.yVt=!!s.Eut(),this.Ist=this.yVt?s.Aut():NaN,this.Gst=this.yVt?s.Fut():NaN):this.nGt.J1().NH()||t.wf().addEventListener("instancecreate",this.SVt)}else this.yVt=!1,this.Ist=NaN,this.Gst=NaN}else this.yVt=!1,this.Ist=NaN,this.Gst=NaN}vQ(){return this.nGt}Cst(){return this.hVt.length>0}xit(){return this.hVt}vVt(){this.Cst()&&1!==this.hVt.length&&(this.mVt?this.hVt.sort((t,s)=>{const e=this.mVt.get(t.J1()),i=this.mVt.get(s.J1());return gM.Ke(e)&&gM.Ke(i)?e-i:0}):this.hVt.sort((t,s)=>{const e=t.wdt().bVt(),i=s.wdt().bVt();return gM.Ke(e)&&gM.Ke(i)?e-i:0}))}bVt(){return this.gVt}xVt(){return this.lVt}CVt(t){this.lVt=t}TVt(){return this.uVt}MVt(t){this.uVt=t}hmt(){return this.dVt}uOt(){return this.fVt}IVt(t){this.fVt=t}Sdt(){return 0===this.oVt?Number.EPSILON:this.oVt}Cdt(){return 0===this.aVt?Number.EPSILON:this.aVt}GVt(){if(this.RC.$Q()){const t=this.nGt;let s=t.Cy(),e=t.wdt().Sdt();return 0===s&&(s=Number.EPSILON),e===Number.EPSILON&&s===Number.EPSILON?1:e===Number.EPSILON&&s!==Number.EPSILON&&this.yVt?1+s/this.Ist:s/e}return 1}_Vt(){if(this.RC.VQ()){const t=this.nGt;let s=t.My(),e=t.wdt().Cdt();return 0===s&&(s=Number.EPSILON),e===Number.EPSILON&&s===Number.EPSILON?1:e===Number.EPSILON&&s!==Number.EPSILON&&this.yVt?1+s/this.Gst:s/e}return 1}PVt(){return 0}RVt(){return{sw:this.oVt,sh:this.aVt,sx:this.lVt,sy:this.uVt,psa:this.cVt,oo:this.fVt,so:this.dVt,pi:this.RC.J1().FUt()}}wst(t,s=null){const e=this.RVt();return s&&s.selfOnly?Object.assign(e,{p:null,c:[]}):Object.assign(e,{p:this.AVt(t),c:this.EVt(t)})}OVt(t){let s="";return t.LQ()&&(s+="x"),t.NQ()&&(s+="y"),t.$Q()&&(s+="w"),t.VQ()&&(s+="h"),t.zQ()&&(s+="a"),t.HQ()&&(s+="z"),t.ZQ()&&(s+="d"),t.JQ()&&(s+="o"),t.XQ()&&(s+="v"),s}AVt(t){return this.nGt?!this.nGt.J1()||this.nGt.J1().NH()?null:this.FVt(this.nGt,this.RC,t):null}EVt(t){return this.hVt.map(s=>this.FVt(s,s,t)).filter(t=>t)}FVt(t,s,e){const i=t.J1();if(i&&i.NH())return null;const r={};return r.uid=i.kK(),r.f=this.OVt(s),r.offsets=s.DVt(),r.data=gM.Tit.LVt(i),r.oci=i.yY().Mz(),"state"===e?(r.inst=i.xC("full",{selfOnly:!0}),r.instIndex=NaN):(r.instIndex=i.yY().cY().indexOf(i),r.inst=null),r}vst(t){this.oVt=t.sw,this.aVt=t.sh,this.lVt=t.sx,this.uVt=t.sy,this.cVt=t.psa,this.fVt=t.oo,this.dVt=t.so,this.gVt=gM.Ke(t.pi)?t.pi:NaN}kVt(t,s,e,i){if(!t&&!s)if(i?.GFt){if(this.pVt)for(const t of this.pVt)t.NH()||t.OQ()||t.Sq().qH(t)}else if(this.pVt)for(const t of this.pVt)if(e.c&&e.c.length){if(!e.c.some(s=>s.uid===t.kK()))continue;t.NH()||t.OQ()||t.Sq().qH(t)}this.pVt=t,this.mVt=s}NVt(t){const s=this.RC.Sq();return yM.has(t)?yM.get(t):s.EH(t)}Grt(t,s){const e=this.RC,i=e.Sq(),r=s?.BVt??new Set;if(t.p&&!this.nGt){const n=t.p.uid,h=this.NVt(n);if(h){const n=h.kH();h.AUt(e.J1())?this.nGt=n:(h.LUt(e.J1().kK())?(i.qH(e.J1()),i.$Vt(e.J1().kK()),yM.delete(e.J1().kK())):h.RQ(e.J1(),this.UVt(t.p.f)),r.has(e)||(e.VVt(t.p.offsets),this.WVt(h,t.p,s),this.zVt(h,h.kK(),e.Sq(),s)),r.add(e),h.kH().wdt().vVt())}else if(gM.Ke(t.p.oci)){const r=i.GY(i.M7(t.p.oci),e.BH(),0,0,!0);if(r){const n=this.jVt(t.p,i);n&&r.CC(n);const h=r.kH(),o=!!s?.GFt;h.BH()._Y(r,!1,o),r.RQ(e.J1(),this.UVt(t.p.f)),yM.set(r.kK(),r),this.zVt(r,r.kK(),i,s),r.kH().wdt().vVt()}}}const n=[];for(const s of t.c){const t=s.uid,e=this.NVt(t);e&&n.push(e)}let h=0;for(const o of t.c){const a=o.uid,l=this.NVt(a);if(l){if(this.pVt){if(this.pVt.includes(l)){const i=l;if(i.yY()!==l.yY()){h++;continue}if(i.NH()){h++;continue}const o=t.c[h];if(!s?.GFt&&this.HVt(i,n,e)){if(e.J1().GQ(h)){const n=i.yY().Mz(),a=o.oci,l=e.J1().GQ(h).yY().Mz();if(n!==a||a!==l){this.qVt(t.c,e,r,s);break}this.JVt(h,o,e,r,s)}else this.JVt(h,o,e,r,s);h++;continue}if(i.OQ()&&i.vQ()!==e.J1()){const t=this.YVt(o,s);this.XVt(t,o,r,s),h++;continue}this.XVt(i.kH(),o,r,s,!0),h++;continue}if(this.pVt[h]){const i=this.pVt[h];if(i.yY()!==l.yY()){h++;continue}if(i.NH()){h++;continue}const o=t.c[h];if(!s?.GFt&&this.HVt(i,n,e)){if(e.J1().GQ(h)){const n=i.yY().Mz(),a=o.oci,l=e.J1().GQ(h).yY().Mz();if(n!==a||a!==l){this.qVt(t.c,e,r,s);break}this.JVt(h,o,e,r,s)}else this.JVt(h,o,e,r,s);h++;continue}if(i.OQ()&&i.vQ()!==e.J1()){const t=this.YVt(o,s);this.XVt(t,o,r,s),h++;continue}this.XVt(i.kH(),o,r,s,!0),h++;continue}}const i=l.yY();if(this.KVt(n,i)===e.J1().EUt(i).length){for(const t of e.J1().xit()){if(t.yY()!==i)continue;const e=t.kH();if(e&&!r.has(e)){r.add(e),e.VVt(o.offsets),this.WVt(t,o,s);break}}h++;continue}if(l.OQ()&&l.vQ()!==e.J1()){const t=this.YVt(o,s);this.XVt(t,o,r,s),h++;continue}this.XVt(l.kH(),o,r,s)}else if(this.pVt&&this.pVt[h]){const a=this.pVt[h],l=i.M7(this.ZVt(o));if(a.yY()!==l){h++;continue}if(a.NH()){h++;continue}const u=t.c[h];if(!s?.GFt&&this.HVt(a,n,e)){if(e.J1().GQ(h)){const i=a.yY().Mz(),n=u.oci,o=e.J1().GQ(h).yY().Mz();if(i!==n||n!==o){this.qVt(t.c,e,r,s);break}this.JVt(h,u,e,r,s)}else this.JVt(h,u,e,r,s);h++;continue}if(a.OQ()&&a.vQ()!==e.J1()){const t=this.YVt(u,s);this.XVt(t,u,r,s),h++;continue}this.XVt(a.kH(),u,r,s)}else{const t=this.YVt(o,s);this.XVt(t,o,r,s)}h++}}qVt(t,s,e,i){const r=s.Sq();for(const t of s.J1().children())t&&!t.NH()&&(r.qH(t),r.$Vt(t.kK()),yM.delete(t.kK()));this.pVt&&(this.pVt=[]),this.mVt&&(this.mVt=new WeakMap),Object.assign({},i,{assignZIndex:!1});for(const s of t){const t=this.YVt(s,i);this.XVt(t,s,e,i),this.pVt.push(t.J1()),this.mVt.set(t.J1(),this.pVt.length-1)}s.wdt().vVt()}HVt(t,s,e){const i=t.yY();return this.KVt(s,i)===e.J1().EUt(i).length}JVt(t,s,e,i,r){const n=e.J1().GQ(t);if(!n)return;const h=n.kH();h&&(i.has(h)||(h.VVt(s.offsets),this.WVt(n,s,r)),i.add(h))}UVt(t){const s={};return s.DQ=t.includes("x"),s.kQ=t.includes("y"),s.BQ=t.includes("w"),s.UQ=t.includes("h"),s.WQ=t.includes("a"),s.jQ=t.includes("z"),s.KQ=t.includes("d"),s.qQ=t.includes("o"),s.YQ=t.includes("v"),s}ZVt(t){return gM.Ke(t.oci)?t.oci:t[1]}YVt(t,s){if(!gM.Ke(t.oci))return;const e=this.RC,i=e.Sq();let r;const n=!s.hasOwnProperty("createHierarchy")||s.createHierarchy;if(r=t.data?i.F7(t.data,e.BH(),!1,0,0,!1,n):i.GY(i.M7(t.oci),e.BH(),0,0,n),!r)return;const h=this.jVt(t,i);h&&r.CC(h);const o=r.kH(),a=!!s?.GFt;return o.BH()._Y(r,!0,a),o}zVt(t,s,e,i){if(this.NVt(s)&&!i?.GFt){const i=this.NVt(s);i!==t&&e.qH(i)}e.$Vt(s),e.s$t(s,t)}XVt(t,s,e,i,r=!0){const n=this.RC,h=n.RQ(t,this.UVt(s.f));h&&r?(e.has(t)||(t.VVt(s.offsets),this.WVt(t.J1(),s,i)),e.add(t)):h&&(yM.set(t.J1().kK(),t.J1()),this.zVt(t.J1(),s.uid,n.Sq(),i)),this.vVt()}WVt(t,s,e){let i=this.jVt(s,this.RC.Sq());if(!i)return;const r=!e.hasOwnProperty("clearChildren")||e.clearChildren,n=!e.hasOwnProperty("assignZIndex")||e.assignZIndex,h=t.Sq();if(yM.set(t.kK(),t),i=JSON.parse(JSON.stringify(i)),r&&t.kK()!==i.uid){for(const s of t.children())s&&!s.NH()&&(h.qH(s),h.$Vt(s.kK()),yM.delete(s.kK()));if(i.w?.sgi&&i.w.sgi.c?.length)for(const s of i.w.sgi.c){const i=Object.assign({},e,{clearChildren:!1,createHierarchy:!1}),r=this.YVt(s,i);yM.set(r.J1().kK(),r.J1()),t.RQ(r.J1(),this.UVt(s.f)),r.VVt(s.offsets),this.WVt(r.J1(),s,i)}}const o=i.w?.zi,a=i.w?.l;i.w=null,t.CC(i),e?.GFt||(gM.Ke(o)&&n&&t.kH().z7(o),gM.Ke(a)&&t.rVt(a)),this.zVt(t,i.uid,h,e)}KVt(t,s){return t.filter(t=>t.yY().Rc()===s.Rc()).length}jVt(t,s){if(gM.Ke(t.instIndex)){const e=s.M7(t.oci).B$t();return e?e[t.instIndex]:null}return gM.hi(t.inst)?JSON.parse(t.inst):t.inst?t.inst:void 0}static LVt(t){let s=t.kH().BH().R7(t.kK());if(!s)return null;s=JSON.parse(JSON.stringify(s));const e=[];for(const s of[...t.xit()]){const t=s.kH();e.push([t.yH().s9(),t.BH().Mz(),s.kK(),gM.Tit.Cit(t),s.yY().DK()?1:0,t.$H(),gM.Tit.LVt(s)])}return gM.Ci(s[0][14])?s[0][14][1]=e:(s[0][14]=[],s[0][14][0]=gM.Tit.QVt(),s[0][14][1]=e,s[0][14][2]=t.kH().$H()),s}static Cit(t){let s=0;return s|=Number(t.XQ())<<8,s|=Number(t.JQ())<<7,s|=Number(t.HQ())<<6,s|=Number(t.ZQ())<<5,s|=Number(t.zQ())<<4,s|=Number(t.VQ())<<3,s|=Number(t.$Q())<<2,s|=Number(t.NQ())<<1,s|=0|Number(t.LQ()),s}static QVt(t){let s=0;return s|=256,s|=128,s|=64,s|=32,s|=16,s|=8,s|=4,s|=2,s|=1,511}static tWt(){yM.clear()}}}{const SM=self.Gs,wM=self.ls,vM=wM.Ss,bM=wM.ws,xM=SM.Hr(SM.Rect),CM=SM.Hr(SM.Pl),TM=SM.Hr(SM.Event,"bboxchange",!1),MM=SM.Hr(SM.To,0,0,0,0),IM=SM.Hr(SM.lu),GM=SM.Hr(SM.To,1,1,1,1),_M=SM.Hr(SM.Rect,0,0,-1,-1),PM=SM.Hr(SM.Rect,0,0,-1,-1),RM=new Set(["absolute","relative"]),AM=[];let EM=!0;const OM=1,FM=2,DM=4,LM=8,kM=16,NM=32,BM=64,$M=128,UM=256,VM=512,WM=1024,zM=2048,jM=4096,HM=8192,qM=16384,JM=32768,YM=1<<22,XM=1<<23,KM=12647936,ZM=65536,QM=1<<17,tI=1<<18,sI=1<<19,eI=1<<20,iI=1<<21,rI=1<<24,nI=26,hI=31<<26,oI=new WeakMap,aI=new WeakMap;SM.eUt=class extends SM.zr{constructor(t,s){super(),this.fe=t,this.Ybt=t.yY(),this.Bc=t.Sq(),this.sWt=s,this.Ybt.E$t(this,null,s),this.eWt=-1,this.iWt=-1,this.HD=196635,this.Ybt.tY().FJ()&&(this.HD|=128),this.Ra=NaN,this.Aa=NaN,this.Jx=NaN,this.rWt=NaN,this.nWt=NaN,this.fM=NaN,this._o=NaN,this.hWt=NaN,this.oWt=NaN,this.aWt=NaN,this.lWt=NaN,this.uWt=SM.Hr(SM.Rect),this.cWt=SM.Hr(SM.Pl),this.fWt=PM,this.dWt=_M,this.pWt=null,this.mWt=null,this.gWt=null,this.qx=GM,this.yWt=GM,this.SWt=null,this.wWt=null,this.fe.yY().c$t()&&(this.wWt=SM.Hr(SM.vWt,this.fe,this)),this.bWt=null,this.pVt=null,this.mVt=null,this.xWt=-1,this.CWt=null}yUt(){this.HD|=256}NH(){return!!(256&this.HD)}qr(){if(this.Ybt.E$t(this,this.sWt,null),this.SWt&&(this.Bc.Rx().Vv(this.SWt),this.SWt=null),this.pWt=null,this.mWt&&(this.mWt.TWt.qr(),this.mWt=null),this.gWt&&(this.gWt.clear(),this.gWt=null),this.e0(),this.wWt&&this.wWt.qr(),this.OQ()&&this.vQ().AQ(this),this.Cst()){const t=[...this.xit()];for(const s of t)this.AQ(s)}this.MWt(),this.IWt(),oI.delete(this),aI.delete(this),this.fe=null,this.Ybt=null,this.Bc=null,this.sWt=null}rUt(t){if(EM=!1,this.BZ(t[0],t[1]),this.mC(t[2]),this.tA(t[3],t[4]),this.fM=0,this.FJ()?this.JY(t[6]):this._o=0,MM.wa(t[7]),this.GWt(MM),this.zZ(t[8]),this.qZ(t[9]),this.Zx(t[10]),this.wWt&&this.wWt._Wt(t[12]),t[14]&&oI.set(this,{PWt:t[14][1],RWt:t[14][2]}),t[15]){const s=t[15];this.t0(s[0],s[1]);const e=this.o0(),i=s[2];for(let t=0,s=i.length;t<s;++t){const s=i[t];for(let i=0,r=s.length;i<r;++i){const r=s[i],n=e.ZC(i,t);n.uC(r[0]),n.dC(r[1]),n.mC(r[2]),n.yC(r[3]),n.wC(r[4])}}}if(t[16]){const s=t[16][0],e=t[16][1],i=!!e,r=!i,n=this.Bc.NUt();i&&n&&n.twt(this.J1(),e),r&&n&&n.twt(this.J1(),s)}EM=!0,this.AWt()}nUt(){this.Ra=0,this.Aa=0,this.Jx=0,this.rWt=0,this.nWt=0,this.fM=0,this._o=0,this.hWt=0,this.oWt=1,this.aWt=0,this.lWt=0,this.AWt()}Sq(){return this.Bc}yY(){return this.Ybt}J1(){return this.fe}EWt(){return this.zQ()?this.OWt(this.vQ().FWt()-this.bWt.PVt()):0}uC(t){if(t=+t,this.LQ()){const s=this.bWt,e=t-this.lC(),i=-this.EWt();0===i?this.Ra+=e/s.GVt():(this.Ra+=Math.cos(i)*e/s.GVt(),this.NQ()&&(this.Aa+=Math.sin(i)*e/s._Vt()))}else this.Ra=t}Hpt(t,s=!1){t=+t,s?this.Ra+=t:this.LQ()?this.uC(this.lC()+t):this.Ra+=t}lC(){if(this.LQ()){let t=this.Ra;const s=this.bWt,e=this.vQ(),i=this.EWt();return 0===i?t*=s.GVt():(t=t*s.GVt()*Math.cos(i),this.NQ()&&(t-=this.Aa*s._Vt()*Math.sin(i))),e.lC()+t}return this.Ra}dC(t){if(t=+t,this.NQ()){const s=this.bWt,e=t-this.fC(),i=-this.EWt();0===i?this.Aa+=e/s._Vt():(this.LQ()&&(this.Ra-=Math.sin(i)*e/s.GVt()),this.Aa+=Math.cos(i)*e/s._Vt())}else this.Aa=t}qpt(t,s=!1){t=+t,s?this.Aa+=t:this.NQ()?this.dC(this.fC()+t):this.Aa+=t}fC(){if(this.NQ()){let t=this.Aa;const s=this.bWt,e=this.vQ(),i=this.EWt();return 0===i?t*=s._Vt():(t=t*s._Vt()*Math.cos(i),this.LQ()&&(t+=this.Ra*s.GVt()*Math.sin(i))),e.fC()+t}return this.Aa}BZ(t,s){if(t=+t,s=+s,this.DWt()){const e=this.LQ(),i=this.NQ(),r=this.bWt,n=t-this.lC(),h=s-this.fC(),o=-this.EWt();if(0===o)e?this.Ra+=n/r.GVt():this.Ra=t,i?this.Aa+=h/r._Vt():this.Aa=s;else{const a=Math.sin(o),l=Math.cos(o);e?this.Ra+=i?(l*n-a*h)/r.GVt():l*n/r.GVt():this.Ra=t,i?this.Aa+=e?(a*n+l*h)/r._Vt():l*h/r._Vt():this.Aa=s}}else this.Ra=t,this.Aa=s}LWt(){return[this.lC(),this.fC()]}UZ(t,s){t=+t,s=+s,this.DWt()?this.BZ(this.lC()+t,this.fC()+s):(this.Ra+=t,this.Aa+=s)}$Et(t,s){return this.lC()===t&&this.fC()===s}mC(t){if(t=+t,this.HQ()&&(t-=this.vQ().pC()),this.Jx===t)return;this.Jx=t,this.kWt();const s=this.BH();0!==this.Jx&&s.V7(),s.zH(this)}kWt(){if(this.AWt(),this.Cst()){const t=this.xit();for(let s=0,e=t.length;s<e;s++){const e=t[s];e.HQ()&&e.kWt()}}}lmt(t){this.mC(this.pC()+t)}pC(){return this.HQ()?this.vQ().pC()+this.Jx:this.Jx}KZ(){return this.BH().pC()+this.pC()}Eut(){return this.J1().tY().AAt()<2&&this.J1().g0().Eut()}hy(t){if(t=+t,this.$Q()){const s=this.Cy();0===s?this.rWt=Number.EPSILON:this.rWt*=t/s}else this.rWt=t;this.NWt()}Ny(t,s){t=+t,s?this.rWt+=t:this.$Q()?this.hy(this.Cy()+t):this.rWt+=t,this.NWt()}Cy(){if(this.$Q()){const t=this.vQ(),s=t.Cy();return t.wdt().Sdt()===Number.EPSILON?(this.wdt().Sdt()+s)*this.rWt:s*this.rWt}return this.rWt}oy(t){if(t=+t,this.VQ()){const s=this.My();0===s?this.nWt=Number.EPSILON:this.nWt*=t/s}else this.nWt=t;this.NWt()}Qpt(t,s){t=+t,s?this.nWt+=t:this.VQ()?this.oy(this.My()+t):this.nWt+=t,this.NWt()}My(){if(this.VQ()){const t=this.vQ(),s=t.My();return t.wdt().Cdt()===Number.EPSILON?(this.wdt().Cdt()+s)*this.nWt:s*this.nWt}return this.nWt}tA(t,s){if(t=+t,s=+s,this.$Q()){const s=this.Cy();0===s?this.rWt=Number.EPSILON:this.rWt*=t/s}else this.rWt=t;if(this.VQ()){const t=this.My();0===t?this.nWt=Number.EPSILON:this.nWt*=s/t}else this.nWt=s;this.NWt()}Fu(){return[this.Cy(),this.My()]}Ktt(){return this.fM}BWt(t){if(t<0)throw new RangeError("invalid depth");this.fM=t}$Wt(){if(this.OQ()){const t=this.bWt;return Math.min(t.GVt(),t._Vt())}return 1}FJ(){return!!(128&this.HD)}JY(t){t=+t,this.FJ()&&(this.zQ()&&(t-=this.vQ().YY()),t=SM.Qr(t),this._o!==t&&(this._o=t,this.NWt()))}tmt(t){0!==(t=+t)&&this.FJ()&&(this._o=SM.Qr(this._o+t),this.NWt())}NWt(){if(this.HD|=262144,this.Cst()){const t=this.xit();for(let s=0,e=t.length;s<e;s++)t[s].NWt()}}YY(){return this.zQ()&&this.FJ()?this.OWt(SM.Qr(this.vQ().FWt()+this._o)):this._o}FWt(){return this.zQ()&&this.FJ()?SM.Qr(this.vQ().FWt()+this._o):this._o}OWt(t){return this.$Q()&&this.xQ().Cy()<0&&(t=SM.Qr(SM.mn(t,this.xQ().YY()+Math.PI))),this.VQ()&&this.xQ().My()<0&&(t=SM.mn(t,this.xQ().YY())),t}UWt(){const t=this.vQ();return!!(this.$Q()&&t.Cy()<0)||!!(this.VQ()&&t.My()<0)}VWt(){const t=this.vQ();return!!(this.$Q()&&t.Cy()<0&&this.VQ()&&t.My()<0)}WWt(){const t=this.HD;if(!(262144&t))return;const s=this.YY();this.hWt=Math.sin(s),this.oWt=Math.cos(s),this.HD=-262145&t}jEt(){return this.WWt(),this.hWt}zEt(){return this.WWt(),this.oWt}zZ(t){this.aWt=+t}omt(t){this.aWt+=+t}WZ(){return this.aWt}qZ(t){this.lWt=+t}amt(t){this.lWt+=+t}HZ(){return this.lWt}GWt(t){this.qx.equals(t)||(this.qx===GM?(this.qx=SM.Hr(SM.To,t),this.yWt=SM.Hr(SM.To,t),this.yWt.Zo()):t.Jo(1,1,1,1)?(this.qx=GM,this.yWt=GM):(this.qx.set(t),this.yWt.set(t),this.yWt.Zo()),this.AWt())}LO(t){if(t=SM.Zr(+t,0,1),this.JQ()){if(this.wdt().uOt()===t)return;this.wdt().IVt(t),t=this.FO()}else if(this.qx.a===t)return;this.zWt(t)}jWt(){if(!this.Cst())return;const t=this.xit();for(let s=0,e=t.length;s<e;s++){const e=t[s];e.zWt(e.FO())}}zWt(t){MM.ko(this.qx),MM.a=t,this.GWt(MM),this.jWt()}imt(t){this.JQ()?this.LO(this.wdt().uOt()+t):this.LO(this.FO()+t)}FO(){return this.JQ()?this.vQ().FO()*this.wdt().uOt():this.qx.a}oQ(t){this.qx.Ho(t)||(MM.ko(t),MM.a=this.FO(),this.GWt(MM))}kpt(t,s,e){MM.Ro(t,s,e),this.oQ(MM)}HWt(t,s,e){0===t&&0===s&&0===e||(MM.ko(this.qx),MM.r+=t,MM.g+=s,MM.b+=e,this.oQ(MM))}hQ(){return this.qx}a7(){return this.yWt}ZQ(){return!!(512&this.HD)}qWt(t){this.JL(512,t)}LQ(){return!!(1024&this.HD)}JWt(t){this.JL(1024,t)}NQ(){return!!(2048&this.HD)}DWt(){return!!(3072&this.HD)}YWt(t){this.JL(2048,t)}$Q(){return!!(4096&this.HD)}XWt(t){this.JL(4096,t)}VQ(){return!!(8192&this.HD)}KWt(t){this.JL(8192,t)}zQ(){return!!(16384&this.HD)}ZWt(t){this.JL(16384,t)}HQ(){return!!(32768&this.HD)}QWt(t){this.JL(32768,t)}JQ(){return!!(4194304&this.HD)}tzt(t){this.JL(4194304,t)}XQ(){return!!(8388608&this.HD)}szt(t){this.JL(8388608,t)}ezt(){this.HD&=-12647937}RQ(t,s){if(t===this)return!1;if(t.OQ())return!1;if(this.izt(t))return!1;if(this.rzt(t))return!1;const e=t.lC(),i=t.fC(),r=t.Cy(),n=t.My(),h=t.YY(),o=t.pC(),a=t.FO();t.nzt(this),t.JWt(s.DQ),t.YWt(s.kQ),t.XWt(s.BQ),t.KWt(s.UQ),t.ZWt(s.WQ),t.QWt(s.jQ),t.tzt(s.qQ),t.szt(s.YQ),t.qWt(s.KQ);const l=e-this.lC(),u=i-this.fC(),c=-this.YY(),f=Math.cos(c),d=Math.sin(c);if(s.DQ&&(s.WQ?t.Ra=l*f-u*d:t.Ra=l,s.BQ)){const s=this.Cy()/this.bWt.Sdt();0!==s&&(t.Ra/=s)}if(s.kQ&&(s.WQ?t.Aa=l*d+u*f:t.Aa=u,s.UQ)){const s=this.My()/this.bWt.Cdt();0!==s&&(t.Aa/=s)}if(s.BQ){const s=this.Cy();0===s||s===Number.EPSILON?(t.rWt=1,t.bWt.CVt(1)):(t.rWt=r/this.Cy(),t.bWt.CVt(t.rWt))}if(s.UQ){const s=this.My();0===s||s===Number.EPSILON?(t.nWt=1,t.bWt.MVt(1)):(t.nWt=n/this.My(),t.bWt.MVt(t.nWt))}return s.WQ&&(t._o=h-this.YY()),s.jQ&&(t.Jx=o-this.pC()),s.qQ&&t.bWt.IVt(a),s.YQ&&t.OX(this.DX()),this.hzt(t),this.NZ(),this.jWt(),!0}AQ(t){if(t.vQ()!==this)return;const s=t.lC(),e=t.fC(),i=t.Cy(),r=t.My(),n=t.YY(),h=t.pC(),o=t.FO();t.nzt(null),t.ezt(),t.BZ(s,e),t.tA(i,r),t.JY(n),t.mC(h),t.LO(o),this.ozt(t),this.NZ()}azt(){return this.xWt}lzt(){this.uzt();const t=[...this.children()];for(const s of t)this.AQ(s);const s=this.vQ();s&&s.AQ(this),this.ezt()}uzt(){if(this.czt(),!this.pVt){const t=[...this.children()];t.length&&(this.pVt=[],this.mVt=new WeakMap);let s=0;for(const e of t){const t=e.J1();this.pVt.push(t),this.mVt.set(t,s),s++}}const t=this.vQ();t&&t.uzt()}czt(){if(-1!==this.xWt)return;const t=[...this.CQ()];this.xWt=t.length;for(const s of t)s.czt();const s=[...this.children()];for(const t of s)t.czt()}IWt(){this.pVt&&(this.pVt.length=0),this.pVt=null,this.mVt=null;const t=this.vQ();t&&t.IWt(),this.xWt=-1}OQ(){return null!==this.vQ()}vQ(){const t=this.bWt;return null!==t?t.vQ():null}xQ(){let t=this;for(;t.OQ();)t=t.vQ();return t}*CQ(){let t=this.vQ();for(;t;)yield t,t=t.vQ()}AUt(t){return this.xit().includes(t)}Cst(){const t=this.bWt;return null!==t&&t.Cst()}xit(){const t=this.bWt;return null!==t?t.xit():AM}children(){return this.xit()}*_Q(){for(const t of this.children())yield t,yield*t._Q()}MQ(){return this.xit().length}UOt(){return[...this._Q()].length}GQ(t){const s=this.xit();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}DUt(t){if(!t)return NaN;const s=this.xit();if(!s)return NaN;for(let e=0;e<s.length;e++)if(t===s[e])return e;return NaN}fzt(t){this.bWt||(this.bWt=SM.Hr(SM.Tit,this)),t&&this.bWt.wVt(t)}wdt(){return this.bWt}MWt(){this.bWt&&(this.bWt.qr(),this.bWt=null)}nzt(t){t?(t.fzt(null),this.fzt(t)):(this.bWt&&this.bWt.wVt(null),this.Cst()||this.MWt())}rzt(t){if(!this.OQ())return!1;const s=this.vQ();return s===t||s.rzt(t)}izt(t){if(this.AUt(t))return!0;for(const s of this.xit())if(s.izt(t))return!0;return!1}hzt(t){this.bWt.xit().push(t)}ozt(t){const s=this.bWt.xit(),e=s.indexOf(t);-1!==e&&s.splice(e,1),0!==s.length||this.OQ()||this.MWt(),t.Cst()||t.MWt()}kUt(){const t=oI.get(this);return t?t.PWt:null}dzt(){const t=oI.get(this);return t?t.RWt:NaN}xst(){const t=aI.get(this);return SM.Ke(t)?t:NaN}pzt(t){aI.set(this,t)}mzt(){this.JL(524288,!0),this.AWt()}AWt(){if(!EM)return;const t=this.Bc.Rx();let s;this.SWt&&t.Vv(this.SWt),s=524288&this.HD?t.Tv()||"<point>":t.bv()||"<default>",this.SWt=t.Nv(s,this.uK(),this.yWt,this.pC(),this.gzt()?1:0,0)}rst(){return this.SWt}n9(){return this.qx===GM}Zx(t){if((t|=0)<0||t>31)throw new RangeError("invalid blend mode");this.uK()!==t&&(this.HD=-2080374785&this.HD|t<<26,this.AWt())}uK(){return(2080374784&this.HD)>>26}WH(t,s){const e=s&&this.sWt!==t;e&&this.B7(),this.Ybt.E$t(this,this.sWt,t),this.sWt=t,e&&this.yzt(),0!==this.pC()&&this.sWt.V7()}BH(){return this.sWt}yH(){return this.BH().yH()}z7(t){this.eWt=0|t}$H(){return this.sWt.K9(),this.eWt}stt(t){this.iWt=0|t}B2(){return this.sWt.Q9(),this.iWt}N6(){return this.eWt}JL(t,s){s?this.HD|=t:this.HD&=~t}DX(){return!!(1&this.HD)}OX(t){if(this.JL(1,t),this.Cst())for(const s of this.xit())s.XQ()&&s.OX(t)}yQ(){return!!(8&this.HD)}SQ(t){t=!!t,this.yQ()!==t&&(this.JL(8,t),t?this.NZ():this.Szt())}wzt(t,s){this.JL(32,t),this.gWt&&this.gWt.clear();for(const t of s)this.gWt||(this.gWt=new Set),this.gWt.add(t.toLowerCase());this.gWt&&0===this.gWt.size&&(this.gWt=null)}vzt(t){const s=t.bUt()?t.zUt():t.kAt().get("solidTags"),e=!!(32&this.HD),i=this.gWt;if(!s||!i)return!e;for(const t of i)if(s.has(t))return e;return!e}NZ(){if(this.HD|=65554,this.Ybt.P$t(!0),this.Bc.jH(),this.sWt.b7()&&(this.QZ(this.uWt,this.cWt,!0),this.HD&=-3,this.yzt()),4&this.HD&&this.fe.wf().dispatchEvent(TM),null!==this.bWt){const t=this.bWt.xit();for(let s=0,e=t.length;s<e;++s)t[s].NZ()}}QZ(t,s,e){const i=this.lC(),r=this.fC(),n=this.Cy(),h=this.My(),o=this.YY();t.ja(i-this.aWt*n,r-this.lWt*h,n,h),e&&this.h0()&&this.bzt(t),0===o?s.Xl(t):(t.offset(-i,-r),s.Zl(t,this.jEt(),this.zEt()),s.offset(i,r),s.Ql(t)),t.normalize()}xzt(){const t=this.HD;2&t&&(this.QZ(this.uWt,this.cWt,!0),this.HD=-3&t)}tQ(){return this.xzt(),this.uWt}eQ(){return this.xzt(),this.cWt}Czt(t){const s=this.lC(),e=this.fC(),i=Math.round(s)-s,r=Math.round(e)-e;return 0===i&&0===r?t:(CM.S(t),CM.offset(i,r),CM)}Tzt(t){this.uWt.S(t),this.cWt.Xl(this.uWt),this.HD&=-3,this.A$t(),this.yzt()}Mzt(t){this.JL(4,t)}Izt(){return!!(4&this.HD)}Htt(t,s,e){return s&&0!==this.Ktt()?this.Ytt(this.BH().Jtt()):0===this.pC()||e?t.Cl(this.tQ()):this.Gzt()}Gzt(){const t=this.BH(),s=this.KZ();return!(s>=t.x9())&&(t.v9(s,xM),xM.Cl(this.tQ()))}Ytt(t){const s=this.tQ(),e=s.Qa(),i=s.sl(),r=s.tl(),n=s.el(),h=this.KZ(),o=h+this.Ktt();return t.ow(e,r,h,i,n,o)}rQ(){const t=this.BH();if(t.F9())return this.Ytt(t.Jtt());{const s=t.yH();return this.Htt(t.pK(),s.jtt(),s.TX())}}sst(t){this.JL(1048576,t)}tst(t){this.JL(2097152,t)}_zt(){return!!(1048576&this.HD)}Pzt(){return!!(2097152&this.HD)}Rzt(t){(t=!!t)!==this.gzt()&&(this.JL(16777216,t),this.AWt())}gzt(){return!!(16777216&this.HD)}Azt(t){this.pWt=t,this.Ezt(),this.h0()&&(this.CWt.Ozt=null)}Fzt(){return this.pWt}Dzt(){return null!==this.pWt||this.h0()}Lzt(){return this.kzt(this.Cy(),this.My(),this.YY(),this.jEt(),this.zEt())}Nzt(t,s,e){let i=0,r=1;return 0!==e&&(i=Math.sin(e),r=Math.cos(e)),this.kzt(t,s,e,i,r)}kzt(t,s,e,i,r){let n=this.mWt;null===n&&(n={TWt:SM.Hr(SM.lu),width:NaN,height:NaN,angle:NaN},this.mWt=n);const h=n.TWt;if(n.width===t&&n.height===s&&n.angle===e)return h;const o=this.pWt;if(this.h0()){const e=this.WZ(),n=this.HZ(),a=this.o0();let l=this.CWt.Ozt;l||(o?(IM.S(o),IM.offset(e,n)):IM.yu(),l=a.aT(IM),this.CWt.Ozt=l),a.lT(l,h),h.offset(-e,-n),h.bu(t,s,i,r)}else o?(h.S(o),h.bu(t,s,i,r)):h.vu(this.eQ(),-this.lC(),-this.fC());return n.width=t,n.height=s,n.angle=e,h}Ezt(){this.Bzt(!0);const t=this.mWt;null!==t&&(t.width=NaN)}t0(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.J1().tY().VJ())throw new Error("object does not support mesh");this.e0(),this.CWt={$zt:SM.Hr(SM.JS.GC,t,s),Uzt:SM.Hr(SM.JS.GC,t,s),Ozt:null}}h0(){return null!==this.CWt}o0(){if(!this.h0())throw new Error("no mesh");return this.CWt.$zt}Vzt(){if(!this.h0())throw new Error("no mesh");return this.CWt.Uzt}Wzt(t){this.JL(65536,t)}zzt(){return!!(65536&this.HD)}Bzt(t){this.JL(131072,t)}jzt(){return!!(131072&this.HD)}bzt(t){const s=this.CWt.$zt,e=Math.min(s.HC(),0),i=Math.min(s.qC(),0),r=Math.max(s.JC(),1),n=Math.max(s.YC(),1),h=t.width(),o=t.height();t.offsetLeft(e*h),t.offsetTop(i*o),t.ll((r-1)*h),t.ul((n-1)*o),this.fM=s.XC()}e0(){this.CWt&&(this.CWt.$zt.qr(),this.CWt.Uzt.qr(),this.CWt=null,this.Ezt())}r0(t,s,e){t=Math.floor(t),s=Math.floor(s);const i=e.mode||"absolute";if(!RM.has(i))throw new Error("invalid mode");const r="relative"===i;let n=e.x,h=e.y;const o=e.WN;let a="number"==typeof e.a0?e.a0:r?0:-1,l="number"==typeof e.l0?e.l0:r?0:-1;if(!this.h0())return!1;const u=this.o0(),c=u.ZC(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.pC()!==o&&(c.mC(o),f=!0),r&&(n+=t/(u.UC()-1),h+=s/(u.VC()-1)),-1!==a||r?(r&&(a+=t/(u.UC()-1)),a=SM.Zr(a,0,1)):a=c.gC(),-1!==l||r?(r&&(l+=s/(u.VC()-1)),l=SM.Zr(l,0,1)):l=c.SC(),c.lC()===n&&c.fC()===h&&c.gC()===a&&c.SC()===l?f:(c.uC(n),c.dC(h),c.yC(a),c.wC(l),this.Ezt(),!0)}gUt(){return this.fe.gUt()}wQ(t,s){return!!this.tQ().Ml(t,s)&&!!this.eQ().Ml(t,s)&&(this.gUt()?this.fe.g0().nkt(t,s):!this.Dzt()||this.Lzt().Ml(t-this.lC(),s-this.fC()))}Hzt(){return!!(16&this.HD)}A$t(){if(!this.Hzt()||!this.yQ()||this.NH())return;const t=this.tQ(),s=this.Ybt._$t(),e=this.fWt;if(xM.set(s.e8(t.Qa()),s.i8(t.tl()),s.e8(t.sl()),s.i8(t.el())),e.equals(xM))return;const i=this.fe;e===PM?(s.r8(i,null,xM),this.fWt=SM.Hr(SM.Rect,xM)):(s.r8(i,e,xM),e.S(xM)),this.HD&=-17}qzt(){this.HD|=16}Szt(){const t=this.fWt;t!==PM&&(this.Ybt._$t().r8(this.fe,t,null),this.fWt=PM)}yzt(){const t=this.BH();if(!t.b7()||this.NH())return;const s=t.o9(),e=this.tQ(),i=this.dWt;if(xM.set(s.e8(e.Qa()),s.i8(e.tl()),s.e8(e.sl()),s.i8(e.el())),i.equals(xM))return;const r=this.fe;i===_M?(s.r8(r,null,xM),this.dWt=SM.Hr(SM.Rect,xM)):(s.r8(r,i,xM),i.S(xM)),t.a9()}B7(){const t=this.dWt;t!==_M&&(this.BH().o9().r8(this.fe,t,null),this.dWt=_M)}Z9(){return this.dWt}lQ(){if(this.NH())return;const t=this.fe,s=this.sWt,e=s.VH();e.length&&e.at(-1)===t||(s.N7(t,!1),s.D7(t,!1),this.Bc.jH())}cQ(){if(this.NH())return;const t=this.fe,s=this.sWt,e=s.VH();e.length&&e[0]===t||(s.N7(t,!1),s.k7(t,!1),this.Bc.jH())}dQ(t){if(this.NH())return;const s=this.fe,e=this.sWt;if(e.yH()!==t.yH())throw new Error("layer from different layout");t!==e&&(e.N7(s,!0),this.WH(t),t.D7(s,!0),this.Bc.jH())}mQ(t,s){if(this.NH())return;const e=this.fe;let i=!1;const r=this.sWt;if(t.kK()===e.kK())return;const n=t.kH();if(!n)throw new Error("expected world instance");const h=n.BH();r.Mz()!==h.Mz()&&(r.N7(e,!0),this.WH(h),h.D7(e,!0),i=!0);const o=h.ntt(e,t,!!s);(i||o)&&this.Bc.jH()}LZ(){return this.wWt}Jzt(t){this.JL(64,t)}ftt(){return!!(64&this.HD)}wst(t,s=null){const e={x:this.lC(),y:this.fC(),w:this.Cy(),h:this.My(),l:this.BH().s9(),zi:this.$H()};0!==this.pC()&&(e.ze=this.pC()),0!==this.YY()&&(e.a=this.FWt()),this.n9()||(e.c=this.qx.toJSON()),.5!==this.WZ()&&(e.oX=this.WZ()),.5!==this.HZ()&&(e.oY=this.HZ()),0!==this.uK()&&(e.bm=this.uK()),this.DX()||(e.v=this.DX()),this.yQ()||(e.ce=this.yQ()),this.Izt()&&(e.be=this.Izt()),this.wWt&&(e.fx=this.wWt.wst());const i=!!(32&this.HD);return i&&(e.sfi=i),this.gWt&&(e.sft=[...this.gWt].join(" ")),this.bWt&&"visual-state"!==t&&(e.sgi=this.bWt.wst(t,s),oI.has(this)&&(e.sgcd=oI.get(this).PWt,e.sgzid=oI.get(this).RWt)),this.h0()&&(e.mesh=this.o0().xC()),e}DVt(){return{x:this.Ra,y:this.Aa,z:this.Jx,w:this.rWt,h:this.nWt,a:this._o,sgi:this.wdt()?this.wdt().RVt():null}}VVt(t){t&&(this.Ra=t.x,this.Aa=t.y,this.Jx=t.z,this.rWt=t.w,this.nWt=t.h,this._o=t.a,t.sgi&&this.wdt()&&this.wdt().vst(t.sgi),this.NWt(),this.NZ())}U$t(){this.IWt(),this.lzt(),this.fzt(null),this.bWt&&this.bWt.kVt(this.pVt,this.mVt)}Mrt(t){"visual-state"!==t&&this.lzt()}Grt(t,s="full",e=null){if(t.hasOwnProperty("sgi")&&"visual-state"!==s){if(this.NH())return;this.bWt.Grt(t.sgi,e)}}iVt(t,s="full",e=null){if("visual-state"!==s)if(this.NH())this.IWt();else{if(t.hasOwnProperty("sgi"))this.bWt.kVt(null,null,t.sgi,e);else if(e?.GFt&&this.pVt)for(const t of this.pVt)t.NH()||this.Bc.qH(t);this.IWt(),this.NZ()}}vst(t,s,e=null){if(EM=!1,this.uC(t.x),this.dC(t.y),this.hy(t.w),this.oy(t.h),this.z7(t.zi),this.mC(t.hasOwnProperty("ze")?t.ze:0),this.JY(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?MM.wa(t.c):t.hasOwnProperty("o")?(MM.ko(this.qx),MM.a=t.o):MM.Po(1,1,1,1),this.GWt(MM),this.zZ(t.hasOwnProperty("oX")?t.oX:.5),this.qZ(t.hasOwnProperty("oY")?t.oY:.5),this.Zx(t.hasOwnProperty("bm")?t.bm:0),this.OX(!t.hasOwnProperty("v")||t.v),this.SQ(!t.hasOwnProperty("ce")||t.ce),this.Mzt(!!t.hasOwnProperty("be")&&t.be),this.wzt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.wWt&&t.hasOwnProperty("fx")&&this.wWt.vst(t.fx),t.hasOwnProperty("sgi")&&"visual-state"!==s){this.fzt(null);const s=this.bWt,e=t.sgi;s.vst(e),s.kVt(this.pVt,this.mVt),this.Yzt(t.sgcd,t.sgzid)}if(t.hasOwnProperty("mesh")){const s=t.mesh;this.t0(s.cols,s.rows),this.o0().CC(s)}else this.e0();this.NZ(),EM=!0,this.AWt(),"visual-state"!==s&&this.Bc.Xzt(this.J1(),t)}Yzt(t,s){t&&SM.Ke(s)&&oI.set(this,{PWt:t,RWt:s})}}}{const lI=self.Gs;lI.vBt=class extends lI.zr{constructor(t,s){super();const e=t.Sq(),i=e.sPt(s[1]);e.Kzt().Jkt(i),this.Bc=e,this.Ybt=t,this.Okt=lI.TJ.A0(i),this.SLt=null,this.Zzt=null,this.KNt=i.Instance,this.x8=s[2],this.Xr=s[0],this.LPt=this.Bc.MTt(s[3]);const r=this.Okt.AAt();if(r<2&&(this.SLt=lI.Hr(i.kBt,this),!(this.SLt instanceof lI.Ekt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(lI.TJ.tLt(this,r),r>=2){const t=i.kBt??globalThis.i3;if(this.Zzt=new t,!(this.Zzt instanceof globalThis.i3))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.Zzt=new globalThis.P0;lI.TJ.sLt(r),this.YDt()}static KM(t,s){return lI.Hr(lI.vBt,t,s)}qr(){this.Bc=null,this.Okt=null,this.SLt&&(this.SLt.qr(),this.SLt=null),this.KNt=null}IEt(){return this.SLt}YDt(){this.SLt?this.SLt.YDt():this.Zzt&&this.Zzt.d2()}Sq(){return this.Bc}yY(){return this.Ybt}C0(){return this.Okt}r$t(){return this.KNt}Rc(){return this.Xr}s9(){return this.x8}M0(){return this.Zzt}MTt(){return this.LPt}}}{const uI=self.Gs,cI=self.b0;uI.Q$t=class extends uI.zr{constructor(t){super(),this.Bc=t.runtime,this.mRt=t.T0,this.Okt=this.mRt.C0(),this.fe=t.G0,this.US=t.index,this.H$t=null,this.q$t=null,this.Okt.D7(this.fe)}qr(){this.q$t&&(this.q$t.RK(),this.q$t=null),this.Okt.N7(this.fe),this.H$t&&(this.H$t.qr(),this.H$t=null),this.Bc=null,this.mRt=null,this.Okt=null,this.fe=null}t$t(t){if(this.H$t)throw new Error("already got sdk instance");if(this.C0().AAt()<2){if(this.H$t=uI.Hr(this.mRt.r$t(),this,t),!(this.H$t instanceof uI.Fkt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const s=this.C0().XDt();this.QDt(s.Instance,t)}}g0(){return this.H$t??this.q$t}_0(){return this.fe}Sq(){return this.Bc}I0(){return this.mRt}C0(){return this.Okt}Cpt(){return this.US}kkt(){this.H$t?this.H$t.kkt():this.q$t.h3()}Ukt(t,s){this.H$t&&this.H$t.Ukt(t,s)}eVt(){return this.H$t?this.H$t.BLt():this.q$t.TZ()}xC(t="full"){return this.H$t?this.H$t.xC(t):this.q$t.MZ(t)}CC(t,s="full"){if(this.H$t)return this.H$t.CC(t,s);this.q$t.IZ(t,s)}static Qzt(t,s,e){const i=globalThis.r3;let r,n;r=s instanceof i?t.uX(s):s.Lkt(),n=e instanceof i?t.uX(e):e.Lkt();const h=r._0(),o=n._0(),a=h.yY().Mz(),l=o.yY().Mz();if(a!==l)return a-l;const u=h.WUt(),c=o.WUt();return u!==c?u-c:r.Cpt()-n.Cpt()}QDt(t,s){const e=cI,i=t??this.H$t.XDt(),r=i||e,n=this.C0().AAt();if(uI.TJ.tLt(this,n),uI.TJ.Ykt(s),this.q$t=new r,uI.TJ.Xkt(),uI.TJ.sLt(n),i&&!(this.q$t instanceof e))throw new TypeError(`script interface class '${i.name}' does not extend the right base class '${e.name}'`);return this.q$t}bLt(){return this.q$t||this.QDt()}WLt(){return!!this.q$t}}}{const fI=self.Gs;fI.h7=class extends fI.zr{constructor(t,s){super(),this.RC=t,this.tjt=[],this.sjt=[],this.ejt=new Map,this.ijt=[],this.rjt=[],this.njt=new Set,this.wx=!0;for(const t of s){const s=fI.Hr(fI.hjt,this,t,this.tjt.length);this.tjt.push(s),this.ejt.set(s.Rc().toLowerCase(),s),t.length>=3&&this.ijt.push(this.ojt(s,t[2]))}this.Sq().ajt(this)}qr(){this.Sq().ljt(this);for(const t of this.rjt)t.qr();fI.bh(this.rjt),fI.bh(this.tjt),fI.bh(this.sjt),this.ejt.clear(),fI.bh(this.ijt),this.RC=null}ujt(t){this.njt.add(t)}cjt(t){this.njt.delete(t)}fjt(t){t.pv()&&(this.rjt=this.tjt.map(t=>{const s=t.QI();return s.S$()>0?fI.Hr(fI.JS.g$,s):null}),this.djt());for(const s of this.njt)s.fjt(t)}ZBt(t){if(t.length){this.tjt=t.concat(this.tjt);for(const s of t)this.ejt.set(s.Rc().toLowerCase(),s);for(let t=0,s=this.tjt.length;t<s;++t)this.tjt[t].X7(t)}}ojt(t,s){t.pjt(s[0]);const e=s.slice(1);for(let t=0,s=e.length;t<s;++t){const s=e[t];if(Array.isArray(s)){const i=fI.Hr(fI.To);i.wa(s),e[t]=i}}return e}WC(){return this.RC}Sq(){return this.RC.Sq()}F0(){fI.bh(this.sjt);let t=!0;for(const s of this.tjt)s.zIt()&&(this.sjt.push(s),s.QI().Lx()||(t=!1));this.wx=t}WY(){return this.tjt}f$t(){return this.tjt.length>0}sdt(t){return this.ejt.get(t.toLowerCase())||null}mjt(t){if((t=Math.floor(+t))<0||t>=this.tjt.length)throw new RangeError("invalid effect type index");return this.tjt[t]}E0(t){return this.mjt(t).zIt()}O0(t,s){this.mjt(t).pjt(s)}h9(){return this.sjt}ftt(){return this.sjt.length>0}Lx(){return this.wx}tdt(t){return this.ijt[t]}u7(t){return t<this.rjt.length?this.rjt[t]:this.ijt[t]}D0(t,s){if(t<0||t>=this.ijt.length)return null;const e=this.ijt[t];return s<0||s>=e.length?null:e[s]}L0(t,s,e){if(t<0||t>=this.ijt.length)return!1;const i=this.ijt[t];if(s<0||s>=i.length)return!1;const r=i[s];if(r instanceof fI.To){if(r.Ho(e))return!1;r.ko(e)}else{if(r===e)return!1;i[s]=e}return t<this.rjt.length&&this.rjt[t].C$(s,e),!0}djt(){const t=this.ijt,s=this.rjt;for(let e=0,i=Math.min(t.length,s.length);e<i;++e){const i=s[e],r=t[e];for(let t=0,s=r.length;t<s;++t)i.C$(t,r[t])}}static gjt(t){return t&&t instanceof fI.To?{t:"color",v:t.toJSON()}:t}static yjt(t){if(null===t)return NaN;if("object"==typeof t){if("color"===t.t){const s=fI.Hr(fI.To);return s.wa(t.v),s}throw new Error("invalid effect parameter type")}return t}static Sjt(t){return t.map(fI.h7.gjt)}static wjt(t){return t.map(fI.h7.yjt)}xC(){return this.tjt.map(t=>({name:t.Rc(),active:t.zIt(),params:fI.h7.Sjt(this.ijt[t.Mz()])}))}CC(t){for(const s of t){const t=this.sdt(s.name);t&&(t.pjt(s.active),this.ijt[t.Mz()]=fI.h7.wjt(s.params))}this.F0(),this.djt()}}}{const dI=self.Gs;dI.hjt=class extends dI.zr{constructor(t,s,e){super(),this.n7=t,this.Uc=s[0],this.Xr=s[1],this.US=e,this.zx=null,this.Bf=!0}qr(){this.n7=null,this.zx=null}KBt(t){const s=dI.Hr(dI.hjt,t,[this.Uc,this.Xr],-1);return s.zx=this.zx,s.Bf=this.Bf,s}fjt(t){const s=t.vv(this.Uc);if(!s)throw new Error("failed to find shader program '"+this.Uc+"'");this.zx=s}VY(){return this.n7}Rc(){return this.Xr}X7(t){this.US=t}Mz(){return this.US}WC(){return this.n7.WC()}Sq(){return this.n7.Sq()}pjt(t){this.Bf=!!t}zIt(){return this.Bf}QI(){return this.zx}vjt(){const t=[];for(let s=0,e=this.zx.tG();s<e;++s){const e=this.zx.sG(s);if("float"===e||"percent"===e)t.push(0);else{if("color"!==e)throw new TypeError("unknown effect parameter type");t.push(dI.Hr(dI.To,1,1,1,1))}}return t}}}{const pI=self.Gs;pI.vWt=class extends pI.zr{constructor(t,s){super(),this.fe=t,this.bjt=s,this.n7=t.yY().VY(),this.xjt=!0,this.f7=!0,this.Cjt=!1,this.Tjt=!1,this.Mjt=!1,this.Ijt=!1,this.bz=pI.Hr(pI.JS.SV,t.Sq()._H().o7(),{oV:(t,s)=>{const e=s.dz(),i=e.kH();t.Qx(i.a7()),t.Kv(i.KZ()),e.nT(t),t.Kv(0)},aV:t=>{const s=t.tkt(),[e,i]=t.QLt();return{hz:s,oz:e,az:i}},lV:t=>this.u7(t)}),this.Gjt=[],this.sjt=[],this.wx=!0,this.ijt=[],this.rjt=[],this.fjt(t.Sq().Rx());for(let t=0,s=this.n7.WY().length;t<s;++t)this.Gjt.push(!0);this.F0(),this.n7.ujt(this)}qr(){this.n7.cjt(this);for(const t of this.rjt)t&&t.qr();pI.bh(this.rjt),this.bz.qr(),this.bz=null,pI.bh(this.Gjt),pI.bh(this.sjt),pI.bh(this.ijt),this.fe=null,this.n7=null}fjt(t){t.pv()&&(this.rjt=this.n7.WY().map(t=>{const s=t.QI();return s.S$()>0?pI.Hr(pI.JS.g$,s):null}))}_Wt(t){let s=0;for(const e of t)this.ijt.push(this.ojt(s,e)),++s;this.djt(),this.F0()}ojt(t,s){this.Gjt[t]=s[0];const e=s.slice(1);for(let t=0,s=e.length;t<s;++t){const s=e[t];if(Array.isArray(s)){const i=pI.Hr(pI.To);i.wa(s),e[t]=i}}return e}hUt(){for(const t of this.n7.WY())this.ijt.push(t.vjt());this.djt()}WC(){return this.RC}VY(){return this.n7}Tz(){return this.r9(),this.bz}Sq(){return this.fe.Sq()}F0(){pI.bh(this.sjt);const t=this.bjt,s=this.n7.WY(),e=this.sjt,i=this.Gjt;let r=!0;for(let t=0,n=s.length;t<n;++t)if(i[t]){const i=s[t];e.push(i),i.QI().Lx()||(r=!1)}this.wx=r,t.Jzt(!!e.length),this.xjt=!0}r9(){const t=this.fe,s=this.bjt,e=s.n9(),i=t.tY().NJ(),r=0!==s.YY()||0!==s.BH().YY()||s.Cy()<0||s.My()<0,n=t.ikt(),h=t.Dx();(this.xjt||e!==this.f7||i!==this.Cjt||r!==this.Tjt||n!==this.Mjt||h!==this.Ijt||this.bz.uW())&&(this.bz.cW(this.sjt.map(t=>t.QI()),{cV:this.sjt.map(t=>t.Mz()),fV:!e||h,pV:i,mV:n,gV:r}),this.xjt=!1,this.f7=e,this.Cjt=i,this.Tjt=r,this.Mjt=n,this.Ijt=h)}h9(){return this.sjt}tdt(t){return this.ijt[t]}u7(t){return t<this.rjt.length?this.rjt[t]:this.ijt[t]}D0(t,s){if(t<0||t>=this.ijt.length)return null;const e=this.ijt[t];return s<0||s>=e.length?null:e[s]}L0(t,s,e){if(t<0||t>=this.ijt.length)return!1;const i=this.ijt[t];if(s<0||s>=i.length)return!1;const r=i[s];if(r instanceof pI.To){if(r.Ho(e))return!1;r.ko(e)}else{if(r===e)return!1;i[s]=e}return t<this.rjt.length&&this.rjt[t].C$(s,e),!0}djt(){const t=this.ijt,s=this.rjt;for(let e=0,i=s.length;e<i;++e){const i=s[e],r=t[e];for(let t=0,s=r.length;t<s;++t)i.C$(t,r[t])}}Lx(){return this.wx}_jt(){return this.sjt.some(t=>t.QI().Bx())}E0(t){return this.Gjt[t]}O0(t,s){this.Gjt[t]=!!s}WY(){return this.n7.WY()}wst(){return this.n7.WY().map(t=>({name:t.Rc(),active:this.Gjt[t.Mz()],params:pI.h7.Sjt(this.ijt[t.Mz()])}))}vst(t){for(const s of t){const t=this.n7.sdt(s.name);t&&(this.Gjt[t.Mz()]=s.active,this.ijt[t.Mz()]=pI.h7.wjt(s.params))}this.F0(),this.djt()}}}{const mI=self.Gs,gI=[],yI=[],SI=[],wI=mI.Hr(mI.lu),vI=mI.Hr(mI.lu),bI=mI.Hr(mI.Pl),xI=mI.Hr(mI.Rect),CI=mI.Hr(mI.Rect);let TI=null,MI=null,II=null;mI.Pjt=class extends mI.zr{constructor(t){super(),this.Bc=t,this.Rjt=0,this.Ajt=0,this.Ejt=[],this.Ojt=0,this.Fjt=0,this.Djt=0,this.Ljt=0,this.kjt=new self.Nq(this)}qr(){this.Bc=null}Sq(){return this.Bc}Az(){return this.kjt}Njt(){this.Fjt=this.Ojt,this.Ojt=0,this.Ljt=this.Djt,this.Djt=0}Bjt(){return this.Fjt}$jt(){return this.Ljt}Ujt(t,s){const e=t.kH(),i=s.kH();e&&i&&e.yQ()&&i.yQ()&&this.Ejt.push([t,s])}_Ot(t,s,e){for(const[i,r]of this.Ejt){let n=null;if(t===i)n=r;else{if(t!==r)continue;n=i}n.kOt(s)&&(e.includes(n)||e.push(n))}}POt(t,s){if(!this.Ejt.length)return!1;for(const[e,i]of this.Ejt)if(t===e&&s===i||t===i&&s===e)return!0;return!1}Vjt(){mI.bh(this.Ejt)}$q(t,s){if(!t||!s||t===s)return!1;const e=t.kH(),i=s.kH();if(!e.yQ()||!i.yQ())return!1;this.Ojt++;const r=e.BH(),n=i.BH();return r.q9(n)?this.Wjt(e,i):this.zjt(e,i)}Wjt(t,s){if(!t.tQ().Cl(s.tQ()))return!1;if(this.Djt++,!t.eQ().su(s.eQ()))return!1;if(t.gUt()&&s.gUt())return!1;if(t.gUt())return this.jjt(t,s);if(s.gUt())return this.jjt(s,t);if(!t.Dzt()&&!s.Dzt())return!0;const e=t.Lzt(),i=s.Lzt();return e.xu(i,s.lC()-t.lC(),s.fC()-t.fC())}zjt(t,s){const e=t.gUt(),i=s.gUt();if(e&&!i)return this.Hjt(t,s);if(i&&!e)return this.Hjt(s,t);if(i||e)return!1;{const e=t.BH(),i=s.BH();wI.S(t.Lzt()),vI.S(s.Lzt());const r=wI.pu();for(let s=0,i=r.length;s<i;s+=2){const i=s+1,n=r[s],h=r[i],[o,a]=e.SK(n+t.lC(),h+t.fC());r[s]=o,r[i]=a}const n=vI.pu();for(let t=0,e=n.length;t<e;t+=2){const e=t+1,r=n[t],h=n[e],[o,a]=i.SK(r+s.lC(),h+s.fC());n[t]=o,n[e]=a}return wI.Su(),vI.Su(),this.Djt++,wI.xu(vI,0,0)}}Hjt(t,s){const e=t.BH(),i=s.BH();TI||(TI=mI.Hr(mI.lu)),MI||(MI=mI.Hr(mI.Rect)),II||(II=mI.Hr(mI.Pl));const r=s.lC(),n=s.fC(),[h,o]=i.SK(r,n),[a,l]=e.gK(h,o),u=a-r,c=l-n;if(MI.S(s.tQ()),MI.offset(u,c),!t.tQ().Cl(MI))return!1;if(II.S(s.eQ()),II.offset(u,c),this.Djt++,!t.eQ().su(II))return!1;TI.S(s.Lzt());const f=TI.pu();for(let t=0,s=f.length;t<s;t+=2){const s=t+1;f[t]+=u,f[s]+=c}return TI.Su(),this.jjt(t,s,a,l,TI,MI,II)}jjt(t,s,e,i,r,n,h){const o=void 0!==n?n:s.tQ(),a=t.lC(),l=t.fC(),u=t.J1().g0(),c=void 0!==e?e:s.lC(),f=void 0!==i?i:s.fC(),d=s.Dzt(),p=void 0!==h?h:s.eQ(),m=yI;u.qjt(o,m);for(let t=0,e=m.length;t<e;++t){const e=m[t],i=e.Jjt();if(this.Ojt++,o.Tl(i,a,l)&&(bI.Xl(i),bI.offset(a,l),bI.su(p)))if(d){const t=void 0!==r?r:s.Lzt();let n=c,h=f;void 0!==r&&(n=s.lC(),h=s.fC());const o=e.Yjt();if(o){if(this.Djt++,o.xu(t,n-(a+i.Qa()),h-(l+i.tl())))return mI.bh(m),!0}else if(wI.vu(bI,0,0),wI.xu(t,n,h))return mI.bh(m),!0}else{const t=e.Yjt();if(!t)return mI.bh(m),!0;if(wI.vu(p,0,0),t.xu(wI,-(a+i.Qa()),-(l+i.tl())))return mI.bh(m),!0}}return mI.bh(m),!1}Xjt(t,s,e){const i=t.fY(),r=this.Bc.dj();if(!r)throw new Error("cannot call outside event");const n=r.Mxt(),h=new mI.Kjt;if(i.axt()){e||(i.mxt(!1),mI.bh(i.gxt())),n&&mI.bh(i.yxt());for(const r of t.cY()){const t=r.kH(),o=t.BH();let a=!1;if(h.kX(o)&&t.rQ()&&(a=s.some(([s,e])=>{const[i,r]=h.gK(o,s,e,t.KZ());return t.wQ(i,r)})),a){if(e)return!1;i.dxt(r)}else n&&i.pxt(r)}}else{let t,o=!1;n&&!r.d_t(this.Bc.gTt())?this.Bc.AEt()&&!i.yxt().length&&i.gxt().length?t=i.gxt():(t=i.yxt(),o=!0):t=i.gxt();let a=0;for(let r=0,l=t.length;r<l;++r){const l=t[r],u=l.kH(),c=u.BH();let f=!1;if(h.kX(c)&&u.rQ()&&(f=s.some(([t,s])=>{const[e,i]=h.gK(c,t,s,u.KZ());return u.wQ(e,i)})),f){if(e)return!1;o?i.dxt(l):t[a++]=l}else o?t[a++]=l:n&&i.pxt(l)}e||(t.length=a)}return t.q_t(),h.qr(),!!e||i.lxt()}Zjt(t,s){if(!t)return!0;for(const e of s.O$t())if(!t.q9(e))return!1;return!0}REt(t,s,e,i){if(s.mY())for(const r of s.NY())this.Zjt(t,r)?(r.R$t(),r._$t().n8(e,i)):mI.Fr(i,r.cY());else this.Zjt(t,s)?(s.R$t(),s._$t().n8(e,i)):mI.Fr(i,s.cY())}Xq(t,s,e,i){for(const r of s)this.REt(t,r,e,i)}Qjt(t,s,e){const i=this.Bc.Zkt();i&&this.Xq(t,i.Qrt(),s,e)}tHt(t,s,e){const i=this.Bc.Qkt();i&&this.Xq(t,i.Qrt(),s,e)}vzt(t,s){return t.wUt()&&(!s||s.kH().vzt(t))}Wq(t){const s=t.kH();this.Qjt(s.BH(),s.tQ(),gI);for(const s of gI)if(this.vzt(s,t)&&this.$q(t,s))return mI.bh(gI),s;return mI.bh(gI),null}sHt(t,s){this.Qjt(null,t,gI);for(const e of gI)if(this.vzt(e,s)&&this.eHt(t,e))return mI.bh(gI),e;return mI.bh(gI),null}iHt(t,s){let e=null;s&&(e=SI,mI.bh(e));const i=t.kH();this.tHt(i.BH(),i.tQ(),gI);for(const i of gI)if(i.CUt()&&this.$q(t,i)){if(!s)return mI.bh(gI),i;e.push(i)}return mI.bh(gI),e}rHt(t,s,e,i,r){i=i||50;const n=t.kH(),h=n.lC(),o=n.fC();for(let a=0;a<i;++a)if(n.BZ(h+s*a,o+e*a),n.NZ(),!this.$q(t,r))return!0;return n.BZ(h,o),n.NZ(),!1}nHt(t,s,e,i,r,n){i=i||50;const h=t.kH(),o=h.lC(),a=h.fC();let l=null,u=null;for(let c=0;c<i;++c)if(h.BZ(o+s*c,a+e*c),h.NZ(),!this.$q(t,l))if(l=this.Wq(t),l)u=l;else if(r&&(l=n?this.$q(t,n)?n:null:this.iHt(t),l&&(u=l)),!l)return u&&this.hHt(t,s,e,u,16,!0),!0;return h.BZ(o,a),h.NZ(),!1}oHt(t,s,e,i){i=i||50;const r=t.kH(),n=r.lC(),h=r.fC();let o=null,a=null;for(let l=0;l<i;++l)for(let i=0;i<2;++i){const u=2*i-1;if(r.BZ(n+s*l*u,h+e*l*u),r.NZ(),!this.$q(t,o)){if(o=this.Wq(t),!o)return a&&this.hHt(t,s*u,e*u,a,16,!0),!0;a=o}}return r.BZ(n,h),r.NZ(),!1}hHt(t,s,e,i,r,n){let h=2,o=!1,a=!1;const l=t.kH();let u=l.lC(),c=l.fC();for(;h<=r;){const r=1/h;h*=2,l.UZ(s*r*(o?1:-1),e*r*(o?1:-1)),l.NZ(),this.$q(t,i)||n&&this.Wq(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.lC(),c=l.fC())}a&&(l.BZ(u,c),l.NZ())}aHt(t,s=100){let e=0;const i=t.kH(),r=i.lC(),n=i.fC();let h=0,o=this.Wq(t);if(!o)return!0;for(;e<=s;){let s=0,a=0;switch(h){case 0:s=0,a=-1,e++;break;case 1:s=1,a=-1;break;case 2:s=1,a=0;break;case 3:s=1,a=1;break;case 4:s=0,a=1;break;case 5:s=-1,a=1;break;case 6:s=-1,a=0;break;case 7:s=-1,a=-1}if(h=(h+1)%8,i.BZ(Math.floor(r+s*e),Math.floor(n+a*e)),i.NZ(),!this.$q(t,o)&&(o=this.Wq(t),!o))return!0}return i.BZ(r,n),i.NZ(),!1}lHt(t,s,e,i){const r=t.kH(),n=r.lC(),h=r.fC(),o=Math.max(10,mI.nn(s,e,n,h)),a=mI.an(s,e,n,h),l=i||this.Wq(t);if(!l)return mI.Qr(a+Math.PI);let u=l,c=0,f=0;const d=mI.tn(5);let p;for(p=1;p<36;++p){const n=a-p*d;if(r.BZ(s+Math.cos(n)*o,e+Math.sin(n)*o),r.NZ(),!this.$q(t,u)&&(u=i?null:this.Wq(t),!u)){c=n;break}}for(36===p&&(c=mI.Qr(a+Math.PI)),u=l,p=1;p<36;++p){const n=a+p*d;if(r.BZ(s+Math.cos(n)*o,e+Math.sin(n)*o),r.NZ(),!this.$q(t,u)&&(u=i?null:this.Wq(t),!u)){f=n;break}}if(36===p&&(f=mI.Qr(a+Math.PI)),r.BZ(n,h),r.NZ(),f===c)return f;const m=mI.ln(f,c)/2;let g;g=mI.cn(f,c)?mI.Qr(c+m+Math.PI):mI.Qr(f+m);const y=Math.cos(a),S=Math.sin(a),w=Math.cos(g),v=Math.sin(g),b=y*w+S*v,x=y-2*b*w,C=S-2*b*v;return mI.an(0,0,x,C)}uHt(t,s,e,i,r){if(!r)return!1;const n=r.kH();return!!n.yQ()&&(this.Ojt++,xI.set(Math.min(t,e),Math.min(s,i),Math.max(t,e),Math.max(s,i)),!!n.tQ().Cl(xI)&&(r.gUt()?this.cHt(t,s,e,i,r,n):(this.Djt++,!!n.eQ().tu(t,s,e,i)&&(!n.Dzt()||n.Lzt().tu(n.lC(),n.fC(),t,s,e,i)))))}cHt(t,s,e,i,r,n){const h=n.lC(),o=n.fC(),a=r.g0(),l=yI;CI.set(t,s,e,i),CI.normalize(),a.qjt(CI,l);for(let r=0,n=l.length;r<n;++r){const n=l[r],a=n.Jjt();if(this.Ojt++,xI.Tl(a,h,o)&&(bI.Xl(a),bI.offset(h,o),bI.tu(t,s,e,i))){const r=n.Yjt();if(!r)return mI.bh(l),!0;if(this.Djt++,r.tu(h+a.Qa(),o+a.tl(),t,s,e,i))return mI.bh(l),!0}}return mI.bh(l),!1}eHt(t,s){if(!s)return!1;const e=s.kH();if(!e.yQ())return!1;if(this.Ojt++,!e.tQ().Cl(t))return!1;if(s.gUt())return this.fHt(t,s,e);if(this.Djt++,bI.Xl(t),!e.eQ().su(bI))return!1;if(!e.Dzt())return!0;const i=wI;i.Xl(t,e.lC(),e.fC());const r=e.Lzt();return i.xu(r,0,0)}fHt(t,s,e){const i=e.lC(),r=e.fC(),n=s.g0(),h=yI;n.qjt(t,h);for(let s=0,e=h.length;s<e;++s){const e=h[s],n=e.Jjt();if(this.Ojt++,t.Tl(n,i,r)){const s=e.Yjt();if(!s)return mI.bh(h),!0;if(this.Djt++,wI.Xl(t,0,0),s.xu(wI,-(i+n.Qa()),-(r+n.tl())))return mI.bh(h),!0}}return mI.bh(h),!1}dHt(t,s){if(!t)return;const e=t.kH();e.yQ()&&(this.Ojt++,e.tQ().Cl(s.rect)&&(t.gUt()?this.pHt(t,e,s):(this.Djt++,e.Dzt()?s.mHt(t,e.lC(),e.fC(),e.Lzt()):s.gHt(t,e.eQ()))))}pHt(t,s,e){const i=s.lC(),r=s.fC(),n=yI;t.g0().qjt(e.rect,n);for(let h=0,o=n.length;h<o;h++){const o=n[h],a=o.Jjt();if(this.Ojt++,e.rect.Tl(a,i,r)){const n=o.Yjt();this.Djt++,n?e.mHt(t,i+a.Qa(),r+a.tl(),n):e.yHt(t,s.lC(),s.fC(),a)}}mI.bh(n)}jq(t,s){if(t===this.Rjt&&s===this.Ajt)return;this.Rjt=t,this.Ajt=s;const e=this.Bc.J7();for(const i of e)if(i.RJ()){for(const t of i.uY())t.kH().Szt();i._$t().SHt(t,s),i.P$t();for(const t of i.uY()){const s=t.kH();s.qzt(),s.A$t()}}}qq(){return[this.Rjt,this.Ajt]}wHt(t,s){this.Rjt=t,this.Ajt=s}}}{const GI=self.Gs;GI.oBt=class extends GI.zr{constructor(t,s){super(),this.Z6=t,this.Q6=s,this.t8=GI.Hr(GI._u)}qr(){this.t8.qr(),this.t8=null}SHt(t,s){if(!this.t8.Au())throw new Error("grid not empty");this.Z6=t,this.Q6=s}s8(t,s,e){let i=this.t8.Hs(t,s);return i||(e?(i=GI.Hr(GI.vHt,this,t,s),this.t8.Set(t,s,i),i):null)}e8(t){const s=Math.floor(t/this.Z6);return isFinite(s)?s:0}i8(t){const s=Math.floor(t/this.Q6);return isFinite(s)?s:0}r8(t,s,e){if(s)for(let i=s.Qa(),r=s.sl();i<=r;++i)for(let r=s.tl(),n=s.el();r<=n;++r){if(e&&e.Ml(i,r))continue;const s=this.s8(i,r,!1);s&&(s.Zf(t),s.Au()&&this.t8.Eu(i,r))}if(e)for(let i=e.Qa(),r=e.sl();i<=r;++i)for(let r=e.tl(),n=e.el();r<=n;++r)s&&s.Ml(i,r)||this.s8(i,r,!0).J6(t)}n8(t,s){let e=this.e8(t.Qa());const i=this.i8(t.tl()),r=this.e8(t.sl()),n=this.i8(t.el());if(isFinite(r)&&isFinite(n))for(;e<=r;++e)for(let t=i;t<=n;++t){const i=this.s8(e,t,!1);i&&i.X6(s)}}}}{const _I=self.Gs;_I.vHt=class extends _I.zr{constructor(t,s,e){super(),this.U6=t,this.Ra=s,this.Aa=e,this.V6=_I.Hr(_I.Lu)}qr(){this.V6.qr(),this.V6=null,this.U6=null}Au(){return this.V6.Au()}J6(t){this.V6.$u(t)}Zf(t){this.V6.Eu(t)}X6(t){_I.Fr(t,this.V6.Uu())}}}{const PI=self.Gs,RI=1e-6,AI=2;PI.bHt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new PI.Rect,this.xHt=2,this.CHt=null,this.THt=0,this.MHt=0,this.IHt=0,this.GHt=0,this._Ht=0,this.bt=0,this.PHt=1,this.RHt=0,this.AHt=1,this.EHt=0}OHt(){return this.xHt<1.000001}$f(){this.xHt=2}Set(t,s,e,i){return this.x1=t,this.y1=s,this.x2=e,this.y2=i,this.dx=e-t,this.dy=i-s,this.rect.set(t,s,e,i),this.rect.normalize(),this.xHt=2,this.CHt=null,this.THt=0,this.MHt=0,this.IHt=0,this.GHt=0,this._Ht=0,this.bt=0,this.PHt=1,this.RHt=0,this.AHt=1,this.EHt=0,this}FHt(){if(!1===this.OHt())return;const t=this.dx*this.xHt,s=this.dy*this.xHt,e=PI.en(t,s),i=t/e,r=s/e;this.bt=e-RI,this.GHt=this.x1+i*this.bt,this._Ht=this.y1+r*this.bt,this.THt=Math.atan2(this.IHt,this.MHt)+Math.PI/2,this.PHt=Math.cos(this.THt),this.RHt=Math.sin(this.THt);const n=i*this.PHt+r*this.RHt;if(this.AHt=i-2*this.PHt*n,this.EHt=r-2*this.RHt*n,n>0){const t=Math.PI;this.THt=PI.Qr(this.THt+t),this.PHt=-this.PHt,this.RHt=-this.RHt}}DHt(t,s,e,i,r){const n=PI.Jn(this.x1,this.y1,this.x2,this.y2,s,e,i,r);n>=0&&n<this.xHt&&(this.xHt=n,this.CHt=t.kK(),this.MHt=s-i,this.IHt=e-r)}yHt(t,s,e,i){const r=s+i.Qa(),n=s+i.sl(),h=e+i.tl(),o=e+i.el();this.DHt(t,r,h,n,h),this.DHt(t,n,h,n,o),this.DHt(t,n,o,r,o),this.DHt(t,r,o,r,h)}gHt(t,s){const e=s.Bn(),i=s.$n(),r=s.Un(),n=s.Vn(),h=s.Wn(),o=s.zn(),a=s.jn(),l=s.Hn();this.DHt(t,e,i,r,n),this.DHt(t,r,n,h,o),this.DHt(t,h,o,a,l),this.DHt(t,a,l,e,i)}mHt(t,s,e,i){const r=i.pu();for(let i=0,n=r.length;i<n;i+=2){const h=(i+2)%n,o=r[i]+s,a=r[i+1]+e,l=r[h]+s,u=r[h+1]+e;this.DHt(t,o,a,l,u)}}}}{const EI=self.Gs;EI.Kjt=class{constructor(){this.LHt=new Map}qr(){for(const t of this.LHt.values())t.kHt.Ru();this.LHt.clear()}NHt(t){let s=this.LHt.get(t);return void 0===s&&(s={LX:null,kHt:new EI._u},this.LHt.set(t,s)),s}kX(t){const s=this.NHt(t);return null===s.LX&&(s.LX=t.WX()),s.LX}gK(t,s,e,i){if(0!==i)return t.gK(s,e,i);const r=this.NHt(t);let n=r.kHt.Hs(s,e);return void 0===n&&(n=t.gK(s,e,i),r.kHt.Set(s,e,n)),n}}}{const OI=self.Gs,FI=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),DI=new Set(["high","low"]),LI=self.ls,kI=LI.ds,NI=LI.Ss,BI=kI.create(),$I=300,UI=200,VI=120,WI=8,zI=OI.Hr(OI.Pl),jI=OI.Hr(OI.Rect),HI=3e3,qI=200,JI=300;OI.BHt=class extends OI.zr{constructor(t){super(),this.Bc=t,this.$Ht=[],this.UHt=!1,this.VHt=null,this.WHt=null,this.zHt=null,this.jHt="high-performance",this.HHt=!1,this.qHt="auto",this.JHt=0,this.YHt=0,this.XHt="",this.KHt=0,this.ZHt=0,this.QHt=0,this.tqt=0,this.sqt=0,this.eqt=0,this.gw="normalized",this.iqt=0,this.rqt=1,this.nqt=1e4,this.qw=!0,this.hqt=0,this.WV=0,this.zV=0,this.oqt="letterbox-scale",this.aqt="letterbox-scale",this.lqt=0,this.uqt=0,this.cqt=kI.create(),this.fqt="high",this.dqt=this.fqt,this.pqt=!1,this.mqt=[],this.gqt=new Set,this.yqt=self.C3_Shaders,this.Sqt=OI.Hr(OI.JS.qU,{WU:()=>[this._tt(),this.Ptt()],zU:()=>this.wqt(),jU:t=>this.vqt(t),getTime:()=>this.Sq().Fj(),HU:()=>this.Sq().jH()}),this.bqt=0,this.xqt=0,this.Cqt=NaN,this.Tqt=null,this.Mqt=new Map,this.Iqt=NaN,this.Gqt=new Map,this._qt="",this.Pqt=1,this.Rqt=OI.Hr(OI.Rect),this.Aqt="",this.Eqt=null,this.Oqt=null,this.Fqt=0,this.Dqt=0,this.Lqt=-1,this.kqt=0,this.Nqt=t=>this.kqt=t.progress,this.Bqt=null,this.$qt={Uqt:null,Vqt:null,Wqt:null},this.zqt=0,this.jqt=0,this.Hqt=0,this.qqt="fade-in",this.Jqt=null,this.Yqt=new Promise(t=>this.Jqt=t)}Xqt(t){this.jHt=t}Kqt(t){this.UHt=!!t}Zqt(t){this.gw=t}Qqt(){return this.gw}tJt(t){this.iqt=t}sJt(t,s){this.rqt=t,this.nqt=s}eJt(t){this.HHt=!!t}iJt(t){this.qHt=t}async co(t){let s=t.canvas;this.$Ht.push({canvas:s,rJt:null}),this.Bc.fZ("runtime","window-resize",t=>this.nJt(t)),this.Bc.fZ("runtime","fullscreenchange",t=>this.hJt(t)),this.Bc.fZ("runtime","fullscreenerror",t=>this.oJt(t)),s.addEventListener("webglcontextlost",t=>this.aJt(t)),s.addEventListener("webglcontextrestored",t=>this.lJt(t)),this.pqt=!!t.isFullscreen,this.XHt=t.cssDisplayMode;const e=navigator.gpu&&this.UHt;let i=!1;if(e)try{await this.uJt(!0)}catch(t){this.cJt("WebGPU",t),this.WHt=null}if(!this.Rx())try{await this.fJt(!0)}catch(t){this.cJt("WebGL",t),this.VHt=null}if(this.Rx()||(i=!0),!this.Rx()&&e)try{await this.uJt(!1)}catch(t){this.cJt("WebGPU",t),this.WHt=null}if(!this.Rx())try{await this.fJt(!1)}catch(t){this.cJt("WebGL",t),this.VHt=null}const r=this.Rx();if(!r)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");r.qb(i),this.WHt&&(this.WHt.HL=()=>this.dJt(),this.WHt.qL=()=>this.pJt()),"normalized"===this.gw?r.uv():(r.cv(),r.av(this.iqt)),this.tA(t.windowInnerWidth,t.windowInnerHeight,!0),await this.fjt()}cJt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async uJt(t){const s={lw:this.rqt,uw:this.nqt};let e=!0;"no"===this.qHt?e=!1:"auto"===this.qHt&&(e=OI.Zs.he);let i="nearest";this.Bc.mJt()&&"nearest"!==this.Bc.PU()&&(i="bilinear");const r={powerPreference:this.jHt,depth:this.Bc.O9(),failIfMajorPerformanceCaveat:t,YF:this.Bc.ktt(),qF:this.Bc.mJt(),JF:i,uE:this.Bc.gJt(),XF:e};this.WHt=OI.Hr(OI.JS.KF,s),await this.WHt.KM(this.$Ht[0].canvas,r)}async fJt(t){const s={alpha:!0,powerPreference:this.jHt,lE:"xbox-uwp-webview2"!==this.Bc.eJ(),depth:this.Bc.O9(),uE:this.Bc.gJt(),failIfMajorPerformanceCaveat:t,lw:this.rqt,uw:this.nqt};this.HHt&&(s.cE=1),this.VHt=OI.Hr(OI.JS.pE,this.$Ht[0].canvas,s),await this.VHt.Kw()}async yJt(){if(this.yqt){const t=[];for(const[s,e]of Object.entries(this.yqt)){e.src=e.SJt;const i=OI.JS.CD.vG(this.WHt.rI());t.push(this.WHt.vO(Object.assign({JM:i,name:s},e)))}await Promise.all(t)}}async wJt(){if(this.yqt){const t=[];for(const[s,e]of Object.entries(this.yqt)){let i;if(e.vJt&&this.VHt.kT()>=2)e.src=e.vJt,i=OI.JS.HM.bG();else{if(!e.bJt)throw new Error(`shader '${s}' does not support WebGL 1`);e.src=e.bJt,i=OI.JS.HM.vG()}t.push(this.VHt.vO(Object.assign({JM:i,name:s},e)))}await Promise.all(t),this.VHt.bO(),this.VHt.xv()}this.VHt.LF()&&(this.Tqt=OI.Hr(OI.JS.QA,this.VHt))}async fjt(){this.WHt?await this.yJt():this.VHt&&await this.wJt();const t=this.Rx();t.jb(this.qw),t.LF()&&(this.Cqt=0);for(const s of this.Bc.xJt()){for(const e of s.WY())e.fjt(t);s.fjt(t),s.F0()}this.zHt=new self.H3(this.Bc,t)}qr(){this.Bc=null,this.VHt=null,this.$Ht.length=0}Jz(){return this.Bc.Jz()}nJt(t){const s=this.Bc;if(s.CJt())return;const e=t.devicePixelRatio;this.Jz()&&(self.devicePixelRatio=e),s.TJt(e),this.pqt=!!t.isFullscreen,this.XHt=t.cssDisplayMode,this.tA(t.innerWidth,t.innerHeight),s.jH();const i=new OI.Event("window-resize");i.data=t,s.wf().Pf(i);const r=new OI.Event("resize");r.MJt=this.fJ(),r.IJt=this.pJ(),r.GJt=this.gJ(),r._Jt=this.SJ(),s.e6(r),this.Bc.DH()?.ust(),s.yZ()&&(s.eMt()||self.SZ.PJt())&&s.bW()}hJt(t){this.pqt=!!t.isFullscreen,this.tA(t.innerWidth,t.innerHeight,!0),this.Bc.jH()}oJt(t){this.pqt=!!t.isFullscreen,this.tA(t.innerWidth,t.innerHeight,!0),this.Bc.jH()}tA(t,s,e=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.JHt===t&&this.YHt===s&&!e)return;this.JHt=t,this.YHt=s;const i=this.RJt();"letterbox-scale"===i?this.AJt(t,s):"letterbox-integer-scale"===i?this.EJt(t,s):"off"===i?this.OJt(t,s):this.FJt(t,s),this.DJt(i);for(const{canvas:t}of this.$Ht)t.width=this.QHt,t.height=this.tqt;this.Bc.Vc("canvas","update-size",{marginLeft:this.sqt,marginTop:this.eqt,styleWidth:this.KHt,styleHeight:this.ZHt,displayScale:this.H2()});const r=this.Rx();r.tA(this.QHt,this.tqt,!0);for(const t of this.mqt)r.RF(t);OI.bh(this.mqt),this.LJt();const n=this.Bc.gH();n.Zit(),n.Qit()}LJt(){this.Rx().dv(this.cqt,this._tt()/this.Ptt())}Rtt(){return this.cqt}AJt(t,s){const e=this.Bc.wJ(),i=this.Bc.Xz(),r=this.Bc.Zz(),n=i/r;if(t/s>n){const e=s*n;this.KHt=Math.round(e),this.ZHt=s,this.sqt=Math.floor((t-this.KHt)/2),this.eqt=0}else{const e=t/n;this.KHt=t,this.ZHt=Math.round(e),this.sqt=0,this.eqt=Math.floor((s-this.ZHt)/2)}this.QHt=Math.round(this.KHt*e),this.tqt=Math.round(this.ZHt*e),this.Bc.kJt(i,r)}EJt(t,s){const e=this.Bc.wJ();1!==e&&(t+=1,s+=1);const i=this.Bc.Xz(),r=this.Bc.Zz(),n=i/r;let h;h=t/s>n?s*n*e/i:t/n*e/r,h>1?h=Math.floor(h):h<1&&(h=1/Math.ceil(1/h)),this.QHt=Math.round(i*h),this.tqt=Math.round(r*h),this.KHt=this.QHt/e,this.ZHt=this.tqt/e,this.sqt=Math.max(Math.floor((t-this.KHt)/2),0),this.eqt=Math.max(Math.floor((s-this.ZHt)/2),0),this.Bc.kJt(i,r)}FJt(t,s){const e=this.Bc.wJ();this.KHt=t,this.ZHt=s,this.QHt=Math.round(this.KHt*e),this.tqt=Math.round(this.ZHt*e),this.sqt=0,this.eqt=0;const i=this.H2();this.Bc.kJt(this.KHt/i,this.ZHt/i)}OJt(t,s){const e=this.Bc.wJ();this.KHt=this.Bc.C9(),this.ZHt=this.Bc.T9(),this.QHt=Math.round(this.KHt*e),this.tqt=Math.round(this.ZHt*e),this.NJt()?(this.sqt=Math.floor((t-this.KHt)/2),this.eqt=Math.floor((s-this.ZHt)/2)):(this.sqt=0,this.eqt=0),this.Bc.kJt(this.Bc.C9(),this.Bc.T9())}DJt(t){if("high"===this.fqt)this.WV=this.QHt,this.zV=this.tqt,this.dqt="high";else{let s,e;if("off"===this.RJt()?(s=this.Bc.C9(),e=this.Bc.T9()):(s=this.Bc.Xz(),e=this.Bc.Zz()),this.QHt<s||this.tqt<e)this.WV=this.QHt,this.zV=this.tqt,this.dqt="high";else if(this.WV=s,this.zV=e,this.dqt="low","scale-inner"===t){const t=s/e,i=this.JHt/this.YHt;i<t?this.WV=this.zV*i:i>t&&(this.zV=this.WV/i)}else if("scale-outer"===t){const t=s/e,i=this.JHt/this.YHt;i>t?this.WV=this.zV*i:i<t&&(this.zV=this.WV/i)}}}Sq(){return this.Bc}BJt(){return this.$Ht[0].canvas}o7(){return this.Sqt}NJt(){return this.pqt}$Jt(){return this.XHt}UJt(t){if(!FI.has(t))throw new Error("invalid fullscreen mode");this.oqt=t;const s=this.Bc.gH();s.Zit(),s.Qit()}j2(){return this.oqt}VJt(t){if(!FI.has(t))throw new Error("invalid fullscreen mode");this.aqt=t;const s=this.Bc.gH();s.Zit(),s.Qit()}WJt(){return this.aqt}RJt(){return this.NJt()?this.WJt():this.j2()}zJt(t){if(!DI.has(t))throw new Error("invalid fullscreen scaling quality");this.fqt=t,this.Bc.gH().Zit()}jJt(){return this.fqt}Ntt(){return this.dqt}static HJt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}R2(){return this.JHt}A2(){return this.YHt}_tt(){return this.WV}Ptt(){return this.zV}jb(t){this.qw=!!t}qJt(){return this.qw}JJt(t){this.hqt=t}E6(){return this.hqt}YJt(){return this.Rx().RA()}aJt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.mqt=[],this.gqt.clear(),this.Sqt.tC(),this.VHt.tC(),this.Bc.$et()}dJt(){console.log("[Construct] WebGPU device lost"),this.mqt=[],this.gqt.clear(),this.Sqt.tC(),this.Bc.$et()}async lJt(t){await this.VHt.sC(),await this.fjt(),await this.Bc.XJt(),console.log("[Construct] WebGL context restored")}async pJt(){await this.fjt(),await this.Bc.XJt(),console.log("[Construct] WebGPU device restored")}KJt(){return this.VHt}ZJt(){return this.WHt}Rx(){return this.WHt||this.VHt}GH(){return this.zHt}rJ(){let t="";return t=this.Bc.ZJt()?"webgpu":"webgl"+this.Bc.KJt().kT(),this.Bc.Rx().Jb()&&(t+="-software"),t}hJ(){return this.Bc.ZJt()?this.Bc.ZJt().WB():this.Bc.KJt().WF()}TK(){return"low"===this.dqt?1/this.Bc.wJ():this.H2()}H2(){const t=this.RJt();if("off"===t||"crop"===t)return 1;const s=this.Bc.Xz(),e=this.Bc.Zz(),i=s/e,r=this.QHt/this.tqt;return"scale-inner"!==t&&r>i||"scale-inner"===t&&r<i?this.ZHt/e:this.KHt/s}ast(){return"low"===this.Ntt()?1:this.H2()}hst(){return"low"===this.Ntt()?1:this.Bc.wJ()}QJt(t,s){this.lqt=t,this.uqt=s}U4(t,s,e,i=!0){s=s||this.WV,e=e||this.zV;const r=s/2+this.lqt,n=e/2+this.uqt;if(i){let i=this.Rtt();s===this.WV&&e===this.zV||(t.dv(BI,s/e),i=BI),t.CO(i)}const h=t.yv(r,n,t.Qw(e),r,n,0,e);t.PO(h)}tYt(t,s=!0){const e=this.fJ(),i=this.pJ(),r=e/2,n=i/2;s&&t.CO(this.Rtt());const h=t.yv(r,n,t.Qw(i),r,n,0,i);t.PO(h)}gJ(){return this.QHt}SJ(){return this.tqt}fJ(){return this.KHt}pJ(){return this.ZHt}aJ(){return this.sqt}uJ(){return this.eqt}Cet(){return this.$Ht.length}sYt(){return"undefined"!=typeof OffscreenCanvas&&this.BJt()instanceof OffscreenCanvas&&("Chromium"!==OI.Zs.re||OI.Zs.ie>=124)}async jet(t,s=!1){if(t<1)throw new Error("invalid HTML layer count");if(this.$Ht.length===t)return;const e={count:t,layersDomState:this.Bc.gH().dH().t9().filter(t=>t.$X()).map(t=>t.itt()),immediate:s,marginLeft:this.sqt,marginTop:this.eqt,styleWidth:this.KHt,styleHeight:this.ZHt};let i;if(i=this.Jz()?await this.Bc.QH("canvas","set-html-layer-count",e):self.c3_runtimeInterface._OnSetHTMLLayerCount(e),t<this.$Ht.length)this.$Ht.length=t;else for(const t of i.addedCanvases){t.width=this.QHt,t.height=this.tqt;const s=this.sYt()?"bitmaprenderer":"2d",e=t.getContext(s);if(!e)throw new Error(`failed to acquire '${s}' canvas context`);this.$Ht.push({canvas:t,rJt:e})}this.Bc.jH()}Oit(t){if(t>=this.$Ht.length)return;const s=this.BJt(),e=this.$Ht[t].rJt;this.sYt()?e.transferFromImageBitmap(s.transferToImageBitmap()):(e.globalCompositeOperation="copy",e.drawImage(s,0,0))}Btt(t){t.depth=this.Bc.O9();const s=this.mqt,e=s.findIndex(s=>s.$M(t));let i;return-1!==e?(i=s[e],s.splice(e,1)):i=this.Rx().MF(t),this.gqt.add(i),i}l7(t){if(!this.gqt.has(t))throw new Error("render target not in use");this.gqt.delete(t),this.mqt.push(t)}wqt(){const t={yT:this.Bc.PU()};return"low"===this.Ntt()&&(t.width=this._tt(),t.height=this.Ptt()),this.Btt(t)}vqt(t){this.l7(t)}*eYt(){for(const t of this.Bc.gH().Yit())for(const s of t.hX()){const t=this.Mqt.get(s);t&&(yield t)}}Ftt(t){if(!this.Rx().LF())return null;let s=this.Mqt.get(t);return s||(s={kZ:t,name:t.Rc(),iYt:OI.Hr(OI.JS.QA,this.VHt),rYt:0,nYt:0,hYt:0},this.Mqt.set(t,s)),s.iYt}oYt(){const t=this.Rx();if(t.LF()&&0===this.xqt){this.xqt=t.Wb(),this.Iqt=NaN;for(const t of this.eYt())t.rYt=NaN}}aYt(){this.VHt&&this.VHt.LF()&&this.lYt(),this.WHt&&this.WHt.LF()&&this.uYt()}lYt(){if(isNaN(this.Iqt)&&(this.Iqt=this.Tqt.hE(this.bqt,this.xqt),!isNaN(this.Iqt))){if(this.Bc.yZ())for(const t of this.eYt())if(t.rYt=t.iYt.hE(this.bqt,this.xqt),isNaN(t.rYt))return;if(this.Tqt.oE(this.xqt),this.Cqt=Math.min(this.Iqt,1),this.Bc.yZ()){const t=new Map;for(const s of this.eYt())s.iYt.oE(this.xqt),s.nYt=Math.min(s.rYt,1),t.set(s.kZ,s.nYt);for(const s of this.eYt()){const e=s.kZ,i=(t.get(e)||0)-e.PX().reduce((s,e)=>s+(t.get(e)||0),0);s.hYt=OI.Zr(i,0,1)}const s=this.Bc.dH(),e=this.Cqt-s.t9().reduce((s,e)=>s+(t.get(e)||0),0);self.SZ.cYt(OI.Zr(e,0,1),this.Cqt,[...this.eYt()])}this.bqt=this.xqt,this.xqt=0}}fYt(){return this.Tqt}uYt(){if(0===this.xqt)return;for(let t=this.bqt;t<this.xqt;++t){const s=this.Gqt.get(t);if(s&&!s.VA())return}const t=this.Bc.dH(),s=OI.Co(t.met()+1,0);let e=0;for(let t=this.bqt;t<this.xqt;++t){const i=this.Gqt.get(t);if(!i)continue;const r=i.WA();let n=BigInt(0),h=BigInt(0);const o=BigInt(0);for(let t=0,e=Math.min(s.length,r.length/2);t<e;++t){const e=r[2*t],i=r[2*t+1];e!==o&&(n===o||e<n)&&(n=e),i>h&&(h=i);const a=Number(i-e)/1e9;s[t]+=a}e+=Number(h-n)/1e9}if(this.Cqt=OI.Zr(e,0,1),this.Bc.yZ()){const e=t.hX(),i=new Map;for(let t=0,r=Math.min(e.length,s.length-1);t<r;++t){const r=s[t+1];i.set(e[t],r)}const r=[],n=new Map;for(const[t,s]of i){const e=[...t.AX()].reduce((t,s)=>t+(i.get(s)||0),0);n.set(t,e),r.push({name:t.Rc(),hYt:OI.Zr(s,0,1),nYt:OI.Zr(e,0,1)})}const h=this.Cqt-t.t9().reduce((t,s)=>t+(n.get(s)||0),0);self.SZ.cYt(OI.Zr(h,0,1),this.Cqt,r)}for(let t=this.bqt;t<this.xqt;++t)this.Gqt.delete(t);this.bqt=this.xqt,this.xqt=0}dYt(t){this.Gqt.set(this.WHt.Wb(),t)}Yj(){return this.Cqt}nq(t,s,e,i,r,n){return this._qt=t,this.Pqt=s,this.Rqt.ja(e,i,r,n),this.Eqt||(this.Eqt=new Promise(t=>{this.Oqt=t})),this.Eqt}pYt(){if(!this._qt)return;let t=this.BJt();const s=this.Rqt,e=OI.Zr(Math.floor(s.Qa()),0,t.width),i=OI.Zr(Math.floor(s.tl()),0,t.height);let r=s.width();r=0===r?t.width-e:OI.Zr(Math.floor(r),0,t.width-e);let n=s.height();if(n=0===n?t.height-i:OI.Zr(Math.floor(n),0,t.height-i),(0!==e||0!==i||r!==t.width||n!==t.height)&&r>0&&n>0){const s=OI.co(r,n);s.getContext("2d").drawImage(t,e,i,r,n,0,0,r,n),t=s}OI.fo(t,this._qt,this.Pqt).then(t=>{this.Aqt&&URL.revokeObjectURL(this.Aqt),this.Aqt=URL.createObjectURL(t),this.Eqt=null,this.Oqt(t)}),this._qt="",this.Pqt=1}mYt(){return this.Aqt}gYt(t){t?this.Fqt++:this.Fqt--}yYt(){return this.Fqt>0}SYt(t){const s=this.Rx();if(2===t)this.Bqt=OI.Hr(OI.JS.sx,this.Rx()),this.Bqt._R("Arial"),this.Bqt.PR(16),this.Bqt.WR("center"),this.Bqt.jR("center"),this.Bqt.tA(300,200);else if(0===t){const t=this.Bc.wYt();t&&t.R4(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.vYt("splash-images/splash-logo.svg").then(t=>{"done"===this.qqt?s.MM(t):this.$qt.Uqt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.bYt("splash-images/splash-poweredby-512.png").then(t=>{"done"===this.qqt?s.MM(t):this.$qt.Vqt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.bYt("splash-images/splash-website-512.png").then(t=>{"done"===this.qqt?s.MM(t):this.$qt.Wqt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async vYt(t){t=new URL(t,this.Bc.xYt()).toString();const s=await OI.ro(t),e=await this.Bc.CYt(s,2048,2048);return await this.Rx().TF(e,{bT:"high"})}async bYt(t){t=new URL(t,this.Bc.xYt()).toString();const s=await OI.ro(t);return await this.Rx().TF(s,{bT:"high"})}TYt(){this.Bc.Vc("runtime","hide-cordova-splash")}MYt(){this.Dqt=Date.now(),this.Bc.wf().addEventListener("loadingprogress",this.Nqt),this.Lqt=requestAnimationFrame(()=>this.IYt()),3!==this.Bc.GYt()&&this.TYt()}async _Yt(){const t=this.Rx();this.kqt=1;const s=this.Bc.GYt();4===s&&await this.Yqt,this.Jqt=null,this.Yqt=null,-1!==this.Lqt&&(cancelAnimationFrame(this.Lqt),this.Lqt=-1),this.Bc.wf().removeEventListener("loadingprogress",this.Nqt),this.Nqt=null,this.Bqt&&(this.Bqt.qr(),this.Bqt=null),this.Bc.PYt(),t.pF(),this.$qt.Uqt&&(t.MM(this.$qt.Uqt),this.$qt.Uqt=null),this.$qt.Vqt&&(t.MM(this.$qt.Vqt),this.$qt.Vqt=null),this.$qt.Wqt&&(t.MM(this.$qt.Wqt),this.$qt.Wqt=null),t.dF(0,0,0,0),t.Ub(),this.qqt="done",this.bqt=t.Wb(),3===s&&this.TYt()}IYt(){if(-1===this.Lqt)return;const t=this.Rx();t.pF(),this.Lqt=-1;const s=this.Bc.Pz().s6(),e=this.Bc.GYt();if(3!==e&&(this.tYt(t),t.dF(0,0,0,0),t.kO(),t.xv(),t.BO(null)),0===e)this.RYt(s);else if(1===e)this.AYt(s,120,0);else if(2===e)this.EYt(s);else if(3===e)OI.gh();else{if(4!==e)throw new Error("invalid loader style");this.OYt(s)}t.Ub(),this.Lqt=requestAnimationFrame(()=>this.IYt())}EYt(t){t?this.Bqt.VR(1,0,0):this.Bqt.VR(.6,.6,.6),this.Bqt.Wc(Math.round(100*this.kqt)+"%");const s=this.KHt/2,e=this.ZHt/2;zI.Nl(s-150,e-100,s+150,e+100);const i=this.Rx();i.BO(this.Bqt.AM()),i.ab(zI,this.Bqt.EA())}AYt(t,s,e){const i=this.Rx();i._v(),t?i.DO(1,0,0,1):i.DO(.118,.565,1,1);const r=this.KHt/2,n=this.ZHt/2,h=s/2;jI.ja(r-h,n-4+e,Math.floor(s*this.kqt),8),i.Rect(jI),jI.ja(r-h,n-4+e,s,8),jI.offset(-.5,-.5),jI.fl(.5,.5),i.DO(0,0,0,1),i.pb(jI),jI.fl(1,1),i.DO(1,1,1,1),i.pb(jI)}RYt(t){const s=this.Rx(),e=this.Bc.wYt();if(!e)return void this.AYt(t,120,0);const i=e.AM();if(!i)return void this.AYt(t,120,0);const r=i.Cy(),n=i.My(),h=this.KHt/2,o=this.ZHt/2,a=r/2,l=n/2;zI.Nl(h-a,o-l,h+a,o+l),s.BO(i),s.Pl(zI),this.AYt(t,r,l+16)}OYt(t){const s=this.Rx(),e=this.$qt.Uqt,i=this.$qt.Vqt,r=this.$qt.Wqt,n=Date.now();0===this.zqt&&(this.Dqt=n);const h=this.Bc.FYt()||this.Bc.DYt()&&!this.Bc.LYt(),o=h?0:200,a=h?0:3e3;let l=1;"fade-in"===this.qqt?l=Math.min((n-this.Dqt)/300,1):"fade-out"===this.qqt&&(l=Math.max(1-(n-this.Hqt)/300,0)),s._v(),s.DO(.231*l,.251*l,.271*l,l),jI.set(0,0,this.KHt,this.ZHt),s.Rect(jI);const u=Math.ceil(this.KHt),c=Math.ceil(this.ZHt);let f,d;this.ZHt>256?(s.DO(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),jI.ja(0,.8*c-d/2,f,d),s.Rect(jI),t?s.DO(l,0,0,l):s.DO(.161*l,.953*l,.816*l,l),f=u*this.kqt,jI.ja(.5*u-f/2,.8*c-d/2,f,d),s.Rect(jI),s.DO(l,l,l,l),s.xv(),i&&(f=1.5*OI.Zr(.22*c,105,.6*u),d=f/8,jI.ja(.5*u-f/2,.2*c-d/2,f,d),s.BO(i),s.Rect(jI)),e&&(f=Math.min(.395*c,.95*u),d=f,jI.ja(.5*u-f/2,.485*c-d/2,f,d),s.BO(e),s.Rect(jI)),r&&(f=1.5*OI.Zr(.22*c,105,.6*u),d=f/8,jI.ja(.5*u-f/2,.868*c-d/2,f,d),s.BO(r),s.Rect(jI))):(s.DO(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),jI.ja(0,.85*c-d/2,f,d),s.Rect(jI),t?s.DO(l,0,0,l):s.DO(.161*l,.953*l,.816*l,l),f=u*this.kqt,jI.ja(.5*u-f/2,.85*c-d/2,f,d),s.Rect(jI),s.DO(l,l,l,l),s.xv(),e&&(f=.55*c,d=f,jI.ja(.5*u-f/2,.45*c-d/2,f,d),s.BO(e),s.Rect(jI))),this.zqt++,"fade-in"===this.qqt&&n-this.Dqt>=300&&this.zqt>=2&&(this.qqt="wait",this.jqt=n),"wait"===this.qqt&&n-this.jqt>=a&&this.kqt>=1&&(this.qqt="fade-out",this.Hqt=n),("fade-out"===this.qqt&&n-this.Hqt>=300+o||h&&this.kqt>=1&&n-this.Dqt<500)&&this.Jqt()}}}{const YI=self.Gs,XI=self.SZ,KI=self.assert,ZI=self.r3,QI={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""};let tG=!0;YI.kYt=class extends YI.zr{constructor(t){t=Object.assign({},QI,t),super(),this.NYt=t.messagePort,this.BYt=t.runtimeBaseUrl,this.$Yt=t.previewUrl,this.UYt=!!t.headless,this.VYt=!!t.hasDom,this.WYt=!!t.isInWorker,tG=t.ife,this.zYt=!!t.useAudio,this.jYt=t.exportType,this.o5=!!t.isiOSCordova,this.HYt=!!t.isiOSWebView,this.qYt=!!t.isWindowsWebView2,this.JYt=!!t.isAnyWebView2Wrapper,this.YYt=!!t.isFBInstantAvailable,this.XYt=!("preview"!==this.jYt||!t.isDebug),this.KYt=this.XYt,this.ZYt=this.XYt,this.QYt=0,this.tXt=[],this.sXt=[],this.eXt=!1,this.iXt="",this.rXt="",this.nXt="",this.hXt="",this.oXt=0,this.aXt=0,this.lXt=0,this.ZV=self.devicePixelRatio,this.uXt=0,this.cXt=0,this.oD=0,this.aD=0,this.fXt=0,this.dXt=!1,this.RS=!0,this.pXt=!1,this.mXt=!1,this.gXt=!1,this.yXt=null,this.w6=YI.Hr(YI.r5,this,t),this.Mst=YI.Hr(YI.Uit,this),this.Gxt=YI.Hr(YI.TCt,this),this.SXt=YI.Hr(YI.TJ,this,t.wrapperComponentIds),this.wXt=YI.Hr(YI.Pjt,this),this.pot=YI.Hr(YI.trt,this),this.vXt=YI.Hr(YI.HSt,this),this.bXt=YI.Hr(YI.JSt,this),this.awt=YI.Hr(YI.ewt,this),this.MS=YI.Hr(YI.dS,{gS:t=>this.xXt(t),SS:t=>this.CXt(t)}),this.TXt=new Map,this.MXt=[],this.IXt=new Map,this.GXt=new Map,this._Xt=0,this.PXt=[],this.RXt=new Set,this.AXt=[],this.EXt=[],this.OXt=new Map,this.FXt=!1,this.DXt=!1,this.LXt=0,this.kXt=0,this.NXt=new Map,this.BXt=new Set,this.$Xt=new Set,this.UXt=[],this.VXt=[],this.WXt=null,this.zXt=!1,this.jXt="vsync",this.PT="trilinear",this.HXt=!1,this.qXt=!0,this.JXt=!1,this.YXt=!1,this.XXt=null,this.KXt={ZXt:t=>{this.Lqt=-1,this.QXt=-1,this.Int(t)},tKt:t=>{this.QXt=-1,this.Int(t,!1,"skip-render")},sKt:()=>{this.Lqt=-1,this.bW()}},this.Lqt=-1,this.QXt=-1,this.eKt=0,this.iKt=0,this.rKt=!1,this.nKt=!1,this.hKt=!1,this.oKt=!0,this.aKt=!0,this.lKt=!1,this.uKt=0,this.cKt=new YI.jd(1),this.fKt=()=>Math.random(),this.dKt=0,this.pKt=0,this.mKt=0,this.gKt=0,this.yKt=0,this.sUt=1,this.SKt=1/30,this.wKt=0,this.vKt=YI.Hr(YI.td),this.bKt=YI.Hr(YI.td),this.xKt=YI.Hr(YI.td),this.CKt=new Map,this.TKt=-1,this.MKt=0,this.IKt=0,this.GKt=-1,this._Kt=0,this.PKt=0,this.RKt=0,this.AKt=!1,this.EKt="",this.OKt=!1,this.FKt="",this.IZ=null,this.DKt="",this.LKt=null,this.kKt=null,this.nBt=YI.Hr(YI.Event.wf),this.NKt=new Map,this.BKt=new Map,this.$Kt=0,this.UKt=!1,this.VKt=!1,this.WKt=!1,this.zKt=[],this.jKt={pretick:YI.Hr(YI.Event,"pretick",!1),tick:YI.Hr(YI.Event,"tick",!1),tick2:YI.Hr(YI.Event,"tick2",!1),instancecreate:YI.Hr(YI.Event,"instancecreate",!1),instancedestroy:YI.Hr(YI.Event,"instancedestroy",!1),beforelayoutchange:YI.Hr(YI.Event,"beforelayoutchange",!1),layoutchange:YI.Hr(YI.Event,"layoutchange",!1),beforerender:YI.Hr(YI.Event,"beforerender",!1),afterrender:YI.Hr(YI.Event,"afterrender",!1)},this.jKt.instancecreate.G0=null,this.jKt.instancedestroy.G0=null,this.w7=YI.Hr(YI.Event.wf),this.HKt=null;const s=(t,s)=>YI.Q$t.Qzt(this,t,s);this.qKt=YI.Hr(YI.ud,s),this.JKt=YI.Hr(YI.ud,s),this.YKt=YI.Hr(YI.ud,s),this.XKt=YI.Hr(YI.KKt,this,t.jobScheduler),t.canvas&&(this.WXt=YI.Hr(YI.BHt,this)),this.NYt.onmessage=t=>this._OnMessageFromDOM(t.data),this.fZ("runtime","visibilitychange",t=>this.ZKt(t)),this.fZ("runtime","wrapper-extension-message",t=>this.QKt(t)),this.fZ("runtime","get-remote-preview-status-info",()=>this.tZt()),this.fZ("runtime","js-invoke-function",t=>this.ZCt(t)),this.fZ("runtime","go-to-last-error-script",self.goToLastErrorScript),this.fZ("runtime","offline-audio-render-completed",t=>this.sZt(t)),this.nBt.addEventListener("window-blur",t=>this.eZt(t)),this.nBt.addEventListener("window-focus",()=>this.iZt()),this.pot.Ort(),this.bXt.Ort(),this.rZt=null,this.nZt=0,this.hZt=new WeakMap,this.oZt={keyboard:null,TH:null,MH:null,IH:null},this.aZt=new WeakMap,this.lZt=[]}static KM(t){return YI.Hr(YI.kYt,t)}qr(){YI.bh(this.MXt),this.IXt.clear(),this.GXt.clear(),this.Mst.qr(),this.Mst=null,this.Gxt.qr(),this.Gxt=null,this.SXt.qr(),this.SXt=null,this.w6.qr(),this.w6=null,this.wXt.qr(),this.wXt=null,this.pot.qr(),this.pot=null,this.vXt.qr(),this.vXt=null,this.bXt.qr(),this.bXt=null,this.awt.qr(),this.awt=null,this.MS.qr(),this.MS=null,this.WXt&&(this.WXt.qr(),this.WXt=null),this.nBt.qr(),this.nBt=null,this.uZt=null}_OnMessageFromDOM(t){const s=t.type;if("event"===s)this.cZt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.fZt(t)}}cZt(t){if(!this.WKt)return void this.zKt.push(t);const s=t.component,e=t.handler,i=t.data,r=t.dispatchOpts,n=!(!r||!r.dispatchRuntimeEvent),h=!(!r||!r.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(n){const t=new YI.Event(e);t.data=i,this.nBt.Pf(t)}if(h){const t=new YI.Event(e,!0);if(i)for(const[s,e]of Object.entries(i))t[s]=e;this.e6(t)}}const a=this.NKt.get(s);if(!a)return void(n||h||console.warn(`[Runtime] No DOM event handlers for component '${s}'`));const l=a.get(e);if(!l)return void(n||h||console.warn(`[Runtime] No DOM handler '${e}' for component '${s}'`));let u=null;try{u=l(i)}catch(t){return console.error(`Exception in '${s}' handler '${e}':`,t),void(null!==o&&this.dZt(o,!1,""+t))}null!==o&&(u&&u.then?u.then(t=>this.dZt(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${e}':`,t),this.dZt(o,!1,""+t)}):this.dZt(o,!0,u))}dZt(t,s,e){this.NYt.postMessage({type:"result",responseId:t,isOk:s,result:e})}fZt(t){const s=t.responseId,e=t.isOk,i=t.result,r=this.BKt.get(s);e?r.resolve(i):r.reject(i),this.BKt.delete(s)}fZ(t,s,e){let i=this.NKt.get(t);if(i||(i=new Map,this.NKt.set(t,i)),i.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);i.set(s,e)}Vc(t,s,e,i){this.NYt.postMessage({type:"event",component:t,handler:s,data:e,responseId:null},i)}QH(t,s,e,i){const r=this.$Kt++,n=new Promise((t,s)=>{this.BKt.set(r,{resolve:t,reject:s})});return this.NYt.postMessage({type:"event",component:t,handler:s,data:e,responseId:r},i),n}v3(t,s,e,i=-1){this.Vc("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:e,asyncId:i})}pZt(t){this.Vc("runtime","send-raw-wrapper-extension-message",t)}b3(t,s,e){const i=this.$Kt++,r=new Promise((t,s)=>{this.BKt.set(i,{resolve:t,reject:s})});return this.v3(t,s,e,i),r}QKt(t){if(-1!==t.asyncId){const s=t.asyncId;this.BKt.get(s).resolve(t.params),this.BKt.delete(s)}else this.cZt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}RZ(t,s,e){this.fZ("wrapper-extension:"+t,s,e)}_Z(t){return this.SXt._Z(t)}mZt(t){if(!this.yZ())throw new Error("not in debug mode");this.Vc("runtime","post-to-debugger",t)}async rUt(t){YI.OEt(this),this.yZ()?await XI.rUt(this):self.SZ&&self.SZ.gZt(this);const s=await this.w6.io("data.json");if(await this.yZt(s),await this.SZt(t),this.FYt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.KJt()){const t=this.KJt();console.info(`[C3 runtime] Hosted in ${this.Jz()?"worker":"DOM"}, rendering with WebGL ${t.kT()} [${t.WF()}]`)}else this.ZJt()&&console.info(`[C3 runtime] Hosted in ${this.Jz()?"worker":"DOM"}, rendering with WebGPU [${this.ZJt().WB()}]`);this.Rx().Jb()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.WKt=!0;for(const t of this.zKt)this.cZt(t);YI.bh(this.zKt),this.WXt&&this.WXt.MYt();for(const s of t.runOnStartupFunctions)this.tXt.push(this.wZt(s));if(await Promise.all([this.w6.Q5(!1),...this.tXt]),YI.bh(this.tXt),!this.w6.s6())return this.WXt&&await this.WXt._Yt(),await this.nBt.Gf(new YI.Event("beforeruntimestart")),await this.pF(),this.NYt.postMessage({type:"runtime-ready"}),this;this.WXt&&this.WXt.TYt()}async wZt(t){try{await t(this.rZt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async yZt(t){const s=t.project;this.iXt=s[0],this.rXt=s[16],this.nXt=s[31],this.hXt=s[38],this.oXt=s[36];const e=s[39]||"loading-logo.png";this.HXt=!!s[9],this.aXt=this.oD=s[10],this.lXt=this.aD=s[11],this.wXt.wHt(this.aXt,this.lXt),this.uXt=this.aXt/2,this.cXt=this.lXt/2,this.jXt=s[37],this.zXt=!!s[40],this.PT=s[14],this.pXt=s[15],this.mXt=s[42],this.gXt=s[17],this.dXt=!!s[18],this.fXt=s[19],this.kXt=s[21],this.JXt=s[22],this.nZt=s[51];const i=this.w6;i.l6(s[7],s[25]),i.F5(s[8]),i.D5(s[32]),i.k5(s[28]),i.n6(s[29]),i.B5(s[45]),0===this.fXt&&e&&(this.yXt=i.z5({url:e})),this.WXt&&(this.WXt.UJt(YI.BHt.HJt(s[12])),this.WXt.zJt(s[23]?"high":"low"),this.WXt.jb(0!==s[24]),this.WXt.Xqt(s[34]),this.WXt.JJt(s[41]),this.WXt.Kqt(s[13]),this.WXt.Zqt(s[30]),this.WXt.sJt(s[46],s[47]),this.WXt.tJt(s[26]),this.WXt.eJt(s[48]),this.WXt.iJt(s[50]));const r=s[43];r&&await this.vZt(r),this.bZt(),this.SXt.zkt(),this.UXt=self.xZt();const n=s[2];for(const t of n[1])this.SXt.jkt(t);for(const t of n[0])this.SXt.Wkt(t);this.UXt=self.xZt(),this.CZt(),this.SXt.Kkt();for(const t of s[3]){const s=YI.QSt.KM(this,this.MXt.length,t);this.MXt.push(s),this.IXt.set(s.Rc().toLowerCase(),s),this.GXt.set(s.s9(),s)}for(const t of s[4])this.MXt[t[0]].WBt(t);for(const t of s[27]){const s=t.map(t=>this.MXt[t]);this.PXt.push(YI.Hr(YI.W$t,this,s))}this.TZt();for(const t of this.MXt)t.jBt();for(const t of s[5])this.Mst.KM(t);const h=s[1];if(h){const t=this.Mst.zit(h);t&&this.Mst.Vit(t)}for(const t of s[35])this.vXt.KM(t);for(const t of s[33])this.pot.KM(t);for(const t of s[44])this.bXt.KM(t);this.bXt.KSt()||(this.bXt.qr(),this.bXt=null);for(const t of s[49])this.awt.KM(t);this.awt.hwt()||(this.awt.qr(),this.awt=null);for(const t of s[6])this.Gxt.KM(t);this.Gxt.sTt(),this.MZt(),YI.bh(this.UXt),this.KH();let o="any";const a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.Vc("runtime","set-target-orientation",{targetOrientation:o})}async vZt(t){const s=t.format;"image-sequence"===s?this.XXt=new self.IZt(this,t):"image-sequence-gif"===s?this.XXt=new self.GZt(this,t):"webm"===s?this.XXt=new self._Zt(this,t):"mp4"===s&&(this.XXt=new self.PZt(this,t)),this.jXt="unlimited-frame",this.WXt.UJt("off"),this.ZV=1,self.devicePixelRatio=1,await this.QH("runtime","set-exporting-to-video",{message:this.XXt.RZt(0),duration:this.XXt.e1()})}GYt(){return this.fXt}CJt(){return null!==this.XXt}AZt(){return this.XXt.e1()}EZt(){return this.XXt.OZt()}FZt(){return this.XXt.rUt({width:this.WXt.gJ(),height:this.WXt.SJ()})}DZt(){const t=this.eKt/this.EZt();return this.XXt.LZt(this.WXt.BJt(),t)}kZt(){this.XXt&&this.XXt.ict()}sZt(t){this.XXt.NZt(t)}BZt(){return this.XXt.Ub()}DYt(){return this.YYt}DS(){return this.RS}iq(t){this.tXt.push(t)}qet(t){this.eXt=!!t}$Zt(t){this.eXt&&this.sXt.push(t)}Qet(){return this.sXt}LBt(){return this._Xt++}qBt(){return this._Xt}ajt(t){this.RXt.add(t)}ljt(t){this.RXt.delete(t)}xJt(){return this.RXt}async SZt(t){this.WXt&&(await this.WXt.co(t),this.WXt.SYt(this.fXt))}async pF(){this.rKt=!0,this.dKt=Date.now();let t=null;const s=new Promise(s=>t=s);if(this.dXt){for(const t of this.MXt)t.mY()||t.e$t()||!t.RJ()||t.YDt();(async()=>{await this.w6.Q5(!0),await s,this.RS=!1,this.UZt()})()}else this.RS=!1;this.w6.t6(),this.yZ()&&XI.VZt(tG);for(const t of this.Mst.wH())t.dit();this.CJt()&&await this.FZt();const e=this.Mst.Wit();await e.Aet(null,this.Rx()),await e.Uet(!0),this.MKt=performance.now(),t(),this.dXt||this.UZt(),(await this.QH("runtime","before-start-ticking")).isSuspended&&!this.CJt()?(this.uKt++,this.lKt=!0):this.Int()}UZt(){this.lZ(YI.uq.lq.aq.WZt,null,null),this.Vc("runtime","register-sw")}sPt(t){t=Math.floor(t);const s=this.UXt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}CZt(){for(const t of self.zZt){const s=YI.$h(Object.keys(t));this.VXt.push(s)}}MTt(t){t=Math.floor(t);const s=this.VXt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}jZt(){return this.VYt}HZt(){return this.UYt}Jz(){return this.WYt}xYt(){return this.BYt}qZt(){return this.$Yt}oj(){return this.Gxt}vj(){return this.Gxt.vj()}mTt(){return this.Gxt.mTt()}dj(){return this.Gxt.dj()}gTt(){return this.Gxt.gTt()}AEt(){return 0===this.mTt().Hxt()}STt(){return this.Gxt.STt()}Kzt(){return this.SXt}r6(){return this.SXt.r6()}M7(t){if((t=Math.floor(t))<0||t>=this.MXt.length)throw new RangeError("invalid index");return this.MXt[t]}JZt(t){return this.IXt.get(t.toLowerCase())||null}R3(t){return this.GXt.get(t)||null}Hdt(t){const s=YI.TJ.jJ(t);return s?s.YJ():null}J7(){return this.MXt}*YZt(){for(const t of this.MXt)t.mY()||(yield*t.eY())}wf(){return this.nBt}ij(){return this.w7}e6(t){t.runtime=this.MJ();const s=this.yZ()&&!this.Gxt.JH();s&&XI.kit(),this.w7.dispatchEvent(t),s&&XI.Nit()}hit(t){return t.runtime=this.MJ(),this.w7.Gf(t)}Xz(){return this.aXt}Zz(){return this.lXt}XZt(t,s){if(this.aXt===t&&this.lXt===s)return;this.aXt=t,this.lXt=s;const e=this.gH();e.Zit(),e.Qit()}C9(){return this.oD}T9(){return this.aD}kJt(t,s){if(this.oD===t&&this.aD===s)return;this.oD=t,this.aD=s;const e=this.gH();e.Zit(),e.Qit()}TJt(t){this.CJt()||(this.ZV=t)}wJ(){return this.ZV}btt(){return this.uXt}xtt(){return this.cXt}_H(){return this.WXt}_tt(){return this.WXt?this.WXt._tt():this.oD}Ptt(){return this.WXt?this.WXt.Ptt():this.aD}TK(){return this.WXt?this.WXt.TK():1}H2(){return this.WXt?this.WXt.H2():1}ast(){return this.WXt?this.WXt.ast():1}hst(){return this.WXt?this.WXt.hst():1}aJ(){return this.WXt?this.WXt.aJ():0}uJ(){return this.WXt?this.WXt.uJ():0}KZt(){return this.WXt?this.WXt.fJ():0}ZZt(){return this.WXt?this.WXt.pJ():0}j2(){return this.WXt?this.WXt.j2():"off"}Btt(t){return this.WXt?this.WXt.Btt(t):null}l7(t){this.WXt&&this.WXt.l7(t)}ktt(){return this.pXt}mJt(){return this.mXt}gJt(){return this.gXt}Yj(){return this.WXt?this.WXt.Yj():NaN}OM(){return"nearest"!==this.PU()}Kj(){return this.jXt}Zj(t){this.jXt!==t&&(this.jXt=t,-1===this.Lqt&&-1===this.QXt||(this.QZt(),this.tQt()))}PU(){return this.PT}$Bt(){return this.dXt}wYt(){return this.yXt}PYt(){this.yXt&&(this.yXt.vR(),this.yXt.qr(),this.yXt=null)}gH(){return this.Mst}dH(){return this.Mst.dH()}tat(){return this.pot}sQt(){return this.vXt}NUt(){return this.bXt}Pwt(){return this.awt}Pz(){return this.w6}z5(t){return this.w6.z5(t)}GY(t,s,e,i,r,n){if(n&&this.bXt){if(t instanceof YI.QSt&&t.mY()){const h=t.NY(),o=Math.floor(this.fH()*h.length);return this.GY(h[o],s,e,i,r,n)}const h=this.bXt.ZSt(t,n);if(h){const t=this.F7(h,s,!1,e,i,!1,r,void 0,r);return this.bXt.twt(t,n),t}}return this.F7(t,s,!1,e,i,!1,r,void 0,r)}F7(t,s,e,i,r,n,h,o,a){let l=null,u=null;if(t instanceof YI.QSt){if(u=t,u.mY()){const t=u.NY();u=t[Math.floor(this.fH()*t.length)]}l=u.G7()}else l=t,u=this.M7(l[1]);const c=u.tY().RJ();if(this.RS&&c&&!u.e$t())return null;const f=s;let d;c||(s=null),d=e&&!n&&l&&!this.NXt.has(l[2])?l[2]:this.kXt++;const p=l?l[0]:null,m=YI.Hr(YI.Instance,{runtime:this,objectType:u,kZ:s,iUt:p,oUt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.NXt.set(d,m);let g=null;if(c&&(g=m.kH(),void 0!==i&&void 0!==r&&(g.uC(i),g.dC(r)),u.P$t(!0)),s&&(a||s.D7(m,!0),s.yH().Oet(u)),this.LXt++,u.DK()&&!e&&!n){const t=new Set;for(const s of u.Pet().BY()){if(s===u)continue;const e=this.eQt(s,g,t);if(e){const t=this.F7(e,f,!1,g?g.lC():i,g?g.fC():r,!0,!1,void 0,a);m.cit(t)}else{const t=this.F7(s,f,!1,g?g.lC():i,g?g.fC():r,!0,!1,void 0,a);m.cit(t)}}for(const t of m.LK()){t.cit(m);for(const s of m.LK())t!==s&&t.cit(s)}}if(c&&!e&&h&&this.iQt(m,p,g,s,i,r,a),u.DK()&&!e&&!n&&h)for(const t of m.LK()){const e=t.kH();if(!e)continue;const i=t.tY(),r=t.yY().G7()[0];i.RJ()?this.iQt(t,r,e,s,e.lC(),e.fC(),a):this.iQt(t,r,e,s,void 0,void 0,a)}if(!n&&h){void 0===i&&(i=p[0]),void 0===r&&(r=p[1]);const t=g.xQ(),s=i-g.lC()+t.lC(),e=r-g.fC()+t.fC();t.BZ(s,e)}u.T$t();const y=l?YI.Oh(l[5]):null,S=l?l[4].map(t=>YI.Oh(t)):null,w=c&&p&&p[13];if(w&&m.mUt(),m.t$t(y,S),w){const t=p[13];m.g0().dLt(t[2],t[0],t[1])}this.EXt.push(m),this.FXt=!0,this.yZ()&&XI.rQt(m);const v=this.jKt.instancecreate;return v.G0=m,this.nBt.dispatchEvent(v),m}jVt(t){const s=t[0],e=t[1],i=t[2],r=t[6];return r||this.Mst.jit(s).BH(e).R7(i)}eQt(t,s,e){const i=s?.kUt()??[];for(const s of i){const i=this.jVt(s),r=!!s[4],n=this.M7(i[1]);if(!e.has(i)&&t===n&&r)return e.add(i),i}}iQt(t,s,e,i,r,n,h){const o=e.dzt(),a=e.kUt();if(t.kH().pzt(o),!a)return;void 0===r&&(r=s[0]),void 0===n&&(n=s[1]);const l=new Set,u=s[0],c=s[1];for(const s of a){const e=s[0],o=s[1],a=s[2],f=s[3],d=!!s[4],p=s[5],m=s[6];let g;g=m||this.Mst.jit(e).BH(o).R7(a);const y=this.M7(g[1]),S=t.$Ut(y),w=l.has(y);if(S&&!w&&d){const s=t.UUt(y);s.kH().rUt(g[0]);const e=r+g[0][0]-u,i=n+g[0][1]-c;s.kH().BZ(e,i),s.kH().pzt(p),t.RQ(s,{DQ:!!(1&f),kQ:!!(f>>1&1),BQ:!!(f>>2&1),UQ:!!(f>>3&1),WQ:!!(f>>4&1),KQ:!!(f>>5&1),jQ:!!(f>>6&1),qQ:!!(f>>7&1),YQ:!!(f>>8&1)}),l.add(y)}else{const s=r+g[0][0]-u,e=n+g[0][1]-c,o=this.F7(g,i,!1,s,e,!1,!0,t,h);o.kH().pzt(p),t.RQ(o,{DQ:!!(1&f),kQ:!!(f>>1&1),BQ:!!(f>>2&1),UQ:!!(f>>3&1),WQ:!!(f>>4&1),KQ:!!(f>>5&1),jQ:!!(f>>6&1),qQ:!!(f>>7&1),YQ:!!(f>>8&1)})}}}qH(t){if(this.BXt.has(t))return;const s=t.yY();let e=this.OXt.get(s);if(e){if(e.has(t))return;e.add(t)}else e=new Set,e.add(t),this.OXt.set(s,e);if(this.yZ()&&XI.nQt(t),t.yUt(),this.FXt=!0,t.DK())for(const s of t.LK())this.qH(s);for(const s of t.children())s.ZQ()&&this.qH(s);if(!this.Mst.YH()&&!this.AKt){const s=this.oj();s.PY(!0),t.QUt(),s.PY(!1)}t.tVt(this.Mst.YH())}KH(){this.FXt&&(this.DXt=!0,this.hQt(),this.oQt(),this.DXt=!1,this.FXt=!1,this.jH())}hQt(){for(const t of this.EXt){const s=t.yY();s.D7(t);for(const e of s.EY())e.D7(t),e.T$t()}YI.bh(this.EXt)}oQt(){this.nBt.ff(!0);for(const[t,s]of this.OXt.entries())this.aQt(t,s),s.clear();this.OXt.clear(),this.nBt.ff(!1)}aQt(t,s){for(const t of s){const s=this.jKt.instancedestroy;s.G0=t,this.nBt.dispatchEvent(s),this.NXt.delete(t.kK()),this.CKt.delete(t);const e=t.kH();e&&(e.Szt(),e.B7(),e.yUt()),this.BXt.add(t),this.LXt--}YI.Rh(t.cY(),s),t.T$t(),this.$Xt.add(t);for(const e of t.EY())YI.Rh(e.cY(),s),e.T$t(),this.$Xt.add(e);if(t.tY().RJ()){const t=new Set([...s].map(t=>t.kH().BH()));for(const e of t)e.X9(s)}}I$t(){return this.EXt}*LOt(t){for(const s of this.I$t())t.mY()?s.yY().EEt(t)&&(yield s):s.yY()===t&&(yield s)}QBt(){return this.kXt++}s$t(t,s){this.NXt.set(t,s)}M3(t){t=!!t,this.aKt!==t&&(this.aKt=!!t,this.aKt&&this.lKt&&(this._3(!1),this.lKt=!1))}I3(){return this.aKt}$et(){this.nBt.dispatchEvent(YI.Hr(YI.Event,"renderercontextlost")),this._3(!0);for(const t of this.MXt)!t.mY()&&t.i$t()&&t.Net();const t=this.dH();t&&t.$et(),YI.tNt.A6(),YI.q5.A6()}async XJt(){await this.dH().Aet(null,this.Rx()),this.nBt.dispatchEvent(YI.Hr(YI.Event,"renderercontextrestored")),this._3(!1),this.jH()}ZKt(t){if(!this.aKt)return;const s=t.hidden;this._3(s),this.lKt=s,s||this.jH()}eZt(t){this.FYt()&&this.JXt&&!YI.Zs.oe&&(t.data.parentHasFocus||(this._3(!0),this.YXt=!0))}iZt(){this.YXt&&(this._3(!1),this.YXt=!1)}tQt(){const t=this.KXt;"vsync"===this.jXt?-1===this.Lqt&&(this.Lqt=self.requestAnimationFrame(t.ZXt)):"unlimited-tick"===this.jXt?(-1===this.QXt&&(this.QXt=YI.jh(t.tKt)),-1===this.Lqt&&(this.Lqt=self.requestAnimationFrame(t.sKt))):-1===this.QXt&&(this.QXt=YI.jh(t.ZXt))}QZt(){-1!==this.Lqt&&(self.cancelAnimationFrame(this.Lqt),this.Lqt=-1),-1!==this.QXt&&(YI.Hh(this.QXt),this.QXt=-1)}_j(){return this.uKt>0}_3(t){if(this.CJt())return;const s=this._j();this.uKt+=t?1:-1,this.uKt<0&&(this.uKt=0);const e=this._j();if(!s&&e)console.log("[Construct] Suspending"),this.QZt(),this.nBt.dispatchEvent(YI.Hr(YI.Event,"suspend")),this.e6(YI.Hr(YI.Event,"suspend")),this.lZ(YI.uq.lq.aq.lQt,null,null);else if(s&&!e){console.log("[Construct] Resuming");const t=performance.now();this.pKt=t,this.MKt=t,this.TKt=0,this.IKt=0,this.GKt=0,this._Kt=0,this.RKt=0,this.PKt=0,this.nBt.dispatchEvent(YI.Hr(YI.Event,"resume")),this.e6(YI.Hr(YI.Event,"resume")),this.lZ(YI.uq.lq.aq.uQt,null,null),this.eMt()||this.Int(t)}}o3(t){this.qKt.$u(t)}c3(t){this.JKt.$u(t)}l3(t){this.YKt.$u(t)}a3(t){this.qKt.Zf(t)}f3(t){this.JKt.Zf(t)}u3(t){this.YKt.Zf(t)}cQt(t,s){const e=s?performance.now():0;let i;return t instanceof ZI?(i=t.wZ(),s&&XI.fQt(t.behavior,performance.now()-e)):(i=t.Int(),s&&XI.fQt(t.C0(),performance.now()-e)),i}dQt(){const t=this.yZ();this.qKt.Wd(!0);for(const s of this.qKt)this.cQt(s,t);this.qKt.Wd(!1)}pQt(t,s){const e=s?performance.now():0;let i;return t instanceof ZI?(i=t.m3(),s&&XI.fQt(t.behavior,performance.now()-e)):(i=t.Nkt(),s&&XI.fQt(t.C0(),performance.now()-e)),i}mQt(){const t=this.yZ();this.JKt.Wd(!0);for(const s of this.JKt)this.pQt(s,t);this.JKt.Wd(!1)}gQt(t,s){const e=s?performance.now():0;let i;return t instanceof ZI?(i=t.xZ(),s&&XI.fQt(t.behavior,performance.now()-e)):(i=t.FLt(),s&&XI.fQt(t.C0(),performance.now()-e)),i}yQt(){const t=this.yZ();this.YKt.Wd(!0);for(const s of this.YKt)this.gQt(s,t);this.YKt.Wd(!1)}*SQt(){const t=this.yZ();this.qKt.Wd(!0);for(const s of this.qKt){const e=this.cQt(s,t);YI.xo(e)&&(yield*e)}this.qKt.Wd(!1)}*wQt(){const t=this.yZ();this.JKt.Wd(!0);for(const s of this.JKt){const e=this.pQt(s,t);YI.xo(e)&&(yield*e)}this.JKt.Wd(!1)}*vQt(){const t=this.yZ();this.YKt.Wd(!0);for(const s of this.YKt){const e=this.gQt(s,t);YI.xo(e)&&(yield*e)}this.YKt.Wd(!1)}async Int(t,s,e){this.hKt=!0;const i="background-wake"===e,r="background-wake"!==e&&"skip-render"!==e,n=this.gH(),h=this._H();if(!this.rKt||this._j()&&!s&&!i)return;const o=performance.now();this.nKt=!0,this.bQt(t||0),this.GKt++,this.xQt();const a=this.CQt();this.AOt()&&await a;const l=this.nBt._f(this.jKt.pretick);l instanceof Promise&&await l,this.e6(this.HKt.pretick);const u=this.TQt();this.AOt()&&await u,this.MQt()&&await this.IQt(),n.bH()&&await this.GQt();const c=this._Qt();this.AOt()&&await c;const f=n.dH(),d=f.Tet();let p=!1;if(-1!==d&&(f.Met(),h.Cet()!==d)){const t=this._H().jet(d);this.Jz()&&(p=!0,await t)}this.Vc("canvas","update-html-layer-dom-state",{layersDomState:f.t9().filter(t=>t.$X()).map(t=>t.itt())}),r&&this.bW(),p&&this.Vc("canvas","cleanup-html-layers"),this.CJt()&&(await this.DZt(),this.Fj()>=this.AZt())?this.BZt():(this._j()||i||this.tQt(),this.eKt++,this.iKt++,this.nKt=!1,this.PKt+=performance.now()-o)}async CQt(){const t=this.Gxt,s=this.yZ();this.KH(),t.PY(!0),this.zTt(this.dH()),s&&XI.PQt(),this.AOt()?await t.CMt():t.SMt(),s&&XI.RQt(),this.jTt(),t.PY(!1),this.KH(),t.PY(!0)}async TQt(){const t=this.Gxt,s=this.yZ(),e=this.AOt(),i=this.nBt,r=this.jKt,n=this.HKt;s&&XI.PQt(),e?await this.AQt(this.SQt()):this.dQt(),e?await this.AQt(this.wQt()):this.mQt(),s&&XI.EQt(),s&&XI.PQt(),e?await this.OQt(r.tick):i.dispatchEvent(r.tick),s&&XI.FQt(),t.PY(!1),this.e6(n.tick)}async _Qt(){const t=this.Gxt,s=this.nBt,e=this.jKt,i=this.HKt,r=this.yZ(),n=this.AOt();r&&XI.PQt(),n?await t.HTt(this.Mst):t.WTt(this.Mst),r&&XI.RQt(),this.wXt.Vjt(),this.xQt(),this.oKt=!1,t.PY(!0),r&&XI.PQt(),n?await this.AQt(this.vQt()):this.yQt(),r&&XI.EQt(),r&&XI.PQt(),n?await this.OQt(e.tick2):s.dispatchEvent(e.tick2),r&&XI.FQt(),t.PY(!1),this.e6(i.tick2),n&&await t.iMt(),this.KH(),this.xQt()}xQt(){if(0===this.BXt.size)return;const t=this.nBt;t.ff(!0);for(const t of this.$Xt)t.fMt().ixt(this.BXt);this.$Xt.clear(),this.Gxt.MMt(this.BXt);for(const t of this.BXt)t.qr();this.BXt.clear(),t.ff(!1)}async GQt(){const t=this.gH();let s=0;for(;t.bH()&&s++<10;)await this.DQt(t.Kit())}bQt(t){let s=0;this.CJt()?(s=1/this.EZt(),this.mKt=s,this.gKt=s):0!==this.pKt&&(s=Math.max(t-this.pKt,0)/1e3,s>.5&&(s=0),this.mKt=s,this.gKt=YI.Zr(s,this.wKt,this.SKt)),this.pKt=t,this.yKt=this.gKt*this.sUt,this.vKt.$u(this.yKt),this.bKt.$u(s*this.sUt),this.xKt.$u(this.gKt);for(const[t,s]of this.CKt)s.$u(this.gKt*t.$j());this.WXt&&this.WXt.aYt(),t-this.MKt>=1e3&&(this.MKt+=1e3,t-this.MKt>=1e3&&(this.MKt=t),this.IKt=this.TKt,this.TKt=0,this._Kt=this.GKt,this.GKt=0,this.RKt=Math.min(this.PKt/1e3,1),this.PKt=0,this.WXt&&this.WXt.oYt(),this.wXt.Njt(),this.yZ()&&XI.LQt())}dUt(t,s){if(s){if(!this.CKt.has(t)){const s=YI.Hr(YI.td);s.hd(this.vKt),this.CKt.set(t,s)}}else this.CKt.delete(t)}pUt(t){const s=this.CKt.get(t);return s?s.Hs():this.Fj()}async DQt(t){const s=this.nBt,e=this.gH().dH();await e.mit(),e.Bet(t,this.Rx()),e===t&&this.Gxt.Sit(),this.wXt.Vjt(),this.xQt(),s.dispatchEvent(this.jKt.beforelayoutchange),YI.pf.Af(!0),await t.Aet(e,this.Rx()),YI.pf.Af(!1),await t.Uet(!1),s.dispatchEvent(this.jKt.layoutchange),this.jH(),this.oKt=!0,this.KH(),this.kZt()}jH(){this.qXt=!0}KJt(){return this.WXt?this.WXt.KJt():null}ZJt(){return this.WXt?this.WXt.ZJt():null}Rx(){return this.WXt?this.WXt.Rx():null}bW(){const t=this.WXt;if(!t||t.YJt())return;const s=this.Rx(),e=s.LF(),i=e&&s.Yb(),r=e&&s.pv();if(i&&s.xF(),!this.qXt&&!this.CJt())return void s.zb();const n=this.Mst.dH();this.TKt++,s.pF();const h=this.yZ();h&&XI.PQt(),this.qXt=!1;let o=null;i&&(o=t.fYt().rE(),s.DF(o));let a=null;r&&(a=s.vN(2*(1+n.met())),s.xN(0,1)),this.O9()&&"low"===t.Ntt()?s.MO(t._tt(),t.Ptt()):s.IO(),this.kQt(this.Rx(),n),o&&s.kF(o),r&&(s.TN(),this.WXt.dYt(a)),s.Ub(),h&&(XI.NQt(),XI.BQt()),t&&t.pYt()}_it(t){return"low"===this._H().Ntt()||t.Yb()&&(this.ktt()||this.O9())}kQt(t,s){t.xv(),t.WO(),t.Lb(),t.DO(1,1,1,1),t.IF(null),t.BO(null),t.gF(this.O9()),this.wf().dispatchEvent(this.jKt.beforerender),this._it(t)&&s.Iit(t);const e=s.Cet();for(let i=1;i<e;++i)s.Eit(t,i),t.pv()&&t.pN();this._it(t)||s.Iit(t),s.Ait(t),this.wf().dispatchEvent(this.jKt.afterrender)}lZ(t,s,e){if(!this.rKt)return!1;const i=!this.nKt&&!this.Gxt.oMt();let r=0;i&&(r=performance.now());const n=this.yZ();n&&this.D3(!1);const h=this.Gxt.XTt(this.Mst,t,s,e);if(i){const t=performance.now()-r;this.PKt+=t,n&&XI.$Qt(t)}return n&&this.D3(!0),h}xLt(t,s,e){if(!this.AOt())return this.lZ(t,s,e);if(this.eMt())throw new Error("called DebugTrigger() while stopped on breakpoint");if(!this.nKt&&!this.Gxt.oMt())throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead");return this.Gxt.QTt(this.Mst,t,s,e)}async hq(t,s,e){if(!this.AOt())return this.lZ(t,s,e);if(!this.rKt)return!1;if(this.eMt())return this.Gxt.tMt(t,s,e);if(!this.dH())return this.Gxt.KTt(t,s,e);const i=performance.now(),r=this.Gxt.QTt(this.Mst,t,s,e);let n=r.next();for(;!n.done;)await this.JTt(n.value),n=r.next();return this._j()||this.Gxt.oMt()||(await this.Gxt.iMt(),this.hKt&&!this.nKt&&this.tQt()),this.PKt+=performance.now()-i,n.value}CLt(t,s,e){const i=this.yZ();i&&this.D3(!1);const r=this.Gxt.rMt(this.Mst,t,s,e);return i&&this.D3(!0),r}TLt(t,s,e){return this.Gxt.nMt(this.Mst,t,s,e)}MLt(t){return this.cKt.$u(t)}zTt(t){this.AXt.push(t)}jTt(){if(!this.AXt.length)throw new Error("layout stack empty");this.AXt.pop()}DH(){return this.AXt.length?this.AXt.at(-1):this.dH()}Rj(t){return t&&-1!==t.$j()?this.gKt*t.$j():this.yKt}Tnt(){return this.yKt}Mnt(){return this.gKt}Ej(){return this.mKt}$j(){return this.sUt}Uj(t){(isNaN(t)||t<0)&&(t=0),this.sUt=t}sH(t){this.wKt=Math.max(t,0)}tH(){return this.wKt}rH(t){this.SKt=Math.max(t,0)}iH(){return this.SKt}Wj(){return this.IKt}jj(){return this._Kt}qj(){return this.RKt}UQt(){return this.dKt}Fj(){return this.vKt.Hs()}VQt(){return this.bKt.Hs()}Nj(){return this.xKt.Hs()}Lj(){return this.eKt}WQt(){return this.iKt}zQt(){return this.LXt}Lz(){return this.iXt}Nz(){return this.rXt}Vz(){return this.nXt}$z(){return this.hXt}zz(){return this.oXt}EH(t){if(this.AKt)throw new Error("cannot call while loading state - wait until afterload event");return this.NXt.get(t)||null}$Vt(t){if(this.AKt)throw new Error("cannot call while loading state - wait until afterload event");this.NXt.delete(t)}uit(){this.NXt.clear();for(const t of this.MXt)if(!t.mY())for(const s of t.cY())this.NXt.set(s.kK(),s)}FYt(){return"preview"===this.jYt}yZ(){return this.XYt}eJ(){return this.jYt}LYt(){return"cordova"===this.jYt}jQt(){return"Android"===YI.Zs.Qs&&("cordova"===this.jYt||"playable-ad-single-file"===this.jYt||"playable-ad-zip"===this.jYt||"instant-games"===this.jYt)}HQt(){return this.o5}qQt(){return this.HYt}iJ(){return this.qYt}JQt(){return this.JYt}Ez(){return this.wXt}Zkt(){return this.SXt.Zkt()}Qkt(){return this.SXt.Qkt()}O9(){return this.zXt}YQt(){return this.Rx().ev(this.T9())}Qw(t){return this.Rx().Qw(t||this.T9())}XQt(){return this.oKt}hH(t){t=!!t,this.HXt!==t&&(this.HXt=t,this.gH().Qit(),this.jH())}oH(){return this.HXt}KQt(t){if(!this.TXt.has(t)){const s=()=>this.ZQt(t);this.TXt.set(t,s),t.wf().addEventListener("animationframeimagechange",s)}const s=this.MS.wS(t);return s.FS()||s.LS().then(()=>this.jH()),s}ZQt(t){this.MS.CS(t)}xXt(t){const s=[];for(const e of t.p$t())for(const t of e.Y0()){const e=t.s1();s.push({source:t,width:e.Cy(),height:e.My(),tag:t.S1()})}return{ES:s}}async CXt(t){const s=YI.Hr(YI.jd),e=[],i=new Map;for(const r of t.p$t())for(const t of r.Y0()){const r=t.s1().vNt();i.has(r)||(i.set(r,null),e.push(s.$u(async()=>{const t=await r.k6();i.set(r,t)})))}await Promise.all(e);const r=[];for(const e of t.p$t())for(const t of e.Y0())r.push(s.$u(async()=>{const s=t.s1(),e=i.get(s.vNt()),r=await s.bNt(e);return{NS:await createImageBitmap(r)}}));const n=await Promise.all(r);for(const t of i.values())t instanceof ImageBitmap&&t.close&&t.close();return{ES:n}}QQt(t){this.EKt=t,this.OKt=!1}t0t(){this.EKt="",this.OKt=!0}s0t(t){this.FKt=t}TFt(t){this.IZ=t}e0t(){return this.DKt}MQt(){return!!(this.EKt||this.OKt||this.FKt||null!==this.IZ)}async IQt(){if(this.EKt&&(this.KH(),await this.i0t(this.EKt),this.r0t()),this.FKt&&(await this.n0t(this.FKt),this.r0t(),this.yZ()&&XI.h0t()),this.OKt){const t=await this.o0t();this.DKt=t,await this.hq(YI.uq.lq.aq.a0t,null),this.DKt="",this.r0t()}if(null!==this.IZ){this.KH();try{await this.l0t(this.IZ),this.DKt=this.IZ,await this.hq(YI.uq.lq.aq.u0t,null),this.DKt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.hq(YI.uq.lq.aq.c0t,null)}this.r0t()}}r0t(){this.EKt="",this.OKt=!1,this.FKt="",this.IZ=null}bJ(){return this.LKt||(this.LKt=localforage.Te({name:"c3-localstorage-"+this.Vz(),description:this.Lz()})),this.LKt}f0t(){return this.kKt||(this.kKt=localforage.Te({name:"c3-savegames-"+this.Vz(),description:this.Lz()})),this.kKt}async i0t(t){const s=await this.o0t();try{await this.f0t().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.DKt=s,await this.hq(YI.uq.lq.aq.a0t,null),this.DKt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.hq(YI.uq.lq.aq.d0t,null)}}async n0t(t){try{const s=await this.f0t().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.l0t(s),this.DKt=s,await this.hq(YI.uq.lq.aq.u0t,null),this.DKt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.hq(YI.uq.lq.aq.c0t,null)}}async o0t(){const t={c3save:!0,version:1,rt:{time:this.Fj(),timeRaw:this.VQt(),walltime:this.Nj(),timescale:this.$j(),tickcount:this.Lj(),next_uid:this.kXt,running_layout:this.dH().s9(),start_time_offset:Date.now()-this.dKt},types:{},layouts:{},events:this.Gxt.wst(),timelines:this.pot.wst(),user_script_data:null};for(const s of this.MXt)s.mY()||s.L$t()||(t.types[s.s9().toString()]=s.wst());for(const s of this.Mst.wH())t.layouts[s.s9().toString()]=s.wst();const s=this.p0t("save");return s.saveData=null,await this.hit(s),t.user_script_data=s.saveData,JSON.stringify(t)}tit(){return this.AKt}async l0t(t){const s=this.gH(),e=JSON.parse(t);if(e.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!e.c3save)throw new Error("not valid C3 save data");if(e.version>1)throw new Error("C3 save data from future version");this.MFt(),this.nBt.dispatchEvent(YI.Hr(YI.Event,"beforeload"));for(const t of this.YZt())t.yY().L$t()||t.Mrt();const i=e.rt;this.vKt.Set(i.time),i.hasOwnProperty("timeRaw")&&this.bKt.Set(i.timeRaw),this.xKt.Set(i.walltime),this.sUt=i.timescale,this.eKt=i.tickcount,this.dKt=Date.now()-i.start_time_offset;const r=i.running_layout;this.AKt=!0;let n=!1;if(r!==this.dH().s9()){const t=s.jit(r);if(!t)return;await this.DQt(t),n=!0}for(const[t,i]of Object.entries(e.layouts)){const e=parseInt(t,10),r=s.jit(e);r&&r.vst(i)}const h=new Set;for(const[t,s]of Object.entries(e.types)){const e=parseInt(t,10),i=this.R3(e);!i||i.mY()||i.L$t()||i.vst(s,h)}for(const t of this.Mst.wH())for(const s of t.oX())s.bst();if(this.KH(),this.uit(),this.AKt=!1,n){for(const t of this.YZt())t.sit();for(const[t,s]of Object.entries(e.types)){const e=parseInt(t,10),i=this.R3(e);!i||i.mY()||i.L$t()||i.U$t(s)}}this.kXt=i.next_uid,this.Gxt.vst(e.events);for(const t of this.MXt)if(!t.mY()&&t.DK())for(const s of t.cY()){const e=s.BK();s.BUt();for(const i of t.Pet().BY()){if(i===t)continue;const r=i.cY();if(e<0||e>=r.length)throw new Error("missing sibling instance");s.cit(r[e])}}this.pot.vst(e.timelines),s.Zit(),s.Qit();for(const t of h)t.ZUt();this.IFt(),this.nBt.dispatchEvent(YI.Hr(YI.Event,"afterload")),this.e6(this.p0t("afterload"));for(const[t,s]of Object.entries(e.types)){const s=parseInt(t,10),e=this.R3(s);e&&e.$$t()}const o=this.p0t("load");o.saveData=e.user_script_data,await this.hit(o),this.jH()}m0t(t,s){return s.kH().azt()-t.kH().azt()}Xzt(t,s){t.kH()&&(this.aZt.has(t)||(this.aZt.set(t,s),this.lZt.push(t)))}MFt(){this.aZt=new WeakMap,YI.bh(this.lZt),YI.Tit.tWt()}IFt(t="full",s=null){this.lZt.sort(this.m0t),s||(s={}),s.BVt=new Set;const e=this.lZt.length;for(const e of this.lZt)e.Grt(this.aZt.get(e),t,s);for(const e of this.lZt)e.iVt(this.aZt.get(e),t,s);if(this.MFt(),e){this.KH(),this.uit();for(const t of this.Mst.wH())for(const s of t.oX())s.W7(),s.zH()}}async g0t(t){const s=t.map(t=>new URL(t,location.href).toString());this.XKt.y0t(s)}S0t(t,s){this.XKt.w0t(t,s)}v0t(t,s){this.XKt.b0t(t,s)}x0t(t,s,e,i){return this.XKt.x0t(t,s,e,null,null,i)}C0t(t,s,e,i){return this.XKt.C0t(t,s,e,i)}T0t(){return this.XKt.M0t()}RH(t,s){this.Vc("runtime","invoke-download",{url:t,filename:s})}async CYt(t,s,e,i,r,n){if(i=i||s,r=r||e,this.Jz())return(await this.QH("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:e,surfaceWidth:i,surfaceHeight:r,imageBitmapOpts:n})).imageBitmap;{const h=await self.C3_RasterSvgImageBlob(t,s,e,i,r);return n?await self.createImageBitmap(h,n):h}}async I0t(t){return this.Jz()?await this.QH("runtime","get-svg-image-size",{blob:t}):await self.C3_GetSvgImageSize(t)}G0t(){this.UKt||(this.UKt=!0,this.Vc("runtime","enable-device-orientation"))}_0t(){this.VKt||(this.VKt=!0,this.Vc("runtime","enable-device-motion"))}fH(){return this.fKt()}P0t(t){this.fKt=t}tZt(){const t=this.Rx();return{fps:this.Wj(),tps:this.jj(),cpu:this.qj(),gpu:this.Yj(),layout:this.dH()?this.dH().Rc():"",renderer:t.Yb()?t.WF():t.WB()}}eMt(){return!!this.yZ()&&XI.eMt()}JTt(t){return this.AOt()?XI.JTt(t):Promise.resolve()}__t(){return!!this.AOt()&&XI.R0t()}A0t(t){this.KYt=!!t,this.E0t()}O0t(){return this.KYt}AOt(){return this.ZYt}D3(t){t?this.QYt--:this.QYt++,this.E0t()}E0t(){this.ZYt=this.yZ()&&this.KYt&&0===this.QYt}qIt(){return this.yZ()&&XI.qIt()}Ott(){return this.yZ()&&this.Rx().LF()&&XI.Ott()}async AQt(t){if(t)for(const s of t)await this.JTt(s)}OQt(t){return this.AQt(this.nBt.Rf(t))}ZCt(t){return this.Gxt.ZCt(t.name,t.params)}sq(t){if(this.Jz())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}MJ(){return this.rZt}y3(){return this.nZt}p0t(t){const s=YI.Hr(YI.Event,t,!1);return s.runtime=this.rZt,s}bZt(){this.rZt=new self.Iz(this),this.HKt={pretick:this.p0t("pretick"),tick:this.p0t("tick"),tick2:this.p0t("tick2")}}TZt(){const t={};for(const s of this.MXt)t[s.MTt()]={value:s.JJ(),enumerable:!0,writable:!1};this.rZt.rj(t)}MZt(){const t={};for(const s of this.oj().ATt())t[s.MTt()]=s.ITt();this.rZt.nj(t)}CH(){return this.oZt}WJ(t,s){this.hZt.set(t,s)}uX(t){return this.hZt.get(t)}Yq(t){if(!(t instanceof self.ZJ))throw new TypeError("expected IObjectClass");const s=this.uX(t);if(!(s&&s instanceof YI.QSt))throw new Error("invalid IObjectClass");return s}aY(t){if(!(t instanceof self.MK))throw new TypeError("expected IInstance");const s=this.uX(t);if(!(s&&s instanceof YI.Instance))throw new Error("invalid IInstance");return s}LH(t){if(!(t instanceof self.c0))throw new TypeError("expected IWorldInstance");const s=this.uX(t);if(!(s&&s instanceof YI.Instance))throw new Error("invalid IInstance");return s}},self.C3_CreateRuntime=YI.kYt.KM,self.C3_InitRuntime=(t,s)=>t.rUt(s)}{const sG=self.Gs;sG.KKt=class extends sG.zr{constructor(t,s){super(),this.Bc=t,this.F0t=new Map,this.D0t=0,this.L0t=s.inputPort,s.outputPort.onmessage=t=>this.k0t(t),this.N0t=s.maxNumWorkers,this.B0t=1,this.$0t=!1,this.U0t=!1}M0t(){return this.N0t}y0t(t){this.L0t.postMessage({type:"_import_scripts",scripts:t})}w0t(t,s){this.L0t.postMessage({type:"_send_blob",blob:t,id:s})}b0t(t,s){this.L0t.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}x0t(t,s,e,i,r,n){if(e||(e=[]),"number"==typeof n&&(n=Math.floor(n))<=0)throw new Error("invalid maxWorkerNum");const h=this.D0t++,o={type:t,isBroadcast:!1,maxWorkerNum:n,jobId:h,params:s,transferables:e},a=new Promise((t,s)=>{this.F0t.set(h,{resolve:t,progress:i,reject:s,V0t:!1,W0t:n})});return r&&r.Xf(()=>this.z0t(h)),this.L0t.postMessage(o,e),this.j0t(),a}C0t(t,s,e,i){if(e||(e=[]),"number"==typeof i&&(i=Math.floor(i))<=0)throw new Error("invalid maxWorkerNum");const r={type:t,isBroadcast:!0,maxWorkerNum:i,jobId:this.D0t++,params:s,transferables:e};this.L0t.postMessage(r,e)}z0t(t){const s=this.F0t.get(t);s&&(s.V0t=!0,s.resolve=null,s.progress=null,s.reject=null,this.L0t.postMessage({type:"_cancel",jobId:t}))}k0t(t){const s=t.data,e=s.type,i=s.jobId;switch(e){case"result":this.H0t(i,s.result);break;case"progress":this.q0t(i,s.progress);break;case"error":this.J0t(i,s.error);break;case"ready":this.Y0t();break;default:throw new Error(`unknown message from worker '${e}'`)}}H0t(t,s){const e=this.F0t.get(t);if(!e)throw new Error("invalid job ID");e.V0t||e.resolve(s),this.F0t.delete(t)}q0t(t,s){const e=this.F0t.get(t);if(!e)throw new Error("invalid job ID");!e.V0t&&e.progress&&e.progress(s)}J0t(t,s){const e=this.F0t.get(t);if(!e)throw new Error("invalid job ID");e.V0t||e.reject(s),this.F0t.delete(t)}Y0t(){this.$0t&&(this.$0t=!1,this.B0t++,this.B0t<this.N0t?this.j0t():this.L0t.postMessage({type:"_no_more_workers"}))}X0t(){let t=0;const s=[...this.F0t.values()].sort((t,s)=>(t.W0t||1/0)-(s.W0t||1/0));for(const e of s)t<(e.W0t||1/0)&&t++;return t}async j0t(){if(!(this.B0t>=this.N0t||this.$0t||this.U0t||this.X0t()<=this.B0t))try{this.$0t=!0,(await this.Bc.QH("runtime","create-job-worker")).outputPort.onmessage=t=>this.k0t(t)}catch(t){this.U0t=!0,this.$0t=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.B0t} so far)`,t)}}}}self.C3_Shaders={},self.C3_Shaders.overlay={bJt:"precision mediump float;\nvarying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcStart;\nuniform mediump vec2 srcEnd;\nuniform lowp sampler2D samplerBack;\nuniform mediump vec2 destStart;\nuniform mediump vec2 destEnd;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\nmediump vec2 tex = (vTex - srcStart) / (srcEnd - srcStart);\nlowp vec4 back = texture2D(samplerBack, mix(destStart, destEnd, tex));\nfront.r = back.r < 0.5 ? 2.0 * back.r * front.r : 2.0 * (front.r + back.r * front.a - back.r * front.r) - front.a;\nfront.g = back.g < 0.5 ? 2.0 * back.g * front.g : 2.0 * (front.g + back.g * front.a - back.g * front.g) - front.a;\nfront.b = back.b < 0.5 ? 2.0 * back.b * front.b : 2.0 * (front.b + back.b * front.a - back.b * front.b) - front.a;\nfront *= back.a;\ngl_FragColor = front;\n}",vJt:"",SJt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\n%%SAMPLERBACK_BINDING%% var samplerBack : sampler;\n%%TEXTUREBACK_BINDING%% var textureBack : texture_2d<f32>;\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\nvar back : vec4<f32> = textureSample(textureBack, samplerBack, c3_getBackUV(input.fragPos.xy, textureBack));\nvar rgb : vec3<f32> = select(\n2.0 * (front.rgb + back.rgb * front.a - back.rgb * front.rgb) - front.a,\n2.0 * back.rgb * front.rgb,\nback.rgb < vec3<f32>(0.5)\n);\nvar output : FragmentOutput;\noutput.color = vec4<f32>(rgb, front.a) * back.a;\nreturn output;\n}",Mx:!0,Gx:!1,ox:0,ux:0,gx:!1,Sx:!1,vx:!1,xx:!1,animated:!1,parameters:[]};{let eG=function(t,s){const e=t[1],i=s[1];if("number"==typeof e&&"number"==typeof i)return e-i;{const t=""+e,s=""+i;return t<s?-1:t>s?1:0}};ForEachOrdered_SortInstances=eG;const iG=self.Gs;let rG=null,nG="",hG="",oG=[],aG="",lG="",uG="";const cG=iG.Hr(iG.CCt);iG.uq.lq=class extends iG.TDt{constructor(t){super(t),this.SCt=this.Bc.oj().O3(),this.rxt=this.Bc.oj().vj(),this.K0t=0,this.Z0t=0,this.Q0t=new Map}qr(){super.qr()}jH(){this.Bc.jH()}lZ(t){this.Bc.lZ(t,null,null)}t1t(t,s){return rG&&t===nG&&s===hG||(rG=new RegExp(t,s),nG=t,hG=s),rG.lastIndex=0,rG}s1t(t,s,e){if(t===aG&&s===lG&&e===uG)return oG;const i=this.t1t(s,e);return oG=t.match(i),aG=t,lG=s,uG=e,oG}async e1t(t,s){if(!s.length)return;this.K0t+=s.length;const e=[];for(const i of s)e.push(t.Oet(i));await iG.Vh(e,()=>{this.Z0t++}),this.Z0t++,this.Z0t===this.K0t&&(this.Z0t=0,this.K0t=0,this.Bc.lZ(iG.uq.lq.aq.i1t,null,null))}i6(){return 0===this.K0t?1:this.Z0t/this.K0t}r1t(t,s){for(const e of s)0===e.MY()&&t.ket(e)}n1t(){return cG}h1t(t){const s=this.Bc.oj(),e=s.vj(),i=e.A3(),r=i.dj(),n=r.xY(),h=i.rCt(),o=e.E3(r),a=s.O3(),l=a.E3();if(l.bCt(t),h)for(let e=0;e<t&&!l.z3();++e)s.N3(n),l.V3(e),r.B3(i,o),s.U3(n);else for(let s=0;s<t&&!l.z3();++s)l.V3(s),r.B3(i,o);return e.j3(),a.j3(),!1}*o1t(t){const s=this.Bc.oj(),e=s.vj(),i=e.A3(),r=i.dj(),n=r.xY(),h=i.rCt(),o=e.E3(r),a=s.O3(),l=a.E3();if(l.bCt(t),h)for(let e=0;e<t&&!l.z3();++e)s.N3(n),l.V3(e),yield*r.B_t(i,o),s.U3(n);else for(let s=0;s<t&&!l.z3();++s)l.V3(s),yield*r.B_t(i,o);return e.j3(),a.j3(),!1}a1t(){const t=this.Bc.oj(),s=t.vj(),e=s.A3(),i=e.dj(),r=i.xY(),n=e.rCt(),h=s.E3(i),o=t.O3(),a=o.E3();if(n)for(let s=0;!a.z3();++s)t.N3(r),a.V3(s),i.B3(e,h)||a.b1(),t.U3(r);else for(let t=0;!a.z3();++t)a.V3(t),i.B3(e,h)||a.b1();return s.j3(),o.j3(),!1}*l1t(){const t=this.Bc.oj(),s=t.vj(),e=s.A3(),i=e.dj(),r=i.xY(),n=e.rCt(),h=s.E3(i),o=t.O3(),a=o.E3();if(n)for(let s=0;!a.z3();++s)t.N3(r),a.V3(s),(yield*i.B_t(e,h))||a.b1(),t.U3(r);else for(let t=0;!a.z3();++t)a.V3(t),(yield*i.B_t(e,h))||a.b1();return s.j3(),o.j3(),!1}u1t(t,s,e){const i=this.Bc.oj(),r=i.vj(),n=r.A3(),h=n.dj(),o=h.xY(),a=n.rCt(),l=r.E3(h),u=i.O3(),c=u.E3();if(c.F3(t),c.bCt(e),e<s)if(a)for(let t=s;t>=e&&!c.z3();--t)i.N3(o),c.V3(t),h.B3(n,l),i.U3(o);else for(let t=s;t>=e&&!c.z3();--t)c.V3(t),h.B3(n,l);else if(a)for(let t=s;t<=e&&!c.z3();++t)i.N3(o),c.V3(t),h.B3(n,l),i.U3(o);else for(let t=s;t<=e&&!c.z3();++t)c.V3(t),h.B3(n,l);return r.j3(),u.j3(),!1}*c1t(t,s,e){const i=this.Bc.oj(),r=i.vj(),n=r.A3(),h=n.dj(),o=h.xY(),a=n.rCt(),l=r.E3(h),u=i.O3(),c=u.E3();if(c.F3(t),c.bCt(e),e<s)if(a)for(let t=s;t>=e&&!c.z3();--t)i.N3(o),c.V3(t),yield*h.B_t(n,l),i.U3(o);else for(let t=s;t>=e&&!c.z3();--t)c.V3(t),yield*h.B_t(n,l);else if(a)for(let t=s;t<=e&&!c.z3();++t)i.N3(o),c.V3(t),yield*h.B_t(n,l),i.U3(o);else for(let t=s;t<=e&&!c.z3();++t)c.V3(t),yield*h.B_t(n,l);return r.j3(),u.j3(),!1}f1t(t){const s=t.fY(),e=s.cY();if(0===e.length)return!1;const i=this.Bc.oj(),r=i.vj(),n=r.A3(),h=n.dj(),o=h.xY(),a=n.rCt(),l=r.E3(h),u=i.O3(),c=u.E3(),f=t.DK(),d=cG.E3();if(iG.Mh(d,e),c.bCt(d.length),a)for(let s=0,e=d.length;s<e&&!c.z3();++s){i.N3(o);const e=d[s];t.fY().Sxt(e),f&&e.QIt(),c.V3(s),h.B3(n,l),i.U3(o)}else{s.mxt(!1);const t=s.gxt();iG.bh(t),t.push(null);for(let s=0,e=d.length;s<e&&!c.z3();++s){const e=d[s];t[0]=e,f&&e.QIt(),c.V3(s),h.B3(n,l)}}return r.j3(),u.j3(),iG.bh(d),cG.j3(),!1}*d1t(t){const s=t.fY(),e=s.cY();if(0===e.length)return!1;const i=this.Bc.oj(),r=i.vj(),n=r.A3(),h=n.dj(),o=h.xY(),a=n.rCt(),l=r.E3(h),u=i.O3(),c=u.E3(),f=t.DK(),d=cG.E3();if(iG.Mh(d,e),c.bCt(d.length),a)for(let s=0,e=d.length;s<e&&!c.z3();++s){i.N3(o);const e=d[s];t.fY().Sxt(e),f&&e.QIt(),c.V3(s),yield*h.B_t(n,l),i.U3(o)}else{s.mxt(!1);const t=s.gxt();iG.bh(t),t.push(null);for(let s=0,e=d.length;s<e&&!c.z3();++s){const e=d[s];t[0]=e,f&&e.QIt(),c.V3(s),yield*h.B_t(n,l)}}return r.j3(),u.j3(),iG.bh(d),cG.j3(),!1}p1t(t,s){const e=t.fY(),i=e.cY();if(0===i.length)return!1;const r=this.Bc.oj(),n=r.vj(),h=r.gTt(),o=n.A3(),a=o.dj(),l=a.xY(),u=o.rCt(),c=n.E3(a),f=r.O3(),d=f.E3(),p=t.DK(),m=cG.E3();iG.bh(m),d.bCt(i.length);for(let t=0,s=i.length;t<s;++t)m.push([i[t],h.XAt(1,t)]);if(m.sort(eG),1===s&&m.reverse(),u)for(let s=0,e=m.length;s<e&&!d.z3();++s){r.N3(l);const e=m[s][0];t.fY().Sxt(e),p&&e.QIt(),d.V3(s),a.B3(o,c),r.U3(l)}else{e.mxt(!1);const t=e.gxt();iG.bh(t),t.push(null);for(let s=0,e=m.length;s<e&&!d.z3();++s){const e=m[s][0];t[0]=e,p&&e.QIt(),d.V3(s),a.B3(o,c)}}return n.j3(),f.j3(),iG.bh(m),cG.j3(),!1}*m1t(t,s){const e=t.fY(),i=e.cY();if(0===i.length)return!1;const r=this.Bc.oj(),n=r.vj(),h=r.gTt(),o=n.A3(),a=o.dj(),l=a.xY(),u=o.rCt(),c=n.E3(a),f=r.O3(),d=f.E3(),p=t.DK(),m=cG.E3();iG.bh(m),d.bCt(i.length);for(let t=0,s=i.length;t<s;++t)m.push([i[t],h.XAt(1,t)]);if(m.sort(eG),1===s&&m.reverse(),u)for(let s=0,e=m.length;s<e&&!d.z3();++s){r.N3(l);const e=m[s][0];t.fY().Sxt(e),p&&e.QIt(),d.V3(s),yield*a.B_t(o,c),r.U3(l)}else{e.mxt(!1);const t=e.gxt();iG.bh(t),t.push(null);for(let s=0,e=m.length;s<e&&!d.z3();++s){const e=m[s][0];t[0]=e,p&&e.QIt(),d.V3(s),yield*a.B_t(o,c)}}return n.j3(),f.j3(),iG.bh(m),cG.j3(),!1}g1t(t,s){let e=this.Q0t.get(t);return e||(s?(e={y1t:null,S1t:new Map},this.Q0t.set(t,e),e):null)}w1t(t,s,e,i,r){s.cj().Q_t(e,s.gj()),i&&t.U3(r)}*v1t(t,s,e,i,r){yield*s.cj().tPt(e,s.gj()),i&&t.U3(r)}}}{const fG=self.Gs;fG.uq.lq.kBt=class extends fG.zr{constructor(t){super(),this.Ybt=t,this.Bc=t.Sq(),this.fLt=t.tY()}YDt(){}qr(){this.Ybt=null,this.Bc=null,this.fLt=null}}}{const dG=self.Gs;dG.uq.lq.Instance=class extends dG.zr{constructor(t,s){super(),this.fe=t,this.Ybt=this.fe.yY(),this.SLt=this.Ybt.IEt(),this.Bc=this.fe.Sq()}qr(){this.fe=null,this.Ybt=null,this.SLt=null,this.Bc=null}}}{const pG=self.Gs,mG=[];pG.uq.lq.aq={b1t:()=>!0,ait:()=>!0,git:()=>!0,lQt:()=>!0,uQt:()=>!0,_j(){return this.Bc._j()},kGt(){const t=this.Bc.mTt();return!t.Qxt()&&!t.Kxt()},x1t(){const t=this.Bc.gTt().kAt();let s=t.get("TriggerOnce_lastTick");void 0===s&&(s=-1,t.set("TriggerOnce_lastTick",-1));const e=this.Bc.Lj();return t.set("TriggerOnce_lastTick",e),this.Bc.XQt()||s!==e-1},C1t(t){const s=this.Bc.gTt().kAt(),e=s.get("Every_lastTime")||0,i=this.Bc.Fj();s.has("Every_seconds")||s.set("Every_seconds",t);const r=s.get("Every_seconds");return i>=e+r?(s.set("Every_lastTime",e+r),i>=s.get("Every_lastTime")+.04&&s.set("Every_lastTime",i),s.set("Every_seconds",t),!0):(i<e-.1&&s.set("Every_lastTime",i),!1)},QMt(t){const s=this.Bc.oj().DTt(t);return s&&s.QMt()},FYt(){return this.Bc.FYt()},oe:()=>pG.Zs.oe,WZt:()=>!0,oq:()=>!0,T1t:()=>!0,a0t:()=>!0,d0t:()=>!0,u0t:()=>!0,c0t:()=>!0,M1t(t){return!!this.Bc.EH(t)},I1t(t){switch(t){case 0:return"browser"===pG.Zs.ne;case 1:return"iOS"===pG.Zs.Qs;case 2:return"Android"===pG.Zs.Qs;case 8:return"cordova"===pG.Zs.ne;case 9:return"scirra-arcade"===this.Bc.eJ();case 13:return"windows-uwp"===this.Bc.eJ();default:return!1}},G1t(t,s,e){return this.t1t(s,e).test(t)},_1t:(t,s,e)=>pG.compare(t,s,e),P1t:(t,s,e)=>t>=s&&t<=e,R1t:(t,s,e)=>pG.compare(t.Hct(),s,e),A1t:t=>!!t.Hct(),E1t(t,s){const e=this.Bc.Fj();if(0===t){const t=this.Bc.gTt().kAt();return!t.get("CompareTime_executed")&&e>=s&&(t.set("CompareTime_executed",!0),!0)}return pG.compare(e,t,s)},O1t:t=>isNaN(t),HFt:(t,s,e)=>pG.ln(pG.tn(t),pG.tn(e))<=pG.tn(s),qFt:(t,s)=>pG.cn(pG.tn(t),pG.tn(s)),iOt(t,s,e){let i=pG.tn(t),r=pG.tn(s),n=pG.tn(e);return pG.cn(n,r)?pG.cn(i,r)&&!pG.cn(i,n):!(!pG.cn(i,r)&&pG.cn(i,n))},F1t:(t,s)=>"number"==typeof t?0===s:1===s,D1t:t=>!!t,AMt(t){return t.toLowerCase()===this.Bc.oj().DMt()},L1t(t,s,e,i){if(!t)return!1;const r=this.n1t(),n=r.E3(),h=t.fY();pG.Mh(n,h.cY()),h.axt()&&pG.bh(h.yxt());const o=this.Bc.gTt();let a=0;for(let t=0,r=n.length;t<r;++t){const r=n[t];n[a]=r,s=o.XAt(1,t),i=o.XAt(3,t),pG.compare(s,e,i)?++a:h.pxt(r)}pG.wh(n,a),h.wxt(n);const l=!!n.length;return pG.bh(n),r.j3(),t.q_t(),l},k1t(t,s){if(!t)return!1;const e=this.n1t(),i=e.E3(),r=t.fY();pG.Mh(i,r.cY()),r.axt()&&pG.bh(r.yxt());const n=this.Bc.gTt();let h=0;for(let t=0,s=i.length;t<s;++t){const s=i[t];i[h]=s,n.XAt(1,t)?++h:r.pxt(s)}pG.wh(i,h),r.wxt(i);const o=!!i.length;return pG.bh(i),e.j3(),t.q_t(),o},N1t(t,s,e){if(!t)return!1;const i=t.fY(),r=i.cY();if(0===r.length)return!1;const n=this.Bc.gTt();let h=null,o=0;for(let t=0,i=r.length;t<i;++t){const i=r[t];e=n.XAt(2,t),(null===h||0===s&&e<o||1===s&&e>o)&&(o=e,h=i)}return i.Txt(h),t.q_t(),!0},B1t(t,s){if(!t)return!1;const e=t.fY(),i=e.cY();if((s=Math.floor(s))>=i.length)return!1;const r=i[s];return e.Txt(r),t.q_t(),!0},$1t(t){if(!t)return!1;const s=t.fY(),e=s.cY(),i=Math.floor(this.Bc.fH()*e.length);if(i>=e.length)return!1;const r=e[i];return s.Txt(r),t.q_t(),!0},U1t:t=>!!t&&(!!t.MY()&&(t.fY().mxt(!0),t.q_t(),!0)),V1t(t,s,e){if(!t)return!1;const i=t.fY(),r=i.cY(),n=this.Bc.dj().Mxt(),h=this.Bc.gTt().EAt();i.axt()?(pG.Mh(mG,r),i.oxt(),i.mxt(!1)):n?(pG.Mh(mG,i.yxt()),pG.bh(i.yxt())):(pG.Mh(mG,i.gxt()),pG.bh(i.gxt()));for(let t=0,r=mG.length;t<r;++t){const r=mG[t];pG.xor(r.kH().wQ(s,e),h)?i.dxt(r):i.pxt(r)}return t.q_t(),pG.xor(!!i.gxt().length,h)},W1t(t){if(!t)return!1;const s=t.mY();let e=null;const i=this.Bc.I$t();for(let r=i.length-1;r>=0;--r){const n=i[r];if(s){if(n.yY().EEt(t)){e=n;break}}else if(n.yY()===t){e=n;break}}if(!e){const s=t.cY();s.length&&(e=s.at(-1))}return!!e&&(t.fY().Txt(e),t.q_t(),!0)},z1t(t){return this.Bc.AOt()?this.o1t(t):this.h1t(t)},j1t(){return this.Bc.AOt()?this.l1t():this.a1t()},H1t(t,s,e){return this.Bc.AOt()?this.c1t(t,s,e):this.u1t(t,s,e)},zd(t){return this.Bc.AOt()?this.d1t(t):this.f1t(t)},q1t(t,s,e){return this.Bc.AOt()?this.m1t(t,e):this.p1t(t,e)},J1t:t=>!!t&&t.DX(),Y1t:t=>!!t&&t.WX(),X1t:t=>!!t&&t.$X(),K1t:t=>!!t&&!t.MY(),Z1t:(t,s,e)=>!!t&&pG.compare(100*t.FO(),s,e),Q1t(t){const s=this.Bc.dH();return!!s&&s.yet(t)},i1t:()=>!0,t2t(){return this.K0t>0},s2t(t,s){const e=this.Bc.NUt();return!!e&&!!s&&!!e.ZSt(t,s)}}}{let gG=function(t,s){const e=t[0]-s[0];return 0!==e?e:t[1]-s[1]},yG=function(t,s){return t[1]-s[1]};SortZOrderList=gG,SortInstancesByValue=yG;const SG=self.Gs,wG=[],vG=[],bG=SG.Hr(SG.Rect),xG=SG.Hr(SG.To),CG=[];SG.uq.lq.qdt={e2t(t,s){t.Pft(s)},i2t(t,s){t.Xe()&&"number"!=typeof s&&(s=parseFloat(s)),t.Pft(t.Hct()+s)},r2t(t,s){t.Xe()&&t.Pft(t.Hct()-s)},n2t(t,s){t.Pft(!!s)},h2t(t){t.Pft(!t.Hct())},o2t(t){t.Pft(t.pTt())},a2t(t){this.Bc.oj().OTt(t)},l2t(t,s,e,i,r,n){if(!t||!s)return;const h=this.Bc.GY(t,s,e,i,r,n);if(!h)return;r&&s._Y(h);const o=this.Bc.oj();o.PY(!0),h.RY(),o.PY(!1);const a=new Map;h.PUt(a,t,r);for(const[t,s]of a)t.fY().vxt(s)},u2t(t,s,e,i,r,n){if(!t||!s)return;const h=this.Bc.JZt(t);h&&SG.uq.lq.qdt.l2t.call(this,h,s,e,i,r,n)},q7(t,s,e,i,r,n,h,o,a,l,u){if(!t)return;const c=this.Bc.DH();let f=c;if(n){const t=this.Bc.gH().zit(n);if(!t)return;f=t}let d=null;if(("number"!=typeof h||h>=0)&&(d=f.BH(h),!d))return;let p=null;if(("number"!=typeof o||o>=0)&&(p=c.BH(o),!p))return;bG.set(s,e,i,r);const m=f.q7(t,bG,d,p,a,l,u);t.fY().wxt(m),t.q_t()},c2t(){const t=this.SCt;t.pCt()&&t.fCt().b1()},tIt(t,s){const e=this.Bc.oj().DTt(t);e&&(0===s?e.tIt(!1):1===s?e.tIt(!0):e.tIt(!e.QMt()))},f2t(t){this.Bc.Uj(t)},d2t(t,s){if(s<0&&(s=0),!t)return;const e=t.fY().cY();for(const t of e)t.Uj(s)},p2t(t){if(!t)return;const s=t.fY().cY();for(const t of s)t.zK()},ph(t,s){if(t<0)return;const e=this.Bc.oj().mMt();return s?e.mDt(t):e.gDt(t),!0},Mj(t){return this.Bc.oj().mMt().yDt(t),!0},m2t(){const t=this.Bc.oj();return t.mMt().SDt(t.RMt()),!0},Cj(t){this.Bc.oj().Cj(t)},async nq(t,s,e,i,r,n){const h=this.Bc._H();h&&(this.jH(),await h.nq(0===t?"image/png":"image/jpeg",s/100,e,i,r,n),await this.Bc.hq(SG.uq.lq.aq.oq,null))},g2t(t,s){if(t<=0||s<=0)return;this.Bc.kJt(t,s),this.Bc.DH().ust();const e=this.Bc._H();e&&("off"===e.RJt()||this.Bc.XZt(t,s),e.tA(e.R2(),e.A2(),!0),this.Bc.jH())},y2t(t){const s=this.Bc._H();s&&"off"!==s.RJt()&&(s.zJt(0!==t?"high":"low"),s.tA(s.R2(),s.A2(),!0))},uct(t){this.Bc.QQt(t)},S2t(){this.Bc.t0t()},w2t(t){this.Bc.s0t(t)},v2t(t){this.Bc.TFt(t)},b2t(t){},x2t(){for(const t of this.Bc.gH().wH())t.Mit()},C2t(t){this.Bc.hH(0!==t)},T2t(t,s){this.Bc.rH(1/t),this.Bc.sH(1/s)},M2t(t,s){this.Bc.sH(t),this.Bc.rH(s)},I2t(t){this.Bc.Zj(["vsync","unlimited-tick","unlimited-frame"][t])},G2t(t,s){if(!t)return;const e=t.fY().cY(),i=wG,r=vG,n=this.Bc.DH(),h=t.mY(),o=t.dRt();for(let t=0,n=e.length;t<n;++t){const n=e[t],a=n.kH();if(!a||a.NH())continue;let l;l=h?n.$pt(s+n.yY().fRt(o)):n.$pt(s),i.push([a.BH().Mz(),a.$H()]),r.push([n,l])}if(!i.length)return;i.sort(gG),r.sort(yG);let a=!1;for(let t=0,s=i.length;t<s;++t){const s=r[t][0],e=n.UH(i[t][0]),h=i[t][1],o=e.VH();o[h]!==s&&(o[h]=s,s.kH().WH(e,!0),e.zH(s),a=!0)}a&&this.Bc.jH(),SG.bh(wG),SG.bh(vG)},jq(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.Bc.Ez().jq(t,s)},_2t(t){if(this.Bc.DS())return;const s=this.Bc.gH();s.bH()||s.xH(t)},P2t(t){if(this.Bc.DS())return;const s=this.Bc.gH();if(s.bH())return;const e=s.zit(t);e&&s.xH(e)},R2t(t){if(this.Bc.DS())return;const s=this.Bc.gH();if(s.bH())return;const e=s.wH(),i=e.indexOf(s.dH());if(t&&0===i)return;if(!t&&i===e.length-1)return;const r=e[i+(t?-1:1)];s.xH(r)},A2t(){if(this.Bc.DS())return;const t=this.Bc.gH();t.bH()||(t.xH(t.dH()),this.Bc.oj().BTt())},E2t(t,s){t&&t.OX(s)},O2t(t,s){t&&t.NX(s)},F2t(t,s){t&&t.UX(s)},D2t(t,s){t&&t.LO(s/100)},L2t(t,s){t&&t.zX(s)},k2t(t,s){t&&t.qX(s)},N2t(t,s){t&&t.JY(SG.tn(+s))},B2t(t,s,e){t&&(t.fK(!0),t.XY(s),t.ZY(e))},$2t(t){t&&t.fK(!1)},U2t(t,s,e){t&&t.M9(s/100,e/100)},V2t(t,s){t&&t.mC(+s)},W2t(t,s){t&&t.eK(1===s)},z2t(t,s){if(!t)return;xG.ta(s),xG.Zr();const e=t.cK();e.Ho(xG)||(e.ko(xG),this.jH())},j2t(t,s){t&&t.nK(s)},H2t(t,s){t&&t.Zx(s)},q2t(t,s,e){if(!t)return;const i=t.VY().sdt(e);if(!i)return;const r=1===s;i.zIt()!==r&&(i.pjt(r),t.F0(),this.Bc.jH())},J2t(t,s,e,i){if(!t)return;const r=t.VY(),n=r.sdt(s);if(!n)return;e=Math.floor(e);const h=n.QI().sG(e);h&&("color"===h?(xG.ta(i),i=xG):"percent"===h&&(i/=100),r.L0(n.Mz(),e,i)&&n.zIt()&&this.Bc.jH())},Y2t(t,s){t&&t.aK(s)},X2t(t){this.Bc.DH().HY(+t)},K2t(t){this.Bc.DH().JY(SG.tn(+t))},Z2t(t,s){const e=this.Bc.DH(),i=e.VY().sdt(s);if(!i)return;const r=1===t;i.zIt()!==r&&(i.pjt(r),e.F0(),this.Bc.jH())},Q2t(t,s,e){const i=this.Bc.DH().VY(),r=i.sdt(t);if(!r)return;s=Math.floor(s);const n=r.QI().sG(s);n&&("color"===n?(xG.ta(e),e=xG):"percent"===n&&(e/=100),i.L0(r.Mz(),s,e)&&r.zIt()&&this.Bc.jH())},t3t(t,s){this.Bc.DH().wX(t/100,s/100)},s3t(t){const s=this.Bc.DH();0===t?s.xX():s.CX()},e3t(t){this.Bc.DH().XY(t)},i3t(t){this.Bc.DH().ZY(t)},r3t(t,s){const e=this.Bc.DH();e.XY(t),e.ZY(s)},n3t(t){if(!t)return;const s=t.wOt();if(!s)return;const e=s.kH();if(!e)return;const i=this.Bc.DH();i.XY(e.lC()),i.ZY(e.fC())},cX(t,s,e){const i=this.Bc.DH();try{i.cX(t,s,e)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},dX(t,s,e){if(!t)return;const i=this.Bc.DH();try{i.dX(t,s,e)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}},mX(t){t&&this.Bc.DH().mX(t)},yX(){this.Bc.DH().yX()},async h3t(t){const s=this.Bc.dH();if(!s||!t||this.Bc.DS())return;const e=t.mY()?t.NY():[t];await this.e1t(s,e)},async o3t(t){await SG.uq.lq.qdt.h3t.call(this,this.Bc.JZt(t))},a3t(t){const s=this.Bc.dH();if(!s||!t)return;const e=t.mY()?t.NY():[t];this.r1t(s,e)},l3t(t){SG.uq.lq.qdt.a3t.call(this,this.Bc.JZt(t))},u3t(){const t=this.Bc.dH();if(!t)return;const s=t.Ret();this.r1t(t,s)},async c3t(t){const s=this.Bc.dH();t&&s&&!this.Bc.DS()&&await this.e1t(s,t.Get())},async f3t(t){const s=this.Bc.dH(),e=this.Bc.gH().zit(t);e&&s&&!this.Bc.DS()&&await this.e1t(s,e.Get())},xj(t){const s=this.rxt.wj();if(s)switch(s.bj()){case 1:"number"==typeof t&&s.xj(t);break;case 2:"string"==typeof t&&s.xj(t);break;case 3:s.xj(t)}},d3t(t,s,e){const i=this.g1t(t.toLowerCase(),!0),r=i.S1t,n=s.toLowerCase();r.has(n)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`);const h=SG.$h(r.values())||i.y1t;h&&0!==h.yj()!=(0!==e.yj())?console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`):r.set(n,e)},p3t(t,s){const e=this.g1t(t.toLowerCase(),!0);e.y1t&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`);const i=SG.$h(e.S1t.values())||e.y1t;i&&0!==i.yj()!=(0!==s.yj())?console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`):e.y1t=s},m3t(t,s,e){const i=this.Bc,r=i.AOt()?CG:null;e=Math.floor(e);const n=this.g1t(t.toLowerCase(),!1);if(!n)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),r;let h=n.S1t.get(s.toLowerCase());if(!h){if(!n.y1t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),r;h=n.y1t,e=0}if(!h.Gu())return r;if(0!==h.yj())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),r;const o=i.oj(),a=o.dj(),l=a.fj(),u=l.length>0;u&&(h.gj()?o.N3(l):o.dMt(l));const c=[],f=o.hIt(a);if(f){const t=f.aIt();for(let s=e,i=t.length;s<i;++s)c.push(t[s].Hct())}const d=h.aIt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].pTt());return i.AOt()?this.v1t(o,h,c,u,l):this.w1t(o,h,c,u,l)}}}{const TG=self.Gs,MG=TG.Hr(TG.To);TG.uq.lq.Jdt={g3t:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t)&&(t=0)),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t)&&(t=0)),t},P:t=>t.toString(),kt:t=>"string"==typeof t?t.length:0,random(t,s){return void 0===s?this.Bc.fH()*t:this.Bc.fH()*(s-t)+t},KPt(...t){return t[Math.floor(this.Bc.fH()*t.length)]},y3t:(t,...s)=>("number"!=typeof t&&(t=0),s[t=TG.Zr(Math.floor(t),0,s.length-1)]),S3t:()=>Math.PI,w3t:()=>1/0,sqrt:t=>Math.sqrt(t),abs:t=>Math.abs(t),round:t=>Math.round(t),v3t(t,s){s=Math.max(Math.floor(s),0);const e=Math.pow(10,s);return Math.round((t+Number.EPSILON)*e)/e},floor:t=>Math.floor(t),ceil:t=>Math.ceil(t),sign:t=>Math.sign(t),sin:t=>Math.sin(TG.tn(t)),cos:t=>Math.cos(TG.tn(t)),tan:t=>Math.tan(TG.tn(t)),asin:t=>TG.sn(Math.asin(t)),acos:t=>TG.sn(Math.acos(t)),atan:t=>TG.sn(Math.atan(t)),exp:t=>Math.exp(t),Wt:t=>Math.log(t),log10:t=>Math.log10(t),max(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let e=1,i=t.length;e<i;++e){let i=t[e];"number"==typeof i&&s<i&&(s=i)}return s},min(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let e=1,i=t.length;e<i;++e){let i=t[e];"number"==typeof i&&s>i&&(s=i)}return s},Zr:(t,s,e)=>TG.Zr(t,s,e),bt:(t,s,e,i)=>TG.nn(t,s,e,i),angle:(t,s,e,i)=>TG.sn(TG.an(t,s,e,i)),Gt:(t,s,e)=>TG.Gt(t,s,e),gn:(t,s,e)=>TG.gn(t,s,e),Sn:(t,s,e,i)=>TG.Sn(t,s,e,i),wn:(t,s,e,i,r)=>TG.wn(t,s,e,i,r),vn:(t,s,e)=>TG.vn(t,s,e),b3t:(t,s)=>TG.sn(TG.ln(TG.tn(t),TG.tn(s))),x3t:(t,s,e)=>TG.sn(TG.fn(TG.tn(t),TG.tn(s),e)),C3t:(t,s,e)=>TG.sn(TG.un(TG.tn(t),TG.tn(s),TG.tn(e))),T3t:(t,s,e)=>(t|=0)&~(1<<(s|=0))|(e=0!==e?1:0)<<s,M3t:(t,s)=>(t|=0)^1<<s,I3t:(t,s)=>(t|=0)&1<<(s|=0)?1:0,G3t:()=>"\n",_3t:t=>"string"==typeof t?t.toUpperCase():"",P3t:t=>"string"==typeof t?t.toLowerCase():"",left:(t,s)=>"string"==typeof t?t.substr(0,s):"",mid:(t,s,e)=>"string"!=typeof t?"":e<0?t.substr(s):t.substr(s,e),right:(t,s)=>"string"==typeof t?t.substr(Math.max(t.length-s,0)):"",trim:t=>"string"==typeof t?t.trim():"",R3t(t,s,e){if("string"!=typeof t||"string"!=typeof e)return"";let i=t.split(e);return(s=Math.floor(s))<0||s>=i.length?"":i[s]},A3t:(t,s)=>"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0,find:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(TG.Je(s),"i")):-1,E3t:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(TG.Je(s),"")):-1,replace:(t,s,e)=>"string"==typeof t&&"string"==typeof s&&"string"==typeof e?t.replace(new RegExp(TG.Je(s),"gi"),e):"string"==typeof t?t:"",O3t(t,...s){let e=t;for(let t=0,i=s.length;t<i;++t)e=e.replaceAll(`{${t}}`,s[t].toString());return e},F3t(t,s,e){const i=this.t1t(s,e);return t?t.search(i):-1},D3t(t,s,e,i){const r=this.t1t(s,e);return t?t.replace(r,i):""},L3t(t,s,e){const i=this.s1t(t.toString(),s,e);return i?i.length:0},k3t(t,s,e,i){i=Math.floor(i);const r=this.s1t(t.toString(),s,e);return!r||i<0||i>=r.length?"":r[i]},N3t(t,s){let e=t<0?"-":"";t<0&&(t=-t);const i=s-t.toString().length;return e+="0".repeat(Math.max(i,0)),e+t.toString()},B3t:t=>encodeURIComponent(t),$3t:t=>decodeURIComponent(t),Pj(){return this.Bc.Tnt()},U3t(){return this.Bc.Mnt()},V3t(){return this.Bc.$j()},W3t(){return(Date.now()-this.Bc.UQt())/1e3},z3t:()=>Date.now(),time(){return this.Bc.Fj()},j3t(){return this.Bc.Lj()},H3t(){return this.Bc.zQt()},Vj(){return this.Bc.Wj()},q3t(){return this.Bc.qj()},J3t(){return this.Bc.Yj()},Y3t(){return this.Bc._H().gJ()},X3t(){return this.Bc._H().SJ()},K3t(){return this.Bc.Xz()},Z3t(){return this.Bc.Zz()},Q3t(){return this.Bc.Xz()},t4t(){return this.Bc.Zz()},s4t(){return this.Bc.DH().KY()},e4t(){return this.Bc.DH().QY()},i4t(){return this.Bc.DH().Rc()},r4t(){return this.Bc.DH().qY()},n4t(){return TG.sn(this.Bc.DH().YY())},h4t(){return this.Bc.DH().Cy()},o4t(){return this.Bc.DH().My()},a4t(){return 100*this.Bc.DH().uet()},l4t(){return 100*this.Bc.DH().cet()},u4t(t){const s=this.Bc.DH().BH(t);return s?s.S9().Qa():0},c4t(t){const s=this.Bc.DH().BH(t);return s?s.S9().tl():0},f4t(t){const s=this.Bc.DH().BH(t);return s?s.S9().sl():0},d4t(t){const s=this.Bc.DH().BH(t);return s?s.S9().el():0},p4t(t){const s=this.Bc.DH().BH(t);return s?s.S9().width():0},m4t(t){const s=this.Bc.DH().BH(t);return s?s.S9().height():0},g4t(t){const s=this.Bc.DH().BH(t);if(s){const t=s.S9();return(t.Qa()+t.sl())/2}return 0},y4t(t){const s=this.Bc.DH().BH(t);if(s){const t=s.S9();return(t.tl()+t.el())/2}return 0},S4t(t,s,e){const i=this.Bc.DH().BH(t);return i?i.gK(s,e)[0]:0},w4t(t,s,e){const i=this.Bc.DH().BH(t);return i?i.gK(s,e)[1]:0},v4t(t,s,e){const i=this.Bc.DH().BH(t);return i?i.SK(s,e)[0]:0},b4t(t,s,e){const i=this.Bc.DH().BH(t);return i?i.SK(s,e)[1]:0},x4t(t,s,e,i){const r=this.Bc.DH(),n=r.BH(t),h=r.BH(s);if(!n||!h||n===h)return e;const[o,a]=n.SK(e,i);return h.gK(o,a)[0]},C4t(t,s,e,i){const r=this.Bc.DH(),n=r.BH(t),h=r.BH(s);if(!n||!h||n===h)return i;const[o,a]=n.SK(e,i);return h.gK(o,a)[1]},T4t(t){const s=this.Bc.DH().BH(t);return s?s.jX():0},M4t(t){const s=this.Bc.DH().BH(t);return s?TG.sn(s.YX()):0},I4t(t){const s=this.Bc.DH().BH(t);return s?100*s.FO():0},G4t(t){const s=this.Bc.DH().BH(t);return s?s.JX():0},_4t(t){const s=this.Bc.DH().BH(t);return s?s.KY():0},P4t(t){const s=this.Bc.DH().BH(t);return s?s.QY():0},R4t(t){const s=this.Bc.DH().BH(t);return s?100*s.ZX():0},A4t(t){const s=this.Bc.DH().BH(t);return s?100*s.sK():0},E4t(t){const s=this.Bc.DH().BH(t);return s?s.pC():0},O4t(t){const s=this.Bc.DH().BH(t);return s?s.Mz():-1},F4t(){const t=this.Bc._H();return t?t.mYt():""},D4t(t){const s=this.SCt;if(!s.pCt())return 0;if(t){const e=s.gCt(t);return e?e.Mz():0}return s.fCt().Mz()},L4t(){return this.Bc.e0t()},k4t(t,s,...e){const i=this.g1t(t.toLowerCase(),!1);if(!i)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let r=i.S1t.get(s.toLowerCase());if(!r){if(!i.y1t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;r=i.y1t}const n=r.yj(),h=r.lj();if(0===n)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!r.Gu())return h;const o=this.Bc.oj(),a=o.dj().fj(),l=a.length>0;l&&(r.gj()?o.N3(a):o.dMt(a));const u=r.aIt();for(let t=e.length,s=u.length;t<s;++t)e.push(u[t].pTt());const c=r.cj(),f=c.mj(c.fj(),r.gj(),n,h,null,...e);return l&&o.U3(a),f},N4t(){return this.Bc.Pz().lH()},B4t(){return this.i6()},t_(){return this.Bc.ZJt()?"webgpu":"webgl"},$4t(){return this.Bc.ZJt()?this.Bc.ZJt().WB():this.Bc.KJt().WF()},U4t(){let t=this.Bc.Rx().Zb();return Math.round(100*t/1048576)/100},V4t:(t,s,e)=>TG.Gn(t,s,e),W4t:(t,s,e)=>TG.Pn(t/100,s/100,e/100),z4t:(t,s,e,i)=>TG._n(t/100,s/100,e/100,i/100),j4t:(t,s,e)=>TG.Pn(t/255,s/255,e/255),H4t:(t,s,e,i)=>TG._n(t/255,s/255,e/255,i/255),q4t:t=>(MG.Po(0,0,0,1),MG.ra(t),TG._n(MG.No(),MG.Bo(),MG.$o(),MG.Uo())),J4t:t=>(MG.ta(t),MG.ia(1!==MG.Uo())),Y4t(){return this.Bc.Lz()},X4t(){return this.Bc.Nz()},K4t(){return this.Bc.$z()},Z4t(){return this.Bc.Vz()},Q4t(){return this.Bc.dj().pet().Rc()},t5t(){return this.Bc.dj().r_t()},s5t(){return this.Bc.Pz().kq().length},e5t(t){t=Math.floor(t);const s=this.Bc.Pz().kq();return t<0||t>=s.length?"":s[t].name}}}{const IG=self.Gs;IG.uq.Text=class extends IG.TDt{constructor(t){super(t)}qr(){super.qr()}}}{const GG=self.Gs;GG.uq.Text.kBt=class extends GG.cLt{constructor(t){super(t)}qr(){super.qr()}YDt(){}Eet(t){}Net(){}}}{const _G=self.Gs,PG=self.Ns,RG=[0,0,0],AG=0,EG=1,OG=2,FG=3,DG=4,LG=5,kG=6,NG=7,BG=8,$G=9,UG=10,VG=11,WG=12,zG=13,jG=15,HG=["left","center","right"],qG=["top","center","bottom"],JG=["ltr","rtl"],YG=["word","cjk","character"],XG=new _G.Rect,KG=new _G.Pl,ZG=new _G.To,QG=_G.Hr(_G.Pa),t_=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]);_G.uq.Text.Instance=class extends _G.zLt{constructor(t,s){if(super(t),this.$c="",this.i5t=!0,this.r5t="Arial",this.n5t=12,this.h5t=0,this.OP=!1,this.FP=!1,this.qx=_G.Hr(_G.To),this.$P=0,this.UP=0,this.zP="word",this.jP=0,this.o5t="auto",this.a5t=1,this.l5t=null,this.u5t="",this.c5t=!1,this.f5t=!1,this.d5t=null,this.p5t=-1,this.m5t=-1,this.g5t=0,this.y5t=_G.Hr(_G.JS.sx,this.Bc.Rx(),{timeout:5}),this.y5t.CR=()=>this.Bc.jH(),this.S5t=()=>this.w5t(),this.v5t=!1,this.b5t=()=>this.x5t(),s){this.$c=s[AG],this.i5t=!!s[EG],this.r5t=s[OG],this.n5t=s[FG],this.h5t=s[DG],this.OP=!!s[LG],this.FP=!!s[kG],this.$P=s[BG],this.UP=s[$G],this.zP=YG[s[UG]],this.jP=s[VG],this.C5t(this.Bc.R3(s[WG]));const t=s[NG];this.qx.Ro(t[0],t[1],t[2]),this.kH().OX(s[zG]),this.f5t=!!s[jG]}this.T5t(),this.M5t(),this.Bc.wf().addEventListener("beforerender",this.b5t)}qr(){this.Bc.wf().removeEventListener("beforerender",this.b5t),this.b5t=null,this.C5t(null),this.I5t(),this.d5t&&(this.d5t.qr(),this.d5t=null),this.y5t.qr(),this.y5t=null,super.qr()}T5t(){const t=this.y5t;t.Wc(this.$c),t.IR(this.i5t),this.y5t.MP()&&this.l5t?this.y5t.ey(this.Sq().KQt(this.l5t)):this.y5t.ey(null),t.GR("nearest"!==this.Bc.PU()),t._R(this.r5t),t.ER(this.h5t),t.FR(this.OP),t.LR(this.FP),t.Qx(this.qx),t.WR(HG[this.$P]),t.jR(qG[this.UP]),t.qR(this.zP),t.YR(JG[this.jP])}G5t(){const t=this.kH();this.y5t.Wc(this.$c),this.y5t.PR(this.n5t),this.y5t.AR(t.$Wt());const s=t.BH();let e;"auto"===this.o5t?(e=s.mtt(t.KZ()),this.y5t.ZR(!1)):"fixed"===this.o5t&&(e=this.a5t,this.y5t.ZR(!0)),t.h0()&&e!==this.y5t.sA()&&t.Wzt(!0),this.y5t.tA(t.Cy(),t.My(),e)}C5t(t){t&&(t.mY()||t.tY().constructor!==_G.uq.adt)||t!==this.l5t&&(this.l5t&&this.l5t.wf().removeEventListener("animationframeimagechange",this.S5t),this.l5t=t,this.l5t&&this.l5t.wf().addEventListener("animationframeimagechange",this.S5t),this.T5t(),this.c5t=!1,this.Bc.jH())}w5t(){this.Bc.ZQt(this.l5t),this.Bc.jH(),this.v5t=!0}M5t(){if(this.f5t){let t=this.$c;this.i5t&&(t=_G.pr.Lg(t)),this.d5t?this.d5t.Wc(t):this.d5t=_G.Hr(_G.Nc,this.Bc,t)}else this.d5t&&(this.d5t.qr(),this.d5t=null)}x5t(){const t=this.kH(),s=t.BH(),e=t.yH();t.DX()&&t.Htt(s.pK(),e.jtt(),e.TX())&&(this._5t(),this.y5t.AM())}_5t(){this.G5t(),this.v5t&&(this.v5t=!1,this.y5t.MP()&&this.l5t&&this.y5t.ey(this.Sq().KQt(this.l5t)))}nT(t){const s=this.Bc._H().yYt();s&&this._5t();const e=this.y5t.AM();if(!e)return;const i=this.kH(),r=i.BH();if(0!==i.YY()||0!==r.YY()||0!==i.KZ()||i.h0()||!r.E9()||s)t.BO(e),i.h0()?this.P5t(i,t):this.R5t(i,t);else{const s=i.eQ(),[n,h]=r.xK(s.Bn(),s.$n()),[o,a]=r.xK(s.Wn(),s.zn()),l=n-Math.round(n),u=h-Math.round(h);XG.set(n,h,o,a),XG.offset(-l,-u),KG.Xl(XG);const[c,f]=t.sF(t.vF());t.Yb()?this.Bc._H().U4(t,c,f):(t.oB(!0),KG.wt(c,f)),t.BO(e),t.ab(KG,this.y5t.EA()),t.Yb()?r.W4(t):t.oB(!1)}}R5t(t,s){let e=t.eQ();this.Bc.oH()&&(e=this.A5t(e)),s.ab(e,this.y5t.EA())}P5t(t,s){const e=t.Vzt();if(t.zzt()){t.QZ(XG,KG,!1);let s=KG;this.Bc.oH()&&(s=this.A5t(s)),e.QC(t.o0(),s,this.y5t.EA()),t.Wzt(!1)}e.nT(s,t.KZ())}A5t(t){const s=t.Bn()-Math.round(t.Bn()),e=t.$n()-Math.round(t.$n());return 0===s&&0===e?t:(KG.S(t),KG.offset(-s,-e),KG)}QLt(){const t=this.y5t.AM();return t?[t.Cy(),t.My()]:[100,100]}tkt(){return this.y5t.EA()}ikt(){return!1}xC(){const t={t:this.$c,c:this.qx.toJSON(),fn:this.r5t,ps:this.n5t};return this.i5t&&(t.bbc=this.i5t),0!==this.$P&&(t.ha=this.$P),0!==this.UP&&(t.va=this.UP),"word"!==this.zP&&(t.wr=this.zP),0!==this.h5t&&(t.lho=this.h5t),this.OP&&(t.b=this.OP),this.FP&&(t.i=this.FP),-1!==this.m5t&&(t.tw={st:this.p5t,en:this.m5t,l:this.g5t}),this.l5t&&(t.ioc=this.l5t.s9()),"fixed"===this.o5t&&(t.fs=this.a5t),t}CC(t){if(this.I5t(),this.$c=t.t,this.qx.wa(t.c),this.r5t=t.fn,this.n5t=t.ps,this.i5t=!!t.hasOwnProperty("bbc")&&t.bbc,this.$P=t.hasOwnProperty("ha")?t.ha:0,this.UP=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.zP="boolean"==typeof s?s?"word":"character":s}else this.zP="word";if(this.h5t=t.hasOwnProperty("lho")?t.lho:0,this.OP=!!t.hasOwnProperty("b")&&t.b,this.FP=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const s=t.tw;this.p5t=s.st,this.m5t=s.en,this.g5t=s.l}if(t.hasOwnProperty("ioc")){const s=this.Sq().R3(t.ioc);s&&this.C5t(s)}else this.C5t(null);t.hasOwnProperty("fs")?(this.o5t="fixed",this.a5t=t.fs):this.o5t="auto",this.T5t(),this.M5t(),this.c5t=!1,-1!==this.m5t&&this.DLt()}Rpt(t){switch(t){case AG:return this.KR();case EG:return this.i5t;case OG:return this.E5t();case FG:return this.O5t();case DG:return this.F5t();case LG:return this.D5t();case kG:return this.L5t();case NG:return RG[0]=this.qx.No(),RG[1]=this.qx.Bo(),RG[2]=this.qx.$o(),RG;case BG:return this.k5t();case $G:return this.N5t();case UG:return this.B5t();case jG:return this.$5t()}}Lpt(t,s){switch(t){case AG:this.U5t(s);break;case EG:if(this.i5t===!!s)return;this.i5t=!!s,this.T5t();break;case OG:this.V5t(s);break;case FG:this.W5t(s);break;case DG:this.z5t(s);break;case LG:this.j5t(s);break;case kG:this.H5t(s);break;case NG:const t=this.qx,e=s;if(t.No()===e[0]&&t.Bo()===e[1]&&t.$o()===e[2])return;this.qx.Ro(e[0],e[1],e[2]),this.T5t();break;case BG:this.q5t(s);break;case $G:this.J5t(s);break;case UG:this.Y5t(s)}}$Lt(t,s,e,i){0===s&&0===e&&0===i||t!==NG||(this.qx.Ao(s,e,i),this.T5t())}U5t(t){this.$c!==t&&(this.$c=t,this.M5t(),this.c5t=!1,this.Bc.jH())}KR(){return this.$c}X5t(t,s){this.U5t(t),this.G5t(),this.p5t=this.Bc.Nj(),this.m5t=this.p5t+s/this.J1().VK(),this.g5t=this.y5t.nA(),this.y5t.NR(0),this.DLt()}I5t(){this.p5t=-1,this.m5t=-1,this.g5t=0,this.y5t.NR(-1),this.wLt()}K5t(){-1!==this.m5t&&(this.I5t(),this.lZ(_G.uq.Text.aq.Z5t),this.Bc.jH())}V5t(t){this.r5t!==t&&(this.r5t=t,this.y5t._R(t),this.Bc.jH())}E5t(){return this.r5t}j5t(t){t=!!t,this.OP!==t&&(this.OP=t,this.y5t.FR(t),this.Bc.jH())}D5t(){return this.OP}H5t(t){t=!!t,this.FP!==t&&(this.FP=t,this.y5t.LR(t),this.Bc.jH())}L5t(){return this.FP}W5t(t){this.n5t!==t&&(this.n5t=t,this.Bc.jH())}O5t(){return this.n5t}Q5t(t){this.qx.Ho(t)||(this.qx.ko(t),this.y5t.Qx(this.qx),this.Bc.jH())}t6t(){return this.qx}z5t(t){this.h5t!==t&&(this.h5t=t,this.T5t(),this.Bc.jH())}F5t(){return this.h5t}q5t(t){this.$P!==t&&(this.$P=t,this.T5t(),this.Bc.jH())}k5t(){return this.$P}J5t(t){this.UP!==t&&(this.UP=t,this.T5t(),this.Bc.jH())}N5t(){return this.UP}s6t(t){this.Y5t(YG[t])}Y5t(t){this.zP!==t&&(this.zP=t,this.T5t(),this.Bc.jH())}B5t(){return this.zP}e6t(t){this.jP!==t&&(this.jP=t,this.T5t(),this.Bc.jH())}i6t(){return this.jP}r6t(t){this.f5t=!!t,this.M5t()}$5t(){return this.f5t}n6t(t){this.o5t!==t&&(this.o5t=t,this.Bc.jH())}h6t(){return this.o5t}o6t(t){this.a5t!==t&&(this.a5t=t,"fixed"===this.o5t&&this.Bc.jH())}a6t(){return this.a5t}l6t(){return this.G5t(),this.y5t.eA()}u6t(){return this.G5t(),this.y5t.rA()}c6t(t,s){this.G5t();const e=this.kH();QG.set(t-e.lC(),s-e.fC()),QG.rotate(-e.YY()),QG.offset(e.Cy()*e.WZ(),e.My()*e.HZ()),QG.wt(e.Cy(),e.My()),QG.scale(this.y5t.Cy(),this.y5t.My());const i=this.y5t.oA(QG.Fa(),QG.La());if(i){const t=i.iS("tag");if(t)return t.Rg}return""}f6t(t,s,e){const i=this.c6t(s,e);return i&&_G.Zi(t,i)}d6t(t,s){this.G5t(),s=Math.floor(s);const e=this.y5t.lA(t,s);if(!e)return null;const i=this.kH(),r=this.y5t.UR(),n=e.Zy(),h=e.tS()-(e.My()-e.Gy())*r,o=e.Cy()*r/this.y5t.Cy()*i.Cy(),a=e.My()*r/this.y5t.My()*i.My();return QG.set(n,h),QG.wt(this.y5t.Cy(),this.y5t.My()),QG.scale(i.Cy(),i.My()),QG.offset(-i.Cy()*i.WZ(),-i.My()*i.HZ()),QG.rotate(i.YY()),QG.offset(i.lC(),i.fC()),{x:QG.Fa(),y:QG.La(),width:o,height:a}}p6t(t){return this.G5t(),this.y5t.uA(t)}m6t(t){let s=t_.get(t);return null===s?"":(s||(s="span"),`</${s||"span"}>`)}g6t(t,s){let e=t_.get(t);if(null===e)return"";switch(e||(e="span"),t){case"color":return`<${e} style="color: ${s}">`;case"font":return`<${e} style="font-family: '${s}'">`;case"opacity":return`<${e} style="opacity: ${s}%">`;case"size":return`<${e} style="font-size: ${s}pt">`;case"background":return`<${e} style="background-color: ${s}">`;case"hide":return`<${e} style="visibility: hidden">`;case"class":return`<${e} class="${s}">`;case"tag":return`<${e} data-tag="${s}">`;default:return`<${e}>`}}async y6t(){if(this.c5t)return this.u5t;const t=new _G.pr(this.$c,{mg:!0})._g(),s=new Map;let e='<span class="c3-text"';const i=[];i.push(`font-family: '${this.E5t()}';`),this.D5t()&&i.push("font-weight: bold;"),this.L5t()&&i.push("font-style: italic;"),"character"===this.B5t()&&i.push("word-break: break-all;"),e+=` style="${i.join(" ")}">`;const r=this.l5t?this.Sq().KQt(this.l5t):null;if(this.l5t){const e=_G.Hr(_G.jd),i=[],n=new Map;for(const s of t)if(s.vy()){const t=s.lS(r);if(t){const s=t.zS().s1().vNt();if(n.has(s))continue;n.set(s,null),i.push(e.$u(async()=>{const t=await s.k6();n.set(s,t)}))}}await Promise.all(i);const h=[];for(const i of t)if(i.vy()){const t=i.lS(r);if(t){const i=t.zS(),r=i.s1().vNt();h.push(e.$u(async()=>{const e=await i.s1().xNt(n.get(r));s.set(t,e)}))}}await Promise.all(h);for(const t of n.values())t instanceof ImageBitmap&&t.close&&t.close()}const n=new Map;for(const i of t){const t=i.nS();let h=[...n.keys()];h.reverse();for(const s of h)t.has(s)&&t.get(s)===n.get(s)||(n.delete(s),e+=this.m6t(s));for(const[s,i]of t)n.has(s)||(n.set(s,i),e+=this.g6t(s,i));if(i.zg()&&(e+=_G.Rm(_G._m(i.qg().join("")),"\n","<br>")),i.vy()&&r){const n=i.lS(r);if(n){const r=s.get(n);if(r){const s=[];let h="0.2em";const o=t.get("iconoffsety");if(o){let t=o.trim();h=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}s.push(`top: ${h}`),"nearest"===this.Bc.PU()&&s.push("image-rendering: pixelated"),e+=`<img class="c3-text-icon" data-icon="${i.aS()}" width="${n.Cy()}" height="${n.My()}" style="${s.join(";")}" src="${r}">`}}}}const h=[...n.keys()];h.reverse();for(const t of h)e+=this.m6t(t);return e+="</span>",this.u5t=e,this.c5t=!0,this.u5t}Int(){const t=this.Bc.Nj();if(t>=this.m5t)this.I5t(),this.lZ(_G.uq.Text.aq.Z5t),this.Bc.jH();else{let s=_G.yn(this.p5t,this.m5t,t,0,this.g5t);s=Math.floor(s),s!==this.y5t.BR()&&(this.y5t.NR(s),this.Bc.jH())}}BLt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.KR(),S6t:t=>this.U5t(t)},{name:t+".properties.font.name",value:this.E5t(),S6t:t=>this.V5t(t)},{name:t+".properties.size.name",value:this.O5t(),S6t:t=>this.W5t(t)},{name:t+".properties.line-height.name",value:this.F5t(),S6t:t=>this.z5t(t)},{name:t+".properties.bold.name",value:this.D5t(),S6t:t=>this.j5t(t)},{name:t+".properties.italic.name",value:this.L5t(),S6t:t=>this.H5t(t)},{name:t+".debugger.text-width",value:this.l6t()},{name:t+".debugger.text-height",value:this.u6t()}]}]}XDt(){return self.w6t}};const s_=new WeakMap,e_=new Map([["left",0],["center",1],["right",2]]),i_=new Map([["top",0],["center",1],["bottom",2]]),r_=["ltr","rtl"];self.w6t=class extends self.c0{constructor(){super(),s_.set(this,self.MK._K().g0())}get text(){return s_.get(this).KR()}set text(t){PG.oi(t);const s=s_.get(this);s.I5t(),s.U5t(t)}v6t(t,s){PG.oi(t),PG.ii(s);const e=s_.get(this);e.I5t(),e.X5t(t,s)}b6t(){s_.get(this).K5t()}set j4(t){PG.oi(t),s_.get(this).V5t(t)}get j4(){return s_.get(this).E5t()}set q4(t){s_.get(this).j5t(t)}get q4(){return s_.get(this).D5t()}set J4(t){s_.get(this).H5t(t)}get J4(){return s_.get(this).L5t()}set H4(t){PG.ii(t),s_.get(this).W5t(t)}get H4(){return s_.get(this).O5t()}set x6t(t){if(PG.Ti(t),t.length<3)throw new Error("expected 3 elements");ZG.Ro(t[0],t[1],t[2]),s_.get(this).Q5t(ZG)}get x6t(){const t=s_.get(this).t6t();return[t.No(),t.Bo(),t.$o()]}set lineHeight(t){PG.ii(t),s_.get(this).z5t(t)}get lineHeight(){return s_.get(this).F5t()}set K4(t){PG.oi(t);const s=e_.get(t);if(void 0===s)throw new Error("invalid mode");s_.get(this).q5t(s)}get K4(){return HG[s_.get(this).k5t()]}set verticalAlign(t){PG.oi(t);const s=i_.get(t);if(void 0===s)throw new Error("invalid mode");s_.get(this).J5t(s)}get verticalAlign(){return qG[s_.get(this).N5t()]}set Z4(t){if(!YG.includes(t))throw new Error("invalid mode");s_.get(this).Y5t(t)}get Z4(){return s_.get(this).B5t()}set Q4(t){PG.oi(t);const s=r_.indexOf(t);if(-1===s)throw new Error("invalid text direction");s_.get(this).e6t(s)}get Q4(){return r_[s_.get(this).i6t()]}set C6t(t){s_.get(this).r6t(!!t)}get C6t(){return s_.get(this).$5t()}T6t(t){PG.ii(t);const s=s_.get(this);s.n6t("fixed"),s.o6t(t)}M6t(){s_.get(this).n6t("auto")}get e5(){return s_.get(this).l6t()}get i5(){return s_.get(this).u6t()}I6t(){const t=s_.get(this);return[t.l6t(),t.u6t()]}G6t(t,s,e){return PG.oi(t),PG.ii(s),PG.ii(e),s_.get(this).f6t(t,s,e)}_6t(t,s){return PG.ii(t),PG.ii(s),s_.get(this).c6t(t,s)}P6t(t,s=0){return PG.oi(t),PG.ii(s),s_.get(this).d6t(t,s)}R6t(t){return PG.oi(t),s_.get(this).p6t(t)}A6t(t){const s=s_.get(this),e=s.Sq().Yq(t);s.C5t(e)}E6t(){return s_.get(this).y6t()}}}{const n_=self.Gs;n_.uq.Text.aq={O6t(t,s){return s?this.$c===t:n_.Zi(this.$c,t)},F6t(){return-1!==this.m5t},Z5t:()=>!0,D6t(t,s,e){return this.f6t(t,s,e)}}}{const h_=self.Gs,o_=h_.Hr(h_.To);h_.uq.Text.qdt={Wc(t){this.I5t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.U5t(t.toString())},L6t(t){this.I5t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),(t=t.toString())&&this.U5t(this.$c+t)},k6t(t,s){this.I5t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.X5t(t.toString(),s)},N6t(t,s){let e=!1,i=!1;switch(s){case 1:e=!0;break;case 2:i=!0;break;case 3:e=!0,i=!0}t===this.r5t&&e===this.OP&&i===this.FP||(this.V5t(t),this.j5t(e),this.H5t(i))},PR(t){this.W5t(t)},B6t(t){o_.ta(t),o_.Zr(),this.Q5t(o_)},$6t(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},U6t(t){this.kH().Zx(t),this.Bc.jH()},V6t(){this.K5t()},ER(t){this.z5t(t)},W6t(t){this.q5t(t)},z6t(t){this.J5t(t)},j6t(t){this.s6t(t)},YR(t){this.e6t(t)},H6t(t){this.C5t(t)},q6t(){return this.y6t()},J6t(t){this.r6t(t)},Y6t(t,s){this.n6t(["auto","fixed"][t]),this.o6t(s)}}}{const a_=self.Gs;a_.uq.Text.Jdt={Text(){return this.$c},X6t(){return this.i5t?a_.pr.Lg(this.$c):this.$c},K6t(){return this.r5t},Z6t(){return this.n5t},Q6t(){return this.l6t()},t8t(){return this.u6t()},s8t(){return this.h5t},e8t(t,s){return this.c6t(t,s)},i8t(t){return this.p6t(t)},r8t(t,s){const e=this.d6t(t,s);return e?e.x:0},n8t(t,s){const e=this.d6t(t,s);return e?e.y:0},h8t(t,s){const e=this.d6t(t,s);return e?e.width:0},o8t(t,s){const e=this.d6t(t,s);return e?e.height:0},a8t(){return this.u5t}}}{const l_=self.Gs;l_.uq.adt=class extends l_.TDt{constructor(t){super(t)}qr(){super.qr()}}}{const u_=self.Gs,c_=self.Ns,f_=[];u_.uq.adt.kBt=class extends u_.cLt{constructor(t){super(t),this.RBt=t.p$t()}qr(){u_.bh(this.RBt),super.qr()}YDt(){for(const t of this.RBt)t.ANt(this.Bc)}Eet(t){const s={yT:this.Bc.PU()};return Promise.all(this.RBt.map(e=>e.ENt(t,s)))}Net(){for(const t of this.RBt)t.ONt()}Det(){this.l8t()}l8t(){for(const t of this.Ybt.uY())t.g0().u8t()}WAt(t){u_.uq.adt.eDt(this,t)}GEt(t){f_.push({mLt:null,c8t:!1,eY:[]})}f8t(t,s,e){const i=f_.at(-1);i.mLt=t,i.c8t=e,i.eY.push(s)}_Et(t){const s=f_.pop(),e=s.mLt,i=s.c8t;if(!e)return;const r=new Map;for(const t of s.eY)t.PUt(r,e,i);for(const[t,s]of r)t.fY().vxt(s)}d8t(t){const s=this.yY().w$t(t),e=this.Sq();return s.FNt(0).s1().R4(e.Rx(),{yT:e.PU()}).then(()=>this.l8t()),s}p8t(t){for(const s of this.Ybt.uY())s.g0().m8t(t);this.yY().v$t(t)}g8t(t,s){const e=this.Ybt.y$t(t);if(!e)throw new Error(`cannot find animation name '${t}'`);let i=e.NNt(s);i<0&&(i+=e.q0()+1);const r=u_._Nt.RNt(this.Sq());e.DNt(r,i);const n=this.Sq();r.s1().R4(n.Rx(),{yT:n.PU()}).then(()=>this.l8t());for(const t of this.Ybt.uY())t.g0().y8t();return r}S8t(t,s){const e=this.Ybt.y$t(t);if(!e)throw new Error(`cannot find animation name '${t}'`);if(1===e.q0())throw new Error(`cannot remove last frame from animation '${t}'`);let i=e.NNt(s);i<0&&(i+=e.q0()),e.LNt(i);for(const t of this.Ybt.uY())t.g0().y8t()}XDt(){return self.w8t}};const d_=new WeakMap;self.w8t=class extends self.CY{constructor(t){super(t),d_.set(this,t.IEt())}v8t(t){c_.oi(t);const s=d_.get(this).yY().y$t(t);return s?s.BNt():null}b8t(){return d_.get(this).yY().g$t().map(t=>t.BNt())}x8t(t){return c_.oi(t),d_.get(this).d8t(t).BNt()}C8t(t){c_.oi(t),d_.get(this).p8t(t)}T8t(t,s){if(c_.oi(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return d_.get(this).g8t(t,s).X0()}M8t(t,s){if(c_.oi(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");d_.get(this).S8t(t,s)}}}{const p_=self.Gs,m_=self.Ns,g_=0,y_=1,S_=2,w_=3,v_=p_.Hr(p_.Rect),b_=p_.Hr(p_.Pl),x_=p_.Hr(p_.Pa),C_=1,T_=2,M_=4;p_.uq.adt.Instance=class extends p_.zLt{constructor(t,s){super(t);let e=!0,i="",r=0,n=!0;s&&(e=!!s[g_],i=s[y_],r=s[S_],n=s[w_]),this.I8t=this.Ybt.y$t(i)||this.Ybt.p$t()[0],this.G8t=p_.Zr(r,0,this.I8t.q0()-1),this._8t=this.I8t.FNt(this.G8t);const h=this._8t.s1();this.pL=h.AM(),this.P8t=h.EA(),this.R8t=h.ekt(),this.JLt(),t.GUt(T_,!0),t.GUt(C_,this.I8t.N0()>=0),this.A8t=Math.abs(this.I8t.N0()),this.E8t=this.I8t.z0(),this.O8t=p_.Hr(p_.td),this.F8t=0,this.D8t=0,this.L8t="",this.k8t=-1,this.N8t="",this.B8t=0;const o=this.kH();this.$8t=o.eQ(),o.OX(e),o.SQ(n),o.zZ(this._8t.WZ()),o.qZ(this._8t.HZ()),o.Azt(this._8t.f1()),o.NZ(),1===this.Ybt.m$t()&&1===this.Ybt.p$t()[0].q0()||0===this.A8t||this.DLt()}qr(){this.I8t=null,this._8t=null,this.pL=null,this.O8t=null,super.qr()}ZLt(){return this._8t.s1()}Eut(){return!0}A6(){this.pL=null}KLt(){this.u8t()}nT(t){const s=this.pL;if(null===s)return;t.BO(s);const e=this.kH();e.h0()?this.P5t(e,t):this.R5t(e,t)}R5t(t,s){let e=this.$8t;this.Bc.oH()&&(e=t.Czt(e)),s.XO(e,this.R8t)}P5t(t,s){const e=t.Vzt();if(t.zzt()){t.QZ(v_,b_,!1);let s=b_;this.Bc.oH()&&(s=t.Czt(s)),e.QC(t.o0(),s,this.R8t),t.Wzt(!1)}e.nT(s,t.KZ())}U8t(){return this.O8t.Hs()}V8t(){return this.fe._Ut(T_)}W8t(t){this.fe.GUt(T_,t)}z8t(){return this.fe._Ut(C_)}j8t(t){this.fe.GUt(C_,t)}H8t(){return this.fe._Ut(M_)}q8t(t){this.fe.GUt(M_,t)}Int(){this.N8t&&this.J8t(),this.k8t>=0&&this.Y8t();const t=this.A8t;if(!this.V8t()||0===t)return void this.wLt();const s=this.Bc.Rj(this.fe);this.O8t.$u(s);const e=this.U8t(),i=this._8t,r=i.e1()/t;if(e<this.F8t+r)return;const n=this.I8t,h=this.E8t,o=n.q0(),a=n.V0(),l=n.$0(),u=n.H0();this.z8t()?this.G8t++:this.G8t--,this.F8t+=r,this.G8t>=o&&(u?(this.j8t(!1),this.G8t=o-2):l?this.G8t=h:(this.D8t++,this.D8t>=a?this.X8t(!1):this.G8t=h)),this.G8t<0&&(u?(this.G8t=1,this.j8t(!0),l||(this.D8t++,this.D8t>=a&&this.X8t(!0))):l?this.G8t=h:(this.D8t++,this.D8t>=a?this.X8t(!0):this.G8t=h)),this.G8t=p_.Zr(this.G8t,0,o-1);const c=n.FNt(this.G8t);e>this.F8t+c.e1()/t&&(this.F8t=e),this.K8t(i,c)}X8t(t){this.G8t=t?0:this.I8t.q0()-1,this.W8t(!1),this.L8t=this.I8t.Rc(),this.q8t(!0),this.pLt("animationend",!1,{animationName:this.L8t}),this.lZ(p_.uq.adt.aq.Z8t),this.lZ(p_.uq.adt.aq.Q8t),this.q8t(!1),this.D8t=0}K8t(t,s,e){if(t===s)return;const i=this.kH(),r=t.s1(),n=s.s1(),h=r.Cy(),o=r.My(),a=n.Cy(),l=n.My();e&&e.mdt?e.mdt(i,h,o,a,l):(h!==a&&i.hy(i.Cy()*(a/h)),o!==l&&i.oy(i.My()*(l/o))),i.zZ(s.WZ()),i.qZ(s.HZ()),i.Azt(s.f1()),i.NZ(),this._8t=s,this.pL=n.AM(),this.P8t=n.EA(),this.R8t=n.ekt();const u=this.J1().Zft();for(let e=0,i=u.length;e<i;++e)u[e].Ukt(t,s);this.pLt("framechange",!1,{animationName:this.I8t.Rc(),t7t:this.G8t}),this.lZ(p_.uq.adt.aq.s7t),this.Bc.jH()}e7t(t){this.W8t(!0),this.F8t=this.U8t(),1===t&&0!==this.G8t&&(this.k8t=0,this.H8t()||this.Y8t()),this.DLt()}i7t(t,s,e){this.N8t=t,this.B8t=s,this.DLt(),!e&&this.H8t()||this.J8t()}r7t(){return this.I8t}n7t(){return this.N8t?this.N8t:this.I8t.Rc()}m8t(t){p_.Zi(t,this.n7t())&&this.i7t(this.Ybt.b$t().Rc(),1,!0)}h7t(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.Ybt.y$t(this.n7t());if(!s)return;if(-1===(t=s.kNt(t)))return}isFinite(t)&&(this.k8t=t,this.H8t()||this.Y8t())}y8t(){if(this.N8t||-1!==this.k8t)return;const t=this._8t,s=this.I8t.FNt(p_.Zr(this.G8t,0,this.I8t.q0()-1));t!==s&&this.K8t(t,s),this.I8t.q0()>1&&this.A8t>0&&this.DLt()}o7t(){return this.G8t}a7t(){return this._8t.S1()}l7t(t){this.A8t=Math.abs(t),this.j8t(t>=0),this.A8t>0&&this.DLt()}u7t(){return this.z8t()?this.A8t:-this.A8t}c7t(t){"string"==typeof t&&-1===(t=this.I8t.kNt(t))||(t=p_.Zr(Math.floor(t),0,this.I8t.q0()-1),this.E8t=t)}f7t(){return this.E8t}J8t(t){const s=this._8t,e=this.Ybt.y$t(this.N8t);if(this.N8t="",!e)return;if(e===this.I8t&&this.V8t())return;this.I8t=e,this.j8t(e.N0()>=0),this.A8t=Math.abs(e.N0()),this.E8t=e.z0(),this.G8t=p_.Zr(this.G8t,0,this.I8t.q0()-1),1===this.B8t&&(this.G8t=0),this.W8t(!0),this.F8t=this.U8t();const i=this.I8t.FNt(this.G8t);this.K8t(s,i,t)}Y8t(t){const s=this._8t,e=this.G8t;if(this.G8t=p_.Zr(Math.floor(this.k8t),0,this.I8t.q0()-1),this.k8t=-1,!t&&e===this.G8t)return;const i=this.I8t.FNt(this.G8t);this.K8t(s,i),this.F8t=this.U8t()}u8t(){const t=this._8t.s1();this.pL=t.AM(),this.P8t=t.EA(),this.R8t=t.ekt(),this.kH().Wzt(!0)}AM(){return this.pL}EA(){return this.P8t}ekt(){return this.R8t}n1(){return this._8t.n1()}VEt(t){const s=this._8t,e=this.kH();let i=null;if("string"==typeof t)i=s.u1(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");i=s.l1(t-1)}let r=e.KZ();if(!i)return[e.lC(),e.fC(),r];if(x_.S(i.XNt()),e.h0()){const[t,s,i]=e.o0().fT(x_.Fa(),x_.La());x_.set(t,s),r+=i}return x_.offset(-s.WZ(),-s.HZ()),x_.scale(e.Cy(),e.My()),x_.rotate(e.YY()),x_.offset(e.lC(),e.fC()),[x_.Fa(),x_.La(),r]}d7t(){return this.kH().Lzt().mu()}p7t(t){t=Math.floor(t);const s=this.kH(),e=s.Lzt(),i=e.mu();if(t===i&&(t=0),t<0||t>=i)return[0,0];const r=e.pu();return[r[2*t+0]+s.lC(),r[2*t+1]+s.fC()]}BLt(){const t=p_.uq.adt.qdt,s="plugins.sprite.debugger.animation-properties";return[{title:s+".title",properties:[{name:s+".current-animation",value:this.I8t.Rc(),S6t:s=>this.ULt(t.m7t,s,0)},{name:s+".current-frame",value:this.G8t,S6t:s=>this.ULt(t.g7t,s)},{name:s+".is-playing",value:this.V8t(),S6t:s=>s?this.ULt(t.y7t,0):this.ULt(t.S7t)},{name:s+".speed",value:this.A8t,S6t:s=>this.ULt(t.w7t,s)},{name:s+".repeats",value:this.D8t,S6t:t=>this.D8t=t}]}]}xC(){const t={a:this.I8t.s9()};0!==this.F8t&&(t.fs=this.F8t);const s=this.U8t();0!==s&&(t.at=s),0!==this.G8t&&(t.f=this.G8t),0!==this.A8t&&(t.cas=this.A8t),1!==this.D8t&&(t.ar=this.D8t),0!==this.E8t&&(t.rt=this.E8t),this.V8t()||(t.ap=this.V8t()),this.z8t()||(t.af=this.z8t());const e=this.kH();return e.yQ()&&(t.ce=e.yQ()),t}CC(t){const s=this.yY().S$t(t.a);s&&(this.I8t=s),this.F8t=t.hasOwnProperty("fs")?t.fs:0,this.O8t.Set(t.hasOwnProperty("at")?t.at:0);const e=t.hasOwnProperty("f")?t.f:0;this.G8t=p_.Zr(e,0,this.I8t.q0()-1),this.A8t=t.hasOwnProperty("cas")?t.cas:0,this.D8t=t.hasOwnProperty("ar")?t.ar:1;const i=t.hasOwnProperty("rt")?t.rt:0;this.E8t=p_.Zr(i,0,this.I8t.q0()-1),this.W8t(!t.hasOwnProperty("ap")||!!t.ap),this.j8t(!t.hasOwnProperty("af")||!!t.af);const r=this.I8t.FNt(this.G8t);this._8t=r,this.u8t();const n=this.kH();n.zZ(r.WZ()),n.qZ(r.HZ()),n.Azt(r.f1()),n.SQ(!!t.ce),this.V8t()&&this.DLt()}Rpt(t){const s=this.kH();switch(t){case w_:return s.yQ();case S_:return p_.Zr(this.G8t,0,this.I8t.q0()-1);case y_:return this.I8t.Rc()}}Lpt(t,s,e){const i=this.kH();switch(t){case w_:i.SQ(!!s);break;case S_:if(e.pdt){if(!e.ddt)return;{const t=this.I8t.q0()-1,i=s=p_.Zr(s,0,t),r=this.I8t.FNt(this.G8t),n=this.I8t.FNt(i);this.K8t(r,n,e),this.G8t=p_.Zr(i,0,t)}}else{this.W8t(!1);const t=this.I8t.q0()-1,i=s=p_.Zr(s,0,t),r=this.I8t.FNt(this.G8t),n=this.I8t.FNt(i);this.K8t(r,n,e),this.G8t=p_.Zr(i,0,t)}break;case y_:this.N8t=s,this.B8t=e?.cdt??0,this.J8t(e),this.I8t.q0()>1&&this.I8t.N0()>0?this.DLt():this.wLt()}}XDt(){return self.v7t}};const I_=new WeakMap,G_=new Map([["current-frame",0],["beginning",1]]);self.v7t=class extends self.c0{constructor(){super(),I_.set(this,self.MK._K().g0())}i1(){return I_.get(this).n1()}h1(t){return this.o1(t)[0]}a1(t){return this.o1(t)[1]}b7t(t){return this.o1(t)[2]}o1(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return I_.get(this).VEt(t)}c1(){return I_.get(this).d7t()}d1(t){return m_.ii(t),I_.get(this).p7t(t)[0]}g1(t){return m_.ii(t),I_.get(this).p7t(t)[1]}m1(t){return m_.ii(t),I_.get(this).p7t(t)}x7t(){I_.get(this).W8t(!1)}C7t(t="current-frame"){m_.oi(t);const s=G_.get(t);if(void 0===s)throw new Error("invalid mode");I_.get(this).e7t(s)}T7t(t,s="beginning"){m_.oi(t),m_.oi(s);const e=G_.get(s);if(void 0===e)throw new Error("invalid mode");const i=I_.get(this);if(!i.yY().y$t(t))throw new Error(`animation name "${t}" does not exist`);i.i7t(t,e)}v8t(t){m_.oi(t);const s=I_.get(this).yY().y$t(t);return s?s.BNt():null}get animation(){return I_.get(this).r7t().BNt()}get animationName(){return I_.get(this).n7t()}set t7t(t){m_.ii(t),I_.get(this).h7t(t)}get t7t(){return I_.get(this).o7t()}set M7t(t){m_.oi(t),I_.get(this).h7t(t)}get M7t(){return I_.get(this).a7t()}set I7t(t){m_.ii(t),I_.get(this).l7t(t)}get I7t(){return I_.get(this).u7t()}set G7t(t){m_.ii(t),I_.get(this).c7t(t)}get G7t(){return I_.get(this).f7t()}get imageWidth(){return I_.get(this).ZLt().Cy()}get imageHeight(){return I_.get(this).ZLt().My()}_7t(){const t=I_.get(this).ZLt();return[t.Cy(),t.My()]}async P7t(t){m_.Ni(t,Blob);const s=I_.get(this),e=s.Sq(),i=s.ZLt(),r=p_.Hr(p_.tNt);if(r.pNt(e,t),await r.R4(e.Rx(),{yT:e.PU()}),s.Jr())return void r.qr();i.mNt(r);const n=s.IEt();n.l8t(),n.yY().wf().dispatchEvent(new p_.Event("animationframeimagechange")),e.jH()}R7t(t,s){"string"==typeof s&&(s=p_.Lh(s)),I_.get(this).kH().wzt(!!t,s)}}}{const __=self.Gs;__.uq.adt.aq={A7t(t){return __.Zi(this.n7t(),t)},E7t(t,s){return __.compare(this.G8t,t,s)},O7t(t,s){if("string"!=typeof s)return!1;const e=this._8t.S1();return __.compare(e.toLowerCase(),t,s.toLowerCase())},F7t(t,s){return __.compare(this.u7t(),t,s)},Q8t(t){return __.Zi(this.L8t,t)},Z8t:()=>!0,s7t:()=>!0,D7t(){return this.kH().Cy()<0},L7t(){return this.kH().My()<0},k7t:()=>!0,N7t:()=>!0,yQ(){return this.kH().yQ()}}}{const P_=self.Gs;P_.uq.adt.qdt={B7t(t,s,e,i,r){if(!t||!s)return;const[n,h]=this.VEt(e),o=this.Bc.GY(t,s,n,h,i,r);if(!o)return;if(i&&s._Y(o),t.tY().FJ()){const t=o.kH();t.JY(this.kH().YY()),t.NZ()}const a=this.Bc.oj();a.PY(!0),o.RY(),a.PY(!1),t!==this.Bc.STt().yY()&&this.SLt.f8t(t,o,i)},S7t(){this.W8t(!1)},y7t(t){this.e7t(t)},m7t(t,s){this.i7t(t,s)},g7t(t){this.h7t(t)},w7t(t){this.l7t(t)},$7t(t){this.c7t(t)},U7t(t,s){try{0===t?this.IEt().d8t(s):this.IEt().p8t(s)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation: `,s)}},V7t(t,s,e){try{0===t?this.IEt().g8t(s,e):this.IEt().S8t(s,e)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation frame: `,s)}},W7t(t){const s=this.kH(),e=s.Cy(),i=Math.abs(e)*(0===t?-1:1);e!==i&&(s.hy(i),s.NZ())},z7t(t){const s=this.kH(),e=s.My(),i=Math.abs(e)*(0===t?-1:1);e!==i&&(s.oy(i),s.NZ())},HY(t){const s=this._8t.s1(),e=this.kH(),i=e.Cy()<0?-1:1,r=e.My()<0?-1:1,n=s.Cy()*t*i,h=s.My()*t*r;e.Cy()===n&&e.My()===h||(e.tA(n,h),e.NZ())},async j7t(t,s,e){const i=this._8t.s1(),r=this.kH(),n=this.Bc,h=this.SLt;if(i.K5()===t)return 0===s&&(r.tA(i.Cy(),i.My()),r.NZ()),void this.lZ(P_.uq.adt.aq.k7t);const o=P_.Hr(P_.tNt);try{if(await o.dNt(n,t),!o.T6())throw new Error("image failed to load");if(this.Jr())return void o.qr();await o.R4(n.Rx(),{yT:n.PU()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.Jr()||this.lZ(P_.uq.adt.aq.N7t))}this.Jr()?o.qr():(i.mNt(o),h.l8t(),h.yY().wf().dispatchEvent(new P_.Event("animationframeimagechange")),n.jH(),0===s&&(r.tA(i.Cy(),i.My()),r.NZ()),await this.hq(P_.uq.adt.aq.k7t))},H7t(t){this.kH().SQ(t)},wzt(t,s){this.kH().wzt(0===t,P_.Lh(s))},U6t(t){this.kH().Zx(t),this.Bc.jH()}}}self.Gs.uq.adt.Jdt={q7t(){return this.o7t()},J7t(){return this.a7t()},Y7t(){return this.I8t.q0()},X7t(){return this.I8t.Rc()},K7t(){return this.u7t()},Z7t(){return this.I8t.N0()},Q7t(t){return this.VEt(t)[0]},t9t(t){return this.VEt(t)[1]},s9t(t){return this.VEt(t)[2]},e9t(){return this.n1()},i9t(){return this.ZLt().Cy()},r9t(){return this.ZLt().My()},n9t(t){return this.p7t(t)[0]},h9t(t){return this.p7t(t)[1]},o9t(){return this.d7t()}};{const R_=self.Gs;R_.uq.a9t=class extends R_.TDt{constructor(t){super(t)}qr(){super.qr()}}}{const A_=self.Gs;A_.uq.a9t.kBt=class extends A_.cLt{constructor(t){super(t),this.l9t=null,this.u9t=16,this.c9t=16,this.f9t=16,this.d9t=16,this.WS=null}qr(){this.Net(),super.qr()}YDt(){this.s1().yq(this.Bc)}async Eet(t){const s=this.s1();this.WS=await s.bNt()}p9t(){return!(this.l9t||!this.WS)}m9t(){this.p9t()&&(this.l9t=new self.g9t(this.Bc),this.l9t.y9t(this.WS,this.u9t,this.c9t,this.f9t,this.d9t))}Net(){this.l9t&&(this.l9t.qr(),this.l9t=null)}S9t(){this.Net()}w9t(){return this.l9t}v9t(t){t=Math.max(+t,0),this.u9t!==t&&(this.u9t=t,this.S9t(),this.Bc.jH())}b9t(){return this.u9t}x9t(t){t=Math.max(+t,0),this.c9t!==t&&(this.c9t=t,this.S9t(),this.Bc.jH())}C9t(){return this.c9t}T9t(t){t=Math.max(+t,0),this.f9t!==t&&(this.f9t=t,this.S9t(),this.Bc.jH())}M9t(){return this.f9t}I9t(t){t=Math.max(+t,0),this.d9t!==t&&(this.d9t=t,this.S9t(),this.Bc.jH())}G9t(){return this.d9t}}}{const E_=globalThis.Gs,O_=globalThis.Ns,F_=0,D_=1,L_=2,k_=3,N_=4,B_=5,$_=6,U_=7,V_=8,W_=10,z_=0,j_=1,H_=2,q_=4,J_=8,Y_=E_.Hr(E_.Rect),X_=E_.Hr(E_.Rect),K_=E_.Hr(E_.Pl);E_.uq.a9t.Instance=class extends E_.zLt{constructor(t,s){super(t),this.u9t=16,this.c9t=16,this.f9t=16,this.d9t=16,this._9t=1,this.P9t=1,this.R9t=1,this.A9t=1,this.E9t=1,this.O9t=null,this.F9t=null,this.D9t=null,this.L9t=null,s&&(this.u9t=s[F_],this.c9t=s[D_],this.f9t=s[L_],this.d9t=s[k_],this._9t=s[N_],this.P9t=s[B_],this.R9t=s[$_],this.A9t=s[U_],this.E9t=s[W_],this.kH().OX(!!s[V_]));const e=this.SLt;e.p9t()&&(e.v9t(this.u9t),e.x9t(this.c9t),e.T9t(this.f9t),e.I9t(this.d9t),e.m9t())}qr(){this.k9t(),super.qr()}k9t(){this.D9t&&(this.D9t.qr(),this.D9t=null),this.F9t=null,this.O9t&&(this.O9t.vNt().L6(),this.O9t.qr(),this.O9t=null)}N9t(t){this.L9t=t}nT(t){const s=this.kH(),e=s.eQ();this.B9t(t,e.Bn(),e.$n(),s.Cy(),s.My())}B9t(t,s,e,i,r){let n=null;if(this.O9t)this.D9t||(this.D9t=new globalThis.g9t(this.Bc),this.D9t.y9t(this.F9t,this.u9t,this.c9t,this.f9t,this.d9t)),n=this.D9t;else{const t=this.SLt;if(n=t.w9t(),!n&&(t.v9t(this.u9t),t.x9t(this.c9t),t.T9t(this.f9t),t.I9t(this.d9t),t.m9t(),n=t.w9t(),!n))return}const h=this.kH(),o=h.Cy(),a=h.My(),l=n.$9t(),u=n.U9t(),c=Math.min(this.b9t(),l),f=Math.min(this.C9t(),l),d=Math.min(this.M9t(),u),p=Math.min(this.G9t(),u),m=l-f,g=u-p,y=Math.min(this.b9t()*this.R9t,l),S=Math.min(this.C9t()*this.R9t,l),w=Math.min(this.M9t()*this.A9t,u),v=Math.min(this.G9t()*this.A9t,u),b=this.E9t,x=E_.Zr(o-y,0,b),C=E_.Zr(o-S,0,b),T=E_.Zr(a-w,0,b),M=E_.Zr(a-v,0,b),I=x/this.R9t,G=C/this.R9t,_=T/this.A9t,P=M/this.A9t,R=this._9t,A=this.P9t,E=2===A?0:x,O=2===A?0:C,F=2===A?0:T,D=2===A?0:M;c>0&&d>0&&this.V9t(t,n.AM(),j_|H_,0,0,c+I,d+_,s,e,y+x,w+T),0===R&&c>0&&g>d?this.W9t(t,n.z9t(),j_,s,e+w,y+E,r-w-v,0,0):1===R&&c>0&&g>d&&this.V9t(t,n.AM(),j_,0,d,c,g-d,s,e+w,y,r-w-v),0===R&&d>0&&m>c?this.W9t(t,n.j9t(),H_,s+y,e,i-y-S,w+F,0,0):1===R&&d>0&&m>c&&this.V9t(t,n.AM(),H_,c,0,m-c,d,s+y,e,i-y-S,w),g>d&&m>c&&(0===A?this.W9t(t,n.H9t(),z_,s+y,e+w,i-y-S,r-w-v,0,0):1===A&&this.V9t(t,n.AM(),z_,c,d,m-c,g-d,s+y,e+w,i-y-S,r-w-v)),c>0&&p>0&&this.V9t(t,n.AM(),j_|J_,0,g-P,c+I,p+P,s,e+r-v-M,y+x,v+M),f>0&&d>0&&this.V9t(t,n.AM(),q_|H_,m-G,0,f+G,d+_,s+i-S-C,e,S+C,w+T),0===R&&p>0&&m>c?this.W9t(t,n.q9t(),J_,s+y,e+r-v-D,i-y-S,v+D,0,D):1===R&&p>0&&m>c&&this.V9t(t,n.AM(),J_,c,g,m-c,p,s+y,e+r-v,i-y-S,v),0===R&&f>0&&g>d?this.W9t(t,n.J9t(),q_,s+i-S-O,e+w,S+O,r-w-v,O,0):1===R&&f>0&&g>d&&this.V9t(t,n.AM(),q_,m,d,f,g-d,s+i-S,e+w,S,r-w-v),f>0&&p>0&&this.V9t(t,n.AM(),q_|J_,m-G,g-P,f+G,p+P,s+i-S-C,e+r-v-M,S+C,v+M)}V9t(t,s,e,i,r,n,h,o,a,l,u){if(({Y9t:i,X9t:r,K9t:n,Z9t:h,dx:o,dy:a,Q9t:l,tts:u}=this.sts(e,i,r,n,h,o,a,l,u)),l<=0||u<=0||!s)return;const c=s.Cy(),f=s.My();if(t.BO(s),Y_.set(o,a,o+l,a+u),X_.set(i/c,r/f,(i+n)/c,(r+h)/f),null===this.L9t){const s=this.kH(),e=s.eQ(),i=e.Bn(),r=e.$n();Y_.offset(-i,-r),K_.Kl(Y_,s.YY()),K_.offset(i,r),t.ab(K_,X_)}else this.L9t(Y_,X_)}W9t(t,s,e,i,r,n,h,o,a){let l=0,u=0,c=0,f=0;if(({Y9t:l,X9t:u,K9t:c,Z9t:f,dx:i,dy:r,Q9t:n,tts:h}=this.sts(e,l,u,c,f,i,r,n,h)),o-=l*this.R9t,a-=u*this.A9t,n<=0||h<=0||!s)return;const d=s.Cy(),p=s.My();if(t.BO(s),Y_.set(i,r,i+n,r+h),X_.set(-o/(d*this.R9t),-a/(p*this.A9t),(n-o)/(d*this.R9t),(h-a)/(p*this.A9t)),null===this.L9t){const s=this.kH(),e=s.eQ(),i=e.Bn(),r=e.$n();Y_.offset(-i,-r),K_.Kl(Y_,s.YY()),K_.offset(i,r),t.ab(K_,X_)}else this.L9t(Y_,X_)}sts(t,s,e,i,r,n,h,o,a){const l=this.kH(),u=l.Cy(),c=l.My(),f=this.R9t,d=this.A9t,p=this.w9t(),m=p.$9t(),g=p.U9t(),y=Math.min(this.b9t()*f,m),S=Math.min(this.C9t()*f,m),w=Math.min(this.M9t()*d,g),v=Math.min(this.G9t()*d,g);if(t&j_){const t=u-S-y;t<-y?o=0:t<0&&(i+=t/f,o+=t)}if(t&H_){const t=c-v-w;t<-w?a=0:t<0&&(r+=t/d,a+=t)}if(t&q_){const t=u-S;t<-S?o=0:t<0&&(i+=t/f,o+=t,s-=t/f,n-=t)}if(t&J_){const t=c-v;t<-v?a=0:t<0&&(r+=t/d,a+=t,e-=t/d,h-=t)}return{Y9t:s,X9t:e,K9t:i,Z9t:r,dx:n,dy:h,Q9t:o,tts:a}}w9t(){return this.D9t||this.SLt.w9t()}S9t(){this.O9t&&(this.D9t&&(this.D9t.qr(),this.D9t=null),this.Bc.jH())}ZLt(){return this.O9t||this.Ybt.s1()}v9t(t){this.O9t||this.SLt.v9t(t),t=Math.max(+t,0),this.u9t!==t&&(this.u9t=t,this.S9t())}b9t(){return this.O9t?this.u9t:this.SLt.b9t()}x9t(t){this.O9t||this.SLt.x9t(t),t=Math.max(+t,0),this.c9t!==t&&(this.c9t=t,this.S9t())}C9t(){return this.O9t?this.c9t:this.SLt.C9t()}T9t(t){this.O9t||this.SLt.T9t(t),t=Math.max(+t,0),this.f9t!==t&&(this.f9t=t,this.S9t())}M9t(){return this.O9t?this.f9t:this.SLt.M9t()}I9t(t){this.O9t||this.SLt.I9t(t),t=Math.max(+t,0),this.d9t!==t&&(this.d9t=t,this.S9t())}G9t(){return this.O9t?this.d9t:this.SLt.G9t()}ets(t){this._9t!==t&&(this._9t=t,this.Bc.jH())}its(){return this._9t}rts(t){this.P9t!==t&&(this.P9t=t,this.Bc.jH())}nts(){return this.P9t}hts(t){this.R9t!==t&&(this.R9t=t,this.Bc.jH())}ots(){return this.R9t}ats(t){this.A9t!==t&&(this.A9t=t,this.Bc.jH())}lts(){return this.A9t}uts(t){this.E9t!==t&&(this.E9t=t,this.Bc.jH())}cts(){return this.E9t}Rpt(t){switch(t){case F_:return this.b9t();case D_:return this.C9t();case L_:return this.M9t();case k_:return this.G9t();case $_:return this.ots();case U_:return this.lts()}}Lpt(t,s){switch(t){case F_:this.v9t(s);break;case D_:this.x9t(s);break;case L_:this.T9t(s);break;case k_:this.I9t(s);break;case $_:this.hts(s);break;case U_:this.ats(s)}}BLt(){const t="plugins.ninepatch.properties";return[{title:"plugins.ninepatch.name",properties:[{name:t+".left-margin.name",value:this.b9t(),S6t:t=>this.v9t(t)},{name:t+".right-margin.name",value:this.C9t(),S6t:t=>this.x9t(t)},{name:t+".top-margin.name",value:this.M9t(),S6t:t=>this.T9t(t)},{name:t+".bottom-margin.name",value:this.G9t(),S6t:t=>this.I9t(t)},{name:t+".image-scale-x.name",value:100*this.ots(),S6t:t=>this.hts(t/100)},{name:t+".image-scale-y.name",value:100*this.lts(),S6t:t=>this.ats(t/100)}]}]}XDt(){return globalThis.fts}};const Z_=["tile","stretch"],Q_=["tile","stretch","transparent"],tP=["exact","overlap"];globalThis.fts=class extends self.c0{#s;constructor(){super(),this.#s=globalThis.MK._K().g0()}set leftMargin(t){O_.ii(t),this.#s.v9t(t)}get leftMargin(){return this.#s.b9t()}set rightMargin(t){O_.ii(t),this.#s.x9t(t)}get rightMargin(){return this.#s.C9t()}set topMargin(t){O_.ii(t),this.#s.T9t(t)}get topMargin(){return this.#s.M9t()}set bottomMargin(t){O_.ii(t),this.#s.I9t(t)}get bottomMargin(){return this.#s.G9t()}set dts(t){const s=Z_.indexOf(t);if(-1===s)throw new Error("invalid edge");this.#s.ets(s)}get dts(){return Z_[this.#s.its()]}set fill(t){const s=Q_.indexOf(t);if(-1===s)throw new Error("invalid fill");this.#s.rts(s)}get fill(){return Q_[this.#s.nts()]}set pts(t){O_.ii(t),this.#s.hts(t)}get pts(){return this.#s.ots()}set mts(t){O_.ii(t),this.#s.ats(t)}get mts(){return this.#s.lts()}set gts(t){const s=tP.indexOf(t);if(-1===s)throw new Error("invalid seams");this.#s.uts(s)}get gts(){return tP[this.#s.cts()]}async yts(t){O_.Ni(t,Blob);const s=this.#s,e=s.Sq(),i=E_.Hr(E_.tNt);await i.pNt(e,t),i.vNt().F6();const r=await i.bNt();s.Jr()?i.qr():(s.k9t(),s.O9t=i,s.F9t=r,e.jH())}}}self.Gs.uq.a9t.aq={k7t:()=>!0,N7t:()=>!0};{const sP=self.Gs;sP.uq.a9t.qdt={U6t(t){this.kH().Zx(t),this.Bc.jH()},Sts(t,s,e,i){this.v9t(t),this.x9t(s),this.T9t(e),this.I9t(i)},wts(t){this.ets(t)},vts(t){this.rts(t)},bts(t){this.hts(t/100)},xts(t){this.ats(t/100)},Cts(t){this.uts(t)},async j7t(t){if(this.O9t&&this.O9t.K5()===t)return;const s=this.Bc,e=sP.Hr(sP.tNt);let i=null;try{if(await e.dNt(s,t),!e.T6())throw new Error("image failed to load");if(this.Jr())return e.qr(),null;e.vNt().F6(),i=await e.bNt()}catch(t){return console.error("Load image from URL failed: ",t),void(this.Jr()||this.lZ(sP.uq.a9t.aq.N7t))}this.Jr()?e.qr():(this.k9t(),this.O9t=e,this.F9t=i,s.jH(),await this.hq(sP.uq.a9t.aq.k7t))}}}self.Gs.uq.a9t.Jdt={Tts(){return this.b9t()},Mts(){return this.C9t()},Its(){return this.M9t()},Gts(){return this.G9t()},_ts(){return 100*this.ots()},Pts(){return 100*this.lts()}};{let eP=function(t){const s=iP.co(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),s};CloneDrawable=eP;const iP=self.Gs;self.g9t=class{constructor(t){this.Bc=t,this.MT=null,this.Rts=null,this.Ats=null,this.Ets=null,this.Ots=null,this.Fts=null,this._6=0,this.P6=0,this.nx=t.Rx(),this.RS=!1,this.TR=!1}qr(){this.nx.RA()||(this.nx.MM(this.MT),this.nx.MM(this.Rts),this.nx.MM(this.Ats),this.nx.MM(this.Ets),this.nx.MM(this.Ots),this.nx.MM(this.Fts)),this.MT=null,this.Rts=null,this.Ats=null,this.Ets=null,this.Ots=null,this.Fts=null,this.nx=null,this.TR=!0}Jr(){return this.TR}y9t(t,s,e,i,r){this.Dts(t,s,e,i,r)}Lts(){return!!this.MT}Dts(t,s,e,i,r){if(this.TR)return;const n=t.width,h=t.height;this._6=n,this.P6=h,s=Math.min(Math.floor(s),n),e=Math.min(Math.floor(e),n),i=Math.min(Math.floor(i),h);const o=n-e,a=h-(r=Math.min(Math.floor(r),h)),l=this.Bc.PU(),u=this.Bc._H().E6();this.MT=this.nx.CF(eP(t),{yT:l,ST:u}),o>s&&a>i&&(this.Rts=this.nx.CF(this.kts(eP(t),s,i,o,a),{mT:"repeat",gT:"repeat",yT:l,ST:u})),s>0&&a>i&&(this.Ats=this.nx.CF(this.kts(eP(t),0,i,s,a),{gT:"repeat",yT:l,ST:u})),e>0&&a>i&&(this.Ets=this.nx.CF(this.kts(eP(t),o,i,n,a),{gT:"repeat",yT:l,ST:u})),i>0&&o>s&&(this.Ots=this.nx.CF(this.kts(eP(t),s,0,o,i),{mT:"repeat",yT:l,ST:u})),r>0&&o>s&&(this.Fts=this.nx.CF(this.kts(eP(t),s,a,o,h),{mT:"repeat",yT:l,ST:u}))}kts(t,s,e,i,r){const n=i-s,h=r-e,o=iP.co(n,h);return o.getContext("2d").drawImage(t,s,e,n,h,0,0,n,h),o}$9t(){return this._6}U9t(){return this.P6}AM(){return this.MT}H9t(){return this.Rts}z9t(){return this.Ats}J9t(){return this.Ets}j9t(){return this.Ots}q9t(){return this.Fts}}}{const rP=self.Gs;rP.uq.Nts=class extends rP.TDt{constructor(t){super(t)}qr(){super.qr()}}}{const nP=self.Gs;nP.uq.Nts.kBt=class extends nP.cLt{constructor(t){super(t)}qr(){super.qr()}YDt(){}}}{let hP=function(t){return t.map(t=>t.slice(0))},oP=function(t,s){return t.kH().$H()-s.kH().$H()},aP=function(t){return yP.wa(t),yP},lP=function(t){return SP.wa(t),SP},uP=function(t){if(!MP.has(t))throw new Error("invalid line cap")},cP=function(t){dP.Ti(t);for(const s of t)dP.Ti(s),dP.ii(s[0]),dP.ii(s[1])};ClonePolyArray=hP,SortByInstanceZIndex=oP,arrToColor=aP,arrToColor2=lP,ValidateLineCap=uP,ValidatePoly=cP;const fP=self.Gs,dP=self.Ns,pP=0,mP=1,gP=3,yP=fP.Hr(fP.To),SP=fP.Hr(fP.To),wP=fP.Hr(fP.Rect),vP=fP.Hr(fP.Pl),bP=fP.Hr(fP.Pl);let xP=0;fP.uq.Nts.Instance=class extends fP.zLt{constructor(t,s){super(t),this.Bts=null,this.yR=fP.Hr(fP.Rect);const e=this.kH();this.$ts=!1,this.Uts=Math.floor(e.Cy()),this.Vts=Math.floor(e.My()),this.pM=0,this.Wts=null,this.zts=[],this.jts=[],this.Hts=0,this.qts=1,this.Jts=1,this.Yts=null,this.Xts="",this.Kts=null,this.Zts=fP.Hr(fP.Rect),this.Qts=fP.Hr(fP.Pl),this.tss=fP.Hr(fP.Pl),s&&(this.$ts=1===s[pP],e.OX(!!s[mP]),this.pM=[0,2,4,8][s[gP]]);const i=this.Bc.Rx();this.sss(0),i.Yb()&&i.kT()<2&&(this.pM=0),this.kLt()}qr(){this.Bts&&(this.Bts.Rx().RF(this.Bts),this.Bts=null),this.Wts&&(this.Wts.Rx().RF(this.Wts),this.Wts=null),fP.bh(this.zts),super.qr()}ess(){return this.$ts}iss(){return this.rss(),this.Yts}rss(){if(this.Yts)return;const t=fP.co(512,8),s=t.getContext("2d");s.clearRect(0,0,512,8),s.fillStyle="white",s.fillRect(0,0,256,8),this.Yts=this.Bc.Rx().CF(t,{mT:"repeat",yT:this.Bc.PU()})}sss(t){this.Hts=t}nss(t){t.Zx(this.Hts)}hss(t){this.zts.push(t),this.Bc.jH()}oss(t,s){this.$ts=!0,this.Uts=Math.floor(t),this.Vts=Math.floor(s)}ass(){this.$ts=!1}lss(t){fP.bh(this.zts),this.hss(new fP.uq.Nts.css.uss(t))}fss(t,s,e,i,r){t!==e&&s!==i&&this.hss(new fP.uq.Nts.css.dss(t,s,e,i,r))}pss(t,s,e,i,r){t!==e&&s!==i&&this.hss(new fP.uq.Nts.css.mss(t,s,e,i,r))}gss(t,s,e,i,r,n,h){t!==e&&s!==i&&this.hss(new fP.uq.Nts.css.yss(t,s,e,i,r,n,h))}Sss(t,s,e,i,r,n){e<=0||i<=0||this.hss(new fP.uq.Nts.css.wss(t,s,e,i,r,n))}vss(t,s,e,i,r,n,h){e<=0||i<=0||n<=0||this.hss(new fP.uq.Nts.css.bss(t,s,e,i,r,n,h))}xss(t,s,e,i,r,n){t===e||s===i||n<=0||this.hss(new fP.uq.Nts.css.Css(t,s,e,i,r,n))}Tss(t,s,e,i,r,n,h){t===e&&s===i||n<=0||this.hss(new fP.uq.Nts.css.Ry(t,s,e,i,r,n,h))}Mss(t,s,e,i,r,n,h,o){if(t===e&&s===i||n<=0||h<=0)return;const a=this.iss();this.hss(new fP.uq.Nts.css.Iss(t,s,e,i,r,n,h,a,o))}Gss(t,s,e,i){t.length<2||e<=0||this.hss(new fP.uq.Nts.css._ss(hP(t),s,e,i))}Pss(t,s,e,i,r){if(t.length<2||e<=0||i<=0)return;const n=this.iss();this.hss(new fP.uq.Nts.css.Rss(hP(t),s,e,i,n,r))}Ass(t,s,e){t.length<3||this.hss(new fP.uq.Nts.css.Ess(hP(t),s,e))}Oss(t){this.hss(new fP.uq.Nts.css.Fss(t))}Dss(t,s){const e=this.kH(),i=e.tQ(),r=e.eQ(),n=t.filter(t=>{const s=t.kH();return s&&i.Cl(s.tQ())&&(0===e.YY()||r.su(s.eQ()))});if(0===n.length)return;n.sort(oP);let h=null;const o=new Promise(t=>h=t);return this.hss(new fP.uq.Nts.css.Lss(n,s,e,h)),o}kss(){return 1/(this.qts*this.Jts)}Nss(t,s,e){this.Bts&&t.RF(this.Bts),this.Bts=t.MF({width:s,height:e,yT:this.Bc.PU(),iM:0===this.pM,sU:0===this.pM,eU:0===this.pM,nM:this.pM}),this.pM>0&&(this.Wts&&t.RF(this.Wts),this.Wts=t.MF({width:s,height:e,yT:this.Bc.PU(),iM:!0,sU:!0,eU:!0})),t.BO(null)}kW(){return this.Bts}Bss(){return this.Wts}NM(){return this.pM}$ss(t){this.Bc._H().U4(t,this.Bts.Cy(),this.Bts.My(),!1)}Uss(){return this.zts.some(t=>!(t instanceof fP.uq.Nts.css.Vss))}Wss(t,s){const e=this.kH(),i=e.BH(),r=i.yH(),n=e.YY(),h=i.YX(),o=r.YY();0===n&&0===h&&0===o||(r.JY(0),i.JY(0),e.JY(0),e.NZ());const a=e.eQ(),[l,u]=i.xK(a.Bn(),a.$n()),[c,f]=i.xK(a.Wn(),a.zn()),d=l-Math.round(l),p=u-Math.round(u);t.set(l,u,c,f),t.offset(-d,-p),t.normalize(),s.Xl(t),0===n&&0===h&&0===o||(r.JY(o),i.JY(h),e.JY(n),e.NZ())}zss(t){const s=this.kH(),e=s.BH(),i=e.yH(),r=e.YX(),n=i.YY();0===r&&0===n||(i.JY(0),e.JY(0));const h=s.eQ(),[o,a]=e.xK(h.Bn(),h.$n()),[l,u]=e.xK(h.Un(),h.Vn()),[c,f]=e.xK(h.Wn(),h.zn()),[d,p]=e.xK(h.jn(),h.Hn()),m=o-Math.round(o),g=a-Math.round(a);t.set(o,a,l,u,c,f,d,p),t.offset(m,g),0===r&&0===n||(i.JY(n),e.JY(r))}jss(){const t=this.Bc.Rx(),s=this.Zts;this.Wss(s,this.Qts),this.zss(this.tss);let e=0,i=0;if(this.$ts)e=this.Uts,i=this.Vts,t.Yb()?this.yR.set(0,1,1,0):this.yR.set(0,0,1,1);else{this.kH().BH()._9()&&this.tss.Ql(s);const r=.01,n=s.width(),h=s.height();e=n-Math.floor(n)<r?Math.floor(n):Math.ceil(n),i=h-Math.floor(h)<r?Math.floor(h):Math.ceil(h),t.Yb()?this.yR.set(0,1,s.width()/e,1-s.height()/i):this.yR.set(0,0,s.width()/e,s.height()/i)}const r=t.DT(),n=Math.max(e,i);return n>r?(this.Jts=r/n,e=Math.round(e*this.Jts),i=Math.round(i*this.Jts)):this.Jts=1,[e,i]}Hss(){this.pLt("resolutionchange"),this.lZ(fP.uq.Nts.aq.qss)}Jss(){if(this.Bts)return;const[t,s]=this.jss();t<=0||s<=0||(this.qts=wP.width()/this.kH().Cy(),this.Nss(this.Bc.Rx(),t,s),this.Hss())}FLt(){const t=this.Bc.Rx(),s=this.kH(),e=this.Zts;++xP;const[i,r]=this.jss();if(i<=0||r<=0)return void--xP;this.qts=this.$ts?1:e.width()/s.Cy();const n=this.qts*this.Jts,h=!this.Bts||this.Bts.Cy()!==i||this.Bts.My()!==r;if(h&&this.Hss(),this.zts.length>0||!this.Bts){(!this.Bts||h&&this.Uss())&&this.Nss(t,i,r),t.IF(this.Bts),this.$ss(t),this.nss(t),t.pv()&&this.pM>0&&t.yB(this.pM);for(const s of this.zts)s.Yss(t,n,this);fP.bh(this.zts),t.WO(),t.pv()&&this.pM>0&&t.yB(0),this.pM>0&&(t.IF(this.Wts),t.GF(this.Bts,"crop"))}--xP}nT(t){const s=this.kH(),e=s.BH(),i=this.Bc._H(),r=t.vF();let n=this.Qts;if(!this.Bts)return;t.pv()&&t.kN(this.Bts),0===this.pM?t.BO(this.Bts.AM()):t.BO(this.Wts.AM());let h=!1,o=!1;if(xP>0)this.fe.MUt()?n=s.eQ():(i.U4(t,r.Cy(),r.My(),!1),h=!0,n=this.tss);else if(0===s.YY()&&0===e.YY()&&0===s.KZ()&&!s.h0()&&e.E9())if(t.Yb())i.U4(t),h=!0;else{t.oB(!0),o=!0;const[s,e]=t.sF(r);bP.S(n),bP.wt(s,e),n=bP}else n=s.eQ();s.h0()?this.P5t(t,s):t.ab(n,this.yR),h&&e.W4(t,!1),o&&t.oB(!1),t.BO(null)}P5t(t,s){const e=s.Vzt();s.zzt()&&(s.QZ(wP,vP,!1),e.QC(s.o0(),vP,this.yR),s.Wzt(!1)),e.nT(t,s.KZ())}Xss(t,s){if(!this.Kts)return[0,0,0,0];const e=this.Kts.width,i=this.Kts.height;if(t=Math.floor(t),s=this.Bc.Rx().Yb()?i-1-Math.floor(s):Math.floor(s),t<0||s<0||t>=e||s>=i)return[0,0,0,0];const r=this.Kts.data,n=s*e*4+4*t;let h=r[n]/255,o=r[n+1]/255,a=r[n+2]/255,l=r[n+3]/255;return 0!==l&&(h/=l,o/=l,a/=l),[100*h,100*o,100*a,100*l]}Kss(t,s,e){if(!this.Kts)return[0,0,0,0];yP.ta(e),yP.Zo();const i=this.Kts.width,r=this.Kts.height;if(t=Math.floor(t),s=r-1-Math.floor(s),t<0||s<0||t>=i||s>=r)return;const n=this.Kts.data,h=s*i*4+4*t;n[h]=Math.floor(255*yP.No()),n[h+1]=Math.floor(255*yP.Bo()),n[h+2]=Math.floor(255*yP.$o()),n[h+3]=Math.floor(255*yP.Uo())}Zss(){return new Promise(t=>{this.hss(new fP.uq.Nts.css.Vss(async s=>{const e=s.data.buffer,i=s.width,r=s.height,n=await this.Bc.x0t("ProcessImageData",{buffer:e,width:i,height:r,unpremultiply:!0,flipY:this.Bc.Rx().Yb()},[e]);t(new ImageData(new Uint8ClampedArray(n),i,r))}))})}Qss(t,s,e){if(this.Jss(),!this.Bts)throw new Error("invalid canvas size");if(t.width!==this.Bts.Cy()||t.height!==this.Bts.My())throw new Error(`wrong size ImageData: expected ${this.Bts.Cy()} x ${this.Bts.My()}, got ${t.width} x ${t.height}`);fP.bh(this.zts);const i=this.Bc.Rx();if(this.Wts){const r=i.vF(),n=this.Wts.AM();i.AA(t,n,{xT:!!s,flipY:!!e}),i.IF(this.Bts),i.GF(this.Wts,"crop"),i.IF(r)}else{const r=this.Bts.AM();i.AA(t,r,{xT:!!s,flipY:!!e})}this.Bc.jH()}Vss(t,s,e){return new Promise(i=>{this.hss(new fP.uq.Nts.css.Vss(async e=>{const r=e.data.buffer,n=e.width,h=e.height,o=this.Bc.Rx().Yb(),a=await this.Bc.x0t("ProcessImageData",{buffer:r,width:n,height:h,unpremultiply:!0,flipY:o&&!fP.Pe.ImageBitmapOptions},[r]);let l;if(e=new ImageData(new Uint8ClampedArray(a),n,h),fP.Pe.ImageBitmapOptions){const i=await createImageBitmap(e,{premultiplyAlpha:"none",imageOrientation:o?"flipY":"none"});l=await fP.do(i,t,s)}else l=await fP.po(e,t,s);this.Xts&&URL.revokeObjectURL(this.Xts),this.Xts=URL.createObjectURL(l),this.lZ(fP.uq.Nts.aq.tes),i(l)},e))})}XDt(){return self.ses}};const CP=new WeakMap,TP=["horizontal","vertical"],MP=new Set(["butt","square"]),IP=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10],["lighten",11],["darken",12],["multiply",13],["screen",14]]);self.ses=class extends self.c0{constructor(){super(),CP.set(this,self.MK._K().g0())}T6t(t,s){dP.ii(t),dP.ii(s),CP.get(this).oss(t,s)}M6t(){CP.get(this).ass()}ees(t){dP.Ti(t),CP.get(this).lss(aP(t))}clearRect(t,s,e,i,r){dP.ii(t),dP.ii(s),dP.ii(e),dP.ii(i),dP.Ti(r),CP.get(this).fss(t,s,e,i,aP(r))}fillRect(t,s,e,i,r){dP.ii(t),dP.ii(s),dP.ii(e),dP.ii(i),dP.Ti(r),CP.get(this).pss(t,s,e,i,aP(r))}ies(t,s,e,i,r,n,h="horizontal"){dP.ii(t),dP.ii(s),dP.ii(e),dP.ii(i),dP.Ti(r),dP.Ti(n);const o=TP.indexOf(h);if(o<0)throw new Error("invalid gradient direction");CP.get(this).gss(t,s,e,i,aP(r),lP(n),o)}res(t,s,e,i,r,n=!0){dP.ii(t),dP.ii(s),dP.ii(e),dP.ii(i),dP.Ti(r),CP.get(this).Sss(t,s,e,i,aP(r),!!n)}nes(t,s,e,i,r,n,h=!0){dP.ii(t),dP.ii(s),dP.ii(e),dP.ii(i),dP.Ti(r),dP.ii(n),CP.get(this).vss(t,s,e,i,aP(r),n,!!h)}hes(t,s,e,i,r,n){dP.ii(t),dP.ii(s),dP.ii(e),dP.ii(i),dP.Ti(r),dP.ii(n),CP.get(this).xss(t,s,e,i,aP(r),n)}line(t,s,e,i,r,n,h="butt"){dP.ii(t),dP.ii(s),dP.ii(e),dP.ii(i),dP.Ti(r),dP.ii(n),uP(h),CP.get(this).Tss(t,s,e,i,aP(r),n,h)}oes(t,s,e,i,r,n,h,o="butt"){dP.ii(t),dP.ii(s),dP.ii(e),dP.ii(i),dP.Ti(r),dP.ii(n),dP.ii(h),uP(o),CP.get(this).Mss(t,s,e,i,aP(r),n,h,o)}aes(t,s,e,i="butt"){cP(t),dP.Ti(s),dP.ii(e),uP(i),CP.get(this).Gss(t,aP(s),e,i)}les(t,s,e,i,r="butt"){cP(t),dP.Ti(s),dP.ii(e),dP.ii(i),uP(r),CP.get(this).Pss(t,aP(s),e,i,r)}ues(t,s,e=!1){cP(t),dP.Ti(s),CP.get(this).Ass(t,aP(s),!!e)}ces(t){const s=IP.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");CP.get(this).Oss(s)}fes(t,s=!0){dP.Ti(t);const e=CP.get(this),i=e.Sq();return e.Dss(t.map(t=>i.LH(t)),!!s)}des(){return CP.get(this).Zss()}pes(t,s=!1){dP.Ni(t,ImageData);const e=CP.get(this);e.Qss(t,s,e.Sq().Rx().Yb())}mes(t,s,e){return dP.ai(t),dP.Qe(s),dP.Bi(e,DOMRect),e&&(e=fP.Rect.Ka(e)),CP.get(this).Vss(t||"image/png",s,e)}get ges(){const t=CP.get(this);t.Jss();const s=t.kW();if(!s)throw new Error("invalid canvas size");return s.Cy()}get yes(){const t=CP.get(this);t.Jss();const s=t.kW();if(!s)throw new Error("invalid canvas size");return s.My()}Ses(){const t=CP.get(this);t.Jss();const s=t.kW();if(!s)throw new Error("invalid canvas size");return[s.Cy(),s.My()]}get wes(){return CP.get(this).kss()}}}self.Gs.uq.Nts.aq={tes:()=>!0,ves:()=>!0,qss:()=>!0};{let GP=function(t){return RP.ta(t),RP},_P=function(t){return AP.ta(t),AP};RgbToColor=GP,RgbToColor2=_P;const PP=self.Gs,RP=PP.Hr(PP.To),AP=PP.Hr(PP.To);PP.uq.Nts.qdt={U6t(t){this.kH().Zx(t),this.Bc.jH()},Y6t(t,s,e){1===t?this.oss(s,e):this.ass()},uss(t){this.lss(GP(t))},dss(t,s,e,i,r){this.fss(t,s,e,i,GP(r))},mss(t,s,e,i,r){this.pss(t,s,e,i,GP(r))},yss(t,s,e,i,r,n,h){this.gss(t,s,e,i,GP(r),_P(n),h)},wss(t,s,e,i,r,n){this.Sss(t,s,e,i,GP(r),0!==n)},bss(t,s,e,i,r,n,h){this.vss(t,s,e,i,GP(r),n,0!==h)},Css(t,s,e,i,r,n){this.xss(t,s,e,i,GP(r),n)},Ry(t,s,e,i,r,n,h){const o=0===h?"butt":"square";this.Tss(t,s,e,i,GP(r),n,o)},Iss(t,s,e,i,r,n,h,o){const a=0===o?"butt":"square";this.Mss(t,s,e,i,GP(r),n,h,a)},bes(t,s){this.jts.push([t,s])},xes(){PP.bh(this.jts)},_ss(t,s,e){const i=0===e?"butt":"square";this.Gss(this.jts,GP(t),s,i)},Rss(t,s,e,i){const r=0===i?"butt":"square";this.Pss(this.jts,GP(t),s,e,r)},Ess(t,s){this.Ass(this.jts,GP(t),s)},Fss(t){t>=2&&t++,this.Oss(t)},Ces(t,s){if(t)return this.Dss(t.fY().cY(),0!==s)},Vss(t,s,e,i,r,n){const h=0===t?"image/png":"image/jpeg";s/=100;const o=PP.Hr(PP.Rect);return o.ja(e,i,r,n),this.Vss(h,s,o)},Tes(){return new Promise(t=>{this.hss(new PP.uq.Nts.css.Vss(s=>{this.Kts=s,this.lZ(PP.uq.Nts.aq.ves),t()}))})},Mes(){this.Kts=null},Ies(t,s,e){this.Kss(t,s,e)},Ges(){this.Kts&&this.Bts&&this.Kts.width===this.Bts.Cy()&&this.Kts.height===this.Bts.My()&&this.Qss(this.Kts,!1)}}}self.Gs.uq.Nts.Jdt={_es(){return this.Xts},Pes(t,s){return this.Xss(t,s)[0]},Res(t,s){return this.Xss(t,s)[1]},Aes(t,s){return this.Xss(t,s)[2]},Ees(t,s){return this.Xss(t,s)[3]},Oes(){return this.Kts?this.Kts.width:0},Fes(){return this.Kts?this.Kts.height:0},Des(){return this.kss()},Les(){const t=this.kW();return t?t.Cy():0},kes(){const t=this.kW();return t?t.My():0}};{const EP=self.Gs,OP=EP.Hr(EP.Pl),FP=EP.Hr(EP.Rect),DP=EP.Hr(EP.Pl),LP=EP.Hr(EP.Pa);EP.uq.Nts.css=class{constructor(){}Yss(t){throw new Error("required override")}};const kP=EP.uq.Nts.css;kP.Vss=class extends kP{constructor(t,s){super(),this.Lf=t,this.Nes=s}Yss(t,s,e){let i=t.vF();if(i.NM()>=2){const s=e.Bss();t.IF(s),t.GF(i,"crop"),t.IF(i),i=s}t.WM(i,!1,this.Nes).then(this.Lf)}},kP.uss=class extends kP{constructor(t){super(),this.qx=EP.Hr(EP.To,t),this.qx.Zo()}Yss(t){t.Ru(this.qx)}},kP.dss=class extends kP{constructor(t,s,e,i,r){super(),this.Bes=EP.Hr(EP.Rect),this.Bes.set(t,s,e,i),this.qx=EP.Hr(EP.To,r),this.qx.Zo()}Yss(t,s,e){this.Bes.multiply(s,s),t._v(),t.Qx(this.qx),t.Zx(3),t.Rect(this.Bes),e.nss(t)}},kP.mss=class extends kP{constructor(t,s,e,i,r){super(),this.Bes=EP.Hr(EP.Rect),this.Bes.set(t,s,e,i),this.qx=EP.Hr(EP.To,r),this.qx.Zo()}Yss(t,s){t._v(),t.Qx(this.qx),this.Bes.multiply(s,s),t.Rect(this.Bes)}},kP.yss=class extends kP{constructor(t,s,e,i,r,n,h){super(),this.Bes=EP.Hr(EP.Rect),this.Bes.set(t,s,e,i),this.$es=EP.Hr(EP.To,r),this.Ues=EP.Hr(EP.To,n),this.Ves=h}Yss(t,s){t.Pv(),t.Qx(this.$es),t.oF(this.Ues),this.Bes.multiply(s,s),OP.Xl(this.Bes),0===this.Ves?DP.set(0,0,1,0,1,1,0,1):DP.set(0,1,0,0,1,0,1,1),t.XO(OP,DP)}},kP.wss=class extends kP{constructor(t,s,e,i,r,n){super(),this.Bes=EP.Hr(EP.Rect),this.Bes.set(t-e,s-i,t+e,s+i),this.qx=EP.Hr(EP.To,r),this.qx.Zo(),this.Wes=n}Yss(t,s){this.Bes.multiply(s,s),this.Wes?(t.Ov(),t.Qx(this.qx),this.Bes.fl(.5,.5),t.aF(1/this.Bes.width(),1/this.Bes.height()),t.Rect(this.Bes)):(t.Av(),t.Qx(this.qx),t.Rect(this.Bes))}},kP.bss=class extends kP{constructor(t,s,e,i,r,n,h){super(),this.Bes=EP.Hr(EP.Rect),this.Bes.set(t-e,s-i,t+e,s+i),this.qx=EP.Hr(EP.To,r),this.qx.Zo(),this.zes=n,this.Wes=h}Yss(t,s){this.Bes.multiply(s,s),this.Wes?(t.Fv(),t.Qx(this.qx),this.Bes.fl(.5,.5),t.aF(1/this.Bes.width(),1/this.Bes.height(),this.zes*s),t.Rect(this.Bes)):(t.Ev(),t.aF(1/this.Bes.width(),1/this.Bes.height(),this.zes*s),t.Qx(this.qx),t.Rect(this.Bes))}},kP.Css=class extends kP{constructor(t,s,e,i,r,n){super(),this.Bes=EP.Hr(EP.Rect),this.Bes.set(t,s,e,i),this.qx=EP.Hr(EP.To,r),this.qx.Zo(),this.zes=n}Yss(t,s){t._v(),t.Qx(this.qx),t.Rb(),t.xb(this.zes*s),this.Bes.multiply(s,s),t.pb(this.Bes),t.Ab(),t.Cb()}},kP.Ry=class extends kP{constructor(t,s,e,i,r,n,h){super(),this.Bes=EP.Hr(EP.Rect),this.Bes.set(t,s,e,i),this.qx=EP.Hr(EP.To,r),this.qx.Zo(),this.zes=n,this.jes=h}Yss(t,s){t._v(),t.Qx(this.qx),t.Gb(this.jes),t.xb(this.zes*s);const e=this.Bes;e.multiply(s,s),t.Ry(e.Qa(),e.tl(),e.sl(),e.el()),t.Ab(),t.Cb()}},kP._ss=class extends kP{constructor(t,s,e,i){super(),this.Hes=t,this.qx=EP.Hr(EP.To,s),this.qx.Zo(),this.zes=e,this.jes=i}Yss(t,s){t._v(),t.Qx(this.qx),t.Gb(this.jes),t.xb(this.zes*s);const e=this.Hes;for(let i=0,r=e.length;i<r;++i){const n=(i+1)%r,h=e[i][0]*s,o=e[i][1]*s,a=e[n][0]*s,l=e[n][1]*s;t.Ry(h,o,a,l)}t.Ab(),t.Cb()}},kP.Iss=class extends kP{constructor(t,s,e,i,r,n,h,o,a){super(),this.Bes=EP.Hr(EP.Rect),this.Bes.set(t,s,e,i),this.qx=EP.Hr(EP.To,r),this.qx.Zo(),this.zes=n,this.qes=h,this.Jes=o,this.jes=a}Yss(t,s){t.xv(),t.BO(this.Jes),t.Qx(this.qx),t.Gb(this.jes),t.xb(this.zes*s);const e=this.Bes,i=EP.nn(e.Qa(),e.tl(),e.sl(),e.el())/(2*this.qes);e.multiply(s,s),t.rb(e.Qa(),e.tl(),e.sl(),e.el(),0,i),t.Ab(),t.Cb()}},kP.Rss=class extends kP{constructor(t,s,e,i,r,n){super(),this.Hes=t,this.qx=EP.Hr(EP.To,s),this.qx.Zo(),this.zes=e,this.qes=i,this.Jes=r,this.jes=n}Yss(t,s){t.xv(),t.BO(this.Jes),t.Qx(this.qx),t.Gb(this.jes),t.xb(this.zes*s);let e=0;const i=this.Hes;for(let r=0,n=i.length;r<n;++r){const h=(r+1)%n,o=i[r][0],a=i[r][1],l=i[h][0],u=i[h][1],c=e+EP.nn(o,a,l,u)/(2*this.qes);t.rb(o*s,a*s,l*s,u*s,e,c),e=c-Math.floor(c)}t.Ab(),t.Cb()}},kP.Ess=class extends kP{constructor(t,s,e){super(),this.Hes=t,this.Yes=e,this.qx=EP.Hr(EP.To,s),this.qx.Zo()}Yss(t,s){t._v(),t.Qx(this.qx);const e=this.Hes;for(let t=0,i=e.length;t<i;++t){const i=e[t];i[0]*=s,i[1]*=s}if(this.Yes)t.Bb(e.flat());else{const s=self.vs;if(!s.Cs(e))return;s.Is(e),s.Ts(e,EP.tn(.1));const i=s.xs(e,[],[],[],25,1e3);for(const s of i)t.Bb(s.flat())}}},kP.Fss=class extends kP{constructor(t){super(),this.Xes=t}Yss(t,s,e){e.sss(this.Xes),e.nss(t)}},kP.Lss=class extends kP{constructor(t,s,e,i){super();const r=e.BH();this.Kes=s,this.Zes=i,this.Qes=r.yH().J9(),this.tis=new Map,this.tis.set(r,r.J9()),this.V6=t.map(t=>this.sis(t,e))}sis(t,s){const e=s.YY(),i=s.BH(),r=t.kH(),n=r.BH(),h=r.lC(),o=r.fC(),a=r.Cy(),l=r.My(),u=r.YY();this.tis.has(n)||this.tis.set(n,n.J9());const c=i.q9(n);if(!c){const[t,s]=n.xK(h,o),[e,u]=i.vK(t,s);r.BZ(e,u);const c=n.Stt()/i.Stt();r.tA(a*c,l*c);const f=i.YX()-n.YX();r.tmt(f)}if(0!==e){const t=s.eQ(),i=t.ol(),n=t.al(),a=-s.jEt(),l=s.zEt();LP.set(h,o),LP.offset(-i,-n),LP.Na(a,l),LP.offset(i,n),r.BZ(LP.Fa(),LP.La()),r.tmt(-e)}0===e&&c||r.NZ();const f=[t,t.xC("visual-state")];return 0===e&&c||(r.BZ(h,o),r.tA(a,l),r.JY(u),r.NZ()),f}Yss(t,s,e){const i=e.Sq()._H(),r=e.kH().BH(),n=r.yH(),h=r.pK(),o=e.kH().tQ(),a=e.kW(),l=e.NM()>=2,u=this.Kes,c=n.J9();n.Y9(this.Qes);const f=new Map;for(const[t,s]of this.tis)f.set(t,t.J9()),t.Y9(s);i.gYt(!0);const d=(h.width()-o.width())/-2,p=(h.height()-o.height())/-2,[m,g]=r.xK(o.Qa(),o.tl());i.QJt(m,g);const y=d+(o.Qa()-h.Qa()),S=p+(o.tl()-h.tl()),w=a.My();let v=1;v=e.ess()?a.Cy()/Math.floor(o.width())/r.Stt():i.TK()*self.devicePixelRatio;const b=w/v;t.CO(a.EM()),r.W4(t,!1,y,S,b);for(let s=0,n=this.V6.length;s<n;++s){const n=this.V6[s],h=n[0],o=n[1];if(h.NH())continue;const c=h.kH(),f=h.xC("visual-state");if(h.CC(o,"visual-state"),c.tQ(),!u||!c.ftt()||l&&c.LZ()._jt())r.est(h,c,t);else{const s={RW:(t,s,e)=>{i.QJt(0,0),r.W4(s),e(),i.QJt(m,g),t.sz(s)},AW:m,EW:g,DW:!0};e.ess()&&(e.zss(OP),OP.Ql(FP),s.OW=FP.width(),s.FW=FP.height()),h.IUt(!0),r.nst(h,c,t,a,s)&&r.W4(t,!1,y,S,b),h.IUt(!1)}h.CC(f,"visual-state")}i.QJt(0,0),i.gYt(!1),e.$ss(t),e.nss(t),n.Y9(c);for(const[t,s]of f)t.Y9(s);this.Zes()}}}{const NP=self.Gs;NP.uq.eis=class extends NP.TDt{constructor(t){super(t)}qr(){super.qr()}}}{const BP=self.Gs;BP.uq.eis.kBt=class extends BP.cLt{constructor(t){super(t)}qr(){super.qr()}YDt(){this.s1().yq(this.Bc)}Eet(t){return this.s1().R4(t,{yT:this.Bc.PU()})}Net(){this.s1().vR()}}}{let $P=function(t){return dR.get(t).iis()};GetParticleEngine=$P;const UP=self.Gs,VP=self.Ns,WP=0,zP=1,jP=2,HP=3,qP=4,JP=5,YP=6,XP=7,KP=8,ZP=9,QP=10,tR=11,sR=12,eR=13,iR=14,rR=15,nR=16,hR=17,oR=18,aR=19,lR=20,uR=0,cR=1,fR=UP.Hr(UP.Rect);UP.uq.eis.Instance=class extends UP.zLt{constructor(t,s){super(t),this.ris=!0;const e=UP.Hr(self.nis);this.his=e,e.ois=()=>this.ais(),this.lis=null,this.uis=(t,s,e,i,r,n)=>this.cis(t,s,e,i,r,n),this.fis=t=>this.dis(t),this.pis=!0;let i=!0;s&&(e.mis(s[WP]),e.gis(UP.tn(s[zP])),e.yis(s[jP]?"one-shot":"continuous-spray"),this.Sis(this.Bc.R3(s[HP])),i=s[qP],e.wis(s[JP]),e.vis(s[YP]),e.bis(s[XP]/100),e.xis(s[KP]),e.Cis(s[ZP]),e.Tis(s[QP]),e.Mis(s[tR]),e.Iis(s[sR]),e.Gis(s[eR]),e._is(s[iR]),e.Pis(s[rR]),e.Ris(s[nR]),e.Ais(s[hR]),e.Eis(s[oR]),e.Ois(s[aR]),e.Fis(s[lR])),this.Dis(),this.lis&&(this.pis=!1),"one-shot"===e.Lis()?e.kis():e.Nis(!0);const r=this.kH();r.OX(i),r.Mzt(!0),this.fe.wf().addEventListener("bboxchange",()=>{r.Tzt(this.his.tQ())}),this.Sq().Rx().pv()&&r.mzt(),this.Irt=t=>this.Grt(t),this.Sq().wf().addEventListener("afterload",this.Irt),this.DLt()}qr(){this.Sq().wf().removeEventListener("afterload",this.Irt),this.Irt=null,this.his.qr(),this.his=null,this.uis=null,this.fis=null,super.qr()}iis(){return this.his}Bis(t){this.his.mis(t),"one-shot"===this.his.Lis()&&this.ris&&this.his.$is(t)}Sis(t){t===this.yY()&&(t=null),t!==this.lis&&(this.lis=t,this.his.Uis=t?t=>this.Vis(t):null,this.lis||(this.pis=!0))}Dis(){const t=this.his,s=this.kH();t.Wis(s.FO()),t.C2t(this.Bc.oH()),t.zis(s.lC()),t.jis(s.fC()),t.His(s.YY()),t.qis(Math.abs(s.$Wt()))}ais(){this.Bc.qH(this.fe)}nT(t){if(!this.pis)return;const s=this.Ybt.s1(),e=s.AM();if(!e)return;const i=this.kH(),r=i.BH(),n=fR;this.Bc._H().yYt()?n.set(-1/0,-1/0,1/0,1/0):r.F9()?r.cst(i.KZ(),n):r.v9(i.KZ(),n),t.BO(e);const h=r.b9(i.KZ());this.his.Jis(r.TK()*h),this.his.nT(t,s.ekt(),n,r.F9())}xC(){const t=this.his;return{r:t.Yis(),sc:t.Xis(),st:t.Lis(),isp:t.Kis(),isz:t.Zis(),io:t.Qis(),gr:t.trs(),xr:t.srs(),yr:t.ers(),spr:t.irs(),szr:t.rrs(),grnd:t.nrs(),acc:t.hrs(),g:t.ors(),lar:t.ars(),lsr:t.lrs(),lor:t.urs(),dm:t.crs(),to:t.frs(),s:t.drs(),pcc:t.prs(),ft:this.ris,soc:this.lis?this.lis.s9():null,p:t.mrs().map(t=>t.toJSON())}}CC(t,s){const e=this.his;if(e.mis(t.r),e.gis(t.sc),e.yis(t.st),e.wis(t.isp),e.vis(t.isz),e.bis(t.io),e.xis(t.gr),e.Cis(t.xr),e.Tis(t.yr),e.Mis(t.spr),e.Iis(t.szr),e.Gis(t.grnd),e._is(t.acc),e.Pis(t.g),e.Ris(t.lar),e.Ais(t.lsr),e.Eis(t.lor),e.Ois(t.dm),e.Fis(t.to),e.Nis(t.s),e.grs(t.pcc),this.ris=t.ft,t.hasOwnProperty("soc")){const s=this.Sq().R3(t.soc);s&&this.Sis(s)}const i=t.p;e.$is(i.length,!1);const r=e.mrs();for(let t=0,s=r.length;t<s;++t)r[t].wa(i[t]);"state"===s&&this.lis&&(e.yrs(),e.Srs(this))}Grt(){const t=this.his;t.yrs(),t.Srs(this);const s=t.mrs();for(let t=0,e=s.length;t<e;++t){const e=s[t],i=e.wrs();if(!i)continue;const r=i.kH();if(!r)continue;const n=r.J1();if(!n)continue;const h=e.vrs(),o=n.kK();if(("number"!=typeof h||"number"!=typeof o||h!==o)&&"number"==typeof h){const t=this.Sq(),s=t.EH(h);s&&t.qH(s)}}}Int(){const t=this.Bc.Rj(this.fe);this.Dis(),this.ris&&"one-shot"===this.his.Lis()&&this.his.brs(),this.his.Int(t),this.his.drs()&&this.Bc.jH(),this.kH().NZ(),this.ris=!1}xrs(t){const s=1/60;for(this.ris&&"one-shot"===this.his.Lis()&&this.his.brs();t>0;)this.his.Int(s),t-=s;this.his.drs()&&this.Bc.jH(),this.kH().NZ(),this.ris=!1}Vis(t,s){let e;"number"==typeof s&&(e=this.Bc.EH(s)),e&&e.yY()!==this.lis&&(e=null),e||(e=this.Bc.GY(this.lis,this.kH().BH(),t.lC(),t.fC()));const i=e.kH();return i.tA(t.Fu(),t.Fu()),i.JY(t.YY()),i.LO(t.FO()),i.oQ(this.kH().hQ()),i.NZ(),i.mQ(this.J1(),!0),e.iit(),t.Crs(this.uis),t.Trs(this.fis),e}cis(t,s,e,i,r,n){if(t.NH())return;const h=t.kH();h.UZ(s,e),h.tA(h.Cy()+i,h.My()+i),h.JY(h.YY()+r),h.LO(h.FO()+n),h.NZ()}dis(t){t.NH()||this.Bc.qH(t)}Rpt(t){const s=this.his;switch(t){case WP:return s.Yis();case zP:return UP.sn(s.Xis());case jP:return"one-shot"===s.Lis()?cR:uR;case JP:return s.Kis();case YP:return s.Zis();case XP:return 100*s.Qis();case KP:return s.trs();case ZP:return s.srs();case QP:return s.ers();case tR:return s.irs();case sR:return s.rrs();case eR:return s.nrs();case iR:return s.hrs();case rR:return s.ors();case nR:return s.ars();case hR:return s.lrs();case oR:return s.urs();case aR:return s.crs();case lR:return s.frs()}}Lpt(t,s){const e=this.his;switch(t){case WP:e.mis(s);break;case zP:e.gis(UP.tn(s));break;case jP:e.yis(s?"one-shot":"continuous-spray");break;case JP:e.wis(s);break;case YP:e.vis(s);break;case XP:e.bis(s/100);break;case KP:e.xis(s);break;case ZP:e.Cis(s);break;case QP:e.Tis(s);break;case tR:e.Mis(s);break;case sR:e.Iis(s);break;case eR:e.Gis(s);break;case iR:e._is(s);break;case rR:e.Pis(s);break;case nR:e.Ris(s);break;case hR:e.Ais(s);break;case oR:e.Eis(s);break;case aR:e.Ois(s);break;case lR:e.Fis(s)}}BLt(){const t="plugins.particles",s=t+".properties",e=t+".debugger",i=this.his;return[{title:t+".name",properties:[{name:e+".particle-count",value:i.Mrs()},{name:s+".type.name",value:[s+".type.items."+i.Lis()]},{name:e+".is-spraying",value:i.drs(),S6t:t=>i.Nis(t)},{name:s+".rate.name",value:i.Yis(),S6t:t=>i.mis(t)},{name:s+".spray-cone.name",value:UP.sn(i.Xis()),S6t:t=>i.gis(UP.tn(t))},{name:s+".speed.name",value:i.Kis(),S6t:t=>i.wis(t)},{name:s+".size.name",value:i.Zis(),S6t:t=>i.vis(t)},{name:s+".opacity.name",value:i.Qis(),S6t:t=>i.bis(t)},{name:s+".grow-rate.name",value:i.trs(),S6t:t=>i.xis(t)},{name:s+".x-randomiser.name",value:i.srs(),S6t:t=>i.Cis(t)},{name:s+".y-randomiser.name",value:i.ers(),S6t:t=>i.Tis(t)},{name:s+".initial-speed-randomiser.name",value:i.irs(),S6t:t=>i.Mis(t)},{name:s+".size-randomiser.name",value:i.rrs(),S6t:t=>i.Iis(t)},{name:s+".grow-rate-randomiser.name",value:i.nrs(),S6t:t=>i.Gis(t)},{name:s+".acceleration.name",value:i.hrs(),S6t:t=>i._is(t)},{name:s+".gravity.name",value:i.ors(),S6t:t=>i.Pis(t)},{name:s+".angle-randomiser.name",value:i.ars(),S6t:t=>i.Ris(t)},{name:s+".life-speed-randomiser.name",value:i.lrs(),S6t:t=>i.Ais(t)},{name:s+".opacity-randomiser.name",value:i.urs(),S6t:t=>i.Eis(t)},{name:s+".timeout.name",value:i.frs(),S6t:t=>i.Fis(t)}]}]}XDt(){return self.Irs}};const dR=new WeakMap;self.Irs=class extends self.c0{constructor(){super(),dR.set(this,self.MK._K().g0())}set Grs(t){$P(this).Nis(!!t)}get Grs(){return $P(this).drs()}set rate(t){VP.ii(t),dR.get(this).Bis(t)}get rate(){return $P(this).Yis()}set _rs(t){VP.ii(t),$P(this).gis(t)}get _rs(){return $P(this).Xis()}set Prs(t){VP.ii(t),$P(this).wis(t)}get Prs(){return $P(this).Kis()}set Rrs(t){VP.ii(t),$P(this).vis(t)}get Rrs(){return $P(this).Zis()}set Ars(t){VP.ii(t),$P(this).bis(t)}get Ars(){return $P(this).Qis()}set Ers(t){VP.ii(t),$P(this).Cis(t)}get Ers(){return $P(this).srs()}set Ors(t){VP.ii(t),$P(this).Tis(t)}get Ors(){return $P(this).ers()}set Frs(t){VP.ii(t),$P(this).Mis(t)}get Frs(){return $P(this).irs()}set Drs(t){VP.ii(t),$P(this).Iis(t)}get Drs(){return $P(this).rrs()}set Lrs(t){VP.ii(t),$P(this).xis(t)}get Lrs(){return $P(this).trs()}set krs(t){VP.ii(t),$P(this).Gis(t)}get krs(){return $P(this).nrs()}set acceleration(t){VP.ii(t),$P(this)._is(t)}get acceleration(){return $P(this).hrs()}set Nrs(t){VP.ii(t),$P(this).Pis(t)}get Nrs(){return $P(this).ors()}set Brs(t){VP.ii(t),$P(this).Ris(t)}get Brs(){return $P(this).ars()}set $rs(t){VP.ii(t),$P(this).Ais(t)}get $rs(){return $P(this).lrs()}set Urs(t){VP.ii(t),$P(this).Eis(t)}get Urs(){return $P(this).urs()}set timeout(t){VP.ii(t),$P(this).Fis(t)}get timeout(){return $P(this).frs()}Vrs(t){VP.ii(t),dR.get(this).xrs(t)}Wrs(t){const s=dR.get(this);t?s.Sis(s.Sq().Yq(t)):s.Sis(null)}}}self.Gs.uq.eis.aq={drs(){return this.his.drs()}};{const pR=self.Gs;pR.uq.eis.qdt={Nis(t){this.his.Nis(0!==t)},mis(t){this.Bis(t)},zrs(t){this.Sis(t)},jrs(){this.Sis(null)},gis(t){this.his.gis(pR.tn(t))},wis(t){this.his.wis(t)},vis(t){this.his.vis(t)},bis(t){this.his.bis(t/100)},xis(t){this.his.xis(t)},Hrs(t){this.his.Cis(t)},qrs(t){this.his.Tis(t)},Jrs(t){this.his.Mis(t)},Yrs(t){this.his.Iis(t)},Xrs(t){this.his.Gis(t)},Krs(t){this.his._is(t)},Pis(t){this.his.Pis(t)},Zrs(t){this.his.Ris(t)},Qrs(t){this.his.Ais(t)},tns(t){this.his.Eis(t)},Fis(t){this.his.Fis(t)},sns(t){this.xrs(t)},U6t(t){this.kH().Zx(t),this.Bc.jH()}}}{const mR=self.Gs;mR.uq.eis.Jdt={ens(){return this.his.Mrs()},ins(){return this.his.Yis()},rns(){return mR.sn(this.his.Xis())},nns(){return this.his.Kis()},hns(){return this.his.Zis()},ons(){return 100*this.his.Qis()},ans(){return this.his.trs()},lns(){return this.his.srs()},uns(){return this.his.ers()},cns(){return this.his.rrs()},fns(){return this.his.irs()},pns(){return this.his.nrs()},mns(){return this.his.hrs()},gns(){return this.his.ors()},yns(){return this.his.ars()},Sns(){return this.his.lrs()},wns(){return this.his.urs()},vns(){return this.his.frs()}}}{const gR=self.Gs,yR=[],SR=1e3,wR=new Set(["continuous-spray","one-shot"]),vR=["fade-to-invisible","timeout-expired","particle-stopped"],bR=gR.Hr(gR.Rect);self.nis=class{constructor(){this.bns=0,this.xns=0,this.Cns="continuous-spray",this.Tns=!1,this.Mns=0,this.Ins=!1,this.Gns=0,this._ns=0,this.Pns=0,this.Rns=0,this.Ans=0,this.Ens=1,this.Ons=0,this.Fns=0,this.Dns=0,this.Lns=0,this.kns=0,this.Nns=0,this.Bns=0,this.$ns=0,this.Uns=0,this.Vns=0,this.Wns=0,this.zns=0,this.jns=0,this.kf=0,this.Hns=0,this.qns=1,this.ois=null,this.Uis=null,this.Jns=[],this.uWt=new gR.Rect,this.qx=new gR.To,this.ZV=globalThis.devicePixelRatio||1}qr(){this.Uf(),gR.bh(this.Jns),this.Jns=null,this.ois=null,this.Uis=null,this.uWt=null,this.qx=null}Uf(){const t=this.Jns;for(let s=0,e=t.length;s<e;++s)t[s].gFt();gR.Fr(yR,t),gR.bh(t),yR.length>1e3&&gR.wh(yR,1e3),this.Tns=!1}kis(){for(let t=0,s=this.bns;t<s;++t)this.Yns();this.Jns.length&&(this.Tns=!0)}Yns(t=!0){let s=null;return yR.length?(s=yR.pop(),s.Xns(this)):s=gR.Hr(self.Kns,this),this.Jns.push(s),t?s.rUt(this.Uis):s.rUt(),s}brs(){const t=this.Jns,s=this.Uis;for(let e=0,i=t.length;e<i;++e)t[e].rUt(s)}yrs(){const t=this.Jns,s=this.Uis;for(let e=0,i=t.length;e<i;++e)t[e].Zns(s)}Srs(t){const s=this.Jns;for(let e=0,i=s.length;e<i;++e){const i=s[e],r=i.wrs();if(r){const s=r.kH();s.uC(i.lC()),s.dC(i.fC()),s.tA(i.Fu(),i.Fu()),s.LO(i.FO()),s.JY(i.YY()),s.oQ(t.kH().hQ()),s.NZ()}}}$is(t,s=!0){const e=this.Jns;if(t<e.length){const s=e.length-t;for(let t=0;t<s;++t){const t=e.pop();t.gFt(),yR.push(t)}yR.length>1e3&&gR.wh(yR,1e3)}else if(t>e.length){const i=t-e.length;for(let t=0;t<i;++t)this.Yns(s)}}mrs(){return this.Jns}Mrs(){return this.Jns.length}Int(t){this.Qns(t),this.ths(t),this.shs()}Qns(t){if("continuous-spray"===this.Cns&&this.Tns){this.Hns+=t*this.bns;const s=Math.floor(this.Hns);this.Hns-=s;for(let t=0;t<s;++t)this.Yns()}}grs(t){this.Hns=t}prs(){return this.Hns}ths(t){const s=this.uWt;s.set(this.Gns,this._ns,this.Gns,this._ns);const e=this.Jns;let i=0;for(let r=0,n=e.length;r<n;++r){const n=e[r];e[i]=n,n.Int(t),n.zIt()?(++i,s.Gl(n.tQ())):(n.gFt(),yR.push(n))}gR.wh(e,i),yR.length>1e3&&gR.wh(yR,1e3)}shs(){"one-shot"===this.Cns&&0===this.Jns.length&&this.Tns&&(this.ois&&this.ois(),this.Tns=!1)}nT(t,s,e,i){this.ZV=globalThis.devicePixelRatio||1,bR.set(s.Bn(),s.$n(),s.Wn(),s.zn()),t.eF(bR),this.qx.S(t.NO());const r=this.Jns;for(let n=0,h=r.length;n<h;++n){const h=r[n];e.Cl(h.tQ())&&h.nT(t,s,i)}t.iF()}NO(){return this.qx}mis(t){this.bns=+t}Yis(){return this.bns}gis(t){this.xns=+t}Xis(){return this.xns}yis(t){if(!wR.has(t))throw new Error("invalid spray type");this.Cns=t}Lis(){return this.Cns}Nis(t){this.Tns=!!t}drs(){return this.Tns}Wis(t){this.Mns=+t}ehs(){return this.Mns}C2t(t){this.Ins=!!t}ihs(){return this.Ins}zis(t){this.Gns=+t}rhs(){return this.Gns}jis(t){this._ns=+t}nhs(){return this._ns}His(t){this.Pns=+t}hhs(){return this.Pns}wis(t){this.Rns=+t}Kis(){return this.Rns}vis(t){this.Ans=+t}Zis(){return this.Ans}qis(t){this.Ens=+t}ohs(){return this.Ens}bis(t){this.Ons=+t}Qis(){return this.Ons}xis(t){this.Fns=+t}trs(){return this.Fns}Cis(t){this.Dns=+t}srs(){return this.Dns}Tis(t){this.Lns=+t}ers(){return this.Lns}Mis(t){this.kns=+t}irs(){return this.kns}Iis(t){this.Nns=+t}rrs(){return this.Nns}Gis(t){this.Bns=+t}nrs(){return this.Bns}_is(t){this.$ns=+t}hrs(){return this.$ns}Pis(t){this.Uns=+t}ors(){return this.Uns}Ris(t){this.Vns=+t}ars(){return this.Vns}Ais(t){this.Wns=+t}lrs(){return this.Wns}Eis(t){this.zns=+t}urs(){return this.zns}ahs(t){let s=vR.indexOf(t);if(-1===s)throw new Error("invalid destroy mode");this.jns=s}Ois(t){this.ahs(vR[t])}lhs(){return vR[this.jns]}crs(){return this.jns}Fis(t){this.kf=+t}frs(){return this.kf}Jis(t){this.qns=+t}uhs(){return this.qns}tQ(){return this.uWt}wJ(){return this.ZV}}}{let xR=function(t){return Math.random()*t-t/2};randomOffset=xR;const CR=self.Gs,TR=self.nis,MR=new CR.Pl,IR=new CR.To;let GR=!1;self.Kns=class{constructor(t){this.chs=t,this.Bf=!1,this.Ra=0,this.Aa=0,this.TNt=0,this.B8=0,this.fhs=1,this.dhs=0,this.phs=0,this.f$=0,this.mhs=0,this.ghs=0,this.yhs=0,this.cu=new CR.Rect,this.Shs=null,this.whs=NaN,this.vhs=null,this.bhs=null}Xns(t){this.chs=t}rUt(t){const s=this.chs;this.Bf=!0,this.Ra=s.rhs()+xR(s.srs()),this.Aa=s.nhs()+xR(s.ers()),this.TNt=s.Kis()+xR(s.irs()),this.B8=s.hhs()+xR(s.Xis()),this.fhs=s.Qis(),this.dhs=this.fhs,this.f$=(s.Zis()+xR(s.rrs()))*s.ohs(),this.mhs=this.f$/2,this.phs=s.trs()+xR(s.nrs()),this.ghs=0,this.yhs=0,this.xhs(),t?this.Shs||(this.Shs=t(this)):(this.Shs=null,this.vhs=null,this.bhs=null)}Zns(t){t?this.Shs&&!this.Shs.NH()||(this.Shs=t(this,this.whs)):(this.Shs=null,this.vhs=null,this.bhs=null)}Crs(t){this.vhs=t}Trs(t){this.bhs=t}gFt(){const t=this.bhs;t&&t(this.Shs),this.Shs=null,this.vhs=null,this.bhs=null}toJSON(){let t;return this.Shs&&this.Shs.kH()&&(t=this.Shs.kH().J1().kK()),[this.Ra,this.Aa,this.TNt,this.B8,this.fhs,this.phs,this.f$,this.ghs,this.yhs,t]}wa(t){this.Ra=t[0],this.Aa=t[1],this.TNt=t[2],this.B8=t[3],this.fhs=t[4],this.dhs=this.fhs,this.phs=t[5],this.f$=t[6],this.ghs=t[7],this.yhs=t[8],this.whs=t[9],this.mhs=this.f$/2,this.xhs()}Int(t){const s=this.chs,e=this.TNt*t,i=this.B8,r=Math.cos(i)*e,n=Math.sin(i)*e+this.ghs*t;this.Ra+=r,this.Aa+=n;const h=this.phs*t;this.f$+=h,this.mhs=this.f$/2,this.TNt+=s.hrs()*t,this.ghs+=s.ors()*t,this.yhs+=t,this.xhs();const o=s.ars(),a=s.lrs(),l=s.urs();let u=0;0!==o&&(u=xR(o*t),this.B8+=u),0!==a&&(this.TNt+=xR(a*t)),0!==l&&(this.fhs=CR.Zr(this.fhs+xR(l*t),0,1));const c=this.f$>=1&&(2===s.crs()?this.TNt>0:this.yhs<s.frs()),f=this.vhs;if(f&&c){let t=s.ehs()*this.fhs;0===s.crs()&&(t*=1-this.yhs/s.frs());const e=t-this.dhs;this.dhs=t,f(this.Shs,r,n,h,u,e)}this.Bf=c}zIt(){return this.Bf}tQ(){return this.cu}xhs(){const t=this.Ra,s=this.Aa,e=this.mhs;this.cu.set(t-e,s-e,t+e,s+e)}nT(t,s,e){if(this.Shs)return;const i=this.chs;let r=i.ehs()*this.fhs;if(0===i.crs()&&(r*=1-this.yhs/i.frs()),r<=0)return;const n=this.f$,h=n*i.uhs()*i.wJ();if(h<1)return;let o=this.Ra,a=this.Aa;i.ihs()&&(o=o+.5|0,a=a+.5|0),t.pv()?t.rF(o,a,n,r):e||h>t.UF()||h<t.$F()?(IR.S(i.NO()),IR.Ko(r),t.Qx(IR),GR=!0,MR.Xl(this.cu),t.XO(MR,s)):(GR&&(t.Qx(i.NO()),GR=!1),t.rF(o,a,h,r))}wrs(){return this.Shs}vrs(){return this.whs}lC(){return this.Ra}fC(){return this.Aa}Fu(){return this.f$}YY(){return this.B8}FO(){return this.fhs}}}{const _R=self.Gs;_R.uq.Chs=class extends _R.TDt{constructor(t){super(t)}qr(){super.qr()}}}{let PR=function(t){switch(t){case 0:return"clamp-to-edge";case 1:return"repeat";case 2:return"mirror-repeat"}return"repeat"};WrapModeToStr=PR;const RR=self.Gs;RR.uq.Chs.kBt=class extends RR.cLt{constructor(t,s){super(t),this.GT="repeat",this._T="repeat",s&&(this.GT=PR(s[0]),this._T=PR(s[1]))}qr(){super.qr()}YDt(){this.s1().yq(this.Bc)}Eet(t){return this.s1().R4(t,{yT:this.Bc.PU(),mT:this.GT,gT:this._T})}Net(){this.s1().vR()}Ths(){return this.GT}Mhs(){return this._T}}}{const AR=globalThis.Gs,ER=globalThis.Ns,OR=0,FR=4,DR=5,LR=6,kR=7,NR=8,BR=9,$R=10,UR=11,VR=12,WR=13,zR=14,jR=AR.Hr(AR.Rect),HR=AR.Hr(AR.Pl),qR=AR.Hr(AR.Rect),JR=AR.Hr(AR.Pl);AR.uq.Chs.Instance=class extends AR.zLt{constructor(t,s){super(t),this.Ihs=0,this.Ghs=0,this.R9t=1,this.A9t=1,this._hs=0,this.Phs=!1,this.Rhs=0,this.Ahs=0,this.Ehs=0,this.Ohs=0,this.Fhs=0,this.O9t=null,s&&(this.kH().OX(!!s[OR]),this.Ihs=s[FR],this.Ghs=s[DR],this.R9t=s[LR],this.A9t=s[kR],this._hs=AR.tn(s[NR]),this.Phs=!!s[BR],this.Rhs=s[$R],this.Ahs=s[UR],this.Ehs=s[VR],this.Ohs=s[WR],this.Fhs=s[zR])}qr(){this.k9t(),super.qr()}k9t(){this.O9t&&(this.O9t.qr(),this.O9t=null)}Dhs(t,s,e){const i=this.ZLt(),r=i.Cy(),n=i.My(),h=this.Ihs/r,o=this.Ghs/n,a=this._hs;qR.set(0,0,t/(r*this.R9t),s/(n*this.A9t)),qR.offset(-h,-o),0===a?e.Xl(qR):e.Kl(qR,-a)}Lhs(t,s=!0){if(this.Phs){const s=this.ZLt();t.Gv(),t.uF(s.Cy()*this.R9t,s.My()*this.A9t,this.Rhs,this.Ahs,this.Ehs,this.Ohs,this.Fhs)}else s&&t.xv()}nT(t){const s=this.ZLt(),e=s.AM();if(null===e)return;this.Lhs(t),t.BO(e);const i=s.Cy(),r=s.My();let n=this.Ihs/i,h=this.Ghs/r;0!==this._hs||this.Phs||("repeat"===this.IEt().Ths()&&(n%=1),"repeat"===this.IEt().Mhs()&&(h%=1));const o=this.kH();qR.set(0,0,o.Cy()/(i*this.R9t),o.My()/(r*this.A9t)),qR.offset(-n,-h),o.h0()?this.P5t(o,t):this.R5t(o,t)}R5t(t,s){let e=t.eQ();this.Bc.oH()&&(e=t.Czt(e)),0===this._hs?s.ab(e,qR):(JR.Kl(qR,-this._hs),s.XO(e,JR))}P5t(t,s){const e=t.Vzt();if(t.zzt()){t.QZ(jR,HR,!1);let s=HR;this.Bc.oH()&&(s=t.Czt(s));let i=qR;0!==this._hs&&(JR.Kl(qR,-this._hs),i=JR),e.QC(t.o0(),s,i),t.Wzt(!1)}e.nT(s,t.KZ())}ZLt(){return this.O9t||this.Ybt.s1()}Eut(){return!0}AM(){return this.ZLt().AM()}khs(){this.kH().Wzt(!0)}Nhs(t){this.Ihs!==t&&(this.Ihs=t,this.Bc.jH(),this.khs())}Bhs(){return this.Ihs}$hs(t){this.Ghs!==t&&(this.Ghs=t,this.Bc.jH(),this.khs())}Uhs(){return this.Ghs}hts(t){this.R9t!==t&&(this.R9t=t,this.Bc.jH(),this.khs())}ots(){return this.R9t}ats(t){this.A9t!==t&&(this.A9t=t,this.Bc.jH(),this.khs())}lts(){return this.A9t}Vhs(t){this._hs!==t&&(this._hs=t,this.Bc.jH(),this.khs())}Whs(){return this._hs}zhs(t){t=!!t,this.Phs!==t&&(this.Phs=t,this.Bc.jH())}jhs(){return this.Phs}Hhs(t){this.Rhs!==t&&(this.Rhs=t,this.jhs()&&this.Bc.jH())}qhs(){return this.Rhs}Jhs(t){this.Ahs!==t&&(this.Ahs=t,this.jhs()&&this.Bc.jH())}Yhs(){return this.Ahs}Xhs(t){this.Ehs!==t&&(this.Ehs=t,this.jhs()&&this.Bc.jH())}Khs(){return this.Ehs}Zhs(t){this.Ohs!==t&&(this.Ohs=t,this.jhs()&&this.Bc.jH())}Qhs(){return this.Ohs}tos(t){this.Fhs!==t&&(this.Fhs=t,this.jhs()&&this.Bc.jH())}sos(){return this.Fhs}xC(){const t={};return 0!==this.Ihs&&(t.iox=this.Ihs),0!==this.Ghs&&(t.ioy=this.Ghs),1!==this.R9t&&(t.isx=this.R9t),1!==this.A9t&&(t.isy=this.A9t),0!==this._hs&&(t.ia=this._hs),this.Phs&&(t.tr=!0),1!==this.Rhs&&(t.trx=this.Rhs),1!==this.Ahs&&(t.try=this.Ahs),1!==this.Ehs&&(t.tra=this.Ehs),.1!==this.Ohs&&(t.trbmx=this.Ohs),.1!==this.Fhs&&(t.trbmy=this.Fhs),t}CC(t){this.Ihs=t.iox||0,this.Ghs=t.ioy||0,this.R9t=t.hasOwnProperty("isx")?t.isx:1,this.A9t=t.hasOwnProperty("isy")?t.isy:1,this._hs=t.ia||0,this.Phs=!!t.tr,this.Rhs=t.hasOwnProperty("trx")?t.trx:1,this.Ahs=t.hasOwnProperty("try")?t.try:1,this.Ehs=t.hasOwnProperty("tra")?t.tra:1,this.Ohs=t.hasOwnProperty("trbmx")?t.trbmx:.1,this.Fhs=t.hasOwnProperty("trbmy")?t.trbmy:.1}BLt(){const t="plugins.tiledbg.properties";return[{title:t+".image-transform.name",properties:[{name:t+".image-offset-x.name",value:this.Bhs(),S6t:t=>this.Nhs(t)},{name:t+".image-offset-y.name",value:this.Uhs(),S6t:t=>this.$hs(t)},{name:t+".image-scale-x.name",value:100*this.ots(),S6t:t=>this.hts(t/100)},{name:t+".image-scale-y.name",value:100*this.lts(),S6t:t=>this.ats(t/100)},{name:t+".image-angle.name",value:AR.sn(this.Whs()),S6t:t=>this.Vhs(AR.tn(t))}]},{title:t+".tile-randomization.name",properties:[{name:t+".enable-tile-randomization.name",value:this.jhs(),S6t:t=>this.zhs(t)},{name:t+".x-random.name",value:100*this.qhs(),S6t:t=>this.Hhs(t/100)},{name:t+".y-random.name",value:100*this.Yhs(),S6t:t=>this.Jhs(t/100)},{name:t+".angle-random.name",value:100*this.Khs(),S6t:t=>this.Xhs(t/100)},{name:t+".blend-margin-x.name",value:100*this.Qhs(),S6t:t=>this.Zhs(t/100)},{name:t+".blend-margin-y.name",value:100*this.sos(),S6t:t=>this.tos(t/100)}]}]}Rpt(t){switch(t){case FR:return this.Bhs();case DR:return this.Uhs();case LR:return this.ots();case kR:return this.lts();case NR:return this.Whs();case BR:return this.jhs();case $R:return this.qhs();case UR:return this.Yhs();case VR:return this.Khs();case WR:return this.Qhs();case zR:return this.sos()}}Lpt(t,s){switch(t){case FR:this.Nhs(s);break;case DR:this.$hs(s);break;case LR:this.hts(s);break;case kR:this.ats(s);break;case NR:this.Vhs(s);break;case BR:this.zhs(!!s);break;case $R:this.Hhs(s);break;case UR:this.Jhs(s);break;case VR:this.Xhs(s);break;case WR:this.Zhs(s);break;case zR:this.tos(s)}}XDt(){return globalThis.eos}},globalThis.eos=class extends globalThis.c0{#t;constructor(){super(),this.#t=globalThis.MK._K().g0()}set ios(t){ER.ii(t),this.#t.Nhs(t)}get ios(){return this.#t.Bhs()}set ros(t){ER.ii(t),this.#t.$hs(t)}get ros(){return this.#t.Uhs()}nos(t,s){ER.ii(t),ER.ii(s);const e=this.#t;e.Nhs(t),e.$hs(s)}hos(){const t=this.#t;return[t.Bhs(),t.Uhs()]}set pts(t){ER.ii(t),this.#t.hts(t)}get pts(){return this.#t.ots()}set mts(t){ER.ii(t),this.#t.ats(t)}get mts(){return this.#t.lts()}oos(t,s){ER.ii(t),ER.ii(s);const e=this.#t;e.hts(t),e.ats(s)}aos(){const t=this.#t;return[t.ots(),t.lts()]}set los(t){ER.ii(t),this.#t.Vhs(t)}get los(){return this.#t.Whs()}set uos(t){ER.ii(t),this.#t.Vhs(AR.tn(t))}get uos(){return AR.sn(this.#t.Whs())}get imageWidth(){return this.#t.ZLt().Cy()}get imageHeight(){return this.#t.ZLt().My()}_7t(){const t=this.#t.ZLt();return[t.Cy(),t.My()]}set fos(t){this.#t.zhs(!!t)}get fos(){return this.#t.jhs()}set dos(t){ER.ii(t),this.#t.Hhs(t)}get dos(){return this.#t.qhs()}set pos(t){ER.ii(t),this.#t.Jhs(t)}get pos(){return this.#t.Yhs()}mos(t,s){ER.ii(t),ER.ii(s);const e=this.#t;e.Hhs(t),e.Jhs(s)}gos(){const t=this.#t;return[t.qhs(),t.Yhs()]}set yos(t){ER.ii(t),this.#t.Xhs(t)}get yos(){return this.#t.Khs()}set Sos(t){ER.ii(t),this.#t.Zhs(t)}get Sos(){return this.#t.Qhs()}set wos(t){ER.ii(t),this.#t.tos(t)}get wos(){return this.#t.sos()}vos(t,s){ER.ii(t),ER.ii(s);const e=this.#t;e.Zhs(t),e.tos(s)}bos(){const t=this.#t;return[t.Qhs(),t.sos()]}async yts(t){ER.Ni(t,Blob);const s=this.#t,e=s.Sq(),i=AR.Hr(AR.tNt);i.pNt(e,t),await i.R4(e.Rx(),{yT:e.PU(),mT:s.IEt().Ths(),gT:s.IEt().Mhs()}),s.Jr()?i.qr():(s.k9t(),s.O9t=i,e.jH())}}}self.Gs.uq.Chs.aq={k7t:()=>!0,N7t:()=>!0,xos(){return this.jhs()}};{const YR=self.Gs;YR.uq.Chs.qdt={Cos(t){this.Nhs(t)},Tos(t){this.$hs(t)},bts(t){this.hts(t/100)},xts(t){this.ats(t/100)},Mos(t){this.Vhs(YR.tn(t))},Ios(t){this.zhs(t)},Gos(t,s){this.Hhs(t/100),this.Jhs(s/100)},_os(t){this.Xhs(t/100)},Pos(t,s){this.Zhs(t/100),this.tos(s/100)},U6t(t){this.kH().Zx(t),this.Bc.jH()},async j7t(t,s){if(this.O9t&&this.O9t.K5()===t)return;const e=this.Bc,i=YR.Hr(YR.tNt);try{if(await i.dNt(e,t,!0),!i.T6())throw new Error("image failed to load");if(this.Jr())return i.qr(),null;if(!await i.R4(e.Rx(),{yT:e.PU(),mT:this.IEt().Ths(),gT:this.IEt().Mhs()}))return}catch(t){return console.error("Load image from URL failed: ",t),void(this.Jr()||this.lZ(YR.uq.Chs.aq.N7t))}this.Jr()?i.qr():(this.k9t(),this.O9t=i,e.jH(),await this.hq(YR.uq.Chs.aq.k7t))}}}{const XR=self.Gs;XR.uq.Chs.Jdt={i9t(){return this.ZLt().Cy()},r9t(){return this.ZLt().My()},Ros(){return this.Ihs},Aos(){return this.Ghs},_ts(){return 100*this.R9t},Pts(){return 100*this.A9t},Eos(){return XR.sn(this._hs)},Oos(){return 100*this.qhs()},Fos(){return 100*this.Yhs()},Dos(){return 100*this.Khs()},Los(){return 100*this.Qhs()},kos(){return 100*this.sos()}}}{const KR=self.Gs;KR.uq.Nos=class extends KR.TDt{constructor(t){super(t)}qr(){super.qr()}}}{const ZR=self.Gs;ZR.uq.Nos.kBt=class extends ZR.cLt{constructor(t){super(t)}qr(){super.qr()}YDt(){}}}{let QR=function(t,s,e){if(s<t.length)tA.wh(t,s);else if(s>t.length)if("function"==typeof e)for(let i=t.length;i<s;++i)t.push(e());else for(let i=t.length;i<s;++i)t.push(e)};ResizeArray=QR;const tA=self.Gs,sA=self.Ns,eA=self.MK;tA.uq.Nos.Instance=class extends tA.gLt{constructor(t,s){super(t),this.Bos=10,this.$os=1,this.Uos=1,this.Nu=null,this.Vos=[],this.Wos=[],this.zos=[],this.jos=-1,s&&(this.Bos=s[0],this.$os=s[1],this.Uos=s[2]),this.Nu=tA.Co(this.Bos,()=>tA.Co(this.$os,()=>tA.Co(this.Uos,0)))}qr(){this.Nu=null,super.qr()}Hos(t,s,e){return t=Math.floor(t),s=Math.floor(s),e=Math.floor(e),t>=0&&t<this.Bos&&s>=0&&s<this.$os&&e>=0&&e<this.Uos?this.Nu[t][s][e]:0}Set(t,s,e,i){t=Math.floor(t),s=Math.floor(s),e=Math.floor(e),t>=0&&t<this.Bos&&s>=0&&s<this.$os&&e>=0&&e<this.Uos&&(this.Nu[t][s][e]=i)}tA(t,s,e){if(t=Math.floor(t),s=Math.floor(s),e=Math.floor(e),t<0&&(t=0),s<0&&(s=0),e<0&&(e=0),this.Bos===t&&this.$os===s&&this.Uos===e)return;this.Bos=t,this.$os=s,this.Uos=e;const i=this.Nu;QR(i,t,()=>tA.Co(s,()=>tA.Co(e,0)));for(let r=0;r<t;++r){QR(i[r],s,()=>tA.Co(e,0));for(let t=0;t<s;++t)QR(i[r][t],e,0)}}Cy(){return this.Bos}My(){return this.$os}Ktt(){return this.Uos}qos(t,s,e,i,r){for(;s>0;){const n=Math.floor(this.Bc.fH()*s);if(--s,0===t){const t=this.Hos(s,i,r),e=this.Hos(n,i,r);this.Set(s,i,r,e),this.Set(n,i,r,t)}else if(1===t){const t=this.Hos(e,s,r),i=this.Hos(e,n,r);this.Set(e,s,r,i),this.Set(e,n,r,t)}else if(2===t){const t=this.Hos(e,i,s),r=this.Hos(e,i,n);this.Set(e,i,s,r),this.Set(e,i,n,t)}}}BLt(){const t="plugins.arr.debugger",s="plugins.arr.properties",e=[{title:t+".array-properties.title",properties:[{name:s+".width.name",value:this.Bos,S6t:t=>this.tA(t,this.$os,this.Uos)},{name:s+".height.name",value:this.$os,S6t:t=>this.tA(this.Bos,t,this.Uos)},{name:s+".depth.name",value:this.Uos,S6t:t=>this.tA(this.Bos,this.$os,t)},{name:s+".elements.name",value:this.Bos*this.$os*this.Uos}]}],i=[];if(1===this.$os&&1===this.Uos)for(let t=0;t<this.Bos;++t)i.push({name:"$"+t,value:this.Nu[t][0][0],S6t:s=>this.Nu[t][0][0]=s});else for(let t=0;t<this.Bos;++t)i.push({name:"$"+t,value:this.Nu[t].toString()});return i.length&&e.push({title:t+".array-data.title",properties:i}),e}Jos(){return JSON.stringify({c2array:!0,size:[this.Bos,this.$os,this.Uos],data:this.Nu})}xC(){return{size:[this.Bos,this.$os,this.Uos],data:this.Nu}}CC(t){const s=t.size;this.Bos=s[0],this.$os=s[1],this.Uos=s[2],this.Nu=t.data}Yos(){return this.jos>=0&&this.jos<this.Vos.length?this.Vos[this.jos]:0}Xos(){return this.jos>=0&&this.jos<this.Wos.length?this.Wos[this.jos]:0}Kos(){return this.jos>=0&&this.jos<this.zos.length?this.zos[this.jos]:0}XDt(){return self.Zos}};const iA=new WeakMap;self.Zos=class extends eA{constructor(){super(),iA.set(this,eA._K().g0())}get width(){return iA.get(this).Cy()}get height(){return iA.get(this).My()}get depth(){return iA.get(this).Ktt()}jY(t,s=1,e=1){sA.ii(t),sA.ii(s),sA.ii(e),iA.get(this).tA(t,s,e)}Qos(t,s=0,e=0){return sA.ii(t),sA.ii(s),sA.ii(e),iA.get(this).Hos(t,s,e)}tas(t,s,e=0,i=0){if(sA.ii(s),sA.ii(e),sA.ii(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid type");iA.get(this).Set(s,e,i,t)}}}{let rA=function(t,s,e,i,r,n){t.N3(e),n.yY().fY().Txt(n.J1()),s.B3(i,r),t.U3(e)};DoForEachTrigger=rA;const nA=self.Gs;nA.uq.Nos.aq={FEt(t,s,e){return nA.compare(this.Hos(t,0,0),s,e)},sas(t,s,e,i){return nA.compare(this.Hos(t,s,0),e,i)},eas(t,s,e,i,r){return nA.compare(this.Hos(t,s,e),i,r)},ias(t){const s=this.Bc,e=s.oj(),i=s.dj(),r=i.xY(),n=s.vj(),h=n.A3(),o=n.E3(i),a=++this.jos,l=this.Vos,u=this.Wos,c=this.zos,f=this.Bos,d=this.$os,p=this.Uos;if(a===this.Vos.length?(l.push(0),u.push(0),c.push(0)):(l[a]=0,u[a]=0,c[a]=0),s.D3(!1),0===t)for(let t=0;t<f;++t)for(let s=0;s<d;++s)for(let n=0;n<p;++n)l[a]=t,u[a]=s,c[a]=n,rA(e,i,r,h,o,this);else if(1===t)for(let t=0;t<f;++t)for(let s=0;s<d;++s)l[a]=t,u[a]=s,rA(e,i,r,h,o,this);else for(let t=0;t<f;++t)l[a]=t,rA(e,i,r,h,o,this);return s.D3(!0),this.jos--,n.j3(),!1},ras(t,s){return nA.compare(this.Hos(this.Yos(),this.Xos(),this.Kos()),t,s)},nas(t){const s=this.Bos,e=this.$os,i=this.Uos,r=this.Nu;for(let n=0;n<s;++n)for(let s=0;s<e;++s)for(let e=0;e<i;++e)if(r[n][s][e]===t)return!0;return!1},Au(){return 0===this.Bos||0===this.$os||0===this.Uos},oas(t,s,e){let i=0;switch(t){case 0:i=this.Bos;break;case 1:i=this.$os;break;case 2:i=this.Uos}return nA.compare(i,s,e)}}}{let hA=function(t,s){if("number"==typeof t&&"number"==typeof s)return t-s;{const e=t.toString(),i=s.toString();return e<i?-1:e>i?1:0}};CompareValues=hA;const oA=self.Gs;oA.uq.Nos.qdt={Ru(t){const s=this.Bos,e=this.$os,i=this.Uos,r=this.Nu;for(let n=0;n<s;++n)for(let s=0;s<e;++s)for(let e=0;e<i;++e)r[n][s][e]=t},tA(t,s,e){this.tA(t,s,e)},uC(t,s){this.Set(t,0,0,s)},BZ(t,s,e){this.Set(t,s,0,e)},aas(t,s,e,i){this.Set(t,s,e,i)},E3(t,s,e){const i=this.Bos,r=this.$os,n=this.Uos,h=this.Nu;if(0===e){const e=oA.Co(r,()=>oA.Co(n,s));0===t?h.push(e):h.unshift(e),this.Bos++}else if(1===e){for(let e=0;e<i;++e){const i=oA.Co(n,s);0===t?h[e].push(i):h[e].unshift(i)}this.$os++}else{for(let e=0;e<i;++e)for(let i=0;i<r;++i)0===t?h[e][i].push(s):h[e][i].unshift(s);this.Uos++}},j3(t,s){const e=this.Bos,i=this.$os,r=this.Uos,n=this.Nu;if(0===s){if(0===e)return;0===t?n.pop():n.shift(),this.Bos--}else if(1===s){if(0===i)return;for(let s=0;s<e;++s)0===t?n[s].pop():n[s].shift();this.$os--}else{if(0===r)return;for(let s=0;s<e;++s)for(let e=0;e<i;++e)0===t?n[s][e].pop():n[s][e].shift();this.Uos--}},las(t){const s=this.Bos,e=this.$os,i=this.Uos,r=this.Nu;if(0!==s&&0!==e&&0!==i)if(0===t)r.reverse();else if(1===t)for(let t=0;t<s;++t)r[t].reverse();else for(let t=0;t<s;++t)for(let s=0;s<e;++s)r[t][s].reverse()},uas(t){const s=this.Bos,e=this.$os,i=this.Uos,r=this.Nu;if(0!==s&&0!==e&&0!==i)if(0===t)r.sort((t,s)=>hA(t[0][0],s[0][0]));else if(1===t)for(let t=0;t<s;++t)r[t].sort((t,s)=>hA(t[0],s[0]));else for(let t=0;t<s;++t)for(let s=0;s<e;++s)r[t][s].sort(hA)},cas(t){const s=this.Bos,e=this.$os,i=this.Uos,r=this.Nu;if(0!==s&&0!==e&&0!==i)if(0===t)r.sort((t,s)=>{for(let i=0;i<e;++i){const e=hA(t[i][0],s[i][0]);if(0!==e)return e}return 0});else if(1===t)for(let t=0;t<e;++t){const e=[];for(let i=0;i<s;++i)e.push(r[i][t]);e.sort((t,s)=>hA(t[0],s[0]));for(let i=0;i<s;++i)r[i][t]=e[i]}else if(2===t){const t=[];for(let s=0;s<e;++s)t.push(s);t.sort((t,e)=>{for(let i=0;i<s;++i){const s=hA(r[i][t],r[i][e]);if(0!==s)return s}return 0});for(let e=0;e<s;++e){let s=[];for(const i of t)s.push(r[e][i]);r[e]=s}}else if(3===t)for(let t=0;t<s;++t)r[t].sort((t,s)=>hA(t[0],s[0]));else for(let t=0;t<s;++t)for(let s=0;s<e;++s)r[t][s].sort(hA)},fas(t){const s=this.Bos,e=this.$os,i=this.Uos;if(0!==s&&0!==e&&0!==i)if(0===t)for(let r=0;r<e;++r)for(let e=0;e<i;++e)this.qos(t,s,0,r,e);else if(1===t)for(let r=0;r<s;++r)for(let s=0;s<i;++s)this.qos(t,e,r,0,s);else for(let r=0;r<s;++r)for(let s=0;s<e;++s)this.qos(t,i,r,s,0)},Eu(t,s){if((t=Math.floor(t))<0)return;const e=this.Bos,i=this.$os,r=this.Uos,n=this.Nu;if(0===s){if(t>=e)return;n.splice(t,1),this.Bos--}else if(1===s){if(t>=i)return;for(let s=0;s<e;++s)n[s].splice(t,1);this.$os--}else{if(t>=r)return;for(let s=0;s<e;++s)for(let e=0;e<i;++e)n[s][e].splice(t,1);this.Uos--}},J6(t,s,e){if((s=Math.floor(s))<0)return;const i=this.Bos,r=this.$os,n=this.Uos,h=this.Nu;if(0===e){if(s>i)return;h.splice(s,0,oA.Co(r,()=>oA.Co(n,t))),this.Bos++}else if(1===e){if(s>r)return;for(let e=0;e<i;++e)h[e].splice(s,0,oA.Co(n,t));this.$os++}else{if(s>n)return;for(let e=0;e<i;++e)for(let i=0;i<r;++i)h[e][i].splice(s,0,t);this.Uos++}},das(t,s,e){const i=t.split(s);this.tA(i.length,1,1);for(let t=0,s=i.length;t<s;++t){let s=i[t];0===e?String(Number(s))===s&&(s=Number(s)):2===e&&(s=Number(s)),this.Set(t,0,0,s)}},pas(t){let s=null;try{s=JSON.parse(t)}catch(t){return void console.error("[Construct] Failed to parse JSON: ",t)}if(!s.c2array)return void console.warn("[Array] Attempted to load JSON that does not appear to be Construct array data - no data loaded");const e=s.size;this.Bos=e[0],this.$os=e[1],this.Uos=e[2],this.Nu=s.data},mas(t){const s=URL.createObjectURL(new Blob([this.Jos()],{type:"application/json"}));this.Bc.RH(s,t)}}}self.Gs.uq.Nos.Jdt={Hos(t,s,e){return this.Hos(t,s||0,e||0)},NFt(){return this.Bos},BFt(){return this.$os},gas(){return this.Uos},yas(){return this.Yos()},Sas(){return this.Xos()},was(){return this.Kos()},vas(){return this.Hos(this.Yos(),this.Xos(),this.Kos())},Ud(){return this.Hos(0,0,0)},bas(){return this.Hos(this.Bos-1,0,0)},xas(t){const s=this.Nu;for(let e=0,i=this.Bos;e<i;++e)if(s[e][0][0]===t)return e;return-1},Cas(t){const s=this.Nu;for(let e=this.Bos-1;e>=0;--e)if(s[e][0][0]===t)return e;return-1},Tas(t){let s=[];for(let t=0;t<this.Bos;++t)s.push(this.Hos(t,0,0));return s.join(t)},_Ft(){return this.Jos()}};{const aA=self.Gs;aA.uq.Mas=class extends aA.TDt{constructor(t){super(t)}qr(){super.qr()}}}{const lA=self.Gs;lA.uq.Mas.kBt=class extends lA.cLt{constructor(t){super(t)}qr(){super.qr()}YDt(){}}}{const uA=self.Gs,cA=(self.Ns,self.MK);uA.uq.Mas.Instance=class extends uA.gLt{constructor(t,s){super(t),this.ayt=new Map,this.Ias=""}qr(){this.ayt.clear(),super.qr()}Jos(){return JSON.stringify({c2dictionary:!0,data:uA.yo(this.ayt)})}Gas(){return this.ayt}xC(){return uA.yo(this.ayt)}CC(t){uA.So(t,this.ayt)}BLt(){const t="plugins.dictionary";return[{title:t+".name",properties:[{name:t+".debugger.key-count",value:this.ayt.size},...[...this.ayt].map(t=>({name:"$"+t[0],value:t[1],S6t:s=>this.ayt.set(t[0],s)}))]}]}XDt(){return self._as}};const fA=new WeakMap;self._as=class extends cA{constructor(){super(),fA.set(this,cA._K().g0())}Pas(){return fA.get(this).Gas()}}}{const dA=self.Gs;dA.uq.Mas.aq={Ras(t,s,e){const i=this.ayt.get(t);return void 0!==i&&dA.compare(i,s,e)},Aas(){const t=this.Bc,s=t.oj(),e=t.dj(),i=e.xY(),r=t.vj(),n=r.A3(),h=r.E3(e);t.D3(!1);for(const t of this.ayt.keys())this.Ias=t,s.N3(i),this.yY().fY().Txt(this.J1()),e.B3(n,h),s.U3(i);return t.D3(!0),this.Ias="",r.j3(),!1},Eas(t,s){const e=this.ayt.get(this.Ias);return void 0!==e&&dA.compare(e,t,s)},Oas(t){return this.ayt.has(t)},Au(){return 0===this.ayt.size}}}{const pA=self.Gs;pA.uq.Mas.qdt={Fas(t,s){this.ayt.set(t,s)},Das(t,s){this.ayt.has(t)&&this.ayt.set(t,s)},Las(t){this.ayt.delete(t)},Ru(){this.ayt.clear()},pas(t){let s=null;try{s=JSON.parse(t)}catch(t){return void console.error("[Construct] Error parsing JSON: ",t)}s.c2dictionary?pA.So(s.data,this.ayt):console.warn("[Dictionary] Attempted to load JSON that does not appear to be Construct dictionary data - no data loaded")},mas(t){const s=URL.createObjectURL(new Blob([this.Jos()],{type:"application/json"}));this.Bc.RH(s,t)}}}self.Gs.uq.Mas.Jdt={Hs(t){const s=this.ayt.get(t);return void 0===s?0:s},Vbt(t,s){const e=this.ayt.get(t);return void 0===e?s:e},kas(){return this.ayt.size},Nas(){return this.Ias},Bas(){return this.ayt.get(this.Ias)??0},_Ft(){return this.Jos()}};{const mA=self.Gs;mA.uq.$as=class extends mA.TDt{constructor(t){super(t)}qr(){super.qr()}}}{const gA=self.Gs;gA.uq.$as.kBt=class extends gA.cLt{constructor(t){super(t)}qr(){super.qr()}YDt(){}}}{const yA=self.Gs,SA="localstorage";yA.uq.$as.Instance=class extends yA.gLt{constructor(t,s){super(t,SA),this.Uas="",this.HG="",this.Vas=[],this.Was="",this.zas=!1,this.jas=0,this.Has=0,this.qas=!1,s&&(this.qas=s[0]);const e=this.Bc.bJ();this.vJ=null,this.qas?this.vJ=e.Te({Me:!0}):this.vJ=e,this.Jas=new Map,this.Yas=!1,this.Bc.iq(this.aC())}async aC(){const t=await Promise.race([this.PLt("init"),yA.ph(3e3)]);t&&(this.zas=t.isPersistent)}qr(){super.qr()}async Xas(t){this.Was=this.Kas(t),await this.hq(yA.uq.$as.aq.Zas)}Kas(t){return t?"string"==typeof t?t:"string"==typeof t.message?t.message:"string"==typeof t.name?t.name:"string"==typeof t.data?t.data:"unknown error":"unknown error"}BLt(){return this.Yas||this.Qas(),[{title:"plugins.localstorage.name",properties:[...this.Jas.entries()].map(t=>({name:"$"+t[0],value:t[1],S6t:s=>this.vJ.setItem(t[0],s)}))}]}async Qas(){this.Yas=!0;try{const t=await this.vJ.keys();t.sort((t,s)=>{const e=t.toLowerCase(),i=s.toLowerCase();return e<i?-1:i<e?1:0});const s=await Promise.all(t.map(t=>this.vJ.getItem(t)));this.Jas.clear();for(let e=0,i=t.length;e<i;++e)this.Jas.set(t[e],s[e])}catch(t){console.warn("[C3 debugger] Error displaying local storage: ",t)}finally{this.Yas=!1}}}}{const wA=self.Gs;wA.uq.$as.aq={tls(t){return this.Uas===t},sls:()=>!0,els(t){return this.Uas===t},ils:()=>!0,rls(t){return this.Uas===t},nls:()=>!0,hls:()=>!0,ols:()=>!0,Zas:()=>!0,als(t){return this.Uas===t},lls(t){return this.Uas===t},uls(t,s){return wA.compare(this.Uas,t,s)},Ras(t,s){return wA.compare(this.HG,t,s)},cls(){return this.Has>0},fls(){return this.jas>0},dls:()=>!0,pls:()=>!0,mls(){return this.zas}}}{let vA=function(t){return"string"==typeof t||"number"==typeof t};IsExpressionType=vA;const bA=self.Gs;bA.uq.$as.qdt={async gls(t,s){this.Has++;try{const e=await this.vJ.setItem(t,s);await this.MLt(async()=>{this.Uas=t,this.HG=e,await this.hq(bA.uq.$as.aq.sls),await this.hq(bA.uq.$as.aq.tls)})}catch(t){await this.Xas(t)}finally{this.Has--,0===this.Has&&await this.hq(bA.uq.$as.aq.dls)}},async yls(t,s){if(!s)return;const e=s.wOt(this.fe);if(!e)return;const i=e.g0();if(!i)return;const r=i.Sls();this.Has++;try{await this.vJ.setItem(t,r),await this.MLt(async()=>{this.Uas=t,this.HG="",await this.hq(bA.uq.$as.aq.sls),await this.hq(bA.uq.$as.aq.tls)})}catch(t){await this.Xas(t)}finally{this.Has--,0===this.Has&&await this.hq(bA.uq.$as.aq.dls)}},async wls(t){this.jas++;try{const s=await this.vJ.getItem(t);await this.MLt(async()=>{this.Uas=t,this.HG=vA(s)?s:"",await this.hq(bA.uq.$as.aq.ils),await this.hq(bA.uq.$as.aq.els)})}catch(t){await this.Xas(t)}finally{this.jas--,0===this.jas&&await this.hq(bA.uq.$as.aq.pls)}},async vls(t,s){if(!s)return;const e=s.wOt(this.fe);if(!e)return;const i=e.g0();this.jas++;try{let s=await this.vJ.getItem(t);s=s instanceof ArrayBuffer?s:new ArrayBuffer(0),await this.MLt(async()=>{this.HG="",this.Uas=t,i.bls(s),await this.hq(bA.uq.$as.aq.ils),await this.hq(bA.uq.$as.aq.els)})}catch(t){await this.Xas(t)}finally{this.jas--,0===this.jas&&await this.hq(bA.uq.$as.aq.pls)}},async xls(t){try{const s=await this.vJ.getItem(t);await this.MLt(async()=>{this.Uas=t,null==s?(this.HG="",await this.hq(bA.uq.$as.aq.lls)):(this.HG=vA(s)?s:"",await this.hq(bA.uq.$as.aq.als))})}catch(t){await this.Xas(t)}},async Dc(t){try{await this.vJ.removeItem(t),await this.MLt(async()=>{this.Uas=t,this.HG="",await this.hq(bA.uq.$as.aq.nls),await this.hq(bA.uq.$as.aq.rls)})}catch(t){await this.Xas(t)}},async Cls(){try{await this.vJ.clear(),await this.MLt(async()=>{this.Uas="",this.HG="",bA.bh(this.Vas),await this.hq(bA.uq.$as.aq.hls)})}catch(t){await this.Xas(t)}},async Tls(){try{const t=await this.vJ.keys();await this.MLt(async()=>{this.Vas=t,await this.hq(bA.uq.$as.aq.ols)})}catch(t){await this.Xas(t)}},async Mls(){const t=await this.PLt("request-persistent");t.isOk&&(this.zas=t.isPersistent)},Ils(t){if(!this.qas)return;let s;try{s=JSON.parse(t)}catch(t){return void console.error("[Local Storage] Failed to parse memory storage JSON: ",t)}s&&s["is-c3-storage"]&&Array.isArray(s.items)||console.error("[Local Storage] Failed to load memory storage JSON: invalid data"),this.vJ.Ce(new Map(s.items))}}}self.Gs.uq.$as.Jdt={Gls(){return this.HG},_ls(){return this.Uas},kas(){return this.Vas.length},Pls(t){return(t=Math.floor(t))<0||t>=this.Vas.length?"":this.Vas[t]},Rls(){return this.Was},Als(){return this.qas?JSON.stringify({"is-c3-storage":!0,items:[...this.vJ.xe()]}):""}};{const xA=self.Gs;xA.uq.Els=class extends xA.TDt{constructor(t){super(t)}qr(){super.qr()}}}{const CA=self.Gs;CA.uq.Els.kBt=class extends CA.cLt{constructor(t){super(t)}qr(){super.qr()}YDt(){}}}{const TA=self.Gs;TA.uq.Els.Instance=class extends TA.gLt{constructor(t,s){super(t),this.Ols="",this.Fls=0,this.Dls="",this.Lls=0,this.kf=-1,this.kls=new Map,this.Nls=null,this.Bls="",this.$ls=!1}qr(){super.qr()}async Uls(t,s,e){console.error(`[Construct] AJAX request to '${s}' (tag '${t}') failed: `,e),this.Dls=t,await this.hq(TA.uq.Els.aq.Vls),this.Dls=t,await this.hq(TA.uq.Els.aq.Zas)}async Wls(t){this.Dls=t,await this.hq(TA.uq.Els.aq.zls),this.Dls=t,await this.hq(TA.uq.Els.aq.jls)}async Hls(t,s){s.lengthComputable&&(this.Lls=s.loaded/s.total,this.Dls=t,await this.hq(TA.uq.Els.aq.qls))}async Jls(t,s){s.lengthComputable&&(this.Lls=s.loaded/s.total,this.Dls=t,await this.hq(TA.uq.Els.aq.Yls))}Xls(t,s,e){this.Uls(t,s,e)}Kls(t,s,e,i){return new Promise(r=>{const n=e=>{this.Xls(t,s,e),r()},h=this.Nls;this.Nls=null;try{const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(4===o.readyState){if(this.Ols=h?"":(o.responseText||"").replace(/\r\n/g,"\n"),this.Fls=o.status,o.status>=400)this.Uls(t,s,o.status+o.statusText);else{const s=this.Ols.length||h&&o.response instanceof ArrayBuffer;(0!==o.status||s)&&(h&&h.bls(o.response),this.Wls(t))}r()}},o.onerror=n,o.ontimeout=n,o.onabort=n,o.onprogress=s=>this.Hls(t,s),o.upload.onprogress=s=>this.Jls(t,s),o.open(e,s),this.kf>=0&&void 0!==o.timeout&&(o.timeout=this.kf),o.responseType=h?"arraybuffer":"text",i&&!this.kls.has("Content-Type")&&("string"!=typeof i?o.setRequestHeader("Content-Type","application/octet-stream"):o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));for(const[t,s]of this.kls)try{o.setRequestHeader(t,s)}catch(e){console.error(`[Construct] AJAX: Failed to set header '${t}: ${s}': `,e)}if(this.kls.clear(),this.Bls){try{o.overrideMimeType(this.Bls)}catch(t){console.error("[Construct] AJAX: failed to override MIME type: ",t)}this.Bls=""}this.$ls&&(o.withCredentials=!0,this.$ls=!1),i?o.send(i):o.send()}catch(t){n(t)}})}BLt(){const t="plugins.ajax.debugger";return[{title:t+".title",properties:[{name:t+".last-status-code",value:this.Fls},{name:t+".last-data",value:this.Ols}]}]}xC(){return{lastData:this.Ols,lastStatusCode:this.Fls}}CC(t){this.Ols=t.lastData,this.Fls=t.hasOwnProperty("lastStatusCode")?t.lastStatusCode:0,this.Dls="",this.Lls=0}}}{const MA=self.Gs;MA.uq.Els.aq={jls(t){return MA.Zi(this.Dls,t)},zls:()=>!0,Zas(t){return MA.Zi(this.Dls,t)},Vls:()=>!0,qls(t){return MA.Zi(this.Dls,t)},Yls(t){return MA.Zi(this.Dls,t)}}}self.Gs.uq.Els.qdt={async Request(t,s){await this.Kls(t,s,"GET",null)},async Zls(t,s){await this.Kls(t,s,"GET",null)},async Qls(t,s,e,i){await this.Kls(t,s,i,e)},async tus(t,s,e,i){if(!e)return;const r=e.wOt(this.fe);if(!r)return;const n=r.g0().Sls();await this.Kls(t,s,i,n)},Fis(t){this.kf=1e3*t},sus(t,s){this.kls.set(t,s)},eus(t){if(!t)return;const s=t.wOt(this.fe);s&&(this.Nls=s.g0())},ius(t){this.Bls=t},rus(t){this.$ls=!!t}},self.Gs.uq.Els.Jdt={nus(){return this.Ols},hus(){return this.Fls},ous(){return this.Lls},Tag(){return this.Dls}};{const IA=self.Gs;IA.uq.Touch=class extends IA.TDt{constructor(t){super(t)}qr(){super.qr()}}}{let GA=function(){return RA.KJ().g0()};GetTouchSdkInstance=GA;const _A=self.Gs,PA=self.Ns;_A.uq.Touch.kBt=class extends _A.cLt{constructor(t){super(t)}qr(){super.qr()}YDt(){}XDt(){return self.aus}};let RA=null;self.aus=class extends self.CY{constructor(t){super(t),RA=t,t.Sq().CH().MH=this}requestPermission(t){PA.oi(t);const s=GA();if("orientation"===t)return s.lus(0);if("motion"===t)return s.lus(1);throw new Error("invalid type")}}}{const AA=self.Gs,EA="touch";AA.uq.Touch.Instance=class extends AA.gLt{constructor(t,s){super(t,EA),this.uus=new Map,this.cus=!1,this.fus=!1,this.dus=0,this.pus=0,this.mus=0,this.gus=0,this.yus=0,this.Sus=0,this.wus=0,this.vus=0,this.bus=0,this.xus=0,this.Cus=0,this.Tus=0,this.Mus=0,this.Ius=0,this.Gus=0,this._us=0,this.Pus=0,this.Rus=[],s&&(this.cus=s[0]),this.ILt("permission-result",t=>this.Aus(t));const e=this.Sq().wf();this.Kf=new AA.Jf(AA.Vf.qf(e,"pointerdown",t=>this.Eus(t.data)),AA.Vf.qf(e,"pointermove",t=>this.Ous(t.data)),AA.Vf.qf(e,"pointerup",t=>this.Fus(t.data,!1)),AA.Vf.qf(e,"pointercancel",t=>this.Fus(t.data,!0)),AA.Vf.qf(e,"deviceorientation",t=>this.Dus(t.data)),AA.Vf.qf(e,"deviceorientationabsolute",t=>this.Lus(t.data)),AA.Vf.qf(e,"devicemotion",t=>this.kus(t.data)),AA.Vf.qf(e,"tick2",t=>this.yrt()))}qr(){this.uus.clear(),super.qr()}Eus(t){if("mouse"===t.pointerType){if(!this.cus)return;this.fus=!0}const s=t.pointerId;if(this.uus.has(s))return;const e=t.pageX-this.Bc.aJ(),i=t.pageY-this.Bc.uJ(),r=performance.now(),n=this.uus.size;this.Cus=n,this.Tus=s;const h=AA.Hr(AA.uq.Touch.Nus);h.rUt(r,e,i,s,n),this.uus.set(s,h),this.lZ(AA.uq.Touch.aq.Bus),this.lZ(AA.uq.Touch.aq.$us),this.Ius=e,this.Gus=i,this.Pus=0,this.lZ(AA.uq.Touch.aq.Uus)}Ous(t){if("mouse"===t.pointerType&&!this.fus)return;const s=this.uus.get(t.pointerId);if(!s)return;const e=performance.now();if(e-s.nV()<2)return;const i=t.pageX-this.Bc.aJ(),r=t.pageY-this.Bc.uJ();s.r8(e,i,r,t.width,t.height,t.pressure)}Fus(t,s){if("mouse"===t.pointerType){if(!this.fus)return;this.fus=!1}const e=performance.now(),i=t.pointerId,r=this.uus.get(i);if(r){if(this.Cus=r.Vus(),this.Tus=r.t2(),!s){const s=t.pageX-this.Bc.aJ(),e=t.pageY-this.Bc.uJ();this.Ius=s,this.Gus=e,this.Pus=1,this.lZ(AA.uq.Touch.aq.Uus)}if(this.lZ(AA.uq.Touch.aq.Wus),this.lZ(AA.uq.Touch.aq.zus),!s){const t=r.jus(e);"single-tap"===t?(this.lZ(AA.uq.Touch.aq.Hus),this.Ius=r.lC(),this.Gus=r.fC(),this.lZ(AA.uq.Touch.aq.qus)):"double-tap"===t&&(this.lZ(AA.uq.Touch.aq.Jus),this.Ius=r.lC(),this.Gus=r.fC(),this.lZ(AA.uq.Touch.aq.Yus))}r.qr(),this.uus.delete(i)}}lus(t){return this.RLt("request-permission",{type:t}),new Promise((s,e)=>{this.Rus.push({type:t,resolve:s,reject:e})})}Aus(t){const s=t.result,e=t.type;this.Mus=e;const i=this.Rus.filter(t=>t.type===e);for(const t of i)t.resolve(s?"granted":"denied");this.Rus=this.Rus.filter(t=>t.type!==e),s?(this.lZ(AA.uq.Touch.aq.Xus),0===e?this.Bc.G0t():this.Bc._0t()):this.lZ(AA.uq.Touch.aq.Kus)}Dus(t){"number"==typeof t.webkitCompassHeading?this.dus=t.webkitCompassHeading:t.absolute&&(this.dus=t.alpha),this.pus=t.alpha,this.mus=t.beta,this.gus=t.gamma}Lus(t){this.dus=t.alpha}kus(t){const s=t.acceleration;s&&(this.yus=s.x,this.Sus=s.y,this.wus=s.z);const e=t.accelerationIncludingGravity;e&&(this.vus=e.x,this.bus=e.y,this.xus=e.z)}yrt(){const t=performance.now();let s=0;for(const e of this.uus.values())e.nV()<=t-50&&e.Zus(t),e.Qus(t)&&(this.Cus=e.Vus(),this.Tus=e.t2(),this._us=s,this.lZ(AA.uq.Touch.aq.tcs),this.Ius=e.lC(),this.Gus=e.fC(),this.lZ(AA.uq.Touch.aq.scs),this._us=0),++s}ecs(t){t=Math.floor(t);for(const s of this.uus.values()){if(0===t)return s;--t}return null}ics(t,s){return t>=0&&s>=0&&t<this.Bc.KZt()&&s<this.Bc.ZZt()}BLt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.uus.values()].map(t=>({name:"$"+t.t2(),value:t.lC()+", "+t.fC()}))}]}}}{const OA=self.Gs;OA.uq.Touch.aq={$us:()=>!0,zus:()=>!0,rcs(){return this.uus.size>0},Uus(t,s){return!!t&&s===this.Pus&&!!this.ics(this.Ius,this.Gus)&&this.Bc.Ez().Xjt(t,[[this.Ius,this.Gus]],!1)},ncs(t){if(!t)return!1;const s=this.Bc.gTt().EAt(),e=[...this.uus.values()].filter(t=>this.ics(t.lC(),t.fC())).map(t=>[t.lC(),t.fC()]);return OA.xor(this.Bc.Ez().Xjt(t,e,s),s)},hcs(t,s,e){const i=this.ecs(t);return!!i&&OA.compare(i.N0(),s,e)},ocs:()=>!0,acs:()=>!0,lcs(t,s,e){this.Bc.G0t();let i=0;return i=0===t?this.pus:1===t?this.mus:this.gus,OA.compare(i,s,e)},ucs(t,s,e){this.Bc._0t();let i=0;return i=0===t?this.vus:1===t?this.bus:2===t?this.xus:3===t?this.yus:4===t?this.Sus:this.wus,OA.compare(i,s,e)},Bus(t){return(t=Math.floor(t))===this.Cus},Wus(t){return(t=Math.floor(t))===this.Cus},ccs(t){return t=Math.floor(t),this.uus.size>=t+1},tcs:()=>!0,Hus:()=>!0,Jus:()=>!0,scs(t){return!!t&&!!this.ics(this.Ius,this.Gus)&&this.Bc.Ez().Xjt(t,[[this.Ius,this.Gus]],!1)},qus(t){return!!t&&!!this.ics(this.Ius,this.Gus)&&this.Bc.Ez().Xjt(t,[[this.Ius,this.Gus]],!1)},Yus(t){return!!t&&!!this.ics(this.Ius,this.Gus)&&this.Bc.Ez().Xjt(t,[[this.Ius,this.Gus]],!1)},Xus(t){return this.Mus===t},Kus(t){return this.Mus===t}}}self.Gs.uq.Touch.qdt={fcs(t){this.lus(t)}};{const FA=self.Gs;FA.uq.Touch.Jdt={dcs(){return this.uus.size},LFt(t){const s=this.ecs(this._us);return s?s.pcs(this.Bc.DH(),t,!0):0},kFt(t){const s=this.ecs(this._us);return s?s.pcs(this.Bc.DH(),t,!1):0},mcs(t,s){const e=this.ecs(t);return e?e.pcs(this.Bc.DH(),s,!0):0},gcs(t,s){const e=this.ecs(t);return e?e.pcs(this.Bc.DH(),s,!1):0},ycs(t,s){const e=this.uus.get(t);return e?e.pcs(this.Bc.DH(),s,!0):0},Scs(t,s){const e=this.uus.get(t);return e?e.pcs(this.Bc.DH(),s,!1):0},wcs(){const t=this.ecs(0);return t?t.lC():0},vcs(){const t=this.ecs(0);return t?t.fC():0},bcs(t){const s=this.ecs(t);return s?s.lC():0},xcs(t){const s=this.ecs(t);return s?s.fC():0},Ccs(t){const s=this.uus.get(t);return s?s.lC():0},Tcs(t){const s=this.uus.get(t);return s?s.fC():0},Mcs(t){const s=this.ecs(t);return s?s.N0():0},Ics(t){const s=this.uus.get(t);return s?s.N0():0},Gcs(t){const s=this.ecs(t);return s?FA.sn(s.YY()):0},_cs(t){const s=this.uus.get(t);return s?FA.sn(s.YY()):0},Pcs(){return this.Bc.G0t(),this.dus},Rcs(){return this.Bc.G0t(),this.pus},Acs(){return this.Bc.G0t(),this.mus},Ecs(){return this.Bc.G0t(),this.gus},Ocs(){return this.Bc._0t(),this.vus},Fcs(){return this.Bc._0t(),this.bus},Dcs(){return this.Bc._0t(),this.xus},Lcs(){return this.Bc._0t(),this.yus},kcs(){return this.Bc._0t(),this.Sus},Ncs(){return this.Bc._0t(),this.wus},Bcs(){return this.Cus},$cs(){return this.Tus},Ucs(t){const s=this.uus.get(t);return s?s.Cy():0},Vcs(t){const s=this.uus.get(t);return s?s.My():0},Wcs(t){const s=this.uus.get(t);return s?s.zcs():0}}}{const DA=self.Gs,LA=15,kA=500,NA=333,BA=25;let $A=-1e3,UA=-1e3,VA=-1e4;DA.uq.Touch.Nus=class extends DA.zr{constructor(){super(),this.jcs=0,this.n_=0,this.dKt=0,this.sW=0,this.Hcs=0,this.qcs=0,this.Jcs=0,this.Ra=0,this.Aa=0,this.Ycs=0,this.Xcs=0,this.Vy=0,this.Wy=0,this.Kcs=0,this.Zcs=!1,this.Qcs=!1}qr(){}rUt(t,s,e,i,r){this.jcs=i,this.n_=r,this.sW=t,this.Hcs=t,this.dKt=t,this.qcs=s,this.Jcs=e,this.Ra=s,this.Aa=e,this.Ycs=s,this.Xcs=e}r8(t,s,e,i,r,n){this.Hcs=this.sW,this.sW=t,this.Ycs=this.Ra,this.Xcs=this.Aa,this.Ra=s,this.Aa=e,this.Vy=i,this.Wy=r,this.Kcs=n,!this.Qcs&&DA.nn(this.qcs,this.Jcs,this.Ra,this.Aa)>=15&&(this.Qcs=!0)}t2(){return this.jcs}Vus(){return this.n_}nV(){return this.sW}Zus(t){this.Hcs=t}lC(){return this.Ra}fC(){return this.Aa}N0(){const t=DA.nn(this.Ra,this.Aa,this.Ycs,this.Xcs),s=(this.sW-this.Hcs)/1e3;return s>0?t/s:0}YY(){return DA.an(this.Ycs,this.Xcs,this.Ra,this.Aa)}Cy(){return this.Vy}My(){return this.Wy}zcs(){return this.Kcs}Qus(t){return!this.Zcs&&t-this.dKt>=500&&!this.Qcs&&DA.nn(this.qcs,this.Jcs,this.Ra,this.Aa)<15&&(this.Zcs=!0,!0)}jus(t){return this.Zcs?"":t-this.dKt<=333&&!this.Qcs&&DA.nn(this.qcs,this.Jcs,this.Ra,this.Aa)<15?t-VA<=666&&DA.nn($A,UA,this.Ra,this.Aa)<25?($A=-1e3,UA=-1e3,VA=-1e4,"double-tap"):($A=this.Ra,UA=this.Aa,VA=t,"single-tap"):""}pcs(t,s,e){if(void 0===s)return t.UH(0).dst(this.Ra,this.Aa)[e?0:1];{const i=t.BH(s);return i?i.gK(this.Ra,this.Aa)[e?0:1]:0}}}}{const WA=self.Gs;WA.uq.se=class extends WA.TDt{constructor(t){super(t)}qr(){super.qr()}}}{const zA=self.Gs;zA.uq.se.kBt=class extends zA.cLt{constructor(t){super(t)}qr(){super.qr()}YDt(){}}}{const jA=self.Gs,HA="browser";jA.uq.se.Instance=class extends jA.gLt{constructor(t,s){super(t,HA),this.tfs="",this.sfs=!1,this.efs="",this.ifs="",this.rfs=!1,this.nfs=0,this.hfs=0,this.ofs=0,this.afs=0,this.lfs=!1,this.ufs=!1,this.cfs=new Map,this.ffs=!1,this.dfs="",this.pfs=!1,this.GLt([["online-state",t=>this.mfs(t)],["backbutton",()=>this.gfs()],["sw-message",t=>this.yfs(t)],["hashchange",t=>this.Sfs(t)],["install-available",()=>this.wfs()],["app-installed",t=>this.vfs(t)],["fullscreenerror",()=>this.oJt()]]);const e=this.Sq().wf();this.Kf=new jA.Jf(jA.Vf.qf(e,"afterfirstlayoutstart",()=>this.bfs()),jA.Vf.qf(e,"window-resize",()=>this.nJt()),jA.Vf.qf(e,"window-focus",()=>this.iZt()),jA.Vf.qf(e,"window-blur",()=>this.eZt()),jA.Vf.qf(e,"suspend",()=>this.xfs()),jA.Vf.qf(e,"resume",()=>this.Cfs()),jA.Vf.qf(e,"windowmaximize",()=>this.Tfs()),jA.Vf.qf(e,"windowminimize",()=>this.Mfs())),this.Bc.iq(this.PLt("get-initial-state",{exportType:this.Bc.eJ()}).then(t=>{this.tfs=t.location,this.sfs=t.isOnline,this.efs=t.referrer,this.ifs=t.title,this.rfs=t.isCookieEnabled,this.nfs=t.screenWidth,this.hfs=t.screenHeight,this.ofs=t.windowOuterWidth,this.afs=t.windowOuterHeight,this.lfs=t.windowHasFocus,this.ufs=t.isConstructArcade}))}qr(){super.qr()}bfs(){this._Lt("ready-for-sw-messages")}async mfs(t){const s=!!t.isOnline;this.sfs!==s&&(this.sfs=s,this.sfs?await this.hq(jA.uq.se.aq.Ifs):await this.hq(jA.uq.se.aq.Gfs))}async nJt(){await this.hq(jA.uq.se.aq._fs)}async oJt(){await this.hq(jA.uq.se.aq.Pfs)}async iZt(){this.lfs=!0,await this.hq(jA.uq.se.aq.Rfs)}async eZt(){this.lfs=!1,await this.hq(jA.uq.se.aq.Afs)}async Tfs(){await this.hq(jA.uq.se.aq.Efs)}async Mfs(){await this.hq(jA.uq.se.aq.Ofs)}xfs(){this.lZ(jA.uq.se.aq.Ffs)}Cfs(){this.lZ(jA.uq.se.aq.Dfs)}async gfs(){await this.hq(jA.uq.se.aq.Lfs)}yfs(t){const s=t.type;"downloading-update"===s?this.lZ(jA.uq.se.aq.kfs):"update-ready"===s||"update-pending"===s?this.lZ(jA.uq.se.aq.Nfs):"offline-ready"===s&&this.lZ(jA.uq.se.aq.Bfs)}Sfs(t){this.tfs=t.location,this.lZ(jA.uq.se.aq.$fs)}wfs(){this.ffs=!0,this.lZ(jA.uq.se.aq.Ufs)}vfs(t){this.ffs=!1,this.lZ(jA.uq.se.aq.Vfs)}Wfs(){return this.pfs}zfs(t){t=!!t,this.pfs!==t&&(this.pfs=t,this._Lt("set-warn-on-close",{enabled:t}))}BLt(){const t="plugins.browser.debugger";return[{title:"plugins.browser.name",properties:[{name:t+".user-agent",value:navigator.userAgent},{name:t+".is-online",value:this.sfs},{name:t+".is-fullscreen",value:this.Bc._H().NJt()}]}]}}}{const qA=self.Gs;qA.uq.se.aq={jfs(){return this.sfs},Ifs:()=>!0,Gfs:()=>!0,_fs:()=>!0,Pfs:()=>!0,Rfs:()=>!0,Afs:()=>!0,Hfs(){return this.lfs},qfs(){return this.rfs},Jfs(){return this.Bc._H().NJt()},Lfs:()=>!0,Yfs(t){return(this.Bc._H().R2()<=this.Bc._H().A2()?0:1)===t},kfs:()=>!0,Nfs:()=>!0,Bfs:()=>!0,$fs:()=>!0,Ufs:()=>!0,Xfs(){return this.ffs},Kfs(t){switch(t){case 0:return"accepted"===this.dfs;case 1:return"dismissed"===this.dfs;case 2:return"error"===this.dfs;case 3:return!0;default:return!1}},Vfs:()=>!0,Zfs(t){const s=this.Bc._H().$Jt();switch(t){case 0:return"browser"===s;case 1:return"minimal-ui"===s;case 2:return"standalone"===s;case 3:return"fullscreen"===s;default:return!1}},Qfs(){return this.Wfs()},Efs:()=>!0,Ofs:()=>!0,tds(){return!this.Bc._j()},Ffs:()=>!0,Dfs:()=>!0,sds:()=>!1,eds:()=>!1,ids:()=>!1,rds:()=>!1,nds:()=>!1,hds:()=>!0,ods:()=>!0}}{const C3=self.Gs,ORIENTATIONS=["portrait","landscape","portrait-primary","portrait-secondary","landscape-primary","landscape-secondary"];C3.uq.se.qdt={ads(t){this._Lt("alert",{message:t.toString()})},lds(){this.ufs||(this.Bc.yZ()?self.SZ.uds():this._Lt("close"))},cds(){this._Lt("set-focus",{isFocus:!0})},fds(){this._Lt("set-focus",{isFocus:!1})},dds(){this.ufs||this._Lt("navigate",{type:"back"})},pds(){this.ufs||this._Lt("navigate",{type:"forward"})},mds(){},gds(){this.ufs||(this.Bc.yZ()?this.Bc.mZt({type:"reload"}):this._Lt("navigate",{type:"reload"}))},yds(t,s){this.RLt("navigate",{type:"url",url:t,target:s,exportType:this.Bc.eJ()})},Sds(t,s){this.RLt("navigate",{type:"new-window",url:t,tag:s,exportType:this.Bc.eJ()})},wds(t,s){t>=2&&(t+=1),6===t&&(t=2),1===t&&(t=0);const e=C3.BHt.HJt(t);this.Bc._H().VJt(e),this.RLt("request-fullscreen",{navUI:s})},vds(){this.RLt("exit-fullscreen")},bds(t){const s=t.split(",");for(let t=0,e=s.length;t<e;++t)s[t]=parseInt(s[t],10);this.RLt("vibrate",{pattern:s})},RH(t,s){if(!t||!s)return;const e=this.Bc.Pz().Tq(t);this.Bc.RH(e,s)},xds(t,s,e){if(!e)return;const i=`data:${s},${encodeURIComponent(t)}`;this.Bc.RH(i,e)},Cds(t,s){s=s.toString(),0===t?console.log(s):1===t?console.warn(s):2===t&&console.error(s)},Tds(t){console.group(t)},Mds(){console.groupEnd()},Ids(jsStr){try{eval(jsStr)}catch(t){console.error("Error executing JavaScript: ",t)}},Gds(t){if((t=Math.floor(t))<0||t>=ORIENTATIONS.length)return;const s=ORIENTATIONS[t];this.RLt("lock-orientation",{orientation:s})},_ds(){this.RLt("unlock-orientation")},Dq(t){this.Bc.Pz().Dq(t)},async Pds(t,s,e,i){await this.PLt("set-document-css-style",{prop:C3.bo(t),value:s,selector:e,"is-all":0!==i})},async Rds(t,s,e){const i=await this.PLt("get-document-css-style",{prop:t,selector:s});i.isOk&&this.cfs.set(e.toLowerCase(),i.result.trim())},Ads(t){this._Lt("set-hash",{hash:t})},Eds(t,s){this._Lt("set-window-size",{windowWidth:t,windowHeight:s})},Ods(t,s){this._Lt("set-window-position",{windowX:t,windowY:s})},async Fds(){const t=await this.PLt("request-install");this.dfs=t.result,this.lZ(C3.uq.se.aq.Kfs)},Dds(t){this.zfs(t)},Lds(){this.Bc.pZt({type:"maximize-window"})},kds(){this.Bc.pZt({type:"minimize-window"})},Nds(){this.Bc.pZt({type:"restore-window"})}}}{const C3=self.Gs;C3.uq.se.Jdt={URL(){return this.Bc.Jz()?this.tfs:location.toString()},Bds(){return this.Bc.Jz()?new URL(this.tfs).protocol:location.protocol},$ds(){return this.Bc.Jz()?new URL(this.tfs).hostname:location.hostname},Port(){return this.Bc.Jz()?new URL(this.tfs).port:location.port},Uds(){return this.Bc.Jz()?new URL(this.tfs).pathname:location.pathname},Vds(){return this.Bc.Jz()?new URL(this.tfs).hash:location.hash},Ys(){return this.Bc.Jz()?new URL(this.tfs).search:location.search},Wds(t){const s=this.Bc.Jz()?new URL(this.tfs).search:location.search,e=RegExp("[?&]"+t+"=([^&]*)").exec(s);return e?decodeURIComponent(e[1].replace(/\+/g," ")):""},zds(){return this.efs},jds(){return this.ifs},Hds:()=>navigator.language,Zs:()=>navigator.platform,qds:()=>navigator.userAgent,Jds(jsStr){let result=0;try{result=eval(jsStr)}catch(t){console.error("Error executing JavaScript: ",t)}return"number"==typeof result||"string"==typeof result?result:"boolean"==typeof result&&result?1:0},CSSStyleValue(t){return this.cfs.get(t)||""},Yds:()=>navigator.appName,Xds:()=>navigator.appVersion,Kds:()=>navigator.product,Zds:()=>navigator.vendor,Qds:()=>1,tps:()=>1/0,sps(){const t=navigator.connection;return t&&(t.downlink||t.downlinkMax||t.bandwidth)||1/0},ConnectionType(){const t=navigator.connection;return t&&t.type||"unknown"},eps:()=>self.devicePixelRatio,ips(){return this.nfs},rps(){return this.hfs},nps(){return this.Bc._H().R2()},hps(){return this.Bc._H().A2()},ops(){return this.ofs},aps(){return this.ofs},lps(){return this.Bc._H().$Jt()},ups(){return this.dfs}}}{const JA=self.Gs;JA.uq.cps=class extends JA.TDt{constructor(t){super(t)}qr(){super.qr()}}}{let YA=function(){return ZA.KJ().g0()};GetMouseSdkInstance=YA;const XA=self.Gs,KA=self.Ns;XA.uq.cps.kBt=class extends XA.cLt{constructor(t){super(t)}qr(){super.qr()}YDt(){}XDt(){return self.fps}};let ZA=null;self.fps=class extends self.CY{constructor(t){super(t),ZA=t,t.Sq().CH().TH=this}dps(t){return YA().pps(t)[0]}mps(t){return YA().pps(t)[1]}gps(t){return YA().pps(t)}yps(t){return YA().Sps(t)}wps(t){KA.oi(t),YA().vps(t)}bps(t){const s=YA(),e=s.Sq().Yq(t);s.xps(e)}}}{const QA=self.Gs,tE="mouse";let sE=null;QA.uq.cps.Instance=class extends QA.gLt{constructor(t,s){super(t,tE),this.Cps=[!1,!1,!1,!1,!1],this.Tps=0,this.Mps=0,this.Ips=0,this.Pus=0,this.Gps=0,this._ps=0,this.Pps=0,this.Rps=0,this.Aps=!1,this.Eps=0,this.Ops=0,this.GLt([["pointer-lock-change",t=>this.Fps(t)],["pointer-lock-error",t=>this.Dps(t)]]);const e=this.Sq().wf();this.Kf=new QA.Jf(QA.Vf.qf(e,"pointermove",t=>this.Ous(t.data)),QA.Vf.qf(e,"pointerdown",t=>this.Eus(t.data)),QA.Vf.qf(e,"pointerup",t=>this.Fus(t.data)),QA.Vf.qf(e,"dblclick",t=>this.Lps(t.data)),QA.Vf.qf(e,"wheel",t=>this.kps(t.data)),QA.Vf.qf(e,"window-blur",()=>this.eZt()))}qr(){super.qr()}Eus(t){"mouse"===t.pointerType&&(this.Tps=t.pageX-this.Bc.aJ(),this.Mps=t.pageY-this.Bc.uJ(),this.Nps(t.lastButtons,t.buttons))}Ous(t){this.Eps=t.movementX,this.Ops=t.movementY,this.lZ(QA.uq.cps.aq.Bps),this.Eps=0,this.Ops=0,"mouse"===t.pointerType&&(this.Tps=t.pageX-this.Bc.aJ(),this.Mps=t.pageY-this.Bc.uJ(),this.Nps(t.lastButtons,t.buttons))}Fus(t){"mouse"===t.pointerType&&this.Nps(t.lastButtons,t.buttons)}Nps(t,s){this.$ps(t,s,1,0),this.$ps(t,s,4,1),this.$ps(t,s,2,2),this.$ps(t,s,8,3),this.$ps(t,s,16,4)}$ps(t,s,e,i){!(t&e)&&s&e?this.Ups(i):t&e&&!(s&e)&&this.Vps(i)}Ups(t){this.Cps[t]=!0,this.lZ(QA.uq.cps.aq.Wps),this.Ips=t,this.Pus=0,this.lZ(QA.uq.cps.aq.zps),this.lZ(QA.uq.cps.aq.jps)}Vps(t){this.Cps[t]&&(this.Cps[t]=!1,this.Ips=t,this.lZ(QA.uq.cps.aq.Hps))}Lps(t){this.Ips=t.button,this.Pus=1,this.lZ(QA.uq.cps.aq.zps),this.lZ(QA.uq.cps.aq.jps)}kps(t){this.Gps=t.deltaY<0?1:0,this._ps=t.deltaX,this.Pps=t.deltaY,this.Rps=t.deltaZ,this.lZ(QA.uq.cps.aq.qps)}eZt(){for(let t=0,s=this.Cps.length;t<s;++t){if(!this.Cps[t])return;this.Cps[t]=!1,this.Ips=t,this.lZ(QA.uq.cps.aq.Hps)}}pps(t){const s=this.Bc.dH(),e=this.Tps,i=this.Mps;if(void 0===t)return s.UH(0).dst(e,i);{const r=s.BH(t);return r?r.gK(e,i):[0,0]}}Sps(t){return t=Math.floor(t),!!this.Cps[t]}Jps(){return this.Tps>=0&&this.Mps>=0&&this.Tps<this.Bc.KZt()&&this.Mps<this.Bc.ZZt()}vps(t){sE!==t&&(sE=t,this._Lt("cursor",t))}async xps(t){if(QA.Zs.oe||!t)return;const s=t.wOt();if(!s)return;const e=s.kH(),i=s.ZLt();if(!e||!i)return;if(sE===i)return;sE=i;const r=`url(${await i.xNt()}) ${Math.round(e.WZ()*i.Cy())} ${Math.round(e.HZ()*i.My())}, auto`;this._Lt("cursor",r)}Fps(t){this.Yps(t["has-pointer-lock"])}Dps(t){this.Yps(t["has-pointer-lock"]),this.lZ(QA.uq.cps.aq.Xps)}Yps(t){this.Aps!==t&&(this.Aps=t,this.Aps?this.lZ(QA.uq.cps.aq.Kps):this.lZ(QA.uq.cps.aq.Zps))}BLt(){const t="plugins.mouse";return[{title:t+".name",properties:[{name:t+".debugger.absolute-position",value:this.Tps+","+this.Mps},{name:t+".debugger.left-button",value:this.Cps[0]},{name:t+".debugger.middle-button",value:this.Cps[1]},{name:t+".debugger.right-button",value:this.Cps[2]},{name:t+".debugger.button-4",value:this.Cps[3]},{name:t+".debugger.button-5",value:this.Cps[4]}]},{title:t+".debugger.position-on-each-layer",properties:this.Bc.dH().hX().map(t=>({name:"$"+t.Rc(),value:t.gK(this.Tps,this.Mps).join(", ")}))}]}}}{const eE=self.Gs;eE.uq.cps.aq={zps(t,s){return this.Ips===t&&this.Pus===s},Wps:()=>!0,Qps(t){return this.Cps[t]},Hps(t){return this.Ips===t},tms(t){const s=this.Bc.gTt().EAt(),e=[];return this.Jps()&&e.push([this.Tps,this.Mps]),eE.xor(this.Bc.Ez().Xjt(t,e,s),s)},jps(t,s,e){if(t!==this.Ips||s!==this.Pus)return!1;if(!this.Jps())return!1;const i=this.Tps,r=this.Mps;return this.Bc.Ez().Xjt(e,[[i,r]],!1)},qps(t){return 2===t||this.Gps===t},Kps:()=>!0,Zps:()=>!0,Xps:()=>!0,sms(){return this.Aps},Bps:()=>!0}}{const iE=self.Gs,rE=["auto","pointer","text","crosshair","move","help","wait","none"],nE=["auto","all-scroll","none","help","pointer","progress","wait","cell","crosshair","text","vertical-text","alias","copy","move","not-allowed","grab","grabbing","col-resize","row-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out"];iE.uq.cps.qdt={ems(t){this.vps(rE[t])},ims(t){this.vps(nE[t])},rms(t){this.xps(t)},nms(t){this.RLt("request-pointer-lock",{unadjustedMovement:t})},hms(){this._Lt("release-pointer-lock")}}}self.Gs.uq.cps.Jdt={LFt(t){return this.pps(t)[0]},kFt(t){return this.pps(t)[1]},wcs(){return this.Tps},vcs(){return this.Mps},oms(){return this.Eps},ams(){return this.Ops},lms(){return this._ps},ums(){return this.Pps},cms(){return this.Rps}};{const hE=self.Gs;hE.uq.Keyboard=class extends hE.TDt{constructor(t){super(t)}qr(){super.qr()}}}{let oE=function(){return lE.KJ().g0()};GetKeyboardSdkInstance=oE;const aE=self.Gs;self.Ns,aE.uq.Keyboard.kBt=class extends aE.cLt{constructor(t){super(t)}qr(){super.qr()}YDt(){}XDt(){return self.fms}};let lE=null;self.fms=class extends self.CY{constructor(t){super(t),lE=t,t.Sq().CH().keyboard=this}dms(t){const s=oE();if("string"==typeof t)return s.pms(t);if("number"==typeof t)return s.mms(t);throw new TypeError("expected string or number")}}}{const uE=self.Gs,cE="keyboard";uE.uq.Keyboard.Instance=class extends uE.gLt{constructor(t,s){super(t,cE),this.gms=new Set,this.yms=new Set,this.Sms=0,this.wms="",this.vms="",this.bms=!1;const e=this.Sq().wf();this.Kf=new uE.Jf(uE.Vf.qf(e,"keydown",t=>this.xms(t.data)),uE.Vf.qf(e,"keyup",t=>this.Cms(t.data)),uE.Vf.qf(e,"window-blur",()=>this.Tms()),uE.Vf.qf(e,"keyboard-blur",()=>this.Tms())),this.Bc.iq(this.aC())}qr(){super.qr()}async aC(){const t=await this.PLt("init");this.bms=t.isKeyboardLockSupported}xms(t){const s=t.which,e=t.code||s.toString(),i=t.key;this.gms.has(e)||(this.gms.add(e),this.yms.add(s),this.wms=e,this.Sms=s,this.vms=i,this.lZ(uE.uq.Keyboard.aq.Mms),this.lZ(uE.uq.Keyboard.aq.Ims),this.lZ(uE.uq.Keyboard.aq.Gms),this.lZ(uE.uq.Keyboard.aq._ms))}Cms(t){const s=t.which,e=t.code||s.toString(),i=t.key;this.gms.delete(e),this.yms.delete(s),this.wms=e,this.Sms=s,this.vms=i,this.lZ(uE.uq.Keyboard.aq.Pms),this.lZ(uE.uq.Keyboard.aq.Rms),this.lZ(uE.uq.Keyboard.aq.Ams),this.lZ(uE.uq.Keyboard.aq.Ems)}Tms(){for(const t of this.yms)this.yms.delete(t),this.Sms=t,this.lZ(uE.uq.Keyboard.aq.Pms),this.lZ(uE.uq.Keyboard.aq.Rms),this.lZ(uE.uq.Keyboard.aq.Ems);this.gms.clear()}pms(t){return this.gms.has(t)}mms(t){return this.yms.has(t)}xC(){return{tk:this.Sms,tkk:this.vms}}CC(t){this.Sms=t.tk,t.hasOwnProperty("tkk")&&(this.vms=t.tkk)}BLt(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.Sms},{name:t+".debugger.last-key-string",value:uE.uq.Keyboard.Jdt.Oms(this.Sms)},{name:t+".debugger.last-typed-key",value:this.vms}]}]}}}{const fE=self.Gs,dE=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];fE.uq.Keyboard.aq={pms(t){return this.yms.has(t)},Ims(t){return this.Sms===t},Mms:()=>!0,Pms:()=>!0,Rms(t){return this.Sms===t},mms(t){return t=Math.floor(t),this.yms.has(t)},_ms(t){return this.Sms===t},Ems(t){return this.Sms===t},Gms(t){const s=dE[t];return this.wms===s},Ams(t){const s=dE[t];return this.wms===s},Fms(t){const s=dE[t];return this.gms.has(s)},Dms(){return this.bms},Lms:()=>!0,kms:()=>!0}}{const pE=self.Gs;pE.uq.Keyboard.qdt={async Nms(t){if(!this.bms)return;let s=[];t&&(s=t.split(",")),(await this.PLt("lock-keyboard",{keysArr:s})).isOk?this.lZ(pE.uq.Keyboard.aq.Lms):this.lZ(pE.uq.Keyboard.aq.kms)},Bms(){this.bms&&this.PLt("unlock-keyboard")}}}{let mE=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"";case 38:return"";case 39:return"";case 40:return"";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};StringFromCharCode=mE,self.Gs.uq.Keyboard.Jdt={$ms(){return this.Sms},Oms:t=>mE(t),Ums(){return this.vms}}}{const gE=self.Gs;gE.uq.PlatformInfo=class extends gE.TDt{constructor(t){super(t)}qr(){super.qr()}}}{const yE=self.Gs;yE.uq.PlatformInfo.kBt=class extends yE.cLt{constructor(t){super(t)}qr(){super.qr()}YDt(){}}}{const SE=self.Gs,wE="platform-info";SE.uq.PlatformInfo.Instance=class extends SE.gLt{constructor(t,s){super(t,wE),this.nfs=0,this.hfs=0,this.ofs=0,this.afs=0,this.Vms=[0,0,0,0],this.Wms=!1,this.zms=!1,this.GLt([["window-resize",t=>this.nJt(t)],["wake-lock-acquired",t=>this.jms(t)],["wake-lock-error",t=>this.Hms(t)],["wake-lock-released",t=>this.qms(t)]]),navigator.connection&&navigator.connection.addEventListener("change",()=>this.Jms()),this.Bc.iq(this.PLt("get-initial-state").then(t=>{this.nfs=t.screenWidth,this.hfs=t.screenHeight,this.ofs=t.windowOuterWidth,this.afs=t.windowOuterHeight,this.Vms=t.safeAreaInset,this.Wms=t.supportsWakeLock}))}qr(){super.qr()}nJt(t){this.ofs=t.windowOuterWidth,this.afs=t.windowOuterHeight,this.Vms=t.safeAreaInset}async Jms(){await this.hq(SE.uq.PlatformInfo.aq.Yms)}async jms(){this.zms=!0,await this.hq(SE.uq.PlatformInfo.aq.Xms)}async Hms(){this.zms=!1,await this.hq(SE.uq.PlatformInfo.aq.Kms)}async qms(){this.zms=!1,await this.hq(SE.uq.PlatformInfo.aq.Zms)}}}{const vE=self.Gs;vE.uq.PlatformInfo.aq={Qms:()=>vE.Zs.oe,tgs:()=>"Windows"===vE.Zs.Qs,sgs:()=>"macOS"===vE.Zs.Qs,egs:()=>"Linux"===vE.Zs.Qs,igs:()=>"Chrome OS"===vE.Zs.Qs,rgs:()=>"Android"===vE.Zs.Qs,ngs:()=>"iOS"===vE.Zs.Qs,hgs(){const t=this.Bc.eJ();return"html5"===t||"scirra-arcade"===t||"preview"===t||"instant-games"===t},ogs(){return this.Bc.LYt()},ags:()=>!1,lgs(){return"windows-uwp"===this.Bc.eJ()},ugs(){return this.Bc.iJ()},cgs(){return"macos-wkwebview"===this.Bc.eJ()},fgs(){return"linux-cef"===this.Bc.eJ()},Yms:()=>!0,Xms:()=>!0,Kms:()=>!0,Zms:()=>!0,dgs(){return this.zms},pgs(){return this.Wms}}}self.Gs.uq.PlatformInfo.qdt={mgs(){this.Wms&&this.RLt("request-wake-lock")},ggs(){this.Wms&&(this.zms=!1,this._Lt("release-wake-lock"))}},self.Gs.uq.PlatformInfo.Jdt={ygs(){return this.Bc._H().rJ()},Sgs(){return this.Bc._H().hJ()},eps(){return this.Bc.wJ()},ips(){return this.nfs},rps(){return this.hfs},nps(){return this.Bc._H().R2()},hps(){return this.Bc._H().A2()},ops(){return this.ofs},aps(){return this.afs},wgs(){return this.Bc._H().fJ()},vgs(){return this.Bc._H().pJ()},bgs(){return this.Bc._H().gJ()},xgs(){return this.Bc._H().SJ()},Cgs:()=>navigator.connection&&navigator.connection.downlink||0,Tgs:()=>navigator.connection&&navigator.connection.downlinkMax||0,ConnectionType:()=>navigator.connection&&navigator.connection.type||"unknown",Mgs:()=>navigator.connection&&navigator.connection.effectiveType||"unknown",Igs:()=>navigator.connection&&navigator.connection.rtt||0,Ggs:()=>navigator.hardwareConcurrency||0,_gs:()=>navigator.deviceMemory||0,Pgs(){return this.Vms[0]},Rgs(){return this.Vms[1]},Ags(){return this.Vms[2]},Egs(){return this.Vms[3]},Ogs(){return this.Bc.Wj()},Fgs(){return this.Bc.jj()}};{const bE=self.Gs;bE.uq.Date=class extends bE.TDt{constructor(t){super(t)}qr(){super.qr()}}}{const xE=self.Gs;xE.uq.Date.kBt=class extends xE.cLt{constructor(t){super(t)}qr(){super.qr()}YDt(){}}}{const CE=self.Gs;CE.uq.Date.Instance=class extends CE.gLt{constructor(t,s){super(t)}}}{const TE=self.Gs,ME=[];ME[0]=[t=>TE.uq.Date.Jdt.Dgs(t),t=>TE.uq.Date.Jdt.Lgs(t),t=>TE.uq.Date.Jdt.kgs(t),t=>TE.uq.Date.Jdt.Ngs(t),t=>TE.uq.Date.Jdt.Bgs(t),t=>TE.uq.Date.Jdt.$gs(t),t=>TE.uq.Date.Jdt.Ugs(t),t=>TE.uq.Date.Jdt.Vgs(t)],ME[1]=[t=>TE.uq.Date.Jdt.Wgs(t),t=>TE.uq.Date.Jdt.zgs(t),t=>TE.uq.Date.Jdt.jgs(t),t=>TE.uq.Date.Jdt.Hgs(t),t=>TE.uq.Date.Jdt.qgs(t),t=>TE.uq.Date.Jdt.Jgs(t),t=>TE.uq.Date.Jdt.Ygs(t),t=>TE.uq.Date.Jdt.Xgs(t)];const IE=t=>TE.uq.Date.Jdt.Kgs(t);TE.uq.Date.aq={Zgs:(t,s,e)=>TE.compare(t,s,e),Qgs:(t,s,e)=>TE.compare(IE(t),s,IE(e)),tys:(t,s,e,i)=>TE.compare(ME[1][i](t),s,ME[1][i](e)),sys:(t,s,e,i,r)=>TE.compare(ME[r][i](IE(t)),s,ME[r][i](IE(e)))}}self.Gs.uq.Date.qdt={};{const GE=self.Gs,_E=self.Intl,PE=new Map;PE.set("local",new Map([["year",t=>new Date(t).getFullYear()],["month",t=>new Date(t).getMonth()],["date",t=>new Date(t).getDate()],["day",t=>new Date(t).getDay()],["hours",t=>new Date(t).getHours()],["minutes",t=>new Date(t).getMinutes()],["seconds",t=>new Date(t).getSeconds()],["milliseconds",t=>new Date(t).getMilliseconds()]])),PE.set("universal",new Map([["year",t=>new Date(t).getUTCFullYear()],["month",t=>new Date(t).getUTCMonth()],["date",t=>new Date(t).getUTCDate()],["day",t=>new Date(t).getUTCDay()],["hours",t=>new Date(t).getUTCHours()],["minutes",t=>new Date(t).getUTCMinutes()],["seconds",t=>new Date(t).getUTCSeconds()],["milliseconds",t=>new Date(t).getUTCMilliseconds()]]));const RE=new Map;RE.set("local",new Map([["year",(t,s)=>new Date(t).setFullYear(s)],["month",(t,s)=>new Date(t).setMonth(s)],["date",(t,s)=>new Date(t).setDate(s)],["hours",(t,s)=>new Date(t).setHours(s)],["minutes",(t,s)=>new Date(t).setMinutes(s)],["seconds",(t,s)=>new Date(t).setSeconds(s)],["milliseconds",(t,s)=>new Date(t).setMilliseconds(s)]])),RE.set("universal",new Map([["year",(t,s)=>new Date(t).setUTCFullYear(s)],["month",(t,s)=>new Date(t).setUTCMonth(s)],["date",(t,s)=>new Date(t).setUTCDate(s)],["hours",(t,s)=>new Date(t).setUTCHours(s)],["minutes",(t,s)=>new Date(t).setUTCMinutes(s)],["seconds",(t,s)=>new Date(t).setUTCSeconds(s)],["milliseconds",(t,s)=>new Date(t).setUTCMilliseconds(s)]]));const AE=function(t,s,e,i){e.includes(t)&&(i[s]=t)},EE=function(t,s){t&&("12"===t?s.hour12=!0:"24"===t&&(s.hour12=!1))},OE=function(t){try{return _E.getCanonicalLocales(t)}catch(t){return self.navigator.language}},FE=["full","long","medium","short"],DE=["full","long","medium","short"],LE=["long","short","narrow"],kE=["numeric","2-digit"],NE=["numeric","2-digit","long","short","narrow"],BE=["numeric","2-digit"],$E=["numeric","2-digit"],UE=["numeric","2-digit"],VE=["numeric","2-digit"];GE.uq.Date.Jdt={eys:t=>new Date(t).toString(),iys:t=>new Date(t).toDateString(),rys:t=>new Date(t).toTimeString(),nys:t=>new Date(t).toLocaleString(),hys:t=>new Date(t).toLocaleDateString(),oys:t=>new Date(t).toLocaleTimeString(),ays:t=>new Date(t).toUTCString(),Kgs:t=>Date.parse(t),Hs:(t,s,e,i,r,n,h)=>Date.UTC(t,s,e,i,r,n,h),lys:()=>Date.now(),uys(){return this.Sq().zz()},cys:()=>new Date(Date.now()).getTimezoneOffset(),Dgs:t=>PE.get("local").get("year")(t),Wgs:t=>PE.get("universal").get("year")(t),Lgs:t=>PE.get("local").get("month")(t),zgs:t=>PE.get("universal").get("month")(t),kgs:t=>PE.get("local").get("date")(t),jgs:t=>PE.get("universal").get("date")(t),Ngs:t=>PE.get("local").get("day")(t),Hgs:t=>PE.get("universal").get("day")(t),Bgs:t=>PE.get("local").get("hours")(t),qgs:t=>PE.get("universal").get("hours")(t),$gs:t=>PE.get("local").get("minutes")(t),Jgs:t=>PE.get("universal").get("minutes")(t),Ugs:t=>PE.get("local").get("seconds")(t),Ygs:t=>PE.get("universal").get("seconds")(t),Vgs:t=>PE.get("local").get("milliseconds")(t),Xgs:t=>PE.get("universal").get("milliseconds")(t),fys:(t,s)=>RE.get("local").get("year")(t,s),dys:(t,s)=>RE.get("universal").get("year")(t,s),pys:(t,s)=>RE.get("local").get("month")(t,s),mys:(t,s)=>RE.get("universal").get("month")(t,s),gys:(t,s)=>RE.get("local").get("date")(t,s),yys:(t,s)=>RE.get("universal").get("date")(t,s),Sys(t,s){const e=GE.uq.Date.Jdt.Dgs(t),i=GE.uq.Date.Jdt.Lgs(t),r=GE.uq.Date.Jdt.kgs(t),n=GE.uq.Date.Jdt.Bgs(t),h=GE.uq.Date.Jdt.$gs(t),o=GE.uq.Date.Jdt.Ugs(t),a=GE.uq.Date.Jdt.Vgs(t),l=GE.uq.Date.Jdt.Ngs(t);return new Date(e,i,r+(s-l),n,h,o,a).getTime()},wys(t,s){const e=GE.uq.Date.Jdt.Wgs(t),i=GE.uq.Date.Jdt.zgs(t),r=GE.uq.Date.Jdt.jgs(t),n=GE.uq.Date.Jdt.qgs(t),h=GE.uq.Date.Jdt.Jgs(t),o=GE.uq.Date.Jdt.Ygs(t),a=GE.uq.Date.Jdt.Xgs(t),l=s-GE.uq.Date.Jdt.Hgs(t);return GE.uq.Date.Jdt.Hs(e,i,r+l,n,h,o,a)},vys:(t,s)=>RE.get("local").get("hours")(t,s),bys:(t,s)=>RE.get("universal").get("hours")(t,s),xys:(t,s)=>RE.get("local").get("minutes")(t,s),Cys:(t,s)=>RE.get("universal").get("minutes")(t,s),Tys:(t,s)=>RE.get("local").get("seconds")(t,s),Mys:(t,s)=>RE.get("universal").get("seconds")(t,s),Iys:(t,s)=>RE.get("local").get("milliseconds")(t,s),Gys:(t,s)=>RE.get("universal").get("milliseconds")(t,s),_ys:(t,s)=>s-t,Pys:t=>Math.trunc(GE.uq.Date.Jdt.Rys(t)),Ays:t=>Math.trunc(GE.uq.Date.Jdt.Eys(t))%60,Oys:t=>Math.trunc(GE.uq.Date.Jdt.Fys(t))%60,Dys:t=>t%1e3,Rys:t=>t/36e5,Eys:t=>t/6e4,Fys:t=>t/1e3,Lys(t,s,e,i,r){const n=OE(t);if(!n)return;let h={};return AE.call(this,e,"dateStyle",FE,h),AE.call(this,i,"timeStyle",DE,h),EE.call(this,r,h),new _E.DateTimeFormat(n,h).format(s)},kys(t,s,e,i,r,n,h,o,a,l){const u=OE(t);if(!u)return;const c={};return AE.call(this,e,"weekday",LE,c),AE.call(this,i,"year",kE,c),AE.call(this,r,"month",NE,c),AE.call(this,n,"day",BE,c),AE.call(this,h,"hour",$E,c),AE.call(this,o,"minute",UE,c),AE.call(this,a,"second",VE,c),EE.call(this,l,c),new _E.DateTimeFormat(u,c).format(s)}}}{const WE=self.Gs;WE.Ayt.Nys=class extends WE.Gkt{constructor(t){super(t)}qr(){super.qr()}}}{const zE=self.Gs;zE.Ayt.Nys.kBt=class extends zE.Ekt{constructor(t){super(t)}qr(){super.qr()}YDt(){}}}{const jE=self.Gs,HE=(self.Ns,self.b0),qE=0,JE=1,YE=2,XE=3,KE=4;jE.Ayt.Nys.Instance=class extends jE.Fkt{constructor(t,s){super(t),this.Bys=2,this.$ys=2,this.Uys=0,this.Vys=0,this.cPt=!0;const e=this.fe.kH().tQ();this.Wys=e.Qa(),this.zys=e.tl(),this.jys=this.Bc.Xz()-e.Qa(),this.Hys=this.Bc.Zz()-e.tl(),this.qys=this.Bc.Xz()-e.sl(),this.Jys=this.Bc.Zz()-e.el(),s&&(this.Bys=s[qE],this.$ys=s[JE],this.Uys=s[YE],this.Vys=s[XE],this.cPt=!!s[KE]);const i=this.Bc.wf();this.Kf=new jE.Jf(jE.Vf.qf(i,"layoutchange",()=>this.Yys())),this.cPt&&this.DLt()}qr(){super.qr()}xC(){return{xl:this.Wys,yt:this.zys,xr:this.jys,yb:this.Hys,rd:this.qys,bd:this.Jys,al:this.Bys,at:this.$ys,ar:this.Uys,ab:this.Vys,e:this.cPt}}CC(t){this.Wys=t.xl,this.zys=t.yt,this.jys=t.xr,this.Hys=t.yb,this.qys=t.rd,this.Jys=t.bd,this.Bys=t.al,this.$ys=t.at,this.Uys=t.ar,this.Vys=t.ab,this.cPt=t.e,this.cPt?this.DLt():this.wLt()}rFt(t){if(this.cPt&&!t)this.cPt=!1,this.wLt();else if(!this.cPt&&t){const t=this.fe.kH().tQ();this.Wys=t.Qa(),this.zys=t.tl(),this.jys=this.Bc.Xz()-t.Qa(),this.Hys=this.Bc.Zz()-t.tl(),this.qys=this.Bc.Xz()-t.sl(),this.Jys=this.Bc.Zz()-t.el(),this.cPt=!0,this.DLt()}}hFt(){return this.cPt}Ckt(){if(!this.cPt)return;const t=this.fe.kH(),s=t.BH().pK();if(0===this.Bys){const e=s.Qa()+this.Wys-t.tQ().Qa();0!==e&&(t.Hpt(e),t.NZ())}else if(1===this.Bys){const e=s.sl()-this.jys-t.tQ().Qa();0!==e&&(t.Hpt(e),t.NZ())}if(0===this.$ys){const e=s.tl()+this.zys-t.tQ().tl();0!==e&&(t.qpt(e),t.NZ())}else if(1===this.$ys){const e=s.el()-this.Hys-t.tQ().tl();0!==e&&(t.qpt(e),t.NZ())}if(1===this.Uys){const e=s.sl()-this.qys-t.tQ().sl();0!==e&&(t.Hpt(t.WZ()*e),t.hy(Math.max(t.Cy()+e),0),t.NZ(),this.qys=s.sl()-t.tQ().sl())}if(1===this.Vys){const e=s.el()-this.Jys-t.tQ().el();0!==e&&(t.qpt(t.HZ()*e),t.oy(Math.max(t.My()+e,0)),t.NZ(),this.Jys=s.el()-t.tQ().el())}}Int(){this.Ckt()}Yys(){this.Ckt()}Rpt(t){switch(t){case qE:return this.Bys;case JE:return this.$ys;case YE:return this.Uys;case XE:return this.Vys;case KE:return this.cPt}}Lpt(t,s){switch(t){case qE:this.Bys=s;break;case JE:this.$ys=s;break;case YE:this.Uys=s;break;case XE:this.Vys=s;break;case KE:this.cPt=!!s,this.cPt?this.DLt():this.wLt()}}BLt(){return[{title:"$"+this.I0().Rc(),properties:[{name:"behaviors.anchor.properties.enabled.name",value:this.hFt(),S6t:t=>this.rFt(t)}]}]}XDt(){return self.Xys}};const ZE=new WeakMap;self.Xys=class extends HE{constructor(){super(),ZE.set(this,HE._K().g0())}get isEnabled(){return ZE.get(this).hFt()}set isEnabled(t){ZE.get(this).rFt(t)}}}self.Gs.Ayt.Nys.aq={Gu(){return this.hFt()}},self.Gs.Ayt.Nys.qdt={sDt(t){this.rFt(0!==t)}},self.Gs.Ayt.Nys.Jdt={};{const QE=self.Gs;QE.Ayt.Ryt=class extends QE.Gkt{constructor(t){super(t)}qr(){super.qr()}}}{const tO=self.Gs;tO.Ayt.Ryt.kBt=class extends tO.Ekt{constructor(t){super(t)}qr(){super.qr()}YDt(){}}}{const sO=self.Gs,eO=sO.Ayt.Ryt,iO=0;eO.Instance=class extends sO.Fkt{constructor(t,s){super(t),this.Kys=!1,this.du=!0,s&&(this.Kys=!1,this.du=!!s[iO]),this.Zys=new Map,this.Qys=[],this.tSs=new Map,this.sSs=null,this.eSs=null,this.iSs=null,this.rSs=null,this.nSs="",this.hSs=[],this.Irt=t=>this.Grt(),this.Sq().wf().addEventListener("afterload",this.Irt)}qr(){this.Sq().wf().removeEventListener("afterload",this.Irt),this.Irt=null,this.sSs&&(this.oSs(this.sSs),this.sSs=null),this.aSs(),this.lSs=null,this.uSs(),this.Qys=null,this.cSs(),this.tSs=null,this.hSs=null,super.qr()}sSt(t){this.hSs.push(t)}eSt(){this.hSs.pop()}fSs(){return this.hSs[this.hSs.length-1]}sDt(t){this.du=!!t,t?this.tSs&&this.tSs.size&&this.kLt():this.vLt();for(const s of this.dSs())t?this.pSs(s)&&s.C1():((s.IsPlaying()||s.Lat())&&this.mSs(s),s.b1());t&&this.uSs()}Gu(){return this.du}mSs(t){this.Qys.push(t)}pSs(t){return this.Qys.includes(t)}uSs(){sO.bh(this.Qys)}gSs(){return this.sSs}nut(){const t=this._0();return!!t&&!t.NH()}ySs(t,s,e=!1){const i=s?this.SSs(s,e):this.dSs(e);if(i&&i.length)for(const s of i)if(s.T1(t))return s}wSs(t,s){for(const e of this.Zys.values())for(const i of e)if(!i.w1()&&i.T1(t)&&s(i))return!0;for(const e of this.tSs.values())for(const i of e)if(!i.w1()&&i.T1(t)&&s(i))return!0;return!1}vSs(t){for(const s of this.Zys.values())for(const e of s)if(!e.w1()&&t(e))return!0;for(const s of this.tSs.values())for(const e of s)if(!e.w1()&&t(e))return!0;return!1}bSs(t,s){return this.ySs(t,s,!0)}*xSs(t,s,e=!1){const i=s?this.SSs(s,e):this.dSs(e);if(i&&i.length)for(const s of i)s.T1(t)&&(yield s)}*CSs(t,s){yield*this.xSs(t,s,!0)}SSs(t,s){if(s){let s=this.Zys.get(t),e=this.tSs.get(t);return s||(s=[]),e||(e=[]),s.concat(e).filter(t=>t).filter(t=>!t.w1())}{let s=this.Zys.get(t);return s||(s=[]),s.filter(t=>t).filter(t=>!t.w1())}}dSs(t){if(t){const t=[...this.Zys.values()].flat(),s=[...this.tSs.values()].flat();return t.concat(s).filter(t=>t).filter(t=>!t.w1())}return[...this.Zys.values()].flat().filter(t=>t).filter(t=>!t.w1())}TSs(){return this.dSs(!0)}xC(t="full"){return{s:!1,e:!!this.du,at:this.MSs(),dt:this.ISs(),wt:this.GSs(),ft:this._Ss()}}CC(t,s="full"){t&&(this.eSs=t.at,this.iSs=t.dt,this.rSs=t.wt,this.nSs=t.ft,this.Kys=!1,this.du=!!t.e,"state"===s&&this.Grt())}Grt(){const t=this.Sq().tat();if(this.PSs(this.eSs,this.Zys,t),this.iSs){sO.bh(this.Qys);for(const s of this.iSs)this.RSs(this.Qys,s,t)}this.PSs(this.rSs,this.tSs,t),this.sSs=this.ASs(this.nSs,t),this.du?this.tSs&&this.tSs.size&&this.kLt():this.vLt()}PSs(t,s,e){if(t)for(const i in t){let r=s.get(i);r?sO.bh(r):r=[];const n=t[i];for(const t of n)if(this.RSs(r,t.name,e))this.ESs(t.name,t,e);else{const s=sO.Mmt.nSt({runtime:this.Sq(),json:t});sO.Mmt.Tut(s,this._0().kK()),s.$yt(t=>this.OSs(t)),s.Nyt(this),e.ont(s),this.RSs(r,s,e)}s.set(i,r)}}ASs(t,s){return s.rnt(t)}RSs(t,s,e){if("string"!=typeof s)return!!t.push(s);{const i=this.ASs(s,e);if(i)return!!t.push(i)}return!1}ESs(t,s,e){if("string"==typeof t){const i=this.ASs(t,e);i&&(i.vst(s),sO.Mmt.Tut(i,this._0().kK()),sO.Mmt.Nyt(i,this))}else t.vst(s),sO.Mmt.Tut(t,this._0().kK()),sO.Mmt.Nyt(t,this)}MSs(){const t={};for(const[s,e]of this.Zys)t[s]=e.filter(t=>!t.w1()).map(t=>t.wst());return t}ISs(){return this.Qys.filter(t=>!t.w1()).map(t=>t.Rc())}GSs(){const t={};for(const[s,e]of this.tSs)t[s]=e.map(t=>t.wst());return t}_Ss(){return this.sSs?this.sSs.Rc():""}FLt(){this.cSs()}FSs(t){const s=eO.LSs.DSs(t.but,t.pSt,t.mSt,t.dSt,t.uSt,this._0()),e=eO.NSs.kSs(t.but);eO.NSs.BSs(e)||this.$Ss(t.but);const i=sO.Mmt.nSt({runtime:this.Sq(),id:e,tags:t.tags,time:t.time,G0:this._0(),aSt:!!t.aSt,loop:!!t.loop,lSt:!!t.lSt,U0:t.U0,oSt:t.oSt,hSt:s});return i.$yt(t=>this.OSs(t)),i.Nyt(this),this.USs(i,t.but),i}VSs(t){const s=t.t2();if(this.Zys.has(s)){const e=this.Zys.get(s);if(e){const s=e.indexOf(t);-1!==s&&e.splice(s,1)}}}j1(t,s=!1){this.VSs(t),t.w1()||this.WSs(t)||(t.b1(s),this.zSs(t))}$Ss(t,s=!1){if(sO.Ke(t)){const e=eO.NSs.kSs(t);if(!this.Zys.has(e))return;const i=this.Zys.get(e),r=this.gSs();for(const t of i)t!==r&&(t.w1()||this.WSs(t)||(t.b1(s),t.qr()));sO.bh(i)}else{const t=this.gSs();for(const e of this.dSs())e!==t&&(e.w1()||this.WSs(e)||(e.b1(s),e.qr()));for(const t of this.Zys.keys())sO.bh(this.Zys.get(t)),this.Zys.delete(t);this.Zys.clear()}}oSs(t){this.j1(t,!0)}aSs(){this.$Ss(NaN,!0)}Rpt(t){if(t===iO)return this.du}Lpt(t,s){t===iO&&(this.du=!!s)}jSs(t){const s=t.J1().Zft();for(const t of s){const s=t.I0();if(s.r$t()===this.constructor)return s}}lZ(t,s,e,i){return this.Bc?super.lZ(t):s.lZ(t,e,i)}OSs(t){let s,e;if(this.sSs=t,eO.aq.HSs(t),this.Sq())s=this.fe,e=this.Bc,this.lZ(eO.aq.qSs),this.lZ(eO.aq.JSs),this.j1(t);else{if(s=t.J1(),!s)return;if(s&&s.NH())return;e=s.Sq();const i=this.jSs(t);this.lZ(eO.aq.qSs,e,s,i),this.lZ(eO.aq.JSs,e,s,i),t.b1()}this.sSs=null,eO.aq.HSs(null),t.X1()&&e.qH(s)}USs(t,s){const e=eO.NSs.kSs(s);this.Zys.has(e)||this.Zys.set(e,[]),this.Zys.get(e).push(t)}zSs(t){const s=t.t2();this.tSs.has(s)||this.tSs.set(s,[]),this.tSs.get(s).push(t),this.NLt()||this.kLt()}WSs(t){const s=t.t2();return!!this.tSs.has(s)&&this.tSs.get(s).includes(t)}cSs(){if(this.tSs.size){for(const t of this.tSs.values()){for(const s of t)s.w1()||s.qr();sO.bh(t)}this.tSs.clear(),this.NLt()&&this.vLt()}}BLt(){return[{title:"$"+this.I0().Rc(),properties:[{name:"behaviors.tween.properties.enabled.name",value:this.Gu(),S6t:t=>this.sDt(t)}]}]}XDt(){return self.YSs}}}{const rO=self.Gs;let nO=null;rO.Ayt.Ryt.aq={Kyt:()=>!0,Zyt(t){const s=this.fSs();return!!s&&s.T1(t)},Qyt(t){const s=this.fSs();return!!s&&(s.mat()===t||2===t)},tSt(t,s){const e=this.fSs();return!!e&&(e.mat()===s||2===s)&&e.T1(t)},Pyt(t){return this.fSs().T1(t)},Eyt:()=>!0,HSs(t){nO=t},qSs:t=>nO.T1(t),JSs:()=>!0,IsPlaying(t){return this.wSs(t,rO.Mmt.IsPlaying)},XSs(){return this.vSs(rO.Mmt.IsPlaying)},B1(t){return this.wSs(t,rO.Mmt.B1)},KSs(){return this.vSs(rO.Mmt.B1)},H0(t,s){return 0===s?this.wSs(t,rO.Mmt.iSt):1===s&&this.wSs(t,rO.Mmt.rSt)},ZSs(t){return 0===t?this.vSs(rO.Mmt.iSt):1===t&&this.vSs(rO.Mmt.rSt)}}}{const hO=self.Gs,oO=self.Wu,aO=hO.Ayt.Ryt;aO.qdt={sDt(t){this.sDt(!!t)},async QSs(...t){if(!this.Gu()||!this.nut())return;const s=this.FSs(aO.sws.tws(this,...t));s.Play()&&await s.D1()},async ews(...t){if(!this.Gu()||!this.nut())return;const s=this.FSs(aO.sws.iws(this,...t));s.Play()&&await s.D1()},async rws(...t){if(!this.Gu()||!this.nut())return;const s=this.FSs(aO.sws.nws(this,...t));s.Play()&&await s.D1()},hws(t){if(this.Gu()&&this.nut())for(const s of this.xSs(t))s.b1()},ows(){if(this.Gu()&&this.nut())for(const t of this.dSs())t.b1()},aws(t){if(this.Gu()&&this.nut())for(const s of this.xSs(t))s.C1()},lws(){if(this.Gu()&&this.nut())for(const t of this.dSs())t.C1()},uws(t){if(this.Gu()&&this.nut())for(const s of this.xSs(t))this.j1(s)},cws(){if(this.Gu()&&this.nut())for(const t of this.dSs())this.j1(t)},fws(t,s,e){if(!this.Gu()||!this.nut())return;const i=hO.Ayt.Ryt.NSs.dws(s);for(const s of this.xSs(t))s.jyt([i]),s.Hyt(e,i)},pws(t,s,e,i){if(!this.Gu()||!this.nut())return;const r=hO.Ayt.Ryt.NSs.mws(s);for(const s of this.xSs(t))s.jyt(r),s.Hyt(e,r[0]),s.Hyt(i,r[1])},gws(t,s){if(this.Gu()&&this.nut())for(const e of this.xSs(t,"value"))e.Wyt(s,"value")},yws(t,s){if(this.Gu()&&this.nut())for(const e of this.xSs(t,"value"))e.jyt(["value"]),e.Hyt(s,"value")},Sws(t,s){if(!this.Gu()||!this.nut())return;const e=oO.ac(s);for(const s of this.xSs(t))s.q1(e)},wws(t){if(!this.Gu()||!this.nut())return;const s=oO.ac(t);for(const t of this.dSs())t.q1(s)},vws(t,s){if(this.Gu()&&this.nut())for(const e of this.xSs(t))e.M1(s)},bws(t){if(this.Gu()&&this.nut())for(const s of this.dSs())s.M1(t)},xws(t,s){if(this.Gu()&&this.nut())for(const e of this.xSs(t))e.E1(s)},Cws(t){if(this.Gu()&&this.nut())for(const s of this.dSs())s.E1(t)},Tws(t,s){if(this.Gu()&&this.nut())for(const e of this.xSs(t))e.K1(!!s)},Mws(t){if(this.Gu()&&this.nut())for(const s of this.dSs())s.K1(!!t)}}}self.Gs.Ayt.Ryt.Jdt={Iws(t){const s=this.bSs(t);return s?s.nV():0},ous(t){const s=this.bSs(t);return s?s.nV()/s.G1():0},ept(t){const s=this.bSs(t);return s?s.O1():0},Gws(t){const s=this.bSs(t,"value");return s?s.e2("value").s2():0},cFt(){let t=this.gSs();return t?t.vat():(t=this.fSs(),t?t.vat():"")}};{const lO=self.Gs,uO=self.Wu,cO=["position","size","scale"],fO=["offsetX","offsetY","offsetWidth","offsetHeight","offsetAngle","offsetOpacity","offsetColor","offsetZElevation","offsetScaleX","offsetScaleY"],dO=["value"],pO=[].concat(cO).concat(fO).concat(dO),mO={position:["offsetX","offsetY"],size:["offsetWidth","offsetHeight"],scale:["offsetScaleX","offsetScaleY"]},gO=Object.assign({},pO.reduce((t,s)=>Object.assign({},t,{[s]:[s]}),{}),mO);lO.Ayt.Ryt.NSs=class{constructor(){}static _ws(){return[...uO.Ku()]}static ac(t){return[...uO.Ku()][t]}static kSs(t){return pO[t]}static Pws(t){return pO.indexOf(t)}static Rws(t){return cO[t]}static dws(t){return fO[t]}static Aws(t){return dO[t]}static Ews(t){return mO[t]}static mws(t){return lO.hi(t)?gO[t]:gO[pO[t]]}static Ows(t){return!!mO[t]}static Fws(t){return"offsetColor"===t}static Dws(t){return"offsetAngle"===t}static Lws(t){return"offsetOpacity"===t}static BSs(t){return"value"===t}}}{const yO=self.Gs,SO=yO.Ayt.Ryt,wO=new Map;SO.LSs=class{constructor(){}static DSs(t,s,e,i,r,n){0===wO.size&&this.kws();const h=SO.Bws.Nws(t);let o=wO.get(h);return yO.Ke(t)&&(t=SO.NSs.kSs(t)),this.$ws(o,t,s,e,i,r,n)}static Uws(t,s){return yO.Ayt.Ryt.DSs(t).Vws(s)}static kws(){const t=SO.Bws,s=SO.Wws;this.zws(t.jws,this.Hws,s.qws),this.zws(t.COLOR,this.Jws,s.Yws),this.zws(t.Xws,this.Kws,s.Zws),this.zws(t.Qws,this.tvs,s.qws),this.zws(t.svs,this.evs,s.qws)}static zws(t,s,e){wO.set(t,this.ivs(t,s,e))}static ivs(t,s,e){return{name:t,rvs:s,Vws:e}}static $ws(t,s,e,i,r,n,h){return t.rvs(s,t.Vws(e),t.Vws(i),r,n,h)}static Hws(t,s,e,i,r,n){return SO.NSs.Ews(t).map((t,n)=>({cSt:"world-instance",but:t,type:"float",valueType:"numeric",pSt:s[n],mSt:e[n],dSt:SO.NSs.ac(i),uSt:r}))}static Jws(t,s,e,i,r,n){return yO.uq.Text&&n.tY()instanceof yO.uq.Text?{cSt:"plugin",fSt:[7],but:"color",type:"color",valueType:"color",pSt:s,mSt:e,dSt:SO.NSs.ac(i),uSt:r}:{cSt:"world-instance",but:t,type:"color",valueType:"color",pSt:s,mSt:e,dSt:SO.NSs.ac(i),uSt:r}}static Kws(t,s,e,i,r,n){return{cSt:"world-instance",but:t,type:"angle",valueType:"angle",pSt:s,mSt:e,dSt:SO.NSs.ac(i),uSt:r}}static evs(t,s,e,i,r,n){return{cSt:"world-instance",but:t,type:"float",valueType:"numeric",pSt:s,mSt:e,dSt:SO.NSs.ac(i),uSt:r}}static tvs(t,s,e,i,r,n){return{cSt:"value",but:t,type:"float",valueType:"numeric",pSt:s,mSt:e,dSt:SO.NSs.ac(i),uSt:r}}}}{const vO=self.Gs,bO=vO.Ayt.Ryt,xO={uSt:"absolute"},CO=Object.assign({},xO,{tags:"",but:"",time:0,dSt:0,aSt:0,loop:!1,lSt:!1,U0:1}),TO=Object.assign({},CO,{oSt:"current-state",pSt:0,mSt:0}),MO=Object.assign({},CO,{oSt:"current-state",pSt:[0,0],mSt:[0,0]}),IO=Object.assign({},CO,{oSt:"current-state",pSt:[0,0,0],mSt:[0,0,0]}),GO=Object.assign({},TO,{oSt:"start-value"}),_O=0,PO=1,RO=0,AO=1,EO=2;bO.sws=class{constructor(){}static nvs(t,s,e,i,r,n,h,o){t.tags=s,t.time=e,t.dSt=i,t.aSt=r,t.loop=n,t.lSt=h,t.U0=o}static tws(t,s,e,i,r,n,h,o,a,l){const u="string"==typeof e?e:bO.NSs.dws(e),c=bO.NSs.Fws(u)?IO:TO;return this.nvs(c,s,r,n,h,o,a,l),bO.NSs.Fws(u)?(IO.mSt[0]=vO.Rn(i),IO.mSt[1]=vO.An(i),IO.mSt[2]=vO.En(i),IO.but=bO.NSs.Pws(u)):bO.NSs.Lws(u)?TO.mSt=i/100:TO.mSt=i,c.but=bO.NSs.Pws(u),c}static iws(t,s,e,i,r,n,h,o,a,l,u){this.nvs(MO,s,n,h,o,a,l,u);const c="string"==typeof e?e:bO.NSs.Rws(e);return MO.mSt[0]=i,MO.mSt[1]=r,MO.but=bO.NSs.Pws(c),MO}static nws(t,s,e,i,r,n,h,o,a,l){return this.nvs(GO,s,r,n,h,o,a,l),GO.pSt=e,GO.mSt=i,GO.but=bO.NSs.Pws("value"),GO}}}{const OO=self.Gs,FO=OO.Ayt.Ryt,DO=[];FO.Bws=class{constructor(){}static Nws(t){if(0===DO.length){const t=DO;t.push({aE:FO.NSs.Ows,result:this.jws}),t.push({aE:FO.NSs.Fws,result:this.COLOR}),t.push({aE:FO.NSs.Dws,result:this.Xws}),t.push({aE:FO.NSs.BSs,result:this.Qws}),t.push({aE:()=>!0,result:this.svs})}OO.Ke(t)&&(t=OO.Ayt.Ryt.NSs.kSs(t));for(const s of DO)if(s.aE(t))return s.result}static get jws(){return"pair"}static get COLOR(){return"color"}static get Xws(){return"angle"}static get Qws(){return"value"}static get svs(){return"other"}}}{const LO=self.Gs,kO=LO.Ayt.Ryt;kO.Wws=class{constructor(){}static Zws(t){const s=LO.tn(parseFloat(t));return LO.Qr(s)}static Yws(t){return t.slice(0)}static qws(t){return t}}}{let NO=function(t){UO.oi(t);const s=WO.Hu(t);let e;if(e=s?WO.lc(s,null):WO.lc(t,null),-1===e)throw new Error(`invalid ease name '${t}'`);return e},BO=function(t,s=!1){if(!(s&&null==t||"string"==typeof t||Array.isArray(t)))throw new Error("invalid tags")};getIndexForEase=NO,ValidateTags=BO;const $O=self.Gs,UO=self.Ns,VO=self.b0,WO=self.Wu,zO=$O.Ayt.Ryt,jO=new WeakMap,HO=new Map([["x",{name:"offsetX",type:"one"}],["y",{name:"offsetY",type:"one"}],["width",{name:"offsetWidth",type:"one"}],["height",{name:"offsetHeight",type:"one"}],["angle",{name:"offsetAngle",type:"one"}],["opacity",{name:"offsetOpacity",type:"one"}],["color",{name:"offsetColor",type:"color"}],["z-elevation",{name:"offsetZElevation",type:"one"}],["x-scale",{name:"offsetScaleX",type:"one"}],["y-scale",{name:"offsetScaleY",type:"one"}],["position",{name:"position",type:"two"}],["size",{name:"size",type:"two"}],["scale",{name:"scale",type:"two"}],["value",{name:"value",type:"value"}]]),qO={tags:"",hvs:!1,loop:!1,lSt:!1,U0:1,pSt:0},JO={z1:NO};self.YSs=class extends VO{constructor(){super(),jO.set(this,VO._K().g0())}ovs(t,s,e,i,r){const n=jO.get(this);if(!n.Gu()||!n.nut())return null;const h=HO.get(t);if(!h)throw new Error("invalid tween property");"one"===h.type||"value"===h.type?UO.Ze(s):(UO.Ti(s),"two"===h.type?(UO.Ze(s[0]),UO.Ze(s[1])):"color"===h.type&&(UO.Ze(s[0]),UO.Ze(s[1]),UO.Ze(s[2]))),"angle"===t?s=$O.sn(s):"opacity"===t?s*=100:"color"===t&&(s=$O.Pn(s[0],s[1],s[2]));const o=NO(i);let a;if(UO.ii(e),r=Object.assign({},qO,r),"value"===h.type&&UO.Ze(r.pSt),BO(r.tags,!0),"one"===h.type||"color"===h.type?a=n.FSs(zO.sws.tws(n,r.tags,h.name,s,e,o,!!r.hvs,!!r.loop,!!r.lSt,r.U0)):"two"===h.type?a=n.FSs(zO.sws.iws(n,r.tags,h.name,s[0],s[1],e,o,!!r.hvs,!!r.loop,!!r.lSt,r.U0)):"value"===h.type&&(a=n.FSs(zO.sws.nws(n,r.tags,r.pSt,s,e,o,!!r.hvs,!!r.loop,!!r.lSt,r.U0))),a.Nyt(n.Lkt().g0()),!a.Play())throw new Error("failed to start tween");return a.gSt(n,JO)}*avs(){const t=jO.get(this);for(const s of t.dSs())yield s.gSt(t,JO)}*lvs(t){BO(t);const s=jO.get(this);for(const e of s.xSs(t))yield e.gSt(s,JO)}get isEnabled(){return jO.get(this).Gu()}set isEnabled(t){jO.get(this).sDt(t)}}}{const YO=self.Gs;YO.Ayt.uvs=class extends YO.Gkt{constructor(t){super(t)}qr(){super.qr()}}}{const XO=self.Gs;XO.Ayt.uvs.kBt=class extends XO.Ekt{constructor(t){super(t)}qr(){super.qr()}YDt(){}}}{const KO=self.Gs,ZO=self.Ns,QO=self.b0;KO.Ayt.uvs.cvs=class{constructor(t,s,e,i){this.Zbt=KO.Hr(KO.td),this.Zbt.Set(t||0),this.fvs=KO.Hr(KO.td),this.fvs.Set(s||0),this.UNt=e||0,this.dvs=!!i,this.pvs=!1}mvs(){return this.Zbt.Hs()}G1(){return this.fvs.Hs()}e1(){return this.UNt}gvs(t){this.pvs=!!t}B1(){return this.pvs}$u(t){this.Zbt.$u(t),this.fvs.$u(t)}yvs(){return this.Zbt.Hs()>=this.UNt}r8(){if(this.yvs()){if(!this.dvs)return!0;this.Zbt.nd(this.UNt)}return!1}xC(){return{c:this.Zbt.Hs(),t:this.fvs.Hs(),d:this.UNt,r:this.dvs,p:this.pvs}}CC(t){this.Zbt.Set(t.c),this.fvs.Set(t.t),this.UNt=t.d,this.dvs=!!t.r,this.pvs=!!t.p}},KO.Ayt.uvs.Instance=class extends KO.Fkt{constructor(t,s){super(t),this.Svs=new Map}qr(){this.Svs.clear(),super.qr()}wvs(t,s,e){const i=new KO.Ayt.uvs.cvs(0,0,t,e);this.Svs.set(s.toLowerCase(),i),this.vvs()}bvs(t){this.Svs.delete(t.toLowerCase()),this.vvs()}xvs(){this.Svs.clear(),this.vvs()}Cvs(t){return this.Svs.has(t.toLowerCase())}Tvs(t){const s=this.Svs.get(t.toLowerCase());return s?s.mvs():0}Mvs(t){const s=this.Svs.get(t.toLowerCase());return s?s.mvs()/s.e1():0}Ivs(t){const s=this.Svs.get(t.toLowerCase());return s?s.G1():0}Gvs(t){const s=this.Svs.get(t.toLowerCase());return s?s.e1():0}_vs(t){const s=this.Svs.get(t.toLowerCase());return!!s&&s.yvs()}Pvs(t,s){const e=this.Svs.get(t.toLowerCase());e&&e.gvs(s)}Rvs(t){const s=this.Svs.get(t.toLowerCase());return!!s&&s.B1()}Avs(t){for(const s of this.Svs.values())s.gvs(t)}vvs(){this.Svs.size>0?(this.DLt(),this.kLt()):(this.wLt(),this.vLt())}xC(){const t={};for(const[s,e]of this.Svs.entries())t[s]=e.xC();return t}CC(t){this.Svs.clear();for(const[s,e]of Object.entries(t)){const t=new KO.Ayt.uvs.cvs;t.CC(e),this.Svs.set(s,t)}this.vvs()}Int(){const t=this.Bc.Rj(this.fe);for(const[s,e]of this.Svs)e.B1()||(e.$u(t),e.yvs()&&this.pLt("timer",!1,{tag:s}))}FLt(){for(const[t,s]of this.Svs.entries())s.r8()&&this.Svs.delete(t)}BLt(){return[{title:"behaviors.timer.debugger.timers",properties:[...this.Svs.entries()].map(t=>({name:"$"+t[0],value:`${Math.round(10*t[1].mvs())/10} / ${Math.round(10*t[1].e1())/10}`}))}]}XDt(){return self.Evs}};const tF=["once","regular"];self.Evs=class extends QO{#t;constructor(){super(),this.#t=QO._K().g0()}Ovs(t,s,e="once"){ZO.ii(t),ZO.oi(s);const i=tF.indexOf(e);if(-1===i)throw new Error("invalid type");this.#t.wvs(t,s,1===i)}Fvs(t,s){ZO.oi(t),this.#t.Pvs(t,!!s)}Dvs(t){this.#t.Avs(!!t)}Lvs(t){ZO.oi(t),this.#t.bvs(t)}kvs(){this.#t.xvs()}Nvs(t){return ZO.oi(t),this.#t.Cvs(t)}Bvs(t){return ZO.oi(t),this.#t.Rvs(t)}getCurrentTime(t){return ZO.oi(t),this.#t.Tvs(t)}$vs(t){return ZO.oi(t),this.#t.Mvs(t)}Uvs(t){return ZO.oi(t),this.#t.Ivs(t)}Vvs(t){return ZO.oi(t),this.#t.Gvs(t)}Wvs(t){return ZO.oi(t),this.#t._vs(t)}}}self.Gs.Ayt.uvs.aq={zvs(t){return this._vs(t)},jvs(t){return this.Cvs(t)},Hvs(t){return this.Rvs(t)}},self.Gs.Ayt.uvs.qdt={qvs(t,s,e){this.wvs(t,e,1===s)},Jvs(t){this.bvs(t)},Yvs(){this.xvs()},Xvs(t,s){this.Pvs(t,0===s)},Kvs(t){this.Avs(0===t)}},self.Gs.Ayt.uvs.Jdt={Zvs(t){return this.Tvs(t)},Qvs(t){return this.Mvs(t)},tbs(t){return this.Ivs(t)},sbs(t){return this.Gvs(t)}};{const sF=self.Gs;sF.Ayt.ebs=class extends sF.Gkt{constructor(t){super(t);const s=this.Bc.wf();this.Kf=new sF.Jf(sF.Vf.qf(s,"pointerdown",t=>this.Eus(t.data)),sF.Vf.qf(s,"pointermove",t=>this.Ous(t.data)),sF.Vf.qf(s,"pointerup",t=>this.Fus(t.data,!1)),sF.Vf.qf(s,"pointercancel",t=>this.Fus(t.data,!0)))}qr(){this.Kf.qr(),this.Kf=null,super.qr()}Eus(t){"mouse"===t.pointerType&&0!==t.button||this.ibs(t.pointerId.toString(),t.pageX-this.Bc.aJ(),t.pageY-this.Bc.uJ())}Ous(t){1&t.lastButtons&&!(1&t.buttons)?this.rbs(t.pointerId.toString()):this.nbs(t.pointerId.toString(),t.pageX-this.Bc.aJ(),t.pageY-this.Bc.uJ())}Fus(t,s){"mouse"===t.pointerType&&0!==t.button||this.rbs(t.pointerId.toString())}async ibs(t,s,e){const i=this.cY();let r=null,n=null,h=0,o=0;for(const t of i){const i=t.HUt(sF.Ayt.ebs);if(!i.Gu()||i.hbs()||t.NH())continue;const a=t.kH(),l=a.BH(),[u,c]=l.gK(s,e,a.KZ());if(!l.WX()||!a.wQ(u,c))continue;if(!r){r=t,n=i,h=u,o=c;continue}const f=r.kH();(l.Mz()>f.BH().Mz()||l.Mz()===f.BH().Mz()&&a.$H()>f.$H())&&(r=t,n=i,h=u,o=c)}r&&await n.obs(t,h,o)}nbs(t,s,e){const i=this.cY();for(const r of i){const i=r.HUt(sF.Ayt.ebs);if(!i.Gu()||!i.hbs()||i.hbs()&&i.lbs()!==t)continue;const n=r.kH(),h=n.BH(),[o,a]=h.gK(s,e,n.KZ());i.ubs(o,a)}}async rbs(t){const s=this.cY();for(const e of s){const s=e.HUt(sF.Ayt.ebs);s.hbs()&&s.lbs()===t&&await s.cbs()}}}}{const eF=self.Gs;eF.Ayt.ebs.kBt=class extends eF.Ekt{constructor(t){super(t)}qr(){super.qr()}YDt(){}}}{const iF=self.Gs,rF=(self.Ns,self.b0),nF=0,hF=1;iF.Ayt.ebs.Instance=class extends iF.Fkt{constructor(t,s){super(t),this.fbs=!1,this.dbs=0,this.pbs=0,this.mbs="<none>",this.gbs=0,this.cPt=!0,s&&(this.gbs=s[nF],this.cPt=s[hF])}qr(){super.qr()}xC(){return{a:this.gbs,e:this.cPt}}CC(t){this.gbs=t.a,this.cPt=t.e,this.fbs=!1}rFt(t){this.cPt=!!t,this.cPt||(this.fbs=!1)}Gu(){return this.cPt}ybs(t){this.gbs=t}Sbs(){return this.gbs}wbs(){this.fbs&&this.cbs()}hbs(){return this.fbs}lbs(){return this.mbs}async obs(t,s,e){const i=this.kH();this.dbs=s-i.lC(),this.pbs=e-i.fC(),this.fbs=!0,this.mbs=t,this.pLt("dragstart"),await this.hq(iF.Ayt.ebs.aq.vbs)}ubs(t,s){const e=this.kH(),i=t-this.dbs,r=s-this.pbs;0===this.gbs?e.lC()===i&&e.fC()===r||(e.BZ(i,r),e.NZ()):1===this.gbs?e.lC()!==i&&(e.uC(i),e.NZ()):2===this.gbs&&e.fC()!==r&&(e.dC(r),e.NZ())}async cbs(){this.fbs=!1,this.pLt("drop"),await this.hq(iF.Ayt.ebs.aq.bbs)}Rpt(t){switch(t){case nF:return this.Sbs();case hF:return this.Gu()}}Lpt(t,s){switch(t){case nF:this.ybs(s);break;case hF:this.rFt(!!s)}}BLt(){const t="behaviors.dragndrop",s=t+".properties.axes";let e="";return 0===this.gbs?e=s+".items.both":1===this.gbs?e=s+".items.horizontal-only":2===this.gbs&&(e=s+".items.vertical-only"),[{title:"$"+this.I0().Rc(),properties:[{name:t+".debugger.is-dragging",value:this.hbs()},{name:s+".name",value:[e]},{name:t+".properties.enabled.name",value:this.Gu(),S6t:t=>this.rFt(t)}]}]}XDt(){return self.xbs}};const oF=new WeakMap,aF=["both","horizontal","vertical"];self.xbs=class extends rF{constructor(){super(),oF.set(this,rF._K().g0())}set axes(t){const s=aF.indexOf(t);if(-1===s)throw new Error("invalid axes");oF.get(this).ybs(s)}get axes(){return aF[oF.get(this).Sbs()]}drop(){oF.get(this).wbs()}get Cbs(){return oF.get(this).hbs()}get isEnabled(){return oF.get(this).Gu()}set isEnabled(t){oF.get(this).rFt(t)}}}self.Gs.Ayt.ebs.aq={hbs(){return this.hbs()},vbs:()=>!0,bbs:()=>!0,Gu(){return this.Gu()}},self.Gs.Ayt.ebs.qdt={sDt(t){this.rFt(!!t)},Tbs(t){this.ybs(t)},Mbs(){this.wbs()}},self.Gs.Ayt.ebs.Jdt={};{const lF=self.Gs;lF.Ayt.Ibs=class extends lF.Gkt{constructor(t){super(t)}qr(){super.qr()}}}{const uF=self.Gs;uF.Ayt.Ibs.kBt=class extends uF.Ekt{constructor(t){super(t)}qr(){super.qr()}YDt(){}}}{const cF=self.Gs,fF=self.Ns,dF=self.b0,pF=0,mF=1,gF=2,yF=3,SF=4;cF.Ayt.Ibs.Instance=class extends cF.Fkt{constructor(t,s){super(t),this.Gbs=0,this._bs=0,this.Pbs=0,this.Rbs=!0,this.Abs=!0,this.Ebs=!1,this.Obs=0,this.Fbs=cF.Hr(cF.td),this.Dbs=this.fe.kH().FO()||1,s&&(this.Gbs=s[pF],this._bs=s[mF],this.Pbs=s[gF],this.Rbs=!!s[yF],this.Abs=!!s[SF],this.Obs=this.Abs?0:3),this.Abs&&(0===this.Gbs?(this.Obs=1,0===this._bs&&(this.Obs=2)):(this.fe.kH().LO(0),this.Bc.jH())),this.DLt()}qr(){super.qr()}xC(){return{fit:this.Gbs,wt:this._bs,fot:this.Pbs,d:this.Rbs,s:this.Obs,st:this.Fbs.Hs(),mo:this.Dbs}}CC(t){this.Gbs=t.fit,this._bs=t.wt,this.Pbs=t.fot,this.Rbs=t.d,this.Obs=t.s,this.Fbs.Set(t.st),this.Dbs=t.mo,3===this.Obs?this.wLt():this.DLt()}Int(){const t=this.Bc.Rj(this.fe);this.Fbs.$u(t);const s=this.fe.kH();0===this.Obs&&(s.LO(this.Fbs.Hs()/this.Gbs*this.Dbs),this.Bc.jH(),s.FO()>=this.Dbs&&(s.LO(this.Dbs),this.Obs=1,this.Fbs.$f(),this.pLt("fadeinend"),this.lZ(cF.Ayt.Ibs.aq.Lbs))),1===this.Obs&&this.Fbs.Hs()>=this._bs&&(this.Obs=2,this.Fbs.$f(),this.pLt("waitend"),this.lZ(cF.Ayt.Ibs.aq.kbs)),2===this.Obs&&(0!==this.Pbs?(s.LO(this.Dbs-this.Fbs.Hs()/this.Pbs*this.Dbs),this.Bc.jH(),s.FO()<=0&&(this.Obs=3,this.Fbs.$f(),this.pLt("fadeoutend"),this.lZ(cF.Ayt.Ibs.aq.Nbs),this.Rbs&&this.Bc.qH(this.fe))):(this.Obs=3,this.Fbs.$f())),3===this.Obs&&this.wLt()}Bbs(){this.Abs||this.Ebs||(this.Dbs=this.fe.kH().FO()||1,this.Ebs=!0),3===this.Obs&&this.pF()}$bs(){this.pF()}pF(){this.Obs=0,this.Fbs.$f(),0===this.Gbs?(this.Obs=1,0===this._bs&&(this.Obs=2)):(this.fe.kH().LO(0),this.Bc.jH()),this.DLt()}Ubs(t){this.Gbs=Math.max(t,0)}Vbs(){return this.Gbs}Wbs(t){this._bs=Math.max(t,0)}zbs(){return this._bs}jbs(t){this.Pbs=Math.max(t,0)}Hbs(){return this.Pbs}Rpt(t){switch(t){case pF:return this.Vbs();case mF:return this.zbs();case gF:return this.Hbs();case yF:return this.Rbs}}Lpt(t,s){switch(t){case pF:this.Ubs(s);break;case mF:this.Wbs(s);break;case gF:this.jbs(s);break;case yF:this.Rbs=!!s}}BLt(){const t="behaviors.fade";return[{title:"$"+this.I0().Rc(),properties:[{name:t+".properties.fade-in-time.name",value:this.Vbs(),S6t:t=>this.Ubs(t)},{name:t+".properties.wait-time.name",value:this.zbs(),S6t:t=>this.Wbs(t)},{name:t+".properties.fade-out-time.name",value:this.Hbs(),S6t:t=>this.jbs(t)},{name:t+".debugger.stage",value:[t+".debugger."+["fade-in","wait","fade-out","done"][this.Obs]]}]}]}XDt(){return self.qbs}};const wF=new WeakMap;self.qbs=class extends dF{constructor(){super(),wF.set(this,dF._K().g0())}Jbs(){wF.get(this).Bbs()}Ybs(){wF.get(this).$bs()}set Xbs(t){fF.ii(t),wF.get(this).Ubs(t)}get Xbs(){return wF.get(this).Vbs()}set Kbs(t){fF.ii(t),wF.get(this).Wbs(t)}get Kbs(){return wF.get(this).zbs()}set Zbs(t){fF.ii(t),wF.get(this).jbs(t)}get Zbs(){return wF.get(this).Hbs()}}}self.Gs.Ayt.Ibs.aq={Nbs:()=>!0,Lbs:()=>!0,kbs:()=>!0},self.Gs.Ayt.Ibs.qdt={Qbs(){this.Bbs()},txs(){this.$bs()},sxs(t){this.Ubs(t)},exs(t){this.Wbs(t)},ixs(t){this.jbs(t)}},self.Gs.Ayt.Ibs.Jdt={rxs(){return this.Vbs()},nxs(){return this.zbs()},hxs(){return this.Hbs()}};{let vF=function(t){return"number"==typeof t?-t:t},bF=function(t,s){return"number"==typeof t&&"number"==typeof s},xF=function(t,s){return bF(t,s)?t+s:t},CF=function(t,s){return bF(t,s)?t-s:t},TF=function(t,s){return bF(t,s)?t*s:t},MF=function(t,s){return bF(t,s)?t/s:t},IF=function(t,s){return bF(t,s)?t%s:t},GF=function(t,s){return bF(t,s)?Math.pow(t,s):t},_F=function(t,s){if("string"==typeof t||"string"==typeof s){let e,i;return e="number"==typeof t?(Math.round(1e10*t)/1e10).toString():t,i="number"==typeof s?(Math.round(1e10*s)/1e10).toString():s,e+i}return t&&s?1:0},PF=function(t,s){return bF(t,s)?t||s?1:0:t};unaryminus=vF,bothNumbers=bF,add=xF,subtract=CF,multiply=TF,divide=MF,mod=IF,pow=GF,and=_F,or=PF;const RF=self.Gs;self.CRt=[t=>{const s=t.ORt(0).QPt();return()=>s(0)},()=>"Portrait",()=>"Landscape",()=>"Categories",()=>"Pieces",()=>"orderCategories",()=>"savedData",t=>{const s=t.ORt(0).QPt();return()=>s()},t=>{const s=t.ORt(0);return()=>s.nRt("shows")},t=>{const s=t.ORt(0).QPt();return()=>Math.floor(s()/864e4)},t=>{const s=t.ORt(0);return()=>Math.floor(MF(s.nRt("savedTime"),864e4))},()=>"shows",()=>10,()=>"savedTime",t=>{const s=t.ORt(0),e=t.ORt(1);return()=>_F("unlock_",s.nRt(e.nRt()))},()=>0,()=>"coins",()=>3,t=>{const s=t.ORt(0),e=t.ORt(1);return()=>s.nRt(e.nRt())},t=>{const s=t.ORt(0).xRt();return()=>Math.floor(s.Hct()/20)},t=>{const s=t.ORt(0).xRt();return()=>RF.Zr(2+s.Hct(),2,5)},t=>{const s=t.ORt(0);return()=>s.nRt()},()=>"Background",()=>"Frame",t=>{const s=t.ORt(0).QPt(),e=t.ORt(1).QPt();return()=>s(0)-.004*e(0)},t=>{const s=t.ORt(0).QPt(),e=t.ORt(1),i=t.ORt(2);return()=>s(0)-e.nRt()/2+i.nRt()+20},t=>{const s=t.ORt(0).QPt();return()=>Math.round(s(0))},()=>"",t=>{const s=t.ORt(0).QPt(),e=t.ORt(1),i=t.ORt(2);return()=>s(0)+e.nRt()/2+i.nRt()+20},()=>2,()=>1,t=>{const s=t.ORt(0),e=t.ORt(1);return()=>s.nRt()-.01*e.nRt()},t=>{const s=t.ORt(0),e=t.ORt(1);return()=>s.nRt()+.015*e.nRt()},t=>{const s=t.ORt(0),e=t.ORt(1);return()=>s.nRt()+.02*e.nRt()},()=>"https://arturbier.github.io/puzzlegame/images/cover.webp",t=>{const s=t.ORt(0).QPt();return()=>Math.round(.7*s(0))},()=>.45,t=>{const s=t.ORt(0),e=t.ORt(1).xRt();return()=>s.nRt()/e.Hct()},t=>{const s=t.ORt(0).xRt(),e=t.ORt(1).xRt();return()=>Math.sqrt(s.Hct()*e.Hct())/3},t=>{const s=t.ORt(0).xRt(),e=t.ORt(1).xRt();return()=>_F("https://arturbier.github.io/puzzlegame/images/"+s.Hct()+"/",e.Hct())+".jpg"},()=>"getImage",t=>{const s=t.ORt(0);return()=>s.nRt()+25},()=>"loocked",t=>{const s=t.ORt(0);return()=>_F("[size=65][icon=0][/size] : ",s.nRt("coins"))},t=>{const s=t.ORt(0).xRt(),e=t.ORt(1),i=t.ORt(2).xRt(),r=t.ORt(3).xRt();return()=>_F(_F(s.Hct()+": ",e.nRt(i.Hct()))+"/",r.Hct())},t=>{const s=t.ORt(0).xRt();return()=>s.Hct()},t=>{const s=t.ORt(0).QPt(),e=t.ORt(1),i=t.ORt(2).QPt(),r=t.ORt(3);return()=>s(e.yRt("loocked"))-i(r.yRt("loocked"))},()=>"Interactions",()=>"PositionRandom",()=>"Y",t=>{const s=t.ORt(0).xRt();return()=>s.Hct()-1},()=>"X",t=>{const s=t.ORt(0),e=t.ORt(1).xRt(),i=t.ORt(2).xRt(),r=t.ORt(3).QPt();return()=>s.nRt()+e.Hct()/2+i.Hct()*r("X")},t=>{const s=t.ORt(0),e=t.ORt(1).xRt(),i=t.ORt(2).xRt(),r=t.ORt(3).QPt();return()=>s.nRt()+e.Hct()/2+i.Hct()*r("Y")},t=>{const s=t.ORt(0).xRt();return()=>s.Hct()+2},()=>16777215,()=>25,t=>{const s=t.ORt(0).QPt(),e=t.ORt(1),i=t.ORt(2);return()=>s(e.nRt()+50,i.nRt()-50)},()=>"AngleRandom",t=>{const s=t.ORt(0).QPt();return()=>s(0,360)},t=>{const s=t.ORt(0).xRt();return()=>s.Hct()+5},t=>{const s=t.ORt(0),e=t.ORt(1),i=t.ORt(2).xRt(),r=t.ORt(3).xRt();return()=>RF.nn(s.nRt(),e.nRt(),i.Hct(),r.Hct())},t=>{const s=t.ORt(0).xRt();return()=>2*s.Hct()},t=>{const s=t.ORt(0),e=t.ORt(1).xRt();return()=>s.nRt()-e.Hct()},t=>{const s=t.ORt(0),e=t.ORt(1).xRt();return()=>s.nRt()+e.Hct()},()=>180,()=>90,()=>-90,t=>{const s=t.ORt(0),e=t.ORt(1).xRt();return()=>s.nRt()+e.Hct()/2},t=>{const s=t.ORt(0);return()=>s.lRt()},t=>{const s=t.ORt(0),e=t.ORt(1).xRt();return()=>s.nRt()-e.Hct()/2},()=>"AngleReset",()=>.25,()=>-1,()=>"Bounce",()=>32,()=>.125,()=>"startAngle",()=>"ScaleUp",()=>1.25,()=>"OpacityDown",()=>"Effects",t=>{const s=t.ORt(0),e=t.ORt(1);return()=>s.nRt()+e.nRt()/2},()=>4,()=>"HeightUp",t=>{const s=t.ORt(0).QPt();return()=>.15*s(0)},()=>.35,t=>{const s=t.ORt(0),e=t.ORt(1).xRt(),i=t.ORt(2).xRt();return()=>RF.Zr(xF(s.nRt(e.Hct()),1),0,i.Hct())},t=>{const s=t.ORt(0),e=t.ORt(1).QPt(),i=t.ORt(2).xRt(),r=t.ORt(3).xRt(),n=t.ORt(4);return()=>xF(s.nRt("coins"),e(1,Math.round(i.Hct()*r.Hct()*.08*(1+.03*n.nRt()))))},t=>{const s=t.ORt(0),e=t.ORt(1).xRt();return()=>s.nRt(e.Hct())},t=>{const s=t.ORt(0).QPt(),e=t.ORt(1).xRt(),i=t.ORt(2).xRt(),r=t.ORt(3);return()=>s(1,Math.round(e.Hct()*i.Hct()*.08*(1+.03*r.nRt())))},t=>{const s=t.ORt(0),e=t.ORt(1),i=t.ORt(2);return()=>s.nRt(_F("unlock_",e.nRt(i.nRt()+1)))},t=>{const s=t.ORt(0).xRt();return()=>" : "+s.Hct()+".   !"},t=>{const s=t.ORt(0),e=t.ORt(1);return()=>s.nRt(e.nRt()+1)},t=>{const s=t.ORt(0).xRt();return()=>"unlock_"+s.Hct()},t=>{const s=t.ORt(0).xRt();return()=>" : "+s.Hct()+"."},t=>{const s=t.ORt(0).xRt();return()=>Math.floor(Math.sqrt(s.Hct()/7))},t=>{const s=t.ORt(0).xRt();return()=>Math.floor(Math.sqrt(s.Hct()-1)/7)},()=>"nextBtn",t=>{const s=t.ORt(0);return()=>s.lRt()/2},t=>{const s=t.ORt(0),e=t.ORt(1).QPt();return()=>s.nRt()-10+.15*e(0)/2},t=>{const s=t.ORt(0).QPt(),e=t.ORt(1).xRt();return()=>s(e.Hct())},()=>100,()=>"WidthUp",t=>{const s=t.ORt(0).xRt(),e=t.ORt(1).xRt();return()=>s.Hct()*e.Hct()},t=>{const s=t.ORt(0).QPt();return()=>s(0)/1.7},t=>{const s=t.ORt(0),e=t.ORt(1).xRt();return()=>xF(s.nRt(e.Hct()),1)},t=>{const s=t.ORt(0).QPt();return()=>1.7*s(0)},()=>"ScreenShake",t=>{const s=t.ORt(0).QPt(),e=t.ORt(1),i=t.ORt(2);return()=>s(-e.yRt("ScreenShake"),i.yRt("ScreenShake"))},t=>{const s=t.ORt(0);return()=>s.nRt()+100},t=>{const s=t.ORt(0);return()=>s.nRt()-10},()=>"Open",t=>{const s=t.ORt(0);return()=>.8*s.nRt()},()=>.2,t=>{const s=t.ORt(0);return()=>.9*s.nRt()},t=>{const s=t.ORt(0).QPt(),e=t.ORt(1).QPt();return()=>s(0)+2*e(0)},t=>{const s=t.ORt(0).xRt();return()=>s.Hct()+1},t=>{const s=t.ORt(0);return()=>"unlock_"+s.lRt()},t=>{const s=t.ORt(0);return()=>s.nRt("coins")},t=>{const s=t.ORt(0),e=t.ORt(1);return()=>CF(s.nRt("coins"),e.lRt())},t=>{const s=t.ORt(0),e=t.ORt(1).QPt();return()=>s.nRt()-e(15,30)},()=>.1,()=>80,()=>"UpdateUI",()=>"CategoriesFrame",t=>{const s=t.ORt(0).QPt(),e=t.ORt(1);return()=>s(0)-e.nRt()/2},()=>"categoriesDone",t=>{const s=t.ORt(0).QPt(),e=t.ORt(1).QPt();return()=>s(0)+e(0)/3+25},()=>2.2,()=>"Btn",t=>{const s=t.ORt(0),e=t.ORt(1);return()=>s.nRt()+350+250*e.nRt()},t=>{const s=t.ORt(0),e=t.ORt(1),i=t.ORt(2);return()=>s.nRt(e.nRt(i.nRt()))},t=>{const s=t.ORt(0).QPt(),e=t.ORt(1),i=t.ORt(2);return()=>s(e.nRt(i.nRt(),1))},t=>{const s=t.ORt(0),e=t.ORt(1);return()=>s.nRt(e.nRt(),1)},t=>{const s=t.ORt(0);return()=>1.1*s.nRt()},t=>{const s=t.ORt(0).QPt();return()=>s(0)/1.5},t=>{const s=t.ORt(0),e=t.ORt(1),i=t.ORt(2);return()=>s.nRt(_F("unlock_",e.nRt(i.nRt())))},t=>{const s=t.ORt(0);return()=>40+20*s.nRt()},t=>{const s=t.ORt(0),e=t.ORt(1),i=t.ORt(2),r=t.ORt(3).xRt(),n=t.ORt(4);return()=>Math.floor(TF(MF(s.nRt(e.nRt(i.nRt())),r.Hct()),n.lRt()))},()=>"first",t=>{const s=t.ORt(0),e=t.ORt(1);return()=>_F("[b][size=53]",s.nRt(e.nRt()))+"[/size][/b]"},()=>"two",t=>{const s=t.ORt(0),e=t.ORt(1),i=t.ORt(2),r=t.ORt(3).xRt();return()=>_F(Math.floor(TF(MF(s.nRt(e.nRt(i.nRt())),r.Hct()),100)),"%")},()=>"canUnlock",t=>{const s=t.ORt(0);return()=>_F("[icon=0] [size=47]",s.lRt())+"[/size]"},()=>50,()=>"lock",()=>"[size=45][/size]",()=>"Unlocked",()=>.005,t=>{const s=t.ORt(0),e=t.ORt(1);return()=>s.nRt()+350+250*e.lRt()},t=>{const s=t.ORt(0),e=t.ORt(1),i=t.ORt(2),r=t.ORt(3);return()=>-s.nRt()*(e.nRt()+1-i.nRt()/r.nRt())-135},()=>"Debug",t=>{const s=t.ORt(0),e=t.ORt(1),i=t.ORt(2).xRt();return()=>RF.Zr(xF(s.nRt(e.lRt()),1),0,i.Hct())},t=>{const s=t.ORt(0);return()=>xF(s.nRt("coins"),20)},t=>{const s=t.ORt(0),e=t.ORt(1);return()=>s.nRt(e.lRt())},()=>"showRef",()=>.5,t=>{const s=t.ORt(0).xRt(),e=t.ORt(1).xRt();return()=>RF.Zr(s.Hct(),0,e.Hct()-1)},()=>"rewarded",()=>"hideRef",()=>"Scroll",t=>{const s=t.ORt(0).QPt(),e=t.ORt(1).xRt();return()=>s()-e.Hct()},t=>{const s=t.ORt(0).xRt();return()=>Math.abs(s.Hct())},t=>{const s=t.ORt(0).xRt();return()=>.95*s.Hct()},t=>{const s=t.ORt(0).xRt(),e=t.ORt(1).xRt();return()=>s.Hct()+e.Hct()},t=>{const s=t.ORt(0).xRt();return()=>.98*s.Hct()},t=>{const s=t.ORt(0).xRt(),e=t.ORt(1).xRt(),i=t.ORt(2).xRt();return()=>(s.Hct()-e.Hct())*i.Hct()},t=>{const s=t.ORt(0).xRt(),e=t.ORt(1).xRt(),i=t.ORt(2).xRt();return()=>RF.Zr(s.Hct(),e.Hct(),i.Hct())},t=>{const s=t.ORt(0),e=t.ORt(1).xRt();return()=>s.lRt()+e.Hct()},t=>{const s=t.ORt(0).xRt(),e=t.ORt(1).QPt();return()=>s.Hct()-2*e()}]}}}),import_c3runtime=__toESM(require_c3runtime());globalThis.Gs.uq.oxs=class extends globalThis.i2{constructor(t){super(t,"Eponesh_GameScore")}qr(){super.qr()}},globalThis.Gs.uq.oxs.kBt=class extends globalThis.f2{constructor(t){super(t)}qr(){super.qr()}YDt(){}};var SERVER_HOST="https://gs.eponesh.com/sdk";function waitFor(t,s){return new Promise((e,i)=>{let r=0;t(globalThis)?e():(r=setInterval(function(){t(globalThis)&&(clearInterval(r),e())},100),s&&setTimeout(i,s))})}async function loadScript({src:t,check:s,axs:e}){if(!s||!s(globalThis))return document.querySelector(`script[src="${t}"]`)?s?waitFor(s):Promise.resolve():new Promise((i,r)=>{const n=document.createElement("script");if(n.src=t,n.onload=()=>i(s?waitFor(s):void 0),n.onerror=()=>r(),n.onabort=()=>r(),e)e.selector.insertAdjacentElement(e.position,n);else try{document.querySelector("script").parentElement.appendChild(n)}catch(t){r(t)}})}function each(t,s,e){const i=t.sj.x3();for(let t=0;t<s.length&&(e(s[t],t),i.L3(),!i.W3);++t);i.release()}function isExists(t){return t&&!!t.id}function stoarr(t="",s=String){return String(t).split(",").map(t=>s(t.trim())).filter(t=>t)}globalThis.Gs.uq.oxs.Instance=class extends globalThis.sZ{constructor(t){super(),this.lxs={language:["en","ru","fr","it","de","es","zh","pt","ko","ja","tr","ar","hi","id"],uxs:["preferred","cloud","platform","local"],cxs:["platform","local"],fxs:["dicebear_retro","dicebear_identicon","dicebear_human","dicebear_micah","dicebear_bottts","icotar","robohash_robots","robohash_cats"],order:["default","DESC","ASC"],dxs:["none","first","last"],platform:["YANDEX","VK","NONE","OK","GAME_MONETIZE","CRAZY_GAMES","GAME_DISTRIBUTION","SMARTMARKET","GAMEPIX","POKI","VK_PLAY","WG_PLAYGROUND","KONGREGATE","GOOGLE_PLAY","PLAYDECK","APP_GALLERY","GALAXY_STORE","ONE_STORE","AMAZON_APPSTORE","XIAOMI_GETAPPS","APTOIDE","RUSTORE","ANDROID","TELEGRAM","BEELINE","FOTOSTRANA","ARKADIUM","YOUTUBE","PLAYDIA","PARTNER","CUSTOM","COOLMATH"],pxs:["Desktop","IOS","Android","TV"],mxs:["PLAYER_PRIVACY_POLICY"],gxs:["HTML","TXT","RAW"],yxs:["REWARD","ACHIEVEMENT","PRODUCT"],Sxs:["ACTIVE_DAYS","ACTIVE_DAYS_CONSECUTIVE"],wxs:["stats","data","flag","image","file","doc_html"],compare:[(t,s)=>t===s,(t,s)=>t!==s,(t,s)=>t<s,(t,s)=>t<=s,(t,s)=>s<t,(t,s)=>s<=t]},this.vxs=function(t){return"string"==typeof t?t:"message"in t?t.message:String(t)},this.bxs=t=>{var s=parseInt(t,10)||0;return 0<s?{id:s}:{tag:t}},this.xxs=globalThis.Gs.uq.oxs.aq,this.actions=globalThis.Gs.uq.oxs.qdt,this.Cxs=(t,s)=>{this.Txs=!!t,s&&(this.lastError=this.vxs(s),console.warn(s))},this.Mxs={Ixs:{},Gxs:{}},this.Mxs.Gxs.ready=new Promise((t,s)=>{this.Mxs.Gxs.done=t,this.Mxs.Gxs.abort=s}),this.Mxs.Ixs.ready=new Promise((t,s)=>{this.Mxs.Ixs.done=t,this.Mxs.Ixs.abort=s}),this._xs=[],this.Pxs={},this.Rxs={},this.Axs={Exs:[],Oxs:[],Fxs:[]},this.Dxs=0,this.Lxs={},this.kxs="",this.Nxs="",this.Bxs="",this.$xs=0,this.Uxs={},this.Vxs="",this.Wxs="",this.zxs="",this.jxs="",this.Hxs="",this.qxs="",this.Jxs="",this.Yxs="",this.Xxs="",this.Kxs="",this.Zxs=0,this.Qxs=[],this.tCs=[],this.sCs=[],this.eCs=0,this.iCs={},this.rCs=0,this.nCs=0,this.hCs="",this.oCs="",this.aCs="",this.lCs=0,this.uCs=0,this.cCs="",this.fCs=!1,this.dCs="",this.pCs=!1,this.mCs="",this.gCs=[],this.yCs=[],this.SCs=0,this.wCs={id:0,tag:"",name:"",description:"",icon:"",vCs:"",bCs:0,xCs:"",CCs:""},this.TCs=0,this.MCs=0,this.ICs={id:0,tag:"",GCs:"",_Cs:"",PCs:!1},this.RCs=!1,this.ACs=!1,this.ECs=!1,this.OCs="",this.FCs=0,this.DCs="",this.LCs=!1,this.kCs="",this.NCs=0,this.BCs="",this.$Cs="",this.UCs=!1,this.VCs=!1,this.WCs=!1,this.zCs=!1,this.jCs=!1,this.HCs=!1,this.qCs={id:0,tag:"",name:"",description:"",JCs:[]},this.YCs=0,this.XCs=0,this.KCs="",this.ZCs="",this.QCs="",this.tTs="",this.sTs="",this.eTs="",this.document={type:"",content:""},this.iTs="",this.rTs="",this.lastError="",this.Txs=!1,this.nTs="",this.hTs={},this.images=[],this.oTs=!1,this.aTs=0,this.lTs=0,this.uTs="",this.cTs="",this.fTs={id:"",dTs:0,width:0,height:0,src:"",tags:[]},this.files=[],this.pTs="",this.mTs=!1,this.gTs=0,this.yTs=0,this.STs="",this.wTs="",this.vTs={id:"",dTs:0,name:"",size:0,src:"",tags:[]},this.bTs=0,this.xTs={key:"",type:"",value:""},this.CTs=0,this.TTs="",this.MTs={state:{},Qxs:[],ITs:[]},this.GTs=0,this._Ts={},this.PTs={},this.RTs=(t={},s=0)=>{this.GTs=s,this._Ts=t.ATs||{},this.PTs=t.ETs||{}},this.OTs=0,this.FTs={DTs:{}},this.LTs=(t,s=0)=>{const e=this.Gxs.NTs.kTs(t);e.DTs||(e.DTs={}),this.OTs=s,this.FTs=e||{DTs:{}}},this.BTs=0,this.$Ts={},this.UTs=(t,s=0)=>{this.BTs=s,this.$Ts=t||{}},this.VTs=0,this.WTs={scheduler:{}},this.zTs={scheduler:{}},this.jTs=(t,s=0)=>{const e=this.Gxs.qTs.HTs(t);e.scheduler||(e.scheduler={}),this.VTs=s,this.WTs=e||{scheduler:{}},this.JTs(t,1,s)},this.JTs=(t,s,e=0)=>{const i=this.Gxs.qTs.YTs(t,s);i.scheduler||(i.scheduler={}),this.zTs=i||{scheduler:{}}},this.XTs=0,this.KTs={event:{}},this.ZTs=(t,s=0)=>{const e=this.Gxs.events.QTs(t);e.event||(e.event={}),this.XTs=s,this.KTs=e||{event:{}}},this.tMs=!1,this.sMs={id:0,tag:""},this.eMs=0,this.iMs="",this.rMs=t=>0<(t=this.bxs(t)).id&&t.id===this.sMs.id||""!=t.tag&&t.tag===this.sMs.tag,this.nMs=(t,s,e)=>(t=!t||this.rMs(t),s=!s||s===this.eMs,e=!e||e===this.iMs,t&&s&&e),this.hMs="";var s=this.hZ();if(s&&(this.Bz=Number(s[0]||0),this.oMs=s[1],this.aMs=s[2],this.lMs=s[3],this.isEnabled=s[4],this.uMs=s[5]),this.runtime.eq(this.Mxs.Gxs.ready),this.lMs&&this.runtime.eq(this.Mxs.Ixs.ready),!this.isEnabled)return this.cMs("[GamePush] disabled"),this.Mxs.Gxs.done(),void this.Mxs.Ixs.done();this.runtime.addEventListener("afterfirstlayoutstart",()=>{const t=this.runtime;t&&(t.fMs=this.Gxs,t.dMs=this.Gxs),this.jCs&&this.aZ(this.xxs.pMs),this.HCs&&this.aZ(this.xxs.mMs),this.uMs&&this.Gxs.gMs()}),this.yMs()}cMs(t){console.warn(t),t=()=>Promise.resolve({}),this.Mxs.Gxs.done(),this.Mxs.Ixs.done(),this.Gxs={on(){},SMs:t,wMs:t,loadOverlay:t,pause:t,resume:t,gMs:t,vMs:t,bMs:t,xMs:!1,N1:!1,CMs:!1,TMs:!1,language:"en",fxs:"dicebear_retro",app:{on(){},title:"",description:"",image:"",url:"",MMs:!1,IMs:t},device:{on(){},type:""},GMs:{on(){},_Ms(){},PMs(){}},platform:{on(){},RMs:!1,type:"NONE"},AMs:{EMs:!1,OMs:!1,FMs:!1,share:t,DMs:t,LMs:t,kMs:()=>""},_xs:{on(){},open:t,fetch:t,NMs:t,BMs:t,$Ms:t},Qxs:{on(){},has(){},open:t,fetch:t,unlock:t,UMs:t},VMs:{on(){},open:t,fetch:t},WMs:{on(){},open:t,fetch:t},zMs:{list:[],on(){},fetch:t,get:t,has:t,type:t},images:{jMs:!1,list:[],on(){},upload:t,HMs:t,fetch:t,qMs:t,JMs:t,resize:t},files:{jMs:!1,list:[],on(){},upload:t,HMs:t,YMs:t,XMs:t,fetch:t,qMs:t,JMs:t},KMs:{ZMs:!1,ITs:[],on(){},has(){},QMs:t,tIs:t,sIs:t},fullscreen:{isEnabled:!1,on(){},open(){},close(){},toggle(){}},eIs:{iIs:!1,rIs:!1,nIs:!1,hIs:!1,oIs:!1,on(){},aIs:t,lIs:t,uIs:t,cIs:t,fIs:t,dIs:t},Ixs:{pIs:!0,mIs:!1,id:0,name:"",gIs:"",stats:{},on(){},sync:t,load:t,login:t,logout:t,yIs:t,SIs:t,wIs:t,vIs:t,add:t,has:t,get:t,set:t,toggle:t,reset:t,remove:t,toJSON:()=>({}),bIs:[]},xIs:{on(){},fetch:t},CIs:{on(){},list:[],TIs:[],accept:t,MIs:t,has:t,IIs:t,GIs:t,_Is:t},NTs:{on(){},list:[],PIs:[],claim:t,RIs:t,AIs:t,kTs:t},qTs:{on(){},list:[],EIs:[],OIs:t,HTs:t,FIs:t,DIs:t,LIs:t,kIs:t,NIs:t,YTs:t,BIs:t,$Is:t,UIs:t,VIs:t,WIs:t},events:{on(){},list:[],EIs:[],QTs:t,has:t,join:t,zIs:t},jIs:{on(){},list:[],register:t,check:t,delete:t,get:t},storage:{on(){},get:t,set:t,HIs:t,qIs:t},windows:{on(){},JIs:t},YIs:{XIs:!1,KIs:!1,ZIs:!1,on(){},QIs:t,tGs:t,sGs:t,eGs:t,iGs:t,rGs:t}},this.jCs=!0,this.aZ(this.xxs.pMs),this.HCs=!0,this.aZ(this.xxs.mMs)}async yMs(){try{globalThis.nGs=t=>t.ready.then(()=>this.init(t)).catch(t=>this.cMs(t));for(var t=[SERVER_HOST,"https://s3.gamepush.com/files/gs/sdk","https://s3.eponesh.com/files/gs/sdk","https://gamepush.com/sdk"],s=0;s<t.length;s++)try{await loadScript({src:`${t[s]}/gamepush.js?projectId=${this.Bz}&publicToken=${this.oMs}&callback=onGPInit`});break}catch(t){}}catch(t){console.error(t),this.cMs(t)}}init(t){this.Gxs=t;const s=this.runtime;s&&(s.fMs=this.Gxs,s.dMs=this.Gxs),this.Gxs.Ixs.on("ready",()=>{this.HCs=!0,this.Mxs.Ixs.done(),this.aZ(this.xxs.mMs)}),this.Gxs.Ixs.on("change",()=>this.aZ(this.xxs.hGs)),this.Gxs.Ixs.on("sync",t=>{this.Cxs(t),this.aZ(t?this.xxs.oGs:this.xxs.aGs)}),this.Gxs.Ixs.on("load",t=>{this.Cxs(t),this.aZ(t?this.xxs.lGs:this.xxs.uGs)}),this.Gxs.Ixs.on("login",t=>{this.Cxs(t),this.aZ(t?this.xxs.cGs:this.xxs.fGs)}),this.Gxs.Ixs.on("logout",t=>{this.Cxs(t),this.aZ(t?this.xxs.dGs:this.xxs.pGs)}),this.Gxs.Ixs.on("fetchFields",t=>{this.Cxs(t),this.aZ(t?this.xxs.mGs:this.xxs.gGs)}),this.Gxs.Ixs.on("field:increment",({yGs:t})=>{this.Vxs=t.key,this.Wxs=t.type,this.zxs=t.name,this.jxs=this.Gxs.Ixs.get(t.key),this.aZ(this.xxs.SGs)}),this.Gxs.Ixs.on("field:maximum",({yGs:t})=>{this.Vxs=t.key,this.Wxs=t.type,this.zxs=t.name,this.jxs=this.Gxs.Ixs.get(t.key),this.aZ(this.xxs.wGs)}),this.Gxs.Ixs.on("field:minimum",({yGs:t})=>{this.Vxs=t.key,this.Wxs=t.type,this.zxs=t.name,this.jxs=this.Gxs.Ixs.get(t.key),this.aZ(this.xxs.vGs)}),this.Gxs.jIs.on("register",({tag:t,value:s})=>{this.Cxs(!0),this.Hxs=t,this.qxs=s,this.aZ(this.xxs.bGs)}),this.Gxs.jIs.on("check",({tag:t,value:s})=>{this.Cxs(!0),this.Hxs=t,this.qxs=s,this.aZ(this.xxs.xGs)}),this.Gxs.jIs.on("delete",({tag:t})=>{this.Cxs(!0),this.Hxs=t,this.qxs="",this.aZ(this.xxs.CGs)}),this.Gxs.jIs.on("error:register",t=>{this.Cxs(!1,t),this.aZ(this.xxs.TGs)}),this.Gxs.jIs.on("error:check",t=>{this.Cxs(!1,t),this.aZ(this.xxs.MGs)}),this.Gxs.jIs.on("error:delete",t=>{this.Cxs(!1,t),this.aZ(this.xxs.IGs)}),this.Gxs.storage.on("get",({key:t,value:s})=>{this.Cxs(!0),this.Jxs=t,this.Yxs=s,this.aZ(this.xxs.GGs)}),this.Gxs.storage.on("set",({key:t,value:s})=>{this.Cxs(!0),this.Jxs=t,this.Yxs=s,this.aZ(this.xxs._Gs)}),this.Gxs.storage.on("get:global",({key:t,value:s})=>{this.Cxs(!0),this.Jxs=t,this.Yxs=s,this.aZ(this.xxs.PGs)}),this.Gxs.storage.on("set:global",({key:t,value:s})=>{this.Cxs(!0),this.Jxs=t,this.Yxs=s,this.aZ(this.xxs.RGs)}),this.Gxs._xs.on("open",()=>this.aZ(this.xxs.AGs)),this.Gxs._xs.on("close",()=>this.aZ(this.xxs.EGs)),this.Gxs.Qxs.on("open",()=>this.aZ(this.xxs.OGs)),this.Gxs.Qxs.on("close",()=>this.aZ(this.xxs.FGs)),this.Gxs.Qxs.on("unlock",t=>{this.Cxs(!0),this.fCs=!0,this.dCs="",this.iCs=t||{},this.aZ(this.xxs.DGs),this.aZ(this.xxs.LGs)}),this.Gxs.Qxs.on("error:unlock",(t,s)=>{this.sMs=s.input,this.fCs=!1,this.dCs=this.vxs(t),this.Cxs(!1,t),this.aZ(this.xxs.kGs)}),this.Gxs.Qxs.on("progress",t=>{this.Cxs(!0),this.iCs=t||{},this.aZ(this.xxs.NGs),this.aZ(this.xxs.BGs)}),this.Gxs.Qxs.on("error:progress",(t,s)=>{this.sMs=s.input,this.Cxs(!1,t),this.aZ(this.xxs.$Gs)}),this.Gxs.KMs.on("purchase",t=>{this.ECs=!0,this.OCs="",this.Cxs(!0),t=t.product||{},this.FCs=t.id||0,this.DCs=t.tag||"",this.aZ(this.xxs.UGs),this.aZ(this.xxs.VGs)}),this.Gxs.KMs.on("error:purchase",(t,s)=>{this.sMs=s.input,this.ECs=!1,this.FCs=s.input.id||0,this.DCs=s.input.tag||"",this.OCs=this.vxs(t),this.Cxs(!1,t),this.aZ(this.xxs.WGs),this.aZ(this.xxs.zGs)}),this.Gxs.KMs.on("open",()=>this.aZ(this.xxs.jGs)),this.Gxs.KMs.on("close",()=>this.aZ(this.xxs.HGs)),this.Gxs.KMs.on("subscribe",t=>{this.RCs=!0,this.Cxs(!0);var s=t.product||{};t=t.tIs||{};this.ICs=t,this.wCs=s,this.TCs=1,this.FCs=s.id||0,this.DCs=s.tag||"",this.aZ(this.xxs.qGs),this.aZ(this.xxs.JGs)}),this.Gxs.KMs.on("error:subscribe",(t,s)=>{this.sMs=s.input,this.RCs=!1,this.FCs=s.input.id||0,this.DCs=s.input.tag||"",this.RCs=!1,this.Cxs(!1,t),this.aZ(this.xxs.YGs),this.aZ(this.xxs.XGs)}),this.Gxs.VMs.on("open",()=>this.aZ(this.xxs.KGs)),this.Gxs.VMs.on("close",()=>this.aZ(this.xxs.ZGs)),this.Gxs.WMs.on("open",()=>this.aZ(this.xxs.QGs)),this.Gxs.WMs.on("close",()=>this.aZ(this.xxs.t_s)),this.Gxs.fullscreen.on("open",()=>this.aZ(this.xxs.s_s)),this.Gxs.fullscreen.on("close",()=>this.aZ(this.xxs.e_s)),this.Gxs.fullscreen.on("change",()=>this.aZ(this.xxs.i_s)),this.Gxs.eIs.on("start",()=>this.aZ(this.xxs.r_s)),this.Gxs.eIs.on("close",t=>{this.Cxs(t),this.UCs=t,this.aZ(this.xxs.n_s)}),this.Gxs.eIs.on("fullscreen:start",()=>this.aZ(this.xxs.h_s)),this.Gxs.eIs.on("fullscreen:close",()=>this.aZ(this.xxs.o_s)),this.Gxs.eIs.on("preloader:start",()=>this.aZ(this.xxs.a_s)),this.Gxs.eIs.on("preloader:close",()=>this.aZ(this.xxs.l_s)),this.Gxs.eIs.on("rewarded:start",()=>this.aZ(this.xxs.u_s)),this.Gxs.eIs.on("rewarded:close",()=>this.aZ(this.xxs.c_s)),this.Gxs.eIs.on("rewarded:reward",()=>this.aZ(this.xxs.f_s)),this.Gxs.eIs.on("sticky:start",()=>this.aZ(this.xxs.d_s)),this.Gxs.eIs.on("sticky:close",()=>this.aZ(this.xxs.p_s)),this.Gxs.eIs.on("sticky:refresh",()=>this.aZ(this.xxs.m_s)),this.Gxs.eIs.on("sticky:render",()=>this.aZ(this.xxs.g_s)),this.Gxs.AMs.on("share",t=>{this.Cxs(t),this.VCs=t,this.aZ(this.xxs.y_s)}),this.Gxs.AMs.on("post",t=>{this.Cxs(t),this.VCs=t,this.aZ(this.xxs.S_s)}),this.Gxs.AMs.on("invite",t=>{this.Cxs(t),this.VCs=t,this.aZ(this.xxs.w_s)}),this.Gxs.AMs.on("joinCommunity",t=>{this.Cxs(t),this.WCs=t,this.aZ(this.xxs.v_s)}),this.Gxs.app.on("addShortcut",t=>{this.Cxs(t),this.zCs=t,this.aZ(this.xxs.b_s)}),this.Gxs.app.on("review",t=>{this.Cxs(!0),this.x_s=t.C_s||0,this.aZ(this.xxs.T_s)}),this.Gxs.app.on("error:review",t=>{this.Cxs(!1,t),this.x_s=0,this.aZ(this.xxs.M_s)}),this.Gxs.on("change:language",()=>this.aZ(this.xxs.I_s)),this.Gxs.on("change:avatarGenerator",()=>this.aZ(this.xxs.G_s)),this.Gxs.on("change:orientation",()=>this.aZ(this.xxs.__s)),this.Gxs.on("overlay:ready",()=>this.aZ(this.xxs.P_s)),this.Gxs.on("pause",()=>this.aZ(this.xxs.R_s)),this.Gxs.on("resume",()=>this.aZ(this.xxs.uQt)),this.Gxs.on("gameplayStart",()=>this.aZ(this.xxs.A_s)),this.Gxs.on("gameplayStop",()=>this.aZ(this.xxs.E_s)),this.Gxs.channels.on("event",t=>{this.O_s=t}),this.Gxs.on("event:connect",()=>{this.aZ(this.xxs.F_s)}),this.Gxs.CIs.on("accept",t=>{this.RTs(t),this.Cxs(!0),this.sMs={id:t.ATs.id,tag:t.ATs.tag},this.aZ(this.xxs.D_s)}),this.Gxs.CIs.on("error:accept",(t,s)=>{this.Cxs(!1,t),this.sMs=s.input,this.aZ(this.xxs.L_s)}),this.Gxs.CIs.on("give",t=>{this.RTs(t),this.Cxs(!0),this.sMs={id:t.ATs.id,tag:t.ATs.tag},this.aZ(this.xxs.k_s)}),this.Gxs.CIs.on("error:give",(t,s)=>{this.Cxs(!1,t),this.sMs=s.input,this.aZ(this.xxs.N_s)}),this.Gxs.NTs.on("activate",t=>{this.LTs(t.DTs.id),this.Cxs(!0),this.sMs={id:t.DTs.id,tag:t.DTs.tag},this.aZ(this.xxs.B_s)}),this.Gxs.NTs.on("claim",t=>{this.LTs(t.DTs.id),this.Cxs(!0),this.sMs={id:t.DTs.id,tag:t.DTs.tag},this.aZ(this.xxs.$_s)}),this.Gxs.NTs.on("error:claim",(t,s)=>{this.Cxs(!1,t),this.sMs=s.input,this.aZ(this.xxs.U_s)}),this.Gxs.qTs.on("register",t=>{this.jTs(t.scheduler.id),this.Cxs(!0),this.sMs={id:t.scheduler.id,tag:t.scheduler.tag},this.aZ(this.xxs.V_s)}),this.Gxs.qTs.on("error:register",(t,s)=>{this.Cxs(!1,t),this.sMs=s.input,this.aZ(this.xxs.W_s)}),this.Gxs.qTs.on("claimDay",t=>{this.jTs(t.scheduler.id),this.JTs(t.scheduler.id,t.z_s),this.Cxs(!0),this.sMs={id:t.scheduler.id,tag:t.scheduler.tag},this.eMs=t.z_s,this.aZ(this.xxs.j_s)}),this.Gxs.qTs.on("error:claimDay",(t,s)=>{this.Cxs(!1,t),this.sMs=s.input,this.eMs=s.input.z_s,this.aZ(this.xxs.H_s)}),this.Gxs.qTs.on("claimDayAdditional",(t,s)=>{this.jTs(t.scheduler.id),this.JTs(t.scheduler.id,t.z_s),this.LTs(s.input.q_s),this.Cxs(!0),this.sMs={id:t.scheduler.id,tag:t.scheduler.tag},this.eMs=t.z_s,this.iMs=s.input.q_s,this.aZ(this.xxs.J_s)}),this.Gxs.qTs.on("error:claimDayAdditional",(t,s)=>{this.Cxs(!1,t),this.sMs=s.input,this.eMs=s.input.z_s,this.iMs=s.input.q_s,this.aZ(this.xxs.Y_s)}),this.Gxs.qTs.on("claimAllDay",t=>{this.jTs(t.scheduler.id),this.JTs(t.scheduler.id,t.z_s),this.Cxs(!0),this.sMs={id:t.scheduler.id,tag:t.scheduler.tag},this.eMs=t.z_s,this.aZ(this.xxs.X_s)}),this.Gxs.qTs.on("error:claimAllDay",(t,s)=>{this.Cxs(!1,t),this.sMs=s.input,this.eMs=s.input.z_s,this.aZ(this.xxs.K_s)}),this.Gxs.qTs.on("claimAllDays",t=>{this.jTs(t.scheduler.id),this.Cxs(!0),this.sMs={id:t.scheduler.id,tag:t.scheduler.tag},this.aZ(this.xxs.Z_s)}),this.Gxs.qTs.on("error:claimAllDays",(t,s)=>{this.Cxs(!1,t),this.sMs=s.input,this.aZ(this.xxs.Q_s)}),this.Gxs.events.on("join",t=>{this.ZTs(t.event.id),this.Cxs(!0),this.sMs={id:t.event.id,tag:t.event.tag},this.aZ(this.xxs.tPs)}),this.Gxs.events.on("error:join",(t,s)=>{this.Cxs(!1,t),this.sMs=s.input,this.aZ(this.xxs.sPs)}),this.Gxs.aht.on("enter",t=>{this.hMs=t,this.aZ(this.xxs.ePs)}),this.Gxs.aht.on("leave",t=>{this.hMs=t,this.aZ(this.xxs.iPs)}),this.Gxs.windows.on("confirm:close",t=>{this.Cxs(t),this.tMs=t,this.aZ(this.xxs.rPs)}),this.Gxs.YIs.on("mute",()=>this.aZ(this.xxs.nPs)),this.Gxs.YIs.on("unmute",()=>this.aZ(this.xxs.hPs)),this.Gxs.YIs.on("mute:sfx",()=>this.aZ(this.xxs.oPs)),this.Gxs.YIs.on("unmute:sfx",()=>this.aZ(this.xxs.aPs)),this.Gxs.YIs.on("mute:music",()=>this.aZ(this.xxs.lPs)),this.Gxs.YIs.on("unmute:music",()=>this.aZ(this.xxs.uPs)),this.jCs=!0,this.aZ(this.xxs.pMs),this.Mxs.Gxs.done(),this.aMs&&this.Gxs.eIs.uIs()}qr(){super.qr()}xC(){return{_xs:this._xs,Pxs:this.Pxs,Rxs:this.Rxs,Axs:this.Axs,Dxs:this.Dxs,Lxs:this.Lxs,kxs:this.kxs,Nxs:this.Nxs,Bxs:this.Bxs,$xs:this.$xs,Vxs:this.Vxs,Wxs:this.Wxs,zxs:this.zxs,jxs:this.jxs,Hxs:this.Hxs,qxs:this.qxs,Jxs:this.Jxs,Yxs:this.Yxs,$Cs:this.$Cs,Xxs:this.Xxs,Kxs:this.Kxs,Zxs:this.Zxs,UCs:this.UCs,VCs:this.VCs,WCs:this.WCs,zCs:this.zCs,jCs:this.jCs,HCs:this.HCs,Qxs:this.Qxs,tCs:this.tCs,sCs:this.sCs,eCs:this.eCs,iCs:this.iCs,rCs:this.rCs,nCs:this.nCs,hCs:this.hCs,oCs:this.oCs,aCs:this.aCs,lCs:this.lCs,uCs:this.uCs,cCs:this.cCs,fCs:this.fCs,dCs:this.dCs,gCs:this.gCs,yCs:this.yCs,SCs:this.SCs,wCs:this.wCs,TCs:this.TCs,MCs:this.MCs,ICs:this.ICs,TTs:this.TTs,CTs:this.CTs,MTs:this.MTs,RCs:this.RCs,ACs:this.ACs,ECs:this.ECs,OCs:this.OCs,FCs:this.FCs,DCs:this.DCs,LCs:this.LCs,kCs:this.kCs,NCs:this.NCs,BCs:this.BCs,qCs:this.qCs,YCs:this.YCs,XCs:this.XCs,KCs:this.KCs,ZCs:this.ZCs,QCs:this.QCs,tTs:this.tTs,sTs:this.sTs,eTs:this.eTs,document:this.document,iTs:this.iTs,rTs:this.rTs,lastError:this.lastError,Txs:this.Txs,images:this.images,oTs:this.oTs,fTs:this.fTs,cTs:this.cTs,aTs:this.aTs,lTs:this.lTs,uTs:this.uTs,files:this.files,pTs:this.pTs,mTs:this.mTs,vTs:this.vTs,wTs:this.wTs,gTs:this.gTs,yTs:this.yTs,STs:this.STs,GTs:this.GTs,_Ts:this._Ts,PTs:this.PTs,OTs:this.OTs,FTs:this.FTs,BTs:this.BTs,$Ts:this.$Ts,VTs:this.VTs,WTs:this.WTs,zTs:this.zTs,XTs:this.XTs,KTs:this.KTs,bTs:this.bTs,xTs:this.xTs,hMs:this.hMs,tMs:this.tMs}}CC(t){this._xs=t._xs,this.Pxs=t.Pxs||{},this.Rxs=t.Rxs||{},this.Axs=t.Axs||{Exs:[],Oxs:[],Fxs:[]},this.Dxs=t.Dxs,this.Lxs=t.Lxs||{},this.kxs=t.kxs,this.Nxs=t.Nxs,this.Bxs=t.Bxs,this.$xs=t.$xs||0,this.Vxs=t.Vxs,this.Wxs=t.Wxs,this.zxs=t.zxs,this.jxs=t.jxs,this.Hxs=t.Hxs,this.qxs=t.qxs,this.Jxs=t.Jxs,this.Yxs=t.Yxs,this.$Cs=t.$Cs,this.Xxs=t.Xxs,this.Kxs=t.Kxs,this.Zxs=t.Zxs,this.UCs=t.UCs,this.VCs=t.VCs,this.WCs=t.WCs,this.zCs=t.zCs,this.jCs=t.jCs,this.HCs=t.HCs,this.Qxs=t.Qxs||[],this.tCs=t.tCs||[],this.sCs=t.sCs||[],this.eCs=t.eCs||0,this.iCs=t.iCs||{},this.rCs=t.rCs||0,this.nCs=t.nCs||0,this.hCs=t.hCs||"",this.oCs=t.oCs||"",this.aCs=t.aCs||"",this.lCs=t.lCs||0,this.uCs=t.uCs||0,this.cCs=t.cCs||"",this.fCs=t.fCs||!1,this.dCs=t.dCs||"",this.gCs=t.gCs||[],this.yCs=t.yCs||[],this.SCs=t.SCs||0,this.wCs=t.wCs||{id:0,tag:"",name:"",description:"",icon:"",vCs:"",bCs:0,xCs:"",CCs:""},this.TCs=t.TCs||0,this.MCs=t.MCs||0,this.ICs=t.ICs||{id:0,tag:"",GCs:""},this.TTs=t.TTs,this.CTs=t.cPs||0,this.MTs=t.MTs||{state:{},Qxs:[],ITs:[]},this.RCs=t.RCs||!1,this.ACs=t.ACs||!1,this.ECs=t.ECs||!1,this.OCs=t.OCs||"",this.FCs=t.FCs||0,this.DCs=t.DCs||"",this.LCs=t.LCs||!1,this.kCs=t.kCs||"",this.NCs=t.NCs||0,this.BCs=t.BCs||"",this.qCs=t.qCs||{id:0,tag:"",name:"",description:"",JCs:[]},this.YCs=t.YCs||0,this.XCs=t.XCs||0,this.KCs=t.KCs||"",this.ZCs=t.ZCs||"",this.QCs=t.QCs||"",this.tTs=t.tTs||"",this.sTs=t.sTs||"",this.eTs=t.eTs||"",this.document=t.document||{type:"",content:""},this.iTs=t.iTs||"",this.rTs=t.rTs||"",this.lastError=t.lastError||"",this.Txs=t.Txs||!1,this.images=t.images||[],this.oTs=t.oTs||!1,this.aTs=t.aTs||0,this.lTs=t.lTs||0,this.uTs=t.uTs||"",this.fTs=t.fTs||{id:"",dTs:0,width:0,height:0,src:"",tags:[]},this.files=t.files||[],this.pTs=t.pTs||"",this.mTs=t.mTs||!1,this.gTs=t.gTs||0,this.yTs=t.yTs||0,this.STs=t.STs||"",this.vTs=t.vTs||{id:"",dTs:0,name:"",size:0,src:"",tags:[]},this.bTs=t.bTs||0,this.xTs=t.xTs||{key:"",type:"",value:""},this.GTs=t.GTs||0,this._Ts=t._Ts||{},this.PTs=t.PTs||{},this.OTs=t.OTs||0,this.FTs=t.FTs||{DTs:{}},this.VTs=t.VTs||0,this.WTs=t.WTs||{scheduler:{}},this.zTs=t.zTs||{scheduler:{}},this.XTs=t.XTs||0,this.KTs=t.KTs||{event:{}},this.BTs=t.BTs||0,this.$Ts=t.$Ts||{},this.hMs=t.hMs||"",this.tMs=t.tMs||!1}TZ(){return this.HCs?[{title:"GS - Base",properties:[{name:"Language",value:this.Gxs.language},{name:"Avatar Generator",value:this.Gxs.fxs},{name:"Platform",value:this.Gxs.platform.type},{name:"Last Error",value:this.lastError},{name:"Is Last Action Success",value:this.Txs},{name:"Is Mobile",value:this.Gxs.Kq},{name:"Is Dev",value:this.Gxs.xMs},{name:"Is Paused",value:this.Gxs.N1},{name:"Is Gameplay",value:this.Gxs.CMs},{name:"Is Allowed Origin",value:this.Gxs.fPs}]},{title:"GS - Ads",properties:[{name:"Last Ad Success",value:this.UCs},{name:"Adblock Enabled",value:this.Gxs.eIs.oIs}]},{title:"GS - Leaderboards",properties:[{name:"Player Position",value:this.$xs}]},{title:"GS - Player",properties:[{name:"ID",value:this.Gxs.Ixs.id},{name:"Logged In By Platform",value:this.Gxs.Ixs.dPs},{name:"Is Stub",value:this.Gxs.Ixs.pIs},...this.Gxs.Ixs.bIs.map(t=>({name:this.Gxs.Ixs.wIs(t.key),value:this.Gxs.Ixs.get(t.key),S6t:s=>this.ULt(this.actions.pPs,t.key,s)}))]},{title:"GS - Achievements - Current",properties:[{name:"Index",value:this.eCs},{name:"ID",value:this.iCs.id},{name:"Tag",value:this.iCs.tag},{name:"Name",value:this.iCs.name},{name:"Description",value:this.iCs.description},{name:"Rare",value:this.iCs.mPs},{name:"Unlocked",value:this.iCs.gPs},{name:"Icon",value:this.iCs.icon},{name:"Icon Small",value:this.iCs.vCs},{name:"Locked Icon",value:this.iCs.yPs},{name:"Locked Icon Small",value:this.iCs.SPs},{name:"Progress",value:this.iCs.progress},{name:"Max Progress",value:this.iCs.wPs},{name:"Progress Step",value:this.iCs.vPs},{name:"Locked Visible",value:this.iCs.bPs},{name:"Locked Description Visible",value:this.iCs.xPs}]},{title:"GS - Achievements Groups Loop",properties:[{name:"Current Achievements Group Index",value:this.rCs},{name:"Current Achievements Group ID",value:this.nCs},{name:"Current Achievements Group Tag",value:this.hCs},{name:"Current Achievements Group Name",value:this.oCs},{name:"Current Achievements Group Description",value:this.aCs}]},{title:"GS - Player Achievements Loop",properties:[{name:"Current Player Achievement Index",value:this.lCs},{name:"Current Player Achievement ID",value:this.uCs},{name:"Current Player Achievement Unlock Date",value:this.cCs}]},{title:"GS - Products Loop",properties:[{name:"Current Product Index",value:this.SCs},{name:"Current Product ID",value:this.wCs.id},{name:"Current Product Tag",value:this.wCs.tag},{name:"Current Product Name",value:this.wCs.name},{name:"Current Product Description",value:this.wCs.description},{name:"Current Product Icon",value:this.wCs.icon},{name:"Current Product Icon Small",value:this.wCs.vCs},{name:"Current Product Icon",value:this.wCs.icon},{name:"Current Product Price",value:this.wCs.bCs},{name:"Current Product Currency",value:this.wCs.xCs},{name:"Current Product CurrencySymbol",value:this.wCs.CCs},{name:"Current Product Purchases",value:this.TCs}]},{title:"GS - Purchased Product",properties:[{name:"Is purchase successful",value:this.ECs},{name:"Purchase error",value:this.OCs},{name:"Purchased Product ID",value:this.FCs},{name:"Purchased Product Tag",value:this.DCs}]},{title:"GS - Consumed Product",properties:[{name:"Is consume successful",value:this.LCs},{name:"Consume error",value:this.kCs},{name:"Consumed Product ID",value:this.NCs},{name:"Consumed Product Tag",value:this.BCs}]},{title:"GS - Last Games Collection",properties:[{name:"Collection ID",value:this.qCs.id},{name:"Collection Tag",value:this.qCs.tag},{name:"Collection Name",value:this.qCs.name},{name:"Collection Description",value:this.qCs.description},{name:"Fetch Error",value:this.sTs}]},{title:"GS - Games in Collection",properties:[{name:"Current Game Index",value:this.YCs},{name:"Current Game ID",value:this.XCs},{name:"Current Game Name",value:this.KCs},{name:"Current Game Description",value:this.ZCs},{name:"Current Game Icon",value:this.QCs},{name:"Current Game Url",value:this.tTs}]},{title:"GS - Documents",properties:[{name:"Document Type",value:this.document.type},{name:"Document Content",value:this.document.content},{name:"Fetch Error",value:this.rTs}]},{title:"GS - Sounds",properties:[{name:"Is SFX Muted",value:this.Gxs.YIs.XIs},{name:"Is Music Muted",value:this.Gxs.YIs.KIs},{name:"Is Muted",value:this.Gxs.YIs.ZIs}]}]:[]}},globalThis.Gs.uq.oxs.aq={hGs:()=>!0,SGs(t){return this.Vxs===t},wGs(t){return this.Vxs===t},vGs(t){return this.Vxs===t},oGs:()=>!0,aGs:()=>!0,lGs:()=>!0,uGs:()=>!0,cGs:()=>!0,fGs:()=>!0,dGs:()=>!0,pGs:()=>!0,mGs:()=>!0,gGs:()=>!0,mMs:()=>!0,CPs(){return this.HCs},TPs(){return this.Gxs.Ixs.pIs},MPs(){return this.Gxs.Ixs.mIs},IPs(t){return this.Gxs.Ixs.has(t)},GPs(t){return this.Gxs.Ixs.SIs(t)._Ps.length},PPs(t,s){return this.lxs.compare[t](this.Gxs.Ixs.RPs,s)},APs(t,s,e){return this.lxs.compare[s](this.Gxs.Ixs.get(t),e)},EPs(){return each(this.runtime,this.Gxs.Ixs.bIs,t=>{this.Vxs=t.key,this.Wxs=t.type,this.zxs=t.name,this.jxs=this.Gxs.Ixs.get(t.key)}),!1},OPs(t){return each(this.runtime,this.Gxs.Ixs.SIs(t)._Ps,(t,s)=>{this.Xxs=t.value,this.Kxs=t.name,this.Zxs=s}),!1},AGs:()=>!0,EGs:()=>!0,FPs(t){return this.kxs===t},DPs:()=>!0,LPs(t){return this.kxs===t},kPs:()=>!0,NPs(t){return this.Bxs===t},BPs:()=>!0,$Ps(t){return this.Bxs===t},UPs:()=>!0,VPs:()=>!0,WPs:()=>!0,zPs(){return each(this.runtime,this._xs,(t,s)=>{this.Dxs=s,this.Lxs=t}),!1},jPs(){return each(this.runtime,this.Axs.Fxs,(t,s)=>{this.Dxs=s,this.Lxs=t}),!1},HPs(){return each(this.runtime,this.Axs.Exs,(t,s)=>{this.Dxs=s,this.Lxs=t}),!1},qPs(){return each(this.runtime,this.Axs.Oxs,(t,s)=>{this.Dxs=s,this.Lxs=t}),!1},OGs:()=>!0,FGs:()=>!0,JPs:()=>!0,YPs:()=>!0,DGs(t){var s=parseInt(t,10)||0;return this.iCs.tag===t||this.iCs.id===s},LGs:()=>!0,kGs:()=>!0,NGs(t){var s=parseInt(t,10)||0;return this.iCs.tag===t||this.iCs.id===s},BGs:()=>!0,$Gs:()=>!0,XPs(t){var{KPs:t,ZPs:s,QPs:e}=this.Gxs.Qxs.tRs(t);return!!t&&(this.eCs=0,this.iCs=t,s&&(this.iCs.gPs=s.gPs,this.iCs.progress=s.progress),e&&(this.rCs=0,this.nCs=e.id,this.hCs=e.tag,this.oCs=e.name,this.aCs=e.description),!0)},sRs(){return each(this.runtime,this.Gxs.Qxs.list,(t,s)=>{var e=this.Gxs.Qxs.tRs(t.id).playerAchievement;this.eCs=s,this.iCs=t,e&&(this.iCs.gPs=e.gPs,this.iCs.progress=e.progress)}),!1},eRs(t){const s=parseInt(t,10)||0,e=this.Gxs.Qxs.iRs.find(e=>e.tag===t||e.id===s);var i=e?e.Qxs.reduce((t,s)=>{var{KPs:s,ZPs:e}=this.Gxs.Qxs.tRs(s);return s&&t.push({KPs:s,ZPs:e}),t},[]):[];return each(this.runtime,i,({KPs:t,ZPs:s},e)=>{this.eCs=e,this.iCs=t,s&&(this.iCs.gPs=s.gPs,this.iCs.progress=s.progress)}),!1},rRs(){return each(this.runtime,this.Gxs.Qxs.iRs,(t,s)=>{this.rCs=s,this.nCs=t.id,this.hCs=t.tag,this.oCs=t.name,this.aCs=t.description}),!1},nRs(){return each(this.runtime,this.Gxs.Qxs.hRs,(t,s)=>{this.lCs=s,this.uCs=t.id,this.cCs=t.GCs}),!1},oRs(){return this.iCs.gPs},aRs(){return!!this.iCs.lRs},uRs(){return!!this.iCs.cRs},fRs(){return this.fCs},dRs(t){return this.Gxs.Qxs.has(t)},pRs:()=>!0,mRs:()=>!0,F_s:()=>!0,UGs(t){var s=parseInt(t,10)||0;return this.DCs===t||this.FCs===s},WGs(t){var s=parseInt(t,10)||0;return this.DCs===t||this.FCs===s},VGs:()=>!0,jGs:()=>!0,HGs:()=>!0,zGs:()=>!0,gRs(t){var s=parseInt(t,10)||0;return this.BCs===t||this.NCs===s},yRs(t){var s=parseInt(t,10)||0;return this.BCs===t||this.NCs===s},SRs:()=>!0,wRs:()=>!0,qGs(t){var s=parseInt(t,10)||0;return this.DCs===t||this.FCs===s},YGs(t){var s=parseInt(t,10)||0;return this.DCs===t||this.FCs===s},JGs:()=>!0,XGs:()=>!0,vRs(t){var s=parseInt(t,10)||0;return this.DCs===t||this.FCs===s},bRs(t){var s=parseInt(t,10)||0;return this.DCs===t||this.FCs===s},xRs:()=>!0,CRs:()=>!0,TRs(t){const s=this.Gxs.KMs.MRs(t);return!!s&&(this.SCs=0,this.wCs=s,this.TCs=this.Gxs.KMs.ITs.filter(t=>t.productId===s.id).length,!0)},IRs(){return each(this.runtime,this.Gxs.KMs.gCs,(t,s)=>{this.SCs=s,this.wCs=t,this.TCs=this.Gxs.KMs.ITs.filter(s=>s.productId===t.id).length}),!1},GRs(){return each(this.runtime,this.Gxs.KMs.ITs,(t,s)=>{this.MCs=s,this.ICs=t}),!1},_Rs(){return 0<this.TCs},PRs(){return this.ECs},RRs(){return this.LCs},ARs(){return this.RCs},ERs(){return this.ACs},ORs(t){return this.Gxs.KMs.has(t)},FRs(t){return(t=this.Gxs.KMs.DRs(t))&&t.PCs||!1},LRs(){return this.Gxs.KMs.ZMs},kRs(){return this.Gxs.KMs.NRs},BRs:()=>!0,$Rs:()=>!0,URs:()=>!0,VRs:()=>!0,WRs:()=>!0,zRs:()=>!0,jRs:()=>!0,HRs:()=>!0,qRs(){return each(this.runtime,this.images,(t,s)=>{this.aTs=s,this.fTs=t}),!1},JRs(t){var s=(s=this.images.find(s=>s.id===t))?s.tags:[];return each(this.runtime,s||[],(t,s)=>{this.lTs=s,this.uTs=t}),!1},YRs(){return this.oTs},XRs(){return this.Gxs.images.jMs},KRs:()=>!0,ZRs:()=>!0,QRs:()=>!0,tAs:()=>!0,sAs:()=>!0,eAs:()=>!0,iAs:()=>!0,rAs:()=>!0,nAs:()=>!0,hAs:()=>!0,oAs(){return each(this.runtime,this.files,(t,s)=>{this.gTs=s,this.vTs=t}),!1},aAs(t){var s=(s=this.files.find(s=>s.id===t))?s.tags:[];return each(this.runtime,s||[],(t,s)=>{this.yTs=s,this.STs=t}),!1},lAs(){return this.mTs},uAs(){return this.Gxs.files.jMs},cAs:()=>!0,fAs:()=>!0,dAs:()=>!0,pAs:()=>!0,mAs(){return this.Gxs.zMs.mAs},gAs(){return each(this.runtime,this.Gxs.zMs.list,(t,s)=>{this.bTs=s,this.xTs=t}),!1},yAs(t,s,e){return this.lxs.compare[s](this.Gxs.zMs.get(t),e)},SAs(t,s){return this.Gxs.zMs.type(t)===this.lxs.wxs[s]},wAs(t){return this.Gxs.zMs.has(t)},s_s:()=>!0,e_s:()=>!0,i_s:()=>!0,vAs(){return this.Gxs.fullscreen.isEnabled},r_s:()=>!0,n_s:()=>!0,h_s:()=>!0,o_s:()=>!0,a_s:()=>!0,l_s:()=>!0,u_s(t){return this.$Cs===t},c_s(t){return this.$Cs===t},f_s(t){return this.$Cs===t},d_s:()=>!0,p_s:()=>!0,m_s:()=>!0,g_s:()=>!0,bAs(){return this.Gxs.eIs.iIs},xAs(){return this.Gxs.eIs.rIs},CAs(){return this.Gxs.eIs.nIs},TAs(){return this.Gxs.eIs.hIs},MAs(){return this.Gxs.eIs.IAs},GAs(){return this.Gxs.eIs._As},PAs(){return this.Gxs.eIs.RAs},AAs(){return this.Gxs.eIs.EAs},OAs(){return this.Gxs.eIs.FAs},DAs(){return this.Gxs.eIs.oIs},LAs(){return Boolean(this.UCs)},I_s:()=>!0,G_s:()=>!0,__s:()=>!0,P_s:()=>!0,kAs(){return this.Gxs.xMs},oe(){return this.Gxs.Kq},NAs(t){return this.Gxs.device.type===this.lxs.pxs[t]},BAs(){return this.Gxs.fPs},$As(){return this.Gxs.TMs},Hds(t){return this.Gxs.language===this.lxs.language[t]},R_s:()=>!0,uQt:()=>!0,B1(){return this.Gxs.N1},A_s:()=>!0,E_s:()=>!0,UAs(){return this.Gxs.CMs},VAs(){return this.Gxs.platform.RMs},WAs(){return this.Gxs.platform.zAs},jAs(){return this.Gxs.platform.tag},HAs(){return this.Gxs.platform.qAs},JAs(){return this.Gxs.platform.YAs},XAs(t){return this.Gxs.platform.type===this.lxs.platform[t]},KAs(){return this.Gxs.platform.ZAs},QAs(){return this.Gxs.platform.tEs},y_s:()=>!0,S_s:()=>!0,w_s:()=>!0,v_s:()=>!0,sEs(){return this.VCs},eEs(){return this.WCs},iEs(){return this.Gxs.AMs.rEs},nEs(){return this.Gxs.AMs.EMs},hEs(){return this.Gxs.AMs.OMs},oEs(){return this.Gxs.AMs.FMs},aEs(){return this.Gxs.AMs.lEs},uEs(){return this.Gxs.AMs.cEs},b_s:()=>!0,T_s:()=>!0,M_s:()=>!0,fEs(){return this.zCs},dEs(){return this.Gxs.app.MMs},pEs(){return this.Gxs.app.mEs},gEs(){return this.Gxs.app.yEs},KGs:()=>!0,ZGs:()=>!0,SEs:()=>!0,wEs:()=>!0,vEs(t){return this.eTs===t},bEs(t){return this.eTs===t},xEs(){return each(this.runtime,this.qCs.JCs,(t,s)=>{this.YCs=s,this.XCs=t.id,this.KCs=t.name,this.ZCs=t.description,this.QCs=t.icon,this.tTs=t.url}),!1},CEs(){return this.Gxs.VMs.ZMs},QGs:()=>!0,t_s:()=>!0,TEs:()=>!0,MEs:()=>!0,IEs(t){return this.iTs===this.lxs.mxs[t]},GEs(t){return this.iTs===this.lxs.mxs[t]},_Es(t){return this.TTs===t},PEs:()=>!0,REs(t){return this.TTs===t},AEs:()=>!0,EEs(){return each(this.runtime,this.OEs,(t,s)=>{this.CTs=s,this.MTs=t}),!1},FEs(){return each(this.runtime,this.MTs.Qxs,(t,s)=>{this.lCs=s,this.uCs=t.id,this.cCs=t.GCs}),!1},DEs(){return each(this.runtime,this.MTs.ITs,(t,s)=>{this.MCs=s,this.ICs=t}),!1},D_s(t){return!t||this.rMs(t)},L_s(t){return!t||this.rMs(t)},k_s(t){return!t||this.rMs(t)},N_s(t){return!t||this.rMs(t)},LEs(t){return t=this.Gxs.CIs._Is(t)||{},this.RTs(t),isExists(t.ATs)},kEs(){return each(this.runtime,this.Gxs.CIs.list,(t,s)=>{t=this.Gxs.CIs._Is(t.id),this.RTs(t,s)}),!1},NEs(){return 0<this.PTs.BEs},$Es(){return 0<this.PTs.UEs},VEs(){return this._Ts.WEs},zEs(t){return this.Gxs.CIs.has(t)},jEs(t){return this.Gxs.CIs.IIs(t)},HEs(t){return this.Gxs.CIs.GIs(t)},B_s(t){return!t||this.sMs.id===t||this.sMs.tag===t},$_s(t){return!t||this.sMs.id===t||this.sMs.tag===t},U_s(t){return!t||this.sMs.id===t||this.sMs.tag===t},qEs(t){return this.LTs(t),isExists(this.FTs.DTs)},JEs(){return each(this.runtime,this.Gxs.NTs.list,(t,s)=>{this.LTs(t.id,s)}),!1},YEs(){return each(this.runtime,this.FTs.DTs.XEs||[],(t,s)=>{this.UTs(t,s)}),!1},KEs(){return!!this.FTs.RIs},ZEs(){return!!this.FTs.AIs},QEs(){return!!this.FTs.DTs.tOs},sOs(t){return this.Gxs.NTs.RIs(t)},eOs(t){return this.Gxs.NTs.AIs(t)},iOs(t){return this.$Ts.type===this.lxs.yxs[t]},V_s(t){return!t||this.rMs(t)},W_s(t){return!t||this.rMs(t)},j_s(t,s){return this.nMs(t,s)},H_s(t,s){return this.nMs(t,s)},J_s(t,s,e){return this.nMs(t,s,e)},Y_s(t,s,e){return this.nMs(t,s,e)},X_s(t,s){return this.nMs(t,s)},K_s(t,s){return this.nMs(t,s)},Z_s(t){return this.nMs(t)},Q_s(t){return this.nMs(t)},rOs(t){return this.jTs(t),isExists(this.WTs.scheduler)},nOs(t,s){return this.JTs(t,s),isExists(this.zTs.scheduler)&&this.zTs.z_s===s},hOs(t,s,e){return this.JTs(t,s),!!(t=this.zTs.NTs||[])[e]&&(this.LTs(t[e].id),!!this.FTs.DTs)},oOs(){return each(this.runtime,this.Gxs.qTs.list,(t,s)=>{this.jTs(t.id,s)}),!1},aOs(){var t=Array.from({length:this.WTs.scheduler.Zm||0});return each(this.runtime,t,(t,s)=>{this.JTs(this.WTs.scheduler.id,s+1)}),!1},lOs(){return each(this.runtime,this.WTs.uOs,t=>{this.JTs(this.WTs.scheduler.id,t)}),!1},cOs(){return each(this.runtime,this.zTs.XEs||[],(t,s)=>{this.UTs(t,s)}),!1},fOs(){return each(this.runtime,this.zTs.NTs||[],(t,s)=>{this.LTs(t.id,s)}),!1},dOs(){return this.WTs.FIs},pOs(){return!!this.WTs.scheduler.mOs},gOs(){return this.WTs.scheduler.yOs},SOs(){return this.zTs.wOs},vOs(){return this.zTs.bOs},xOs(){return this.zTs.COs},TOs(){return this.zTs.MOs},IOs(){return this.zTs.LIs},GOs(){return this.zTs.NIs},_Os(t){return this.Gxs.qTs.FIs(t)},POs(t){return this.Gxs.qTs.DIs(t)},ROs(t,s){return this.Gxs.qTs.LIs(t,s)},AOs(t,s,e){return this.Gxs.qTs.kIs(t,s,e)},EOs(t,s){return this.Gxs.qTs.NIs(t,s)},OOs(t){return this.WTs.scheduler.type===this.lxs.Sxs[t]},tPs(t){return!t||this.rMs(t)},sPs(t){return!t||this.rMs(t)},FOs(t){return this.ZTs(t),isExists(this.KTs.event)},DOs(){return each(this.runtime,this.Gxs.events.list,(t,s)=>{this.ZTs(t.id,s)}),!1},LOs(){return each(this.runtime,this.KTs.event.NTs||[],(t,s)=>{this.LTs(t.id,s)}),!1},kOs(){return this.KTs.zIs},NOs(){return this.KTs.event.isActive},BOs(){return this.KTs.event.$Os},UOs(t){return this.Gxs.events.has(t)},VOs(t){return this.Gxs.events.zIs(t)},WOs(t,s){return this.Gxs.experiments.has(t,s)},ePs:()=>!0,iPs:()=>!0,zOs(t){return this.Gxs.aht.has(t)},jOs(){return each(this.runtime,this.Gxs.aht.list||[],t=>{this.hMs=t}),!1},HOs(){return this.Txs},qOs:()=>!0,bGs:()=>!0,TGs:()=>!0,xGs:()=>!0,MGs:()=>!0,CGs:()=>!0,IGs:()=>!0,JOs(){return each(this.runtime,this.Gxs.jIs.list,t=>{this.Hxs=t.tag,this.qxs=t.value}),!1},GGs:()=>!0,_Gs:()=>!0,PGs:()=>!0,RGs:()=>!0,rPs:()=>!0,nPs:()=>!0,hPs:()=>!0,oPs:()=>!0,aPs:()=>!0,lPs:()=>!0,uPs:()=>!0,YOs(){return this.Gxs.YIs.XIs},XOs(){return this.Gxs.YIs.KIs},KOs(){return this.Gxs.YIs.ZIs}},globalThis.Gs.uq.oxs.qdt={ZOs(t){this.Gxs.Ixs.name=t},QOs(t){this.Gxs.Ixs.gIs=t},tFs(t){this.Gxs.Ixs.RPs=t},sFs(t){this.Gxs.Ixs.RPs+=t},pPs(t,s){this.Gxs.Ixs.set(t,s)},eFs(t,s){this.Gxs.Ixs.set(t,!s)},iFs(t,s){this.Gxs.Ixs.add(t,s)},rFs(t){this.Gxs.Ixs.toggle(t)},nFs(){this.Gxs.Ixs.reset()},hFs(){this.Gxs.Ixs.remove()},oFs(t=!1,s){return this.Gxs.Ixs.sync({aFs:t,storage:this.lxs.uxs[s]})},lFs(t,s=!1,e){return this.Gxs.Ixs.uFs({interval:t,aFs:s,storage:this.lxs.uxs[e]})},cFs(t){return this.Gxs.Ixs.fFs({storage:this.lxs.uxs[t]})},dFs(){return this.Gxs.Ixs.load()},pFs(){return this.Gxs.Ixs.login()},mFs(){return this.Gxs.Ixs.logout()},gFs(){return this.Gxs.Ixs.yIs()},yFs(){return this.Mxs.Ixs.ready},SFs(t,s,e,i,r,n,h){return this.Gxs._xs.open({id:this.Gxs.Ixs.id,wFs:stoarr(t),order:0===s?"DESC":"ASC",vFs:e,bFs:h,dxs:this.lxs.dxs[i],xFs:stoarr(r),CFs:stoarr(n)}).catch(t=>{this.Cxs(!1,t)})},TFs(t,s,e,i,r,n,h){return this.Gxs._xs.fetch({id:this.Gxs.Ixs.id,wFs:stoarr(s),order:0===e?"DESC":"ASC",vFs:i,bFs:h,dxs:this.lxs.dxs[r],xFs:stoarr(n)}).then(s=>{this.kxs=t,this.Nxs="default",this.Pxs=s._xs,this._xs=s.xIs,this.Axs=s,this.Cxs(!0),this.aZ(this.xxs.FPs),this.aZ(this.xxs.DPs)}).catch(s=>{this.Cxs(!1,s),this.kxs=t,this.Nxs="default",this.aZ(this.xxs.LPs),this.aZ(this.xxs.kPs)})},MFs(t,s,e,i,r){return this.Gxs._xs.BMs({bFs:i,id:this.Gxs.Ixs.id,wFs:stoarr(s),xFs:stoarr(r),order:0===e?"DESC":"ASC"}).then(s=>{this.kxs=t,this.Nxs="default",this.Bxs=t,this.Lxs=Object.assign(this.Gxs.Ixs.toJSON(),s.Ixs),this.$xs=s.Ixs.position,(this.Axs=s).Fxs=[],this.Cxs(!0),this.aZ(this.xxs.NPs),this.aZ(this.xxs.BPs)}).catch(s=>{this.Cxs(!1,s),this.kxs=t,this.Nxs="default",this.Bxs=t,this.aZ(this.xxs.$Ps),this.aZ(this.xxs.UPs)})},IFs(t,s,e,i,r,n,h,o){return t={id:parseInt(t,10)||0,tag:t,variant:s,vFs:i,bFs:o,order:this.lxs.order[e],dxs:this.lxs.dxs[r],xFs:stoarr(n),CFs:stoarr(h)},this.Gxs._xs.GFs(t).catch(console.warn)},_Fs(t,s,e,i,r,n,h){return i={id:parseInt(t,10)||0,tag:t,variant:s,vFs:i,bFs:h,order:this.lxs.order[e],dxs:this.lxs.dxs[r],xFs:stoarr(n)},this.Gxs._xs.NMs(i).then(e=>{this.kxs=t,this.Nxs=s,this.Pxs=e._xs,this._xs=e.xIs,this.Axs=e,this.Cxs(!0),this.aZ(this.xxs.FPs),this.aZ(this.xxs.DPs)}).catch(e=>{this.Cxs(!1,e),this.kxs=t,this.Nxs=s,this.aZ(this.xxs.LPs),this.aZ(this.xxs.kPs)})},PFs(t,s,e,i,r){return i={id:parseInt(t,10)||0,tag:t,variant:s,bFs:i,order:this.lxs.order[e],xFs:stoarr(r)},this.Gxs._xs.$Ms(i).then(e=>{this.Bxs=t,this.kxs=t,this.Nxs=s,this.Lxs=Object.assign(this.Gxs.Ixs.toJSON(),e.Ixs),this.$xs=e.Ixs.position,(this.Axs=e).Fxs=[],this.Cxs(!0),this.aZ(this.xxs.NPs),this.aZ(this.xxs.BPs)}).catch(e=>{this.Cxs(!1,e),this.Bxs=t,this.kxs=t,this.Nxs=s,this.aZ(this.xxs.$Ps),this.aZ(this.xxs.UPs)})},RFs(t,s,e){var i=(i=this.Rxs[t])?i[s]:null,r=parseInt(t,10)||0;return this.Gxs._xs.AFs({id:r,tag:t,variant:s,aFs:e,EFs:i}).then(e=>{this.kxs=t,this.Nxs=s,this.Bxs=t,this.Rxs[t]||(this.Rxs[t]={}),this.Rxs[t][s]=e.EFs,this.Cxs(!0),this.aZ(this.xxs.VPs)}).catch(e=>{this.Cxs(!1,e),this.kxs=t,this.Nxs=s,this.Bxs=t,this.aZ(this.xxs.WPs)})},OFs(t,s,e,i){this.Rxs[t]||(this.Rxs[t]={}),this.Rxs[t][s]||(this.Rxs[t][s]={}),this.Rxs[t][s][e]=i},FFs(){return this.Gxs.Qxs.open().catch(console.warn)},DFs(){return this.Gxs.Qxs.fetch().then(t=>{this.Qxs=t.Qxs,this.tCs=t.tCs,this.sCs=t.sCs,this.Cxs(!0),this.aZ(this.xxs.JPs)}).catch(t=>{this.Cxs(!1,t),this.aZ(this.xxs.YPs)})},LFs(t){return this.Gxs.Qxs.unlock(this.bxs(t))},kFs(t,s){const e=this.bxs(t);return e.progress=Number(s),this.Gxs.Qxs.UMs(e)},NFs(){return this.Gxs.KMs.QMs().then(t=>{this.gCs=t.gCs,this.yCs=t.yCs,this.Cxs(!0),this.aZ(this.xxs.pRs)}).catch(t=>{this.Cxs(!1,t),this.aZ(this.xxs.mRs)})},BFs(t){return this.Gxs.KMs.tIs(this.bxs(t))},$Fs(t){var s=parseInt(t,10)||0;return this.Gxs.KMs.sIs(0<s?{id:s}:{tag:t}).then(t=>{this.LCs=t.UFs,this.kCs=t.error||"",this.Cxs(t.UFs,t.error);var s=t.product||{};if(this.NCs=s.id||0,this.BCs=s.tag||"",t.UFs)return this.aZ(this.xxs.gRs),void this.aZ(this.xxs.SRs);this.aZ(this.xxs.yRs),this.aZ(this.xxs.wRs)}).catch(t=>{this.LCs=!1,this.kCs=this.vxs(t),this.Cxs(!1,t),this.aZ(this.xxs.yRs),this.aZ(this.xxs.wRs)})},VFs(t){return this.Gxs.KMs.subscribe(this.bxs(t))},WFs(t){var s=parseInt(t,10)||0;return this.Gxs.KMs.unsubscribe(0<s?{id:s}:{tag:t}).then(t=>{this.ACs=t.UFs,this.Cxs(t.UFs,t.error);var s=t.product||{},e=t.tIs||{};if(this.ICs=e,this.wCs=s,this.TCs=1,this.FCs=s.id||0,this.DCs=s.tag||"",t.UFs)return this.aZ(this.xxs.vRs),void this.aZ(this.xxs.xRs);this.aZ(this.xxs.bRs),this.aZ(this.xxs.CRs)}).catch(t=>{this.ACs=!1,this.Cxs(!1,t),this.aZ(this.xxs.bRs),this.aZ(this.xxs.XGs)})},zFs(t,s,e,i){return this.Gxs.images.fetch({dTs:s,vFs:e,offset:i,tags:stoarr(t)}).then(t=>{this.images=t.items,this.oTs=t.jFs,this.Cxs(!0),this.aZ(this.xxs.BRs)}).catch(t=>{this.Cxs(!1,t),this.aZ(this.xxs.$Rs)})},HFs(t,s,e){return this.Gxs.images.qMs({dTs:s,vFs:e,tags:stoarr(t)}).then(t=>{this.images=t.items,this.oTs=t.jFs,this.Cxs(!0),this.aZ(this.xxs.URs)}).catch(t=>{this.Cxs(!1,t),this.aZ(this.xxs.VRs)})},qFs(t){return this.Gxs.images.upload({tags:stoarr(t)}).then(t=>{this.fTs=t||{},this.Cxs(!0),this.aZ(this.xxs.WRs)}).catch(t=>{this.Cxs(!1,t),this.aZ(this.xxs.zRs)})},JFs(t,s){return this.Gxs.images.HMs({url:t,tags:stoarr(s)}).then(t=>{this.fTs=t||{},this.Cxs(!0),this.aZ(this.xxs.WRs)}).catch(t=>{this.Cxs(!1,t),this.aZ(this.xxs.zRs)})},YFs(){return this.Gxs.images.JMs().then(t=>{this.cTs=t.XFs,this.Cxs(!0),this.aZ(this.xxs.jRs)}).catch(t=>{this.Cxs(!1,t),this.cTs="",this.Txs=!1,this.aZ(this.xxs.HRs)})},KFs(t,s,e,i){return this.Gxs.files.fetch({dTs:s,vFs:e,offset:i,tags:stoarr(t)}).then(t=>{this.files=t.items,this.mTs=t.jFs,this.Cxs(!0),this.aZ(this.xxs.KRs)}).catch(t=>{this.Cxs(!1,t),this.aZ(this.xxs.ZRs)})},ZFs(t,s,e){return this.Gxs.files.qMs({dTs:s,vFs:e,tags:stoarr(t)}).then(t=>{this.files=t.items,this.mTs=t.jFs,this.Cxs(!0),this.aZ(this.xxs.QRs)}).catch(t=>{this.Cxs(!1,t),this.aZ(this.xxs.tAs)})},QFs(t){return this.Gxs.files.upload({tags:stoarr(t)}).then(t=>{this.vTs=t||{},this.Cxs(!0),this.aZ(this.xxs.sAs)}).catch(t=>{this.Cxs(!1,t),this.aZ(this.xxs.eAs)})},tDs(t,s,e){return this.Gxs.files.HMs({url:t,filename:s,tags:stoarr(e)}).then(t=>{this.vTs=t||{},this.Cxs(!0),this.aZ(this.xxs.sAs)}).catch(t=>{this.Cxs(!1,t),this.aZ(this.xxs.eAs)})},sDs(t,s,e){return this.Gxs.files.YMs({content:t,filename:s,tags:stoarr(e)}).then(t=>{this.vTs=t||{},this.Cxs(!0),this.aZ(this.xxs.sAs)}).catch(t=>{this.Cxs(!1,t),this.aZ(this.xxs.eAs)})},eDs(t){return this.Gxs.files.XMs(t).then(t=>{this.pTs=t,this.Cxs(!0),this.aZ(this.xxs.iAs)}).catch(t=>{this.pTs="",this.Cxs(!1,t),this.aZ(this.xxs.rAs)})},iDs(t){return this.Gxs.files.JMs(t).then(t=>{this.wTs=t.XFs,this.Cxs(!0),this.aZ(this.xxs.nAs)}).catch(t=>{this.Cxs(!1,t),this.wTs="",this.Txs=!1,this.aZ(this.xxs.hAs)})},rDs(){return this.Gxs.zMs.fetch().then(()=>{this.Cxs(!0),this.aZ(this.xxs.cAs)}).catch(t=>{this.Cxs(!1,t),this.aZ(this.xxs.fAs)})},nDs(t=""){return t=t.split(",").reduce((t,s)=>{const[e,i]=s.split("=");return e&&i&&(t[e.trim()]=i.trim()),t},{}),this.Gxs.zMs.hDs({oDs:t}).then(t=>{this.Cxs(!0),this.Uxs=t,this.aZ(this.xxs.dAs)}).catch(t=>{this.Cxs(!1,t),this.aZ(this.xxs.pAs)})},aDs(){return this.Gxs.fullscreen.open()},lDs(){return this.Gxs.fullscreen.close()},uDs(){return this.Gxs.fullscreen.toggle()},cDs(t=!1){return this.Gxs.eIs.aIs({fDs:t})},dDs(t=!1,s=""){return this.$Cs=s,this.Gxs.eIs.lIs({pDs:t})},mDs(){return this.Gxs.eIs.uIs()},gDs(){return this.Gxs.eIs.cIs()},yDs(){return this.Gxs.eIs.fIs()},SDs(){return this.Gxs.eIs.dIs()},wDs(t){return this.Gxs.GMs._Ms(t)},vDs(t,s){return this.Gxs.GMs.PMs(t,s)},bDs(t,s,e){return this.Gxs.AMs.share({text:t,url:s,image:e})},xDs(t,s,e){return this.Gxs.AMs.DMs({text:t,url:s,image:e})},CDs(t,s,e){return this.Gxs.AMs.LMs({text:t,url:s,image:e})},TDs(){return this.Gxs.AMs.MDs()},IDs(t,s){return this.Gxs.jIs.register({tag:t,value:s})},GDs(t,s){return this.Gxs.jIs.check({tag:t,value:s})},_Ds(t){return this.Gxs.jIs.delete({tag:t})},PDs(t){return this.Gxs.storage.get(t)},RDs(t,s){return this.Gxs.storage.set(t,s)},ADs(t){return this.Gxs.storage.HIs(t)},EDs(t,s){return this.Gxs.storage.qIs(t,s)},ODs(t){return this.Gxs.storage.FDs(this.lxs.cxs[t])},DDs(t){var s=parseInt(t,10)||0;return this.Gxs.VMs.open(0<s?{id:s}:{tag:t||"ANY"})},LDs(t){var s=parseInt(t,10)||0;return this.Gxs.VMs.fetch(0<s?{id:s}:{tag:t}).then(s=>{this.eTs=t,this.qCs=s,this.aZ(this.xxs.vEs),this.aZ(this.xxs.SEs)}).catch(s=>{this.Cxs(!1,s),this.eTs=t,this.sTs=s&&s.message||"",this.aZ(this.xxs.bEs),this.aZ(this.xxs.wEs)})},kDs(t){return t=this.lxs.mxs[t],this.Gxs.WMs.open({type:t})},NDs(t,s){const e=this.lxs.mxs[t];return t=this.lxs.gxs[s],this.Gxs.WMs.fetch({type:e,format:t}).then(t=>{this.iTs=e,this.document=t,this.aZ(this.xxs.IEs),this.aZ(this.xxs.TEs)}).catch(t=>{this.Cxs(!1,t),this.rTs=this.vxs(t),this.iTs=e,this.aZ(this.xxs.GEs),this.aZ(this.xxs.MEs)})},BDs(t,s){return this.Gxs.xIs.fetch({$Ds:stoarr(s,Number)}).then(s=>{this.TTs=t,this.OEs=s.xIs,this.Cxs(!0),this.aZ(this.xxs._Es),this.aZ(this.xxs.PEs)}).catch(s=>{this.TTs=t,this.Cxs(!1,s),this.aZ(this.xxs.REs),this.aZ(this.xxs.AEs)})},UDs(t,s){return this.Gxs.xIs.fetch({$Ds:[Number(s)]}).then(s=>{this.TTs=t,s.xIs[0]?(this.OEs=s.xIs,this.CTs=0,this.MTs=s.xIs[0],this.Cxs(!0),this.aZ(this.xxs._Es),this.aZ(this.xxs.PEs)):(this.Cxs(!1,new Error("player_not_found")),this.aZ(this.xxs.REs),this.aZ(this.xxs.AEs))}).catch(s=>{this.TTs=t,this.Cxs(!1,s),this.aZ(this.xxs.REs),this.aZ(this.xxs.AEs)})},VDs(t,s,e,i,r,n){return this.Gxs.windows.JIs({title:t,description:s,WDs:e,zDs:i,jDs:r,HDs:n}).catch(console.warn)},qDs(){return this.Gxs.app.IMs()},JDs(){return this.Gxs.app.YDs()},XDs(t){return this.Gxs.SMs(this.lxs.language[t])},KDs(t=""){return this.Gxs.SMs(t.toLowerCase())},ZDs(t){return this.Gxs.wMs(this.lxs.fxs[t])},QDs(t,s,e){return this.Gxs.tLs({url:t,blur:s,sLs:e})},eLs(){return this.Gxs.loadOverlay()},iLs(){return this.Gxs.pause()},C1(){return this.Gxs.resume()},rLs(){return this.Gxs.YIs.QIs()},nLs(){return this.Gxs.YIs.tGs()},hLs(){return this.Gxs.YIs.sGs()},oLs(){return this.Gxs.YIs.eGs()},aLs(){return this.Gxs.YIs.iGs()},lLs(){return this.Gxs.YIs.rGs()},uLs(){return this.Gxs.gMs()},cLs(){return this.Gxs.vMs()},fLs(){return this.Gxs.bMs()},dLs(t,s){this.hTs[t]=s},pLs(){this.hTs={}},mLs(t){return this.Gxs.CIs.accept(this.bxs(t))},gLs(t,s){const e=this.bxs(t);return e.yLs=!!s,this.Gxs.CIs.MIs(e)},SLs(t){return this.Gxs.NTs.claim({id:t,tag:t})},wLs(t){return this.Gxs.qTs.register(this.bxs(t))},vLs(t,s){return this.Gxs.qTs.$Is(t,s)},bLs(t,s,e){return this.Gxs.qTs.UIs(t,s,e)},xLs(t,s){return this.Gxs.qTs.VIs(t,s)},CLs(t){return this.Gxs.qTs.WIs(t)},TLs(t){return this.Gxs.events.join(this.bxs(t))},MLs(t){try{var s=JSON.parse(t);if(!("jCs"in s))throw new Error("Data was corrupted");this.CC(s)}catch(t){this.aZ(this.xxs.qOs)}}},globalThis.Gs.uq.oxs.Jdt={ILs(){return this.Gxs.Ixs.id},GLs(){return this.Gxs.Ixs.RPs},_Ls(){return this.Gxs.Ixs.name},PLs(){return this.Gxs.Ixs.gIs},RLs(t){return this.Gxs.Ixs.get(t)},ALs(t){return this.Gxs.Ixs.is(t)},ELs(t){return this.Gxs.Ixs.wIs(t)},OLs(t,s){return this.Gxs.Ixs.vIs(t,s)},FLs(t,s){return(t=this.Gxs.Ixs.SIs(t)._Ps[s])?t.value:""},DLs(t,s){return this.Gxs.Ixs.SIs(t)._Ps.findIndex(t=>t.value===s)},LLs(){return this.Vxs||""},kLs(){return this.Wxs||""},NLs(){return this.zxs||""},BLs(){return"string"==typeof this.jxs?this.jxs:Number(this.jxs||0)},$Ls(){return"string"==typeof this.Xxs?this.Xxs:Number(this.Xxs||0)},ULs(){return this.Kxs||""},VLs(){return this.Zxs||0},WLs(){return this.Gxs.Ixs.stats.zLs||0},jLs(){return this.Gxs.Ixs.stats.HLs||0},qLs(){return this.Gxs.Ixs.stats.JLs||0},YLs(){return this.Gxs.Ixs.stats.XLs||0},KLs(){return this.Lxs.name||""},ZLs(){return this.Lxs.gIs||""},QLs(){return this.Lxs.id||0},tks(){return this.Lxs.RPs||0},sks(){return this.Lxs.position||0},eks(){return this.Dxs||0},iks(t){return t in this.Lxs?this.Lxs[t]:0},rks(t,s){return(t=this._xs[t])&&s in t?t[s]:0},nks(){return this.$xs||0},hks(){return this.kxs},oks(){return this.$Cs},aks(){return this.Nxs},vAs(){return Number(this.Gxs.fullscreen.isEnabled)},Hds(){return this.Gxs.language},lks(){return this.Gxs.fxs},uks(){return this.Gxs.cks},fks(){return new Date(this.Gxs.cks).getTime()},B1(){return this.Gxs.N1},YOs(){return this.Gxs.YIs.XIs},XOs(){return this.Gxs.YIs.KIs},KOs(){return this.Gxs.YIs.ZIs},UAs(){return this.Gxs.CMs},NAs(){return this.Gxs.device.type},XAs(){return this.Gxs.platform.type},dks(){return this.Gxs.platform.tag},pks(){return this.Gxs.app.title},mks(){return this.Gxs.app.description},gks(){return this.Gxs.app.image},yks(){return this.Gxs.app.url},Sks(){return Number(this.x_s)||0},wks(){return this.Gxs.Qxs.list.length},vks(){return this.Gxs.Qxs.iRs.length},bks(){return this.Gxs.Qxs.hRs.length},xks(){return this.eCs},Cks(){return this.iCs.id},Tks(){return this.iCs.tag},Mks(){return this.iCs.name},Iks(){return this.iCs.description},Gks(){return this.iCs.icon},_ks(){return this.iCs.vCs},Pks(){return this.iCs.mPs},Rks(){return this.iCs.gPs},Aks(){return this.iCs.yPs},Eks(){return this.iCs.SPs},Oks(){return this.iCs.progress},Fks(){return this.iCs.wPs},Dks(){return this.iCs.vPs},Lks(){return this.rCs},kks(){return this.Nks},Bks(){return this.hCs},$ks(){return this.oCs},Uks(){return this.aCs},Vks(){return this.lCs},Wks(){return this.uCs},zks(){return this.cCs},jks(){return this.fCs},Hks(){return this.dCs},qks(){return this.iCs.id},Jks(){return this.iCs.tag},Yks(){return this.iCs.name},Xks(){return this.iCs.description},Kks(){return this.iCs.icon},Zks(){return this.iCs.vCs},Qks(){return this.iCs.mPs},tNs(t){return this.Gxs.Qxs.sNs(t)},eNs(){return this.Gxs.AMs.iNs},rNs(t){return this.Gxs.AMs.nNs(t)},hNs(){return this.Gxs.AMs.kMs(this.hTs)},oNs(){return this.SCs},aNs(){return this.wCs.id},lNs(){return this.wCs.tag},uNs(){return this.wCs.name},cNs(){return this.wCs.description},fNs(){return this.wCs.icon},dNs(){return this.wCs.vCs},pNs(){return this.wCs.bCs},mNs(){return this.wCs.xCs},gNs(){return this.wCs.CCs},yNs(){return this.TCs},SNs(){return this.MCs},wNs(){return this.ICs.id||0},vNs(){return this.ICs.tag||""},bNs(){return this.ICs.GCs||""},xNs(){return this.ICs._Cs||""},CNs(){return Number(this.ICs.PCs||!1)||0},TNs(){return this.ECs},MNs(){return this.OCs},INs(){return this.FCs},GNs(){return this.DCs},_Ns(){return this.LCs},PNs(){return this.kCs},RNs(){return this.NCs},ANs(){return this.BCs},ENs(t){return(t=this.Gxs.KMs.DRs(t))&&t.GCs||""},ONs(t){return(t=this.Gxs.KMs.DRs(t))&&t._Cs||""},FNs(){return this.aTs},DNs(){return this.fTs.id||""},LNs(){return this.fTs.src||""},kNs(){return this.fTs.width||0},NNs(){return this.fTs.height||0},BNs(){return this.fTs.dTs||0},$Ns(){return this.lTs},UNs(){return this.uTs||""},VNs(){return this.cTs||""},WNs(t,s,e,i){return this.Gxs.images.resize(t,s,e,i)},zNs(){return this.gTs},jNs(){return this.vTs.id||""},HNs(){return this.vTs.src||""},qNs(){return this.vTs.name||""},JNs(){return this.vTs.size||0},YNs(){return this.vTs.dTs||0},XNs(){return this.yTs},KNs(){return this.STs||""},ZNs(){return this.wTs||""},QNs(){return this.pTs||""},tBs(){return this.qCs.id},sBs(){return this.qCs.tag},eBs(){return this.qCs.name},iBs(){return this.qCs.description},rBs(){return this.YCs},nBs(){return this.XCs},hBs(){return this.oBs},aBs(){return this.KCs},lBs(){return this.ZCs},uBs(){return this.QCs},cBs(){return this.tTs},fBs(){return this.sTs},dBs(){return this.document.type},pBs(){return this.document.content},mBs(){return this.rTs},gBs:function(t){return this.Gxs.zMs.get(t)},yBs(t){return this.Uxs[t]||""},wAs(t){return Number(this.Gxs.zMs.has(t))},SBs(t){return this.Gxs.zMs.type(t)},wBs(){return this.bTs||0},vBs(){return this.xTs.key||""},bBs(){return this.xTs.type||""},xBs(){return this.xTs.value||""},CBs(){return this.MTs.state.name||""},TBs(){return this.MTs.state.gIs||""},MBs(){return this.MTs.state.id||0},IBs(){return this.MTs.state.RPs||0},GBs(){return this.CTs||0},_Bs(t){return this.MTs&&t in this.MTs.state?this.MTs.state[t]:0},PBs(t,s){return(t=this.OEs[t])&&s in t.state?t.state[s]:0},RBs(){return this.TTs},ABs(){return this.GTs||0},EBs(){return this._Ts.id||0},OBs(){return this._Ts.tag||""},FBs(){return this._Ts.name||""},DBs(){return this._Ts.description||""},LBs(){return this._Ts.icon||""},kBs(){return this._Ts.vCs||""},NBs(){return this.PTs.UEs||0},BBs(){return this.PTs.BEs||0},$Bs(){return this.OTs||0},UBs(){return this.FTs.DTs.id||0},VBs(){return this.FTs.DTs.tag||""},WBs(){return this.FTs.DTs.description||""},zBs(){return this.BTs||0},jBs(){return this.$Ts.id||0},HBs(){return this.$Ts.type||""},qBs(){return this.VTs||0},JBs(){return this.WTs.scheduler.id||0},YBs(){return this.WTs.scheduler.tag||0},OOs(){return this.WTs.scheduler.type||0},XBs(){return this.WTs.scheduler.Zm||0},KBs(){return this.WTs.ZBs||0},QBs(){return(this.WTs.stats||{}).JLs||0},t$s(){return(this.WTs.stats||{}).XLs||0},s$s(){return this.zTs.z_s||0},e$s(){return this.XTs||0},i$s(){return this.KTs.event.id||0},r$s(){return this.KTs.event.tag||0},n$s(){return this.KTs.event.name||0},h$s(){return this.KTs.event.description||0},o$s(){return this.KTs.event.icon||0},a$s(){return this.KTs.event.vCs||0},l$s(){return this.KTs.event.u$s||0},c$s(){return(this.KTs.stats||{}).JLs||0},f$s(){return(this.KTs.stats||{}).XLs||0},d$s(t){return this.Gxs.experiments.map[t]||""},p$s(){return this.hMs||""},m$s(){return this.lastError},HOs(){return Number(this.Txs)},g$s(t,s){return this.Gxs.y$s(t,s)},_Ft(){return JSON.stringify(this.xC())},S$s(t){return this.Gxs.jIs.get(t)},w$s(){return this.Hxs||""},v$s(){return this.qxs||""},b$s(){return this.Gxs.storage.type},x$s(){return this.Jxs||""},C$s(){return this.Yxs||""},T$s(){return this.tMs}};var C32=self.Gs;self.xZt=function(){return[C32.uq.Text,C32.Ayt.Nys,C32.uq.adt,C32.Ayt.Ryt,C32.Ayt.uvs,C32.uq.a9t,C32.uq.Nts,C32.Ayt.ebs,C32.uq.eis,C32.uq.Chs,C32.Ayt.Ibs,C32.uq.Nos,C32.uq.Mas,C32.uq.$as,C32.uq.Els,C32.uq.Touch,C32.uq.se,C32.uq.cps,C32.uq.Keyboard,C32.uq.PlatformInfo,C32.uq.Date,C32.uq.oxs,C32.uq.lq.aq.ait,C32.uq.oxs.qdt.gDs,C32.uq.lq.aq._1t,C32.uq.lq.Jdt.p4t,C32.uq.lq.Jdt.m4t,C32.uq.se.aq.Yfs,C32.uq.adt.qdt.m7t,C32.uq.lq.qdt.O2t,C32.uq.lq.qdt.E2t,C32.uq.Els.qdt.Zls,C32.uq.lq.qdt.m2t,C32.uq.$as.qdt.xls,C32.uq.$as.aq.als,C32.uq.Mas.qdt.pas,C32.uq.$as.Jdt.Gls,C32.uq.lq.qdt.e2t,C32.uq.Mas.Jdt.Hs,C32.uq.Date.Jdt.lys,C32.uq.Mas.qdt.Fas,C32.uq.Nos.aq.ias,C32.uq.Mas.aq.Oas,C32.uq.Nos.Jdt.Hos,C32.uq.Nos.Jdt.yas,C32.uq.$as.aq.lls,C32.uq.Els.aq.jls,C32.uq.Nos.qdt.pas,C32.uq.Els.Jdt.nus,C32.uq.a9t.Jdt.RFt,C32.uq.lq.aq.J1t,C32.uq.lq.qdt.l2t,C32.uq.a9t.qdt.BEt,C32.uq.lq.Jdt.g4t,C32.uq.lq.Jdt.c4t,C32.uq.a9t.Jdt.BFt,C32.uq.a9t.qdt.tA,C32.Ayt.Ryt.qdt.ews,C32.uq.adt.qdt.uC,C32.uq.adt.Jdt.LFt,C32.uq.a9t.Jdt.NFt,C32.uq.adt.qdt.dC,C32.uq.adt.Jdt.kFt,C32.uq.adt.qdt.tA,C32.uq.adt.Jdt.NFt,C32.uq.adt.Jdt.BFt,C32.uq.adt.qdt.j7t,C32.uq.lq.qdt.ph,C32.uq.lq.aq.kGt,C32.uq.lq.Jdt.d4t,C32.uq.a9t.qdt.RQ,C32.uq.Nts.qdt.gFt,C32.uq.adt.qdt.gFt,C32.uq.a9t.qdt.gFt,C32.uq.eis.qdt.gFt,C32.Ayt.Ryt.aq.IsPlaying,C32.Ayt.Ryt.qdt.QSs,C32.uq.a9t.Jdt.kFt,C32.Ayt.uvs.qdt.qvs,C32.uq.Nts.qdt.UEt,C32.uq.Nts.qdt.SOt,C32.uq.Nts.qdt.tA,C32.uq.Nts.qdt.Ces,C32.uq.Nts.Jdt._Ft,C32.uq.Nts.qdt.LO,C32.uq.Text.qdt.SOt,C32.uq.Text.qdt.Wc,C32.Ayt.uvs.aq.zvs,C32.uq.adt.qdt.OX,C32.Ayt.uvs.aq.jvs,C32.uq.lq.Jdt.g3t,C32.Ayt.uvs.Jdt.sbs,C32.Ayt.uvs.Jdt.Zvs,C32.uq.lq.aq.QMt,C32.Ayt.Ryt.aq.qSs,C32.Ayt.ebs.qdt.sDt,C32.uq.lq.aq.H1t,C32.uq.lq.Jdt.D4t,C32.uq.Nts.qdt.RQ,C32.uq.Nts.qdt.wFt,C32.uq.Nts.qdt.Css,C32.uq.Nts.Jdt.NFt,C32.uq.Nts.Jdt.BFt,C32.uq.lq.Jdt.random,C32.uq.adt.Jdt.$Ft,C32.uq.adt.Jdt.VFt,C32.uq.adt.Jdt.UFt,C32.uq.adt.Jdt.WFt,C32.uq.a9t.qdt.SOt,C32.uq.a9t.qdt.wFt,C32.uq.lq.qdt.i2t,C32.uq.Nts.Jdt.JFt,C32.uq.lq.aq.j1t,C32.uq.lq.aq.L1t,C32.uq.Nts.Jdt.LFt,C32.uq.Nts.Jdt.kFt,C32.uq.Nts.aq.FEt,C32.uq.a9t.Jdt.VFt,C32.uq.a9t.Jdt.$Ft,C32.uq.Nts.aq.DEt,C32.uq.a9t.Jdt.UFt,C32.uq.a9t.Jdt.WFt,C32.uq.Nts.aq.aFt,C32.uq.Nts.qdt.HEt,C32.uq.lq.aq.zd,C32.uq.Nts.aq.LEt,C32.Ayt.ebs.aq.hbs,C32.uq.lq.aq.x1t,C32.Ayt.ebs.aq.vbs,C32.uq.Nts.qdt.yOt,C32.uq.Nts.qdt.mOt,C32.uq.Nts.aq.NOt,C32.uq.a9t.aq.uFt,C32.uq.a9t.qdt.xFt,C32.uq.Nts.qdt.xFt,C32.Ayt.ebs.aq.bbs,C32.uq.a9t.aq.NEt,C32.uq.lq.aq.P1t,C32.uq.a9t.Jdt.LFt,C32.uq.a9t.aq.aFt,C32.uq.a9t.Jdt.rDt,C32.uq.Nts.qdt.BEt,C32.uq.Nts.Jdt.RFt,C32.uq.Chs.qdt.tA,C32.uq.Nos.aq.ras,C32.uq.lq.Jdt.max,C32.uq.lq.aq.R1t,C32.uq.adt.qdt.B7t,C32.uq.a9t.qdt.LO,C32.uq.a9t.Jdt.zFt,C32.uq.a9t.qdt.cOt,C32.uq.lq.Jdt.q4t,C32.uq.eis.qdt.Hrs,C32.uq.eis.qdt.qrs,C32.uq.se.aq._fs,C32.uq.Touch.aq.Uus,C32.Ayt.Ryt.qdt.rws,C32.uq.lq.qdt.K2t,C32.Ayt.Ryt.Jdt.Gws,C32.uq.Touch.aq.qus,C32.Ayt.Ryt.aq.XSs,C32.uq.a9t.Jdt.bOt,C32.uq.Mas.aq.Ras,C32.uq.Mas.qdt.Das,C32.uq.adt.aq.oFt,C32.uq.adt.Jdt.JFt,C32.uq.Text.qdt.gFt,C32.uq.a9t.qdt.mC,C32.uq.adt.qdt.wFt,C32.uq.a9t.qdt.yOt,C32.uq.Text.qdt.yOt,C32.uq.Text.qdt.dC,C32.uq.Chs.qdt.wFt,C32.uq.Chs.Jdt.NFt,C32.uq.lq.qdt.n2t,C32.uq.Chs.qdt.hy,C32.uq.Text.aq.T1,C32.uq.lq.aq.A1t,C32.uq.Chs.qdt.OX,C32.uq.a9t.qdt.OX,C32.uq.a9t.aq.oFt,C32.uq.a9t.aq.NOt,C32.uq.lq.aq.C1t,C32.uq.$as.qdt.gls,C32.uq.Mas.Jdt._Ft,C32.uq.$as.aq.rls,C32.uq.lq.qdt.x2t,C32.uq.lq.qdt.a2t,C32.uq.lq.qdt.A2t,C32.uq.Touch.aq.scs,C32.uq.$as.qdt.Dc,C32.uq.Mas.qdt.Ru,C32.uq.Touch.aq.ncs,C32.uq.Keyboard.aq.Ims,C32.uq.cps.aq.tms,C32.uq.adt.aq.E7t,C32.uq.adt.aq.DX,C32.uq.adt.qdt.g7t,C32.uq.oxs.aq.xAs,C32.uq.oxs.qdt.dDs,C32.uq.oxs.aq.f_s,C32.uq.Touch.Jdt.kFt,C32.uq.Touch.aq.zus,C32.uq.a9t.qdt.dC,C32.uq.cps.aq.qps,C32.uq.cps.Jdt.ums]},self.zZt=[{M$s:0},{I$s:0},{G$s:0},{Nys:0},{_$s:0},{P$s:0},{R$s:0},{Ryt:0},{uvs:0},{A$s:0},{E$s:0},{O$s:0},{F$s:0},{D$s:0},{L$s:0},{k$s:0},{N$s:0},{B$s:0},{$$s:0},{U$s:0},{V$s:0},{W$s:0},{z$s:0},{Ibs:0},{j$s:0},{H$s:0},{q$s:0},{J$s:0},{Y$s:0},{X$s:0},{Mas:0},{$as:0},{Els:0},{Touch:0},{se:0},{K$s:0},{Z$s:0},{cps:0},{Keyboard:0},{w:0},{Q$s:0},{tUs:0},{sUs:0},{eUs:0},{PlatformInfo:0},{isOpen:0},{iUs:0},{rUs:0},{bCs:0},{nUs:0},{hUs:0},{oUs:0},{aUs:0},{lUs:0},{uUs:0},{Rcs:0},{color:0},{cUs:0},{fUs:0},{dUs:0},{pUs:0},{index:0},{mUs:0},{gUs:0},{yUs:0},{Date:0},{SUs:0},{wUs:0},{vUs:0},{bUs:0},{xUs:0},{dMs:0},{CUs:0},{max:0},{TUs:0},{MUs:0},{IUs:0},{GUs:0},{_Us:0},{PUs:0},{RUs:0},{AUs:0},{EUs:0},{OUs:0},{FUs:0},{DUs:0},{LUs:0},{kUs:0},{NUs:0},{category:0},{level:0},{BUs:0},{margin:0},{x:0},{y:0},{RFt:0},{$Us:0},{sbs:0},{UUs:0},{VUs:0},{WUs:0},{zUs:0},{jUs:0},{HUs:0},{qUs:0},{JUs:0},{YUs:0},{XUs:0},{KUs:0},{ZUs:0},{delta:0}],self.QUs={M$s:class extends self.w6t{},I$s:class extends self.w6t{},G$s:class extends self.w6t{},_$s:class extends self.w6t{},P$s:class extends self.w6t{},R$s:class extends self.w6t{},A$s:class extends self.v7t{},E$s:class extends self.fts{},$$s:class extends self.ses{},U$s:class extends self.fts{},V$s:class extends self.fts{},W$s:class extends self.Irs{},z$s:class extends self.eos{},j$s:class extends self.Irs{},H$s:class extends self.v7t{},q$s:class extends self.eos{},J$s:class extends self.ses{},Y$s:class extends self.v7t{},X$s:class extends self.Zos{},Mas:class extends self._as{},$as:class extends self.MK{},Els:class extends self.MK{},Touch:class extends self.MK{},se:class extends self.MK{},K$s:class extends self.v7t{},Z$s:class extends self.v7t{},cps:class extends self.MK{},Keyboard:class extends self.MK{},tUs:class extends self.fts{},sUs:class extends self.fts{},eUs:class extends self.fts{},PlatformInfo:class extends self.MK{},cUs:class extends self.fts{},fUs:class extends self.fts{},dUs:class extends self.v7t{},pUs:class extends self.fts{},mUs:class extends self.v7t{},gUs:class extends self.v7t{},yUs:class extends self.v7t{},Date:class extends self.MK{},SUs:class extends self.ses{},wUs:class extends self.v7t{},vUs:class extends self.v7t{},bUs:class extends self.w6t{},xUs:class extends self.fts{},dMs:class extends C32.uq.oxs.Instance{},CUs:class extends self.fts{},TUs:class extends self.eos{},MUs:class extends self.ses{}};
/*!
@fileoverview gl-matrix - High performance matrix and vector operations
@author Brandon Jones
@author Colin MacKenzie IV
@version 3.4.1

Copyright (c) 2015-2021, Brandon Jones, Colin MacKenzie IV.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/